# Comparing `tmp/cloudtoken-2.1.2-py3-none-any.whl.zip` & `tmp/cloudtoken-2.1.6-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,20 +1,20 @@
-Zip file size: 52771 bytes, number of entries: 44
+Zip file size: 52814 bytes, number of entries: 44
 -rw-r--r--  2.0 unx       73 b- defN 80-Jan-01 00:00 cloudtoken/core/__init__.py
 -rw-r--r--  2.0 unx      126 b- defN 80-Jan-01 00:00 cloudtoken/core/__main__.py
 -rw-r--r--  2.0 unx     3938 b- defN 80-Jan-01 00:00 cloudtoken/core/abstract_classes.py
 -rw-r--r--  2.0 unx     3936 b- defN 80-Jan-01 00:00 cloudtoken/core/cli.py
 -rw-r--r--  2.0 unx     9715 b- defN 80-Jan-01 00:00 cloudtoken/core/core.py
 -rw-r--r--  2.0 unx     7817 b- defN 80-Jan-01 00:00 cloudtoken/core/daemon.py
 -rw-r--r--  2.0 unx      840 b- defN 80-Jan-01 00:00 cloudtoken/core/exceptions.py
 -rw-r--r--  2.0 unx      322 b- defN 80-Jan-01 00:00 cloudtoken/core/helper_classes.py
 -rw-r--r--  2.0 unx     1779 b- defN 80-Jan-01 00:00 cloudtoken/core/networking.py
 -rw-r--r--  2.0 unx    32032 b- defN 80-Jan-01 00:00 cloudtoken/core/utils.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/assume_role/__init__.py
--rw-r--r--  2.0 unx     4897 b- defN 80-Jan-01 00:00 cloudtoken/plugins/assume_role/plugin.py
+-rw-r--r--  2.0 unx     4896 b- defN 80-Jan-01 00:00 cloudtoken/plugins/assume_role/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/export_credentials_awscli/__init__.py
 -rw-r--r--  2.0 unx     2240 b- defN 80-Jan-01 00:00 cloudtoken/plugins/export_credentials_awscli/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/export_credentials_json/__init__.py
 -rw-r--r--  2.0 unx     1998 b- defN 80-Jan-01 00:00 cloudtoken/plugins/export_credentials_json/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/export_credentials_shell/__init__.py
 -rw-r--r--  2.0 unx     2303 b- defN 80-Jan-01 00:00 cloudtoken/plugins/export_credentials_shell/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/google_aws/__init__.py
@@ -22,25 +22,25 @@
 -rw-r--r--  2.0 unx     2289 b- defN 80-Jan-01 00:00 cloudtoken/plugins/google_aws/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/__init__.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/mechanisms/__init__.py
 -rw-r--r--  2.0 unx     3623 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/mechanisms/duo.py
 -rw-r--r--  2.0 unx      931 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/mechanisms/radius.py
 -rw-r--r--  2.0 unx      615 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/mechanisms/u2f.py
 -rw-r--r--  2.0 unx      213 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/mechanisms/up.py
--rw-r--r--  2.0 unx    15967 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/plugin.py
+-rw-r--r--  2.0 unx    16004 b- defN 80-Jan-01 00:00 cloudtoken/plugins/idaptive/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/okta/__init__.py
 -rw-r--r--  2.0 unx      947 b- defN 80-Jan-01 00:00 cloudtoken/plugins/okta/enums.py
 -rw-r--r--  2.0 unx      368 b- defN 80-Jan-01 00:00 cloudtoken/plugins/okta/exceptions.py
 -rw-r--r--  2.0 unx      192 b- defN 80-Jan-01 00:00 cloudtoken/plugins/okta/factors/__init__.py
 -rw-r--r--  2.0 unx     1211 b- defN 80-Jan-01 00:00 cloudtoken/plugins/okta/factors/push.py
 -rw-r--r--  2.0 unx      223 b- defN 80-Jan-01 00:00 cloudtoken/plugins/okta/factors/totp.py
 -rw-r--r--  2.0 unx     8693 b- defN 80-Jan-01 00:00 cloudtoken/plugins/okta/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/saml/__init__.py
--rw-r--r--  2.0 unx     9015 b- defN 80-Jan-01 00:00 cloudtoken/plugins/saml/plugin.py
+-rw-r--r--  2.0 unx     9116 b- defN 80-Jan-01 00:00 cloudtoken/plugins/saml/plugin.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 cloudtoken/plugins/url_generator/__init__.py
 -rw-r--r--  2.0 unx     3663 b- defN 80-Jan-01 00:00 cloudtoken/plugins/url_generator/plugin.py
-?rw-r--r--  2.0 unx       54 b- defN 16-Jan-01 00:00 cloudtoken-2.1.2.dist-info/entry_points.txt
--rw-r--r--  2.0 unx      560 b- defN 80-Jan-01 00:00 cloudtoken-2.1.2.dist-info/LICENSE.txt
-?rw-r--r--  2.0 unx       88 b- defN 16-Jan-01 00:00 cloudtoken-2.1.2.dist-info/WHEEL
-?rw-r--r--  2.0 unx     1007 b- defN 16-Jan-01 00:00 cloudtoken-2.1.2.dist-info/METADATA
-?rw-r--r--  2.0 unx     4115 b- defN 16-Jan-01 00:00 cloudtoken-2.1.2.dist-info/RECORD
-44 files, 154845 bytes uncompressed, 45995 bytes compressed:  70.3%
+-rw-r--r--  2.0 unx      560 b- defN 80-Jan-01 00:00 cloudtoken-2.1.6.dist-info/LICENSE.txt
+-rw-r--r--  2.0 unx     1008 b- defN 80-Jan-01 00:00 cloudtoken-2.1.6.dist-info/METADATA
+-rw-r--r--  2.0 unx       88 b- defN 80-Jan-01 00:00 cloudtoken-2.1.6.dist-info/WHEEL
+-rw-r--r--  2.0 unx       54 b- defN 80-Jan-01 00:00 cloudtoken-2.1.6.dist-info/entry_points.txt
+?rw-r--r--  2.0 unx     4115 b- defN 16-Jan-01 00:00 cloudtoken-2.1.6.dist-info/RECORD
+44 files, 154983 bytes uncompressed, 46038 bytes compressed:  70.3%
```

## zipnote {}

```diff
@@ -111,23 +111,23 @@
 
 Filename: cloudtoken/plugins/url_generator/__init__.py
 Comment: 
 
 Filename: cloudtoken/plugins/url_generator/plugin.py
 Comment: 
 
-Filename: cloudtoken-2.1.2.dist-info/entry_points.txt
+Filename: cloudtoken-2.1.6.dist-info/LICENSE.txt
 Comment: 
 
-Filename: cloudtoken-2.1.2.dist-info/LICENSE.txt
+Filename: cloudtoken-2.1.6.dist-info/METADATA
 Comment: 
 
-Filename: cloudtoken-2.1.2.dist-info/WHEEL
+Filename: cloudtoken-2.1.6.dist-info/WHEEL
 Comment: 
 
-Filename: cloudtoken-2.1.2.dist-info/METADATA
+Filename: cloudtoken-2.1.6.dist-info/entry_points.txt
 Comment: 
 
-Filename: cloudtoken-2.1.2.dist-info/RECORD
+Filename: cloudtoken-2.1.6.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## cloudtoken/core/__init__.py

```diff
@@ -1,3 +1,3 @@
 # THIS FILE IS OVERWRITTEN BY sync_versions.py
-__version__ = "2.1.2"
+__version__ = "2.1.6"
```

## cloudtoken/plugins/assume_role/plugin.py

```diff
@@ -36,15 +36,15 @@
         credentials = utils.find_credentials(data, exclude=[self.name])
         if not credentials:
             raise PluginError("Unable to find credetials provided by previous plugin.")
 
         if not self._get_plugin_config(["assume_role"]):
             return {}
         destination_role_arn = self._get_destination_role()
-        session_name = self._get_plugin_config(["role_session_name"], credentials["LastRole"].split("/")[-1])
+        session_name = self._get_plugin_config(["role_session_name"], credentials["AssumedRoleSessionName"])
         session_duration = self._get_plugin_config(["switch_role_session_duration"], 3600)
 
         utils.echo(f"Assume Role from {credentials['LastRole']} to {destination_role_arn}")
 
         assume_role_credentials = self._assume_role(credentials, destination_role_arn, session_name, session_duration)
         data = {"credentials": assume_role_credentials}
         return data
```

## cloudtoken/plugins/idaptive/plugin.py

```diff
@@ -338,15 +338,15 @@
     def _check_response_successful(self, response) -> None:
         if response["success"]:
             return
         self._logger.debug(f"Request to Idaptive failed {response}")
         message = response["Message"]
         if message.startswith("Authentication (login or challenge) has failed"):
             raise AuthenticationError(
-                f"Authentication (login or challenge) has failed. Normal causes of this include recently changing your password, MFA failing to authenticate or not being on a VPN."
+                f"Authentication (login or challenge) has failed. Normal causes of this include recently changing your password (try 'cloudtoken --password-prompt'), MFA failing to authenticate or not being on a VPN."
             )
         raise PluginError(response["Message"])
 
     def _perform_appclick(self):
         appkey = self._get_plugin_config(["appkey"])
         self._logger.debug(f"Performing appclick on {appkey}")
         path = f"/uprest/HandleAppClick?appkey={appkey}"  # TODO; Does this work if privilege escalation is not required for the app?
```

## cloudtoken/plugins/saml/plugin.py

```diff
@@ -224,12 +224,13 @@
                 "LastRole": arn.role,
                 "LastUpdated": datetime.now(timezone.utc).strftime("%Y-%m-%dT%H:%M:%SZ"),
                 "SAMLProvider": arn.idp,
                 "SecretAccessKey": response["Credentials"]["SecretAccessKey"],
                 "Token": response["Credentials"]["SessionToken"],
                 "Type": "AWS-HMAC",
                 "Duration": session_duration,
+                "AssumedRoleSessionName": response["AssumedRoleUser"]["AssumedRoleId"].split(":")[1]
             }
         except KeyError:
             raise PluginError(f"Unable to find all required fields in assume_role_with_saml() AWS API response.")
 
         return credentials
```

## Comparing `cloudtoken-2.1.2.dist-info/LICENSE.txt` & `cloudtoken-2.1.6.dist-info/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `cloudtoken-2.1.2.dist-info/METADATA` & `cloudtoken-2.1.6.dist-info/METADATA`

 * *Files 18% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 Metadata-Version: 2.1
 Name: cloudtoken
-Version: 2.1.2
+Version: 2.1.6
 Summary: AWS Token Vending assuming roles
 Author: Cloud Engineering
 Author-email: cloud-team@atlassian.com
 Requires-Python: >=3.7,<4.0
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
-Requires-Dist: Flask (>=1.1.2,<2.0.0)
+Requires-Dist: Flask (>=2.2.5,<3.0.0)
 Requires-Dist: appdirs (>=1.4.4,<2.0.0)
 Requires-Dist: boto3 (>=1.16.25,<2.0.0)
 Requires-Dist: deepdiff (>=5.0.2,<6.0.0)
 Requires-Dist: delegator.py (>=0.1.1,<0.2.0)
 Requires-Dist: halo (>=0.0.31,<0.0.32)
 Requires-Dist: ifaddr (>=0.1.7,<0.2.0)
-Requires-Dist: keyring (>=21.8.0,<22.0.0)
-Requires-Dist: lxml (==4.9.1)
+Requires-Dist: keyring (>=23.13.1,<24.0.0)
+Requires-Dist: lxml (==4.9.2)
 Requires-Dist: packaging (>=20.7,<21.0)
 Requires-Dist: requests (>=2.25.0,<3.0.0)
 Requires-Dist: ruamel.yaml (>=0.17.4,<0.18.0)
 Requires-Dist: xdg (>=5.0.1,<6.0.0)
```

