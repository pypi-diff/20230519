# Comparing `tmp/ccxt-3.1.1.tar.gz` & `tmp/ccxt-3.1.2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist/ccxt-3.1.1.tar", last modified: Thu May 18 23:57:55 2023, max compression
+gzip compressed data, was "dist/ccxt-3.1.2.tar", last modified: Fri May 19 11:57:11 2023, max compression
```

## Comparing `ccxt-3.1.1.tar` & `ccxt-3.1.2.tar`

### file list

```diff
@@ -1,489 +1,489 @@
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.637263 ccxt-3.1.1/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1068 2023-05-18 23:56:25.000000 ccxt-3.1.1/LICENSE.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)      100 2023-05-18 23:42:06.000000 ccxt-3.1.1/MANIFEST.in
--rw-rw-r--   0 travis    (2000) travis    (2000)   113270 2023-05-18 23:57:55.637263 ccxt-3.1.1/PKG-INFO
--rw-rw-r--   0 travis    (2000) travis    (2000)   102253 2023-05-18 23:42:06.000000 ccxt-3.1.1/README.rst
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.497250 ccxt-3.1.1/ccxt/
--rw-rw-r--   0 travis    (2000) travis    (2000)    15625 2023-05-18 23:56:24.000000 ccxt-3.1.1/ccxt/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.525253 ccxt-3.1.1/ccxt/abstract/
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/abstract/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1448 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1861 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11071 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/ascendex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2347 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2830 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1989 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4082 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7605 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19171 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2443 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitforex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    31631 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2659 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8966 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8653 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2919 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3648 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4025 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22372 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1987 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitstamp1.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9337 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7439 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bkex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2024 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2638 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1380 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      849 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5594 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3690 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1407 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/btctradeua.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1403 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71986 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3311 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9017 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3417 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14890 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2182 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinfalcon.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5354 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2504 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3736 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2707 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21126 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7452 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3128 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15499 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9386 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6177 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28044 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28044 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6840 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10949 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2596 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14331 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2129 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4165 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2266 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4979 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2867 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20600 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21746 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19005 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7168 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1474 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6930 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/lbank2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3566 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2960 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11878 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2565 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1721 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25825 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/okex5.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2752 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12172 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6301 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4575 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/poloniexfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1849 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10639 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/stex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1953 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/tidex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5875 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4094 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3463 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18450 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2130 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7934 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7689 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27028 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/xt.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1339 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3935 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-18 23:45:39.000000 ccxt-3.1.1/ccxt/abstract/zonda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41329 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33161 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   129270 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/ascendex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.589259 ccxt-3.1.1/ccxt/async_support/
--rw-rw-r--   0 travis    (2000) travis    (2000)    15428 2023-05-18 23:56:24.000000 ccxt-3.1.1/ccxt/async_support/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41553 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33307 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   129884 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/ascendex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.589259 ccxt-3.1.1/ccxt/async_support/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)       67 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   129484 2023-05-18 23:56:24.000000 ccxt-3.1.1/ccxt/async_support/base/exchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1847 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/throttler.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.593259 ccxt-3.1.1/ccxt/async_support/base/ws/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1791 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4999 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/aiohttp_client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6085 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/cache.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7289 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3733 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/fast_client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1495 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/functions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      249 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/future.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2894 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/order_book.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6079 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/base/ws/order_book_side.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1150 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62726 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   379702 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1683 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2165 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2518 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35688 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39268 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      462 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46227 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      481 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69752 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   111979 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    38049 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28522 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitforex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   215753 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42790 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   132067 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   120028 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    63629 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87785 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88471 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68835 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    82612 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    17931 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitstamp1.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    93903 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    77171 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74597 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bkex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16351 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47548 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35438 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22683 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   111410 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48897 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22323 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/btctradeua.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35602 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45959 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/buda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   397447 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    65248 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   125226 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1233 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74293 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34414 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   192757 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39252 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinfalcon.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39709 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34679 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    81496 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18912 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   108780 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    80003 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    84440 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119560 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   152866 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    89266 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1183 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/flowbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1252 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   222625 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      459 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69449 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62675 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   117197 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69616 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   364171 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87087 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      586 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    67772 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    30046 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42709 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35208 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/itbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101946 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    82024 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   160977 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101635 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37998 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    70399 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33953 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    98405 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/lbank2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    40781 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48763 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34881 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   210272 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   106630 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62006 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37393 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   178258 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/okex5.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   265344 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22933 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   192389 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88811 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75472 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/poloniexfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    70124 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47585 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/ripio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   118368 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/stex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42655 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/tidex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    65784 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119594 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75965 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   103947 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35792 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92648 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95037 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   197847 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/xt.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51652 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28959 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   184533 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/zb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74326 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/async_support/zonda.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.593259 ccxt-3.1.1/ccxt/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1320 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6634 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/base/decimal_to_precision.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3401 2023-05-18 23:53:28.000000 ccxt-3.1.1/ccxt/base/errors.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   170572 2023-05-18 23:56:24.000000 ccxt-3.1.1/ccxt/base/exchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8565 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/base/precise.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1071 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/base/types.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1136 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62340 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   378516 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1645 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2151 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2480 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35482 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39008 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45973 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      467 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69312 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   111509 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37741 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28316 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitforex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   214879 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42572 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   131429 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119564 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    63261 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87333 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88097 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68449 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    82190 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    17785 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitstamp1.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    93397 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    76761 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74167 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bkex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16241 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47120 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35160 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22489 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   110784 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48547 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22177 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/btctradeua.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35384 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45591 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/buda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   395571 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    64922 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   124582 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1219 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    73787 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34208 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   191859 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    38956 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinfalcon.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39461 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34455 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    81092 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18778 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   108248 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    79611 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    84060 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119018 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   152160 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88724 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1169 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/flowbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1238 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   221799 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      445 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69001 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62241 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   116511 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69194 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   362643 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    86605 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      572 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    67332 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29810 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42437 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34960 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/itbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101404 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    81722 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   160363 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101171 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37750 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    70007 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33717 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    97857 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/lbank2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    40473 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48461 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34639 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   209226 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   106106 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    61638 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37055 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   177794 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      434 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/okex5.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   264326 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22745 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   191805 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88311 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75104 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/poloniexfutures.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.625262 ccxt-3.1.1/ccxt/pro/
--rw-rw-r--   0 travis    (2000) travis    (2000)     6249 2023-05-18 23:56:24.000000 ccxt-3.1.1/ccxt/pro/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26668 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34553 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/ascendex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    77193 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      724 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2016 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1357 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      914 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24762 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42069 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46154 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24486 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    55606 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12557 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    54349 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16235 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20784 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36705 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26009 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    31535 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    31132 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    60508 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    44892 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1121 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    30072 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    40578 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22975 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22087 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34004 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24397 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41825 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      391 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25142 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15160 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21786 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    85533 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23052 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      400 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28068 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11059 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    44317 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    52058 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34128 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27781 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12175 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41886 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      388 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22655 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    30234 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      382 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35657 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    59782 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22635 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12104 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/ripio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9473 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29862 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34279 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25030 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21557 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/pro/zb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69774 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47325 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/ripio.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.625262 ccxt-3.1.1/ccxt/static_dependencies/
--rw-rw-r--   0 travis    (2000) travis    (2000)       30 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.625262 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/
--rw-rw-r--   0 travis    (2000) travis    (2000)      594 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18461 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/_version.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/curves.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6942 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/der.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11336 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/ecdsa.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5517 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/ellipticcurve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14201 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/keys.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    13468 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/numbertheory.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2572 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/rfc6979.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10037 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/ecdsa/util.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.629262 ccxt-3.1.1/ccxt/static_dependencies/keccak/
--rw-rw-r--   0 travis    (2000) travis    (2000)       45 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/keccak/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6934 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/static_dependencies/keccak/keccak.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   117868 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/stex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.629262 ccxt-3.1.1/ccxt/test/
--rw-rw-r--   0 travis    (2000) travis    (2000)      141 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.637263 ccxt-3.1.1/ccxt/test/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1745 2023-05-18 23:53:32.000000 ccxt-3.1.1/ccxt/test/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      980 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_account.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2585 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_balance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1797 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_borrow_interest.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1489 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_borrow_rate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1177 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/base/test_calculate_fee.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7702 2023-05-18 23:53:31.000000 ccxt-3.1.1/ccxt/test/base/test_crypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3696 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_currency.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5235 2023-05-18 23:53:30.000000 ccxt-3.1.1/ccxt/test/base/test_datetime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20934 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/base/test_decimal_to_precision.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1402 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/base/test_deep_extend.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2441 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_deposit_withdrawal.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3592 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/base/test_exchange_datetime_functions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1340 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_funding_rate_history.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2369 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_ledger_entry.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2154 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/base/test_ledger_item.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1658 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_leverage_tier.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1732 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_margin_modification.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11190 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_market.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22033 2023-05-18 23:53:30.000000 ccxt-3.1.1/ccxt/test/base/test_number.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_ohlcv.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1463 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_open_interest.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3889 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_order.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3225 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_order_book.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3985 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_position.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16118 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_shared_methods.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      783 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_status.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3123 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/base/test_throttle.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5658 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_ticker.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2259 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_trade.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1125 2023-05-18 23:54:40.000000 ccxt-3.1.1/ccxt/test/base/test_trading_fee.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1434 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/test/base/test_transaction.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26934 2023-05-18 23:53:32.000000 ccxt-3.1.1/ccxt/test/test_async.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26530 2023-05-18 23:53:32.000000 ccxt-3.1.1/ccxt/test/test_sync.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42407 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/tidex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    65452 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119250 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75531 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   103453 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35544 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92196 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    94453 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   196728 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/xt.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51368 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28777 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   183857 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/zb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74036 2023-05-18 23:42:06.000000 ccxt-3.1.1/ccxt/zonda.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-18 23:57:55.501251 ccxt-3.1.1/ccxt.egg-info/
--rw-rw-r--   0 travis    (2000) travis    (2000)   113270 2023-05-18 23:57:55.000000 ccxt-3.1.1/ccxt.egg-info/PKG-INFO
--rw-rw-r--   0 travis    (2000) travis    (2000)    11687 2023-05-18 23:57:55.000000 ccxt-3.1.1/ccxt.egg-info/SOURCES.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)        1 2023-05-18 23:57:55.000000 ccxt-3.1.1/ccxt.egg-info/dependency_links.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)      162 2023-05-18 23:57:55.000000 ccxt-3.1.1/ccxt.egg-info/requires.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)        5 2023-05-18 23:57:55.000000 ccxt-3.1.1/ccxt.egg-info/top_level.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)     8458 2023-05-18 23:56:25.000000 ccxt-3.1.1/package.json
--rw-rw-r--   0 travis    (2000) travis    (2000)      205 2023-05-18 23:57:55.637263 ccxt-3.1.1/setup.cfg
--rwxrwxr-x   0 travis    (2000) travis    (2000)     2891 2023-05-18 23:42:06.000000 ccxt-3.1.1/setup.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.481245 ccxt-3.1.2/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1068 2023-05-19 11:56:55.000000 ccxt-3.1.2/LICENSE.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)      100 2023-05-19 11:29:09.000000 ccxt-3.1.2/MANIFEST.in
+-rw-rw-r--   0 travis    (2000) travis    (2000)   113270 2023-05-19 11:57:11.485245 ccxt-3.1.2/PKG-INFO
+-rw-rw-r--   0 travis    (2000) travis    (2000)   102253 2023-05-19 11:29:09.000000 ccxt-3.1.2/README.rst
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.289231 ccxt-3.1.2/ccxt/
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15625 2023-05-19 11:56:54.000000 ccxt-3.1.2/ccxt/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.321233 ccxt-3.1.2/ccxt/abstract/
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/abstract/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1448 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1861 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11071 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/ascendex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2347 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69016 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2830 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1989 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4082 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7605 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19171 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2443 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitforex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    31631 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2659 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8966 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8653 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2919 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3648 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4025 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22372 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1987 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitstamp1.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9337 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7439 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bkex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2024 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2638 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1380 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      849 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5594 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3690 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1407 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/btctradeua.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1403 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71986 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3311 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9017 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3417 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14890 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2182 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinfalcon.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5354 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2504 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3736 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2707 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21126 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7452 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3128 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15499 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9386 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6177 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28044 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28044 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6840 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10949 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2596 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14331 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2129 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4165 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2266 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4979 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2867 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20600 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21746 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19005 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7168 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1474 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6930 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/lbank2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3566 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2960 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11878 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2565 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1721 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25825 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/okex5.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2752 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12172 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6301 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4575 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/poloniexfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1849 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10639 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/stex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1953 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/tidex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5875 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4094 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3463 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18450 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2130 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7934 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7689 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27028 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/xt.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1339 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3935 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-19 11:33:03.000000 ccxt-3.1.2/ccxt/abstract/zonda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41329 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33161 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   129270 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/ascendex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.417240 ccxt-3.1.2/ccxt/async_support/
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15428 2023-05-19 11:56:54.000000 ccxt-3.1.2/ccxt/async_support/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41553 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33307 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   129884 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/ascendex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.417240 ccxt-3.1.2/ccxt/async_support/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       67 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   129484 2023-05-19 11:56:54.000000 ccxt-3.1.2/ccxt/async_support/base/exchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1847 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/throttler.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.417240 ccxt-3.1.2/ccxt/async_support/base/ws/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1791 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4999 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/aiohttp_client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6085 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/cache.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7289 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3733 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/fast_client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1495 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/functions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      249 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/future.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2894 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/order_book.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6079 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/base/ws/order_book_side.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1150 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62726 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   385999 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1683 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2165 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2518 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35688 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39268 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      462 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46227 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      481 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69752 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   111979 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    38049 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28522 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitforex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   215753 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42790 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   132067 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   120028 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    63629 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87785 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88471 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68835 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    82612 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    17931 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitstamp1.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    93903 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    77171 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74597 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bkex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16351 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47548 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35438 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22683 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   111410 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48897 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22323 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/btctradeua.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35602 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45959 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/buda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   397447 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    65248 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   125226 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1233 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74293 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34414 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   192757 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39252 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinfalcon.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39709 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34679 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    81496 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18912 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   108780 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    80003 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    84440 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119560 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   152866 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    89266 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1183 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/flowbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1252 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   222625 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      459 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69449 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62675 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   117197 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69616 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   364171 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87087 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      586 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    67772 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    30046 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42709 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35208 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/itbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101946 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    82024 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   160977 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101635 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37998 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70399 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33953 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    98405 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/lbank2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    40781 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48763 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34881 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   210272 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   106630 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62006 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37393 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   178258 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/okex5.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   267074 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22933 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   192389 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88811 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75472 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/poloniexfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70124 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47585 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/ripio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   118368 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/stex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42655 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/tidex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    65784 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119594 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75965 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   103947 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35792 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92648 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95037 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   197847 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/xt.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51652 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28959 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   184533 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/zb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74326 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/async_support/zonda.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.421240 ccxt-3.1.2/ccxt/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1320 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6634 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/base/decimal_to_precision.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3401 2023-05-19 11:40:49.000000 ccxt-3.1.2/ccxt/base/errors.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   170572 2023-05-19 11:56:54.000000 ccxt-3.1.2/ccxt/base/exchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8565 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/base/precise.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1071 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/base/types.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1136 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62340 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   384753 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1645 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2151 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2480 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35482 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39008 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45973 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      467 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69312 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   111509 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37741 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28316 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitforex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   214879 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42572 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   131429 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119564 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    63261 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87333 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88097 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68449 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    82190 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    17785 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitstamp1.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    93397 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    76761 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74167 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bkex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16241 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47120 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35160 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22489 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   110784 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48547 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22177 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/btctradeua.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35384 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45591 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/buda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   395571 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    64922 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   124582 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1219 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    73787 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34208 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   191859 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    38956 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinfalcon.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39461 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34455 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    81092 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18778 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   108248 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    79611 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    84060 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119018 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   152160 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88724 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1169 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/flowbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1238 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   221799 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      445 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69001 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62241 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   116511 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69194 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   362643 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    86605 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      572 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    67332 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29810 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42437 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34960 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/itbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101404 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    81722 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   160363 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101171 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37750 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70007 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33717 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    97857 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/lbank2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    40473 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48461 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34639 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   209226 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   106106 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    61638 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37055 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   177794 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      434 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/okex5.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   266050 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22745 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   191805 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88311 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75104 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/poloniexfutures.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.453243 ccxt-3.1.2/ccxt/pro/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6249 2023-05-19 11:56:54.000000 ccxt-3.1.2/ccxt/pro/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26668 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34553 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/ascendex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    77193 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      724 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2016 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1357 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      914 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24762 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42069 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46154 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24486 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    55606 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12557 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    54349 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16235 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20784 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36705 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26009 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    31535 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    31132 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    60508 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    44892 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1121 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    30072 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    40578 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22975 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22087 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34004 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24397 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41825 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      391 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25142 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15160 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21786 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    85533 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23052 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      400 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28068 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11059 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    44317 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    52058 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34128 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27781 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12175 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41886 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      388 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22655 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    30234 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      382 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35657 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    59782 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22635 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12104 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/ripio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9473 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29862 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34279 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25030 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21557 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/pro/zb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69774 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47325 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/ripio.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.453243 ccxt-3.1.2/ccxt/static_dependencies/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       30 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.461243 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      594 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18461 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/_version.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/curves.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6942 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/der.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11336 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/ecdsa.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5517 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/ellipticcurve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14201 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/keys.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    13468 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/numbertheory.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2572 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/rfc6979.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10037 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/ecdsa/util.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.461243 ccxt-3.1.2/ccxt/static_dependencies/keccak/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       45 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/keccak/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6934 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/static_dependencies/keccak/keccak.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   117868 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/stex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.461243 ccxt-3.1.2/ccxt/test/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      141 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.481245 ccxt-3.1.2/ccxt/test/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1745 2023-05-19 11:40:53.000000 ccxt-3.1.2/ccxt/test/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      980 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_account.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2585 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_balance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1797 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_borrow_interest.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1489 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_borrow_rate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1177 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/base/test_calculate_fee.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7702 2023-05-19 11:40:51.000000 ccxt-3.1.2/ccxt/test/base/test_crypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3696 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_currency.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5235 2023-05-19 11:40:50.000000 ccxt-3.1.2/ccxt/test/base/test_datetime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20934 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/base/test_decimal_to_precision.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1402 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/base/test_deep_extend.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2441 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_deposit_withdrawal.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3592 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/base/test_exchange_datetime_functions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1340 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_funding_rate_history.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2369 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_ledger_entry.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2154 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/base/test_ledger_item.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1658 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_leverage_tier.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1732 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_margin_modification.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11190 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_market.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22033 2023-05-19 11:40:50.000000 ccxt-3.1.2/ccxt/test/base/test_number.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_ohlcv.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1463 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_open_interest.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3889 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_order.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3225 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_order_book.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3985 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_position.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16118 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_shared_methods.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      783 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_status.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3123 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/base/test_throttle.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5658 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_ticker.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2259 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_trade.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1125 2023-05-19 11:41:59.000000 ccxt-3.1.2/ccxt/test/base/test_trading_fee.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1434 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/test/base/test_transaction.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26934 2023-05-19 11:40:53.000000 ccxt-3.1.2/ccxt/test/test_async.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26530 2023-05-19 11:40:53.000000 ccxt-3.1.2/ccxt/test/test_sync.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42407 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/tidex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    65452 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119250 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75531 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   103453 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35544 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92196 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    94453 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   196728 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/xt.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51368 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28777 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   183857 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/zb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74036 2023-05-19 11:29:09.000000 ccxt-3.1.2/ccxt/zonda.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-19 11:57:11.289231 ccxt-3.1.2/ccxt.egg-info/
+-rw-rw-r--   0 travis    (2000) travis    (2000)   113270 2023-05-19 11:57:11.000000 ccxt-3.1.2/ccxt.egg-info/PKG-INFO
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11687 2023-05-19 11:57:11.000000 ccxt-3.1.2/ccxt.egg-info/SOURCES.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)        1 2023-05-19 11:57:11.000000 ccxt-3.1.2/ccxt.egg-info/dependency_links.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)      162 2023-05-19 11:57:11.000000 ccxt-3.1.2/ccxt.egg-info/requires.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)        5 2023-05-19 11:57:11.000000 ccxt-3.1.2/ccxt.egg-info/top_level.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8458 2023-05-19 11:56:54.000000 ccxt-3.1.2/package.json
+-rw-rw-r--   0 travis    (2000) travis    (2000)      205 2023-05-19 11:57:11.489246 ccxt-3.1.2/setup.cfg
+-rwxrwxr-x   0 travis    (2000) travis    (2000)     2891 2023-05-19 11:29:09.000000 ccxt-3.1.2/setup.py
```

### Comparing `ccxt-3.1.1/LICENSE.txt` & `ccxt-3.1.2/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/PKG-INFO` & `ccxt-3.1.2/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ccxt
-Version: 3.1.1
+Version: 3.1.2
 Summary: A JavaScript / Python / PHP cryptocurrency trading library with support for 130+ exchanges
 Home-page: https://ccxt.com
 Author: Igor Kroitor
 Author-email: igor.kroitor@gmail.com
 License: MIT
 Project-URL: Homepage, https://ccxt.com
 Project-URL: Documentation, https://docs.ccxt.com
@@ -227,21 +227,21 @@
         console.log(version, Object.keys(exchanges));
         ```
         
         ### JavaScript (for use with the `<script>` tag):
         
         All-in-one browser bundle (dependencies included), served from a CDN of your choice:
         
-        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.1.1/dist/ccxt.browser.js
-        * unpkg: https://unpkg.com/ccxt@3.1.1/dist/ccxt.browser.js
+        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.1.2/dist/ccxt.browser.js
+        * unpkg: https://unpkg.com/ccxt@3.1.2/dist/ccxt.browser.js
         
         CDNs are not updated in real-time and may have delays. Defaulting to the most recent version without specifying the version number is not recommended. Please, keep in mind that we are not responsible for the correct operation of those CDN servers.
         
         ```HTML
-        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.1.1/dist/ccxt.browser.js"></script>
+        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.1.2/dist/ccxt.browser.js"></script>
         ```
         
         Creates a global `ccxt` object:
         
         ```JavaScript
         console.log (ccxt.exchanges) // print all available exchanges
         ```
```

### Comparing `ccxt-3.1.1/README.rst` & `ccxt-3.1.2/README.rst`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/__init__.py` & `ccxt-3.1.2/ccxt/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -18,15 +18,15 @@
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
 # ----------------------------------------------------------------------------
 
-__version__ = '3.1.1'
+__version__ = '3.1.2'
 
 # ----------------------------------------------------------------------------
 
 from ccxt.base.exchange import Exchange                     # noqa: F401
 from ccxt.base.precise import Precise                       # noqa: F401
 
 from ccxt.base.decimal_to_precision import decimal_to_precision  # noqa: F401
```

### Comparing `ccxt-3.1.1/ccxt/abstract/ace.py` & `ccxt-3.1.2/ccxt/abstract/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/alpaca.py` & `ccxt-3.1.2/ccxt/abstract/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/ascendex.py` & `ccxt-3.1.2/ccxt/abstract/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bequant.py` & `ccxt-3.1.2/ccxt/abstract/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bigone.py` & `ccxt-3.1.2/ccxt/abstract/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/binance.py` & `ccxt-3.1.2/ccxt/abstract/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/binancecoinm.py` & `ccxt-3.1.2/ccxt/abstract/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/binanceus.py` & `ccxt-3.1.2/ccxt/abstract/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/binanceusdm.py` & `ccxt-3.1.2/ccxt/abstract/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bit2c.py` & `ccxt-3.1.2/ccxt/abstract/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitbank.py` & `ccxt-3.1.2/ccxt/abstract/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitbay.py` & `ccxt-3.1.2/ccxt/abstract/bitbay.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitbns.py` & `ccxt-3.1.2/ccxt/abstract/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitcoincom.py` & `ccxt-3.1.2/ccxt/abstract/bitcoincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitfinex.py` & `ccxt-3.1.2/ccxt/abstract/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitfinex2.py` & `ccxt-3.1.2/ccxt/abstract/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitflyer.py` & `ccxt-3.1.2/ccxt/abstract/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitforex.py` & `ccxt-3.1.2/ccxt/abstract/bitforex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitget.py` & `ccxt-3.1.2/ccxt/abstract/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bithumb.py` & `ccxt-3.1.2/ccxt/abstract/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitmart.py` & `ccxt-3.1.2/ccxt/abstract/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitmex.py` & `ccxt-3.1.2/ccxt/abstract/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitopro.py` & `ccxt-3.1.2/ccxt/abstract/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitpanda.py` & `ccxt-3.1.2/ccxt/abstract/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitrue.py` & `ccxt-3.1.2/ccxt/abstract/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitso.py` & `ccxt-3.1.2/ccxt/abstract/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitstamp.py` & `ccxt-3.1.2/ccxt/abstract/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitstamp1.py` & `ccxt-3.1.2/ccxt/abstract/bitstamp1.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bittrex.py` & `ccxt-3.1.2/ccxt/abstract/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bitvavo.py` & `ccxt-3.1.2/ccxt/abstract/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bkex.py` & `ccxt-3.1.2/ccxt/abstract/bkex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bl3p.py` & `ccxt-3.1.2/ccxt/abstract/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/blockchaincom.py` & `ccxt-3.1.2/ccxt/abstract/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/btcalpha.py` & `ccxt-3.1.2/ccxt/abstract/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/btcbox.py` & `ccxt-3.1.2/ccxt/abstract/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/btcex.py` & `ccxt-3.1.2/ccxt/abstract/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/btcmarkets.py` & `ccxt-3.1.2/ccxt/abstract/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/btctradeua.py` & `ccxt-3.1.2/ccxt/abstract/btctradeua.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/btcturk.py` & `ccxt-3.1.2/ccxt/abstract/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/bybit.py` & `ccxt-3.1.2/ccxt/abstract/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/cex.py` & `ccxt-3.1.2/ccxt/abstract/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinbase.py` & `ccxt-3.1.2/ccxt/abstract/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinbaseprime.py` & `ccxt-3.1.2/ccxt/abstract/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinbasepro.py` & `ccxt-3.1.2/ccxt/abstract/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coincheck.py` & `ccxt-3.1.2/ccxt/abstract/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinex.py` & `ccxt-3.1.2/ccxt/abstract/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinfalcon.py` & `ccxt-3.1.2/ccxt/abstract/coinfalcon.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinmate.py` & `ccxt-3.1.2/ccxt/abstract/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinone.py` & `ccxt-3.1.2/ccxt/abstract/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinsph.py` & `ccxt-3.1.2/ccxt/abstract/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/coinspot.py` & `ccxt-3.1.2/ccxt/abstract/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/cryptocom.py` & `ccxt-3.1.2/ccxt/abstract/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/currencycom.py` & `ccxt-3.1.2/ccxt/abstract/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/delta.py` & `ccxt-3.1.2/ccxt/abstract/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/deribit.py` & `ccxt-3.1.2/ccxt/abstract/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/digifinex.py` & `ccxt-3.1.2/ccxt/abstract/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/exmo.py` & `ccxt-3.1.2/ccxt/abstract/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/fmfwio.py` & `ccxt-3.1.2/ccxt/abstract/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/gate.py` & `ccxt-3.1.2/ccxt/abstract/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/gateio.py` & `ccxt-3.1.2/ccxt/abstract/gateio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/gemini.py` & `ccxt-3.1.2/ccxt/abstract/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/hitbtc.py` & `ccxt-3.1.2/ccxt/abstract/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/hitbtc3.py` & `ccxt-3.1.2/ccxt/abstract/hitbtc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/hollaex.py` & `ccxt-3.1.2/ccxt/abstract/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/huobi.py` & `ccxt-3.1.2/ccxt/abstract/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/huobijp.py` & `ccxt-3.1.2/ccxt/abstract/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/huobipro.py` & `ccxt-3.1.2/ccxt/abstract/huobipro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/idex.py` & `ccxt-3.1.2/ccxt/abstract/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/independentreserve.py` & `ccxt-3.1.2/ccxt/abstract/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/indodax.py` & `ccxt-3.1.2/ccxt/abstract/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/kraken.py` & `ccxt-3.1.2/ccxt/abstract/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/krakenfutures.py` & `ccxt-3.1.2/ccxt/abstract/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/kucoin.py` & `ccxt-3.1.2/ccxt/abstract/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/kucoinfutures.py` & `ccxt-3.1.2/ccxt/abstract/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/kuna.py` & `ccxt-3.1.2/ccxt/abstract/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/latoken.py` & `ccxt-3.1.2/ccxt/abstract/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/lbank.py` & `ccxt-3.1.2/ccxt/abstract/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/lbank2.py` & `ccxt-3.1.2/ccxt/abstract/lbank2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/luno.py` & `ccxt-3.1.2/ccxt/abstract/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/lykke.py` & `ccxt-3.1.2/ccxt/abstract/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/mercado.py` & `ccxt-3.1.2/ccxt/abstract/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/mexc.py` & `ccxt-3.1.2/ccxt/abstract/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/mexc3.py` & `ccxt-3.1.2/ccxt/abstract/mexc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/ndax.py` & `ccxt-3.1.2/ccxt/abstract/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/novadax.py` & `ccxt-3.1.2/ccxt/abstract/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/oceanex.py` & `ccxt-3.1.2/ccxt/abstract/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/okcoin.py` & `ccxt-3.1.2/ccxt/abstract/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/okex.py` & `ccxt-3.1.2/ccxt/abstract/okex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/okex5.py` & `ccxt-3.1.2/ccxt/abstract/okex5.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/okx.py` & `ccxt-3.1.2/ccxt/abstract/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/paymium.py` & `ccxt-3.1.2/ccxt/abstract/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/phemex.py` & `ccxt-3.1.2/ccxt/abstract/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/poloniex.py` & `ccxt-3.1.2/ccxt/abstract/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/poloniexfutures.py` & `ccxt-3.1.2/ccxt/abstract/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/probit.py` & `ccxt-3.1.2/ccxt/abstract/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/stex.py` & `ccxt-3.1.2/ccxt/abstract/stex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/tidex.py` & `ccxt-3.1.2/ccxt/abstract/tidex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/timex.py` & `ccxt-3.1.2/ccxt/abstract/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/tokocrypto.py` & `ccxt-3.1.2/ccxt/abstract/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/upbit.py` & `ccxt-3.1.2/ccxt/abstract/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/wavesexchange.py` & `ccxt-3.1.2/ccxt/abstract/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/wazirx.py` & `ccxt-3.1.2/ccxt/abstract/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/whitebit.py` & `ccxt-3.1.2/ccxt/abstract/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/woo.py` & `ccxt-3.1.2/ccxt/abstract/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/xt.py` & `ccxt-3.1.2/ccxt/abstract/xt.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/yobit.py` & `ccxt-3.1.2/ccxt/abstract/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/zaif.py` & `ccxt-3.1.2/ccxt/abstract/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/abstract/zonda.py` & `ccxt-3.1.2/ccxt/abstract/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/ace.py` & `ccxt-3.1.2/ccxt/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/alpaca.py` & `ccxt-3.1.2/ccxt/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/ascendex.py` & `ccxt-3.1.2/ccxt/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/__init__.py` & `ccxt-3.1.2/ccxt/async_support/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """CCXT: CryptoCurrency eXchange Trading Library (Async)"""
 
 # -----------------------------------------------------------------------------
 
-__version__ = '3.1.1'
+__version__ = '3.1.2'
 
 # -----------------------------------------------------------------------------
 
 from ccxt.async_support.base.exchange import Exchange                   # noqa: F401
 
 from ccxt.base.decimal_to_precision import decimal_to_precision  # noqa: F401
 from ccxt.base.decimal_to_precision import TRUNCATE              # noqa: F401
```

### Comparing `ccxt-3.1.1/ccxt/async_support/ace.py` & `ccxt-3.1.2/ccxt/async_support/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/alpaca.py` & `ccxt-3.1.2/ccxt/async_support/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/ascendex.py` & `ccxt-3.1.2/ccxt/async_support/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/exchange.py` & `ccxt-3.1.2/ccxt/async_support/base/exchange.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 # -*- coding: utf-8 -*-
 
 # -----------------------------------------------------------------------------
 
-__version__ = '3.1.1'
+__version__ = '3.1.2'
 
 # -----------------------------------------------------------------------------
 
 import asyncio
 import concurrent.futures
 import socket
 import certifi
```

### Comparing `ccxt-3.1.1/ccxt/async_support/base/throttler.py` & `ccxt-3.1.2/ccxt/async_support/base/throttler.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/__init__.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/aiohttp_client.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/aiohttp_client.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/cache.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/cache.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/client.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/client.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/fast_client.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/fast_client.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/functions.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/functions.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/order_book.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/order_book.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/base/ws/order_book_side.py` & `ccxt-3.1.2/ccxt/async_support/base/ws/order_book_side.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bequant.py` & `ccxt-3.1.2/ccxt/async_support/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bigone.py` & `ccxt-3.1.2/ccxt/async_support/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/binance.py` & `ccxt-3.1.2/ccxt/async_support/binance.py`

 * *Files 1% similar despite different names*

```diff
@@ -11368,12365 +11368,12758 @@
 0002c670: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
 0002c680: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
 0002c690: 2023 0a20 2020 2020 2020 2072 6574 7572   #.        retur
 0002c6a0: 6e20 7365 6c66 2e70 6172 7365 5f74 7261  n self.parse_tra
 0002c6b0: 6465 7328 7265 7370 6f6e 7365 2c20 6d61  des(response, ma
 0002c6c0: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
 0002c6d0: 6974 290a 0a20 2020 2061 7379 6e63 2064  it)..    async d
-0002c6e0: 6566 2065 6469 745f 6f72 6465 7228 7365  ef edit_order(se
-0002c6f0: 6c66 2c20 6964 3a20 7374 722c 2073 796d  lf, id: str, sym
-0002c700: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
-0002c710: 2061 6d6f 756e 742c 2070 7269 6365 3d4e   amount, price=N
-0002c720: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-0002c730: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0002c740: 2020 2020 2065 6469 7420 6120 7472 6164       edit a trad
-0002c750: 6520 6f72 6465 720a 2020 2020 2020 2020  e order.        
-0002c760: 7365 6520 6874 7470 733a 2f2f 6269 6e61  see https://bina
-0002c770: 6e63 652d 646f 6373 2e67 6974 6875 622e  nce-docs.github.
-0002c780: 696f 2f61 7069 646f 6373 2f73 706f 742f  io/apidocs/spot/
-0002c790: 656e 2f23 6361 6e63 656c 2d61 6e2d 6578  en/#cancel-an-ex
-0002c7a0: 6973 7469 6e67 2d6f 7264 6572 2d61 6e64  isting-order-and
-0002c7b0: 2d73 656e 642d 612d 6e65 772d 6f72 6465  -send-a-new-orde
-0002c7c0: 722d 7472 6164 650a 2020 2020 2020 2020  r-trade.        
-0002c7d0: 3a70 6172 616d 2073 7472 2069 643a 2063  :param str id: c
-0002c7e0: 616e 6365 6c20 6f72 6465 7220 6964 0a20  ancel order id. 
-0002c7f0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0002c800: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
-0002c810: 6420 7379 6d62 6f6c 206f 6620 7468 6520  d symbol of the 
-0002c820: 6d61 726b 6574 2074 6f20 6372 6561 7465  market to create
-0002c830: 2061 6e20 6f72 6465 7220 696e 0a20 2020   an order in.   
-0002c840: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
-0002c850: 7479 7065 3a20 276d 6172 6b65 7427 206f  type: 'market' o
-0002c860: 7220 276c 696d 6974 270a 2020 2020 2020  r 'limit'.      
-0002c870: 2020 3a70 6172 616d 2073 7472 2073 6964    :param str sid
-0002c880: 653a 2027 6275 7927 206f 7220 2773 656c  e: 'buy' or 'sel
-0002c890: 6c27 0a20 2020 2020 2020 203a 7061 7261  l'.        :para
-0002c8a0: 6d20 666c 6f61 7420 616d 6f75 6e74 3a20  m float amount: 
-0002c8b0: 686f 7720 6d75 6368 206f 6620 6375 7272  how much of curr
-0002c8c0: 656e 6379 2079 6f75 2077 616e 7420 746f  ency you want to
-0002c8d0: 2074 7261 6465 2069 6e20 756e 6974 7320   trade in units 
-0002c8e0: 6f66 2062 6173 6520 6375 7272 656e 6379  of base currency
-0002c8f0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0002c900: 666c 6f61 747c 4e6f 6e65 2070 7269 6365  float|None price
-0002c910: 3a20 7468 6520 7072 6963 6520 6174 2077  : the price at w
-0002c920: 6869 6368 2074 6865 206f 7264 6572 2069  hich the order i
-0002c930: 7320 746f 2062 6520 6675 6c6c 6669 6c6c  s to be fullfill
-0002c940: 6564 2c20 696e 2075 6e69 7473 206f 6620  ed, in units of 
-0002c950: 7468 6520 6261 7365 2063 7572 7265 6e63  the base currenc
-0002c960: 792c 2069 676e 6f72 6564 2069 6e20 6d61  y, ignored in ma
-0002c970: 726b 6574 206f 7264 6572 730a 2020 2020  rket orders.    
-0002c980: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-0002c990: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
-0002c9a0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-0002c9b0: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
-0002c9c0: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-0002c9d0: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-0002c9e0: 6963 743a 2061 6e20 606f 7264 6572 2073  ict: an `order s
-0002c9f0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0002ca00: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0002ca10: 232f 3f69 643d 6f72 6465 722d 7374 7275  #/?id=order-stru
-0002ca20: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-0002ca30: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
-0002ca40: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-0002ca50: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-0002ca60: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-0002ca70: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-0002ca80: 2020 2069 6620 6e6f 7420 6d61 726b 6574     if not market
-0002ca90: 5b27 7370 6f74 275d 3a0a 2020 2020 2020  ['spot']:.      
-0002caa0: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
-0002cab0: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
-0002cac0: 202b 2027 2065 6469 744f 7264 6572 2829   + ' editOrder()
-0002cad0: 2064 6f65 7320 6e6f 7420 7375 7070 6f72   does not suppor
-0002cae0: 7420 2720 2b20 6d61 726b 6574 5b27 7479  t ' + market['ty
-0002caf0: 7065 275d 202b 2027 206f 7264 6572 732c  pe'] + ' orders,
-0002cb00: 206f 6e6c 7920 7370 6f74 206f 7264 6572   only spot order
-0002cb10: 7320 6172 6520 6163 6365 7074 6564 2729  s are accepted')
-0002cb20: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0002cb30: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0002cb40: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
-0002cb50: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-0002cb60: 2020 2020 2027 7369 6465 273a 2073 6964       'side': sid
-0002cb70: 652e 7570 7065 7228 292c 0a20 2020 2020  e.upper(),.     
-0002cb80: 2020 2020 2020 2027 6361 6e63 656c 5265         'cancelRe
-0002cb90: 706c 6163 654d 6f64 6527 3a20 2753 544f  placeMode': 'STO
-0002cba0: 505f 4f4e 5f46 4149 4c55 5245 272c 0a20  P_ON_FAILURE',. 
-0002cbb0: 2020 2020 2020 2020 2020 2023 2053 544f             # STO
-0002cbc0: 505f 4f4e 5f46 4149 4c55 5245 202d 2049  P_ON_FAILURE - I
-0002cbd0: 6620 7468 6520 6361 6e63 656c 2072 6571  f the cancel req
-0002cbe0: 7565 7374 2066 6169 6c73 2c20 7468 6520  uest fails, the 
-0002cbf0: 6e65 7720 6f72 6465 7220 706c 6163 656d  new order placem
-0002cc00: 656e 7420 7769 6c6c 206e 6f74 2062 6520  ent will not be 
-0002cc10: 6174 7465 6d70 7465 642e 0a20 2020 2020  attempted..     
-0002cc20: 2020 2020 2020 2023 2041 4c4c 4f57 5f46         # ALLOW_F
-0002cc30: 4149 4c55 5245 202d 206e 6577 206f 7264  AILURE - new ord
-0002cc40: 6572 2070 6c61 6365 6d65 6e74 2077 696c  er placement wil
-0002cc50: 6c20 6265 2061 7474 656d 7074 6564 2065  l be attempted e
-0002cc60: 7665 6e20 6966 2063 616e 6365 6c20 7265  ven if cancel re
-0002cc70: 7175 6573 7420 6661 696c 732e 0a20 2020  quest fails..   
-0002cc80: 2020 2020 207d 0a20 2020 2020 2020 2063       }.        c
-0002cc90: 616e 6365 6c49 6420 3d20 7365 6c66 2e73  ancelId = self.s
-0002cca0: 6166 655f 7374 7269 6e67 5f32 2870 6172  afe_string_2(par
-0002ccb0: 616d 732c 2027 6361 6e63 656c 4e65 7743  ams, 'cancelNewC
-0002ccc0: 6c69 656e 744f 7264 6572 4964 272c 2027  lientOrderId', '
-0002ccd0: 6361 6e63 656c 4f72 6967 436c 6965 6e74  cancelOrigClient
-0002cce0: 4f72 6465 7249 6427 290a 2020 2020 2020  OrderId').      
-0002ccf0: 2020 6966 2063 616e 6365 6c49 6420 6973    if cancelId is
-0002cd00: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002cd10: 2020 2072 6571 7565 7374 5b27 6361 6e63     request['canc
-0002cd20: 656c 4f72 6465 7249 6427 5d20 3d20 6964  elOrderId'] = id
-0002cd30: 2020 2320 7573 6572 2063 616e 2070 726f    # user can pro
-0002cd40: 7669 6465 2065 6974 6865 7220 6361 6e63  vide either canc
-0002cd50: 656c 4f72 6465 7249 642c 2063 616e 6365  elOrderId, cance
-0002cd60: 6c4f 7269 6743 6c69 656e 744f 7264 6572  lOrigClientOrder
-0002cd70: 4964 206f 7220 6361 6e63 656c 4f72 6967  Id or cancelOrig
-0002cd80: 436c 6965 6e74 4f72 6465 7249 640a 2020  ClientOrderId.  
-0002cd90: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
-0002cda0: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
-0002cdb0: 7374 7269 6e67 5f32 2870 6172 616d 732c  string_2(params,
-0002cdc0: 2027 6e65 7743 6c69 656e 744f 7264 6572   'newClientOrder
-0002cdd0: 4964 272c 2027 636c 6965 6e74 4f72 6465  Id', 'clientOrde
-0002cde0: 7249 6427 290a 2020 2020 2020 2020 696e  rId').        in
-0002cdf0: 6974 6961 6c55 7070 6572 6361 7365 5479  itialUppercaseTy
-0002ce00: 7065 203d 2074 7970 652e 7570 7065 7228  pe = type.upper(
-0002ce10: 290a 2020 2020 2020 2020 7570 7065 7263  ).        upperc
-0002ce20: 6173 6554 7970 6520 3d20 696e 6974 6961  aseType = initia
-0002ce30: 6c55 7070 6572 6361 7365 5479 7065 0a20  lUppercaseType. 
-0002ce40: 2020 2020 2020 2070 6f73 744f 6e6c 7920         postOnly 
-0002ce50: 3d20 7365 6c66 2e69 735f 706f 7374 5f6f  = self.is_post_o
-0002ce60: 6e6c 7928 696e 6974 6961 6c55 7070 6572  nly(initialUpper
-0002ce70: 6361 7365 5479 7065 203d 3d20 274d 4152  caseType == 'MAR
-0002ce80: 4b45 5427 2c20 696e 6974 6961 6c55 7070  KET', initialUpp
-0002ce90: 6572 6361 7365 5479 7065 203d 3d20 274c  ercaseType == 'L
-0002cea0: 494d 4954 5f4d 414b 4552 272c 2070 6172  IMIT_MAKER', par
-0002ceb0: 616d 7329 0a20 2020 2020 2020 2069 6620  ams).        if 
-0002cec0: 706f 7374 4f6e 6c79 3a0a 2020 2020 2020  postOnly:.      
-0002ced0: 2020 2020 2020 7570 7065 7263 6173 6554        uppercaseT
-0002cee0: 7970 6520 3d20 274c 494d 4954 5f4d 414b  ype = 'LIMIT_MAK
-0002cef0: 4552 270a 2020 2020 2020 2020 7265 7175  ER'.        requ
-0002cf00: 6573 745b 2774 7970 6527 5d20 3d20 7570  est['type'] = up
-0002cf10: 7065 7263 6173 6554 7970 650a 2020 2020  percaseType.    
-0002cf20: 2020 2020 7374 6f70 5072 6963 6520 3d20      stopPrice = 
-0002cf30: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0002cf40: 2870 6172 616d 732c 2027 7374 6f70 5072  (params, 'stopPr
-0002cf50: 6963 6527 290a 2020 2020 2020 2020 6966  ice').        if
-0002cf60: 2073 746f 7050 7269 6365 2069 7320 6e6f   stopPrice is no
-0002cf70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0002cf80: 2020 2020 6966 2075 7070 6572 6361 7365      if uppercase
-0002cf90: 5479 7065 203d 3d20 274d 4152 4b45 5427  Type == 'MARKET'
-0002cfa0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002cfb0: 2020 7570 7065 7263 6173 6554 7970 6520    uppercaseType 
-0002cfc0: 3d20 2753 544f 505f 4c4f 5353 270a 2020  = 'STOP_LOSS'.  
-0002cfd0: 2020 2020 2020 2020 2020 656c 6966 2075            elif u
-0002cfe0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
-0002cff0: 274c 494d 4954 273a 0a20 2020 2020 2020  'LIMIT':.       
-0002d000: 2020 2020 2020 2020 2075 7070 6572 6361           upperca
-0002d010: 7365 5479 7065 203d 2027 5354 4f50 5f4c  seType = 'STOP_L
-0002d020: 4f53 535f 4c49 4d49 5427 0a20 2020 2020  OSS_LIMIT'.     
-0002d030: 2020 2076 616c 6964 4f72 6465 7254 7970     validOrderTyp
-0002d040: 6573 203d 2073 656c 662e 7361 6665 5f76  es = self.safe_v
-0002d050: 616c 7565 286d 6172 6b65 745b 2769 6e66  alue(market['inf
-0002d060: 6f27 5d2c 2027 6f72 6465 7254 7970 6573  o'], 'orderTypes
-0002d070: 2729 0a20 2020 2020 2020 2069 6620 6e6f  ').        if no
-0002d080: 7420 7365 6c66 2e69 6e5f 6172 7261 7928  t self.in_array(
-0002d090: 7570 7065 7263 6173 6554 7970 652c 2076  uppercaseType, v
-0002d0a0: 616c 6964 4f72 6465 7254 7970 6573 293a  alidOrderTypes):
-0002d0b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0002d0c0: 696e 6974 6961 6c55 7070 6572 6361 7365  initialUppercase
-0002d0d0: 5479 7065 2021 3d20 7570 7065 7263 6173  Type != uppercas
-0002d0e0: 6554 7970 653a 0a20 2020 2020 2020 2020  eType:.         
-0002d0f0: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
-0002d100: 616c 6964 4f72 6465 7228 7365 6c66 2e69  alidOrder(self.i
-0002d110: 6420 2b20 2720 7374 6f70 5072 6963 6520  d + ' stopPrice 
-0002d120: 7061 7261 6d65 7465 7220 6973 206e 6f74  parameter is not
-0002d130: 2061 6c6c 6f77 6564 2066 6f72 2027 202b   allowed for ' +
-0002d140: 2073 796d 626f 6c20 2b20 2720 2720 2b20   symbol + ' ' + 
-0002d150: 7479 7065 202b 2027 206f 7264 6572 7327  type + ' orders'
-0002d160: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0002d170: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002d180: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-0002d190: 644f 7264 6572 2873 656c 662e 6964 202b  dOrder(self.id +
-0002d1a0: 2027 2027 202b 2074 7970 6520 2b20 2720   ' ' + type + ' 
-0002d1b0: 6973 206e 6f74 2061 2076 616c 6964 206f  is not a valid o
-0002d1c0: 7264 6572 2074 7970 6520 666f 7220 7468  rder type for th
-0002d1d0: 6520 2720 2b20 7379 6d62 6f6c 202b 2027  e ' + symbol + '
-0002d1e0: 206d 6172 6b65 7427 290a 2020 2020 2020   market').      
-0002d1f0: 2020 6966 2063 6c69 656e 744f 7264 6572    if clientOrder
-0002d200: 4964 2069 7320 4e6f 6e65 3a0a 2020 2020  Id is None:.    
-0002d210: 2020 2020 2020 2020 6272 6f6b 6572 203d          broker =
-0002d220: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0002d230: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
-0002d240: 6272 6f6b 6572 2729 0a20 2020 2020 2020  broker').       
-0002d250: 2020 2020 2069 6620 6272 6f6b 6572 2069       if broker i
-0002d260: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0002d270: 2020 2020 2020 2020 2020 2020 6272 6f6b              brok
-0002d280: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
-0002d290: 5f73 7472 696e 6728 6272 6f6b 6572 2c20  _string(broker, 
-0002d2a0: 2773 706f 7427 290a 2020 2020 2020 2020  'spot').        
-0002d2b0: 2020 2020 2020 2020 6966 2062 726f 6b65          if broke
-0002d2c0: 7249 6420 6973 206e 6f74 204e 6f6e 653a  rId is not None:
-0002d2d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d2e0: 2020 2020 2072 6571 7565 7374 5b27 6e65       request['ne
-0002d2f0: 7743 6c69 656e 744f 7264 6572 4964 275d  wClientOrderId']
-0002d300: 203d 2062 726f 6b65 7249 6420 2b20 7365   = brokerId + se
-0002d310: 6c66 2e75 7569 6432 3228 290a 2020 2020  lf.uuid22().    
-0002d320: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002d330: 2020 2020 2020 7265 7175 6573 745b 276e        request['n
-0002d340: 6577 436c 6965 6e74 4f72 6465 7249 6427  ewClientOrderId'
-0002d350: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
-0002d360: 640a 2020 2020 2020 2020 7265 7175 6573  d.        reques
-0002d370: 745b 276e 6577 4f72 6465 7252 6573 7054  t['newOrderRespT
-0002d380: 7970 6527 5d20 3d20 7365 6c66 2e73 6166  ype'] = self.saf
-0002d390: 655f 7661 6c75 6528 7365 6c66 2e6f 7074  e_value(self.opt
-0002d3a0: 696f 6e73 5b27 6e65 774f 7264 6572 5265  ions['newOrderRe
-0002d3b0: 7370 5479 7065 275d 2c20 7479 7065 2c20  spType'], type, 
-0002d3c0: 2752 4553 554c 5427 2920 2023 2027 4143  'RESULT')  # 'AC
-0002d3d0: 4b27 2066 6f72 206f 7264 6572 2069 642c  K' for order id,
-0002d3e0: 2027 5245 5355 4c54 2720 666f 7220 6675   'RESULT' for fu
-0002d3f0: 6c6c 206f 7264 6572 206f 7220 2746 554c  ll order or 'FUL
-0002d400: 4c27 2066 6f72 206f 7264 6572 2077 6974  L' for order wit
-0002d410: 6820 6669 6c6c 730a 2020 2020 2020 2020  h fills.        
-0002d420: 7469 6d65 496e 466f 7263 6549 7352 6571  timeInForceIsReq
-0002d430: 7569 7265 6420 3d20 4661 6c73 650a 2020  uired = False.  
-0002d440: 2020 2020 2020 7072 6963 6549 7352 6571        priceIsReq
-0002d450: 7569 7265 6420 3d20 4661 6c73 650a 2020  uired = False.  
-0002d460: 2020 2020 2020 7374 6f70 5072 6963 6549        stopPriceI
-0002d470: 7352 6571 7569 7265 6420 3d20 4661 6c73  sRequired = Fals
-0002d480: 650a 2020 2020 2020 2020 7175 616e 7469  e.        quanti
-0002d490: 7479 4973 5265 7175 6972 6564 203d 2046  tyIsRequired = F
-0002d4a0: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
-0002d4b0: 7570 7065 7263 6173 6554 7970 6520 3d3d  uppercaseType ==
-0002d4c0: 2027 4d41 524b 4554 273a 0a20 2020 2020   'MARKET':.     
-0002d4d0: 2020 2020 2020 2071 756f 7465 4f72 6465         quoteOrde
-0002d4e0: 7251 7479 203d 2073 656c 662e 7361 6665  rQty = self.safe
-0002d4f0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
-0002d500: 6f6e 732c 2027 7175 6f74 654f 7264 6572  ons, 'quoteOrder
-0002d510: 5174 7927 2c20 5472 7565 290a 2020 2020  Qty', True).    
-0002d520: 2020 2020 2020 2020 6966 2071 756f 7465          if quote
-0002d530: 4f72 6465 7251 7479 3a0a 2020 2020 2020  OrderQty:.      
-0002d540: 2020 2020 2020 2020 2020 7175 6f74 654f            quoteO
-0002d550: 7264 6572 5174 794e 6577 203d 2073 656c  rderQtyNew = sel
-0002d560: 662e 7361 6665 5f76 616c 7565 5f32 2870  f.safe_value_2(p
-0002d570: 6172 616d 732c 2027 7175 6f74 654f 7264  arams, 'quoteOrd
-0002d580: 6572 5174 7927 2c20 2763 6f73 7427 290a  erQty', 'cost').
-0002d590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5a0: 7072 6563 6973 696f 6e20 3d20 6d61 726b  precision = mark
-0002d5b0: 6574 5b27 7072 6563 6973 696f 6e27 5d5b  et['precision'][
-0002d5c0: 2770 7269 6365 275d 0a20 2020 2020 2020  'price'].       
-0002d5d0: 2020 2020 2020 2020 2069 6620 7175 6f74           if quot
-0002d5e0: 654f 7264 6572 5174 794e 6577 2069 7320  eOrderQtyNew is 
-0002d5f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0002d600: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002d610: 7175 6573 745b 2771 756f 7465 4f72 6465  quest['quoteOrde
-0002d620: 7251 7479 275d 203d 2073 656c 662e 6465  rQty'] = self.de
-0002d630: 6369 6d61 6c5f 746f 5f70 7265 6369 7369  cimal_to_precisi
-0002d640: 6f6e 2871 756f 7465 4f72 6465 7251 7479  on(quoteOrderQty
-0002d650: 4e65 772c 2054 5255 4e43 4154 452c 2070  New, TRUNCATE, p
-0002d660: 7265 6369 7369 6f6e 2c20 7365 6c66 2e70  recision, self.p
-0002d670: 7265 6369 7369 6f6e 4d6f 6465 290a 2020  recisionMode).  
-0002d680: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002d690: 6966 2070 7269 6365 2069 7320 6e6f 7420  if price is not 
-0002d6a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002d6b0: 2020 2020 2020 2020 2020 616d 6f75 6e74            amount
-0002d6c0: 5374 7269 6e67 203d 2073 656c 662e 6e75  String = self.nu
-0002d6d0: 6d62 6572 5f74 6f5f 7374 7269 6e67 2861  mber_to_string(a
-0002d6e0: 6d6f 756e 7429 0a20 2020 2020 2020 2020  mount).         
-0002d6f0: 2020 2020 2020 2020 2020 2070 7269 6365             price
-0002d700: 5374 7269 6e67 203d 2073 656c 662e 6e75  String = self.nu
-0002d710: 6d62 6572 5f74 6f5f 7374 7269 6e67 2870  mber_to_string(p
-0002d720: 7269 6365 290a 2020 2020 2020 2020 2020  rice).          
-0002d730: 2020 2020 2020 2020 2020 7175 6f74 654f            quoteO
-0002d740: 7264 6572 5175 616e 7469 7479 203d 2050  rderQuantity = P
-0002d750: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
-0002d760: 6c28 616d 6f75 6e74 5374 7269 6e67 2c20  l(amountString, 
-0002d770: 7072 6963 6553 7472 696e 6729 0a20 2020  priceString).   
-0002d780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d790: 2072 6571 7565 7374 5b27 7175 6f74 654f   request['quoteO
-0002d7a0: 7264 6572 5174 7927 5d20 3d20 7365 6c66  rderQty'] = self
-0002d7b0: 2e64 6563 696d 616c 5f74 6f5f 7072 6563  .decimal_to_prec
-0002d7c0: 6973 696f 6e28 7175 6f74 654f 7264 6572  ision(quoteOrder
-0002d7d0: 5175 616e 7469 7479 2c20 5452 554e 4341  Quantity, TRUNCA
-0002d7e0: 5445 2c20 7072 6563 6973 696f 6e2c 2073  TE, precision, s
-0002d7f0: 656c 662e 7072 6563 6973 696f 6e4d 6f64  elf.precisionMod
-0002d800: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-0002d810: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002d820: 2020 2020 2020 2020 2020 2020 2071 7561               qua
-0002d830: 6e74 6974 7949 7352 6571 7569 7265 6420  ntityIsRequired 
-0002d840: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-0002d850: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002d860: 2020 2020 2020 2020 2071 7561 6e74 6974           quantit
-0002d870: 7949 7352 6571 7569 7265 6420 3d20 5472  yIsRequired = Tr
-0002d880: 7565 0a20 2020 2020 2020 2065 6c69 6620  ue.        elif 
-0002d890: 7570 7065 7263 6173 6554 7970 6520 3d3d  uppercaseType ==
-0002d8a0: 2027 4c49 4d49 5427 3a0a 2020 2020 2020   'LIMIT':.      
-0002d8b0: 2020 2020 2020 7072 6963 6549 7352 6571        priceIsReq
-0002d8c0: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
-0002d8d0: 2020 2020 2020 2020 2074 696d 6549 6e46           timeInF
-0002d8e0: 6f72 6365 4973 5265 7175 6972 6564 203d  orceIsRequired =
-0002d8f0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-0002d900: 2020 7175 616e 7469 7479 4973 5265 7175    quantityIsRequ
-0002d910: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
-0002d920: 2020 2020 656c 6966 2028 7570 7065 7263      elif (upperc
-0002d930: 6173 6554 7970 6520 3d3d 2027 5354 4f50  aseType == 'STOP
-0002d940: 5f4c 4f53 5327 2920 6f72 2028 7570 7065  _LOSS') or (uppe
-0002d950: 7263 6173 6554 7970 6520 3d3d 2027 5441  rcaseType == 'TA
-0002d960: 4b45 5f50 524f 4649 5427 293a 0a20 2020  KE_PROFIT'):.   
-0002d970: 2020 2020 2020 2020 2073 746f 7050 7269           stopPri
-0002d980: 6365 4973 5265 7175 6972 6564 203d 2054  ceIsRequired = T
-0002d990: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0002d9a0: 7175 616e 7469 7479 4973 5265 7175 6972  quantityIsRequir
-0002d9b0: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
-0002d9c0: 2020 656c 6966 2028 7570 7065 7263 6173    elif (uppercas
-0002d9d0: 6554 7970 6520 3d3d 2027 5354 4f50 5f4c  eType == 'STOP_L
-0002d9e0: 4f53 535f 4c49 4d49 5427 2920 6f72 2028  OSS_LIMIT') or (
-0002d9f0: 7570 7065 7263 6173 6554 7970 6520 3d3d  uppercaseType ==
-0002da00: 2027 5441 4b45 5f50 524f 4649 545f 4c49   'TAKE_PROFIT_LI
-0002da10: 4d49 5427 293a 0a20 2020 2020 2020 2020  MIT'):.         
-0002da20: 2020 2071 7561 6e74 6974 7949 7352 6571     quantityIsReq
-0002da30: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
-0002da40: 2020 2020 2020 2020 2073 746f 7050 7269           stopPri
-0002da50: 6365 4973 5265 7175 6972 6564 203d 2054  ceIsRequired = T
-0002da60: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0002da70: 7072 6963 6549 7352 6571 7569 7265 6420  priceIsRequired 
-0002da80: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-0002da90: 2020 2074 696d 6549 6e46 6f72 6365 4973     timeInForceIs
-0002daa0: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-0002dab0: 2020 2020 2020 2020 656c 6966 2075 7070          elif upp
-0002dac0: 6572 6361 7365 5479 7065 203d 3d20 274c  ercaseType == 'L
-0002dad0: 494d 4954 5f4d 414b 4552 273a 0a20 2020  IMIT_MAKER':.   
-0002dae0: 2020 2020 2020 2020 2070 7269 6365 4973           priceIs
-0002daf0: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-0002db00: 2020 2020 2020 2020 2020 2020 7175 616e              quan
-0002db10: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
-0002db20: 2054 7275 650a 2020 2020 2020 2020 6966   True.        if
-0002db30: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
-0002db40: 7265 643a 0a20 2020 2020 2020 2020 2020  red:.           
-0002db50: 2072 6571 7565 7374 5b27 7175 616e 7469   request['quanti
-0002db60: 7479 275d 203d 2073 656c 662e 616d 6f75  ty'] = self.amou
-0002db70: 6e74 5f74 6f5f 7072 6563 6973 696f 6e28  nt_to_precision(
-0002db80: 7379 6d62 6f6c 2c20 616d 6f75 6e74 290a  symbol, amount).
-0002db90: 2020 2020 2020 2020 6966 2070 7269 6365          if price
-0002dba0: 4973 5265 7175 6972 6564 3a0a 2020 2020  IsRequired:.    
-0002dbb0: 2020 2020 2020 2020 6966 2070 7269 6365          if price
-0002dbc0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0002dbd0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0002dbe0: 496e 7661 6c69 644f 7264 6572 2873 656c  InvalidOrder(sel
-0002dbf0: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
-0002dc00: 6572 2829 2072 6571 7569 7265 7320 6120  er() requires a 
-0002dc10: 7072 6963 6520 6172 6775 6d65 6e74 2066  price argument f
-0002dc20: 6f72 2061 2027 202b 2074 7970 6520 2b20  or a ' + type + 
-0002dc30: 2720 6f72 6465 7227 290a 2020 2020 2020  ' order').      
-0002dc40: 2020 2020 2020 7265 7175 6573 745b 2770        request['p
-0002dc50: 7269 6365 275d 203d 2073 656c 662e 7072  rice'] = self.pr
-0002dc60: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
-0002dc70: 2873 796d 626f 6c2c 2070 7269 6365 290a  (symbol, price).
-0002dc80: 2020 2020 2020 2020 6966 2074 696d 6549          if timeI
-0002dc90: 6e46 6f72 6365 4973 5265 7175 6972 6564  nForceIsRequired
-0002dca0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0002dcb0: 7175 6573 745b 2774 696d 6549 6e46 6f72  quest['timeInFor
-0002dcc0: 6365 275d 203d 2073 656c 662e 6f70 7469  ce'] = self.opti
-0002dcd0: 6f6e 735b 2764 6566 6175 6c74 5469 6d65  ons['defaultTime
-0002dce0: 496e 466f 7263 6527 5d20 2023 2027 4754  InForce']  # 'GT
-0002dcf0: 4327 203d 2047 6f6f 6420 546f 2043 616e  C' = Good To Can
-0002dd00: 6365 6c28 6465 6661 756c 7429 2c20 2749  cel(default), 'I
-0002dd10: 4f43 2720 3d20 496d 6d65 6469 6174 6520  OC' = Immediate 
-0002dd20: 4f72 2043 616e 6365 6c0a 2020 2020 2020  Or Cancel.      
-0002dd30: 2020 6966 2073 746f 7050 7269 6365 4973    if stopPriceIs
-0002dd40: 5265 7175 6972 6564 3a0a 2020 2020 2020  Required:.      
-0002dd50: 2020 2020 2020 6966 2073 746f 7050 7269        if stopPri
-0002dd60: 6365 2069 7320 4e6f 6e65 3a0a 2020 2020  ce is None:.    
-0002dd70: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0002dd80: 6520 496e 7661 6c69 644f 7264 6572 2873  e InvalidOrder(s
-0002dd90: 656c 662e 6964 202b 2027 2065 6469 744f  elf.id + ' editO
-0002dda0: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
-0002ddb0: 6120 7374 6f70 5072 6963 6520 6578 7472  a stopPrice extr
-0002ddc0: 6120 7061 7261 6d20 666f 7220 6120 2720  a param for a ' 
-0002ddd0: 2b20 7479 7065 202b 2027 206f 7264 6572  + type + ' order
-0002dde0: 2729 0a20 2020 2020 2020 2020 2020 2065  ').            e
-0002ddf0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002de00: 2020 2020 2072 6571 7565 7374 5b27 7374       request['st
-0002de10: 6f70 5072 6963 6527 5d20 3d20 7365 6c66  opPrice'] = self
-0002de20: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
-0002de30: 696f 6e28 7379 6d62 6f6c 2c20 7374 6f70  ion(symbol, stop
-0002de40: 5072 6963 6529 0a20 2020 2020 2020 2023  Price).        #
-0002de50: 2072 656d 6f76 6520 7469 6d65 496e 466f   remove timeInFo
-0002de60: 7263 6520 6672 6f6d 2070 6172 616d 7320  rce from params 
-0002de70: 6265 6361 7573 6520 504f 2069 7320 6f6e  because PO is on
-0002de80: 6c79 2075 7365 6420 6279 2073 656c 662e  ly used by self.
-0002de90: 6973 5f70 6f73 745f 6f6e 6c79 616e 6420  is_post_onlyand 
-0002dea0: 6974 2773 206e 6f74 2061 2076 616c 6964  it's not a valid
-0002deb0: 2076 616c 7565 2066 6f72 2042 696e 616e   value for Binan
-0002dec0: 6365 0a20 2020 2020 2020 2069 6620 7365  ce.        if se
-0002ded0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-0002dee0: 6172 616d 732c 2027 7469 6d65 496e 466f  arams, 'timeInFo
-0002def0: 7263 6527 2920 3d3d 2027 504f 273a 0a20  rce') == 'PO':. 
-0002df00: 2020 2020 2020 2020 2020 2070 6172 616d             param
-0002df10: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-0002df20: 7261 6d73 2c20 5b27 7469 6d65 496e 466f  rams, ['timeInFo
-0002df30: 7263 6527 5d29 0a20 2020 2020 2020 2072  rce']).        r
-0002df40: 6571 7565 7374 5061 7261 6d73 203d 2073  equestParams = s
-0002df50: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-0002df60: 205b 2771 756f 7465 4f72 6465 7251 7479   ['quoteOrderQty
-0002df70: 272c 2027 636f 7374 272c 2027 7374 6f70  ', 'cost', 'stop
-0002df80: 5072 6963 6527 2c20 276e 6577 436c 6965  Price', 'newClie
-0002df90: 6e74 4f72 6465 7249 6427 2c20 2763 6c69  ntOrderId', 'cli
-0002dfa0: 656e 744f 7264 6572 4964 272c 2027 706f  entOrderId', 'po
-0002dfb0: 7374 4f6e 6c79 275d 290a 2020 2020 2020  stOnly']).      
-0002dfc0: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-0002dfd0: 6974 2073 656c 662e 7072 6976 6174 6550  it self.privateP
-0002dfe0: 6f73 744f 7264 6572 4361 6e63 656c 5265  ostOrderCancelRe
-0002dff0: 706c 6163 6528 7365 6c66 2e65 7874 656e  place(self.exten
-0002e000: 6428 7265 7175 6573 742c 2072 6571 7565  d(request, reque
-0002e010: 7374 5061 7261 6d73 2929 0a20 2020 2020  stParams)).     
-0002e020: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0002e030: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0002e040: 2020 2020 2020 2022 6361 6e63 656c 5265         "cancelRe
-0002e050: 7375 6c74 223a 2022 5355 4343 4553 5322  sult": "SUCCESS"
-0002e060: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002e070: 2020 2020 226e 6577 4f72 6465 7252 6573      "newOrderRes
-0002e080: 756c 7422 3a20 2253 5543 4345 5353 222c  ult": "SUCCESS",
-0002e090: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002e0a0: 2020 2022 6361 6e63 656c 5265 7370 6f6e     "cancelRespon
-0002e0b0: 7365 223a 207b 0a20 2020 2020 2020 2023  se": {.        #
-0002e0c0: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
-0002e0d0: 6d62 6f6c 223a 2022 4254 4355 5344 5422  mbol": "BTCUSDT"
-0002e0e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002e0f0: 2020 2020 2020 2020 226f 7269 6743 6c69          "origCli
-0002e100: 656e 744f 7264 6572 4964 223a 2022 7765  entOrderId": "we
-0002e110: 625f 3366 3632 3836 3438 3062 3139 3462  b_3f6286480b194b
-0002e120: 3037 3938 3730 6163 3735 6662 3639 3738  079870ac75fb6978
-0002e130: 6237 222c 0a20 2020 2020 2020 2023 2020  b7",.        #  
-0002e140: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0002e150: 7249 6422 3a20 3136 3338 3331 3536 3632  rId": 1638315662
-0002e160: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-0002e170: 2020 2020 2020 2020 2022 6f72 6465 724c           "orderL
-0002e180: 6973 7449 6422 3a20 2d31 2c0a 2020 2020  istId": -1,.    
-0002e190: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0002e1a0: 2020 2263 6c69 656e 744f 7264 6572 4964    "clientOrderId
-0002e1b0: 223a 2022 417a 7436 666f 5654 5467 4850  ": "Azt6foVTTgHP
-0002e1c0: 4e68 7142 6634 3154 5474 222c 0a20 2020  NhqBf41TTt",.   
-0002e1d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002e1e0: 2020 2022 7072 6963 6522 3a20 2231 3430     "price": "140
-0002e1f0: 3030 2e30 3030 3030 3030 3022 2c0a 2020  00.00000000",.  
-0002e200: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002e210: 2020 2020 226f 7269 6751 7479 223a 2022      "origQty": "
-0002e220: 302e 3030 3131 3030 3030 222c 0a20 2020  0.00110000",.   
-0002e230: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002e240: 2020 2022 6578 6563 7574 6564 5174 7922     "executedQty"
-0002e250: 3a20 2230 2e30 3030 3030 3030 3022 2c0a  : "0.00000000",.
-0002e260: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002e270: 2020 2020 2020 2263 756d 6d75 6c61 7469        "cummulati
-0002e280: 7665 5175 6f74 6551 7479 223a 2022 302e  veQuoteQty": "0.
-0002e290: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
-0002e2a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0002e2b0: 2022 7374 6174 7573 223a 2022 4341 4e43   "status": "CANC
-0002e2c0: 454c 4544 222c 0a20 2020 2020 2020 2023  ELED",.        #
-0002e2d0: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-0002e2e0: 6d65 496e 466f 7263 6522 3a20 2247 5443  meInForce": "GTC
-0002e2f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002e300: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-0002e310: 2022 4c49 4d49 5422 2c0a 2020 2020 2020   "LIMIT",.      
-0002e320: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0002e330: 2273 6964 6522 3a20 2242 5559 220a 2020  "side": "BUY".  
-0002e340: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002e350: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-0002e360: 2020 2020 2022 6e65 774f 7264 6572 5265       "newOrderRe
-0002e370: 7370 6f6e 7365 223a 207b 0a20 2020 2020  sponse": {.     
-0002e380: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0002e390: 2022 7379 6d62 6f6c 223a 2022 4254 4355   "symbol": "BTCU
-0002e3a0: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-0002e3b0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0002e3c0: 6572 4964 223a 2031 3633 3833 3137 3632  erId": 163831762
-0002e3d0: 3937 2c0a 2020 2020 2020 2020 2320 2020  97,.        #   
-0002e3e0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-0002e3f0: 4c69 7374 4964 223a 202d 312c 0a20 2020  ListId": -1,.   
-0002e400: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002e410: 2020 2022 636c 6965 6e74 4f72 6465 7249     "clientOrderI
-0002e420: 6422 3a20 2278 2d52 3442 4433 5338 3232  d": "x-R4BD3S822
-0002e430: 3265 6362 3538 6562 3930 3734 6662 3162  2ecb58eb9074fb1b
-0002e440: 6530 3138 6322 2c0a 2020 2020 2020 2020  e018c",.        
-0002e450: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
-0002e460: 7261 6e73 6163 7454 696d 6522 3a20 3136  ransactTime": 16
-0002e470: 3730 3839 3138 3437 3933 322c 0a20 2020  70891847932,.   
-0002e480: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002e490: 2020 2022 7072 6963 6522 3a20 2231 3335     "price": "135
-0002e4a0: 3030 2e30 3030 3030 3030 3022 2c0a 2020  00.00000000",.  
-0002e4b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002e4c0: 2020 2020 226f 7269 6751 7479 223a 2022      "origQty": "
-0002e4d0: 302e 3030 3038 3530 3030 222c 0a20 2020  0.00085000",.   
+0002c6e0: 6566 2065 6469 745f 7370 6f74 5f6f 7264  ef edit_spot_ord
+0002c6f0: 6572 2873 656c 662c 2069 643a 2073 7472  er(self, id: str
+0002c700: 2c20 7379 6d62 6f6c 2c20 7479 7065 2c20  , symbol, type, 
+0002c710: 7369 6465 2c20 616d 6f75 6e74 2c20 7072  side, amount, pr
+0002c720: 6963 653d 4e6f 6e65 2c20 7061 7261 6d73  ice=None, params
+0002c730: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+0002c740: 220a 2020 2020 2020 2020 6564 6974 2061  ".        edit a
+0002c750: 2074 7261 6465 206f 7264 6572 0a20 2020   trade order.   
+0002c760: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
+0002c770: 2f62 696e 616e 6365 2d64 6f63 732e 6769  /binance-docs.gi
+0002c780: 7468 7562 2e69 6f2f 6170 6964 6f63 732f  thub.io/apidocs/
+0002c790: 7370 6f74 2f65 6e2f 2363 616e 6365 6c2d  spot/en/#cancel-
+0002c7a0: 616e 2d65 7869 7374 696e 672d 6f72 6465  an-existing-orde
+0002c7b0: 722d 616e 642d 7365 6e64 2d61 2d6e 6577  r-and-send-a-new
+0002c7c0: 2d6f 7264 6572 2d74 7261 6465 0a20 2020  -order-trade.   
+0002c7d0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+0002c7e0: 6964 3a20 6361 6e63 656c 206f 7264 6572  id: cancel order
+0002c7f0: 2069 640a 2020 2020 2020 2020 3a70 6172   id.        :par
+0002c800: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+0002c810: 6e69 6669 6564 2073 796d 626f 6c20 6f66  nified symbol of
+0002c820: 2074 6865 206d 6172 6b65 7420 746f 2063   the market to c
+0002c830: 7265 6174 6520 616e 206f 7264 6572 2069  reate an order i
+0002c840: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
+0002c850: 2073 7472 2074 7970 653a 2027 6d61 726b   str type: 'mark
+0002c860: 6574 2720 6f72 2027 6c69 6d69 7427 0a20  et' or 'limit'. 
+0002c870: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0002c880: 7220 7369 6465 3a20 2762 7579 2720 6f72  r side: 'buy' or
+0002c890: 2027 7365 6c6c 270a 2020 2020 2020 2020   'sell'.        
+0002c8a0: 3a70 6172 616d 2066 6c6f 6174 2061 6d6f  :param float amo
+0002c8b0: 756e 743a 2068 6f77 206d 7563 6820 6f66  unt: how much of
+0002c8c0: 2063 7572 7265 6e63 7920 796f 7520 7761   currency you wa
+0002c8d0: 6e74 2074 6f20 7472 6164 6520 696e 2075  nt to trade in u
+0002c8e0: 6e69 7473 206f 6620 6261 7365 2063 7572  nits of base cur
+0002c8f0: 7265 6e63 790a 2020 2020 2020 2020 3a70  rency.        :p
+0002c900: 6172 616d 2066 6c6f 6174 7c4e 6f6e 6520  aram float|None 
+0002c910: 7072 6963 653a 2074 6865 2070 7269 6365  price: the price
+0002c920: 2061 7420 7768 6963 6820 7468 6520 6f72   at which the or
+0002c930: 6465 7220 6973 2074 6f20 6265 2066 756c  der is to be ful
+0002c940: 6c66 696c 6c65 642c 2069 6e20 756e 6974  lfilled, in unit
+0002c950: 7320 6f66 2074 6865 2062 6173 6520 6375  s of the base cu
+0002c960: 7272 656e 6379 2c20 6967 6e6f 7265 6420  rrency, ignored 
+0002c970: 696e 206d 6172 6b65 7420 6f72 6465 7273  in market orders
+0002c980: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0002c990: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+0002c9a0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+0002c9b0: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
+0002c9c0: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
+0002c9d0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+0002c9e0: 726e 7320 6469 6374 3a20 616e 2060 6f72  rns dict: an `or
+0002c9f0: 6465 7220 7374 7275 6374 7572 6520 3c68  der structure <h
+0002ca00: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+0002ca10: 2e63 6f6d 2f23 2f3f 6964 3d6f 7264 6572  .com/#/?id=order
+0002ca20: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+0002ca30: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0002ca40: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+0002ca50: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0002ca60: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+0002ca70: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+0002ca80: 2020 2020 2020 2020 6966 206e 6f74 206d          if not m
+0002ca90: 6172 6b65 745b 2773 706f 7427 5d3a 0a20  arket['spot']:. 
+0002caa0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0002cab0: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
+0002cac0: 6c66 2e69 6420 2b20 2720 6564 6974 5370  lf.id + ' editSp
+0002cad0: 6f74 4f72 6465 7228 2920 646f 6573 206e  otOrder() does n
+0002cae0: 6f74 2073 7570 706f 7274 2027 202b 206d  ot support ' + m
+0002caf0: 6172 6b65 745b 2774 7970 6527 5d20 2b20  arket['type'] + 
+0002cb00: 2720 6f72 6465 7273 2729 0a20 2020 2020  ' orders').     
+0002cb10: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+0002cb20: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+0002cb30: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
+0002cb40: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
+0002cb50: 7369 6465 273a 2073 6964 652e 7570 7065  side': side.uppe
+0002cb60: 7228 292c 0a20 2020 2020 2020 207d 0a20  r(),.        }. 
+0002cb70: 2020 2020 2020 2063 6c69 656e 744f 7264         clientOrd
+0002cb80: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
+0002cb90: 5f73 7472 696e 675f 6e28 7061 7261 6d73  _string_n(params
+0002cba0: 2c20 5b27 6e65 7743 6c69 656e 744f 7264  , ['newClientOrd
+0002cbb0: 6572 4964 272c 2027 636c 6965 6e74 4f72  erId', 'clientOr
+0002cbc0: 6465 7249 6427 2c20 276f 7269 6743 6c69  derId', 'origCli
+0002cbd0: 656e 744f 7264 6572 4964 275d 290a 2020  entOrderId']).  
+0002cbe0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0002cbf0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0002cc00: 206d 6172 6b65 745b 2773 706f 7427 5d3a   market['spot']:
+0002cc10: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
+0002cc20: 7469 616c 5570 7065 7263 6173 6554 7970  tialUppercaseTyp
+0002cc30: 6520 3d20 7479 7065 2e75 7070 6572 2829  e = type.upper()
+0002cc40: 0a20 2020 2020 2020 2020 2020 2075 7070  .            upp
+0002cc50: 6572 6361 7365 5479 7065 203d 2069 6e69  ercaseType = ini
+0002cc60: 7469 616c 5570 7065 7263 6173 6554 7970  tialUppercaseTyp
+0002cc70: 650a 2020 2020 2020 2020 2020 2020 706f  e.            po
+0002cc80: 7374 4f6e 6c79 203d 2073 656c 662e 6973  stOnly = self.is
+0002cc90: 5f70 6f73 745f 6f6e 6c79 2869 6e69 7469  _post_only(initi
+0002cca0: 616c 5570 7065 7263 6173 6554 7970 6520  alUppercaseType 
+0002ccb0: 3d3d 2027 4d41 524b 4554 272c 2069 6e69  == 'MARKET', ini
+0002ccc0: 7469 616c 5570 7065 7263 6173 6554 7970  tialUppercaseTyp
+0002ccd0: 6520 3d3d 2027 4c49 4d49 545f 4d41 4b45  e == 'LIMIT_MAKE
+0002cce0: 5227 2c20 7061 7261 6d73 290a 2020 2020  R', params).    
+0002ccf0: 2020 2020 2020 2020 6966 2070 6f73 744f          if postO
+0002cd00: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
+0002cd10: 2020 2020 2075 7070 6572 6361 7365 5479       uppercaseTy
+0002cd20: 7065 203d 2027 4c49 4d49 545f 4d41 4b45  pe = 'LIMIT_MAKE
+0002cd30: 5227 0a20 2020 2020 2020 2020 2020 2072  R'.            r
+0002cd40: 6571 7565 7374 5b27 7479 7065 275d 203d  equest['type'] =
+0002cd50: 2075 7070 6572 6361 7365 5479 7065 0a20   uppercaseType. 
+0002cd60: 2020 2020 2020 2020 2020 2073 746f 7050             stopP
+0002cd70: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+0002cd80: 5f6e 756d 6265 7228 7061 7261 6d73 2c20  _number(params, 
+0002cd90: 2773 746f 7050 7269 6365 2729 0a20 2020  'stopPrice').   
+0002cda0: 2020 2020 2020 2020 2069 6620 7374 6f70           if stop
+0002cdb0: 5072 6963 6520 6973 206e 6f74 204e 6f6e  Price is not Non
+0002cdc0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002cdd0: 2020 2069 6620 7570 7065 7263 6173 6554     if uppercaseT
+0002cde0: 7970 6520 3d3d 2027 4d41 524b 4554 273a  ype == 'MARKET':
+0002cdf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ce00: 2020 2020 2075 7070 6572 6361 7365 5479       uppercaseTy
+0002ce10: 7065 203d 2027 5354 4f50 5f4c 4f53 5327  pe = 'STOP_LOSS'
+0002ce20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ce30: 2065 6c69 6620 7570 7065 7263 6173 6554   elif uppercaseT
+0002ce40: 7970 6520 3d3d 2027 4c49 4d49 5427 3a0a  ype == 'LIMIT':.
+0002ce50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ce60: 2020 2020 7570 7065 7263 6173 6554 7970      uppercaseTyp
+0002ce70: 6520 3d20 2753 544f 505f 4c4f 5353 5f4c  e = 'STOP_LOSS_L
+0002ce80: 494d 4954 270a 2020 2020 2020 2020 2020  IMIT'.          
+0002ce90: 2020 7661 6c69 644f 7264 6572 5479 7065    validOrderType
+0002cea0: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+0002ceb0: 6c75 6528 6d61 726b 6574 5b27 696e 666f  lue(market['info
+0002cec0: 275d 2c20 276f 7264 6572 5479 7065 7327  '], 'orderTypes'
+0002ced0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0002cee0: 206e 6f74 2073 656c 662e 696e 5f61 7272   not self.in_arr
+0002cef0: 6179 2875 7070 6572 6361 7365 5479 7065  ay(uppercaseType
+0002cf00: 2c20 7661 6c69 644f 7264 6572 5479 7065  , validOrderType
+0002cf10: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+0002cf20: 2020 2020 6966 2069 6e69 7469 616c 5570      if initialUp
+0002cf30: 7065 7263 6173 6554 7970 6520 213d 2075  percaseType != u
+0002cf40: 7070 6572 6361 7365 5479 7065 3a0a 2020  ppercaseType:.  
+0002cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf60: 2020 7261 6973 6520 496e 7661 6c69 644f    raise InvalidO
+0002cf70: 7264 6572 2873 656c 662e 6964 202b 2027  rder(self.id + '
+0002cf80: 2073 746f 7050 7269 6365 2070 6172 616d   stopPrice param
+0002cf90: 6574 6572 2069 7320 6e6f 7420 616c 6c6f  eter is not allo
+0002cfa0: 7765 6420 666f 7220 2720 2b20 7379 6d62  wed for ' + symb
+0002cfb0: 6f6c 202b 2027 2027 202b 2074 7970 6520  ol + ' ' + type 
+0002cfc0: 2b20 2720 6f72 6465 7273 2729 0a20 2020  + ' orders').   
+0002cfd0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002cfe0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002cff0: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
+0002d000: 616c 6964 4f72 6465 7228 7365 6c66 2e69  alidOrder(self.i
+0002d010: 6420 2b20 2720 2720 2b20 7479 7065 202b  d + ' ' + type +
+0002d020: 2027 2069 7320 6e6f 7420 6120 7661 6c69   ' is not a vali
+0002d030: 6420 6f72 6465 7220 7479 7065 2066 6f72  d order type for
+0002d040: 2074 6865 2027 202b 2073 796d 626f 6c20   the ' + symbol 
+0002d050: 2b20 2720 6d61 726b 6574 2729 0a20 2020  + ' market').   
+0002d060: 2020 2020 2020 2020 2069 6620 636c 6965           if clie
+0002d070: 6e74 4f72 6465 7249 6420 6973 204e 6f6e  ntOrderId is Non
+0002d080: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002d090: 2020 2062 726f 6b65 7220 3d20 7365 6c66     broker = self
+0002d0a0: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
+0002d0b0: 2e6f 7074 696f 6e73 2c20 2762 726f 6b65  .options, 'broke
+0002d0c0: 7227 290a 2020 2020 2020 2020 2020 2020  r').            
+0002d0d0: 2020 2020 6966 2062 726f 6b65 7220 6973      if broker is
+0002d0e0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0002d0f0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0002d100: 726f 6b65 7249 6420 3d20 7365 6c66 2e73  rokerId = self.s
+0002d110: 6166 655f 7374 7269 6e67 2862 726f 6b65  afe_string(broke
+0002d120: 722c 2027 7370 6f74 2729 0a20 2020 2020  r, 'spot').     
+0002d130: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002d140: 6620 6272 6f6b 6572 4964 2069 7320 6e6f  f brokerId is no
+0002d150: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0002d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d170: 7265 7175 6573 745b 276e 6577 436c 6965  request['newClie
+0002d180: 6e74 4f72 6465 7249 6427 5d20 3d20 6272  ntOrderId'] = br
+0002d190: 6f6b 6572 4964 202b 2073 656c 662e 7575  okerId + self.uu
+0002d1a0: 6964 3232 2829 0a20 2020 2020 2020 2020  id22().         
+0002d1b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002d1c0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002d1d0: 5b27 6e65 7743 6c69 656e 744f 7264 6572  ['newClientOrder
+0002d1e0: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
+0002d1f0: 6572 4964 0a20 2020 2020 2020 2020 2020  erId.           
+0002d200: 2072 6571 7565 7374 5b27 6e65 774f 7264   request['newOrd
+0002d210: 6572 5265 7370 5479 7065 275d 203d 2073  erRespType'] = s
+0002d220: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
+0002d230: 656c 662e 6f70 7469 6f6e 735b 276e 6577  elf.options['new
+0002d240: 4f72 6465 7252 6573 7054 7970 6527 5d2c  OrderRespType'],
+0002d250: 2074 7970 652c 2027 5245 5355 4c54 2729   type, 'RESULT')
+0002d260: 2020 2320 2741 434b 2720 666f 7220 6f72    # 'ACK' for or
+0002d270: 6465 7220 6964 2c20 2752 4553 554c 5427  der id, 'RESULT'
+0002d280: 2066 6f72 2066 756c 6c20 6f72 6465 7220   for full order 
+0002d290: 6f72 2027 4655 4c4c 2720 666f 7220 6f72  or 'FULL' for or
+0002d2a0: 6465 7220 7769 7468 2066 696c 6c73 0a20  der with fills. 
+0002d2b0: 2020 2020 2020 2020 2020 2074 696d 6549             timeI
+0002d2c0: 6e46 6f72 6365 4973 5265 7175 6972 6564  nForceIsRequired
+0002d2d0: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+0002d2e0: 2020 2020 2070 7269 6365 4973 5265 7175       priceIsRequ
+0002d2f0: 6972 6564 203d 2046 616c 7365 0a20 2020  ired = False.   
+0002d300: 2020 2020 2020 2020 2073 746f 7050 7269           stopPri
+0002d310: 6365 4973 5265 7175 6972 6564 203d 2046  ceIsRequired = F
+0002d320: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+0002d330: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
+0002d340: 7265 6420 3d20 4661 6c73 650a 2020 2020  red = False.    
+0002d350: 2020 2020 2020 2020 6966 2075 7070 6572          if upper
+0002d360: 6361 7365 5479 7065 203d 3d20 274d 4152  caseType == 'MAR
+0002d370: 4b45 5427 3a0a 2020 2020 2020 2020 2020  KET':.          
+0002d380: 2020 2020 2020 7175 6f74 654f 7264 6572        quoteOrder
+0002d390: 5174 7920 3d20 7365 6c66 2e73 6166 655f  Qty = self.safe_
+0002d3a0: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
+0002d3b0: 6e73 2c20 2771 756f 7465 4f72 6465 7251  ns, 'quoteOrderQ
+0002d3c0: 7479 272c 2054 7275 6529 0a20 2020 2020  ty', True).     
+0002d3d0: 2020 2020 2020 2020 2020 2069 6620 7175             if qu
+0002d3e0: 6f74 654f 7264 6572 5174 793a 0a20 2020  oteOrderQty:.   
+0002d3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d400: 2071 756f 7465 4f72 6465 7251 7479 4e65   quoteOrderQtyNe
+0002d410: 7720 3d20 7365 6c66 2e73 6166 655f 7661  w = self.safe_va
+0002d420: 6c75 655f 3228 7061 7261 6d73 2c20 2771  lue_2(params, 'q
+0002d430: 756f 7465 4f72 6465 7251 7479 272c 2027  uoteOrderQty', '
+0002d440: 636f 7374 2729 0a20 2020 2020 2020 2020  cost').         
+0002d450: 2020 2020 2020 2020 2020 2070 7265 6369             preci
+0002d460: 7369 6f6e 203d 206d 6172 6b65 745b 2770  sion = market['p
+0002d470: 7265 6369 7369 6f6e 275d 5b27 7072 6963  recision']['pric
+0002d480: 6527 5d0a 2020 2020 2020 2020 2020 2020  e'].            
+0002d490: 2020 2020 2020 2020 6966 2071 756f 7465          if quote
+0002d4a0: 4f72 6465 7251 7479 4e65 7720 6973 206e  OrderQtyNew is n
+0002d4b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0002d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4d0: 2072 6571 7565 7374 5b27 7175 6f74 654f   request['quoteO
+0002d4e0: 7264 6572 5174 7927 5d20 3d20 7365 6c66  rderQty'] = self
+0002d4f0: 2e64 6563 696d 616c 5f74 6f5f 7072 6563  .decimal_to_prec
+0002d500: 6973 696f 6e28 7175 6f74 654f 7264 6572  ision(quoteOrder
+0002d510: 5174 794e 6577 2c20 5452 554e 4341 5445  QtyNew, TRUNCATE
+0002d520: 2c20 7072 6563 6973 696f 6e2c 2073 656c  , precision, sel
+0002d530: 662e 7072 6563 6973 696f 6e4d 6f64 6529  f.precisionMode)
+0002d540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d550: 2020 2020 2065 6c69 6620 7072 6963 6520       elif price 
+0002d560: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0002d570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d580: 2020 2020 2061 6d6f 756e 7453 7472 696e       amountStrin
+0002d590: 6720 3d20 7365 6c66 2e6e 756d 6265 725f  g = self.number_
+0002d5a0: 746f 5f73 7472 696e 6728 616d 6f75 6e74  to_string(amount
+0002d5b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002d5c0: 2020 2020 2020 2020 2020 7072 6963 6553            priceS
+0002d5d0: 7472 696e 6720 3d20 7365 6c66 2e6e 756d  tring = self.num
+0002d5e0: 6265 725f 746f 5f73 7472 696e 6728 7072  ber_to_string(pr
+0002d5f0: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
+0002d600: 2020 2020 2020 2020 2020 2020 2071 756f               quo
+0002d610: 7465 4f72 6465 7251 7561 6e74 6974 7920  teOrderQuantity 
+0002d620: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0002d630: 5f6d 756c 2861 6d6f 756e 7453 7472 696e  _mul(amountStrin
+0002d640: 672c 2070 7269 6365 5374 7269 6e67 290a  g, priceString).
+0002d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d660: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002d670: 2771 756f 7465 4f72 6465 7251 7479 275d  'quoteOrderQty']
+0002d680: 203d 2073 656c 662e 6465 6369 6d61 6c5f   = self.decimal_
+0002d690: 746f 5f70 7265 6369 7369 6f6e 2871 756f  to_precision(quo
+0002d6a0: 7465 4f72 6465 7251 7561 6e74 6974 792c  teOrderQuantity,
+0002d6b0: 2054 5255 4e43 4154 452c 2070 7265 6369   TRUNCATE, preci
+0002d6c0: 7369 6f6e 2c20 7365 6c66 2e70 7265 6369  sion, self.preci
+0002d6d0: 7369 6f6e 4d6f 6465 290a 2020 2020 2020  sionMode).      
+0002d6e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002d6f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002d700: 2020 2020 2020 2020 2020 2020 7175 616e              quan
+0002d710: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
+0002d720: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+0002d730: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0002d740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d750: 7175 616e 7469 7479 4973 5265 7175 6972  quantityIsRequir
+0002d760: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
+0002d770: 2020 2020 2020 656c 6966 2075 7070 6572        elif upper
+0002d780: 6361 7365 5479 7065 203d 3d20 274c 494d  caseType == 'LIM
+0002d790: 4954 273a 0a20 2020 2020 2020 2020 2020  IT':.           
+0002d7a0: 2020 2020 2070 7269 6365 4973 5265 7175       priceIsRequ
+0002d7b0: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
+0002d7c0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+0002d7d0: 496e 466f 7263 6549 7352 6571 7569 7265  InForceIsRequire
+0002d7e0: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+0002d7f0: 2020 2020 2020 2020 2071 7561 6e74 6974           quantit
+0002d800: 7949 7352 6571 7569 7265 6420 3d20 5472  yIsRequired = Tr
+0002d810: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
+0002d820: 6c69 6620 2875 7070 6572 6361 7365 5479  lif (uppercaseTy
+0002d830: 7065 203d 3d20 2753 544f 505f 4c4f 5353  pe == 'STOP_LOSS
+0002d840: 2729 206f 7220 2875 7070 6572 6361 7365  ') or (uppercase
+0002d850: 5479 7065 203d 3d20 2754 414b 455f 5052  Type == 'TAKE_PR
+0002d860: 4f46 4954 2729 3a0a 2020 2020 2020 2020  OFIT'):.        
+0002d870: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+0002d880: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
+0002d890: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+0002d8a0: 2020 2071 7561 6e74 6974 7949 7352 6571     quantityIsReq
+0002d8b0: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
+0002d8c0: 2020 2020 2020 2020 2065 6c69 6620 2875           elif (u
+0002d8d0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
+0002d8e0: 2753 544f 505f 4c4f 5353 5f4c 494d 4954  'STOP_LOSS_LIMIT
+0002d8f0: 2729 206f 7220 2875 7070 6572 6361 7365  ') or (uppercase
+0002d900: 5479 7065 203d 3d20 2754 414b 455f 5052  Type == 'TAKE_PR
+0002d910: 4f46 4954 5f4c 494d 4954 2729 3a0a 2020  OFIT_LIMIT'):.  
+0002d920: 2020 2020 2020 2020 2020 2020 2020 7175                qu
+0002d930: 616e 7469 7479 4973 5265 7175 6972 6564  antityIsRequired
+0002d940: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+0002d950: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+0002d960: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
+0002d970: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+0002d980: 2020 2070 7269 6365 4973 5265 7175 6972     priceIsRequir
+0002d990: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
+0002d9a0: 2020 2020 2020 2020 2020 7469 6d65 496e            timeIn
+0002d9b0: 466f 7263 6549 7352 6571 7569 7265 6420  ForceIsRequired 
+0002d9c0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
+0002d9d0: 2020 2065 6c69 6620 7570 7065 7263 6173     elif uppercas
+0002d9e0: 6554 7970 6520 3d3d 2027 4c49 4d49 545f  eType == 'LIMIT_
+0002d9f0: 4d41 4b45 5227 3a0a 2020 2020 2020 2020  MAKER':.        
+0002da00: 2020 2020 2020 2020 7072 6963 6549 7352          priceIsR
+0002da10: 6571 7569 7265 6420 3d20 5472 7565 0a20  equired = True. 
+0002da20: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0002da30: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
+0002da40: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+0002da50: 2020 2020 2069 6620 7175 616e 7469 7479       if quantity
+0002da60: 4973 5265 7175 6972 6564 3a0a 2020 2020  IsRequired:.    
+0002da70: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0002da80: 6573 745b 2771 7561 6e74 6974 7927 5d20  est['quantity'] 
+0002da90: 3d20 7365 6c66 2e61 6d6f 756e 745f 746f  = self.amount_to
+0002daa0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002dab0: 6c2c 2061 6d6f 756e 7429 0a20 2020 2020  l, amount).     
+0002dac0: 2020 2020 2020 2069 6620 7072 6963 6549         if priceI
+0002dad0: 7352 6571 7569 7265 643a 0a20 2020 2020  sRequired:.     
+0002dae0: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+0002daf0: 6963 6520 6973 204e 6f6e 653a 0a20 2020  ice is None:.   
+0002db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db10: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
+0002db20: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
+0002db30: 6564 6974 4f72 6465 7228 2920 7265 7175  editOrder() requ
+0002db40: 6972 6573 2061 2070 7269 6365 2061 7267  ires a price arg
+0002db50: 756d 656e 7420 666f 7220 6120 2720 2b20  ument for a ' + 
+0002db60: 7479 7065 202b 2027 206f 7264 6572 2729  type + ' order')
+0002db70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002db80: 2072 6571 7565 7374 5b27 7072 6963 6527   request['price'
+0002db90: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
+0002dba0: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+0002dbb0: 6f6c 2c20 7072 6963 6529 0a20 2020 2020  ol, price).     
+0002dbc0: 2020 2020 2020 2069 6620 7469 6d65 496e         if timeIn
+0002dbd0: 466f 7263 6549 7352 6571 7569 7265 643a  ForceIsRequired:
+0002dbe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002dbf0: 2072 6571 7565 7374 5b27 7469 6d65 496e   request['timeIn
+0002dc00: 466f 7263 6527 5d20 3d20 7365 6c66 2e6f  Force'] = self.o
+0002dc10: 7074 696f 6e73 5b27 6465 6661 756c 7454  ptions['defaultT
+0002dc20: 696d 6549 6e46 6f72 6365 275d 2020 2320  imeInForce']  # 
+0002dc30: 2747 5443 2720 3d20 476f 6f64 2054 6f20  'GTC' = Good To 
+0002dc40: 4361 6e63 656c 2864 6566 6175 6c74 292c  Cancel(default),
+0002dc50: 2027 494f 4327 203d 2049 6d6d 6564 6961   'IOC' = Immedia
+0002dc60: 7465 204f 7220 4361 6e63 656c 0a20 2020  te Or Cancel.   
+0002dc70: 2020 2020 2020 2020 2069 6620 7374 6f70           if stop
+0002dc80: 5072 6963 6549 7352 6571 7569 7265 643a  PriceIsRequired:
+0002dc90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002dca0: 2069 6620 7374 6f70 5072 6963 6520 6973   if stopPrice is
+0002dcb0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0002dcc0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0002dcd0: 2049 6e76 616c 6964 4f72 6465 7228 7365   InvalidOrder(se
+0002dce0: 6c66 2e69 6420 2b20 2720 6564 6974 4f72  lf.id + ' editOr
+0002dcf0: 6465 7228 2920 7265 7175 6972 6573 2061  der() requires a
+0002dd00: 2073 746f 7050 7269 6365 2065 7874 7261   stopPrice extra
+0002dd10: 2070 6172 616d 2066 6f72 2061 2027 202b   param for a ' +
+0002dd20: 2074 7970 6520 2b20 2720 6f72 6465 7227   type + ' order'
+0002dd30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002dd40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002dd50: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0002dd60: 6573 745b 2773 746f 7050 7269 6365 275d  est['stopPrice']
+0002dd70: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+0002dd80: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002dd90: 6c2c 2073 746f 7050 7269 6365 290a 2020  l, stopPrice).  
+0002dda0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0002ddb0: 745b 2763 616e 6365 6c52 6570 6c61 6365  t['cancelReplace
+0002ddc0: 4d6f 6465 275d 203d 2027 5354 4f50 5f4f  Mode'] = 'STOP_O
+0002ddd0: 4e5f 4641 494c 5552 4527 2020 2320 4966  N_FAILURE'  # If
+0002dde0: 2074 6865 2063 616e 6365 6c20 7265 7175   the cancel requ
+0002ddf0: 6573 7420 6661 696c 732c 2074 6865 206e  est fails, the n
+0002de00: 6577 206f 7264 6572 2070 6c61 6365 6d65  ew order placeme
+0002de10: 6e74 2077 696c 6c20 6e6f 7420 6265 2061  nt will not be a
+0002de20: 7474 656d 7074 6564 2e0a 2020 2020 2020  ttempted..      
+0002de30: 2020 2020 2020 6361 6e63 656c 4964 203d        cancelId =
+0002de40: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0002de50: 675f 3228 7061 7261 6d73 2c20 2763 616e  g_2(params, 'can
+0002de60: 6365 6c4e 6577 436c 6965 6e74 4f72 6465  celNewClientOrde
+0002de70: 7249 6427 2c20 2763 616e 6365 6c4f 7269  rId', 'cancelOri
+0002de80: 6743 6c69 656e 744f 7264 6572 4964 2729  gClientOrderId')
+0002de90: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0002dea0: 6361 6e63 656c 4964 2069 7320 4e6f 6e65  cancelId is None
+0002deb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002dec0: 2020 7265 7175 6573 745b 2763 616e 6365    request['cance
+0002ded0: 6c4f 7264 6572 4964 275d 203d 2069 6420  lOrderId'] = id 
+0002dee0: 2023 2075 7365 7220 6361 6e20 7072 6f76   # user can prov
+0002def0: 6964 6520 6569 7468 6572 2063 616e 6365  ide either cance
+0002df00: 6c4f 7264 6572 4964 2c20 6361 6e63 656c  lOrderId, cancel
+0002df10: 4f72 6967 436c 6965 6e74 4f72 6465 7249  OrigClientOrderI
+0002df20: 6420 6f72 2063 616e 6365 6c4f 7269 6743  d or cancelOrigC
+0002df30: 6c69 656e 744f 7264 6572 4964 0a20 2020  lientOrderId.   
+0002df40: 2020 2020 2020 2020 2023 2072 656d 6f76           # remov
+0002df50: 6520 7469 6d65 496e 466f 7263 6520 6672  e timeInForce fr
+0002df60: 6f6d 2070 6172 616d 7320 6265 6361 7573  om params becaus
+0002df70: 6520 504f 2069 7320 6f6e 6c79 2075 7365  e PO is only use
+0002df80: 6420 6279 2073 656c 662e 6973 5f70 6f73  d by self.is_pos
+0002df90: 745f 6f6e 6c79 616e 6420 6974 2773 206e  t_onlyand it's n
+0002dfa0: 6f74 2061 2076 616c 6964 2076 616c 7565  ot a valid value
+0002dfb0: 2066 6f72 2042 696e 616e 6365 0a20 2020   for Binance.   
+0002dfc0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0002dfd0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+0002dfe0: 616d 732c 2027 7469 6d65 496e 466f 7263  ams, 'timeInForc
+0002dff0: 6527 2920 3d3d 2027 504f 273a 0a20 2020  e') == 'PO':.   
+0002e000: 2020 2020 2020 2020 2020 2020 2070 6172               par
+0002e010: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
+0002e020: 7061 7261 6d73 2c20 5b27 7469 6d65 496e  params, ['timeIn
+0002e030: 466f 7263 6527 5d29 0a20 2020 2020 2020  Force']).       
+0002e040: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+0002e050: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+0002e060: 5b27 7175 6f74 654f 7264 6572 5174 7927  ['quoteOrderQty'
+0002e070: 2c20 2763 6f73 7427 2c20 2773 746f 7050  , 'cost', 'stopP
+0002e080: 7269 6365 272c 2027 6e65 7743 6c69 656e  rice', 'newClien
+0002e090: 744f 7264 6572 4964 272c 2027 636c 6965  tOrderId', 'clie
+0002e0a0: 6e74 4f72 6465 7249 6427 2c20 2770 6f73  ntOrderId', 'pos
+0002e0b0: 744f 6e6c 7927 5d29 0a20 2020 2020 2020  tOnly']).       
+0002e0c0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0002e0d0: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
+0002e0e0: 7465 506f 7374 4f72 6465 7243 616e 6365  tePostOrderCance
+0002e0f0: 6c52 6570 6c61 6365 2873 656c 662e 6578  lReplace(self.ex
+0002e100: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+0002e110: 7261 6d73 2929 0a20 2020 2020 2020 2065  rams)).        e
+0002e120: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002e130: 2072 6571 7565 7374 5b27 6f72 6465 7249   request['orderI
+0002e140: 6427 5d20 3d20 6964 0a20 2020 2020 2020  d'] = id.       
+0002e150: 2020 2020 2072 6571 7565 7374 5b27 7175       request['qu
+0002e160: 616e 7469 7479 275d 203d 2073 656c 662e  antity'] = self.
+0002e170: 616d 6f75 6e74 5f74 6f5f 7072 6563 6973  amount_to_precis
+0002e180: 696f 6e28 7379 6d62 6f6c 2c20 616d 6f75  ion(symbol, amou
+0002e190: 6e74 290a 2020 2020 2020 2020 2020 2020  nt).            
+0002e1a0: 6966 2070 7269 6365 2069 7320 6e6f 7420  if price is not 
+0002e1b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0002e1c0: 2020 2020 2020 7265 7175 6573 745b 2770        request['p
+0002e1d0: 7269 6365 275d 203d 2073 656c 662e 7072  rice'] = self.pr
+0002e1e0: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+0002e1f0: 2873 796d 626f 6c2c 2070 7269 6365 290a  (symbol, price).
+0002e200: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+0002e210: 6c69 656e 744f 7264 6572 4964 2069 7320  lientOrderId is 
+0002e220: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0002e230: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0002e240: 745b 276f 7269 6743 6c69 656e 744f 7264  t['origClientOrd
+0002e250: 6572 4964 275d 203d 2063 6c69 656e 744f  erId'] = clientO
+0002e260: 7264 6572 4964 0a20 2020 2020 2020 2020  rderId.         
+0002e270: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
+0002e280: 2e6f 6d69 7428 7061 7261 6d73 2c20 5b27  .omit(params, ['
+0002e290: 636c 6965 6e74 4f72 6465 7249 6427 2c20  clientOrderId', 
+0002e2a0: 276e 6577 436c 6965 6e74 4f72 6465 7249  'newClientOrderI
+0002e2b0: 6427 5d29 0a20 2020 2020 2020 2020 2020  d']).           
+0002e2c0: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
+0002e2d0: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
+0002e2e0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0002e2f0: 2061 7761 6974 2073 656c 662e 6661 7069   await self.fapi
+0002e300: 5072 6976 6174 6550 7574 4f72 6465 7228  PrivatePutOrder(
+0002e310: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+0002e320: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+0002e330: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
+0002e340: 6172 6b65 745b 2769 6e76 6572 7365 275d  arket['inverse']
+0002e350: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002e360: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
+0002e370: 6974 2073 656c 662e 6461 7069 5072 6976  it self.dapiPriv
+0002e380: 6174 6550 7574 4f72 6465 7228 7365 6c66  atePutOrder(self
+0002e390: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+0002e3a0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+0002e3b0: 2020 230a 2020 2020 2020 2020 2320 7370    #.        # sp
+0002e3c0: 6f74 0a20 2020 2020 2020 2023 0a20 2020  ot.        #.   
+0002e3d0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0002e3e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0002e3f0: 6361 6e63 656c 5265 7375 6c74 223a 2022  cancelResult": "
+0002e400: 5355 4343 4553 5322 2c0a 2020 2020 2020  SUCCESS",.      
+0002e410: 2020 2320 2020 2020 2020 2020 226e 6577    #         "new
+0002e420: 4f72 6465 7252 6573 756c 7422 3a20 2253  OrderResult": "S
+0002e430: 5543 4345 5353 222c 0a20 2020 2020 2020  UCCESS",.       
+0002e440: 2023 2020 2020 2020 2020 2022 6361 6e63   #         "canc
+0002e450: 656c 5265 7370 6f6e 7365 223a 207b 0a20  elResponse": {. 
+0002e460: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002e470: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+0002e480: 4254 4355 5344 5422 2c0a 2020 2020 2020  BTCUSDT",.      
+0002e490: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0002e4a0: 226f 7269 6743 6c69 656e 744f 7264 6572  "origClientOrder
+0002e4b0: 4964 223a 2022 7765 625f 3366 3632 3836  Id": "web_3f6286
+0002e4c0: 3438 3062 3139 3462 3037 3938 3730 6163  480b194b079870ac
+0002e4d0: 3735 6662 3639 3738 6237 222c 0a20 2020  75fb6978b7",.   
 0002e4e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002e4f0: 2020 2022 6578 6563 7574 6564 5174 7922     "executedQty"
-0002e500: 3a20 2230 2e30 3030 3030 3030 3022 2c0a  : "0.00000000",.
-0002e510: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002e520: 2020 2020 2020 2263 756d 6d75 6c61 7469        "cummulati
-0002e530: 7665 5175 6f74 6551 7479 223a 2022 302e  veQuoteQty": "0.
-0002e540: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
-0002e550: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0002e560: 2022 7374 6174 7573 223a 2022 4e45 5722   "status": "NEW"
-0002e570: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002e580: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
-0002e590: 6f72 6365 223a 2022 4754 4322 2c0a 2020  orce": "GTC",.  
-0002e5a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002e5b0: 2020 2020 2274 7970 6522 3a20 224c 494d      "type": "LIM
-0002e5c0: 4954 222c 0a20 2020 2020 2020 2023 2020  IT",.        #  
-0002e5d0: 2020 2020 2020 2020 2020 2022 7369 6465             "side
-0002e5e0: 223a 2022 4255 5922 2c0a 2020 2020 2020  ": "BUY",.      
-0002e5f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0002e600: 2266 696c 6c73 223a 205b 5d0a 2020 2020  "fills": [].    
-0002e610: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-0002e620: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0002e630: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0002e640: 2020 6461 7461 203d 2073 656c 662e 7361    data = self.sa
-0002e650: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-0002e660: 652c 2027 6e65 774f 7264 6572 5265 7370  e, 'newOrderResp
-0002e670: 6f6e 7365 2729 0a20 2020 2020 2020 2072  onse').        r
-0002e680: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-0002e690: 5f6f 7264 6572 2864 6174 612c 206d 6172  _order(data, mar
-0002e6a0: 6b65 7429 0a0a 2020 2020 6465 6620 7061  ket)..    def pa
-0002e6b0: 7273 655f 6f72 6465 725f 7374 6174 7573  rse_order_status
-0002e6c0: 2873 656c 662c 2073 7461 7475 7329 3a0a  (self, status):.
-0002e6d0: 2020 2020 2020 2020 7374 6174 7573 6573          statuses
-0002e6e0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0002e6f0: 2027 4e45 5727 3a20 276f 7065 6e27 2c0a   'NEW': 'open',.
-0002e700: 2020 2020 2020 2020 2020 2020 2750 4152              'PAR
-0002e710: 5449 414c 4c59 5f46 494c 4c45 4427 3a20  TIALLY_FILLED': 
-0002e720: 276f 7065 6e27 2c0a 2020 2020 2020 2020  'open',.        
-0002e730: 2020 2020 2741 4343 4550 5445 4427 3a20      'ACCEPTED': 
-0002e740: 276f 7065 6e27 2c0a 2020 2020 2020 2020  'open',.        
-0002e750: 2020 2020 2746 494c 4c45 4427 3a20 2763      'FILLED': 'c
-0002e760: 6c6f 7365 6427 2c0a 2020 2020 2020 2020  losed',.        
-0002e770: 2020 2020 2743 414e 4345 4c45 4427 3a20      'CANCELED': 
-0002e780: 2763 616e 6365 6c65 6427 2c0a 2020 2020  'canceled',.    
-0002e790: 2020 2020 2020 2020 2743 414e 4345 4c4c          'CANCELL
-0002e7a0: 4544 273a 2027 6361 6e63 656c 6564 272c  ED': 'canceled',
-0002e7b0: 0a20 2020 2020 2020 2020 2020 2027 5045  .            'PE
-0002e7c0: 4e44 494e 475f 4341 4e43 454c 273a 2027  NDING_CANCEL': '
-0002e7d0: 6361 6e63 656c 696e 6727 2c20 2023 2063  canceling',  # c
-0002e7e0: 7572 7265 6e74 6c79 2075 6e75 7365 640a  urrently unused.
-0002e7f0: 2020 2020 2020 2020 2020 2020 2752 454a              'REJ
-0002e800: 4543 5445 4427 3a20 2772 656a 6563 7465  ECTED': 'rejecte
-0002e810: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-0002e820: 2745 5850 4952 4544 273a 2027 6578 7069  'EXPIRED': 'expi
-0002e830: 7265 6427 2c0a 2020 2020 2020 2020 2020  red',.          
-0002e840: 2020 2745 5850 4952 4544 5f49 4e5f 4d41    'EXPIRED_IN_MA
-0002e850: 5443 4827 3a20 2765 7870 6972 6564 272c  TCH': 'expired',
-0002e860: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-0002e870: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
-0002e880: 6166 655f 7374 7269 6e67 2873 7461 7475  afe_string(statu
-0002e890: 7365 732c 2073 7461 7475 732c 2073 7461  ses, status, sta
-0002e8a0: 7475 7329 0a0a 2020 2020 6465 6620 7061  tus)..    def pa
-0002e8b0: 7273 655f 6f72 6465 7228 7365 6c66 2c20  rse_order(self, 
-0002e8c0: 6f72 6465 722c 206d 6172 6b65 743d 4e6f  order, market=No
-0002e8d0: 6e65 293a 0a20 2020 2020 2020 2023 0a20  ne):.        #. 
-0002e8e0: 2020 2020 2020 2023 2073 706f 740a 2020         # spot.  
-0002e8f0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0002e900: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0002e910: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
-0002e920: 6c22 3a20 224c 5443 4254 4322 2c0a 2020  l": "LTCBTC",.  
-0002e930: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002e940: 226f 7264 6572 4964 223a 2031 2c0a 2020  "orderId": 1,.  
-0002e950: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002e960: 2263 6c69 656e 744f 7264 6572 4964 223a  "clientOrderId":
-0002e970: 2022 6d79 4f72 6465 7231 222c 0a20 2020   "myOrder1",.   
-0002e980: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0002e990: 7072 6963 6522 3a20 2230 2e31 222c 0a20  price": "0.1",. 
-0002e9a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002e9b0: 2022 6f72 6967 5174 7922 3a20 2231 2e30   "origQty": "1.0
-0002e9c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002e9d0: 2020 2020 2022 6578 6563 7574 6564 5174       "executedQt
-0002e9e0: 7922 3a20 2230 2e30 222c 0a20 2020 2020  y": "0.0",.     
-0002e9f0: 2020 2023 2020 2020 2020 2020 2022 6375     #         "cu
-0002ea00: 6d6d 756c 6174 6976 6551 756f 7465 5174  mmulativeQuoteQt
-0002ea10: 7922 3a20 2230 2e30 222c 0a20 2020 2020  y": "0.0",.     
-0002ea20: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
-0002ea30: 6174 7573 223a 2022 4e45 5722 2c0a 2020  atus": "NEW",.  
-0002ea40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002ea50: 2274 696d 6549 6e46 6f72 6365 223a 2022  "timeInForce": "
-0002ea60: 4754 4322 2c0a 2020 2020 2020 2020 2320  GTC",.        # 
-0002ea70: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
-0002ea80: 224c 494d 4954 222c 0a20 2020 2020 2020  "LIMIT",.       
-0002ea90: 2023 2020 2020 2020 2020 2022 7369 6465   #         "side
-0002eaa0: 223a 2022 4255 5922 2c0a 2020 2020 2020  ": "BUY",.      
-0002eab0: 2020 2320 2020 2020 2020 2020 2273 746f    #         "sto
-0002eac0: 7050 7269 6365 223a 2022 302e 3022 2c0a  pPrice": "0.0",.
-0002ead0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002eae0: 2020 2269 6365 6265 7267 5174 7922 3a20    "icebergQty": 
-0002eaf0: 2230 2e30 222c 0a20 2020 2020 2020 2023  "0.0",.        #
-0002eb00: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
-0002eb10: 2031 3439 3938 3237 3331 3935 3539 2c0a   1499827319559,.
-0002eb20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002eb30: 2020 2275 7064 6174 6554 696d 6522 3a20    "updateTime": 
-0002eb40: 3134 3939 3832 3733 3139 3535 392c 0a20  1499827319559,. 
-0002eb50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002eb60: 2022 6973 576f 726b 696e 6722 3a20 5472   "isWorking": Tr
-0002eb70: 7565 0a20 2020 2020 2020 2023 2020 2020  ue.        #    
-0002eb80: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0002eb90: 2020 2020 2023 2073 706f 743a 2065 6469       # spot: edi
-0002eba0: 744f 7264 6572 0a20 2020 2020 2020 2023  tOrder.        #
-0002ebb0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-0002ebc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002ebd0: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
-0002ebe0: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
-0002ebf0: 2320 2020 2020 2020 2020 226f 7264 6572  #         "order
-0002ec00: 4964 223a 2031 3633 3833 3137 3632 3937  Id": 16383176297
-0002ec10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002ec20: 2020 2020 226f 7264 6572 4c69 7374 4964      "orderListId
-0002ec30: 223a 202d 312c 0a20 2020 2020 2020 2023  ": -1,.        #
-0002ec40: 2020 2020 2020 2020 2022 636c 6965 6e74           "client
-0002ec50: 4f72 6465 7249 6422 3a20 2278 2d52 3442  OrderId": "x-R4B
-0002ec60: 4433 5338 3232 3265 6362 3538 6562 3930  D3S8222ecb58eb90
-0002ec70: 3734 6662 3162 6530 3138 6322 2c0a 2020  74fb1be018c",.  
-0002ec80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002ec90: 2274 7261 6e73 6163 7454 696d 6522 3a20  "transactTime": 
-0002eca0: 3136 3730 3839 3138 3437 3933 322c 0a20  1670891847932,. 
-0002ecb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002ecc0: 2022 7072 6963 6522 3a20 2231 3335 3030   "price": "13500
-0002ecd0: 2e30 3030 3030 3030 3022 2c0a 2020 2020  .00000000",.    
-0002ece0: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
-0002ecf0: 7269 6751 7479 223a 2022 302e 3030 3038  rigQty": "0.0008
-0002ed00: 3530 3030 222c 0a20 2020 2020 2020 2023  5000",.        #
-0002ed10: 2020 2020 2020 2020 2022 6578 6563 7574           "execut
-0002ed20: 6564 5174 7922 3a20 2230 2e30 3030 3030  edQty": "0.00000
-0002ed30: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0002ed40: 2020 2020 2020 2020 2263 756d 6d75 6c61          "cummula
-0002ed50: 7469 7665 5175 6f74 6551 7479 223a 2022  tiveQuoteQty": "
-0002ed60: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-0002ed70: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0002ed80: 7374 6174 7573 223a 2022 4e45 5722 2c0a  status": "NEW",.
-0002ed90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002eda0: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
-0002edb0: 2022 4754 4322 2c0a 2020 2020 2020 2020   "GTC",.        
-0002edc0: 2320 2020 2020 2020 2020 2274 7970 6522  #         "type"
-0002edd0: 3a20 224c 494d 4954 222c 0a20 2020 2020  : "LIMIT",.     
-0002ede0: 2020 2023 2020 2020 2020 2020 2022 7369     #         "si
-0002edf0: 6465 223a 2022 4255 5922 2c0a 2020 2020  de": "BUY",.    
-0002ee00: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
-0002ee10: 696c 6c73 223a 205b 5d0a 2020 2020 2020  ills": [].      
-0002ee20: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0002ee30: 2020 230a 2020 2020 2020 2020 2320 6675    #.        # fu
-0002ee40: 7475 7265 730a 2020 2020 2020 2020 230a  tures.        #.
-0002ee50: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0002ee60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002ee70: 2020 2273 796d 626f 6c22 3a20 2242 5443    "symbol": "BTC
-0002ee80: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
-0002ee90: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-0002eea0: 6422 3a20 312c 0a20 2020 2020 2020 2023  d": 1,.        #
-0002eeb0: 2020 2020 2020 2020 2022 636c 6965 6e74           "client
-0002eec0: 4f72 6465 7249 6422 3a20 226d 794f 7264  OrderId": "myOrd
-0002eed0: 6572 3122 2c0a 2020 2020 2020 2020 2320  er1",.        # 
-0002eee0: 2020 2020 2020 2020 2270 7269 6365 223a          "price":
-0002eef0: 2022 302e 3122 2c0a 2020 2020 2020 2020   "0.1",.        
-0002ef00: 2320 2020 2020 2020 2020 226f 7269 6751  #         "origQ
-0002ef10: 7479 223a 2022 312e 3022 2c0a 2020 2020  ty": "1.0",.    
-0002ef20: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-0002ef30: 7865 6375 7465 6451 7479 223a 2022 312e  xecutedQty": "1.
-0002ef40: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0002ef50: 2020 2020 2020 2263 756d 5175 6f74 6522        "cumQuote"
-0002ef60: 3a20 2231 302e 3022 2c0a 2020 2020 2020  : "10.0",.      
-0002ef70: 2020 2320 2020 2020 2020 2020 2273 7461    #         "sta
-0002ef80: 7475 7322 3a20 224e 4557 222c 0a20 2020  tus": "NEW",.   
-0002ef90: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0002efa0: 7469 6d65 496e 466f 7263 6522 3a20 2247  timeInForce": "G
-0002efb0: 5443 222c 0a20 2020 2020 2020 2023 2020  TC",.        #  
-0002efc0: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
-0002efd0: 4c49 4d49 5422 2c0a 2020 2020 2020 2020  LIMIT",.        
-0002efe0: 2320 2020 2020 2020 2020 2273 6964 6522  #         "side"
-0002eff0: 3a20 2242 5559 222c 0a20 2020 2020 2020  : "BUY",.       
-0002f000: 2023 2020 2020 2020 2020 2022 7374 6f70   #         "stop
-0002f010: 5072 6963 6522 3a20 2230 2e30 222c 0a20  Price": "0.0",. 
-0002f020: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002f030: 2022 7570 6461 7465 5469 6d65 223a 2031   "updateTime": 1
-0002f040: 3439 3938 3237 3331 3935 3539 0a20 2020  499827319559.   
-0002f050: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0002f060: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0002f070: 2063 7265 6174 654f 7264 6572 2077 6974   createOrder wit
-0002f080: 6820 7b22 6e65 774f 7264 6572 5265 7370  h {"newOrderResp
-0002f090: 5479 7065 223a 2022 4655 4c4c 227d 0a20  Type": "FULL"}. 
-0002f0a0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0002f0b0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0002f0c0: 2023 2020 2020 2020 2022 7379 6d62 6f6c   #       "symbol
-0002f0d0: 223a 2022 4254 4355 5344 5422 2c0a 2020  ": "BTCUSDT",.  
-0002f0e0: 2020 2020 2020 2320 2020 2020 2020 226f        #       "o
-0002f0f0: 7264 6572 4964 223a 2035 3430 3332 3333  rderId": 5403233
-0002f100: 3933 392c 0a20 2020 2020 2020 2023 2020  939,.        #  
-0002f110: 2020 2020 2022 6f72 6465 724c 6973 7449       "orderListI
-0002f120: 6422 3a20 2d31 2c0a 2020 2020 2020 2020  d": -1,.        
-0002f130: 2320 2020 2020 2020 2263 6c69 656e 744f  #       "clientO
-0002f140: 7264 6572 4964 223a 2022 782d 5234 4244  rderId": "x-R4BD
-0002f150: 3353 3832 3565 3636 3965 3735 6236 6331  3S825e669e75b6c1
-0002f160: 3466 3639 6132 6334 3365 222c 0a20 2020  4f69a2c43e",.   
-0002f170: 2020 2020 2023 2020 2020 2020 2022 7472       #       "tr
-0002f180: 616e 7361 6374 5469 6d65 223a 2031 3631  ansactTime": 161
-0002f190: 3731 3531 3932 3337 3432 2c0a 2020 2020  7151923742,.    
-0002f1a0: 2020 2020 2320 2020 2020 2020 2270 7269      #       "pri
-0002f1b0: 6365 223a 2022 302e 3030 3030 3030 3030  ce": "0.00000000
-0002f1c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002f1d0: 2020 2022 6f72 6967 5174 7922 3a20 2230     "origQty": "0
-0002f1e0: 2e30 3030 3530 3030 3022 2c0a 2020 2020  .00050000",.    
-0002f1f0: 2020 2020 2320 2020 2020 2020 2265 7865      #       "exe
-0002f200: 6375 7465 6451 7479 223a 2022 302e 3030  cutedQty": "0.00
-0002f210: 3035 3030 3030 222c 0a20 2020 2020 2020  050000",.       
-0002f220: 2023 2020 2020 2020 2022 6375 6d6d 756c   #       "cummul
-0002f230: 6174 6976 6551 756f 7465 5174 7922 3a20  ativeQuoteQty": 
-0002f240: 2232 392e 3437 3038 3135 3030 222c 0a20  "29.47081500",. 
-0002f250: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0002f260: 7374 6174 7573 223a 2022 4649 4c4c 4544  status": "FILLED
-0002f270: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002f280: 2020 2022 7469 6d65 496e 466f 7263 6522     "timeInForce"
-0002f290: 3a20 2247 5443 222c 0a20 2020 2020 2020  : "GTC",.       
-0002f2a0: 2023 2020 2020 2020 2022 7479 7065 223a   #       "type":
-0002f2b0: 2022 4d41 524b 4554 222c 0a20 2020 2020   "MARKET",.     
-0002f2c0: 2020 2023 2020 2020 2020 2022 7369 6465     #       "side
-0002f2d0: 223a 2022 4255 5922 2c0a 2020 2020 2020  ": "BUY",.      
-0002f2e0: 2020 2320 2020 2020 2020 2266 696c 6c73    #       "fills
-0002f2f0: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
-0002f300: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0002f310: 2023 2020 2020 2020 2020 2020 2022 7072   #           "pr
-0002f320: 6963 6522 3a20 2235 3839 3431 2e36 3330  ice": "58941.630
-0002f330: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0002f340: 2320 2020 2020 2020 2020 2020 2271 7479  #           "qty
-0002f350: 223a 2022 302e 3030 3035 3030 3030 222c  ": "0.00050000",
-0002f360: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002f370: 2020 2020 2022 636f 6d6d 6973 7369 6f6e       "commission
-0002f380: 223a 2022 302e 3030 3030 3730 3530 222c  ": "0.00007050",
-0002f390: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002f3a0: 2020 2020 2022 636f 6d6d 6973 7369 6f6e       "commission
-0002f3b0: 4173 7365 7422 3a20 2242 4e42 222c 0a20  Asset": "BNB",. 
-0002f3c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002f3d0: 2020 2022 7472 6164 6549 6422 3a20 3733     "tradeId": 73
-0002f3e0: 3734 3636 3633 310a 2020 2020 2020 2020  7466631.        
-0002f3f0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
-0002f400: 2020 2020 2320 2020 2020 2020 5d0a 2020      #       ].  
-0002f410: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-0002f420: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0002f430: 2320 6465 6c69 7665 7279 0a20 2020 2020  # delivery.     
-0002f440: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0002f450: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0002f460: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
-0002f470: 2231 3837 3432 3732 3734 3131 222c 0a20  "18742727411",. 
-0002f480: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0002f490: 7379 6d62 6f6c 223a 2022 4554 4855 5344  symbol": "ETHUSD
-0002f4a0: 5f50 4552 5022 2c0a 2020 2020 2020 2020  _PERP",.        
-0002f4b0: 2320 2020 2020 2020 2270 6169 7222 3a20  #       "pair": 
-0002f4c0: 2245 5448 5553 4422 2c0a 2020 2020 2020  "ETHUSD",.      
-0002f4d0: 2020 2320 2020 2020 2020 2273 7461 7475    #       "statu
-0002f4e0: 7322 3a20 2246 494c 4c45 4422 2c0a 2020  s": "FILLED",.  
-0002f4f0: 2020 2020 2020 2320 2020 2020 2020 2263        #       "c
-0002f500: 6c69 656e 744f 7264 6572 4964 223a 2022  lientOrderId": "
-0002f510: 782d 7863 4b74 4768 6375 3365 3264 3135  x-xcKtGhcu3e2d15
-0002f520: 3033 6664 6435 3433 6233 6230 3234 3139  03fdd543b3b02419
-0002f530: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002f540: 2020 2022 7072 6963 6522 3a20 2230 222c     "price": "0",
-0002f550: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002f560: 2022 6176 6750 7269 6365 223a 2022 3435   "avgPrice": "45
-0002f570: 3232 2e31 3422 2c0a 2020 2020 2020 2020  22.14",.        
-0002f580: 2320 2020 2020 2020 226f 7269 6751 7479  #       "origQty
-0002f590: 223a 2022 3122 2c0a 2020 2020 2020 2020  ": "1",.        
-0002f5a0: 2320 2020 2020 2020 2265 7865 6375 7465  #       "execute
-0002f5b0: 6451 7479 223a 2022 3122 2c0a 2020 2020  dQty": "1",.    
-0002f5c0: 2020 2020 2320 2020 2020 2020 2263 756d      #       "cum
-0002f5d0: 4261 7365 223a 2022 302e 3030 3232 3131  Base": "0.002211
-0002f5e0: 3334 222c 0a20 2020 2020 2020 2023 2020  34",.        #  
-0002f5f0: 2020 2020 2022 7469 6d65 496e 466f 7263       "timeInForc
-0002f600: 6522 3a20 2247 5443 222c 0a20 2020 2020  e": "GTC",.     
-0002f610: 2020 2023 2020 2020 2020 2022 7479 7065     #       "type
-0002f620: 223a 2022 4d41 524b 4554 222c 0a20 2020  ": "MARKET",.   
-0002f630: 2020 2020 2023 2020 2020 2020 2022 7265       #       "re
-0002f640: 6475 6365 4f6e 6c79 223a 2046 616c 7365  duceOnly": False
-0002f650: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f660: 2020 2263 6c6f 7365 506f 7369 7469 6f6e    "closePosition
-0002f670: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
-0002f680: 2020 2320 2020 2020 2020 2273 6964 6522    #       "side"
-0002f690: 3a20 2253 454c 4c22 2c0a 2020 2020 2020  : "SELL",.      
-0002f6a0: 2020 2320 2020 2020 2020 2270 6f73 6974    #       "posit
-0002f6b0: 696f 6e53 6964 6522 3a20 2242 4f54 4822  ionSide": "BOTH"
-0002f6c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f6d0: 2020 2273 746f 7050 7269 6365 223a 2022    "stopPrice": "
-0002f6e0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0002f6f0: 2020 2020 2277 6f72 6b69 6e67 5479 7065      "workingType
-0002f700: 223a 2022 434f 4e54 5241 4354 5f50 5249  ": "CONTRACT_PRI
-0002f710: 4345 222c 0a20 2020 2020 2020 2023 2020  CE",.        #  
-0002f720: 2020 2020 2022 7072 6963 6550 726f 7465       "priceProte
-0002f730: 6374 223a 2046 616c 7365 2c0a 2020 2020  ct": False,.    
-0002f740: 2020 2020 2320 2020 2020 2020 226f 7269      #       "ori
-0002f750: 6754 7970 6522 3a20 224d 4152 4b45 5422  gType": "MARKET"
-0002f760: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f770: 2020 2274 696d 6522 3a20 2231 3633 3630    "time": "16360
-0002f780: 3631 3935 3236 3630 222c 0a20 2020 2020  61952660",.     
-0002f790: 2020 2023 2020 2020 2020 2022 7570 6461     #       "upda
-0002f7a0: 7465 5469 6d65 223a 2022 3136 3336 3036  teTime": "163606
-0002f7b0: 3139 3532 3636 3022 0a20 2020 2020 2020  1952660".       
-0002f7c0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-0002f7d0: 2023 0a20 2020 2020 2020 2023 206f 7074   #.        # opt
-0002f7e0: 696f 6e3a 2063 7265 6174 654f 7264 6572  ion: createOrder
-0002f7f0: 2c20 6665 7463 684f 7264 6572 2c20 6665  , fetchOrder, fe
-0002f800: 7463 684f 7065 6e4f 7264 6572 732c 2066  tchOpenOrders, f
-0002f810: 6574 6368 4f72 6465 7273 0a20 2020 2020  etchOrders.     
-0002f820: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0002f830: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0002f840: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-0002f850: 3a20 3437 3238 3833 3330 3835 3433 3639  : 47288330854369
-0002f860: 3737 3135 322c 0a20 2020 2020 2020 2023  77152,.        #
-0002f870: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-0002f880: 223a 2022 4554 482d 3233 3032 3131 2d31  ": "ETH-230211-1
-0002f890: 3530 302d 4322 2c0a 2020 2020 2020 2020  500-C",.        
-0002f8a0: 2320 2020 2020 2020 2020 2270 7269 6365  #         "price
-0002f8b0: 223a 2022 3130 2e30 222c 0a20 2020 2020  ": "10.0",.     
-0002f8c0: 2020 2023 2020 2020 2020 2020 2022 7175     #         "qu
-0002f8d0: 616e 7469 7479 223a 2022 312e 3030 222c  antity": "1.00",
-0002f8e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002f8f0: 2020 2022 6578 6563 7574 6564 5174 7922     "executedQty"
-0002f900: 3a20 2230 2e30 3022 2c0a 2020 2020 2020  : "0.00",.      
-0002f910: 2020 2320 2020 2020 2020 2020 2266 6565    #         "fee
-0002f920: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-0002f930: 2320 2020 2020 2020 2020 2273 6964 6522  #         "side"
-0002f940: 3a20 2242 5559 222c 0a20 2020 2020 2020  : "BUY",.       
-0002f950: 2023 2020 2020 2020 2020 2022 7479 7065   #         "type
-0002f960: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
-0002f970: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-0002f980: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
-0002f990: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
-0002f9a0: 2020 2020 2020 2272 6564 7563 654f 6e6c        "reduceOnl
-0002f9b0: 7922 3a20 4661 6c73 652c 0a20 2020 2020  y": False,.     
-0002f9c0: 2020 2023 2020 2020 2020 2020 2022 706f     #         "po
-0002f9d0: 7374 4f6e 6c79 223a 2046 616c 7365 2c0a  stOnly": False,.
-0002f9e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002f9f0: 2020 2263 7265 6174 6554 696d 6522 3a20    "createTime": 
-0002fa00: 3136 3736 3038 3330 3334 3436 322c 0a20  1676083034462,. 
-0002fa10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002fa20: 2022 7570 6461 7465 5469 6d65 223a 2031   "updateTime": 1
-0002fa30: 3637 3630 3833 3033 3434 3632 2c0a 2020  676083034462,.  
-0002fa40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002fa50: 2273 7461 7475 7322 3a20 2241 4343 4550  "status": "ACCEP
-0002fa60: 5445 4422 2c0a 2020 2020 2020 2020 2320  TED",.        # 
-0002fa70: 2020 2020 2020 2020 2261 7667 5072 6963          "avgPric
-0002fa80: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
-0002fa90: 2023 2020 2020 2020 2020 2022 736f 7572   #         "sour
-0002faa0: 6365 223a 2022 4150 4922 2c0a 2020 2020  ce": "API",.    
-0002fab0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-0002fac0: 6c69 656e 744f 7264 6572 4964 223a 2022  lientOrderId": "
-0002fad0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002fae0: 2020 2020 2022 7072 6963 6553 6361 6c65       "priceScale
-0002faf0: 223a 2031 2c0a 2020 2020 2020 2020 2320  ": 1,.        # 
-0002fb00: 2020 2020 2020 2020 2271 7561 6e74 6974          "quantit
-0002fb10: 7953 6361 6c65 223a 2032 2c0a 2020 2020  yScale": 2,.    
-0002fb20: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
-0002fb30: 7074 696f 6e53 6964 6522 3a20 2243 414c  ptionSide": "CAL
-0002fb40: 4c22 2c0a 2020 2020 2020 2020 2320 2020  L",.        #   
-0002fb50: 2020 2020 2020 2271 756f 7465 4173 7365        "quoteAsse
-0002fb60: 7422 3a20 2255 5344 5422 2c0a 2020 2020  t": "USDT",.    
-0002fb70: 2020 2020 2320 2020 2020 2020 2020 226c      #         "l
-0002fb80: 6173 7454 7261 6465 223a 207b 2269 6422  astTrade": {"id"
-0002fb90: 3a22 3639 222c 2274 696d 6522 3a22 3136  :"69","time":"16
-0002fba0: 3736 3038 3434 3330 3536 3722 2c22 7072  76084430567","pr
-0002fbb0: 6963 6522 3a22 3234 2e39 222c 2271 7479  ice":"24.9","qty
-0002fbc0: 223a 2231 2e30 3022 7d2c 0a20 2020 2020  ":"1.00"},.     
-0002fbd0: 2020 2023 2020 2020 2020 2020 2022 6d6d     #         "mm
-0002fbe0: 7022 3a20 4661 6c73 650a 2020 2020 2020  p": False.      
-0002fbf0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0002fc00: 2020 230a 2020 2020 2020 2020 7374 6174    #.        stat
-0002fc10: 7573 203d 2073 656c 662e 7061 7273 655f  us = self.parse_
-0002fc20: 6f72 6465 725f 7374 6174 7573 2873 656c  order_status(sel
-0002fc30: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
-0002fc40: 6465 722c 2027 7374 6174 7573 2729 290a  der, 'status')).
-0002fc50: 2020 2020 2020 2020 6d61 726b 6574 4964          marketId
-0002fc60: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0002fc70: 696e 6728 6f72 6465 722c 2027 7379 6d62  ing(order, 'symb
-0002fc80: 6f6c 2729 0a20 2020 2020 2020 206d 6172  ol').        mar
-0002fc90: 6b65 7454 7970 6520 3d20 2763 6f6e 7472  ketType = 'contr
-0002fca0: 6163 7427 2069 6620 2827 636c 6f73 6550  act' if ('closeP
-0002fcb0: 6f73 6974 696f 6e27 2069 6e20 6f72 6465  osition' in orde
-0002fcc0: 7229 2065 6c73 6520 2773 706f 7427 0a20  r) else 'spot'. 
-0002fcd0: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
-0002fce0: 7365 6c66 2e73 6166 655f 7379 6d62 6f6c  self.safe_symbol
-0002fcf0: 286d 6172 6b65 7449 642c 206d 6172 6b65  (marketId, marke
-0002fd00: 742c 204e 6f6e 652c 206d 6172 6b65 7454  t, None, marketT
-0002fd10: 7970 6529 0a20 2020 2020 2020 2066 696c  ype).        fil
-0002fd20: 6c65 6420 3d20 7365 6c66 2e73 6166 655f  led = self.safe_
-0002fd30: 7374 7269 6e67 286f 7264 6572 2c20 2765  string(order, 'e
-0002fd40: 7865 6375 7465 6451 7479 272c 2027 3027  xecutedQty', '0'
-0002fd50: 290a 2020 2020 2020 2020 7469 6d65 7374  ).        timest
-0002fd60: 616d 7020 3d20 4e6f 6e65 0a20 2020 2020  amp = None.     
-0002fd70: 2020 206c 6173 7454 7261 6465 5469 6d65     lastTradeTime
-0002fd80: 7374 616d 7020 3d20 4e6f 6e65 0a20 2020  stamp = None.   
-0002fd90: 2020 2020 2069 6620 2774 696d 6527 2069       if 'time' i
-0002fda0: 6e20 6f72 6465 723a 0a20 2020 2020 2020  n order:.       
-0002fdb0: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
-0002fdc0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-0002fdd0: 6572 286f 7264 6572 2c20 2774 696d 6527  er(order, 'time'
-0002fde0: 290a 2020 2020 2020 2020 656c 6966 2027  ).        elif '
-0002fdf0: 776f 726b 696e 6754 696d 6527 2069 6e20  workingTime' in 
-0002fe00: 6f72 6465 723a 0a20 2020 2020 2020 2020  order:.         
-0002fe10: 2020 206c 6173 7454 7261 6465 5469 6d65     lastTradeTime
-0002fe20: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-0002fe30: 655f 696e 7465 6765 7228 6f72 6465 722c  e_integer(order,
-0002fe40: 2027 7472 616e 7361 6374 5469 6d65 2729   'transactTime')
-0002fe50: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
-0002fe60: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
-0002fe70: 6665 5f69 6e74 6567 6572 286f 7264 6572  fe_integer(order
-0002fe80: 2c20 2777 6f72 6b69 6e67 5469 6d65 2729  , 'workingTime')
-0002fe90: 0a20 2020 2020 2020 2065 6c69 6620 2774  .        elif 't
-0002fea0: 7261 6e73 6163 7454 696d 6527 2069 6e20  ransactTime' in 
-0002feb0: 6f72 6465 723a 0a20 2020 2020 2020 2020  order:.         
-0002fec0: 2020 206c 6173 7454 7261 6465 5469 6d65     lastTradeTime
-0002fed0: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-0002fee0: 655f 696e 7465 6765 7228 6f72 6465 722c  e_integer(order,
-0002fef0: 2027 7472 616e 7361 6374 5469 6d65 2729   'transactTime')
-0002ff00: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
-0002ff10: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
-0002ff20: 6665 5f69 6e74 6567 6572 286f 7264 6572  fe_integer(order
-0002ff30: 2c20 2774 7261 6e73 6163 7454 696d 6527  , 'transactTime'
-0002ff40: 290a 2020 2020 2020 2020 656c 6966 2027  ).        elif '
-0002ff50: 6372 6561 7465 5469 6d65 2720 696e 206f  createTime' in o
-0002ff60: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
-0002ff70: 2020 6c61 7374 5472 6164 6554 696d 6573    lastTradeTimes
-0002ff80: 7461 6d70 203d 2073 656c 662e 7361 6665  tamp = self.safe
-0002ff90: 5f69 6e74 6567 6572 286f 7264 6572 2c20  _integer(order, 
-0002ffa0: 2775 7064 6174 6554 696d 6527 290a 2020  'updateTime').  
-0002ffb0: 2020 2020 2020 2020 2020 7469 6d65 7374            timest
-0002ffc0: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-0002ffd0: 696e 7465 6765 7228 6f72 6465 722c 2027  integer(order, '
-0002ffe0: 6372 6561 7465 5469 6d65 2729 0a20 2020  createTime').   
-0002fff0: 2020 2020 2065 6c69 6620 2775 7064 6174       elif 'updat
-00030000: 6554 696d 6527 2069 6e20 6f72 6465 723a  eTime' in order:
-00030010: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00030020: 7374 6174 7573 203d 3d20 276f 7065 6e27  status == 'open'
-00030030: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00030040: 2020 6966 2050 7265 6369 7365 2e73 7472    if Precise.str
-00030050: 696e 675f 6774 2866 696c 6c65 642c 2027  ing_gt(filled, '
-00030060: 3027 293a 0a20 2020 2020 2020 2020 2020  0'):.           
-00030070: 2020 2020 2020 2020 206c 6173 7454 7261           lastTra
-00030080: 6465 5469 6d65 7374 616d 7020 3d20 7365  deTimestamp = se
-00030090: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
-000300a0: 6f72 6465 722c 2027 7570 6461 7465 5469  order, 'updateTi
-000300b0: 6d65 2729 0a20 2020 2020 2020 2020 2020  me').           
-000300c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000300d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000300e0: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
-000300f0: 7361 6665 5f69 6e74 6567 6572 286f 7264  safe_integer(ord
-00030100: 6572 2c20 2775 7064 6174 6554 696d 6527  er, 'updateTime'
-00030110: 290a 2020 2020 2020 2020 6176 6572 6167  ).        averag
-00030120: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00030130: 7269 6e67 286f 7264 6572 2c20 2761 7667  ring(order, 'avg
-00030140: 5072 6963 6527 290a 2020 2020 2020 2020  Price').        
-00030150: 7072 6963 6520 3d20 7365 6c66 2e73 6166  price = self.saf
-00030160: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00030170: 2770 7269 6365 2729 0a20 2020 2020 2020  'price').       
-00030180: 2061 6d6f 756e 7420 3d20 7365 6c66 2e73   amount = self.s
-00030190: 6166 655f 7374 7269 6e67 5f32 286f 7264  afe_string_2(ord
-000301a0: 6572 2c20 276f 7269 6751 7479 272c 2027  er, 'origQty', '
-000301b0: 7175 616e 7469 7479 2729 0a20 2020 2020  quantity').     
-000301c0: 2020 2023 202d 2053 706f 742f 4d61 7267     # - Spot/Marg
-000301d0: 696e 206d 6172 6b65 743a 2063 756d 6d75  in market: cummu
-000301e0: 6c61 7469 7665 5175 6f74 6551 7479 0a20  lativeQuoteQty. 
-000301f0: 2020 2020 2020 2023 202d 2046 7574 7572         # - Futur
-00030200: 6573 206d 6172 6b65 743a 2063 756d 5175  es market: cumQu
-00030210: 6f74 652e 0a20 2020 2020 2020 2023 2020  ote..        #  
-00030220: 204e 6f74 6520 7365 6c66 2069 7320 6e6f   Note self is no
-00030230: 7420 7468 6520 6163 7475 616c 2063 6f73  t the actual cos
-00030240: 742c 2073 696e 6365 2042 696e 616e 6365  t, since Binance
-00030250: 2066 7574 7572 6573 2075 7365 7320 6c65   futures uses le
-00030260: 7665 7261 6765 2074 6f20 6361 6c63 756c  verage to calcul
-00030270: 6174 6520 6d61 7267 696e 732e 0a20 2020  ate margins..   
-00030280: 2020 2020 2063 6f73 7420 3d20 7365 6c66       cost = self
-00030290: 2e73 6166 655f 7374 7269 6e67 5f32 286f  .safe_string_2(o
-000302a0: 7264 6572 2c20 2763 756d 6d75 6c61 7469  rder, 'cummulati
-000302b0: 7665 5175 6f74 6551 7479 272c 2027 6375  veQuoteQty', 'cu
-000302c0: 6d51 756f 7465 2729 0a20 2020 2020 2020  mQuote').       
-000302d0: 2063 6f73 7420 3d20 7365 6c66 2e73 6166   cost = self.saf
-000302e0: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-000302f0: 2763 756d 4261 7365 272c 2063 6f73 7429  'cumBase', cost)
-00030300: 0a20 2020 2020 2020 2069 6420 3d20 7365  .        id = se
-00030310: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-00030320: 7264 6572 2c20 276f 7264 6572 4964 2729  rder, 'orderId')
-00030330: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
-00030340: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00030350: 5f6c 6f77 6572 286f 7264 6572 2c20 2774  _lower(order, 't
-00030360: 7970 6527 290a 2020 2020 2020 2020 7369  ype').        si
-00030370: 6465 203d 2073 656c 662e 7361 6665 5f73  de = self.safe_s
-00030380: 7472 696e 675f 6c6f 7765 7228 6f72 6465  tring_lower(orde
-00030390: 722c 2027 7369 6465 2729 0a20 2020 2020  r, 'side').     
-000303a0: 2020 2066 696c 6c73 203d 2073 656c 662e     fills = self.
-000303b0: 7361 6665 5f76 616c 7565 286f 7264 6572  safe_value(order
-000303c0: 2c20 2766 696c 6c73 272c 205b 5d29 0a20  , 'fills', []). 
-000303d0: 2020 2020 2020 2063 6c69 656e 744f 7264         clientOrd
-000303e0: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
-000303f0: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
-00030400: 636c 6965 6e74 4f72 6465 7249 6427 290a  clientOrderId').
-00030410: 2020 2020 2020 2020 7469 6d65 496e 466f          timeInFo
-00030420: 7263 6520 3d20 7365 6c66 2e73 6166 655f  rce = self.safe_
-00030430: 7374 7269 6e67 286f 7264 6572 2c20 2774  string(order, 't
-00030440: 696d 6549 6e46 6f72 6365 2729 0a20 2020  imeInForce').   
-00030450: 2020 2020 2069 6620 7469 6d65 496e 466f       if timeInFo
-00030460: 7263 6520 3d3d 2027 4754 5827 3a0a 2020  rce == 'GTX':.  
-00030470: 2020 2020 2020 2020 2020 2320 4754 5820            # GTX 
-00030480: 6d65 616e 7320 2247 6f6f 6420 5469 6c6c  means "Good Till
-00030490: 2043 726f 7373 696e 6722 2061 6e64 2069   Crossing" and i
-000304a0: 7320 616e 2065 7175 6976 616c 656e 7420  s an equivalent 
-000304b0: 7761 7920 6f66 2073 6179 696e 6720 506f  way of saying Po
-000304c0: 7374 204f 6e6c 790a 2020 2020 2020 2020  st Only.        
-000304d0: 2020 2020 7469 6d65 496e 466f 7263 6520      timeInForce 
-000304e0: 3d20 2750 4f27 0a20 2020 2020 2020 2070  = 'PO'.        p
-000304f0: 6f73 744f 6e6c 7920 3d20 2874 7970 6520  ostOnly = (type 
-00030500: 3d3d 2027 6c69 6d69 745f 6d61 6b65 7227  == 'limit_maker'
-00030510: 2920 6f72 2028 7469 6d65 496e 466f 7263  ) or (timeInForc
-00030520: 6520 3d3d 2027 504f 2729 0a20 2020 2020  e == 'PO').     
-00030530: 2020 2069 6620 7479 7065 203d 3d20 276c     if type == 'l
-00030540: 696d 6974 5f6d 616b 6572 273a 0a20 2020  imit_maker':.   
-00030550: 2020 2020 2020 2020 2074 7970 6520 3d20           type = 
-00030560: 276c 696d 6974 270a 2020 2020 2020 2020  'limit'.        
-00030570: 7374 6f70 5072 6963 6553 7472 696e 6720  stopPriceString 
-00030580: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00030590: 6e67 286f 7264 6572 2c20 2773 746f 7050  ng(order, 'stopP
-000305a0: 7269 6365 2729 0a20 2020 2020 2020 2073  rice').        s
-000305b0: 746f 7050 7269 6365 203d 2073 656c 662e  topPrice = self.
-000305c0: 7061 7273 655f 6e75 6d62 6572 2873 656c  parse_number(sel
-000305d0: 662e 6f6d 6974 5f7a 6572 6f28 7374 6f70  f.omit_zero(stop
-000305e0: 5072 6963 6553 7472 696e 6729 290a 2020  PriceString)).  
-000305f0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00030600: 662e 7361 6665 5f6f 7264 6572 287b 0a20  f.safe_order({. 
-00030610: 2020 2020 2020 2020 2020 2027 696e 666f             'info
-00030620: 273a 206f 7264 6572 2c0a 2020 2020 2020  ': order,.      
-00030630: 2020 2020 2020 2769 6427 3a20 6964 2c0a        'id': id,.
-00030640: 2020 2020 2020 2020 2020 2020 2763 6c69              'cli
-00030650: 656e 744f 7264 6572 4964 273a 2063 6c69  entOrderId': cli
-00030660: 656e 744f 7264 6572 4964 2c0a 2020 2020  entOrderId,.    
-00030670: 2020 2020 2020 2020 2774 696d 6573 7461          'timesta
-00030680: 6d70 273a 2074 696d 6573 7461 6d70 2c0a  mp': timestamp,.
-00030690: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
-000306a0: 6574 696d 6527 3a20 7365 6c66 2e69 736f  etime': self.iso
-000306b0: 3836 3031 2874 696d 6573 7461 6d70 292c  8601(timestamp),
-000306c0: 0a20 2020 2020 2020 2020 2020 2027 6c61  .            'la
-000306d0: 7374 5472 6164 6554 696d 6573 7461 6d70  stTradeTimestamp
-000306e0: 273a 206c 6173 7454 7261 6465 5469 6d65  ': lastTradeTime
-000306f0: 7374 616d 702c 0a20 2020 2020 2020 2020  stamp,.         
-00030700: 2020 2027 7379 6d62 6f6c 273a 2073 796d     'symbol': sym
-00030710: 626f 6c2c 0a20 2020 2020 2020 2020 2020  bol,.           
-00030720: 2027 7479 7065 273a 2074 7970 652c 0a20   'type': type,. 
-00030730: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-00030740: 496e 466f 7263 6527 3a20 7469 6d65 496e  InForce': timeIn
-00030750: 466f 7263 652c 0a20 2020 2020 2020 2020  Force,.         
-00030760: 2020 2027 706f 7374 4f6e 6c79 273a 2070     'postOnly': p
-00030770: 6f73 744f 6e6c 792c 0a20 2020 2020 2020  ostOnly,.       
-00030780: 2020 2020 2027 7265 6475 6365 4f6e 6c79       'reduceOnly
-00030790: 273a 2073 656c 662e 7361 6665 5f76 616c  ': self.safe_val
-000307a0: 7565 286f 7264 6572 2c20 2772 6564 7563  ue(order, 'reduc
-000307b0: 654f 6e6c 7927 292c 0a20 2020 2020 2020  eOnly'),.       
-000307c0: 2020 2020 2027 7369 6465 273a 2073 6964       'side': sid
-000307d0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-000307e0: 7072 6963 6527 3a20 7072 6963 652c 0a20  price': price,. 
-000307f0: 2020 2020 2020 2020 2020 2027 7472 6967             'trig
-00030800: 6765 7250 7269 6365 273a 2073 746f 7050  gerPrice': stopP
-00030810: 7269 6365 2c0a 2020 2020 2020 2020 2020  rice,.          
-00030820: 2020 2761 6d6f 756e 7427 3a20 616d 6f75    'amount': amou
-00030830: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
-00030840: 2763 6f73 7427 3a20 636f 7374 2c0a 2020  'cost': cost,.  
-00030850: 2020 2020 2020 2020 2020 2761 7665 7261            'avera
-00030860: 6765 273a 2061 7665 7261 6765 2c0a 2020  ge': average,.  
-00030870: 2020 2020 2020 2020 2020 2766 696c 6c65            'fille
-00030880: 6427 3a20 6669 6c6c 6564 2c0a 2020 2020  d': filled,.    
-00030890: 2020 2020 2020 2020 2772 656d 6169 6e69          'remaini
-000308a0: 6e67 273a 204e 6f6e 652c 0a20 2020 2020  ng': None,.     
-000308b0: 2020 2020 2020 2027 7374 6174 7573 273a         'status':
-000308c0: 2073 7461 7475 732c 0a20 2020 2020 2020   status,.       
-000308d0: 2020 2020 2027 6665 6527 3a20 7b0a 2020       'fee': {.  
-000308e0: 2020 2020 2020 2020 2020 2020 2020 2763                'c
-000308f0: 7572 7265 6e63 7927 3a20 7365 6c66 2e73  urrency': self.s
-00030900: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
-00030910: 2c20 2771 756f 7465 4173 7365 7427 292c  , 'quoteAsset'),
-00030920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030930: 2027 636f 7374 273a 2073 656c 662e 7361   'cost': self.sa
-00030940: 6665 5f6e 756d 6265 7228 6f72 6465 722c  fe_number(order,
-00030950: 2027 6665 6527 292c 0a20 2020 2020 2020   'fee'),.       
-00030960: 2020 2020 2020 2020 2027 7261 7465 273a           'rate':
-00030970: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-00030980: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
-00030990: 2020 2774 7261 6465 7327 3a20 6669 6c6c    'trades': fill
-000309a0: 732c 0a20 2020 2020 2020 207d 2c20 6d61  s,.        }, ma
-000309b0: 726b 6574 290a 0a20 2020 2061 7379 6e63  rket)..    async
-000309c0: 2064 6566 2063 7265 6174 655f 6f72 6465   def create_orde
-000309d0: 7228 7365 6c66 2c20 7379 6d62 6f6c 3a20  r(self, symbol: 
-000309e0: 7374 722c 2074 7970 652c 2073 6964 653a  str, type, side:
-000309f0: 204f 7264 6572 5369 6465 2c20 616d 6f75   OrderSide, amou
-00030a00: 6e74 2c20 7072 6963 653d 4e6f 6e65 2c20  nt, price=None, 
-00030a10: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00030a20: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00030a30: 6372 6561 7465 2061 2074 7261 6465 206f  create a trade o
-00030a40: 7264 6572 0a20 2020 2020 2020 203a 7061  rder.        :pa
-00030a50: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
-00030a60: 756e 6966 6965 6420 7379 6d62 6f6c 206f  unified symbol o
-00030a70: 6620 7468 6520 6d61 726b 6574 2074 6f20  f the market to 
-00030a80: 6372 6561 7465 2061 6e20 6f72 6465 7220  create an order 
-00030a90: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-00030aa0: 6d20 7374 7220 7479 7065 3a20 276d 6172  m str type: 'mar
-00030ab0: 6b65 7427 206f 7220 276c 696d 6974 270a  ket' or 'limit'.
-00030ac0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00030ad0: 7472 2073 6964 653a 2027 6275 7927 206f  tr side: 'buy' o
-00030ae0: 7220 2773 656c 6c27 0a20 2020 2020 2020  r 'sell'.       
-00030af0: 203a 7061 7261 6d20 666c 6f61 7420 616d   :param float am
-00030b00: 6f75 6e74 3a20 686f 7720 6d75 6368 206f  ount: how much o
-00030b10: 6620 6375 7272 656e 6379 2079 6f75 2077  f currency you w
-00030b20: 616e 7420 746f 2074 7261 6465 2069 6e20  ant to trade in 
-00030b30: 756e 6974 7320 6f66 2062 6173 6520 6375  units of base cu
-00030b40: 7272 656e 6379 0a20 2020 2020 2020 203a  rrency.        :
-00030b50: 7061 7261 6d20 666c 6f61 747c 4e6f 6e65  param float|None
-00030b60: 2070 7269 6365 3a20 7468 6520 7072 6963   price: the pric
-00030b70: 6520 6174 2077 6869 6368 2074 6865 206f  e at which the o
-00030b80: 7264 6572 2069 7320 746f 2062 6520 6675  rder is to be fu
-00030b90: 6c6c 6669 6c6c 6564 2c20 696e 2075 6e69  llfilled, in uni
-00030ba0: 7473 206f 6620 7468 6520 7175 6f74 6520  ts of the quote 
-00030bb0: 6375 7272 656e 6379 2c20 6967 6e6f 7265  currency, ignore
-00030bc0: 6420 696e 206d 6172 6b65 7420 6f72 6465  d in market orde
-00030bd0: 7273 0a20 2020 2020 2020 203a 7061 7261  rs.        :para
-00030be0: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-00030bf0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-00030c00: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-00030c10: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
-00030c20: 6f69 6e74 0a20 2020 2020 2020 203a 7061  oint.        :pa
-00030c30: 7261 6d20 7374 727c 4e6f 6e65 2070 6172  ram str|None par
-00030c40: 616d 735b 276d 6172 6769 6e4d 6f64 6527  ams['marginMode'
-00030c50: 5d3a 2027 6372 6f73 7327 206f 7220 2769  ]: 'cross' or 'i
-00030c60: 736f 6c61 7465 6427 2c20 666f 7220 7370  solated', for sp
-00030c70: 6f74 206d 6172 6769 6e20 7472 6164 696e  ot margin tradin
-00030c80: 670a 2020 2020 2020 2020 3a72 6574 7572  g.        :retur
-00030c90: 6e73 2064 6963 743a 2061 6e20 606f 7264  ns dict: an `ord
-00030ca0: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
-00030cb0: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00030cc0: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
-00030cd0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00030ce0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00030cf0: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-00030d00: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00030d10: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00030d20: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-00030d30: 2020 2020 2020 206d 6172 6b65 7454 7970         marketTyp
-00030d40: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00030d50: 7269 6e67 2870 6172 616d 732c 2027 7479  ring(params, 'ty
-00030d60: 7065 272c 206d 6172 6b65 745b 2774 7970  pe', market['typ
-00030d70: 6527 5d29 0a20 2020 2020 2020 2063 6c69  e']).        cli
-00030d80: 656e 744f 7264 6572 4964 203d 2073 656c  entOrderId = sel
-00030d90: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
-00030da0: 7061 7261 6d73 2c20 276e 6577 436c 6965  params, 'newClie
-00030db0: 6e74 4f72 6465 7249 6427 2c20 2763 6c69  ntOrderId', 'cli
-00030dc0: 656e 744f 7264 6572 4964 2729 0a20 2020  entOrderId').   
-00030dd0: 2020 2020 2069 6e69 7469 616c 5570 7065       initialUppe
-00030de0: 7263 6173 6554 7970 6520 3d20 7479 7065  rcaseType = type
-00030df0: 2e75 7070 6572 2829 0a20 2020 2020 2020  .upper().       
-00030e00: 2069 734d 6172 6b65 744f 7264 6572 203d   isMarketOrder =
-00030e10: 2069 6e69 7469 616c 5570 7065 7263 6173   initialUppercas
-00030e20: 6554 7970 6520 3d3d 2027 4d41 524b 4554  eType == 'MARKET
-00030e30: 270a 2020 2020 2020 2020 6973 4c69 6d69  '.        isLimi
-00030e40: 744f 7264 6572 203d 2069 6e69 7469 616c  tOrder = initial
-00030e50: 5570 7065 7263 6173 6554 7970 6520 3d3d  UppercaseType ==
-00030e60: 2027 4c49 4d49 5427 0a20 2020 2020 2020   'LIMIT'.       
-00030e70: 2070 6f73 744f 6e6c 7920 3d20 7365 6c66   postOnly = self
-00030e80: 2e69 735f 706f 7374 5f6f 6e6c 7928 6973  .is_post_only(is
-00030e90: 4d61 726b 6574 4f72 6465 722c 2069 6e69  MarketOrder, ini
-00030ea0: 7469 616c 5570 7065 7263 6173 6554 7970  tialUppercaseTyp
-00030eb0: 6520 3d3d 2027 4c49 4d49 545f 4d41 4b45  e == 'LIMIT_MAKE
-00030ec0: 5227 2c20 7061 7261 6d73 290a 2020 2020  R', params).    
-00030ed0: 2020 2020 7472 6967 6765 7250 7269 6365      triggerPrice
-00030ee0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-00030ef0: 7565 5f32 2870 6172 616d 732c 2027 7472  ue_2(params, 'tr
-00030f00: 6967 6765 7250 7269 6365 272c 2027 7374  iggerPrice', 'st
-00030f10: 6f70 5072 6963 6527 290a 2020 2020 2020  opPrice').      
-00030f20: 2020 7374 6f70 4c6f 7373 5072 6963 6520    stopLossPrice 
-00030f30: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00030f40: 6528 7061 7261 6d73 2c20 2773 746f 704c  e(params, 'stopL
-00030f50: 6f73 7350 7269 6365 272c 2074 7269 6767  ossPrice', trigg
-00030f60: 6572 5072 6963 6529 2020 2320 6661 6c6c  erPrice)  # fall
-00030f70: 6261 636b 2074 6f20 7374 6f70 4c6f 7373  back to stopLoss
-00030f80: 0a20 2020 2020 2020 2074 616b 6550 726f  .        takePro
-00030f90: 6669 7450 7269 6365 203d 2073 656c 662e  fitPrice = self.
-00030fa0: 7361 6665 5f76 616c 7565 2870 6172 616d  safe_value(param
-00030fb0: 732c 2027 7461 6b65 5072 6f66 6974 5072  s, 'takeProfitPr
-00030fc0: 6963 6527 290a 2020 2020 2020 2020 6973  ice').        is
-00030fd0: 5374 6f70 4c6f 7373 203d 2073 746f 704c  StopLoss = stopL
-00030fe0: 6f73 7350 7269 6365 2069 7320 6e6f 7420  ossPrice is not 
-00030ff0: 4e6f 6e65 0a20 2020 2020 2020 2069 7354  None.        isT
-00031000: 616b 6550 726f 6669 7420 3d20 7461 6b65  akeProfit = take
-00031010: 5072 6f66 6974 5072 6963 6520 6973 206e  ProfitPrice is n
-00031020: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-00031030: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
-00031040: 6974 2870 6172 616d 732c 205b 2774 7970  it(params, ['typ
-00031050: 6527 2c20 276e 6577 436c 6965 6e74 4f72  e', 'newClientOr
-00031060: 6465 7249 6427 2c20 2763 6c69 656e 744f  derId', 'clientO
-00031070: 7264 6572 4964 272c 2027 706f 7374 4f6e  rderId', 'postOn
-00031080: 6c79 272c 2027 7374 6f70 4c6f 7373 5072  ly', 'stopLossPr
-00031090: 6963 6527 2c20 2774 616b 6550 726f 6669  ice', 'takeProfi
-000310a0: 7450 7269 6365 272c 2027 7374 6f70 5072  tPrice', 'stopPr
-000310b0: 6963 6527 2c20 2774 7269 6767 6572 5072  ice', 'triggerPr
-000310c0: 6963 6527 5d29 0a20 2020 2020 2020 206d  ice']).        m
-000310d0: 6172 6769 6e4d 6f64 652c 2071 7565 7279  arginMode, query
-000310e0: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
-000310f0: 6172 6769 6e5f 6d6f 6465 5f61 6e64 5f70  argin_mode_and_p
-00031100: 6172 616d 7328 2763 7265 6174 654f 7264  arams('createOrd
-00031110: 6572 272c 2070 6172 616d 7329 0a20 2020  er', params).   
-00031120: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00031130: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
-00031140: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
-00031150: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
-00031160: 2027 7369 6465 273a 2073 6964 652e 7570   'side': side.up
-00031170: 7065 7228 292c 0a20 2020 2020 2020 207d  per(),.        }
-00031180: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
-00031190: 3d20 2770 7269 7661 7465 506f 7374 4f72  = 'privatePostOr
-000311a0: 6465 7227 0a20 2020 2020 2020 2069 6620  der'.        if 
-000311b0: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-000311c0: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-000311d0: 7468 6f64 203d 2027 6661 7069 5072 6976  thod = 'fapiPriv
-000311e0: 6174 6550 6f73 744f 7264 6572 270a 2020  atePostOrder'.  
-000311f0: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-00031200: 745b 2769 6e76 6572 7365 275d 3a0a 2020  t['inverse']:.  
-00031210: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00031220: 203d 2027 6461 7069 5072 6976 6174 6550   = 'dapiPrivateP
-00031230: 6f73 744f 7264 6572 270a 2020 2020 2020  ostOrder'.      
-00031240: 2020 656c 6966 206d 6172 6b65 7454 7970    elif marketTyp
-00031250: 6520 3d3d 2027 6d61 7267 696e 2720 6f72  e == 'margin' or
-00031260: 206d 6172 6769 6e4d 6f64 6520 6973 206e   marginMode is n
-00031270: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00031280: 2020 2020 206d 6574 686f 6420 3d20 2773       method = 's
-00031290: 6170 6950 6f73 744d 6172 6769 6e4f 7264  apiPostMarginOrd
-000312a0: 6572 270a 2020 2020 2020 2020 2020 2020  er'.            
-000312b0: 7265 6475 6365 4f6e 6c79 203d 2073 656c  reduceOnly = sel
-000312c0: 662e 7361 6665 5f76 616c 7565 2870 6172  f.safe_value(par
-000312d0: 616d 732c 2027 7265 6475 6365 4f6e 6c79  ams, 'reduceOnly
-000312e0: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
-000312f0: 6620 7265 6475 6365 4f6e 6c79 3a0a 2020  f reduceOnly:.  
-00031300: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00031310: 7175 6573 745b 2773 6964 6545 6666 6563  quest['sideEffec
-00031320: 7454 7970 6527 5d20 3d20 2741 5554 4f5f  tType'] = 'AUTO_
-00031330: 5245 5041 5927 0a20 2020 2020 2020 2020  REPAY'.         
-00031340: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-00031350: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-00031360: 2c20 2772 6564 7563 654f 6e6c 7927 290a  , 'reduceOnly').
-00031370: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-00031380: 745b 2773 706f 7427 5d20 6f72 206d 6172  t['spot'] or mar
-00031390: 6b65 7454 7970 6520 3d3d 2027 6d61 7267  ketType == 'marg
-000313a0: 696e 273a 0a20 2020 2020 2020 2020 2020  in':.           
-000313b0: 2023 2073 7570 706f 7274 2066 6f72 2074   # support for t
-000313c0: 6573 7469 6e67 206f 7264 6572 730a 2020  esting orders.  
-000313d0: 2020 2020 2020 2020 2020 7465 7374 203d            test =
-000313e0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-000313f0: 2871 7565 7279 2c20 2774 6573 7427 2c20  (query, 'test', 
-00031400: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
-00031410: 2020 2069 6620 7465 7374 3a0a 2020 2020     if test:.    
-00031420: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-00031430: 6f64 202b 3d20 2754 6573 7427 0a20 2020  od += 'Test'.   
-00031440: 2020 2020 2020 2020 2023 206f 6e6c 7920           # only 
-00031450: 7375 7070 6f72 7465 6420 666f 7220 7370  supported for sp
-00031460: 6f74 2f6d 6172 6769 6e20 6170 6928 616c  ot/margin api(al
-00031470: 6c20 6d61 7267 696e 206d 6172 6b65 7473  l margin markets
-00031480: 2061 7265 2073 706f 7420 6d61 726b 6574   are spot market
-00031490: 7329 0a20 2020 2020 2020 2020 2020 2069  s).            i
-000314a0: 6620 706f 7374 4f6e 6c79 3a0a 2020 2020  f postOnly:.    
-000314b0: 2020 2020 2020 2020 2020 2020 7479 7065              type
-000314c0: 203d 2027 4c49 4d49 545f 4d41 4b45 5227   = 'LIMIT_MAKER'
-000314d0: 0a20 2020 2020 2020 2075 7070 6572 6361  .        upperca
-000314e0: 7365 5479 7065 203d 2074 7970 652e 7570  seType = type.up
-000314f0: 7065 7228 290a 2020 2020 2020 2020 7374  per().        st
-00031500: 6f70 5072 6963 6520 3d20 4e6f 6e65 0a20  opPrice = None. 
-00031510: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
-00031520: 4c6f 7373 3a0a 2020 2020 2020 2020 2020  Loss:.          
-00031530: 2020 7374 6f70 5072 6963 6520 3d20 7374    stopPrice = st
-00031540: 6f70 4c6f 7373 5072 6963 650a 2020 2020  opLossPrice.    
-00031550: 2020 2020 2020 2020 6966 2069 734d 6172          if isMar
-00031560: 6b65 744f 7264 6572 3a0a 2020 2020 2020  ketOrder:.      
-00031570: 2020 2020 2020 2020 2020 2320 7370 6f74            # spot
-00031580: 2053 544f 505f 4c4f 5353 206d 6172 6b65   STOP_LOSS marke
-00031590: 7420 6f72 6465 7273 2061 7265 206e 6f74  t orders are not
-000315a0: 2061 2076 616c 6964 206f 7264 6572 2074   a valid order t
-000315b0: 7970 650a 2020 2020 2020 2020 2020 2020  ype.            
-000315c0: 2020 2020 7570 7065 7263 6173 6554 7970      uppercaseTyp
-000315d0: 6520 3d20 2753 544f 505f 4d41 524b 4554  e = 'STOP_MARKET
-000315e0: 2720 6966 206d 6172 6b65 745b 2763 6f6e  ' if market['con
-000315f0: 7472 6163 7427 5d20 656c 7365 2027 5354  tract'] else 'ST
-00031600: 4f50 5f4c 4f53 5327 0a20 2020 2020 2020  OP_LOSS'.       
-00031610: 2020 2020 2065 6c69 6620 6973 4c69 6d69       elif isLimi
-00031620: 744f 7264 6572 3a0a 2020 2020 2020 2020  tOrder:.        
-00031630: 2020 2020 2020 2020 7570 7065 7263 6173          uppercas
-00031640: 6554 7970 6520 3d20 2753 544f 5027 2069  eType = 'STOP' i
-00031650: 6620 6d61 726b 6574 5b27 636f 6e74 7261  f market['contra
-00031660: 6374 275d 2065 6c73 6520 2753 544f 505f  ct'] else 'STOP_
-00031670: 4c4f 5353 5f4c 494d 4954 270a 2020 2020  LOSS_LIMIT'.    
-00031680: 2020 2020 656c 6966 2069 7354 616b 6550      elif isTakeP
-00031690: 726f 6669 743a 0a20 2020 2020 2020 2020  rofit:.         
-000316a0: 2020 2073 746f 7050 7269 6365 203d 2074     stopPrice = t
-000316b0: 616b 6550 726f 6669 7450 7269 6365 0a20  akeProfitPrice. 
-000316c0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-000316d0: 4d61 726b 6574 4f72 6465 723a 0a20 2020  MarketOrder:.   
-000316e0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-000316f0: 706f 7420 5441 4b45 5f50 524f 4649 5420  pot TAKE_PROFIT 
-00031700: 6d61 726b 6574 206f 7264 6572 7320 6172  market orders ar
-00031710: 6520 6e6f 7420 6120 7661 6c69 6420 6f72  e not a valid or
-00031720: 6465 7220 7479 7065 0a20 2020 2020 2020  der type.       
-00031730: 2020 2020 2020 2020 2075 7070 6572 6361           upperca
-00031740: 7365 5479 7065 203d 2027 5441 4b45 5f50  seType = 'TAKE_P
-00031750: 524f 4649 545f 4d41 524b 4554 2720 6966  ROFIT_MARKET' if
-00031760: 206d 6172 6b65 745b 2763 6f6e 7472 6163   market['contrac
-00031770: 7427 5d20 656c 7365 2027 5441 4b45 5f50  t'] else 'TAKE_P
-00031780: 524f 4649 5427 0a20 2020 2020 2020 2020  ROFIT'.         
-00031790: 2020 2065 6c69 6620 6973 4c69 6d69 744f     elif isLimitO
-000317a0: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
-000317b0: 2020 2020 2020 7570 7065 7263 6173 6554        uppercaseT
-000317c0: 7970 6520 3d20 2754 414b 455f 5052 4f46  ype = 'TAKE_PROF
-000317d0: 4954 2720 6966 206d 6172 6b65 745b 2763  IT' if market['c
-000317e0: 6f6e 7472 6163 7427 5d20 656c 7365 2027  ontract'] else '
-000317f0: 5441 4b45 5f50 524f 4649 545f 4c49 4d49  TAKE_PROFIT_LIMI
-00031800: 5427 0a20 2020 2020 2020 2069 6620 6d61  T'.        if ma
-00031810: 7267 696e 4d6f 6465 203d 3d20 2769 736f  rginMode == 'iso
-00031820: 6c61 7465 6427 3a0a 2020 2020 2020 2020  lated':.        
-00031830: 2020 2020 7265 7175 6573 745b 2769 7349      request['isI
-00031840: 736f 6c61 7465 6427 5d20 3d20 5472 7565  solated'] = True
-00031850: 0a20 2020 2020 2020 2069 6620 636c 6965  .        if clie
-00031860: 6e74 4f72 6465 7249 6420 6973 204e 6f6e  ntOrderId is Non
-00031870: 653a 0a20 2020 2020 2020 2020 2020 2062  e:.            b
-00031880: 726f 6b65 7220 3d20 7365 6c66 2e73 6166  roker = self.saf
-00031890: 655f 7661 6c75 6528 7365 6c66 2e6f 7074  e_value(self.opt
-000318a0: 696f 6e73 2c20 2762 726f 6b65 7227 290a  ions, 'broker').
-000318b0: 2020 2020 2020 2020 2020 2020 6966 2062              if b
-000318c0: 726f 6b65 7220 6973 206e 6f74 204e 6f6e  roker is not Non
-000318d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000318e0: 2020 2062 726f 6b65 7249 6420 3d20 7365     brokerId = se
-000318f0: 6c66 2e73 6166 655f 7374 7269 6e67 2862  lf.safe_string(b
-00031900: 726f 6b65 722c 206d 6172 6b65 7454 7970  roker, marketTyp
-00031910: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00031920: 2020 2069 6620 6272 6f6b 6572 4964 2069     if brokerId i
-00031930: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00031940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031950: 7265 7175 6573 745b 276e 6577 436c 6965  request['newClie
-00031960: 6e74 4f72 6465 7249 6427 5d20 3d20 6272  ntOrderId'] = br
-00031970: 6f6b 6572 4964 202b 2073 656c 662e 7575  okerId + self.uu
-00031980: 6964 3232 2829 0a20 2020 2020 2020 2065  id22().        e
-00031990: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000319a0: 2072 6571 7565 7374 5b27 6e65 7743 6c69   request['newCli
-000319b0: 656e 744f 7264 6572 4964 275d 203d 2063  entOrderId'] = c
-000319c0: 6c69 656e 744f 7264 6572 4964 0a20 2020  lientOrderId.   
-000319d0: 2020 2020 2069 6620 286d 6172 6b65 7454       if (marketT
-000319e0: 7970 6520 3d3d 2027 7370 6f74 2729 206f  ype == 'spot') o
-000319f0: 7220 286d 6172 6b65 7454 7970 6520 3d3d  r (marketType ==
-00031a00: 2027 6d61 7267 696e 2729 3a0a 2020 2020   'margin'):.    
-00031a10: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00031a20: 276e 6577 4f72 6465 7252 6573 7054 7970  'newOrderRespTyp
-00031a30: 6527 5d20 3d20 7365 6c66 2e73 6166 655f  e'] = self.safe_
-00031a40: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
-00031a50: 6e73 5b27 6e65 774f 7264 6572 5265 7370  ns['newOrderResp
-00031a60: 5479 7065 275d 2c20 7479 7065 2c20 2752  Type'], type, 'R
-00031a70: 4553 554c 5427 2920 2023 2027 4143 4b27  ESULT')  # 'ACK'
-00031a80: 2066 6f72 206f 7264 6572 2069 642c 2027   for order id, '
-00031a90: 5245 5355 4c54 2720 666f 7220 6675 6c6c  RESULT' for full
-00031aa0: 206f 7264 6572 206f 7220 2746 554c 4c27   order or 'FULL'
-00031ab0: 2066 6f72 206f 7264 6572 2077 6974 6820   for order with 
-00031ac0: 6669 6c6c 730a 2020 2020 2020 2020 656c  fills.        el
-00031ad0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00031ae0: 2320 7377 6170 2c20 6675 7475 7265 7320  # swap, futures 
-00031af0: 616e 6420 6f70 7469 6f6e 730a 2020 2020  and options.    
-00031b00: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00031b10: 276e 6577 4f72 6465 7252 6573 7054 7970  'newOrderRespTyp
-00031b20: 6527 5d20 3d20 2752 4553 554c 5427 2020  e'] = 'RESULT'  
-00031b30: 2320 2241 434b 222c 2022 5245 5355 4c54  # "ACK", "RESULT
-00031b40: 222c 2064 6566 6175 6c74 2022 4143 4b22  ", default "ACK"
-00031b50: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-00031b60: 6574 5b27 6f70 7469 6f6e 275d 3a0a 2020  et['option']:.  
-00031b70: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
-00031b80: 6520 3d3d 2027 6d61 726b 6574 273a 0a20  e == 'market':. 
-00031b90: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00031ba0: 6169 7365 2049 6e76 616c 6964 4f72 6465  aise InvalidOrde
-00031bb0: 7228 7365 6c66 2e69 6420 2b20 2720 2720  r(self.id + ' ' 
-00031bc0: 2b20 7479 7065 202b 2027 2069 7320 6e6f  + type + ' is no
-00031bd0: 7420 6120 7661 6c69 6420 6f72 6465 7220  t a valid order 
-00031be0: 7479 7065 2066 6f72 2074 6865 2027 202b  type for the ' +
-00031bf0: 2073 796d 626f 6c20 2b20 2720 6d61 726b   symbol + ' mark
-00031c00: 6574 2729 0a20 2020 2020 2020 2020 2020  et').           
-00031c10: 206d 6574 686f 6420 3d20 2765 6170 6950   method = 'eapiP
-00031c20: 7269 7661 7465 506f 7374 4f72 6465 7227  rivatePostOrder'
-00031c30: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00031c40: 2020 2020 2020 2020 2020 2076 616c 6964             valid
-00031c50: 4f72 6465 7254 7970 6573 203d 2073 656c  OrderTypes = sel
-00031c60: 662e 7361 6665 5f76 616c 7565 286d 6172  f.safe_value(mar
-00031c70: 6b65 745b 2769 6e66 6f27 5d2c 2027 6f72  ket['info'], 'or
-00031c80: 6465 7254 7970 6573 2729 0a20 2020 2020  derTypes').     
-00031c90: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-00031ca0: 6c66 2e69 6e5f 6172 7261 7928 7570 7065  lf.in_array(uppe
-00031cb0: 7263 6173 6554 7970 652c 2076 616c 6964  rcaseType, valid
-00031cc0: 4f72 6465 7254 7970 6573 293a 0a20 2020  OrderTypes):.   
-00031cd0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00031ce0: 696e 6974 6961 6c55 7070 6572 6361 7365  initialUppercase
-00031cf0: 5479 7065 2021 3d20 7570 7065 7263 6173  Type != uppercas
-00031d00: 6554 7970 653a 0a20 2020 2020 2020 2020  eType:.         
-00031d10: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00031d20: 2049 6e76 616c 6964 4f72 6465 7228 7365   InvalidOrder(se
-00031d30: 6c66 2e69 6420 2b20 2720 7374 6f70 5072  lf.id + ' stopPr
-00031d40: 6963 6520 7061 7261 6d65 7465 7220 6973  ice parameter is
-00031d50: 206e 6f74 2061 6c6c 6f77 6564 2066 6f72   not allowed for
-00031d60: 2027 202b 2073 796d 626f 6c20 2b20 2720   ' + symbol + ' 
-00031d70: 2720 2b20 7479 7065 202b 2027 206f 7264  ' + type + ' ord
-00031d80: 6572 7327 290a 2020 2020 2020 2020 2020  ers').          
-00031d90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00031da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031db0: 7261 6973 6520 496e 7661 6c69 644f 7264  raise InvalidOrd
-00031dc0: 6572 2873 656c 662e 6964 202b 2027 2027  er(self.id + ' '
-00031dd0: 202b 2074 7970 6520 2b20 2720 6973 206e   + type + ' is n
-00031de0: 6f74 2061 2076 616c 6964 206f 7264 6572  ot a valid order
-00031df0: 2074 7970 6520 666f 7220 7468 6520 2720   type for the ' 
-00031e00: 2b20 7379 6d62 6f6c 202b 2027 206d 6172  + symbol + ' mar
-00031e10: 6b65 7427 290a 2020 2020 2020 2020 7265  ket').        re
-00031e20: 7175 6573 745b 2774 7970 6527 5d20 3d20  quest['type'] = 
-00031e30: 7570 7065 7263 6173 6554 7970 650a 2020  uppercaseType.  
-00031e40: 2020 2020 2020 2320 6164 6469 7469 6f6e        # addition
-00031e50: 616c 2072 6571 7569 7265 6420 6669 656c  al required fiel
-00031e60: 6473 2064 6570 656e 6469 6e67 206f 6e20  ds depending on 
-00031e70: 7468 6520 6f72 6465 7220 7479 7065 0a20  the order type. 
-00031e80: 2020 2020 2020 2074 696d 6549 6e46 6f72         timeInFor
-00031e90: 6365 4973 5265 7175 6972 6564 203d 2046  ceIsRequired = F
-00031ea0: 616c 7365 0a20 2020 2020 2020 2070 7269  alse.        pri
-00031eb0: 6365 4973 5265 7175 6972 6564 203d 2046  ceIsRequired = F
-00031ec0: 616c 7365 0a20 2020 2020 2020 2073 746f  alse.        sto
-00031ed0: 7050 7269 6365 4973 5265 7175 6972 6564  pPriceIsRequired
-00031ee0: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
-00031ef0: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
-00031f00: 7265 6420 3d20 4661 6c73 650a 2020 2020  red = False.    
-00031f10: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00031f20: 7370 6f74 2f6d 6172 6769 6e0a 2020 2020  spot/margin.    
-00031f30: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00031f40: 2020 2020 4c49 4d49 5420 2020 2020 2020      LIMIT       
-00031f50: 2020 2020 2020 2020 2074 696d 6549 6e46           timeInF
-00031f60: 6f72 6365 2c20 7175 616e 7469 7479 2c20  orce, quantity, 
-00031f70: 7072 6963 650a 2020 2020 2020 2020 2320  price.        # 
-00031f80: 2020 2020 4d41 524b 4554 2020 2020 2020      MARKET      
-00031f90: 2020 2020 2020 2020 2071 7561 6e74 6974           quantit
-00031fa0: 7920 6f72 2071 756f 7465 4f72 6465 7251  y or quoteOrderQ
-00031fb0: 7479 0a20 2020 2020 2020 2023 2020 2020  ty.        #    
-00031fc0: 2053 544f 505f 4c4f 5353 2020 2020 2020   STOP_LOSS      
-00031fd0: 2020 2020 2020 7175 616e 7469 7479 2c20        quantity, 
-00031fe0: 7374 6f70 5072 6963 650a 2020 2020 2020  stopPrice.      
-00031ff0: 2020 2320 2020 2020 5354 4f50 5f4c 4f53    #     STOP_LOS
-00032000: 535f 4c49 4d49 5420 2020 2020 2074 696d  S_LIMIT      tim
-00032010: 6549 6e46 6f72 6365 2c20 7175 616e 7469  eInForce, quanti
-00032020: 7479 2c20 7072 6963 652c 2073 746f 7050  ty, price, stopP
-00032030: 7269 6365 0a20 2020 2020 2020 2023 2020  rice.        #  
-00032040: 2020 2054 414b 455f 5052 4f46 4954 2020     TAKE_PROFIT  
-00032050: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
-00032060: 2c20 7374 6f70 5072 6963 650a 2020 2020  , stopPrice.    
-00032070: 2020 2020 2320 2020 2020 5441 4b45 5f50      #     TAKE_P
-00032080: 524f 4649 545f 4c49 4d49 5420 2020 2074  ROFIT_LIMIT    t
-00032090: 696d 6549 6e46 6f72 6365 2c20 7175 616e  imeInForce, quan
-000320a0: 7469 7479 2c20 7072 6963 652c 2073 746f  tity, price, sto
-000320b0: 7050 7269 6365 0a20 2020 2020 2020 2023  pPrice.        #
-000320c0: 2020 2020 204c 494d 4954 5f4d 414b 4552       LIMIT_MAKER
-000320d0: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
-000320e0: 7479 2c20 7072 6963 650a 2020 2020 2020  ty, price.      
-000320f0: 2020 230a 2020 2020 2020 2020 2320 6675    #.        # fu
-00032100: 7475 7265 730a 2020 2020 2020 2020 230a  tures.        #.
-00032110: 2020 2020 2020 2020 2320 2020 2020 4c49          #     LI
-00032120: 4d49 5420 2020 2020 2020 2020 2020 2020  MIT             
-00032130: 2020 2074 696d 6549 6e46 6f72 6365 2c20     timeInForce, 
-00032140: 7175 616e 7469 7479 2c20 7072 6963 650a  quantity, price.
-00032150: 2020 2020 2020 2020 2320 2020 2020 4d41          #     MA
-00032160: 524b 4554 2020 2020 2020 2020 2020 2020  RKET            
-00032170: 2020 2071 7561 6e74 6974 790a 2020 2020     quantity.    
-00032180: 2020 2020 2320 2020 2020 5354 4f50 2f54      #     STOP/T
-00032190: 414b 455f 5052 4f46 4954 2020 2020 2071  AKE_PROFIT     q
-000321a0: 7561 6e74 6974 792c 2070 7269 6365 2c20  uantity, price, 
-000321b0: 7374 6f70 5072 6963 650a 2020 2020 2020  stopPrice.      
-000321c0: 2020 2320 2020 2020 5354 4f50 5f4d 4152    #     STOP_MAR
-000321d0: 4b45 5420 2020 2020 2020 2020 2073 746f  KET          sto
-000321e0: 7050 7269 6365 0a20 2020 2020 2020 2023  pPrice.        #
-000321f0: 2020 2020 2054 414b 455f 5052 4f46 4954       TAKE_PROFIT
-00032200: 5f4d 4152 4b45 5420 2020 7374 6f70 5072  _MARKET   stopPr
-00032210: 6963 650a 2020 2020 2020 2020 2320 2020  ice.        #   
-00032220: 2020 5452 4149 4c49 4e47 5f53 544f 505f    TRAILING_STOP_
-00032230: 4d41 524b 4554 2063 616c 6c62 6163 6b52  MARKET callbackR
-00032240: 6174 650a 2020 2020 2020 2020 230a 2020  ate.        #.  
-00032250: 2020 2020 2020 6966 2075 7070 6572 6361        if upperca
-00032260: 7365 5479 7065 203d 3d20 274d 4152 4b45  seType == 'MARKE
-00032270: 5427 3a0a 2020 2020 2020 2020 2020 2020  T':.            
-00032280: 6966 206d 6172 6b65 745b 2773 706f 7427  if market['spot'
-00032290: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-000322a0: 2020 2071 756f 7465 4f72 6465 7251 7479     quoteOrderQty
-000322b0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-000322c0: 7565 2873 656c 662e 6f70 7469 6f6e 732c  ue(self.options,
-000322d0: 2027 7175 6f74 654f 7264 6572 5174 7927   'quoteOrderQty'
-000322e0: 2c20 5472 7565 290a 2020 2020 2020 2020  , True).        
-000322f0: 2020 2020 2020 2020 6966 2071 756f 7465          if quote
-00032300: 4f72 6465 7251 7479 3a0a 2020 2020 2020  OrderQty:.      
-00032310: 2020 2020 2020 2020 2020 2020 2020 7175                qu
-00032320: 6f74 654f 7264 6572 5174 794e 6577 203d  oteOrderQtyNew =
-00032330: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00032340: 5f32 2871 7565 7279 2c20 2771 756f 7465  _2(query, 'quote
-00032350: 4f72 6465 7251 7479 272c 2027 636f 7374  OrderQty', 'cost
-00032360: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00032370: 2020 2020 2020 2070 7265 6369 7369 6f6e         precision
-00032380: 203d 206d 6172 6b65 745b 2770 7265 6369   = market['preci
-00032390: 7369 6f6e 275d 5b27 7072 6963 6527 5d0a  sion']['price'].
-000323a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000323b0: 2020 2020 6966 2071 756f 7465 4f72 6465      if quoteOrde
-000323c0: 7251 7479 4e65 7720 6973 206e 6f74 204e  rQtyNew is not N
-000323d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000323e0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-000323f0: 7565 7374 5b27 7175 6f74 654f 7264 6572  uest['quoteOrder
-00032400: 5174 7927 5d20 3d20 7365 6c66 2e64 6563  Qty'] = self.dec
-00032410: 696d 616c 5f74 6f5f 7072 6563 6973 696f  imal_to_precisio
-00032420: 6e28 7175 6f74 654f 7264 6572 5174 794e  n(quoteOrderQtyN
-00032430: 6577 2c20 5452 554e 4341 5445 2c20 7072  ew, TRUNCATE, pr
-00032440: 6563 6973 696f 6e2c 2073 656c 662e 7072  ecision, self.pr
-00032450: 6563 6973 696f 6e4d 6f64 6529 0a20 2020  ecisionMode).   
-00032460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032470: 2065 6c69 6620 7072 6963 6520 6973 206e   elif price is n
-00032480: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00032490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000324a0: 2061 6d6f 756e 7453 7472 696e 6720 3d20   amountString = 
-000324b0: 7365 6c66 2e6e 756d 6265 725f 746f 5f73  self.number_to_s
-000324c0: 7472 696e 6728 616d 6f75 6e74 290a 2020  tring(amount).  
-000324d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000324e0: 2020 2020 2020 7072 6963 6553 7472 696e        priceStrin
-000324f0: 6720 3d20 7365 6c66 2e6e 756d 6265 725f  g = self.number_
-00032500: 746f 5f73 7472 696e 6728 7072 6963 6529  to_string(price)
-00032510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032520: 2020 2020 2020 2020 2071 756f 7465 4f72           quoteOr
-00032530: 6465 7251 7561 6e74 6974 7920 3d20 5072  derQuantity = Pr
-00032540: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
-00032550: 2861 6d6f 756e 7453 7472 696e 672c 2070  (amountString, p
-00032560: 7269 6365 5374 7269 6e67 290a 2020 2020  riceString).    
-00032570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032580: 2020 2020 7265 7175 6573 745b 2771 756f      request['quo
-00032590: 7465 4f72 6465 7251 7479 275d 203d 2073  teOrderQty'] = s
-000325a0: 656c 662e 6465 6369 6d61 6c5f 746f 5f70  elf.decimal_to_p
-000325b0: 7265 6369 7369 6f6e 2871 756f 7465 4f72  recision(quoteOr
-000325c0: 6465 7251 7561 6e74 6974 792c 2054 5255  derQuantity, TRU
-000325d0: 4e43 4154 452c 2070 7265 6369 7369 6f6e  NCATE, precision
-000325e0: 2c20 7365 6c66 2e70 7265 6369 7369 6f6e  , self.precision
-000325f0: 4d6f 6465 290a 2020 2020 2020 2020 2020  Mode).          
-00032600: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00032610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032620: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
-00032630: 4973 5265 7175 6972 6564 203d 2054 7275  IsRequired = Tru
-00032640: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00032650: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00032660: 2020 2020 2020 2020 2020 2020 7175 616e              quan
-00032670: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
-00032680: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-00032690: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000326a0: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
-000326b0: 4973 5265 7175 6972 6564 203d 2054 7275  IsRequired = Tru
-000326c0: 650a 2020 2020 2020 2020 656c 6966 2075  e.        elif u
-000326d0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
-000326e0: 274c 494d 4954 273a 0a20 2020 2020 2020  'LIMIT':.       
-000326f0: 2020 2020 2070 7269 6365 4973 5265 7175       priceIsRequ
-00032700: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
-00032710: 2020 2020 2020 2020 7469 6d65 496e 466f          timeInFo
-00032720: 7263 6549 7352 6571 7569 7265 6420 3d20  rceIsRequired = 
-00032730: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-00032740: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
-00032750: 7265 6420 3d20 5472 7565 0a20 2020 2020  red = True.     
-00032760: 2020 2065 6c69 6620 2875 7070 6572 6361     elif (upperca
-00032770: 7365 5479 7065 203d 3d20 2753 544f 505f  seType == 'STOP_
-00032780: 4c4f 5353 2729 206f 7220 2875 7070 6572  LOSS') or (upper
-00032790: 6361 7365 5479 7065 203d 3d20 2754 414b  caseType == 'TAK
-000327a0: 455f 5052 4f46 4954 2729 3a0a 2020 2020  E_PROFIT'):.    
-000327b0: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
-000327c0: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
-000327d0: 7565 0a20 2020 2020 2020 2020 2020 2071  ue.            q
-000327e0: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
-000327f0: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
-00032800: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-00032810: 6c69 6e65 6172 275d 206f 7220 6d61 726b  linear'] or mark
-00032820: 6574 5b27 696e 7665 7273 6527 5d3a 0a20  et['inverse']:. 
-00032830: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00032840: 7269 6365 4973 5265 7175 6972 6564 203d  riceIsRequired =
-00032850: 2054 7275 650a 2020 2020 2020 2020 656c   True.        el
-00032860: 6966 2028 7570 7065 7263 6173 6554 7970  if (uppercaseTyp
-00032870: 6520 3d3d 2027 5354 4f50 5f4c 4f53 535f  e == 'STOP_LOSS_
-00032880: 4c49 4d49 5427 2920 6f72 2028 7570 7065  LIMIT') or (uppe
-00032890: 7263 6173 6554 7970 6520 3d3d 2027 5441  rcaseType == 'TA
-000328a0: 4b45 5f50 524f 4649 545f 4c49 4d49 5427  KE_PROFIT_LIMIT'
-000328b0: 293a 0a20 2020 2020 2020 2020 2020 2071  ):.            q
-000328c0: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
-000328d0: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
-000328e0: 2020 2020 2073 746f 7050 7269 6365 4973       stopPriceIs
-000328f0: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-00032900: 2020 2020 2020 2020 2020 2020 7072 6963              pric
-00032910: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
-00032920: 7565 0a20 2020 2020 2020 2020 2020 2074  ue.            t
-00032930: 696d 6549 6e46 6f72 6365 4973 5265 7175  imeInForceIsRequ
-00032940: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
-00032950: 2020 2020 656c 6966 2075 7070 6572 6361      elif upperca
-00032960: 7365 5479 7065 203d 3d20 274c 494d 4954  seType == 'LIMIT
-00032970: 5f4d 414b 4552 273a 0a20 2020 2020 2020  _MAKER':.       
-00032980: 2020 2020 2070 7269 6365 4973 5265 7175       priceIsRequ
-00032990: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
-000329a0: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
-000329b0: 4973 5265 7175 6972 6564 203d 2054 7275  IsRequired = Tru
-000329c0: 650a 2020 2020 2020 2020 656c 6966 2075  e.        elif u
-000329d0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
-000329e0: 2753 544f 5027 3a0a 2020 2020 2020 2020  'STOP':.        
-000329f0: 2020 2020 7175 616e 7469 7479 4973 5265      quantityIsRe
-00032a00: 7175 6972 6564 203d 2054 7275 650a 2020  quired = True.  
-00032a10: 2020 2020 2020 2020 2020 7374 6f70 5072            stopPr
-00032a20: 6963 6549 7352 6571 7569 7265 6420 3d20  iceIsRequired = 
-00032a30: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-00032a40: 2070 7269 6365 4973 5265 7175 6972 6564   priceIsRequired
-00032a50: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
-00032a60: 656c 6966 2028 7570 7065 7263 6173 6554  elif (uppercaseT
-00032a70: 7970 6520 3d3d 2027 5354 4f50 5f4d 4152  ype == 'STOP_MAR
-00032a80: 4b45 5427 2920 6f72 2028 7570 7065 7263  KET') or (upperc
-00032a90: 6173 6554 7970 6520 3d3d 2027 5441 4b45  aseType == 'TAKE
-00032aa0: 5f50 524f 4649 545f 4d41 524b 4554 2729  _PROFIT_MARKET')
-00032ab0: 3a0a 2020 2020 2020 2020 2020 2020 636c  :.            cl
-00032ac0: 6f73 6550 6f73 6974 696f 6e20 3d20 7365  osePosition = se
-00032ad0: 6c66 2e73 6166 655f 7661 6c75 6528 7175  lf.safe_value(qu
-00032ae0: 6572 792c 2027 636c 6f73 6550 6f73 6974  ery, 'closePosit
-00032af0: 696f 6e27 290a 2020 2020 2020 2020 2020  ion').          
-00032b00: 2020 6966 2063 6c6f 7365 506f 7369 7469    if closePositi
-00032b10: 6f6e 2069 7320 4e6f 6e65 3a0a 2020 2020  on is None:.    
-00032b20: 2020 2020 2020 2020 2020 2020 7175 616e              quan
-00032b30: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
-00032b40: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-00032b50: 2020 7374 6f70 5072 6963 6549 7352 6571    stopPriceIsReq
-00032b60: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
-00032b70: 2020 2020 2065 6c69 6620 7570 7065 7263       elif upperc
-00032b80: 6173 6554 7970 6520 3d3d 2027 5452 4149  aseType == 'TRAI
-00032b90: 4c49 4e47 5f53 544f 505f 4d41 524b 4554  LING_STOP_MARKET
-00032ba0: 273a 0a20 2020 2020 2020 2020 2020 2071  ':.            q
-00032bb0: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
-00032bc0: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
-00032bd0: 2020 2020 2063 616c 6c62 6163 6b52 6174       callbackRat
-00032be0: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
-00032bf0: 6d62 6572 2871 7565 7279 2c20 2763 616c  mber(query, 'cal
-00032c00: 6c62 6163 6b52 6174 6527 290a 2020 2020  lbackRate').    
-00032c10: 2020 2020 2020 2020 6966 2063 616c 6c62          if callb
-00032c20: 6163 6b52 6174 6520 6973 204e 6f6e 653a  ackRate is None:
-00032c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032c40: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
-00032c50: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
-00032c60: 6372 6561 7465 4f72 6465 7228 2920 7265  createOrder() re
-00032c70: 7175 6972 6573 2061 2063 616c 6c62 6163  quires a callbac
-00032c80: 6b52 6174 6520 6578 7472 6120 7061 7261  kRate extra para
-00032c90: 6d20 666f 7220 6120 2720 2b20 7479 7065  m for a ' + type
-00032ca0: 202b 2027 206f 7264 6572 2729 0a20 2020   + ' order').   
-00032cb0: 2020 2020 2069 6620 7175 616e 7469 7479       if quantity
-00032cc0: 4973 5265 7175 6972 6564 3a0a 2020 2020  IsRequired:.    
-00032cd0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00032ce0: 2771 7561 6e74 6974 7927 5d20 3d20 7365  'quantity'] = se
-00032cf0: 6c66 2e61 6d6f 756e 745f 746f 5f70 7265  lf.amount_to_pre
-00032d00: 6369 7369 6f6e 2873 796d 626f 6c2c 2061  cision(symbol, a
-00032d10: 6d6f 756e 7429 0a20 2020 2020 2020 2069  mount).        i
-00032d20: 6620 7072 6963 6549 7352 6571 7569 7265  f priceIsRequire
-00032d30: 643a 0a20 2020 2020 2020 2020 2020 2069  d:.            i
-00032d40: 6620 7072 6963 6520 6973 204e 6f6e 653a  f price is None:
-00032d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032d60: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
-00032d70: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
-00032d80: 6372 6561 7465 4f72 6465 7228 2920 7265  createOrder() re
-00032d90: 7175 6972 6573 2061 2070 7269 6365 2061  quires a price a
-00032da0: 7267 756d 656e 7420 666f 7220 6120 2720  rgument for a ' 
-00032db0: 2b20 7479 7065 202b 2027 206f 7264 6572  + type + ' order
-00032dc0: 2729 0a20 2020 2020 2020 2020 2020 2072  ').            r
-00032dd0: 6571 7565 7374 5b27 7072 6963 6527 5d20  equest['price'] 
-00032de0: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
-00032df0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-00032e00: 2c20 7072 6963 6529 0a20 2020 2020 2020  , price).       
-00032e10: 2069 6620 7469 6d65 496e 466f 7263 6549   if timeInForceI
-00032e20: 7352 6571 7569 7265 643a 0a20 2020 2020  sRequired:.     
-00032e30: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00032e40: 7469 6d65 496e 466f 7263 6527 5d20 3d20  timeInForce'] = 
-00032e50: 7365 6c66 2e6f 7074 696f 6e73 5b27 6465  self.options['de
-00032e60: 6661 756c 7454 696d 6549 6e46 6f72 6365  faultTimeInForce
-00032e70: 275d 2020 2320 2747 5443 2720 3d20 476f  ']  # 'GTC' = Go
-00032e80: 6f64 2054 6f20 4361 6e63 656c 2864 6566  od To Cancel(def
-00032e90: 6175 6c74 292c 2027 494f 4327 203d 2049  ault), 'IOC' = I
-00032ea0: 6d6d 6564 6961 7465 204f 7220 4361 6e63  mmediate Or Canc
-00032eb0: 656c 0a20 2020 2020 2020 2069 6620 6d61  el.        if ma
-00032ec0: 726b 6574 5b27 636f 6e74 7261 6374 275d  rket['contract']
-00032ed0: 2061 6e64 2070 6f73 744f 6e6c 793a 0a20   and postOnly:. 
-00032ee0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00032ef0: 7374 5b27 7469 6d65 496e 466f 7263 6527  st['timeInForce'
-00032f00: 5d20 3d20 2747 5458 270a 2020 2020 2020  ] = 'GTX'.      
-00032f10: 2020 6966 2073 746f 7050 7269 6365 4973    if stopPriceIs
-00032f20: 5265 7175 6972 6564 3a0a 2020 2020 2020  Required:.      
-00032f30: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-00032f40: 2763 6f6e 7472 6163 7427 5d3a 0a20 2020  'contract']:.   
-00032f50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00032f60: 7374 6f70 5072 6963 6520 6973 204e 6f6e  stopPrice is Non
-00032f70: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00032f80: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
-00032f90: 616c 6964 4f72 6465 7228 7365 6c66 2e69  alidOrder(self.i
-00032fa0: 6420 2b20 2720 6372 6561 7465 4f72 6465  d + ' createOrde
-00032fb0: 7228 2920 7265 7175 6972 6573 2061 2073  r() requires a s
-00032fc0: 746f 7050 7269 6365 2065 7874 7261 2070  topPrice extra p
-00032fd0: 6172 616d 2066 6f72 2061 2027 202b 2074  aram for a ' + t
-00032fe0: 7970 6520 2b20 2720 6f72 6465 7227 290a  ype + ' order').
-00032ff0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00033000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00033010: 2020 2320 6368 6563 6b20 666f 7220 6465    # check for de
-00033020: 6c74 6120 7072 6963 650a 2020 2020 2020  lta price.      
-00033030: 2020 2020 2020 2020 2020 7472 6169 6c69            traili
-00033040: 6e67 4465 6c74 6120 3d20 7365 6c66 2e73  ngDelta = self.s
-00033050: 6166 655f 7661 6c75 6528 7061 7261 6d73  afe_value(params
-00033060: 2c20 2774 7261 696c 696e 6744 656c 7461  , 'trailingDelta
-00033070: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00033080: 2020 2069 6620 7472 6169 6c69 6e67 4465     if trailingDe
-00033090: 6c74 6120 6973 204e 6f6e 6520 616e 6420  lta is None and 
-000330a0: 7374 6f70 5072 6963 6520 6973 204e 6f6e  stopPrice is Non
-000330b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000330c0: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
-000330d0: 616c 6964 4f72 6465 7228 7365 6c66 2e69  alidOrder(self.i
-000330e0: 6420 2b20 2720 6372 6561 7465 4f72 6465  d + ' createOrde
-000330f0: 7228 2920 7265 7175 6972 6573 2061 2073  r() requires a s
-00033100: 746f 7050 7269 6365 206f 7220 7472 6169  topPrice or trai
-00033110: 6c69 6e67 4465 6c74 6120 7061 7261 6d20  lingDelta param 
-00033120: 666f 7220 6120 2720 2b20 7479 7065 202b  for a ' + type +
-00033130: 2027 206f 7264 6572 2729 0a20 2020 2020   ' order').     
-00033140: 2020 2020 2020 2069 6620 7374 6f70 5072         if stopPr
-00033150: 6963 6520 6973 206e 6f74 204e 6f6e 653a  ice is not None:
-00033160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00033170: 2072 6571 7565 7374 5b27 7374 6f70 5072   request['stopPr
-00033180: 6963 6527 5d20 3d20 7365 6c66 2e70 7269  ice'] = self.pri
-00033190: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
-000331a0: 7379 6d62 6f6c 2c20 7374 6f70 5072 6963  symbol, stopPric
-000331b0: 6529 0a20 2020 2020 2020 2023 2072 656d  e).        # rem
-000331c0: 6f76 6520 7469 6d65 496e 466f 7263 6520  ove timeInForce 
-000331d0: 6672 6f6d 2070 6172 616d 7320 6265 6361  from params beca
-000331e0: 7573 6520 504f 2069 7320 6f6e 6c79 2075  use PO is only u
-000331f0: 7365 6420 6279 2073 656c 662e 6973 5f70  sed by self.is_p
-00033200: 6f73 745f 6f6e 6c79 616e 6420 6974 2773  ost_onlyand it's
-00033210: 206e 6f74 2061 2076 616c 6964 2076 616c   not a valid val
-00033220: 7565 2066 6f72 2042 696e 616e 6365 0a20  ue for Binance. 
-00033230: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
-00033240: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
-00033250: 732c 2027 7469 6d65 496e 466f 7263 6527  s, 'timeInForce'
-00033260: 2920 3d3d 2027 504f 273a 0a20 2020 2020  ) == 'PO':.     
-00033270: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-00033280: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-00033290: 2c20 5b27 7469 6d65 496e 466f 7263 6527  , ['timeInForce'
-000332a0: 5d29 0a20 2020 2020 2020 2072 6571 7565  ]).        reque
-000332b0: 7374 5061 7261 6d73 203d 2073 656c 662e  stParams = self.
-000332c0: 6f6d 6974 2870 6172 616d 732c 205b 2771  omit(params, ['q
-000332d0: 756f 7465 4f72 6465 7251 7479 272c 2027  uoteOrderQty', '
-000332e0: 636f 7374 272c 2027 7374 6f70 5072 6963  cost', 'stopPric
-000332f0: 6527 2c20 2774 6573 7427 2c20 2774 7970  e', 'test', 'typ
-00033300: 6527 2c20 276e 6577 436c 6965 6e74 4f72  e', 'newClientOr
-00033310: 6465 7249 6427 2c20 2763 6c69 656e 744f  derId', 'clientO
-00033320: 7264 6572 4964 272c 2027 706f 7374 4f6e  rderId', 'postOn
-00033330: 6c79 275d 290a 2020 2020 2020 2020 7265  ly']).        re
-00033340: 7370 6f6e 7365 203d 2061 7761 6974 2067  sponse = await g
-00033350: 6574 6174 7472 2873 656c 662c 206d 6574  etattr(self, met
-00033360: 686f 6429 2873 656c 662e 6578 7465 6e64  hod)(self.extend
-00033370: 2872 6571 7565 7374 2c20 7265 7175 6573  (request, reques
-00033380: 7450 6172 616d 7329 290a 2020 2020 2020  tParams)).      
-00033390: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-000333a0: 7273 655f 6f72 6465 7228 7265 7370 6f6e  rse_order(respon
-000333b0: 7365 2c20 6d61 726b 6574 290a 0a20 2020  se, market)..   
-000333c0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-000333d0: 5f6f 7264 6572 2873 656c 662c 2069 643a  _order(self, id:
-000333e0: 2073 7472 2c20 7379 6d62 6f6c 3a20 4f70   str, symbol: Op
-000333f0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-00033400: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00033410: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00033420: 2020 2020 6665 7463 6865 7320 696e 666f      fetches info
-00033430: 726d 6174 696f 6e20 6f6e 2061 6e20 6f72  rmation on an or
-00033440: 6465 7220 6d61 6465 2062 7920 7468 6520  der made by the 
-00033450: 7573 6572 0a20 2020 2020 2020 203a 7061  user.        :pa
-00033460: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
-00033470: 756e 6966 6965 6420 7379 6d62 6f6c 206f  unified symbol o
-00033480: 6620 7468 6520 6d61 726b 6574 2074 6865  f the market the
-00033490: 206f 7264 6572 2077 6173 206d 6164 6520   order was made 
-000334a0: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-000334b0: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-000334c0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-000334d0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-000334e0: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
-000334f0: 6f69 6e74 0a20 2020 2020 2020 203a 7061  oint.        :pa
-00033500: 7261 6d20 7374 727c 4e6f 6e65 2070 6172  ram str|None par
-00033510: 616d 735b 276d 6172 6769 6e4d 6f64 6527  ams['marginMode'
-00033520: 5d3a 2027 6372 6f73 7327 206f 7220 2769  ]: 'cross' or 'i
-00033530: 736f 6c61 7465 6427 2c20 666f 7220 7370  solated', for sp
-00033540: 6f74 206d 6172 6769 6e20 7472 6164 696e  ot margin tradin
-00033550: 670a 2020 2020 2020 2020 3a72 6574 7572  g.        :retur
-00033560: 6e73 2064 6963 743a 2041 6e20 606f 7264  ns dict: An `ord
-00033570: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
-00033580: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00033590: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
-000335a0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-000335b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000335c0: 7365 6c66 2e63 6865 636b 5f72 6571 7569  self.check_requi
-000335d0: 7265 645f 7379 6d62 6f6c 2827 6665 7463  red_symbol('fetc
-000335e0: 684f 7264 6572 272c 2073 796d 626f 6c29  hOrder', symbol)
-000335f0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00033600: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00033610: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-00033620: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-00033630: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-00033640: 6465 6661 756c 7454 7970 6520 3d20 7365  defaultType = se
-00033650: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
-00033660: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
-00033670: 6665 7463 684f 7264 6572 272c 2027 6465  fetchOrder', 'de
-00033680: 6661 756c 7454 7970 6527 2c20 2773 706f  faultType', 'spo
-00033690: 7427 290a 2020 2020 2020 2020 7479 7065  t').        type
-000336a0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-000336b0: 696e 6728 7061 7261 6d73 2c20 2774 7970  ing(params, 'typ
-000336c0: 6527 2c20 6465 6661 756c 7454 7970 6529  e', defaultType)
-000336d0: 0a20 2020 2020 2020 206d 6172 6769 6e4d  .        marginM
-000336e0: 6f64 652c 2071 7565 7279 203d 2073 656c  ode, query = sel
-000336f0: 662e 6861 6e64 6c65 5f6d 6172 6769 6e5f  f.handle_margin_
-00033700: 6d6f 6465 5f61 6e64 5f70 6172 616d 7328  mode_and_params(
-00033710: 2766 6574 6368 4f72 6465 7227 2c20 7061  'fetchOrder', pa
-00033720: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
-00033730: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-00033740: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-00033750: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
-00033760: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00033770: 6d65 7468 6f64 203d 2027 7072 6976 6174  method = 'privat
-00033780: 6547 6574 4f72 6465 7227 0a20 2020 2020  eGetOrder'.     
-00033790: 2020 2069 6620 6d61 726b 6574 5b27 6f70     if market['op
-000337a0: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
-000337b0: 2020 2020 6d65 7468 6f64 203d 2027 6561      method = 'ea
-000337c0: 7069 5072 6976 6174 6547 6574 4f72 6465  piPrivateGetOrde
-000337d0: 7227 0a20 2020 2020 2020 2065 6c69 6620  r'.        elif 
-000337e0: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-000337f0: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-00033800: 7468 6f64 203d 2027 6661 7069 5072 6976  thod = 'fapiPriv
-00033810: 6174 6547 6574 4f72 6465 7227 0a20 2020  ateGetOrder'.   
-00033820: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
-00033830: 5b27 696e 7665 7273 6527 5d3a 0a20 2020  ['inverse']:.   
-00033840: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-00033850: 3d20 2764 6170 6950 7269 7661 7465 4765  = 'dapiPrivateGe
-00033860: 744f 7264 6572 270a 2020 2020 2020 2020  tOrder'.        
-00033870: 656c 6966 2074 7970 6520 3d3d 2027 6d61  elif type == 'ma
-00033880: 7267 696e 2720 6f72 206d 6172 6769 6e4d  rgin' or marginM
-00033890: 6f64 6520 6973 206e 6f74 204e 6f6e 653a  ode is not None:
-000338a0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-000338b0: 686f 6420 3d20 2773 6170 6947 6574 4d61  hod = 'sapiGetMa
-000338c0: 7267 696e 4f72 6465 7227 0a20 2020 2020  rginOrder'.     
-000338d0: 2020 2020 2020 2069 6620 6d61 7267 696e         if margin
-000338e0: 4d6f 6465 203d 3d20 2769 736f 6c61 7465  Mode == 'isolate
-000338f0: 6427 3a0a 2020 2020 2020 2020 2020 2020  d':.            
-00033900: 2020 2020 7265 7175 6573 745b 2769 7349      request['isI
-00033910: 736f 6c61 7465 6427 5d20 3d20 5472 7565  solated'] = True
-00033920: 0a20 2020 2020 2020 2063 6c69 656e 744f  .        clientO
-00033930: 7264 6572 4964 203d 2073 656c 662e 7361  rderId = self.sa
-00033940: 6665 5f76 616c 7565 5f32 2870 6172 616d  fe_value_2(param
-00033950: 732c 2027 6f72 6967 436c 6965 6e74 4f72  s, 'origClientOr
-00033960: 6465 7249 6427 2c20 2763 6c69 656e 744f  derId', 'clientO
-00033970: 7264 6572 4964 2729 0a20 2020 2020 2020  rderId').       
-00033980: 2069 6620 636c 6965 6e74 4f72 6465 7249   if clientOrderI
-00033990: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-000339a0: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
-000339b0: 726b 6574 5b27 6f70 7469 6f6e 275d 3a0a  rket['option']:.
-000339c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000339d0: 7265 7175 6573 745b 2763 6c69 656e 744f  request['clientO
-000339e0: 7264 6572 4964 275d 203d 2063 6c69 656e  rderId'] = clien
-000339f0: 744f 7264 6572 4964 0a20 2020 2020 2020  tOrderId.       
-00033a00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00033a10: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00033a20: 7374 5b27 6f72 6967 436c 6965 6e74 4f72  st['origClientOr
-00033a30: 6465 7249 6427 5d20 3d20 636c 6965 6e74  derId'] = client
-00033a40: 4f72 6465 7249 640a 2020 2020 2020 2020  OrderId.        
-00033a50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00033a60: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
-00033a70: 4964 275d 203d 2069 640a 2020 2020 2020  Id'] = id.      
-00033a80: 2020 7265 7175 6573 7450 6172 616d 7320    requestParams 
-00033a90: 3d20 7365 6c66 2e6f 6d69 7428 7175 6572  = self.omit(quer
-00033aa0: 792c 205b 2774 7970 6527 2c20 2763 6c69  y, ['type', 'cli
-00033ab0: 656e 744f 7264 6572 4964 272c 2027 6f72  entOrderId', 'or
-00033ac0: 6967 436c 6965 6e74 4f72 6465 7249 6427  igClientOrderId'
-00033ad0: 5d29 0a20 2020 2020 2020 2072 6573 706f  ]).        respo
-00033ae0: 6e73 6520 3d20 6177 6169 7420 6765 7461  nse = await geta
-00033af0: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
-00033b00: 2928 7365 6c66 2e65 7874 656e 6428 7265  )(self.extend(re
-00033b10: 7175 6573 742c 2072 6571 7565 7374 5061  quest, requestPa
-00033b20: 7261 6d73 2929 0a20 2020 2020 2020 2072  rams)).        r
-00033b30: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-00033b40: 5f6f 7264 6572 2872 6573 706f 6e73 652c  _order(response,
-00033b50: 206d 6172 6b65 7429 0a0a 2020 2020 6173   market)..    as
-00033b60: 796e 6320 6465 6620 6665 7463 685f 6f72  ync def fetch_or
-00033b70: 6465 7273 2873 656c 662c 2073 796d 626f  ders(self, symbo
-00033b80: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00033b90: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-00033ba0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-00033bb0: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-00033bc0: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-00033bd0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00033be0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00033bf0: 2020 2066 6574 6368 6573 2069 6e66 6f72     fetches infor
-00033c00: 6d61 7469 6f6e 206f 6e20 6d75 6c74 6970  mation on multip
-00033c10: 6c65 206f 7264 6572 7320 6d61 6465 2062  le orders made b
-00033c20: 7920 7468 6520 7573 6572 0a20 2020 2020  y the user.     
-00033c30: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
-00033c40: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-00033c50: 726b 6574 2073 796d 626f 6c20 6f66 2074  rket symbol of t
-00033c60: 6865 206d 6172 6b65 7420 6f72 6465 7273  he market orders
-00033c70: 2077 6572 6520 6d61 6465 2069 6e0a 2020   were made in.  
-00033c80: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-00033c90: 7c4e 6f6e 6520 7369 6e63 653a 2074 6865  |None since: the
-00033ca0: 2065 6172 6c69 6573 7420 7469 6d65 2069   earliest time i
-00033cb0: 6e20 6d73 2074 6f20 6665 7463 6820 6f72  n ms to fetch or
-00033cc0: 6465 7273 2066 6f72 0a20 2020 2020 2020  ders for.       
-00033cd0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-00033ce0: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
-00033cf0: 6d75 6d20 6e75 6d62 6572 206f 6620 6f72  mum number of or
-00033d00: 6465 7220 7374 7275 6374 7572 6573 2074  der structures t
-00033d10: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
-00033d20: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00033d30: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-00033d40: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00033d50: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-00033d60: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00033d70: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
-00033d80: 4e6f 6e65 2070 6172 616d 735b 276d 6172  None params['mar
-00033d90: 6769 6e4d 6f64 6527 5d3a 2027 6372 6f73  ginMode']: 'cros
-00033da0: 7327 206f 7220 2769 736f 6c61 7465 6427  s' or 'isolated'
-00033db0: 2c20 666f 7220 7370 6f74 206d 6172 6769  , for spot margi
-00033dc0: 6e20 7472 6164 696e 670a 2020 2020 2020  n trading.      
-00033dd0: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
-00033de0: 5d3a 2061 206c 6973 7420 6f66 2060 6f72  ]: a list of `or
-00033df0: 6465 7220 7374 7275 6374 7572 6573 203c  der structures <
-00033e00: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00033e10: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
-00033e20: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
-00033e30: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00033e40: 2020 7365 6c66 2e63 6865 636b 5f72 6571    self.check_req
-00033e50: 7569 7265 645f 7379 6d62 6f6c 2827 6665  uired_symbol('fe
-00033e60: 7463 684f 7264 6572 7327 2c20 7379 6d62  tchOrders', symb
-00033e70: 6f6c 290a 2020 2020 2020 2020 6177 6169  ol).        awai
-00033e80: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-00033e90: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-00033ea0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00033eb0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00033ec0: 2020 2064 6566 6175 6c74 5479 7065 203d     defaultType =
-00033ed0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00033ee0: 675f 3228 7365 6c66 2e6f 7074 696f 6e73  g_2(self.options
-00033ef0: 2c20 2766 6574 6368 4f72 6465 7273 272c  , 'fetchOrders',
-00033f00: 2027 6465 6661 756c 7454 7970 6527 2c20   'defaultType', 
-00033f10: 2773 706f 7427 290a 2020 2020 2020 2020  'spot').        
-00033f20: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
-00033f30: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
-00033f40: 2774 7970 6527 2c20 6465 6661 756c 7454  'type', defaultT
-00033f50: 7970 6529 0a20 2020 2020 2020 206d 6172  ype).        mar
-00033f60: 6769 6e4d 6f64 652c 2071 7565 7279 203d  ginMode, query =
-00033f70: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
-00033f80: 6769 6e5f 6d6f 6465 5f61 6e64 5f70 6172  gin_mode_and_par
-00033f90: 616d 7328 2766 6574 6368 4f72 6465 7273  ams('fetchOrders
-00033fa0: 272c 2070 6172 616d 7329 0a20 2020 2020  ', params).     
-00033fb0: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00033fc0: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00033fd0: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00033fe0: 5d2c 0a20 2020 2020 2020 207d 0a20 2020  ],.        }.   
-00033ff0: 2020 2020 206d 6574 686f 6420 3d20 2770       method = 'p
-00034000: 7269 7661 7465 4765 7441 6c6c 4f72 6465  rivateGetAllOrde
-00034010: 7273 270a 2020 2020 2020 2020 6966 206d  rs'.        if m
-00034020: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
-00034030: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00034040: 686f 6420 3d20 2765 6170 6950 7269 7661  hod = 'eapiPriva
-00034050: 7465 4765 7448 6973 746f 7279 4f72 6465  teGetHistoryOrde
-00034060: 7273 270a 2020 2020 2020 2020 656c 6966  rs'.        elif
-00034070: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
-00034080: 5d3a 0a20 2020 2020 2020 2020 2020 206d  ]:.            m
-00034090: 6574 686f 6420 3d20 2766 6170 6950 7269  ethod = 'fapiPri
-000340a0: 7661 7465 4765 7441 6c6c 4f72 6465 7273  vateGetAllOrders
-000340b0: 270a 2020 2020 2020 2020 656c 6966 206d  '.        elif m
-000340c0: 6172 6b65 745b 2769 6e76 6572 7365 275d  arket['inverse']
-000340d0: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-000340e0: 7468 6f64 203d 2027 6461 7069 5072 6976  thod = 'dapiPriv
-000340f0: 6174 6547 6574 416c 6c4f 7264 6572 7327  ateGetAllOrders'
-00034100: 0a20 2020 2020 2020 2065 6c69 6620 7479  .        elif ty
-00034110: 7065 203d 3d20 276d 6172 6769 6e27 206f  pe == 'margin' o
-00034120: 7220 6d61 7267 696e 4d6f 6465 2069 7320  r marginMode is 
-00034130: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00034140: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-00034150: 7361 7069 4765 744d 6172 6769 6e41 6c6c  sapiGetMarginAll
-00034160: 4f72 6465 7273 270a 2020 2020 2020 2020  Orders'.        
-00034170: 2020 2020 6966 206d 6172 6769 6e4d 6f64      if marginMod
-00034180: 6520 3d3d 2027 6973 6f6c 6174 6564 273a  e == 'isolated':
-00034190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000341a0: 2072 6571 7565 7374 5b27 6973 4973 6f6c   request['isIsol
-000341b0: 6174 6564 275d 203d 2054 7275 650a 2020  ated'] = True.  
-000341c0: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-000341d0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000341e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-000341f0: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-00034200: 696e 6365 0a20 2020 2020 2020 2069 6620  ince.        if 
-00034210: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
-00034220: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00034230: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
-00034240: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
-00034250: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-00034260: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
-00034270: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
-00034280: 6e64 2872 6571 7565 7374 2c20 7175 6572  nd(request, quer
-00034290: 7929 290a 2020 2020 2020 2020 230a 2020  y)).        #.  
-000342a0: 2020 2020 2020 2320 2073 706f 740a 2020        #  spot.  
-000342b0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000342c0: 2320 2020 2020 5b0a 2020 2020 2020 2020  #     [.        
-000342d0: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
-000342e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000342f0: 2020 2273 796d 626f 6c22 3a20 224c 5443    "symbol": "LTC
-00034300: 4254 4322 2c0a 2020 2020 2020 2020 2320  BTC",.        # 
-00034310: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00034320: 6572 4964 223a 2031 2c0a 2020 2020 2020  erId": 1,.      
-00034330: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00034340: 2263 6c69 656e 744f 7264 6572 4964 223a  "clientOrderId":
-00034350: 2022 6d79 4f72 6465 7231 222c 0a20 2020   "myOrder1",.   
-00034360: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00034370: 2020 2022 7072 6963 6522 3a20 2230 2e31     "price": "0.1
-00034380: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00034390: 2020 2020 2020 2020 2022 6f72 6967 5174           "origQt
-000343a0: 7922 3a20 2231 2e30 222c 0a20 2020 2020  y": "1.0",.     
-000343b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000343c0: 2022 6578 6563 7574 6564 5174 7922 3a20   "executedQty": 
-000343d0: 2230 2e30 222c 0a20 2020 2020 2020 2023  "0.0",.        #
-000343e0: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
-000343f0: 6d6d 756c 6174 6976 6551 756f 7465 5174  mmulativeQuoteQt
-00034400: 7922 3a20 2230 2e30 222c 0a20 2020 2020  y": "0.0",.     
-00034410: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00034420: 2022 7374 6174 7573 223a 2022 4e45 5722   "status": "NEW"
-00034430: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034440: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
-00034450: 6f72 6365 223a 2022 4754 4322 2c0a 2020  orce": "GTC",.  
-00034460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034470: 2020 2020 2274 7970 6522 3a20 224c 494d      "type": "LIM
-00034480: 4954 222c 0a20 2020 2020 2020 2023 2020  IT",.        #  
-00034490: 2020 2020 2020 2020 2020 2022 7369 6465             "side
-000344a0: 223a 2022 4255 5922 2c0a 2020 2020 2020  ": "BUY",.      
-000344b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000344c0: 2273 746f 7050 7269 6365 223a 2022 302e  "stopPrice": "0.
-000344d0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000344e0: 2020 2020 2020 2020 2020 2269 6365 6265            "icebe
-000344f0: 7267 5174 7922 3a20 2230 2e30 222c 0a20  rgQty": "0.0",. 
-00034500: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034510: 2020 2020 2022 7469 6d65 223a 2031 3439       "time": 149
-00034520: 3938 3237 3331 3935 3539 2c0a 2020 2020  9827319559,.    
-00034530: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034540: 2020 2275 7064 6174 6554 696d 6522 3a20    "updateTime": 
-00034550: 3134 3939 3832 3733 3139 3535 392c 0a20  1499827319559,. 
-00034560: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034570: 2020 2020 2022 6973 576f 726b 696e 6722       "isWorking"
-00034580: 3a20 5472 7565 0a20 2020 2020 2020 2023  : True.        #
-00034590: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-000345a0: 2020 2023 2020 2020 205d 0a20 2020 2020     #     ].     
-000345b0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-000345c0: 6675 7475 7265 730a 2020 2020 2020 2020  futures.        
-000345d0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-000345e0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-000345f0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00034600: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
-00034610: 626f 6c22 3a20 2242 5443 5553 4454 222c  bol": "BTCUSDT",
-00034620: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00034630: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-00034640: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
-00034650: 2020 2020 2020 2020 2020 2022 636c 6965             "clie
-00034660: 6e74 4f72 6465 7249 6422 3a20 226d 794f  ntOrderId": "myO
-00034670: 7264 6572 3122 2c0a 2020 2020 2020 2020  rder1",.        
-00034680: 2320 2020 2020 2020 2020 2020 2020 2270  #             "p
-00034690: 7269 6365 223a 2022 302e 3122 2c0a 2020  rice": "0.1",.  
-000346a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000346b0: 2020 2020 226f 7269 6751 7479 223a 2022      "origQty": "
-000346c0: 312e 3022 2c0a 2020 2020 2020 2020 2320  1.0",.        # 
-000346d0: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
-000346e0: 6375 7465 6451 7479 223a 2022 312e 3022  cutedQty": "1.0"
-000346f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034700: 2020 2020 2020 2020 2263 756d 5175 6f74          "cumQuot
-00034710: 6522 3a20 2231 302e 3022 2c0a 2020 2020  e": "10.0",.    
-00034720: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034730: 2020 2273 7461 7475 7322 3a20 224e 4557    "status": "NEW
-00034740: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00034750: 2020 2020 2020 2020 2022 7469 6d65 496e           "timeIn
-00034760: 466f 7263 6522 3a20 2247 5443 222c 0a20  Force": "GTC",. 
-00034770: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034780: 2020 2020 2022 7479 7065 223a 2022 4c49       "type": "LI
-00034790: 4d49 5422 2c0a 2020 2020 2020 2020 2320  MIT",.        # 
-000347a0: 2020 2020 2020 2020 2020 2020 2273 6964              "sid
-000347b0: 6522 3a20 2242 5559 222c 0a20 2020 2020  e": "BUY",.     
-000347c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000347d0: 2022 7374 6f70 5072 6963 6522 3a20 2230   "stopPrice": "0
-000347e0: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
-000347f0: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
-00034800: 7465 5469 6d65 223a 2031 3439 3938 3237  teTime": 1499827
-00034810: 3331 3935 3539 0a20 2020 2020 2020 2023  319559.        #
-00034820: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00034830: 2020 2023 2020 2020 205d 0a20 2020 2020     #     ].     
-00034840: 2020 2023 0a20 2020 2020 2020 2023 206f     #.        # o
-00034850: 7074 696f 6e73 0a20 2020 2020 2020 2023  ptions.        #
-00034860: 0a20 2020 2020 2020 2023 2020 2020 205b  .        #     [
-00034870: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00034880: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00034890: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-000348a0: 7249 6422 3a20 3437 3238 3833 3330 3835  rId": 4728833085
-000348b0: 3433 3639 3737 3135 322c 0a20 2020 2020  436977152,.     
-000348c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000348d0: 2022 7379 6d62 6f6c 223a 2022 4554 482d   "symbol": "ETH-
-000348e0: 3233 3032 3131 2d31 3530 302d 4322 2c0a  230211-1500-C",.
-000348f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034900: 2020 2020 2020 2270 7269 6365 223a 2022        "price": "
-00034910: 3130 2e30 222c 0a20 2020 2020 2020 2023  10.0",.        #
-00034920: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
-00034930: 616e 7469 7479 223a 2022 312e 3030 222c  antity": "1.00",
-00034940: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00034950: 2020 2020 2020 2022 6578 6563 7574 6564         "executed
-00034960: 5174 7922 3a20 2230 2e30 3022 2c0a 2020  Qty": "0.00",.  
-00034970: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034980: 2020 2020 2266 6565 223a 2022 3022 2c0a      "fee": "0",.
-00034990: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000349a0: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
-000349b0: 5559 222c 0a20 2020 2020 2020 2023 2020  UY",.        #  
-000349c0: 2020 2020 2020 2020 2020 2022 7479 7065             "type
-000349d0: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
-000349e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000349f0: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
-00034a00: 2022 4754 4322 2c0a 2020 2020 2020 2020   "GTC",.        
-00034a10: 2320 2020 2020 2020 2020 2020 2020 2272  #             "r
-00034a20: 6564 7563 654f 6e6c 7922 3a20 4661 6c73  educeOnly": Fals
-00034a30: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00034a40: 2020 2020 2020 2020 2022 706f 7374 4f6e           "postOn
-00034a50: 6c79 223a 2046 616c 7365 2c0a 2020 2020  ly": False,.    
-00034a60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034a70: 2020 2263 7265 6174 6554 696d 6522 3a20    "createTime": 
-00034a80: 3136 3736 3038 3330 3334 3436 322c 0a20  1676083034462,. 
-00034a90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034aa0: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-00034ab0: 223a 2031 3637 3630 3833 3033 3434 3632  ": 1676083034462
-00034ac0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034ad0: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
-00034ae0: 3a20 2241 4343 4550 5445 4422 2c0a 2020  : "ACCEPTED",.  
-00034af0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034b00: 2020 2020 2261 7667 5072 6963 6522 3a20      "avgPrice": 
-00034b10: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-00034b20: 2020 2020 2020 2020 2020 2022 736f 7572             "sour
-00034b30: 6365 223a 2022 4150 4922 2c0a 2020 2020  ce": "API",.    
-00034b40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034b50: 2020 2263 6c69 656e 744f 7264 6572 4964    "clientOrderId
-00034b60: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00034b70: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-00034b80: 6963 6553 6361 6c65 223a 2031 2c0a 2020  iceScale": 1,.  
-00034b90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034ba0: 2020 2020 2271 7561 6e74 6974 7953 6361      "quantitySca
-00034bb0: 6c65 223a 2032 2c0a 2020 2020 2020 2020  le": 2,.        
-00034bc0: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
-00034bd0: 7074 696f 6e53 6964 6522 3a20 2243 414c  ptionSide": "CAL
-00034be0: 4c22 2c0a 2020 2020 2020 2020 2320 2020  L",.        #   
-00034bf0: 2020 2020 2020 2020 2020 2271 756f 7465            "quote
-00034c00: 4173 7365 7422 3a20 2255 5344 5422 2c0a  Asset": "USDT",.
-00034c10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034c20: 2020 2020 2020 226c 6173 7454 7261 6465        "lastTrade
-00034c30: 223a 207b 2269 6422 3a22 3639 222c 2274  ": {"id":"69","t
-00034c40: 696d 6522 3a22 3136 3736 3038 3434 3330  ime":"1676084430
-00034c50: 3536 3722 2c22 7072 6963 6522 3a22 3234  567","price":"24
-00034c60: 2e39 222c 2271 7479 223a 2231 2e30 3022  .9","qty":"1.00"
-00034c70: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-00034c80: 2020 2020 2020 2020 2022 6d6d 7022 3a20           "mmp": 
-00034c90: 4661 6c73 650a 2020 2020 2020 2020 2320  False.        # 
-00034ca0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00034cb0: 2020 2320 2020 2020 5d0a 2020 2020 2020    #     ].      
-00034cc0: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
-00034cd0: 726e 2073 656c 662e 7061 7273 655f 6f72  rn self.parse_or
-00034ce0: 6465 7273 2872 6573 706f 6e73 652c 206d  ders(response, m
-00034cf0: 6172 6b65 742c 2073 696e 6365 2c20 6c69  arket, since, li
-00034d00: 6d69 7429 0a0a 2020 2020 6173 796e 6320  mit)..    async 
-00034d10: 6465 6620 6665 7463 685f 6f70 656e 5f6f  def fetch_open_o
-00034d20: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
-00034d30: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00034d40: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-00034d50: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00034d60: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-00034d70: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00034d80: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00034d90: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00034da0: 2020 2020 6665 7463 6820 616c 6c20 756e      fetch all un
-00034db0: 6669 6c6c 6564 2063 7572 7265 6e74 6c79  filled currently
-00034dc0: 206f 7065 6e20 6f72 6465 7273 0a20 2020   open orders.   
-00034dd0: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
-00034de0: 4e6f 6e65 2073 796d 626f 6c3a 2075 6e69  None symbol: uni
-00034df0: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
-00034e00: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
-00034e10: 6d20 696e 747c 4e6f 6e65 2073 696e 6365  m int|None since
-00034e20: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
-00034e30: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
-00034e40: 6368 206f 7065 6e20 6f72 6465 7273 2066  ch open orders f
-00034e50: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
-00034e60: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-00034e70: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
-00034e80: 6d62 6572 206f 6620 6f70 656e 206f 7264  mber of open ord
-00034e90: 6572 7320 7374 7275 6374 7572 6573 2074  ers structures t
-00034ea0: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
-00034eb0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00034ec0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-00034ed0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00034ee0: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-00034ef0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00034f00: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
-00034f10: 4e6f 6e65 2070 6172 616d 735b 276d 6172  None params['mar
-00034f20: 6769 6e4d 6f64 6527 5d3a 2027 6372 6f73  ginMode']: 'cros
-00034f30: 7327 206f 7220 2769 736f 6c61 7465 6427  s' or 'isolated'
-00034f40: 2c20 666f 7220 7370 6f74 206d 6172 6769  , for spot margi
-00034f50: 6e20 7472 6164 696e 670a 2020 2020 2020  n trading.      
-00034f60: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
-00034f70: 5d3a 2061 206c 6973 7420 6f66 2060 6f72  ]: a list of `or
-00034f80: 6465 7220 7374 7275 6374 7572 6573 203c  der structures <
-00034f90: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00034fa0: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
-00034fb0: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
-00034fc0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00034fd0: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
-00034fe0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-00034ff0: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
-00035000: 650a 2020 2020 2020 2020 7479 7065 203d  e.        type =
-00035010: 204e 6f6e 650a 2020 2020 2020 2020 7265   None.        re
-00035020: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
-00035030: 2020 206d 6172 6769 6e4d 6f64 6520 3d20     marginMode = 
-00035040: 4e6f 6e65 0a20 2020 2020 2020 2071 7565  None.        que
-00035050: 7279 203d 204e 6f6e 650a 2020 2020 2020  ry = None.      
-00035060: 2020 6d61 7267 696e 4d6f 6465 2c20 7175    marginMode, qu
-00035070: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
-00035080: 655f 6d61 7267 696e 5f6d 6f64 655f 616e  e_margin_mode_an
-00035090: 645f 7061 7261 6d73 2827 6665 7463 684f  d_params('fetchO
-000350a0: 7065 6e4f 7264 6572 7327 2c20 7061 7261  penOrders', para
-000350b0: 6d73 290a 2020 2020 2020 2020 6966 2073  ms).        if s
-000350c0: 796d 626f 6c20 6973 206e 6f74 204e 6f6e  ymbol is not Non
-000350d0: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-000350e0: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-000350f0: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-00035100: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00035110: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
-00035120: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-00035130: 2020 2020 2064 6566 6175 6c74 5479 7065       defaultType
-00035140: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00035150: 696e 675f 3228 7365 6c66 2e6f 7074 696f  ing_2(self.optio
-00035160: 6e73 2c20 2766 6574 6368 4f70 656e 4f72  ns, 'fetchOpenOr
-00035170: 6465 7273 272c 2027 6465 6661 756c 7454  ders', 'defaultT
-00035180: 7970 6527 2c20 2773 706f 7427 290a 2020  ype', 'spot').  
-00035190: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-000351a0: 5479 7065 203d 206d 6172 6b65 745b 2774  Type = market['t
-000351b0: 7970 6527 5d20 6966 2028 2774 7970 6527  ype'] if ('type'
-000351c0: 2069 6e20 6d61 726b 6574 2920 656c 7365   in market) else
-000351d0: 2064 6566 6175 6c74 5479 7065 0a20 2020   defaultType.   
-000351e0: 2020 2020 2020 2020 2074 7970 6520 3d20           type = 
-000351f0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00035200: 2871 7565 7279 2c20 2774 7970 6527 2c20  (query, 'type', 
-00035210: 6d61 726b 6574 5479 7065 290a 2020 2020  marketType).    
-00035220: 2020 2020 656c 6966 2073 656c 662e 6f70      elif self.op
-00035230: 7469 6f6e 735b 2777 6172 6e4f 6e46 6574  tions['warnOnFet
-00035240: 6368 4f70 656e 4f72 6465 7273 5769 7468  chOpenOrdersWith
-00035250: 6f75 7453 796d 626f 6c27 5d3a 0a20 2020  outSymbol']:.   
-00035260: 2020 2020 2020 2020 2073 796d 626f 6c73           symbols
-00035270: 203d 2073 656c 662e 7379 6d62 6f6c 730a   = self.symbols.
-00035280: 2020 2020 2020 2020 2020 2020 6e75 6d53              numS
-00035290: 796d 626f 6c73 203d 206c 656e 2873 796d  ymbols = len(sym
-000352a0: 626f 6c73 290a 2020 2020 2020 2020 2020  bols).          
-000352b0: 2020 6665 7463 684f 7065 6e4f 7264 6572    fetchOpenOrder
-000352c0: 7352 6174 654c 696d 6974 203d 2073 656c  sRateLimit = sel
-000352d0: 662e 7061 7273 655f 746f 5f69 6e74 286e  f.parse_to_int(n
-000352e0: 756d 5379 6d62 6f6c 7320 2f20 3229 0a20  umSymbols / 2). 
-000352f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00035300: 2045 7863 6861 6e67 6545 7272 6f72 2873   ExchangeError(s
-00035310: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
-00035320: 4f70 656e 4f72 6465 7273 2829 2057 4152  OpenOrders() WAR
-00035330: 4e49 4e47 3a20 6665 7463 6869 6e67 206f  NING: fetching o
-00035340: 7065 6e20 6f72 6465 7273 2077 6974 686f  pen orders witho
-00035350: 7574 2073 7065 6369 6679 696e 6720 6120  ut specifying a 
-00035360: 7379 6d62 6f6c 2069 7320 7261 7465 2d6c  symbol is rate-l
-00035370: 696d 6974 6564 2074 6f20 6f6e 6520 6361  imited to one ca
-00035380: 6c6c 2070 6572 2027 202b 2073 7472 2866  ll per ' + str(f
-00035390: 6574 6368 4f70 656e 4f72 6465 7273 5261  etchOpenOrdersRa
-000353a0: 7465 4c69 6d69 7429 202b 2027 2073 6563  teLimit) + ' sec
-000353b0: 6f6e 6473 2e20 446f 206e 6f74 2063 616c  onds. Do not cal
-000353c0: 6c20 7365 6c66 206d 6574 686f 6420 6672  l self method fr
-000353d0: 6571 7565 6e74 6c79 2074 6f20 6176 6f69  equently to avoi
-000353e0: 6420 6261 6e2e 2053 6574 2027 202b 2073  d ban. Set ' + s
-000353f0: 656c 662e 6964 202b 2027 2e6f 7074 696f  elf.id + '.optio
-00035400: 6e73 5b22 7761 726e 4f6e 4665 7463 684f  ns["warnOnFetchO
-00035410: 7065 6e4f 7264 6572 7357 6974 686f 7574  penOrdersWithout
-00035420: 5379 6d62 6f6c 225d 203d 2046 616c 7365  Symbol"] = False
-00035430: 2074 6f20 7375 7070 7265 7373 2073 656c   to suppress sel
-00035440: 6620 7761 726e 696e 6720 6d65 7373 6167  f warning messag
-00035450: 652e 2729 0a20 2020 2020 2020 2065 6c73  e.').        els
-00035460: 653a 0a20 2020 2020 2020 2020 2020 2064  e:.            d
-00035470: 6566 6175 6c74 5479 7065 203d 2073 656c  efaultType = sel
-00035480: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
-00035490: 7365 6c66 2e6f 7074 696f 6e73 2c20 2766  self.options, 'f
-000354a0: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
-000354b0: 2027 6465 6661 756c 7454 7970 6527 2c20   'defaultType', 
-000354c0: 2773 706f 7427 290a 2020 2020 2020 2020  'spot').        
-000354d0: 2020 2020 7479 7065 203d 2073 656c 662e      type = self.
-000354e0: 7361 6665 5f73 7472 696e 6728 7175 6572  safe_string(quer
-000354f0: 792c 2027 7479 7065 272c 2064 6566 6175  y, 'type', defau
-00035500: 6c74 5479 7065 290a 2020 2020 2020 2020  ltType).        
-00035510: 7375 6254 7970 6520 3d20 4e6f 6e65 0a20  subType = None. 
-00035520: 2020 2020 2020 2073 7562 5479 7065 2c20         subType, 
-00035530: 7175 6572 7920 3d20 7365 6c66 2e68 616e  query = self.han
-00035540: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-00035550: 5f70 6172 616d 7328 2766 6574 6368 4f70  _params('fetchOp
-00035560: 656e 4f72 6465 7273 272c 206d 6172 6b65  enOrders', marke
-00035570: 742c 2071 7565 7279 290a 2020 2020 2020  t, query).      
-00035580: 2020 7265 7175 6573 7450 6172 616d 7320    requestParams 
-00035590: 3d20 7365 6c66 2e6f 6d69 7428 7175 6572  = self.omit(quer
-000355a0: 792c 2027 7479 7065 2729 0a20 2020 2020  y, 'type').     
-000355b0: 2020 206d 6574 686f 6420 3d20 2770 7269     method = 'pri
-000355c0: 7661 7465 4765 744f 7065 6e4f 7264 6572  vateGetOpenOrder
-000355d0: 7327 0a20 2020 2020 2020 2069 6620 7479  s'.        if ty
-000355e0: 7065 203d 3d20 276f 7074 696f 6e27 3a0a  pe == 'option':.
-000355f0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-00035600: 6f64 203d 2027 6561 7069 5072 6976 6174  od = 'eapiPrivat
-00035610: 6547 6574 4f70 656e 4f72 6465 7273 270a  eGetOpenOrders'.
-00035620: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00035630: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
-00035640: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00035650: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-00035660: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-00035670: 2020 2020 2020 2020 2020 2069 6620 6c69             if li
-00035680: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
-00035690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000356a0: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
-000356b0: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
-000356c0: 2020 656c 6966 2073 656c 662e 6973 5f6c    elif self.is_l
-000356d0: 696e 6561 7228 7479 7065 2c20 7375 6254  inear(type, subT
-000356e0: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
-000356f0: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
-00035700: 5072 6976 6174 6547 6574 4f70 656e 4f72  PrivateGetOpenOr
-00035710: 6465 7273 270a 2020 2020 2020 2020 656c  ders'.        el
-00035720: 6966 2073 656c 662e 6973 5f69 6e76 6572  if self.is_inver
-00035730: 7365 2874 7970 652c 2073 7562 5479 7065  se(type, subType
-00035740: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
-00035750: 6574 686f 6420 3d20 2764 6170 6950 7269  ethod = 'dapiPri
-00035760: 7661 7465 4765 744f 7065 6e4f 7264 6572  vateGetOpenOrder
-00035770: 7327 0a20 2020 2020 2020 2065 6c69 6620  s'.        elif 
-00035780: 7479 7065 203d 3d20 276d 6172 6769 6e27  type == 'margin'
-00035790: 206f 7220 6d61 7267 696e 4d6f 6465 2069   or marginMode i
-000357a0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000357b0: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-000357c0: 2027 7361 7069 4765 744d 6172 6769 6e4f   'sapiGetMarginO
-000357d0: 7065 6e4f 7264 6572 7327 0a20 2020 2020  penOrders'.     
-000357e0: 2020 2020 2020 2069 6620 6d61 7267 696e         if margin
-000357f0: 4d6f 6465 203d 3d20 2769 736f 6c61 7465  Mode == 'isolate
-00035800: 6427 3a0a 2020 2020 2020 2020 2020 2020  d':.            
-00035810: 2020 2020 7265 7175 6573 745b 2769 7349      request['isI
-00035820: 736f 6c61 7465 6427 5d20 3d20 5472 7565  solated'] = True
-00035830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00035840: 2069 6620 7379 6d62 6f6c 2069 7320 4e6f   if symbol is No
-00035850: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00035860: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
-00035870: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
-00035880: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
-00035890: 684f 7065 6e4f 7264 6572 7328 2920 7265  hOpenOrders() re
-000358a0: 7175 6972 6573 2061 2073 796d 626f 6c20  quires a symbol 
-000358b0: 6172 6775 6d65 6e74 2066 6f72 2069 736f  argument for iso
-000358c0: 6c61 7465 6420 6d61 726b 6574 7327 290a  lated markets').
-000358d0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-000358e0: 203d 2061 7761 6974 2067 6574 6174 7472   = await getattr
-000358f0: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
-00035900: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-00035910: 7374 2c20 7265 7175 6573 7450 6172 616d  st, requestParam
-00035920: 7329 290a 2020 2020 2020 2020 7265 7475  s)).        retu
-00035930: 726e 2073 656c 662e 7061 7273 655f 6f72  rn self.parse_or
-00035940: 6465 7273 2872 6573 706f 6e73 652c 206d  ders(response, m
-00035950: 6172 6b65 742c 2073 696e 6365 2c20 6c69  arket, since, li
-00035960: 6d69 7429 0a0a 2020 2020 6173 796e 6320  mit)..    async 
-00035970: 6465 6620 6665 7463 685f 636c 6f73 6564  def fetch_closed
-00035980: 5f6f 7264 6572 7328 7365 6c66 2c20 7379  _orders(self, sy
-00035990: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
-000359a0: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
-000359b0: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
-000359c0: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
-000359d0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-000359e0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-000359f0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00035a00: 2020 2020 2020 6665 7463 6865 7320 696e        fetches in
-00035a10: 666f 726d 6174 696f 6e20 6f6e 206d 756c  formation on mul
-00035a20: 7469 706c 6520 636c 6f73 6564 206f 7264  tiple closed ord
-00035a30: 6572 7320 6d61 6465 2062 7920 7468 6520  ers made by the 
-00035a40: 7573 6572 0a20 2020 2020 2020 203a 7061  user.        :pa
-00035a50: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
-00035a60: 756e 6966 6965 6420 6d61 726b 6574 2073  unified market s
-00035a70: 796d 626f 6c20 6f66 2074 6865 206d 6172  ymbol of the mar
-00035a80: 6b65 7420 6f72 6465 7273 2077 6572 6520  ket orders were 
-00035a90: 6d61 6465 2069 6e0a 2020 2020 2020 2020  made in.        
-00035aa0: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
-00035ab0: 7369 6e63 653a 2074 6865 2065 6172 6c69  since: the earli
-00035ac0: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
-00035ad0: 6f20 6665 7463 6820 6f72 6465 7273 2066  o fetch orders f
-00035ae0: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
-00035af0: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-00035b00: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
-00035b10: 6d62 6572 206f 6620 6f72 6465 7220 7374  mber of order st
-00035b20: 7275 6374 7572 6573 2074 6f20 7265 7472  ructures to retr
-00035b30: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
-00035b40: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-00035b50: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-00035b60: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-00035b70: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-00035b80: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-00035b90: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-00035ba0: 6120 6c69 7374 206f 6620 606f 7264 6572  a list of `order
-00035bb0: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
-00035bc0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-00035bd0: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
-00035be0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00035bf0: 2020 2022 2222 0a20 2020 2020 2020 206f     """.        o
-00035c00: 7264 6572 7320 3d20 6177 6169 7420 7365  rders = await se
-00035c10: 6c66 2e66 6574 6368 5f6f 7264 6572 7328  lf.fetch_orders(
-00035c20: 7379 6d62 6f6c 2c20 7369 6e63 652c 206c  symbol, since, l
-00035c30: 696d 6974 2c20 7061 7261 6d73 290a 2020  imit, params).  
-00035c40: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00035c50: 662e 6669 6c74 6572 5f62 7928 6f72 6465  f.filter_by(orde
-00035c60: 7273 2c20 2773 7461 7475 7327 2c20 2763  rs, 'status', 'c
-00035c70: 6c6f 7365 6427 290a 0a20 2020 2061 7379  losed')..    asy
-00035c80: 6e63 2064 6566 2066 6574 6368 5f63 616e  nc def fetch_can
-00035c90: 6365 6c65 645f 6f72 6465 7273 2873 656c  celed_orders(sel
-00035ca0: 662c 2073 796d 626f 6c3a 204f 7074 696f  f, symbol: Optio
-00035cb0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-00035cc0: 2073 696e 6365 3a20 4f70 7469 6f6e 616c   since: Optional
-00035cd0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 6c69  [int] = None, li
-00035ce0: 6d69 743a 204f 7074 696f 6e61 6c5b 696e  mit: Optional[in
-00035cf0: 745d 203d 204e 6f6e 652c 2070 6172 616d  t] = None, param
-00035d00: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00035d10: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-00035d20: 6573 2069 6e66 6f72 6d61 7469 6f6e 206f  es information o
-00035d30: 6e20 6d75 6c74 6970 6c65 2063 616e 6365  n multiple cance
-00035d40: 6c65 6420 6f72 6465 7273 206d 6164 6520  led orders made 
-00035d50: 6279 2074 6865 2075 7365 720a 2020 2020  by the user.    
-00035d60: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
-00035d70: 6269 6e61 6e63 652d 646f 6373 2e67 6974  binance-docs.git
-00035d80: 6875 622e 696f 2f61 7069 646f 6373 2f73  hub.io/apidocs/s
-00035d90: 706f 742f 656e 2f23 616c 6c2d 6f72 6465  pot/en/#all-orde
-00035da0: 7273 2d75 7365 725f 6461 7461 0a20 2020  rs-user_data.   
-00035db0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-00035dc0: 2f62 696e 616e 6365 2d64 6f63 732e 6769  /binance-docs.gi
-00035dd0: 7468 7562 2e69 6f2f 6170 6964 6f63 732f  thub.io/apidocs/
-00035de0: 7370 6f74 2f65 6e2f 2371 7565 7279 2d6d  spot/en/#query-m
-00035df0: 6172 6769 6e2d 6163 636f 756e 742d 3339  argin-account-39
-00035e00: 2d73 2d61 6c6c 2d6f 7264 6572 732d 7573  -s-all-orders-us
-00035e10: 6572 5f64 6174 610a 2020 2020 2020 2020  er_data.        
-00035e20: 7365 6520 6874 7470 733a 2f2f 6269 6e61  see https://bina
-00035e30: 6e63 652d 646f 6373 2e67 6974 6875 622e  nce-docs.github.
-00035e40: 696f 2f61 7069 646f 6373 2f76 6f70 7469  io/apidocs/vopti
-00035e50: 6f6e 732f 656e 2f23 7175 6572 792d 6f70  ons/en/#query-op
-00035e60: 7469 6f6e 2d6f 7264 6572 2d68 6973 746f  tion-order-histo
-00035e70: 7279 2d74 7261 6465 0a20 2020 2020 2020  ry-trade.       
-00035e80: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00035e90: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
-00035ea0: 6574 2073 796d 626f 6c20 6f66 2074 6865  et symbol of the
-00035eb0: 206d 6172 6b65 7420 7468 6520 6f72 6465   market the orde
-00035ec0: 7273 2077 6572 6520 6d61 6465 2069 6e0a  rs were made in.
-00035ed0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00035ee0: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
-00035ef0: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
-00035f00: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
-00035f10: 6f72 6465 7273 2066 6f72 0a20 2020 2020  orders for.     
-00035f20: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00035f30: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
-00035f40: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
-00035f50: 6f72 6465 7220 7374 7275 6374 7572 6573  order structures
-00035f60: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
-00035f70: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00035f80: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-00035f90: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-00035fa0: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
-00035fb0: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
-00035fc0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00035fd0: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
-00035fe0: 6620 606f 7264 6572 2073 7472 7563 7475  f `order structu
-00035ff0: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00036000: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00036010: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
-00036020: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-00036030: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
-00036040: 6b5f 7265 7175 6972 6564 5f73 796d 626f  k_required_symbo
-00036050: 6c28 2766 6574 6368 4361 6e63 656c 6564  l('fetchCanceled
-00036060: 4f72 6465 7273 272c 2073 796d 626f 6c29  Orders', symbol)
-00036070: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00036080: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00036090: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-000360a0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-000360b0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-000360c0: 6966 206d 6172 6b65 745b 2773 7761 7027  if market['swap'
-000360d0: 5d20 6f72 206d 6172 6b65 745b 2766 7574  ] or market['fut
-000360e0: 7572 6527 5d3a 0a20 2020 2020 2020 2020  ure']:.         
-000360f0: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-00036100: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-00036110: 2720 6665 7463 6843 616e 6365 6c65 644f  ' fetchCanceledO
-00036120: 7264 6572 7328 2920 7375 7070 6f72 7473  rders() supports
-00036130: 2073 706f 742c 206d 6172 6769 6e20 616e   spot, margin an
-00036140: 6420 6f70 7469 6f6e 206d 6172 6b65 7473  d option markets
-00036150: 206f 6e6c 7927 290a 2020 2020 2020 2020   only').        
-00036160: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
-00036170: 6974 2870 6172 616d 732c 2027 7479 7065  it(params, 'type
-00036180: 2729 0a20 2020 2020 2020 206f 7264 6572  ').        order
-00036190: 7320 3d20 6177 6169 7420 7365 6c66 2e66  s = await self.f
-000361a0: 6574 6368 5f6f 7264 6572 7328 7379 6d62  etch_orders(symb
-000361b0: 6f6c 2c20 7369 6e63 652c 204e 6f6e 652c  ol, since, None,
-000361c0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-000361d0: 2066 696c 7465 7265 644f 7264 6572 7320   filteredOrders 
-000361e0: 3d20 7365 6c66 2e66 696c 7465 725f 6279  = self.filter_by
-000361f0: 286f 7264 6572 732c 2027 7374 6174 7573  (orders, 'status
-00036200: 272c 2027 6361 6e63 656c 6564 2729 0a20  ', 'canceled'). 
-00036210: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00036220: 6c66 2e66 696c 7465 725f 6279 5f6c 696d  lf.filter_by_lim
-00036230: 6974 2866 696c 7465 7265 644f 7264 6572  it(filteredOrder
-00036240: 732c 206c 696d 6974 290a 0a20 2020 2061  s, limit)..    a
-00036250: 7379 6e63 2064 6566 2063 616e 6365 6c5f  sync def cancel_
-00036260: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
-00036270: 7374 722c 2073 796d 626f 6c3a 204f 7074  str, symbol: Opt
-00036280: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00036290: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-000362a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000362b0: 2020 2063 616e 6365 6c73 2061 6e20 6f70     cancels an op
-000362c0: 656e 206f 7264 6572 0a20 2020 2020 2020  en order.       
-000362d0: 203a 7061 7261 6d20 7374 7220 6964 3a20   :param str id: 
-000362e0: 6f72 6465 7220 6964 0a20 2020 2020 2020  order id.       
-000362f0: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00036300: 6f6c 3a20 756e 6966 6965 6420 7379 6d62  ol: unified symb
-00036310: 6f6c 206f 6620 7468 6520 6d61 726b 6574  ol of the market
-00036320: 2074 6865 206f 7264 6572 2077 6173 206d   the order was m
-00036330: 6164 6520 696e 0a20 2020 2020 2020 203a  ade in.        :
-00036340: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-00036350: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-00036360: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00036370: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
-00036380: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00036390: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-000363a0: 416e 2060 6f72 6465 7220 7374 7275 6374  An `order struct
-000363b0: 7572 6520 3c68 7474 7073 3a2f 2f64 6f63  ure <https://doc
-000363c0: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-000363d0: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
-000363e0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-000363f0: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
-00036400: 6b5f 7265 7175 6972 6564 5f73 796d 626f  k_required_symbo
-00036410: 6c28 2763 616e 6365 6c4f 7264 6572 272c  l('cancelOrder',
-00036420: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
-00036430: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-00036440: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00036450: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00036460: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00036470: 2020 2020 2020 2020 6465 6661 756c 7454          defaultT
-00036480: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
-00036490: 7374 7269 6e67 5f32 2873 656c 662e 6f70  string_2(self.op
-000364a0: 7469 6f6e 732c 2027 6361 6e63 656c 4f72  tions, 'cancelOr
-000364b0: 6465 7227 2c20 2764 6566 6175 6c74 5479  der', 'defaultTy
-000364c0: 7065 272c 2027 7370 6f74 2729 0a20 2020  pe', 'spot').   
-000364d0: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
-000364e0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-000364f0: 616d 732c 2027 7479 7065 272c 2064 6566  ams, 'type', def
-00036500: 6175 6c74 5479 7065 290a 2020 2020 2020  aultType).      
-00036510: 2020 6d61 7267 696e 4d6f 6465 2c20 7175    marginMode, qu
-00036520: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
-00036530: 655f 6d61 7267 696e 5f6d 6f64 655f 616e  e_margin_mode_an
-00036540: 645f 7061 7261 6d73 2827 6361 6e63 656c  d_params('cancel
-00036550: 4f72 6465 7227 2c20 7061 7261 6d73 290a  Order', params).
-00036560: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00036570: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00036580: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00036590: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-000365a0: 2020 2020 2320 276f 7264 6572 4964 273a      # 'orderId':
-000365b0: 2069 642c 0a20 2020 2020 2020 2020 2020   id,.           
-000365c0: 2023 2027 6f72 6967 436c 6965 6e74 4f72   # 'origClientOr
-000365d0: 6465 7249 6427 3a20 6964 2c0a 2020 2020  derId': id,.    
-000365e0: 2020 2020 7d0a 2020 2020 2020 2020 636c      }.        cl
-000365f0: 6965 6e74 4f72 6465 7249 6420 3d20 7365  ientOrderId = se
-00036600: 6c66 2e73 6166 655f 7661 6c75 655f 3228  lf.safe_value_2(
-00036610: 7061 7261 6d73 2c20 276f 7269 6743 6c69  params, 'origCli
-00036620: 656e 744f 7264 6572 4964 272c 2027 636c  entOrderId', 'cl
-00036630: 6965 6e74 4f72 6465 7249 6427 290a 2020  ientOrderId').  
-00036640: 2020 2020 2020 6966 2063 6c69 656e 744f        if clientO
-00036650: 7264 6572 4964 2069 7320 6e6f 7420 4e6f  rderId is not No
-00036660: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00036670: 6966 206d 6172 6b65 745b 276f 7074 696f  if market['optio
-00036680: 6e27 5d3a 0a20 2020 2020 2020 2020 2020  n']:.           
-00036690: 2020 2020 2072 6571 7565 7374 5b27 636c       request['cl
-000366a0: 6965 6e74 4f72 6465 7249 6427 5d20 3d20  ientOrderId'] = 
-000366b0: 636c 6965 6e74 4f72 6465 7249 640a 2020  clientOrderId.  
-000366c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000366d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000366e0: 7265 7175 6573 745b 276f 7269 6743 6c69  request['origCli
-000366f0: 656e 744f 7264 6572 4964 275d 203d 2063  entOrderId'] = c
-00036700: 6c69 656e 744f 7264 6572 4964 0a20 2020  lientOrderId.   
-00036710: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00036720: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00036730: 6f72 6465 7249 6427 5d20 3d20 6964 0a20  orderId'] = id. 
-00036740: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00036750: 2770 7269 7661 7465 4465 6c65 7465 4f72  'privateDeleteOr
-00036760: 6465 7227 0a20 2020 2020 2020 2069 6620  der'.        if 
-00036770: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
-00036780: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-00036790: 7468 6f64 203d 2027 6561 7069 5072 6976  thod = 'eapiPriv
-000367a0: 6174 6544 656c 6574 654f 7264 6572 270a  ateDeleteOrder'.
-000367b0: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
-000367c0: 6b65 745b 276c 696e 6561 7227 5d3a 0a20  ket['linear']:. 
-000367d0: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-000367e0: 6420 3d20 2766 6170 6950 7269 7661 7465  d = 'fapiPrivate
-000367f0: 4465 6c65 7465 4f72 6465 7227 0a20 2020  DeleteOrder'.   
-00036800: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
-00036810: 5b27 696e 7665 7273 6527 5d3a 0a20 2020  ['inverse']:.   
-00036820: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-00036830: 3d20 2764 6170 6950 7269 7661 7465 4465  = 'dapiPrivateDe
-00036840: 6c65 7465 4f72 6465 7227 0a20 2020 2020  leteOrder'.     
-00036850: 2020 2065 6c69 6620 7479 7065 203d 3d20     elif type == 
-00036860: 276d 6172 6769 6e27 206f 7220 6d61 7267  'margin' or marg
-00036870: 696e 4d6f 6465 2069 7320 6e6f 7420 4e6f  inMode is not No
-00036880: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00036890: 6d65 7468 6f64 203d 2027 7361 7069 4465  method = 'sapiDe
-000368a0: 6c65 7465 4d61 7267 696e 4f72 6465 7227  leteMarginOrder'
-000368b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000368c0: 6d61 7267 696e 4d6f 6465 203d 3d20 2769  marginMode == 'i
-000368d0: 736f 6c61 7465 6427 3a0a 2020 2020 2020  solated':.      
-000368e0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-000368f0: 745b 2769 7349 736f 6c61 7465 6427 5d20  t['isIsolated'] 
-00036900: 3d20 5472 7565 0a20 2020 2020 2020 2072  = True.        r
-00036910: 6571 7565 7374 5061 7261 6d73 203d 2073  equestParams = s
-00036920: 656c 662e 6f6d 6974 2871 7565 7279 2c20  elf.omit(query, 
-00036930: 5b27 7479 7065 272c 2027 6f72 6967 436c  ['type', 'origCl
-00036940: 6965 6e74 4f72 6465 7249 6427 2c20 2763  ientOrderId', 'c
-00036950: 6c69 656e 744f 7264 6572 4964 275d 290a  lientOrderId']).
-00036960: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00036970: 203d 2061 7761 6974 2067 6574 6174 7472   = await getattr
-00036980: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
-00036990: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-000369a0: 7374 2c20 7265 7175 6573 7450 6172 616d  st, requestParam
-000369b0: 7329 290a 2020 2020 2020 2020 7265 7475  s)).        retu
-000369c0: 726e 2073 656c 662e 7061 7273 655f 6f72  rn self.parse_or
-000369d0: 6465 7228 7265 7370 6f6e 7365 2c20 6d61  der(response, ma
-000369e0: 726b 6574 290a 0a20 2020 2061 7379 6e63  rket)..    async
-000369f0: 2064 6566 2063 616e 6365 6c5f 616c 6c5f   def cancel_all_
-00036a00: 6f72 6465 7273 2873 656c 662c 2073 796d  orders(self, sym
-00036a10: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-00036a20: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
-00036a30: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00036a40: 2222 0a20 2020 2020 2020 2063 616e 6365  "".        cance
-00036a50: 6c20 616c 6c20 6f70 656e 206f 7264 6572  l all open order
-00036a60: 7320 696e 2061 206d 6172 6b65 740a 2020  s in a market.  
-00036a70: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00036a80: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
-00036a90: 206d 6172 6b65 7420 7379 6d62 6f6c 206f   market symbol o
-00036aa0: 6620 7468 6520 6d61 726b 6574 2074 6f20  f the market to 
-00036ab0: 6361 6e63 656c 206f 7264 6572 7320 696e  cancel orders in
-00036ac0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00036ad0: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
-00036ae0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-00036af0: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
-00036b00: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
-00036b10: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-00036b20: 6d20 7374 727c 4e6f 6e65 2070 6172 616d  m str|None param
-00036b30: 735b 276d 6172 6769 6e4d 6f64 6527 5d3a  s['marginMode']:
-00036b40: 2027 6372 6f73 7327 206f 7220 2769 736f   'cross' or 'iso
-00036b50: 6c61 7465 6427 2c20 666f 7220 7370 6f74  lated', for spot
-00036b60: 206d 6172 6769 6e20 7472 6164 696e 670a   margin trading.
-00036b70: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-00036b80: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
-00036b90: 6f66 2060 6f72 6465 7220 7374 7275 6374  of `order struct
-00036ba0: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
-00036bb0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-00036bc0: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
-00036bd0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-00036be0: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-00036bf0: 636b 5f72 6571 7569 7265 645f 7379 6d62  ck_required_symb
-00036c00: 6f6c 2827 6361 6e63 656c 416c 6c4f 7264  ol('cancelAllOrd
-00036c10: 6572 7327 2c20 7379 6d62 6f6c 290a 2020  ers', symbol).  
-00036c20: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-00036c30: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00036c40: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00036c50: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00036c60: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
-00036c70: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-00036c80: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
-00036c90: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-00036ca0: 2020 2020 207d 0a20 2020 2020 2020 2074       }.        t
-00036cb0: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
-00036cc0: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-00036cd0: 7479 7065 272c 206d 6172 6b65 745b 2774  type', market['t
-00036ce0: 7970 6527 5d29 0a20 2020 2020 2020 2070  ype']).        p
-00036cf0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-00036d00: 7428 7061 7261 6d73 2c20 5b27 7479 7065  t(params, ['type
-00036d10: 275d 290a 2020 2020 2020 2020 6d61 7267  ']).        marg
-00036d20: 696e 4d6f 6465 2c20 7175 6572 7920 3d20  inMode, query = 
-00036d30: 7365 6c66 2e68 616e 646c 655f 6d61 7267  self.handle_marg
-00036d40: 696e 5f6d 6f64 655f 616e 645f 7061 7261  in_mode_and_para
-00036d50: 6d73 2827 6361 6e63 656c 416c 6c4f 7264  ms('cancelAllOrd
-00036d60: 6572 7327 2c20 7061 7261 6d73 290a 2020  ers', params).  
-00036d70: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-00036d80: 7072 6976 6174 6544 656c 6574 654f 7065  privateDeleteOpe
-00036d90: 6e4f 7264 6572 7327 0a20 2020 2020 2020  nOrders'.       
-00036da0: 2069 6620 6d61 726b 6574 5b27 6f70 7469   if market['opti
-00036db0: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
-00036dc0: 2020 6d65 7468 6f64 203d 2027 6561 7069    method = 'eapi
-00036dd0: 5072 6976 6174 6544 656c 6574 6541 6c6c  PrivateDeleteAll
-00036de0: 4f70 656e 4f72 6465 7273 270a 2020 2020  OpenOrders'.    
-00036df0: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-00036e00: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
-00036e10: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00036e20: 2766 6170 6950 7269 7661 7465 4465 6c65  'fapiPrivateDele
-00036e30: 7465 416c 6c4f 7065 6e4f 7264 6572 7327  teAllOpenOrders'
-00036e40: 0a20 2020 2020 2020 2065 6c69 6620 6d61  .        elif ma
-00036e50: 726b 6574 5b27 696e 7665 7273 6527 5d3a  rket['inverse']:
-00036e60: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00036e70: 686f 6420 3d20 2764 6170 6950 7269 7661  hod = 'dapiPriva
-00036e80: 7465 4465 6c65 7465 416c 6c4f 7065 6e4f  teDeleteAllOpenO
-00036e90: 7264 6572 7327 0a20 2020 2020 2020 2065  rders'.        e
-00036ea0: 6c69 6620 2874 7970 6520 3d3d 2027 6d61  lif (type == 'ma
-00036eb0: 7267 696e 2729 206f 7220 286d 6172 6769  rgin') or (margi
-00036ec0: 6e4d 6f64 6520 6973 206e 6f74 204e 6f6e  nMode is not Non
-00036ed0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00036ee0: 6d65 7468 6f64 203d 2027 7361 7069 4465  method = 'sapiDe
-00036ef0: 6c65 7465 4d61 7267 696e 4f70 656e 4f72  leteMarginOpenOr
-00036f00: 6465 7273 270a 2020 2020 2020 2020 2020  ders'.          
-00036f10: 2020 6966 206d 6172 6769 6e4d 6f64 6520    if marginMode 
-00036f20: 3d3d 2027 6973 6f6c 6174 6564 273a 0a20  == 'isolated':. 
-00036f30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00036f40: 6571 7565 7374 5b27 6973 4973 6f6c 6174  equest['isIsolat
-00036f50: 6564 275d 203d 2054 7275 650a 2020 2020  ed'] = True.    
-00036f60: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-00036f70: 7761 6974 2067 6574 6174 7472 2873 656c  wait getattr(sel
-00036f80: 662c 206d 6574 686f 6429 2873 656c 662e  f, method)(self.
-00036f90: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00036fa0: 7175 6572 7929 290a 2020 2020 2020 2020  query)).        
-00036fb0: 6966 2069 7369 6e73 7461 6e63 6528 7265  if isinstance(re
-00036fc0: 7370 6f6e 7365 2c20 6c69 7374 293a 0a20  sponse, list):. 
-00036fd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00036fe0: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
-00036ff0: 6572 7328 7265 7370 6f6e 7365 2c20 6d61  ers(response, ma
-00037000: 726b 6574 290a 2020 2020 2020 2020 656c  rket).        el
-00037010: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00037020: 7265 7475 726e 2072 6573 706f 6e73 650a  return response.
-00037030: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-00037040: 6574 6368 5f6f 7264 6572 5f74 7261 6465  etch_order_trade
-00037050: 7328 7365 6c66 2c20 6964 3a20 7374 722c  s(self, id: str,
-00037060: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
-00037070: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
-00037080: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
-00037090: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
-000370a0: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
-000370b0: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-000370c0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-000370d0: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
-000370e0: 6c6c 2074 6865 2074 7261 6465 7320 6d61  ll the trades ma
-000370f0: 6465 2066 726f 6d20 6120 7369 6e67 6c65  de from a single
-00037100: 206f 7264 6572 0a20 2020 2020 2020 203a   order.        :
-00037110: 7061 7261 6d20 7374 7220 6964 3a20 6f72  param str id: or
-00037120: 6465 7220 6964 0a20 2020 2020 2020 203a  der id.        :
-00037130: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
-00037140: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
-00037150: 2073 796d 626f 6c0a 2020 2020 2020 2020   symbol.        
-00037160: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
-00037170: 7369 6e63 653a 2074 6865 2065 6172 6c69  since: the earli
-00037180: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
-00037190: 6f20 6665 7463 6820 7472 6164 6573 2066  o fetch trades f
-000371a0: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
-000371b0: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-000371c0: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
-000371d0: 6d62 6572 206f 6620 7472 6164 6573 2074  mber of trades t
-000371e0: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
-000371f0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00037200: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-00037210: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00037220: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-00037230: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00037240: 2020 2020 203a 7265 7475 726e 7320 5b64       :returns [d
-00037250: 6963 745d 3a20 6120 6c69 7374 206f 6620  ict]: a list of 
-00037260: 6074 7261 6465 2073 7472 7563 7475 7265  `trade structure
-00037270: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
-00037280: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
-00037290: 7261 6465 2d73 7472 7563 7475 7265 3e60  rade-structure>`
-000372a0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000372b0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
-000372c0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-000372d0: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
-000372e0: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
-000372f0: 2e69 6420 2b20 2720 6665 7463 684f 7264  .id + ' fetchOrd
-00037300: 6572 5472 6164 6573 2829 2072 6571 7569  erTrades() requi
-00037310: 7265 7320 6120 7379 6d62 6f6c 2061 7267  res a symbol arg
-00037320: 756d 656e 7427 290a 2020 2020 2020 2020  ument').        
-00037330: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-00037340: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00037350: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00037360: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-00037370: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
-00037380: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-00037390: 6172 616d 732c 2027 7479 7065 272c 206d  arams, 'type', m
-000373a0: 6172 6b65 745b 2774 7970 6527 5d29 0a20  arket['type']). 
-000373b0: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-000373c0: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-000373d0: 2c20 2774 7970 6527 290a 2020 2020 2020  , 'type').      
-000373e0: 2020 6966 2074 7970 6520 213d 2027 7370    if type != 'sp
-000373f0: 6f74 273a 0a20 2020 2020 2020 2020 2020  ot':.           
-00037400: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-00037410: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-00037420: 6665 7463 684f 7264 6572 5472 6164 6573  fetchOrderTrades
-00037430: 2829 2073 7570 706f 7274 7320 7370 6f74  () supports spot
-00037440: 206d 6172 6b65 7473 206f 6e6c 7927 290a   markets only').
-00037450: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00037460: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00037470: 276f 7264 6572 4964 273a 2069 642c 0a20  'orderId': id,. 
-00037480: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00037490: 2072 6574 7572 6e20 6177 6169 7420 7365   return await se
-000374a0: 6c66 2e66 6574 6368 5f6d 795f 7472 6164  lf.fetch_my_trad
-000374b0: 6573 2873 796d 626f 6c2c 2073 696e 6365  es(symbol, since
-000374c0: 2c20 6c69 6d69 742c 2073 656c 662e 6578  , limit, self.ex
-000374d0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-000374e0: 7261 6d73 2929 0a0a 2020 2020 6173 796e  rams))..    asyn
-000374f0: 6320 6465 6620 6665 7463 685f 6d79 5f74  c def fetch_my_t
-00037500: 7261 6465 7328 7365 6c66 2c20 7379 6d62  rades(self, symb
-00037510: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00037520: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-00037530: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00037540: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-00037550: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00037560: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00037570: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00037580: 2020 2020 6665 7463 6820 616c 6c20 7472      fetch all tr
-00037590: 6164 6573 206d 6164 6520 6279 2074 6865  ades made by the
-000375a0: 2075 7365 720a 2020 2020 2020 2020 3a70   user.        :p
-000375b0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-000375c0: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-000375d0: 7379 6d62 6f6c 0a20 2020 2020 2020 203a  symbol.        :
-000375e0: 7061 7261 6d20 696e 747c 4e6f 6e65 2073  param int|None s
-000375f0: 696e 6365 3a20 7468 6520 6561 726c 6965  ince: the earlie
-00037600: 7374 2074 696d 6520 696e 206d 7320 746f  st time in ms to
-00037610: 2066 6574 6368 2074 7261 6465 7320 666f   fetch trades fo
-00037620: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-00037630: 2069 6e74 7c4e 6f6e 6520 6c69 6d69 743a   int|None limit:
-00037640: 2074 6865 206d 6178 696d 756d 206e 756d   the maximum num
-00037650: 6265 7220 6f66 2074 7261 6465 7320 7374  ber of trades st
-00037660: 7275 6374 7572 6573 2074 6f20 7265 7472  ructures to retr
-00037670: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
-00037680: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-00037690: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-000376a0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-000376b0: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-000376c0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-000376d0: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-000376e0: 6120 6c69 7374 206f 6620 6074 7261 6465  a list of `trade
-000376f0: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
-00037700: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-00037710: 6f6d 2f23 2f3f 6964 3d74 7261 6465 2d73  om/#/?id=trade-s
-00037720: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00037730: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-00037740: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-00037750: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00037760: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
-00037770: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
-00037780: 6f6e 650a 2020 2020 2020 2020 7479 7065  one.        type
-00037790: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-000377a0: 6d65 7468 6f64 203d 204e 6f6e 650a 2020  method = None.  
-000377b0: 2020 2020 2020 6d61 7267 696e 4d6f 6465        marginMode
-000377c0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-000377d0: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
-000377e0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000377f0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00037800: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00037810: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00037820: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
-00037830: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
-00037840: 2020 2020 2074 7970 652c 2070 6172 616d       type, param
-00037850: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-00037860: 6d61 726b 6574 5f74 7970 655f 616e 645f  market_type_and_
-00037870: 7061 7261 6d73 2827 6665 7463 684d 7954  params('fetchMyT
-00037880: 7261 6465 7327 2c20 6d61 726b 6574 2c20  rades', market, 
-00037890: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-000378a0: 6966 2074 7970 6520 3d3d 2027 6f70 7469  if type == 'opti
-000378b0: 6f6e 273a 0a20 2020 2020 2020 2020 2020  on':.           
-000378c0: 206d 6574 686f 6420 3d20 2765 6170 6950   method = 'eapiP
-000378d0: 7269 7661 7465 4765 7455 7365 7254 7261  rivateGetUserTra
-000378e0: 6465 7327 0a20 2020 2020 2020 2065 6c73  des'.        els
-000378f0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00037900: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
-00037910: 6564 5f73 796d 626f 6c28 2766 6574 6368  ed_symbol('fetch
-00037920: 4d79 5472 6164 6573 272c 2073 796d 626f  MyTrades', symbo
-00037930: 6c29 0a20 2020 2020 2020 2020 2020 206d  l).            m
-00037940: 6172 6769 6e4d 6f64 652c 2070 6172 616d  arginMode, param
-00037950: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-00037960: 6d61 7267 696e 5f6d 6f64 655f 616e 645f  margin_mode_and_
-00037970: 7061 7261 6d73 2827 6665 7463 684d 7954  params('fetchMyT
-00037980: 7261 6465 7327 2c20 7061 7261 6d73 290a  rades', params).
-00037990: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-000379a0: 7970 6520 3d3d 2027 7370 6f74 2720 6f72  ype == 'spot' or
-000379b0: 2074 7970 6520 3d3d 2027 6d61 7267 696e   type == 'margin
-000379c0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-000379d0: 2020 206d 6574 686f 6420 3d20 2770 7269     method = 'pri
-000379e0: 7661 7465 4765 744d 7954 7261 6465 7327  vateGetMyTrades'
-000379f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037a00: 2069 6620 2874 7970 6520 3d3d 2027 6d61   if (type == 'ma
-00037a10: 7267 696e 2729 206f 7220 286d 6172 6769  rgin') or (margi
-00037a20: 6e4d 6f64 6520 6973 206e 6f74 204e 6f6e  nMode is not Non
-00037a30: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00037a40: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00037a50: 2027 7361 7069 4765 744d 6172 6769 6e4d   'sapiGetMarginM
-00037a60: 7954 7261 6465 7327 0a20 2020 2020 2020  yTrades'.       
-00037a70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00037a80: 6d61 7267 696e 4d6f 6465 203d 3d20 2769  marginMode == 'i
-00037a90: 736f 6c61 7465 6427 3a0a 2020 2020 2020  solated':.      
-00037aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037ab0: 2020 7265 7175 6573 745b 2769 7349 736f    request['isIso
-00037ac0: 6c61 7465 6427 5d20 3d20 5472 7565 0a20  lated'] = True. 
-00037ad0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00037ae0: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-00037af0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00037b00: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
-00037b10: 5072 6976 6174 6547 6574 5573 6572 5472  PrivateGetUserTr
-00037b20: 6164 6573 270a 2020 2020 2020 2020 2020  ades'.          
-00037b30: 2020 656c 6966 206d 6172 6b65 745b 2769    elif market['i
-00037b40: 6e76 6572 7365 275d 3a0a 2020 2020 2020  nverse']:.      
-00037b50: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00037b60: 203d 2027 6461 7069 5072 6976 6174 6547   = 'dapiPrivateG
-00037b70: 6574 5573 6572 5472 6164 6573 270a 2020  etUserTrades'.  
-00037b80: 2020 2020 2020 656e 6454 696d 6520 3d20        endTime = 
-00037b90: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
-00037ba0: 725f 3228 7061 7261 6d73 2c20 2775 6e74  r_2(params, 'unt
-00037bb0: 696c 272c 2027 656e 6454 696d 6527 290a  il', 'endTime').
-00037bc0: 2020 2020 2020 2020 6966 2073 696e 6365          if since
-00037bd0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00037be0: 2020 2020 2020 2020 2020 7374 6172 7454            startT
-00037bf0: 696d 6520 3d20 7369 6e63 650a 2020 2020  ime = since.    
-00037c00: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00037c10: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-00037c20: 7461 7274 5469 6d65 0a20 2020 2020 2020  tartTime.       
-00037c30: 2020 2020 2023 2068 7474 7073 3a2f 2f62       # https://b
-00037c40: 696e 616e 6365 2d64 6f63 732e 6769 7468  inance-docs.gith
-00037c50: 7562 2e69 6f2f 6170 6964 6f63 732f 6675  ub.io/apidocs/fu
-00037c60: 7475 7265 732f 656e 2f23 6163 636f 756e  tures/en/#accoun
-00037c70: 742d 7472 6164 652d 6c69 7374 2d75 7365  t-trade-list-use
-00037c80: 725f 6461 7461 0a20 2020 2020 2020 2020  r_data.         
-00037c90: 2020 2023 2049 6620 7374 6172 7454 696d     # If startTim
-00037ca0: 6520 616e 6420 656e 6454 696d 6520 6172  e and endTime ar
-00037cb0: 6520 626f 7468 206e 6f74 2073 656e 742c  e both not sent,
-00037cc0: 2074 6865 6e20 7468 6520 6c61 7374 2037   then the last 7
-00037cd0: 2064 6179 7327 2064 6174 6120 7769 6c6c   days' data will
-00037ce0: 2062 6520 7265 7475 726e 6564 2e0a 2020   be returned..  
-00037cf0: 2020 2020 2020 2020 2020 2320 5468 6520            # The 
-00037d00: 7469 6d65 2062 6574 7765 656e 2073 7461  time between sta
-00037d10: 7274 5469 6d65 2061 6e64 2065 6e64 5469  rtTime and endTi
-00037d20: 6d65 2063 616e 6e6f 7420 6265 206c 6f6e  me cannot be lon
-00037d30: 6765 7220 7468 616e 2037 2064 6179 732e  ger than 7 days.
-00037d40: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00037d50: 6865 2070 6172 616d 6574 6572 2066 726f  he parameter fro
-00037d60: 6d49 6420 6361 6e6e 6f74 2062 6520 7365  mId cannot be se
-00037d70: 6e74 2077 6974 6820 7374 6172 7454 696d  nt with startTim
-00037d80: 6520 6f72 2065 6e64 5469 6d65 2e0a 2020  e or endTime..  
-00037d90: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00037da0: 7454 696d 6573 7461 6d70 203d 2073 656c  tTimestamp = sel
-00037db0: 662e 6d69 6c6c 6973 6563 6f6e 6473 2829  f.milliseconds()
-00037dc0: 0a20 2020 2020 2020 2020 2020 206f 6e65  .            one
-00037dd0: 5765 656b 203d 2037 202a 2032 3420 2a20  Week = 7 * 24 * 
-00037de0: 3630 202a 2036 3020 2a20 3130 3030 0a20  60 * 60 * 1000. 
-00037df0: 2020 2020 2020 2020 2020 2069 6620 2863             if (c
-00037e00: 7572 7265 6e74 5469 6d65 7374 616d 7020  urrentTimestamp 
-00037e10: 2d20 7374 6172 7454 696d 6529 203e 3d20  - startTime) >= 
-00037e20: 6f6e 6557 6565 6b3a 0a20 2020 2020 2020  oneWeek:.       
-00037e30: 2020 2020 2020 2020 2069 6620 2865 6e64           if (end
-00037e40: 5469 6d65 2069 7320 4e6f 6e65 2920 616e  Time is None) an
-00037e50: 6420 6d61 726b 6574 5b27 6c69 6e65 6172  d market['linear
-00037e60: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00037e70: 2020 2020 2020 2020 656e 6454 696d 6520          endTime 
-00037e80: 3d20 7365 6c66 2e73 756d 2873 7461 7274  = self.sum(start
-00037e90: 5469 6d65 2c20 6f6e 6557 6565 6b29 0a20  Time, oneWeek). 
-00037ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037eb0: 2020 2065 6e64 5469 6d65 203d 206d 696e     endTime = min
-00037ec0: 2865 6e64 5469 6d65 2c20 6375 7272 656e  (endTime, curren
-00037ed0: 7454 696d 6573 7461 6d70 290a 2020 2020  tTimestamp).    
-00037ee0: 2020 2020 6966 2065 6e64 5469 6d65 2069      if endTime i
-00037ef0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00037f00: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00037f10: 2765 6e64 5469 6d65 275d 203d 2065 6e64  'endTime'] = end
-00037f20: 5469 6d65 0a20 2020 2020 2020 2020 2020  Time.           
-00037f30: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
-00037f40: 6d69 7428 7061 7261 6d73 2c20 5b27 656e  mit(params, ['en
-00037f50: 6454 696d 6527 2c20 2775 6e74 696c 275d  dTime', 'until']
-00037f60: 290a 2020 2020 2020 2020 6966 206c 696d  ).        if lim
-00037f70: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
-00037f80: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-00037f90: 7479 7065 203d 3d20 276f 7074 696f 6e27  type == 'option'
-00037fa0: 2920 6f72 206d 6172 6b65 745b 2763 6f6e  ) or market['con
-00037fb0: 7472 6163 7427 5d3a 0a20 2020 2020 2020  tract']:.       
-00037fc0: 2020 2020 2020 2020 206c 696d 6974 203d           limit =
-00037fd0: 206d 696e 286c 696d 6974 2c20 3130 3030   min(limit, 1000
-00037fe0: 2920 2023 2061 626f 7665 2031 3030 302c  )  # above 1000,
-00037ff0: 2072 6574 7572 6e73 2065 7272 6f72 0a20   returns error. 
-00038000: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00038010: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
-00038020: 6d69 740a 2020 2020 2020 2020 7265 7370  mit.        resp
-00038030: 6f6e 7365 203d 2061 7761 6974 2067 6574  onse = await get
-00038040: 6174 7472 2873 656c 662c 206d 6574 686f  attr(self, metho
-00038050: 6429 2873 656c 662e 6578 7465 6e64 2872  d)(self.extend(r
-00038060: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-00038070: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00038080: 2020 2023 2073 706f 7420 7472 6164 650a     # spot trade.
-00038090: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000380a0: 2020 2320 2020 2020 5b0a 2020 2020 2020    #     [.      
-000380b0: 2020 2320 2020 2020 2020 2020 7b0a 2020    #         {.  
-000380c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000380d0: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
-000380e0: 4e42 4254 4322 2c0a 2020 2020 2020 2020  NBBTC",.        
-000380f0: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
-00038100: 6422 3a20 3238 3435 372c 0a20 2020 2020  d": 28457,.     
-00038110: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038120: 2022 6f72 6465 7249 6422 3a20 3130 3032   "orderId": 1002
-00038130: 3334 2c0a 2020 2020 2020 2020 2320 2020  34,.        #   
-00038140: 2020 2020 2020 2020 2020 2270 7269 6365            "price
-00038150: 223a 2022 342e 3030 3030 3031 3030 222c  ": "4.00000100",
-00038160: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038170: 2020 2020 2020 2022 7174 7922 3a20 2231         "qty": "1
-00038180: 322e 3030 3030 3030 3030 222c 0a20 2020  2.00000000",.   
-00038190: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000381a0: 2020 2022 636f 6d6d 6973 7369 6f6e 223a     "commission":
-000381b0: 2022 3130 2e31 3030 3030 3030 3022 2c0a   "10.10000000",.
-000381c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000381d0: 2020 2020 2020 2263 6f6d 6d69 7373 696f        "commissio
-000381e0: 6e41 7373 6574 223a 2022 424e 4222 2c0a  nAsset": "BNB",.
-000381f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038200: 2020 2020 2020 2274 696d 6522 3a20 3134        "time": 14
-00038210: 3939 3836 3535 3439 3539 302c 0a20 2020  99865549590,.   
-00038220: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038230: 2020 2022 6973 4275 7965 7222 3a20 5472     "isBuyer": Tr
-00038240: 7565 2c0a 2020 2020 2020 2020 2320 2020  ue,.        #   
-00038250: 2020 2020 2020 2020 2020 2269 734d 616b            "isMak
-00038260: 6572 223a 2046 616c 7365 2c0a 2020 2020  er": False,.    
-00038270: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038280: 2020 2269 7342 6573 744d 6174 6368 223a    "isBestMatch":
-00038290: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
-000382a0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-000382b0: 2020 2023 2020 2020 205d 0a20 2020 2020     #     ].     
-000382c0: 2020 2023 0a20 2020 2020 2020 2023 2066     #.        # f
-000382d0: 7574 7572 6573 2074 7261 6465 0a20 2020  utures trade.   
-000382e0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000382f0: 2020 2020 205b 0a20 2020 2020 2020 2023       [.        #
-00038300: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00038310: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038320: 2022 6163 636f 756e 7449 6422 3a20 3230   "accountId": 20
-00038330: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00038340: 2020 2020 2020 2020 2262 7579 6572 223a          "buyer":
-00038350: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-00038360: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
-00038370: 6f6d 6d69 7373 696f 6e22 3a20 222d 302e  ommission": "-0.
-00038380: 3037 3831 3930 3130 222c 0a20 2020 2020  07819010",.     
-00038390: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000383a0: 2022 636f 6d6d 6973 7369 6f6e 4173 7365   "commissionAsse
-000383b0: 7422 3a20 2255 5344 5422 2c0a 2020 2020  t": "USDT",.    
-000383c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000383d0: 2020 2263 6f75 6e74 6572 5061 7274 7949    "counterPartyI
-000383e0: 6422 3a20 3635 332c 0a20 2020 2020 2020  d": 653,.       
-000383f0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00038400: 6964 223a 2036 3938 3735 392c 0a20 2020  id": 698759,.   
-00038410: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038420: 2020 2022 6d61 6b65 7222 3a20 4661 6c73     "maker": Fals
-00038430: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00038440: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00038450: 6422 3a20 3235 3835 3138 3133 2c0a 2020  d": 25851813,.  
-00038460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038470: 2020 2020 2270 7269 6365 223a 2022 3738      "price": "78
-00038480: 3139 2e30 3122 2c0a 2020 2020 2020 2020  19.01",.        
-00038490: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
-000384a0: 7479 223a 2022 302e 3030 3222 2c0a 2020  ty": "0.002",.  
-000384b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000384c0: 2020 2020 2271 756f 7465 5174 7922 3a20      "quoteQty": 
-000384d0: 2230 2e30 3135 3633 222c 0a20 2020 2020  "0.01563",.     
-000384e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000384f0: 2022 7265 616c 697a 6564 506e 6c22 3a20   "realizedPnl": 
-00038500: 222d 302e 3931 3533 3939 3939 222c 0a20  "-0.91539999",. 
-00038510: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00038520: 2020 2020 2022 7369 6465 223a 2022 5345       "side": "SE
-00038530: 4c4c 222c 0a20 2020 2020 2020 2023 2020  LL",.        #  
-00038540: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
-00038550: 6f6c 223a 2022 4254 4355 5344 5422 2c0a  ol": "BTCUSDT",.
-00038560: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038570: 2020 2020 2020 2274 696d 6522 3a20 3135        "time": 15
-00038580: 3639 3531 3439 3738 3032 300a 2020 2020  69514978020.    
-00038590: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-000385a0: 2020 2020 2020 2020 2320 2020 2020 5d0a          #     ].
-000385b0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000385c0: 2020 2320 6f70 7469 6f6e 7328 6561 7069    # options(eapi
-000385d0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-000385e0: 2020 2020 2320 2020 2020 5b0a 2020 2020      #     [.    
-000385f0: 2020 2020 2320 2020 2020 2020 2020 7b0a      #         {.
-00038600: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038610: 2020 2020 2020 2269 6422 3a20 3131 3235        "id": 1125
-00038620: 3839 3939 3036 3834 3432 3236 3031 322c  899906844226012,
-00038630: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038640: 2020 2020 2020 2022 7472 6164 6549 6422         "tradeId"
-00038650: 3a20 3733 2c0a 2020 2020 2020 2020 2320  : 73,.        # 
-00038660: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00038670: 6572 4964 223a 2034 3633 3837 3631 3130  erId": 463876110
-00038680: 3038 3433 3034 3037 3638 2c0a 2020 2020  0843040768,.    
-00038690: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000386a0: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
-000386b0: 2d32 3330 3231 312d 3135 3030 2d43 222c  -230211-1500-C",
-000386c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000386d0: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
-000386e0: 2231 382e 3730 3030 3030 3030 222c 0a20  "18.70000000",. 
-000386f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00038700: 2020 2020 2022 7175 616e 7469 7479 223a       "quantity":
-00038710: 2022 2d30 2e35 3730 3030 3030 3022 2c0a   "-0.57000000",.
-00038720: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038730: 2020 2020 2020 2266 6565 223a 2022 302e        "fee": "0.
-00038740: 3137 3330 3538 3930 222c 0a20 2020 2020  17305890",.     
-00038750: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038760: 2022 7265 616c 697a 6564 5072 6f66 6974   "realizedProfit
-00038770: 223a 2022 2d33 2e35 3334 3030 3030 3022  ": "-3.53400000"
-00038780: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00038790: 2020 2020 2020 2020 2273 6964 6522 3a20          "side": 
-000387a0: 2253 454c 4c22 2c0a 2020 2020 2020 2020  "SELL",.        
-000387b0: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
-000387c0: 7970 6522 3a20 224c 494d 4954 222c 0a20  ype": "LIMIT",. 
-000387d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000387e0: 2020 2020 2022 766f 6c61 7469 6c69 7479       "volatility
-000387f0: 223a 2022 302e 3330 3030 3030 3030 222c  ": "0.30000000",
-00038800: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038810: 2020 2020 2020 2022 6c69 7175 6964 6974         "liquidit
-00038820: 7922 3a20 224d 414b 4552 222c 0a20 2020  y": "MAKER",.   
-00038830: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038840: 2020 2022 7469 6d65 223a 2031 3637 3630     "time": 16760
-00038850: 3835 3231 3638 3435 2c0a 2020 2020 2020  85216845,.      
-00038860: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00038870: 2270 7269 6365 5363 616c 6522 3a20 312c  "priceScale": 1,
-00038880: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038890: 2020 2020 2020 2022 7175 616e 7469 7479         "quantity
-000388a0: 5363 616c 6522 3a20 322c 0a20 2020 2020  Scale": 2,.     
-000388b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000388c0: 2022 6f70 7469 6f6e 5369 6465 223a 2022   "optionSide": "
-000388d0: 4341 4c4c 222c 0a20 2020 2020 2020 2023  CALL",.        #
-000388e0: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
-000388f0: 6f74 6541 7373 6574 223a 2022 5553 4454  oteAsset": "USDT
-00038900: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00038910: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-00038920: 2020 2020 5d0a 2020 2020 2020 2020 230a      ].        #.
-00038930: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00038940: 656c 662e 7061 7273 655f 7472 6164 6573  elf.parse_trades
-00038950: 2872 6573 706f 6e73 652c 206d 6172 6b65  (response, marke
-00038960: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
-00038970: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-00038980: 6665 7463 685f 6d79 5f64 7573 745f 7472  fetch_my_dust_tr
-00038990: 6164 6573 2873 656c 662c 2073 796d 626f  ades(self, symbo
-000389a0: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-000389b0: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-000389c0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-000389d0: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-000389e0: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-000389f0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00038a00: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00038a10: 2020 2066 6574 6368 2061 6c6c 2064 7573     fetch all dus
-00038a20: 7420 7472 6164 6573 206d 6164 6520 6279  t trades made by
-00038a30: 2074 6865 2075 7365 720a 2020 2020 2020   the user.      
-00038a40: 2020 3a70 6172 616d 2073 7472 7c4e 6f6e    :param str|Non
-00038a50: 6520 7379 6d62 6f6c 3a20 6e6f 7420 7573  e symbol: not us
-00038a60: 6564 2062 7920 6269 6e61 6e63 6520 6665  ed by binance fe
-00038a70: 7463 684d 7944 7573 7454 7261 6465 7328  tchMyDustTrades(
-00038a80: 290a 2020 2020 2020 2020 3a70 6172 616d  ).        :param
-00038a90: 2069 6e74 7c4e 6f6e 6520 7369 6e63 653a   int|None since:
-00038aa0: 2074 6865 2065 6172 6c69 6573 7420 7469   the earliest ti
-00038ab0: 6d65 2069 6e20 6d73 2074 6f20 6665 7463  me in ms to fetc
-00038ac0: 6820 6d79 2064 7573 7420 7472 6164 6573  h my dust trades
-00038ad0: 2066 6f72 0a20 2020 2020 2020 203a 7061   for.        :pa
-00038ae0: 7261 6d20 696e 747c 4e6f 6e65 206c 696d  ram int|None lim
-00038af0: 6974 3a20 7468 6520 6d61 7869 6d75 6d20  it: the maximum 
-00038b00: 6e75 6d62 6572 206f 6620 6475 7374 2074  number of dust t
-00038b10: 7261 6465 7320 746f 2072 6574 7269 6576  rades to retriev
-00038b20: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00038b30: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-00038b40: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00038b50: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-00038b60: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
-00038b70: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-00038b80: 7572 6e73 205b 6469 6374 5d3a 2061 206c  urns [dict]: a l
-00038b90: 6973 7420 6f66 2060 7472 6164 6520 7374  ist of `trade st
-00038ba0: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
-00038bb0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00038bc0: 232f 3f69 643d 7472 6164 652d 7374 7275  #/?id=trade-stru
-00038bd0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00038be0: 2222 220a 2020 2020 2020 2020 230a 2020  """.        #.  
-00038bf0: 2020 2020 2020 2320 4269 6e61 6e63 6520        # Binance 
-00038c00: 7072 6f76 6964 6573 2061 6e20 6f70 706f  provides an oppo
-00038c10: 7274 756e 6974 7920 746f 2074 7261 6465  rtunity to trade
-00038c20: 2069 6e73 6967 6e69 6669 6361 6e74 2869   insignificant(i
-00038c30: 2e65 2e20 6e6f 6e2d 7472 6164 6162 6c65  .e. non-tradable
-00038c40: 2061 6e64 206e 6f6e 2d77 6974 6864 7261   and non-withdra
-00038c50: 7761 626c 6529 0a20 2020 2020 2020 2023  wable).        #
-00038c60: 2074 6f6b 656e 206c 6566 746f 7665 7273   token leftovers
-00038c70: 286f 6620 616e 7920 6173 7365 7429 2069  (of any asset) i
-00038c80: 6e74 6f20 6042 4e42 6020 636f 696e 2077  nto `BNB` coin w
-00038c90: 6869 6368 2069 6e20 7475 726e 2063 616e  hich in turn can
-00038ca0: 2062 6520 7573 6564 2074 6f20 7061 7920   be used to pay 
-00038cb0: 7472 6164 696e 6720 6665 6573 2077 6974  trading fees wit
-00038cc0: 6820 6974 2e0a 2020 2020 2020 2020 2320  h it..        # 
-00038cd0: 5468 6520 636f 7272 6573 706f 6e64 696e  The correspondin
-00038ce0: 6720 7472 6164 6573 2068 6973 746f 7279  g trades history
-00038cf0: 2069 7320 6361 6c6c 6564 2074 6865 2060   is called the `
-00038d00: 4475 7374 204c 6f67 6020 616e 6420 6361  Dust Log` and ca
-00038d10: 6e20 6265 2072 6571 7565 7374 6564 2076  n be requested v
-00038d20: 6961 2074 6865 2066 6f6c 6c6f 7769 6e67  ia the following
-00038d30: 2065 6e64 2d70 6f69 6e74 3a0a 2020 2020   end-point:.    
-00038d40: 2020 2020 2320 6874 7470 733a 2f2f 6769      # https://gi
-00038d50: 7468 7562 2e63 6f6d 2f62 696e 616e 6365  thub.com/binance
-00038d60: 2d65 7863 6861 6e67 652f 6269 6e61 6e63  -exchange/binanc
-00038d70: 652d 6f66 6669 6369 616c 2d61 7069 2d64  e-official-api-d
-00038d80: 6f63 732f 626c 6f62 2f6d 6173 7465 722f  ocs/blob/master/
-00038d90: 7761 7069 2d61 7069 2e6d 6423 6475 7374  wapi-api.md#dust
-00038da0: 6c6f 672d 7573 6572 5f64 6174 610a 2020  log-user_data.  
-00038db0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00038dc0: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-00038dd0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00038de0: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
-00038df0: 2020 2020 2020 2069 6620 7369 6e63 6520         if since 
-00038e00: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00038e10: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00038e20: 5b27 7374 6172 7454 696d 6527 5d20 3d20  ['startTime'] = 
-00038e30: 7369 6e63 650a 2020 2020 2020 2020 2020  since.          
-00038e40: 2020 7265 7175 6573 745b 2765 6e64 5469    request['endTi
-00038e50: 6d65 275d 203d 2073 656c 662e 7375 6d28  me'] = self.sum(
-00038e60: 7369 6e63 652c 2037 3737 3630 3030 3030  since, 777600000
-00038e70: 3029 0a20 2020 2020 2020 2072 6573 706f  0).        respo
-00038e80: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-00038e90: 2e73 6170 6947 6574 4173 7365 7444 7269  .sapiGetAssetDri
-00038ea0: 6262 6c65 7428 7365 6c66 2e65 7874 656e  bblet(self.exten
-00038eb0: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-00038ec0: 7329 290a 2020 2020 2020 2020 2320 2020  s)).        #   
-00038ed0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00038ee0: 2020 2020 2274 6f74 616c 223a 2022 3422      "total": "4"
-00038ef0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00038f00: 2020 2275 7365 7241 7373 6574 4472 6962    "userAssetDrib
-00038f10: 626c 6574 7322 3a20 5b0a 2020 2020 2020  blets": [.      
-00038f20: 2020 2320 2020 2020 2020 2020 7b0a 2020    #         {.  
-00038f30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038f40: 2020 226f 7065 7261 7465 5469 6d65 223a    "operateTime":
-00038f50: 2022 3136 3237 3537 3537 3331 3030 3022   "1627575731000"
-00038f60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00038f70: 2020 2020 2020 2274 6f74 616c 5365 7276        "totalServ
-00038f80: 6963 6543 6861 7267 6541 6d6f 756e 7422  iceChargeAmount"
-00038f90: 3a20 2230 2e30 3030 3031 3435 3322 2c0a  : "0.00001453",.
-00038fa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038fb0: 2020 2020 2274 6f74 616c 5472 616e 7366      "totalTransf
-00038fc0: 6572 6564 416d 6f75 6e74 223a 2022 302e  eredAmount": "0.
-00038fd0: 3030 3037 3236 3933 222c 0a20 2020 2020  00072693",.     
-00038fe0: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
-00038ff0: 7472 616e 7349 6422 3a20 2237 3038 3939  transId": "70899
-00039000: 3831 3538 3633 222c 0a20 2020 2020 2020  815863",.       
-00039010: 2023 2020 2020 2020 2020 2020 2022 7573   #           "us
-00039020: 6572 4173 7365 7444 7269 6262 6c65 7444  erAssetDribbletD
-00039030: 6574 6169 6c73 223a 205b 0a20 2020 2020  etails": [.     
-00039040: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00039050: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00039060: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-00039070: 4173 7365 7422 3a20 224c 5443 222c 0a20  Asset": "LTC",. 
-00039080: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00039090: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-000390a0: 2022 302e 3030 3030 3036 222c 0a20 2020   "0.000006",.   
-000390b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000390c0: 2020 2020 2022 7472 616e 7366 6572 6564       "transfered
-000390d0: 416d 6f75 6e74 223a 2022 302e 3030 3030  Amount": "0.0000
-000390e0: 3032 3637 222c 0a20 2020 2020 2020 2023  0267",.        #
-000390f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00039100: 7365 7276 6963 6543 6861 7267 6541 6d6f  serviceChargeAmo
-00039110: 756e 7422 3a20 2230 2e30 3030 3030 3030  unt": "0.0000000
-00039120: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
-00039130: 2020 2020 2020 2020 2020 2020 226f 7065              "ope
-00039140: 7261 7465 5469 6d65 223a 2022 3136 3237  rateTime": "1627
-00039150: 3537 3537 3331 3030 3022 2c0a 2020 2020  575731000",.    
-00039160: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00039170: 2020 2020 2274 7261 6e73 4964 223a 2022      "transId": "
-00039180: 3730 3839 3938 3135 3836 3322 0a20 2020  70899815863".   
-00039190: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000391a0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-000391b0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-000391c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000391d0: 2020 2020 2020 2266 726f 6d41 7373 6574        "fromAsset
-000391e0: 223a 2022 4742 5022 2c0a 2020 2020 2020  ": "GBP",.      
-000391f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00039200: 2020 2261 6d6f 756e 7422 3a20 2230 2e31    "amount": "0.1
-00039210: 3539 3439 3135 3722 2c0a 2020 2020 2020  5949157",.      
-00039220: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00039230: 2020 2274 7261 6e73 6665 7265 6441 6d6f    "transferedAmo
-00039240: 756e 7422 3a20 2230 2e30 3030 3732 3432  unt": "0.0007242
-00039250: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
-00039260: 2020 2020 2020 2020 2020 2020 2273 6572              "ser
-00039270: 7669 6365 4368 6172 6765 416d 6f75 6e74  viceChargeAmount
-00039280: 223a 2022 302e 3030 3030 3134 3438 222c  ": "0.00001448",
-00039290: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000392a0: 2020 2020 2020 2020 2022 6f70 6572 6174           "operat
-000392b0: 6554 696d 6522 3a20 2231 3632 3735 3735  eTime": "1627575
-000392c0: 3733 3130 3030 222c 0a20 2020 2020 2020  731000",.       
-000392d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000392e0: 2022 7472 616e 7349 6422 3a20 2237 3038   "transId": "708
-000392f0: 3939 3831 3538 3633 220a 2020 2020 2020  99815863".      
-00039300: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00039310: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00039320: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-00039330: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-00039340: 2020 2020 2023 2020 2020 2020 205d 0a20       #       ]. 
-00039350: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00039360: 2020 2020 2020 2072 6573 756c 7473 203d         results =
-00039370: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00039380: 2872 6573 706f 6e73 652c 2027 7573 6572  (response, 'user
-00039390: 4173 7365 7444 7269 6262 6c65 7473 272c  AssetDribblets',
-000393a0: 205b 5d29 0a20 2020 2020 2020 2072 6f77   []).        row
-000393b0: 7320 3d20 7365 6c66 2e73 6166 655f 696e  s = self.safe_in
-000393c0: 7465 6765 7228 7265 7370 6f6e 7365 2c20  teger(response, 
-000393d0: 2774 6f74 616c 272c 2030 290a 2020 2020  'total', 0).    
-000393e0: 2020 2020 6461 7461 203d 205b 5d0a 2020      data = [].  
-000393f0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-00039400: 616e 6765 2830 2c20 726f 7773 293a 0a20  ange(0, rows):. 
-00039410: 2020 2020 2020 2020 2020 206c 6f67 7320             logs 
-00039420: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00039430: 6528 7265 7375 6c74 735b 695d 2c20 2775  e(results[i], 'u
-00039440: 7365 7241 7373 6574 4472 6962 626c 6574  serAssetDribblet
-00039450: 4465 7461 696c 7327 2c20 5b5d 290a 2020  Details', []).  
-00039460: 2020 2020 2020 2020 2020 666f 7220 6a20            for j 
-00039470: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-00039480: 6c6f 6773 2929 3a0a 2020 2020 2020 2020  logs)):.        
-00039490: 2020 2020 2020 2020 6c6f 6773 5b6a 5d5b          logs[j][
-000394a0: 2769 7344 7573 7454 7261 6465 275d 203d  'isDustTrade'] =
-000394b0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-000394c0: 2020 2020 2020 6461 7461 2e61 7070 656e        data.appen
-000394d0: 6428 6c6f 6773 5b6a 5d29 0a20 2020 2020  d(logs[j]).     
-000394e0: 2020 2074 7261 6465 7320 3d20 7365 6c66     trades = self
-000394f0: 2e70 6172 7365 5f74 7261 6465 7328 6461  .parse_trades(da
-00039500: 7461 2c20 4e6f 6e65 2c20 7369 6e63 652c  ta, None, since,
-00039510: 206c 696d 6974 290a 2020 2020 2020 2020   limit).        
-00039520: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
-00039530: 6572 5f62 795f 7369 6e63 655f 6c69 6d69  er_by_since_limi
-00039540: 7428 7472 6164 6573 2c20 7369 6e63 652c  t(trades, since,
-00039550: 206c 696d 6974 290a 0a20 2020 2064 6566   limit)..    def
-00039560: 2070 6172 7365 5f64 7573 745f 7472 6164   parse_dust_trad
-00039570: 6528 7365 6c66 2c20 7472 6164 652c 206d  e(self, trade, m
-00039580: 6172 6b65 743d 4e6f 6e65 293a 0a20 2020  arket=None):.   
-00039590: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000395a0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-000395b0: 2020 2020 2020 2022 6672 6f6d 4173 7365         "fromAsse
-000395c0: 7422 3a20 2255 5344 5422 2c0a 2020 2020  t": "USDT",.    
-000395d0: 2020 2020 2320 2020 2020 2020 2261 6d6f      #       "amo
-000395e0: 756e 7422 3a20 2230 2e30 3039 3636 3922  unt": "0.009669"
-000395f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00039600: 2020 2274 7261 6e73 6665 7265 6441 6d6f    "transferedAmo
-00039610: 756e 7422 3a20 2230 2e30 3030 3032 3939  unt": "0.0000299
-00039620: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
-00039630: 2020 2020 2273 6572 7669 6365 4368 6172      "serviceChar
-00039640: 6765 416d 6f75 6e74 223a 2022 302e 3030  geAmount": "0.00
-00039650: 3030 3030 3539 222c 0a20 2020 2020 2020  000059",.       
-00039660: 2023 2020 2020 2020 2022 6f70 6572 6174   #       "operat
-00039670: 6554 696d 6522 3a20 2231 3632 3830 3736  eTime": "1628076
-00039680: 3031 3030 3030 222c 0a20 2020 2020 2020  010000",.       
-00039690: 2023 2020 2020 2020 2022 7472 616e 7349   #       "transI
-000396a0: 6422 3a20 2237 3134 3136 3537 3837 3132  d": "71416578712
-000396b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000396c0: 2020 2022 6973 4475 7374 5472 6164 6522     "isDustTrade"
-000396d0: 3a20 5472 7565 0a20 2020 2020 2020 2023  : True.        #
-000396e0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-000396f0: 0a20 2020 2020 2020 206f 7264 6572 4964  .        orderId
-00039700: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00039710: 696e 6728 7472 6164 652c 2027 7472 616e  ing(trade, 'tran
-00039720: 7349 6427 290a 2020 2020 2020 2020 7469  sId').        ti
-00039730: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
-00039740: 6166 655f 696e 7465 6765 7228 7472 6164  afe_integer(trad
-00039750: 652c 2027 6f70 6572 6174 6554 696d 6527  e, 'operateTime'
-00039760: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
-00039770: 6379 4964 203d 2073 656c 662e 7361 6665  cyId = self.safe
-00039780: 5f73 7472 696e 6728 7472 6164 652c 2027  _string(trade, '
-00039790: 6672 6f6d 4173 7365 7427 290a 2020 2020  fromAsset').    
-000397a0: 2020 2020 7472 6164 6564 4375 7272 656e      tradedCurren
-000397b0: 6379 203d 2073 656c 662e 7361 6665 5f63  cy = self.safe_c
-000397c0: 7572 7265 6e63 795f 636f 6465 2863 7572  urrency_code(cur
-000397d0: 7265 6e63 7949 6429 0a20 2020 2020 2020  rencyId).       
-000397e0: 2062 6e62 203d 2073 656c 662e 6375 7272   bnb = self.curr
-000397f0: 656e 6379 2827 424e 4227 290a 2020 2020  ency('BNB').    
-00039800: 2020 2020 6561 726e 6564 4375 7272 656e      earnedCurren
-00039810: 6379 203d 2062 6e62 5b27 636f 6465 275d  cy = bnb['code']
-00039820: 0a20 2020 2020 2020 2061 7070 6c69 6361  .        applica
-00039830: 6e74 5379 6d62 6f6c 203d 2065 6172 6e65  ntSymbol = earne
-00039840: 6443 7572 7265 6e63 7920 2b20 272f 2720  dCurrency + '/' 
-00039850: 2b20 7472 6164 6564 4375 7272 656e 6379  + tradedCurrency
-00039860: 0a20 2020 2020 2020 2074 7261 6465 6443  .        tradedC
-00039870: 7572 7265 6e63 7949 7351 756f 7465 203d  urrencyIsQuote =
-00039880: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
-00039890: 6620 6170 706c 6963 616e 7453 796d 626f  f applicantSymbo
-000398a0: 6c20 696e 2073 656c 662e 6d61 726b 6574  l in self.market
-000398b0: 733a 0a20 2020 2020 2020 2020 2020 2074  s:.            t
-000398c0: 7261 6465 6443 7572 7265 6e63 7949 7351  radedCurrencyIsQ
-000398d0: 756f 7465 203d 2054 7275 650a 2020 2020  uote = True.    
-000398e0: 2020 2020 6665 6543 6f73 7453 7472 696e      feeCostStrin
-000398f0: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
-00039900: 7269 6e67 2874 7261 6465 2c20 2773 6572  ring(trade, 'ser
-00039910: 7669 6365 4368 6172 6765 416d 6f75 6e74  viceChargeAmount
-00039920: 2729 0a20 2020 2020 2020 2066 6565 203d  ').        fee =
-00039930: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00039940: 6375 7272 656e 6379 273a 2065 6172 6e65  currency': earne
-00039950: 6443 7572 7265 6e63 792c 0a20 2020 2020  dCurrency,.     
-00039960: 2020 2020 2020 2027 636f 7374 273a 2073         'cost': s
-00039970: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
-00039980: 2866 6565 436f 7374 5374 7269 6e67 292c  (feeCostString),
-00039990: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-000399a0: 2020 2073 796d 626f 6c20 3d20 4e6f 6e65     symbol = None
-000399b0: 0a20 2020 2020 2020 2061 6d6f 756e 7453  .        amountS
-000399c0: 7472 696e 6720 3d20 4e6f 6e65 0a20 2020  tring = None.   
-000399d0: 2020 2020 2063 6f73 7453 7472 696e 6720       costString 
-000399e0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-000399f0: 6964 6520 3d20 4e6f 6e65 0a20 2020 2020  ide = None.     
-00039a00: 2020 2069 6620 7472 6164 6564 4375 7272     if tradedCurr
-00039a10: 656e 6379 4973 5175 6f74 653a 0a20 2020  encyIsQuote:.   
-00039a20: 2020 2020 2020 2020 2073 796d 626f 6c20           symbol 
-00039a30: 3d20 6170 706c 6963 616e 7453 796d 626f  = applicantSymbo
-00039a40: 6c0a 2020 2020 2020 2020 2020 2020 616d  l.            am
-00039a50: 6f75 6e74 5374 7269 6e67 203d 2073 656c  ountString = sel
-00039a60: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-00039a70: 6164 652c 2027 7472 616e 7366 6572 6564  ade, 'transfered
-00039a80: 416d 6f75 6e74 2729 0a20 2020 2020 2020  Amount').       
-00039a90: 2020 2020 2063 6f73 7453 7472 696e 6720       costString 
-00039aa0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00039ab0: 6e67 2874 7261 6465 2c20 2761 6d6f 756e  ng(trade, 'amoun
-00039ac0: 7427 290a 2020 2020 2020 2020 2020 2020  t').            
-00039ad0: 7369 6465 203d 2027 6275 7927 0a20 2020  side = 'buy'.   
-00039ae0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00039af0: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
-00039b00: 7472 6164 6564 4375 7272 656e 6379 202b  tradedCurrency +
-00039b10: 2027 2f27 202b 2065 6172 6e65 6443 7572   '/' + earnedCur
-00039b20: 7265 6e63 790a 2020 2020 2020 2020 2020  rency.          
-00039b30: 2020 616d 6f75 6e74 5374 7269 6e67 203d    amountString =
-00039b40: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00039b50: 6728 7472 6164 652c 2027 616d 6f75 6e74  g(trade, 'amount
-00039b60: 2729 0a20 2020 2020 2020 2020 2020 2063  ').            c
-00039b70: 6f73 7453 7472 696e 6720 3d20 7365 6c66  ostString = self
-00039b80: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
-00039b90: 6465 2c20 2774 7261 6e73 6665 7265 6441  de, 'transferedA
-00039ba0: 6d6f 756e 7427 290a 2020 2020 2020 2020  mount').        
-00039bb0: 2020 2020 7369 6465 203d 2027 7365 6c6c      side = 'sell
-00039bc0: 270a 2020 2020 2020 2020 7072 6963 6553  '.        priceS
-00039bd0: 7472 696e 6720 3d20 4e6f 6e65 0a20 2020  tring = None.   
-00039be0: 2020 2020 2069 6620 636f 7374 5374 7269       if costStri
-00039bf0: 6e67 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ng is not None:.
-00039c00: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00039c10: 6d6f 756e 7453 7472 696e 673a 0a20 2020  mountString:.   
-00039c20: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00039c30: 6365 5374 7269 6e67 203d 2050 7265 6369  ceString = Preci
-00039c40: 7365 2e73 7472 696e 675f 6469 7628 636f  se.string_div(co
-00039c50: 7374 5374 7269 6e67 2c20 616d 6f75 6e74  stString, amount
-00039c60: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-00039c70: 6964 203d 204e 6f6e 650a 2020 2020 2020  id = None.      
-00039c80: 2020 616d 6f75 6e74 203d 2073 656c 662e    amount = self.
-00039c90: 7061 7273 655f 6e75 6d62 6572 2861 6d6f  parse_number(amo
-00039ca0: 756e 7453 7472 696e 6729 0a20 2020 2020  untString).     
-00039cb0: 2020 2070 7269 6365 203d 2073 656c 662e     price = self.
-00039cc0: 7061 7273 655f 6e75 6d62 6572 2870 7269  parse_number(pri
-00039cd0: 6365 5374 7269 6e67 290a 2020 2020 2020  ceString).      
-00039ce0: 2020 636f 7374 203d 2073 656c 662e 7061    cost = self.pa
-00039cf0: 7273 655f 6e75 6d62 6572 2863 6f73 7453  rse_number(costS
-00039d00: 7472 696e 6729 0a20 2020 2020 2020 2074  tring).        t
-00039d10: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
-00039d20: 2020 2074 616b 6572 4f72 4d61 6b65 7220     takerOrMaker 
-00039d30: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
-00039d40: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
-00039d50: 2020 2020 2769 6427 3a20 6964 2c0a 2020      'id': id,.  
-00039d60: 2020 2020 2020 2020 2020 2774 696d 6573            'times
-00039d70: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
-00039d80: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
-00039d90: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
-00039da0: 736f 3836 3031 2874 696d 6573 7461 6d70  so8601(timestamp
-00039db0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00039dc0: 7379 6d62 6f6c 273a 2073 796d 626f 6c2c  symbol': symbol,
-00039dd0: 0a20 2020 2020 2020 2020 2020 2027 6f72  .            'or
-00039de0: 6465 7227 3a20 6f72 6465 7249 642c 0a20  der': orderId,. 
-00039df0: 2020 2020 2020 2020 2020 2027 7479 7065             'type
-00039e00: 273a 2074 7970 652c 0a20 2020 2020 2020  ': type,.       
-00039e10: 2020 2020 2027 7461 6b65 724f 724d 616b       'takerOrMak
-00039e20: 6572 273a 2074 616b 6572 4f72 4d61 6b65  er': takerOrMake
-00039e30: 722c 0a20 2020 2020 2020 2020 2020 2027  r,.            '
-00039e40: 7369 6465 273a 2073 6964 652c 0a20 2020  side': side,.   
-00039e50: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
-00039e60: 273a 2061 6d6f 756e 742c 0a20 2020 2020  ': amount,.     
-00039e70: 2020 2020 2020 2027 7072 6963 6527 3a20         'price': 
-00039e80: 7072 6963 652c 0a20 2020 2020 2020 2020  price,.         
-00039e90: 2020 2027 636f 7374 273a 2063 6f73 742c     'cost': cost,
-00039ea0: 0a20 2020 2020 2020 2020 2020 2027 6665  .            'fe
-00039eb0: 6527 3a20 6665 652c 0a20 2020 2020 2020  e': fee,.       
-00039ec0: 2020 2020 2027 696e 666f 273a 2074 7261       'info': tra
-00039ed0: 6465 2c0a 2020 2020 2020 2020 7d0a 0a20  de,.        }.. 
-00039ee0: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
-00039ef0: 6368 5f64 6570 6f73 6974 7328 7365 6c66  ch_deposits(self
-00039f00: 2c20 636f 6465 3a20 4f70 7469 6f6e 616c  , code: Optional
-00039f10: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
-00039f20: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
-00039f30: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
-00039f40: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00039f50: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-00039f60: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-00039f70: 2020 2020 2020 2020 6665 7463 6820 616c          fetch al
-00039f80: 6c20 6465 706f 7369 7473 206d 6164 6520  l deposits made 
-00039f90: 746f 2061 6e20 6163 636f 756e 740a 2020  to an account.  
-00039fa0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00039fb0: 7c4e 6f6e 6520 636f 6465 3a20 756e 6966  |None code: unif
-00039fc0: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
-00039fd0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00039fe0: 2069 6e74 7c4e 6f6e 6520 7369 6e63 653a   int|None since:
-00039ff0: 2074 6865 2065 6172 6c69 6573 7420 7469   the earliest ti
-0003a000: 6d65 2069 6e20 6d73 2074 6f20 6665 7463  me in ms to fetc
-0003a010: 6820 6465 706f 7369 7473 2066 6f72 0a20  h deposits for. 
-0003a020: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-0003a030: 747c 4e6f 6e65 206c 696d 6974 3a20 7468  t|None limit: th
-0003a040: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-0003a050: 206f 6620 6465 706f 7369 7473 2073 7472   of deposits str
-0003a060: 7563 7475 7265 7320 746f 2072 6574 7269  uctures to retri
-0003a070: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
-0003a080: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-0003a090: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-0003a0a0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-0003a0b0: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
-0003a0c0: 706f 696e 740a 2020 2020 2020 2020 3a70  point.        :p
-0003a0d0: 6172 616d 2062 6f6f 6c20 7061 7261 6d73  aram bool params
-0003a0e0: 5b27 6669 6174 275d 3a20 6966 2054 7275  ['fiat']: if Tru
-0003a0f0: 652c 206f 6e6c 7920 6669 6174 2064 6570  e, only fiat dep
-0003a100: 6f73 6974 7320 7769 6c6c 2062 6520 7265  osits will be re
-0003a110: 7475 726e 6564 0a20 2020 2020 2020 203a  turned.        :
-0003a120: 7061 7261 6d20 696e 747c 4e6f 6e65 2070  param int|None p
-0003a130: 6172 616d 735b 2775 6e74 696c 275d 3a20  arams['until']: 
-0003a140: 7468 6520 6c61 7465 7374 2074 696d 6520  the latest time 
-0003a150: 696e 206d 7320 746f 2066 6574 6368 2064  in ms to fetch d
-0003a160: 6570 6f73 6974 7320 666f 720a 2020 2020  eposits for.    
-0003a170: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
-0003a180: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
-0003a190: 7472 616e 7361 6374 696f 6e20 7374 7275  transaction stru
-0003a1a0: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
-0003a1b0: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-0003a1c0: 3f69 643d 7472 616e 7361 6374 696f 6e2d  ?id=transaction-
-0003a1d0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-0003a1e0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0003a1f0: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-0003a200: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-0003a210: 2020 6375 7272 656e 6379 203d 204e 6f6e    currency = Non
-0003a220: 650a 2020 2020 2020 2020 7265 7370 6f6e  e.        respon
-0003a230: 7365 203d 204e 6f6e 650a 2020 2020 2020  se = None.      
-0003a240: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
-0003a250: 2020 2020 2020 206c 6567 616c 4d6f 6e65         legalMone
-0003a260: 7920 3d20 7365 6c66 2e73 6166 655f 7661  y = self.safe_va
-0003a270: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
-0003a280: 2c20 276c 6567 616c 4d6f 6e65 7927 2c20  , 'legalMoney', 
-0003a290: 7b7d 290a 2020 2020 2020 2020 6669 6174  {}).        fiat
-0003a2a0: 4f6e 6c79 203d 2073 656c 662e 7361 6665  Only = self.safe
-0003a2b0: 5f76 616c 7565 2870 6172 616d 732c 2027  _value(params, '
-0003a2c0: 6669 6174 272c 2046 616c 7365 290a 2020  fiat', False).  
-0003a2d0: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
-0003a2e0: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-0003a2f0: 2027 6669 6174 4f6e 6c79 2729 0a20 2020   'fiatOnly').   
-0003a300: 2020 2020 2075 6e74 696c 203d 2073 656c       until = sel
-0003a310: 662e 7361 6665 5f69 6e74 6567 6572 2870  f.safe_integer(p
-0003a320: 6172 616d 732c 2027 756e 7469 6c27 290a  arams, 'until').
-0003a330: 2020 2020 2020 2020 6966 2066 6961 744f          if fiatO
-0003a340: 6e6c 7920 6f72 2028 636f 6465 2069 6e20  nly or (code in 
-0003a350: 6c65 6761 6c4d 6f6e 6579 293a 0a20 2020  legalMoney):.   
-0003a360: 2020 2020 2020 2020 2069 6620 636f 6465           if code
-0003a370: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0003a380: 2020 2020 2020 2020 2020 2020 2020 6375                cu
-0003a390: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-0003a3a0: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-0003a3b0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003a3c0: 5b27 7472 616e 7361 6374 696f 6e54 7970  ['transactionTyp
-0003a3d0: 6527 5d20 3d20 300a 2020 2020 2020 2020  e'] = 0.        
-0003a3e0: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
-0003a3f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0003a400: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003a410: 745b 2762 6567 696e 5469 6d65 275d 203d  t['beginTime'] =
-0003a420: 2073 696e 6365 0a20 2020 2020 2020 2020   since.         
-0003a430: 2020 2069 6620 756e 7469 6c20 6973 206e     if until is n
-0003a440: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0003a450: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003a460: 5b27 656e 6454 696d 6527 5d20 3d20 756e  ['endTime'] = un
-0003a470: 7469 6c0a 2020 2020 2020 2020 2020 2020  til.            
-0003a480: 7261 7720 3d20 6177 6169 7420 7365 6c66  raw = await self
-0003a490: 2e73 6170 6947 6574 4669 6174 4f72 6465  .sapiGetFiatOrde
-0003a4a0: 7273 2873 656c 662e 6578 7465 6e64 2872  rs(self.extend(r
-0003a4b0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-0003a4c0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-0003a4d0: 706f 6e73 6520 3d20 7365 6c66 2e73 6166  ponse = self.saf
-0003a4e0: 655f 7661 6c75 6528 7261 772c 2027 6461  e_value(raw, 'da
-0003a4f0: 7461 2729 0a20 2020 2020 2020 2020 2020  ta').           
-0003a500: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0003a510: 2020 2020 2023 2020 2020 2020 2022 636f       #       "co
-0003a520: 6465 223a 2022 3030 3030 3030 222c 0a20  de": "000000",. 
-0003a530: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003a540: 2020 2022 6d65 7373 6167 6522 3a20 2273     "message": "s
-0003a550: 7563 6365 7373 222c 0a20 2020 2020 2020  uccess",.       
-0003a560: 2020 2020 2023 2020 2020 2020 2022 6461       #       "da
-0003a570: 7461 223a 205b 0a20 2020 2020 2020 2020  ta": [.         
-0003a580: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
-0003a590: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003a5a0: 2020 2020 2020 2022 6f72 6465 724e 6f22         "orderNo"
-0003a5b0: 3a20 2232 3563 6564 3337 3037 3563 3134  : "25ced37075c14
-0003a5c0: 3730 6261 3839 3339 6430 6466 3233 3136  70ba8939d0df2316
-0003a5d0: 6532 3322 2c0a 2020 2020 2020 2020 2020  e23",.          
-0003a5e0: 2020 2320 2020 2020 2020 2020 2020 2266    #           "f
-0003a5f0: 6961 7443 7572 7265 6e63 7922 3a20 2245  iatCurrency": "E
-0003a600: 5552 222c 0a20 2020 2020 2020 2020 2020  UR",.           
-0003a610: 2023 2020 2020 2020 2020 2020 2022 696e   #           "in
-0003a620: 6469 6361 7465 6441 6d6f 756e 7422 3a20  dicatedAmount": 
-0003a630: 2231 352e 3030 222c 0a20 2020 2020 2020  "15.00",.       
-0003a640: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003a650: 2022 616d 6f75 6e74 223a 2022 3135 2e30   "amount": "15.0
-0003a660: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
-0003a670: 2320 2020 2020 2020 2020 2020 2274 6f74  #           "tot
-0003a680: 616c 4665 6522 3a20 2230 2e30 3022 2c0a  alFee": "0.00",.
-0003a690: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003a6a0: 2020 2020 2020 2020 226d 6574 686f 6422          "method"
-0003a6b0: 3a20 2263 6172 6422 2c0a 2020 2020 2020  : "card",.      
-0003a6c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003a6d0: 2020 2273 7461 7475 7322 3a20 2246 6169    "status": "Fai
-0003a6e0: 6c65 6422 2c0a 2020 2020 2020 2020 2020  led",.          
-0003a6f0: 2020 2320 2020 2020 2020 2020 2020 2263    #           "c
-0003a700: 7265 6174 6554 696d 6522 3a20 3136 3237  reateTime": 1627
-0003a710: 3530 3130 3236 3030 302c 0a20 2020 2020  501026000,.     
-0003a720: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003a730: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
-0003a740: 2031 3632 3735 3031 3032 3730 3030 0a20   1627501027000. 
-0003a750: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003a760: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-0003a770: 2020 2023 2020 2020 2020 205d 2c0a 2020     #       ],.  
-0003a780: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003a790: 2020 2274 6f74 616c 223a 2031 2c0a 2020    "total": 1,.  
-0003a7a0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003a7b0: 2020 2273 7563 6365 7373 223a 2054 7275    "success": Tru
-0003a7c0: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
-0003a7d0: 2020 2020 7d0a 2020 2020 2020 2020 656c      }.        el
-0003a7e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003a7f0: 6966 2063 6f64 6520 6973 206e 6f74 204e  if code is not N
-0003a800: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0003a810: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-0003a820: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
-0003a830: 6465 290a 2020 2020 2020 2020 2020 2020  de).            
-0003a840: 2020 2020 7265 7175 6573 745b 2763 6f69      request['coi
-0003a850: 6e27 5d20 3d20 6375 7272 656e 6379 5b27  n'] = currency['
-0003a860: 6964 275d 0a20 2020 2020 2020 2020 2020  id'].           
-0003a870: 2069 6620 7369 6e63 6520 6973 206e 6f74   if since is not
-0003a880: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0003a890: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003a8a0: 7374 6172 7454 696d 6527 5d20 3d20 7369  startTime'] = si
-0003a8b0: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
-0003a8c0: 2020 2020 2320 6d61 7820 3320 6d6f 6e74      # max 3 mont
-0003a8d0: 6873 2072 616e 6765 2068 7474 7073 3a2f  hs range https:/
-0003a8e0: 2f67 6974 6875 622e 636f 6d2f 6363 7874  /github.com/ccxt
-0003a8f0: 2f63 6378 742f 6973 7375 6573 2f36 3439  /ccxt/issues/649
-0003a900: 350a 2020 2020 2020 2020 2020 2020 2020  5.              
-0003a910: 2020 656e 6454 696d 6520 3d20 7365 6c66    endTime = self
-0003a920: 2e73 756d 2873 696e 6365 2c20 3737 3736  .sum(since, 7776
-0003a930: 3030 3030 3030 290a 2020 2020 2020 2020  000000).        
-0003a940: 2020 2020 2020 2020 6966 2075 6e74 696c          if until
-0003a950: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0003a960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a970: 2020 656e 6454 696d 6520 3d20 6d69 6e28    endTime = min(
-0003a980: 656e 6454 696d 652c 2075 6e74 696c 290a  endTime, until).
-0003a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a9a0: 7265 7175 6573 745b 2765 6e64 5469 6d65  request['endTime
-0003a9b0: 275d 203d 2065 6e64 5469 6d65 0a20 2020  '] = endTime.   
-0003a9c0: 2020 2020 2020 2020 2069 6620 6c69 6d69           if limi
-0003a9d0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-0003a9e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003a9f0: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
-0003aa00: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
-0003aa10: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-0003aa20: 7761 6974 2073 656c 662e 7361 7069 4765  wait self.sapiGe
-0003aa30: 7443 6170 6974 616c 4465 706f 7369 7448  tCapitalDepositH
-0003aa40: 6973 7265 6328 7365 6c66 2e65 7874 656e  isrec(self.exten
-0003aa50: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-0003aa60: 7329 290a 2020 2020 2020 2020 2020 2020  s)).            
-0003aa70: 2320 2020 2020 5b0a 2020 2020 2020 2020  #     [.        
-0003aa80: 2020 2020 2320 2020 2020 2020 7b0a 2020      #       {.  
-0003aa90: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003aaa0: 2020 2020 2261 6d6f 756e 7422 3a20 2230      "amount": "0
-0003aab0: 2e30 3138 3434 3438 3722 2c0a 2020 2020  .01844487",.    
-0003aac0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003aad0: 2020 2263 6f69 6e22 3a20 2242 4348 222c    "coin": "BCH",
-0003aae0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003aaf0: 2020 2020 2020 2022 6e65 7477 6f72 6b22         "network"
-0003ab00: 3a20 2242 4348 222c 0a20 2020 2020 2020  : "BCH",.       
-0003ab10: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003ab20: 7374 6174 7573 223a 2031 2c0a 2020 2020  status": 1,.    
-0003ab30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003ab40: 2020 2261 6464 7265 7373 223a 2022 314e    "address": "1N
-0003ab50: 5978 414a 6857 3232 3831 484b 314b 744a  YxAJhW2281HK1KtJ
-0003ab60: 6561 454e 4271 4865 7967 4138 3846 7a52  eaENBqHeygA88FzR
-0003ab70: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003ab80: 2020 2020 2020 2020 2022 6164 6472 6573           "addres
-0003ab90: 7354 6167 223a 2022 222c 0a20 2020 2020  sTag": "",.     
-0003aba0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003abb0: 2022 7478 4964 223a 2022 6261 6663 3539   "txId": "bafc59
-0003abc0: 3032 3530 3464 3635 3034 6130 3062 3764  02504d6504a00b7d
-0003abd0: 3033 3036 6134 3131 3534 6362 6631 6431  0306a41154cbf1d1
-0003abe0: 6237 3637 6162 3730 6633 6263 3232 3633  b767ab70f3bc2263
-0003abf0: 3237 3336 3235 3838 6166 222c 0a20 2020  27362588af",.   
-0003ac00: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003ac10: 2020 2022 696e 7365 7274 5469 6d65 223a     "insertTime":
-0003ac20: 2031 3631 3037 3834 3938 3030 3030 2c0a   1610784980000,.
-0003ac30: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003ac40: 2020 2020 2020 2274 7261 6e73 6665 7254        "transferT
-0003ac50: 7970 6522 3a20 302c 0a20 2020 2020 2020  ype": 0,.       
-0003ac60: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003ac70: 636f 6e66 6972 6d54 696d 6573 223a 2022  confirmTimes": "
-0003ac80: 322f 3222 0a20 2020 2020 2020 2020 2020  2/2".           
-0003ac90: 2023 2020 2020 2020 207d 2c0a 2020 2020   #       },.    
-0003aca0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003acb0: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
-0003acc0: 2020 2020 2020 2020 2261 6d6f 756e 7422          "amount"
-0003acd0: 3a20 2234 3530 3022 2c0a 2020 2020 2020  : "4500",.      
-0003ace0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003acf0: 2263 6f69 6e22 3a20 2255 5344 5422 2c0a  "coin": "USDT",.
-0003ad00: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003ad10: 2020 2020 2020 226e 6574 776f 726b 223a        "network":
-0003ad20: 2022 4253 4322 2c0a 2020 2020 2020 2020   "BSC",.        
-0003ad30: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-0003ad40: 7461 7475 7322 3a20 312c 0a20 2020 2020  tatus": 1,.     
-0003ad50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003ad60: 2022 6164 6472 6573 7322 3a20 2230 7863   "address": "0xc
-0003ad70: 3963 3932 3363 3837 3334 3763 6130 6633  9c923c87347ca0f3
-0003ad80: 3435 3164 3664 3330 3863 6538 3466 3639  451d6d308ce84f69
-0003ad90: 3162 3966 3530 3122 2c0a 2020 2020 2020  1b9f501",.      
-0003ada0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003adb0: 2261 6464 7265 7373 5461 6722 3a20 2222  "addressTag": ""
-0003adc0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-0003add0: 2020 2020 2020 2020 2274 7849 6422 3a20          "txId": 
-0003ade0: 2249 6e74 6572 6e61 6c20 7472 616e 7366  "Internal transf
-0003adf0: 6572 2035 3133 3736 3632 3739 3031 222c  er 51376627901",
-0003ae00: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003ae10: 2020 2020 2020 2022 696e 7365 7274 5469         "insertTi
-0003ae20: 6d65 223a 2031 3631 3833 3934 3338 3130  me": 16183943810
-0003ae30: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
-0003ae40: 2320 2020 2020 2020 2020 2274 7261 6e73  #         "trans
-0003ae50: 6665 7254 7970 6522 3a20 312c 0a20 2020  ferType": 1,.   
-0003ae60: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003ae70: 2020 2022 636f 6e66 6972 6d54 696d 6573     "confirmTimes
-0003ae80: 223a 2022 312f 3135 220a 2020 2020 2020  ": "1/15".      
-0003ae90: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-0003aea0: 2020 2020 2020 2020 2020 2320 2020 5d0a            #   ].
-0003aeb0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-0003aec0: 2072 616e 6765 2830 2c20 6c65 6e28 7265   range(0, len(re
-0003aed0: 7370 6f6e 7365 2929 3a0a 2020 2020 2020  sponse)):.      
-0003aee0: 2020 2020 2020 7265 7370 6f6e 7365 5b69        response[i
-0003aef0: 5d5b 2774 7970 6527 5d20 3d20 2764 6570  ]['type'] = 'dep
-0003af00: 6f73 6974 270a 2020 2020 2020 2020 7265  osit'.        re
-0003af10: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-0003af20: 7472 616e 7361 6374 696f 6e73 2872 6573  transactions(res
-0003af30: 706f 6e73 652c 2063 7572 7265 6e63 792c  ponse, currency,
-0003af40: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
-0003af50: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
-0003af60: 7463 685f 7769 7468 6472 6177 616c 7328  tch_withdrawals(
-0003af70: 7365 6c66 2c20 636f 6465 3a20 4f70 7469  self, code: Opti
-0003af80: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
-0003af90: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
-0003afa0: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
-0003afb0: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
-0003afc0: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
-0003afd0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-0003afe0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-0003aff0: 6820 616c 6c20 7769 7468 6472 6177 616c  h all withdrawal
-0003b000: 7320 6d61 6465 2066 726f 6d20 616e 2061  s made from an a
-0003b010: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
-0003b020: 7061 7261 6d20 7374 727c 4e6f 6e65 2063  param str|None c
-0003b030: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-0003b040: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-0003b050: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-0003b060: 6e65 2073 696e 6365 3a20 7468 6520 6561  ne since: the ea
-0003b070: 726c 6965 7374 2074 696d 6520 696e 206d  rliest time in m
-0003b080: 7320 746f 2066 6574 6368 2077 6974 6864  s to fetch withd
-0003b090: 7261 7761 6c73 2066 6f72 0a20 2020 2020  rawals for.     
-0003b0a0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-0003b0b0: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
-0003b0c0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
-0003b0d0: 7769 7468 6472 6177 616c 7320 7374 7275  withdrawals stru
-0003b0e0: 6374 7572 6573 2074 6f20 7265 7472 6965  ctures to retrie
-0003b0f0: 7665 0a20 2020 2020 2020 203a 7061 7261  ve.        :para
-0003b100: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-0003b110: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-0003b120: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-0003b130: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
-0003b140: 6f69 6e74 0a20 2020 2020 2020 203a 7061  oint.        :pa
-0003b150: 7261 6d20 626f 6f6c 2070 6172 616d 735b  ram bool params[
-0003b160: 2766 6961 7427 5d3a 2069 6620 5472 7565  'fiat']: if True
-0003b170: 2c20 6f6e 6c79 2066 6961 7420 7769 7468  , only fiat with
-0003b180: 6472 6177 616c 7320 7769 6c6c 2062 6520  drawals will be 
-0003b190: 7265 7475 726e 6564 0a20 2020 2020 2020  returned.       
-0003b1a0: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
-0003b1b0: 3a20 6120 6c69 7374 206f 6620 6074 7261  : a list of `tra
-0003b1c0: 6e73 6163 7469 6f6e 2073 7472 7563 7475  nsaction structu
-0003b1d0: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-0003b1e0: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-0003b1f0: 3d74 7261 6e73 6163 7469 6f6e 2d73 7472  =transaction-str
-0003b200: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-0003b210: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
-0003b220: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
-0003b230: 6b65 7473 2829 0a20 2020 2020 2020 206c  kets().        l
-0003b240: 6567 616c 4d6f 6e65 7920 3d20 7365 6c66  egalMoney = self
-0003b250: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
-0003b260: 2e6f 7074 696f 6e73 2c20 276c 6567 616c  .options, 'legal
-0003b270: 4d6f 6e65 7927 2c20 7b7d 290a 2020 2020  Money', {}).    
-0003b280: 2020 2020 6669 6174 4f6e 6c79 203d 2073      fiatOnly = s
-0003b290: 656c 662e 7361 6665 5f76 616c 7565 2870  elf.safe_value(p
-0003b2a0: 6172 616d 732c 2027 6669 6174 272c 2046  arams, 'fiat', F
-0003b2b0: 616c 7365 290a 2020 2020 2020 2020 7061  alse).        pa
-0003b2c0: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-0003b2d0: 2870 6172 616d 732c 2027 6669 6174 4f6e  (params, 'fiatOn
-0003b2e0: 6c79 2729 0a20 2020 2020 2020 2072 6571  ly').        req
-0003b2f0: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
-0003b300: 2020 7265 7370 6f6e 7365 203d 204e 6f6e    response = Non
-0003b310: 650a 2020 2020 2020 2020 6375 7272 656e  e.        curren
-0003b320: 6379 203d 204e 6f6e 650a 2020 2020 2020  cy = None.      
-0003b330: 2020 6966 2066 6961 744f 6e6c 7920 6f72    if fiatOnly or
-0003b340: 2028 636f 6465 2069 6e20 6c65 6761 6c4d   (code in legalM
-0003b350: 6f6e 6579 293a 0a20 2020 2020 2020 2020  oney):.         
-0003b360: 2020 2069 6620 636f 6465 2069 7320 6e6f     if code is no
-0003b370: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0003b380: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-0003b390: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
-0003b3a0: 2863 6f64 6529 0a20 2020 2020 2020 2020  (code).         
-0003b3b0: 2020 2072 6571 7565 7374 5b27 7472 616e     request['tran
-0003b3c0: 7361 6374 696f 6e54 7970 6527 5d20 3d20  sactionType'] = 
-0003b3d0: 310a 2020 2020 2020 2020 2020 2020 6966  1.            if
-0003b3e0: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
-0003b3f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0003b400: 2020 2020 7265 7175 6573 745b 2762 6567      request['beg
-0003b410: 696e 5469 6d65 275d 203d 2073 696e 6365  inTime'] = since
-0003b420: 0a20 2020 2020 2020 2020 2020 2072 6177  .            raw
-0003b430: 203d 2061 7761 6974 2073 656c 662e 7361   = await self.sa
-0003b440: 7069 4765 7446 6961 744f 7264 6572 7328  piGetFiatOrders(
-0003b450: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-0003b460: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-0003b470: 2020 2020 2020 2020 2020 7265 7370 6f6e            respon
-0003b480: 7365 203d 2073 656c 662e 7361 6665 5f76  se = self.safe_v
-0003b490: 616c 7565 2872 6177 2c20 2764 6174 6127  alue(raw, 'data'
-0003b4a0: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-0003b4b0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-0003b4c0: 2020 2320 2020 2020 2020 2263 6f64 6522    #       "code"
-0003b4d0: 3a20 2230 3030 3030 3022 2c0a 2020 2020  : "000000",.    
-0003b4e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003b4f0: 226d 6573 7361 6765 223a 2022 7375 6363  "message": "succ
-0003b500: 6573 7322 2c0a 2020 2020 2020 2020 2020  ess",.          
-0003b510: 2020 2320 2020 2020 2020 2264 6174 6122    #       "data"
-0003b520: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
-0003b530: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
-0003b540: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003b550: 2020 2020 226f 7264 6572 4e6f 223a 2022      "orderNo": "
-0003b560: 434a 5737 3036 3435 3232 3636 3131 3531  CJW7064522661151
-0003b570: 3730 3330 3422 2c0a 2020 2020 2020 2020  70304",.        
-0003b580: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003b590: 2266 6961 7443 7572 7265 6e63 7922 3a20  "fiatCurrency": 
-0003b5a0: 2247 4250 222c 0a20 2020 2020 2020 2020  "GBP",.         
-0003b5b0: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
-0003b5c0: 696e 6469 6361 7465 6441 6d6f 756e 7422  indicatedAmount"
-0003b5d0: 3a20 2231 3030 3031 2e35 3022 2c0a 2020  : "10001.50",.  
-0003b5e0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003b5f0: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0003b600: 2231 3030 2e30 3022 2c0a 2020 2020 2020  "100.00",.      
-0003b610: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003b620: 2020 2274 6f74 616c 4665 6522 3a20 2231    "totalFee": "1
-0003b630: 2e35 3022 2c0a 2020 2020 2020 2020 2020  .50",.          
-0003b640: 2020 2320 2020 2020 2020 2020 2020 226d    #           "m
-0003b650: 6574 686f 6422 3a20 2262 616e 6b20 7472  ethod": "bank tr
-0003b660: 616e 7366 6572 222c 0a20 2020 2020 2020  ansfer",.       
-0003b670: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003b680: 2022 7374 6174 7573 223a 2022 5375 6363   "status": "Succ
-0003b690: 6573 7366 756c 222c 0a20 2020 2020 2020  essful",.       
-0003b6a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003b6b0: 2022 6372 6561 7465 5469 6d65 223a 2031   "createTime": 1
-0003b6c0: 3632 3030 3337 3734 3530 3030 2c0a 2020  620037745000,.  
-0003b6d0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003b6e0: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
-0003b6f0: 6522 3a20 3136 3230 3033 3834 3830 3030  e": 162003848000
-0003b700: 300a 2020 2020 2020 2020 2020 2020 2320  0.            # 
-0003b710: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-0003b720: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003b730: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
-0003b740: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0003b750: 724e 6f22 3a20 2243 4a57 3730 3632 3837  rNo": "CJW706287
-0003b760: 3439 3237 3831 3839 3135 3834 222c 0a20  492781891584",. 
-0003b770: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003b780: 2020 2020 2020 2022 6669 6174 4375 7272         "fiatCurr
-0003b790: 656e 6379 223a 2022 4742 5022 2c0a 2020  ency": "GBP",.  
-0003b7a0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003b7b0: 2020 2020 2020 2269 6e64 6963 6174 6564        "indicated
-0003b7c0: 416d 6f75 6e74 223a 2022 3130 3030 312e  Amount": "10001.
-0003b7d0: 3530 222c 0a20 2020 2020 2020 2020 2020  50",.           
-0003b7e0: 2023 2020 2020 2020 2020 2020 2022 616d   #           "am
-0003b7f0: 6f75 6e74 223a 2022 3130 302e 3030 222c  ount": "100.00",
-0003b800: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003b810: 2020 2020 2020 2020 2022 746f 7461 6c46           "totalF
-0003b820: 6565 223a 2022 312e 3530 222c 0a20 2020  ee": "1.50",.   
-0003b830: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003b840: 2020 2020 2022 6d65 7468 6f64 223a 2022       "method": "
-0003b850: 6261 6e6b 2074 7261 6e73 6665 7222 2c0a  bank transfer",.
-0003b860: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003b870: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
-0003b880: 3a20 2253 7563 6365 7373 6675 6c22 2c0a  : "Successful",.
-0003b890: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003b8a0: 2020 2020 2020 2020 2263 7265 6174 6554          "createT
-0003b8b0: 696d 6522 3a20 3136 3139 3939 3834 3630  ime": 1619998460
-0003b8c0: 3030 302c 0a20 2020 2020 2020 2020 2020  000,.           
-0003b8d0: 2023 2020 2020 2020 2020 2020 2022 7570   #           "up
-0003b8e0: 6461 7465 5469 6d65 223a 2031 3631 3939  dateTime": 16199
-0003b8f0: 3938 3832 3330 3030 0a20 2020 2020 2020  98823000.       
-0003b900: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0003b910: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003b920: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
-0003b930: 2020 2020 2320 2020 2020 2020 2274 6f74      #       "tot
-0003b940: 616c 223a 2033 392c 0a20 2020 2020 2020  al": 39,.       
-0003b950: 2020 2020 2023 2020 2020 2020 2022 7375       #       "su
-0003b960: 6363 6573 7322 3a20 5472 7565 0a20 2020  ccess": True.   
-0003b970: 2020 2020 2020 2020 2023 2020 2020 207d           #     }
-0003b980: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0003b990: 2020 2020 2020 2020 2020 2069 6620 636f             if co
-0003b9a0: 6465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  de is not None:.
-0003b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b9c0: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-0003b9d0: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
-0003b9e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003b9f0: 6571 7565 7374 5b27 636f 696e 275d 203d  equest['coin'] =
-0003ba00: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
-0003ba10: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0003ba20: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
-0003ba30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003ba40: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-0003ba50: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-0003ba60: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0003ba70: 206d 6178 2033 206d 6f6e 7468 7320 7261   max 3 months ra
-0003ba80: 6e67 6520 6874 7470 733a 2f2f 6769 7468  nge https://gith
-0003ba90: 7562 2e63 6f6d 2f63 6378 742f 6363 7874  ub.com/ccxt/ccxt
-0003baa0: 2f69 7373 7565 732f 3634 3935 0a20 2020  /issues/6495.   
-0003bab0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003bac0: 7565 7374 5b27 656e 6454 696d 6527 5d20  uest['endTime'] 
-0003bad0: 3d20 7365 6c66 2e73 756d 2873 696e 6365  = self.sum(since
-0003bae0: 2c20 3737 3736 3030 3030 3030 290a 2020  , 7776000000).  
-0003baf0: 2020 2020 2020 2020 2020 6966 206c 696d            if lim
-0003bb00: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
-0003bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bb20: 7265 7175 6573 745b 276c 696d 6974 275d  request['limit']
-0003bb30: 203d 206c 696d 6974 0a20 2020 2020 2020   = limit.       
-0003bb40: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0003bb50: 6177 6169 7420 7365 6c66 2e73 6170 6947  await self.sapiG
-0003bb60: 6574 4361 7069 7461 6c57 6974 6864 7261  etCapitalWithdra
-0003bb70: 7748 6973 746f 7279 2873 656c 662e 6578  wHistory(self.ex
-0003bb80: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-0003bb90: 7261 6d73 2929 0a20 2020 2020 2020 2020  rams)).         
-0003bba0: 2020 2023 2020 2020 205b 0a20 2020 2020     #     [.     
-0003bbb0: 2020 2020 2020 2023 2020 2020 2020 207b         #       {
-0003bbc0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003bbd0: 2020 2020 2020 2022 6964 223a 2022 3639         "id": "69
-0003bbe0: 6535 3361 6433 3035 3132 3462 3936 6234  e53ad305124b96b4
-0003bbf0: 3336 3638 6365 6162 3135 3861 3138 222c  3668ceab158a18",
-0003bc00: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003bc10: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-0003bc20: 2022 3238 2e37 3522 2c0a 2020 2020 2020   "28.75",.      
-0003bc30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bc40: 2274 7261 6e73 6163 7469 6f6e 4665 6522  "transactionFee"
-0003bc50: 3a20 2230 2e32 3522 2c0a 2020 2020 2020  : "0.25",.      
-0003bc60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bc70: 2263 6f69 6e22 3a20 2258 5250 222c 0a20  "coin": "XRP",. 
-0003bc80: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003bc90: 2020 2020 2022 7374 6174 7573 223a 2036       "status": 6
-0003bca0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-0003bcb0: 2020 2020 2020 2020 2261 6464 7265 7373          "address
-0003bcc0: 223a 2022 7233 5437 3566 754c 6a58 3531  ": "r3T75fuLjX51
-0003bcd0: 6d6d 6662 3553 6b31 6b4d 4e75 6842 6742  mmfb5Sk1kMNuhBgB
-0003bce0: 504a 736a 7a61 222c 0a20 2020 2020 2020  PJsjza",.       
-0003bcf0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003bd00: 6164 6472 6573 7354 6167 223a 2022 3130  addressTag": "10
-0003bd10: 3132 3836 3932 3222 2c0a 2020 2020 2020  1286922",.      
-0003bd20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bd30: 2274 7849 6422 3a20 2231 3941 3542 3234  "txId": "19A5B24
-0003bd40: 4544 3042 3639 3745 3446 3045 3943 4430  ED0B697E4F0E9CD0
-0003bd50: 3946 4342 3030 3731 3730 4136 3035 4243  9FCB007170A605BC
-0003bd60: 3933 4339 3238 3042 3945 3633 3739 4335  93C9280B9E6379C5
-0003bd70: 4536 4546 3046 3635 4122 2c0a 2020 2020  E6EF0F65A",.    
-0003bd80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003bd90: 2020 2261 7070 6c79 5469 6d65 223a 2022    "applyTime": "
-0003bda0: 3230 3231 2d30 342d 3135 2031 323a 3039  2021-04-15 12:09
-0003bdb0: 3a31 3622 2c0a 2020 2020 2020 2020 2020  :16",.          
-0003bdc0: 2020 2320 2020 2020 2020 2020 226e 6574    #         "net
-0003bdd0: 776f 726b 223a 2022 5852 5022 2c0a 2020  work": "XRP",.  
-0003bde0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003bdf0: 2020 2020 2274 7261 6e73 6665 7254 7970      "transferTyp
-0003be00: 6522 3a20 300a 2020 2020 2020 2020 2020  e": 0.          
-0003be10: 2020 2320 2020 2020 2020 7d2c 0a20 2020    #       },.   
-0003be20: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003be30: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
-0003be40: 2020 2020 2020 2020 2022 6964 223a 2022           "id": "
-0003be50: 3961 3637 3632 3862 3136 6261 3439 3838  9a67628b16ba4988
-0003be60: 6165 3230 6433 3239 3333 3366 3136 6263  ae20d329333f16bc
-0003be70: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003be80: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
-0003be90: 223a 2022 3230 222c 0a20 2020 2020 2020  ": "20",.       
-0003bea0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003beb0: 7472 616e 7361 6374 696f 6e46 6565 223a  transactionFee":
-0003bec0: 2022 3230 222c 0a20 2020 2020 2020 2020   "20",.         
-0003bed0: 2020 2023 2020 2020 2020 2020 2022 636f     #         "co
-0003bee0: 696e 223a 2022 5553 4454 222c 0a20 2020  in": "USDT",.   
-0003bef0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003bf00: 2020 2022 7374 6174 7573 223a 2036 2c0a     "status": 6,.
-0003bf10: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003bf20: 2020 2020 2020 2261 6464 7265 7373 223a        "address":
-0003bf30: 2022 3078 3041 4239 3931 3439 3731 3136   "0x0AB991497116
-0003bf40: 6637 4635 3533 3261 3463 3266 3466 3742  f7F5532a4c2f4f7B
-0003bf50: 3137 3834 3438 3836 3238 6531 222c 0a20  1784488628e1",. 
-0003bf60: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003bf70: 2020 2020 2022 7478 4964 223a 2022 3078       "txId": "0x
-0003bf80: 3737 6662 6632 6366 3263 3835 6235 3532  77fbf2cf2c85b552
-0003bf90: 6630 6664 3331 6664 3265 3536 6463 3935  f0fd31fd2e56dc95
-0003bfa0: 6330 3861 6461 6530 3331 6439 3666 3337  c08adae031d96f37
-0003bfb0: 3137 6438 6231 3765 3161 6561 3365 3436  17d8b17e1aea3e46
-0003bfc0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003bfd0: 2020 2020 2020 2020 2022 6170 706c 7954           "applyT
-0003bfe0: 696d 6522 3a20 2232 3032 312d 3034 2d31  ime": "2021-04-1
-0003bff0: 3520 3132 3a30 363a 3533 222c 0a20 2020  5 12:06:53",.   
-0003c000: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003c010: 2020 2022 6e65 7477 6f72 6b22 3a20 2245     "network": "E
-0003c020: 5448 222c 0a20 2020 2020 2020 2020 2020  TH",.           
-0003c030: 2023 2020 2020 2020 2020 2022 7472 616e   #         "tran
-0003c040: 7366 6572 5479 7065 223a 2030 0a20 2020  sferType": 0.   
-0003c050: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003c060: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
-0003c070: 2320 2020 2020 2020 7b0a 2020 2020 2020  #       {.      
-0003c080: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003c090: 2269 6422 3a20 2261 3763 6463 3061 6662  "id": "a7cdc0afb
-0003c0a0: 6661 3434 6134 3862 6432 3235 6339 6563  fa44a48bd225c9ec
-0003c0b0: 6539 3538 6665 3222 2c0a 2020 2020 2020  e958fe2",.      
-0003c0c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003c0d0: 2261 6d6f 756e 7422 3a20 2235 3122 2c0a  "amount": "51",.
-0003c0e0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003c0f0: 2020 2020 2020 2274 7261 6e73 6163 7469        "transacti
-0003c100: 6f6e 4665 6522 3a20 2231 222c 0a20 2020  onFee": "1",.   
-0003c110: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003c120: 2020 2022 636f 696e 223a 2022 5553 4454     "coin": "USDT
-0003c130: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003c140: 2020 2020 2020 2020 2022 7374 6174 7573           "status
-0003c150: 223a 2036 2c0a 2020 2020 2020 2020 2020  ": 6,.          
-0003c160: 2020 2320 2020 2020 2020 2020 2261 6464    #         "add
-0003c170: 7265 7373 223a 2022 5459 446d 7475 574c  ress": "TYDmtuWL
-0003c180: 3862 7379 6a76 6361 7555 5465 7270 6659  8bsyjvcauUTerpfY
-0003c190: 7956 6846 7442 6a71 796f 222c 0a20 2020  yVhFtBjqyo",.   
-0003c1a0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003c1b0: 2020 2022 7478 4964 223a 2022 3136 3861     "txId": "168a
-0003c1c0: 3735 3131 3262 6365 3663 6562 3438 3233  75112bce6ceb4823
-0003c1d0: 6336 3637 3236 6164 3437 3632 3061 6433  c66726ad47620ad3
-0003c1e0: 3332 6536 3966 6539 3264 3963 6238 6365  32e69fe92d9cb8ce
-0003c1f0: 6237 3630 3233 6639 6130 3238 222c 0a20  b76023f9a028",. 
-0003c200: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003c210: 2020 2020 2022 6170 706c 7954 696d 6522       "applyTime"
-0003c220: 3a20 2232 3032 312d 3034 2d31 3320 3132  : "2021-04-13 12
-0003c230: 3a34 363a 3539 222c 0a20 2020 2020 2020  :46:59",.       
-0003c240: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003c250: 6e65 7477 6f72 6b22 3a20 2254 5258 222c  network": "TRX",
-0003c260: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003c270: 2020 2020 2020 2022 7472 616e 7366 6572         "transfer
-0003c280: 5479 7065 223a 2030 0a20 2020 2020 2020  Type": 0.       
-0003c290: 2020 2020 2023 2020 2020 2020 207d 0a20       #       }. 
-0003c2a0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003c2b0: 205d 0a20 2020 2020 2020 2066 6f72 2069   ].        for i
-0003c2c0: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
-0003c2d0: 2872 6573 706f 6e73 6529 293a 0a20 2020  (response)):.   
-0003c2e0: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
-0003c2f0: 655b 695d 5b27 7479 7065 275d 203d 2027  e[i]['type'] = '
-0003c300: 7769 7468 6472 6177 616c 270a 2020 2020  withdrawal'.    
-0003c310: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0003c320: 7061 7273 655f 7472 616e 7361 6374 696f  parse_transactio
-0003c330: 6e73 2872 6573 706f 6e73 652c 2063 7572  ns(response, cur
-0003c340: 7265 6e63 792c 2073 696e 6365 2c20 6c69  rency, since, li
-0003c350: 6d69 7429 0a0a 2020 2020 6465 6620 7061  mit)..    def pa
-0003c360: 7273 655f 7472 616e 7361 6374 696f 6e5f  rse_transaction_
-0003c370: 7374 6174 7573 5f62 795f 7479 7065 2873  status_by_type(s
-0003c380: 656c 662c 2073 7461 7475 732c 2074 7970  elf, status, typ
-0003c390: 653d 4e6f 6e65 293a 0a20 2020 2020 2020  e=None):.       
-0003c3a0: 2073 7461 7475 7365 7342 7954 7970 6520   statusesByType 
-0003c3b0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0003c3c0: 2764 6570 6f73 6974 273a 207b 0a20 2020  'deposit': {.   
-0003c3d0: 2020 2020 2020 2020 2020 2020 2027 3027               '0'
-0003c3e0: 3a20 2770 656e 6469 6e67 272c 0a20 2020  : 'pending',.   
-0003c3f0: 2020 2020 2020 2020 2020 2020 2027 3127               '1'
-0003c400: 3a20 276f 6b27 2c0a 2020 2020 2020 2020  : 'ok',.        
-0003c410: 2020 2020 2020 2020 2736 273a 2027 6f6b          '6': 'ok
-0003c420: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0003c430: 2020 2023 2046 6961 740a 2020 2020 2020     # Fiat.      
-0003c440: 2020 2020 2020 2020 2020 2320 5072 6f63            # Proc
-0003c450: 6573 7369 6e67 2c20 4661 696c 6564 2c20  essing, Failed, 
-0003c460: 5375 6363 6573 7366 756c 2c20 4669 6e69  Successful, Fini
-0003c470: 7368 6564 2c20 5265 6675 6e64 696e 672c  shed, Refunding,
-0003c480: 2052 6566 756e 6465 642c 2052 6566 756e   Refunded, Refun
-0003c490: 6420 4661 696c 6564 2c20 4f72 6465 7220  d Failed, Order 
-0003c4a0: 5061 7274 6961 6c20 6372 6564 6974 2053  Partial credit S
-0003c4b0: 746f 7070 6564 0a20 2020 2020 2020 2020  topped.         
-0003c4c0: 2020 2020 2020 2027 5072 6f63 6573 7369         'Processi
-0003c4d0: 6e67 273a 2027 7065 6e64 696e 6727 2c0a  ng': 'pending',.
-0003c4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c4f0: 2746 6169 6c65 6427 3a20 2766 6169 6c65  'Failed': 'faile
-0003c500: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-0003c510: 2020 2020 2753 7563 6365 7373 6675 6c27      'Successful'
-0003c520: 3a20 276f 6b27 2c0a 2020 2020 2020 2020  : 'ok',.        
-0003c530: 2020 2020 2020 2020 2752 6566 756e 6469          'Refundi
-0003c540: 6e67 273a 2027 6361 6e63 656c 6564 272c  ng': 'canceled',
-0003c550: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003c560: 2027 5265 6675 6e64 6564 273a 2027 6361   'Refunded': 'ca
-0003c570: 6e63 656c 6564 272c 0a20 2020 2020 2020  nceled',.       
-0003c580: 2020 2020 2020 2020 2027 5265 6675 6e64           'Refund
-0003c590: 2046 6169 6c65 6427 3a20 2766 6169 6c65   Failed': 'faile
-0003c5a0: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-0003c5b0: 7d2c 0a20 2020 2020 2020 2020 2020 2027  },.            '
-0003c5c0: 7769 7468 6472 6177 616c 273a 207b 0a20  withdrawal': {. 
-0003c5d0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0003c5e0: 3027 3a20 2770 656e 6469 6e67 272c 2020  0': 'pending',  
-0003c5f0: 2320 456d 6169 6c20 5365 6e74 0a20 2020  # Email Sent.   
-0003c600: 2020 2020 2020 2020 2020 2020 2027 3127               '1'
-0003c610: 3a20 2763 616e 6365 6c65 6427 2c20 2023  : 'canceled',  #
-0003c620: 2043 616e 6365 6c6c 6564 2864 6966 6665   Cancelled(diffe
-0003c630: 7265 6e74 2066 726f 6d20 3120 3d20 6f6b  rent from 1 = ok
-0003c640: 2069 6e20 6465 706f 7369 7473 290a 2020   in deposits).  
-0003c650: 2020 2020 2020 2020 2020 2020 2020 2732                '2
-0003c660: 273a 2027 7065 6e64 696e 6727 2c20 2023  ': 'pending',  #
-0003c670: 2041 7761 6974 696e 6720 4170 7072 6f76   Awaiting Approv
-0003c680: 616c 0a20 2020 2020 2020 2020 2020 2020  al.             
-0003c690: 2020 2027 3327 3a20 2766 6169 6c65 6427     '3': 'failed'
-0003c6a0: 2c20 2023 2052 656a 6563 7465 640a 2020  ,  # Rejected.  
-0003c6b0: 2020 2020 2020 2020 2020 2020 2020 2734                '4
-0003c6c0: 273a 2027 7065 6e64 696e 6727 2c20 2023  ': 'pending',  #
-0003c6d0: 2050 726f 6365 7373 696e 670a 2020 2020   Processing.    
-0003c6e0: 2020 2020 2020 2020 2020 2020 2735 273a              '5':
-0003c6f0: 2027 6661 696c 6564 272c 2020 2320 4661   'failed',  # Fa
-0003c700: 696c 7572 650a 2020 2020 2020 2020 2020  ilure.          
-0003c710: 2020 2020 2020 2736 273a 2027 6f6b 272c        '6': 'ok',
-0003c720: 2020 2320 436f 6d70 6c65 7465 640a 2020    # Completed.  
-0003c730: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0003c740: 4669 6174 0a20 2020 2020 2020 2020 2020  Fiat.           
-0003c750: 2020 2020 2023 2050 726f 6365 7373 696e       # Processin
-0003c760: 672c 2046 6169 6c65 642c 2053 7563 6365  g, Failed, Succe
-0003c770: 7373 6675 6c2c 2046 696e 6973 6865 642c  ssful, Finished,
-0003c780: 2052 6566 756e 6469 6e67 2c20 5265 6675   Refunding, Refu
-0003c790: 6e64 6564 2c20 5265 6675 6e64 2046 6169  nded, Refund Fai
-0003c7a0: 6c65 642c 204f 7264 6572 2050 6172 7469  led, Order Parti
-0003c7b0: 616c 2063 7265 6469 7420 5374 6f70 7065  al credit Stoppe
-0003c7c0: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-0003c7d0: 2020 2750 726f 6365 7373 696e 6727 3a20    'Processing': 
-0003c7e0: 2770 656e 6469 6e67 272c 0a20 2020 2020  'pending',.     
-0003c7f0: 2020 2020 2020 2020 2020 2027 4661 696c             'Fail
-0003c800: 6564 273a 2027 6661 696c 6564 272c 0a20  ed': 'failed',. 
-0003c810: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0003c820: 5375 6363 6573 7366 756c 273a 2027 6f6b  Successful': 'ok
-0003c830: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0003c840: 2020 2027 5265 6675 6e64 696e 6727 3a20     'Refunding': 
-0003c850: 2763 616e 6365 6c65 6427 2c0a 2020 2020  'canceled',.    
-0003c860: 2020 2020 2020 2020 2020 2020 2752 6566              'Ref
-0003c870: 756e 6465 6427 3a20 2763 616e 6365 6c65  unded': 'cancele
-0003c880: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-0003c890: 2020 2020 2752 6566 756e 6420 4661 696c      'Refund Fail
-0003c8a0: 6564 273a 2027 6661 696c 6564 272c 0a20  ed': 'failed',. 
-0003c8b0: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-0003c8c0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0003c8d0: 7374 6174 7573 6573 203d 2073 656c 662e  statuses = self.
-0003c8e0: 7361 6665 5f76 616c 7565 2873 7461 7475  safe_value(statu
-0003c8f0: 7365 7342 7954 7970 652c 2074 7970 652c  sesByType, type,
-0003c900: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
-0003c910: 7572 6e20 7365 6c66 2e73 6166 655f 7374  urn self.safe_st
-0003c920: 7269 6e67 2873 7461 7475 7365 732c 2073  ring(statuses, s
-0003c930: 7461 7475 732c 2073 7461 7475 7329 0a0a  tatus, status)..
-0003c940: 2020 2020 6465 6620 7061 7273 655f 7472      def parse_tr
-0003c950: 616e 7361 6374 696f 6e28 7365 6c66 2c20  ansaction(self, 
-0003c960: 7472 616e 7361 6374 696f 6e2c 2063 7572  transaction, cur
-0003c970: 7265 6e63 793d 4e6f 6e65 293a 0a20 2020  rency=None):.   
-0003c980: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0003c990: 2066 6574 6368 4465 706f 7369 7473 0a20   fetchDeposits. 
-0003c9a0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0003c9b0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0003c9c0: 2023 2020 2020 2020 2022 616d 6f75 6e74   #       "amount
-0003c9d0: 223a 2022 3435 3030 222c 0a20 2020 2020  ": "4500",.     
-0003c9e0: 2020 2023 2020 2020 2020 2022 636f 696e     #       "coin
-0003c9f0: 223a 2022 5553 4454 222c 0a20 2020 2020  ": "USDT",.     
-0003ca00: 2020 2023 2020 2020 2020 2022 6e65 7477     #       "netw
-0003ca10: 6f72 6b22 3a20 2242 5343 222c 0a20 2020  ork": "BSC",.   
-0003ca20: 2020 2020 2023 2020 2020 2020 2022 7374       #       "st
-0003ca30: 6174 7573 223a 2031 2c0a 2020 2020 2020  atus": 1,.      
-0003ca40: 2020 2320 2020 2020 2020 2261 6464 7265    #       "addre
-0003ca50: 7373 223a 2022 3078 6339 6339 3233 6338  ss": "0xc9c923c8
-0003ca60: 3733 3437 6361 3066 3334 3531 6436 6433  7347ca0f3451d6d3
-0003ca70: 3038 6365 3834 6636 3931 6239 6635 3031  08ce84f691b9f501
-0003ca80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003ca90: 2020 2022 6164 6472 6573 7354 6167 223a     "addressTag":
-0003caa0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-0003cab0: 2020 2020 2022 7478 4964 223a 2022 496e       "txId": "In
-0003cac0: 7465 726e 616c 2074 7261 6e73 6665 7220  ternal transfer 
-0003cad0: 3531 3337 3636 3237 3930 3122 2c0a 2020  51376627901",.  
-0003cae0: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
-0003caf0: 6e73 6572 7454 696d 6522 3a20 3136 3138  nsertTime": 1618
-0003cb00: 3339 3433 3831 3030 302c 0a20 2020 2020  394381000,.     
-0003cb10: 2020 2023 2020 2020 2020 2022 7472 616e     #       "tran
-0003cb20: 7366 6572 5479 7065 223a 2031 2c0a 2020  sferType": 1,.  
-0003cb30: 2020 2020 2020 2320 2020 2020 2020 2263        #       "c
-0003cb40: 6f6e 6669 726d 5469 6d65 7322 3a20 2231  onfirmTimes": "1
-0003cb50: 2f31 3522 0a20 2020 2020 2020 2023 2020  /15".        #  
-0003cb60: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-0003cb70: 2020 2020 2020 2023 2066 6574 6368 5769         # fetchWi
-0003cb80: 7468 6472 6177 616c 730a 2020 2020 2020  thdrawals.      
-0003cb90: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0003cba0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0003cbb0: 2020 2020 2269 6422 3a20 2236 3965 3533      "id": "69e53
-0003cbc0: 6164 3330 3531 3234 6239 3662 3433 3636  ad305124b96b4366
-0003cbd0: 3863 6561 6231 3538 6131 3822 2c0a 2020  8ceab158a18",.  
-0003cbe0: 2020 2020 2020 2320 2020 2020 2020 2261        #       "a
-0003cbf0: 6d6f 756e 7422 3a20 2232 382e 3735 222c  mount": "28.75",
-0003cc00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003cc10: 2022 7472 616e 7361 6374 696f 6e46 6565   "transactionFee
-0003cc20: 223a 2022 302e 3235 222c 0a20 2020 2020  ": "0.25",.     
-0003cc30: 2020 2023 2020 2020 2020 2022 636f 696e     #       "coin
-0003cc40: 223a 2022 5852 5022 2c0a 2020 2020 2020  ": "XRP",.      
-0003cc50: 2020 2320 2020 2020 2020 2273 7461 7475    #       "statu
-0003cc60: 7322 3a20 362c 0a20 2020 2020 2020 2023  s": 6,.        #
-0003cc70: 2020 2020 2020 2022 6164 6472 6573 7322         "address"
-0003cc80: 3a20 2272 3354 3735 6675 4c6a 5835 316d  : "r3T75fuLjX51m
-0003cc90: 6d66 6235 536b 316b 4d4e 7568 4267 4250  mfb5Sk1kMNuhBgBP
-0003cca0: 4a73 6a7a 6122 2c0a 2020 2020 2020 2020  Jsjza",.        
-0003ccb0: 2320 2020 2020 2020 2261 6464 7265 7373  #       "address
-0003ccc0: 5461 6722 3a20 2231 3031 3238 3639 3232  Tag": "101286922
-0003ccd0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003cce0: 2020 2022 7478 4964 223a 2022 3139 4135     "txId": "19A5
-0003ccf0: 4232 3445 4430 4236 3937 4534 4630 4539  B24ED0B697E4F0E9
-0003cd00: 4344 3039 4643 4230 3037 3137 3041 3630  CD09FCB007170A60
-0003cd10: 3542 4339 3343 3932 3830 4239 4536 3337  5BC93C9280B9E637
-0003cd20: 3943 3545 3645 4630 4636 3541 222c 0a20  9C5E6EF0F65A",. 
-0003cd30: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0003cd40: 6170 706c 7954 696d 6522 3a20 2232 3032  applyTime": "202
-0003cd50: 312d 3034 2d31 3520 3132 3a30 393a 3136  1-04-15 12:09:16
-0003cd60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003cd70: 2020 2022 6e65 7477 6f72 6b22 3a20 2258     "network": "X
-0003cd80: 5250 222c 0a20 2020 2020 2020 2023 2020  RP",.        #  
-0003cd90: 2020 2020 2022 7472 616e 7366 6572 5479       "transferTy
-0003cda0: 7065 223a 2030 0a20 2020 2020 2020 2023  pe": 0.        #
-0003cdb0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0003cdc0: 0a20 2020 2020 2020 2023 2066 6961 7420  .        # fiat 
-0003cdd0: 7472 616e 7361 6374 696f 6e0a 2020 2020  transaction.    
-0003cde0: 2020 2020 2320 7769 7468 6472 6177 0a20      # withdraw. 
-0003cdf0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0003ce00: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0003ce10: 6f72 6465 724e 6f22 3a20 2243 4a57 3638  orderNo": "CJW68
-0003ce20: 3438 3937 3535 3133 3937 3137 3132 3030  4897551397171200
-0003ce30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003ce40: 2020 2022 6669 6174 4375 7272 656e 6379     "fiatCurrency
-0003ce50: 223a 2022 4742 5022 2c0a 2020 2020 2020  ": "GBP",.      
-0003ce60: 2020 2320 2020 2020 2020 2269 6e64 6963    #       "indic
-0003ce70: 6174 6564 416d 6f75 6e74 223a 2022 3239  atedAmount": "29
-0003ce80: 2e39 3922 2c0a 2020 2020 2020 2020 2320  .99",.        # 
-0003ce90: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0003cea0: 2232 382e 3439 222c 0a20 2020 2020 2020  "28.49",.       
-0003ceb0: 2023 2020 2020 2020 2022 746f 7461 6c46   #       "totalF
-0003cec0: 6565 223a 2022 312e 3530 222c 0a20 2020  ee": "1.50",.   
-0003ced0: 2020 2020 2023 2020 2020 2020 2022 6d65       #       "me
-0003cee0: 7468 6f64 223a 2022 6261 6e6b 2074 7261  thod": "bank tra
-0003cef0: 6e73 6665 7222 2c0a 2020 2020 2020 2020  nsfer",.        
-0003cf00: 2320 2020 2020 2020 2273 7461 7475 7322  #       "status"
-0003cf10: 3a20 2253 7563 6365 7373 6675 6c22 2c0a  : "Successful",.
-0003cf20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003cf30: 2263 7265 6174 6554 696d 6522 3a20 3136  "createTime": 16
-0003cf40: 3134 3839 3837 3031 3030 302c 0a20 2020  14898701000,.   
-0003cf50: 2020 2020 2023 2020 2020 2020 2022 7570       #       "up
-0003cf60: 6461 7465 5469 6d65 223a 2031 3631 3438  dateTime": 16148
-0003cf70: 3938 3832 3030 3030 0a20 2020 2020 2020  98820000.       
-0003cf80: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-0003cf90: 2023 0a20 2020 2020 2020 2023 2064 6570   #.        # dep
-0003cfa0: 6f73 6974 0a20 2020 2020 2020 2023 2020  osit.        #  
-0003cfb0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0003cfc0: 2020 2020 2022 6f72 6465 724e 6f22 3a20       "orderNo": 
-0003cfd0: 2232 3563 6564 3337 3037 3563 3134 3730  "25ced37075c1470
-0003cfe0: 6261 3839 3339 6430 6466 3233 3136 6532  ba8939d0df2316e2
-0003cff0: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
-0003d000: 2020 2020 2266 6961 7443 7572 7265 6e63      "fiatCurrenc
-0003d010: 7922 3a20 2245 5552 222c 0a20 2020 2020  y": "EUR",.     
-0003d020: 2020 2023 2020 2020 2020 2022 7472 616e     #       "tran
-0003d030: 7361 6374 696f 6e54 7970 6522 3a20 302c  sactionType": 0,
-0003d040: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003d050: 2022 696e 6469 6361 7465 6441 6d6f 756e   "indicatedAmoun
-0003d060: 7422 3a20 2231 352e 3030 222c 0a20 2020  t": "15.00",.   
-0003d070: 2020 2020 2023 2020 2020 2020 2022 616d       #       "am
-0003d080: 6f75 6e74 223a 2022 3135 2e30 3022 2c0a  ount": "15.00",.
-0003d090: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003d0a0: 2274 6f74 616c 4665 6522 3a20 2230 2e30  "totalFee": "0.0
-0003d0b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0003d0c0: 2020 2020 226d 6574 686f 6422 3a20 2263      "method": "c
-0003d0d0: 6172 6422 2c0a 2020 2020 2020 2020 2320  ard",.        # 
-0003d0e0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
-0003d0f0: 2246 6169 6c65 6422 2c0a 2020 2020 2020  "Failed",.      
-0003d100: 2020 2320 2020 2020 2020 2263 7265 6174    #       "creat
-0003d110: 6554 696d 6522 3a20 2231 3632 3735 3031  eTime": "1627501
-0003d120: 3032 3630 3030 222c 0a20 2020 2020 2020  026000",.       
-0003d130: 2023 2020 2020 2020 2022 7570 6461 7465   #       "update
-0003d140: 5469 6d65 223a 2022 3136 3237 3530 3130  Time": "16275010
-0003d150: 3237 3030 3022 0a20 2020 2020 2020 2023  27000".        #
-0003d160: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0003d170: 0a20 2020 2020 2020 2023 2077 6974 6864  .        # withd
-0003d180: 7261 770a 2020 2020 2020 2020 230a 2020  raw.        #.  
-0003d190: 2020 2020 2020 2320 2020 207b 6964 3a20        #    {id: 
-0003d1a0: 2739 6136 3736 3238 6231 3662 6134 3938  '9a67628b16ba498
-0003d1b0: 3861 6532 3064 3332 3933 3333 6631 3662  8ae20d329333f16b
-0003d1c0: 6327 7d0a 2020 2020 2020 2020 230a 2020  c'}.        #.  
-0003d1d0: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
-0003d1e0: 7361 6665 5f73 7472 696e 675f 3228 7472  safe_string_2(tr
-0003d1f0: 616e 7361 6374 696f 6e2c 2027 6964 272c  ansaction, 'id',
-0003d200: 2027 6f72 6465 724e 6f27 290a 2020 2020   'orderNo').    
-0003d210: 2020 2020 6164 6472 6573 7320 3d20 7365      address = se
-0003d220: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
-0003d230: 7261 6e73 6163 7469 6f6e 2c20 2761 6464  ransaction, 'add
-0003d240: 7265 7373 2729 0a20 2020 2020 2020 2074  ress').        t
-0003d250: 6167 203d 2073 656c 662e 7361 6665 5f73  ag = self.safe_s
-0003d260: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
-0003d270: 6e2c 2027 6164 6472 6573 7354 6167 2729  n, 'addressTag')
-0003d280: 2020 2320 7365 7420 6275 7420 756e 7573    # set but unus
-0003d290: 6564 0a20 2020 2020 2020 2069 6620 7461  ed.        if ta
-0003d2a0: 6720 6973 206e 6f74 204e 6f6e 653a 0a20  g is not None:. 
-0003d2b0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-0003d2c0: 6e28 7461 6729 203c 2031 3a0a 2020 2020  n(tag) < 1:.    
-0003d2d0: 2020 2020 2020 2020 2020 2020 7461 6720              tag 
-0003d2e0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
-0003d2f0: 7869 6420 3d20 7365 6c66 2e73 6166 655f  xid = self.safe_
-0003d300: 7374 7269 6e67 2874 7261 6e73 6163 7469  string(transacti
-0003d310: 6f6e 2c20 2774 7849 6427 290a 2020 2020  on, 'txId').    
-0003d320: 2020 2020 6966 2028 7478 6964 2069 7320      if (txid is 
-0003d330: 6e6f 7420 4e6f 6e65 2920 616e 6420 2874  not None) and (t
-0003d340: 7869 642e 6669 6e64 2827 496e 7465 726e  xid.find('Intern
-0003d350: 616c 2074 7261 6e73 6665 7220 2729 203e  al transfer ') >
-0003d360: 3d20 3029 3a0a 2020 2020 2020 2020 2020  = 0):.          
-0003d370: 2020 7478 6964 203d 2074 7869 645b 3138    txid = txid[18
-0003d380: 3a5d 0a20 2020 2020 2020 2063 7572 7265  :].        curre
-0003d390: 6e63 7949 6420 3d20 7365 6c66 2e73 6166  ncyId = self.saf
-0003d3a0: 655f 7374 7269 6e67 5f32 2874 7261 6e73  e_string_2(trans
-0003d3b0: 6163 7469 6f6e 2c20 2763 6f69 6e27 2c20  action, 'coin', 
-0003d3c0: 2766 6961 7443 7572 7265 6e63 7927 290a  'fiatCurrency').
-0003d3d0: 2020 2020 2020 2020 636f 6465 203d 2073          code = s
-0003d3e0: 656c 662e 7361 6665 5f63 7572 7265 6e63  elf.safe_currenc
-0003d3f0: 795f 636f 6465 2863 7572 7265 6e63 7949  y_code(currencyI
-0003d400: 642c 2063 7572 7265 6e63 7929 0a20 2020  d, currency).   
-0003d410: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
-0003d420: 204e 6f6e 650a 2020 2020 2020 2020 7469   None.        ti
-0003d430: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
-0003d440: 6166 655f 696e 7465 6765 725f 3228 7472  afe_integer_2(tr
-0003d450: 616e 7361 6374 696f 6e2c 2027 696e 7365  ansaction, 'inse
-0003d460: 7274 5469 6d65 272c 2027 6372 6561 7465  rtTime', 'create
-0003d470: 5469 6d65 2729 0a20 2020 2020 2020 2069  Time').        i
-0003d480: 6620 7469 6d65 7374 616d 7020 6973 204e  f timestamp is N
-0003d490: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0003d4a0: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
-0003d4b0: 662e 7061 7273 6538 3630 3128 7365 6c66  f.parse8601(self
-0003d4c0: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
-0003d4d0: 6e73 6163 7469 6f6e 2c20 2761 7070 6c79  nsaction, 'apply
-0003d4e0: 5469 6d65 2729 290a 2020 2020 2020 2020  Time')).        
-0003d4f0: 7570 6461 7465 6420 3d20 7365 6c66 2e73  updated = self.s
-0003d500: 6166 655f 696e 7465 6765 725f 3228 7472  afe_integer_2(tr
-0003d510: 616e 7361 6374 696f 6e2c 2027 7375 6363  ansaction, 'succ
-0003d520: 6573 7354 696d 6527 2c20 2775 7064 6174  essTime', 'updat
-0003d530: 6554 696d 6527 290a 2020 2020 2020 2020  eTime').        
-0003d540: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
-0003d550: 5f73 7472 696e 6728 7472 616e 7361 6374  _string(transact
-0003d560: 696f 6e2c 2027 7479 7065 2729 0a20 2020  ion, 'type').   
-0003d570: 2020 2020 2069 6620 7479 7065 2069 7320       if type is 
-0003d580: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0003d590: 2020 7478 5479 7065 203d 2073 656c 662e    txType = self.
-0003d5a0: 7361 6665 5f73 7472 696e 6728 7472 616e  safe_string(tran
-0003d5b0: 7361 6374 696f 6e2c 2027 7472 616e 7361  saction, 'transa
-0003d5c0: 6374 696f 6e54 7970 6527 290a 2020 2020  ctionType').    
-0003d5d0: 2020 2020 2020 2020 6966 2074 7854 7970          if txTyp
-0003d5e0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0003d5f0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0003d600: 7970 6520 3d20 2764 6570 6f73 6974 2720  ype = 'deposit' 
-0003d610: 6966 2028 7478 5479 7065 203d 3d20 2730  if (txType == '0
-0003d620: 2729 2065 6c73 6520 2777 6974 6864 7261  ') else 'withdra
-0003d630: 7761 6c27 0a20 2020 2020 2020 2020 2020  wal'.           
-0003d640: 206c 6567 616c 4d6f 6e65 7943 7572 7265   legalMoneyCurre
-0003d650: 6e63 6965 7342 7949 6420 3d20 7365 6c66  nciesById = self
-0003d660: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
-0003d670: 2e6f 7074 696f 6e73 2c20 276c 6567 616c  .options, 'legal
-0003d680: 4d6f 6e65 7943 7572 7265 6e63 6965 7342  MoneyCurrenciesB
-0003d690: 7949 6427 290a 2020 2020 2020 2020 2020  yId').          
-0003d6a0: 2020 636f 6465 203d 2073 656c 662e 7361    code = self.sa
-0003d6b0: 6665 5f73 7472 696e 6728 6c65 6761 6c4d  fe_string(legalM
-0003d6c0: 6f6e 6579 4375 7272 656e 6369 6573 4279  oneyCurrenciesBy
-0003d6d0: 4964 2c20 636f 6465 2c20 636f 6465 290a  Id, code, code).
-0003d6e0: 2020 2020 2020 2020 7374 6174 7573 203d          status =
-0003d6f0: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
-0003d700: 7361 6374 696f 6e5f 7374 6174 7573 5f62  saction_status_b
-0003d710: 795f 7479 7065 2873 656c 662e 7361 6665  y_type(self.safe
-0003d720: 5f73 7472 696e 6728 7472 616e 7361 6374  _string(transact
-0003d730: 696f 6e2c 2027 7374 6174 7573 2729 2c20  ion, 'status'), 
-0003d740: 7479 7065 290a 2020 2020 2020 2020 616d  type).        am
-0003d750: 6f75 6e74 203d 2073 656c 662e 7361 6665  ount = self.safe
-0003d760: 5f6e 756d 6265 7228 7472 616e 7361 6374  _number(transact
-0003d770: 696f 6e2c 2027 616d 6f75 6e74 2729 0a20  ion, 'amount'). 
-0003d780: 2020 2020 2020 2066 6565 436f 7374 203d         feeCost =
-0003d790: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-0003d7a0: 725f 3228 7472 616e 7361 6374 696f 6e2c  r_2(transaction,
-0003d7b0: 2027 7472 616e 7361 6374 696f 6e46 6565   'transactionFee
-0003d7c0: 272c 2027 746f 7461 6c46 6565 2729 0a20  ', 'totalFee'). 
-0003d7d0: 2020 2020 2020 2066 6565 203d 204e 6f6e         fee = Non
-0003d7e0: 650a 2020 2020 2020 2020 6966 2066 6565  e.        if fee
-0003d7f0: 436f 7374 2069 7320 6e6f 7420 4e6f 6e65  Cost is not None
-0003d800: 3a0a 2020 2020 2020 2020 2020 2020 6665  :.            fe
-0003d810: 6520 3d20 7b27 6375 7272 656e 6379 273a  e = {'currency':
-0003d820: 2063 6f64 652c 2027 636f 7374 273a 2066   code, 'cost': f
-0003d830: 6565 436f 7374 7d0a 2020 2020 2020 2020  eeCost}.        
-0003d840: 696e 7465 726e 616c 203d 2073 656c 662e  internal = self.
-0003d850: 7361 6665 5f69 6e74 6567 6572 2874 7261  safe_integer(tra
-0003d860: 6e73 6163 7469 6f6e 2c20 2774 7261 6e73  nsaction, 'trans
-0003d870: 6665 7254 7970 6527 290a 2020 2020 2020  ferType').      
-0003d880: 2020 6966 2069 6e74 6572 6e61 6c20 6973    if internal is
-0003d890: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0003d8a0: 2020 2020 2020 2069 6e74 6572 6e61 6c20         internal 
-0003d8b0: 3d20 5472 7565 2069 6620 696e 7465 726e  = True if intern
-0003d8c0: 616c 2065 6c73 6520 4661 6c73 650a 2020  al else False.  
-0003d8d0: 2020 2020 2020 6e65 7477 6f72 6b20 3d20        network = 
-0003d8e0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003d8f0: 2874 7261 6e73 6163 7469 6f6e 2c20 276e  (transaction, 'n
-0003d900: 6574 776f 726b 2729 0a20 2020 2020 2020  etwork').       
-0003d910: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
-0003d920: 2020 2020 2020 2769 6e66 6f27 3a20 7472        'info': tr
-0003d930: 616e 7361 6374 696f 6e2c 0a20 2020 2020  ansaction,.     
-0003d940: 2020 2020 2020 2027 6964 273a 2069 642c         'id': id,
-0003d950: 0a20 2020 2020 2020 2020 2020 2027 7478  .            'tx
-0003d960: 6964 273a 2074 7869 642c 0a20 2020 2020  id': txid,.     
-0003d970: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
-0003d980: 7027 3a20 7469 6d65 7374 616d 702c 0a20  p': timestamp,. 
-0003d990: 2020 2020 2020 2020 2020 2027 6461 7465             'date
-0003d9a0: 7469 6d65 273a 2073 656c 662e 6973 6f38  time': self.iso8
-0003d9b0: 3630 3128 7469 6d65 7374 616d 7029 2c0a  601(timestamp),.
-0003d9c0: 2020 2020 2020 2020 2020 2020 276e 6574              'net
-0003d9d0: 776f 726b 273a 206e 6574 776f 726b 2c0a  work': network,.
-0003d9e0: 2020 2020 2020 2020 2020 2020 2761 6464              'add
-0003d9f0: 7265 7373 273a 2061 6464 7265 7373 2c0a  ress': address,.
-0003da00: 2020 2020 2020 2020 2020 2020 2761 6464              'add
-0003da10: 7265 7373 546f 273a 2061 6464 7265 7373  ressTo': address
-0003da20: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-0003da30: 6464 7265 7373 4672 6f6d 273a 204e 6f6e  ddressFrom': Non
-0003da40: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0003da50: 7461 6727 3a20 7461 672c 0a20 2020 2020  tag': tag,.     
-0003da60: 2020 2020 2020 2027 7461 6754 6f27 3a20         'tagTo': 
-0003da70: 7461 672c 0a20 2020 2020 2020 2020 2020  tag,.           
-0003da80: 2027 7461 6746 726f 6d27 3a20 4e6f 6e65   'tagFrom': None
-0003da90: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-0003daa0: 7970 6527 3a20 7479 7065 2c0a 2020 2020  ype': type,.    
-0003dab0: 2020 2020 2020 2020 2761 6d6f 756e 7427          'amount'
-0003dac0: 3a20 616d 6f75 6e74 2c0a 2020 2020 2020  : amount,.      
-0003dad0: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
-0003dae0: 3a20 636f 6465 2c0a 2020 2020 2020 2020  : code,.        
-0003daf0: 2020 2020 2773 7461 7475 7327 3a20 7374      'status': st
-0003db00: 6174 7573 2c0a 2020 2020 2020 2020 2020  atus,.          
-0003db10: 2020 2775 7064 6174 6564 273a 2075 7064    'updated': upd
-0003db20: 6174 6564 2c0a 2020 2020 2020 2020 2020  ated,.          
-0003db30: 2020 2769 6e74 6572 6e61 6c27 3a20 696e    'internal': in
-0003db40: 7465 726e 616c 2c0a 2020 2020 2020 2020  ternal,.        
-0003db50: 2020 2020 2766 6565 273a 2066 6565 2c0a      'fee': fee,.
-0003db60: 2020 2020 2020 2020 7d0a 0a20 2020 2064          }..    d
-0003db70: 6566 2070 6172 7365 5f74 7261 6e73 6665  ef parse_transfe
-0003db80: 725f 7374 6174 7573 2873 656c 662c 2073  r_status(self, s
-0003db90: 7461 7475 7329 3a0a 2020 2020 2020 2020  tatus):.        
-0003dba0: 7374 6174 7573 6573 203d 207b 0a20 2020  statuses = {.   
-0003dbb0: 2020 2020 2020 2020 2027 434f 4e46 4952           'CONFIR
-0003dbc0: 4d45 4427 3a20 276f 6b27 2c0a 2020 2020  MED': 'ok',.    
-0003dbd0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-0003dbe0: 7475 726e 2073 656c 662e 7361 6665 5f73  turn self.safe_s
-0003dbf0: 7472 696e 6728 7374 6174 7573 6573 2c20  tring(statuses, 
-0003dc00: 7374 6174 7573 2c20 7374 6174 7573 290a  status, status).
-0003dc10: 0a20 2020 2064 6566 2070 6172 7365 5f74  .    def parse_t
-0003dc20: 7261 6e73 6665 7228 7365 6c66 2c20 7472  ransfer(self, tr
-0003dc30: 616e 7366 6572 2c20 6375 7272 656e 6379  ansfer, currency
-0003dc40: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0003dc50: 230a 2020 2020 2020 2020 2320 7472 616e  #.        # tran
-0003dc60: 7366 6572 0a20 2020 2020 2020 2023 0a20  sfer.        #. 
-0003dc70: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0003dc80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003dc90: 2022 7472 616e 4964 223a 3133 3532 3638   "tranId":135268
-0003dca0: 3533 3632 330a 2020 2020 2020 2020 2320  53623.        # 
-0003dcb0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-0003dcc0: 2020 2020 2020 2020 2320 6665 7463 6854          # fetchT
-0003dcd0: 7261 6e73 6665 7273 0a20 2020 2020 2020  ransfers.       
-0003dce0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0003dcf0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0003dd00: 2020 2020 2074 696d 6573 7461 6d70 3a20       timestamp: 
-0003dd10: 3136 3134 3634 3038 3738 3030 302c 0a20  1614640878000,. 
-0003dd20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003dd30: 2061 7373 6574 3a20 2755 5344 5427 2c0a   asset: 'USDT',.
-0003dd40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003dd50: 2020 616d 6f75 6e74 3a20 2732 3527 2c0a    amount: '25',.
-0003dd60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003dd70: 2020 7479 7065 3a20 274d 4149 4e5f 554d    type: 'MAIN_UM
-0003dd80: 4655 5455 5245 272c 0a20 2020 2020 2020  FUTURE',.       
-0003dd90: 2023 2020 2020 2020 2020 2073 7461 7475   #         statu
-0003dda0: 733a 2027 434f 4e46 4952 4d45 4427 2c0a  s: 'CONFIRMED',.
-0003ddb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003ddc0: 2020 7472 616e 4964 3a20 3433 3030 3031    tranId: 430001
-0003ddd0: 3236 3234 380a 2020 2020 2020 2020 2320  26248.        # 
-0003dde0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-0003ddf0: 2020 2020 2020 2020 6964 203d 2073 656c          id = sel
-0003de00: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-0003de10: 616e 7366 6572 2c20 2774 7261 6e49 6427  ansfer, 'tranId'
-0003de20: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
-0003de30: 6379 4964 203d 2073 656c 662e 7361 6665  cyId = self.safe
-0003de40: 5f73 7472 696e 6728 7472 616e 7366 6572  _string(transfer
-0003de50: 2c20 2761 7373 6574 2729 0a20 2020 2020  , 'asset').     
-0003de60: 2020 2063 6f64 6520 3d20 7365 6c66 2e73     code = self.s
-0003de70: 6166 655f 6375 7272 656e 6379 5f63 6f64  afe_currency_cod
-0003de80: 6528 6375 7272 656e 6379 4964 2c20 6375  e(currencyId, cu
-0003de90: 7272 656e 6379 290a 2020 2020 2020 2020  rrency).        
-0003dea0: 616d 6f75 6e74 203d 2073 656c 662e 7361  amount = self.sa
-0003deb0: 6665 5f6e 756d 6265 7228 7472 616e 7366  fe_number(transf
-0003dec0: 6572 2c20 2761 6d6f 756e 7427 290a 2020  er, 'amount').  
-0003ded0: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
-0003dee0: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-0003def0: 616e 7366 6572 2c20 2774 7970 6527 290a  ansfer, 'type').
-0003df00: 2020 2020 2020 2020 6672 6f6d 4163 636f          fromAcco
-0003df10: 756e 7420 3d20 4e6f 6e65 0a20 2020 2020  unt = None.     
-0003df20: 2020 2074 6f41 6363 6f75 6e74 203d 204e     toAccount = N
-0003df30: 6f6e 650a 2020 2020 2020 2020 6163 636f  one.        acco
-0003df40: 756e 7473 4279 4964 203d 2073 656c 662e  untsById = self.
-0003df50: 7361 6665 5f76 616c 7565 2873 656c 662e  safe_value(self.
-0003df60: 6f70 7469 6f6e 732c 2027 6163 636f 756e  options, 'accoun
-0003df70: 7473 4279 4964 272c 207b 7d29 0a20 2020  tsById', {}).   
-0003df80: 2020 2020 2069 6620 7479 7065 2069 7320       if type is 
-0003df90: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0003dfa0: 2020 2020 2020 7061 7274 7320 3d20 7479        parts = ty
-0003dfb0: 7065 2e73 706c 6974 2827 5f27 290a 2020  pe.split('_').  
-0003dfc0: 2020 2020 2020 2020 2020 6672 6f6d 4163            fromAc
-0003dfd0: 636f 756e 7420 3d20 7365 6c66 2e73 6166  count = self.saf
-0003dfe0: 655f 7661 6c75 6528 7061 7274 732c 2030  e_value(parts, 0
-0003dff0: 290a 2020 2020 2020 2020 2020 2020 746f  ).            to
-0003e000: 4163 636f 756e 7420 3d20 7365 6c66 2e73  Account = self.s
-0003e010: 6166 655f 7661 6c75 6528 7061 7274 732c  afe_value(parts,
-0003e020: 2031 290a 2020 2020 2020 2020 2020 2020   1).            
-0003e030: 6672 6f6d 4163 636f 756e 7420 3d20 7365  fromAccount = se
-0003e040: 6c66 2e73 6166 655f 7374 7269 6e67 2861  lf.safe_string(a
-0003e050: 6363 6f75 6e74 7342 7949 642c 2066 726f  ccountsById, fro
-0003e060: 6d41 6363 6f75 6e74 2c20 6672 6f6d 4163  mAccount, fromAc
-0003e070: 636f 756e 7429 0a20 2020 2020 2020 2020  count).         
-0003e080: 2020 2074 6f41 6363 6f75 6e74 203d 2073     toAccount = s
-0003e090: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0003e0a0: 6163 636f 756e 7473 4279 4964 2c20 746f  accountsById, to
-0003e0b0: 4163 636f 756e 742c 2074 6f41 6363 6f75  Account, toAccou
-0003e0c0: 6e74 290a 2020 2020 2020 2020 7469 6d65  nt).        time
-0003e0d0: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-0003e0e0: 655f 696e 7465 6765 7228 7472 616e 7366  e_integer(transf
-0003e0f0: 6572 2c20 2774 696d 6573 7461 6d70 2729  er, 'timestamp')
-0003e100: 0a20 2020 2020 2020 2073 7461 7475 7320  .        status 
-0003e110: 3d20 7365 6c66 2e70 6172 7365 5f74 7261  = self.parse_tra
-0003e120: 6e73 6665 725f 7374 6174 7573 2873 656c  nsfer_status(sel
-0003e130: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-0003e140: 616e 7366 6572 2c20 2773 7461 7475 7327  ansfer, 'status'
-0003e150: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-0003e160: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
-0003e170: 2769 6e66 6f27 3a20 7472 616e 7366 6572  'info': transfer
-0003e180: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-0003e190: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
-0003e1a0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
-0003e1b0: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
-0003e1c0: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-0003e1d0: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-0003e1e0: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
-0003e1f0: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
-0003e200: 6379 273a 2063 6f64 652c 0a20 2020 2020  cy': code,.     
-0003e210: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
-0003e220: 2061 6d6f 756e 742c 0a20 2020 2020 2020   amount,.       
-0003e230: 2020 2020 2027 6672 6f6d 4163 636f 756e       'fromAccoun
-0003e240: 7427 3a20 6672 6f6d 4163 636f 756e 742c  t': fromAccount,
-0003e250: 0a20 2020 2020 2020 2020 2020 2027 746f  .            'to
-0003e260: 4163 636f 756e 7427 3a20 746f 4163 636f  Account': toAcco
-0003e270: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
-0003e280: 2027 7374 6174 7573 273a 2073 7461 7475   'status': statu
-0003e290: 732c 0a20 2020 2020 2020 207d 0a0a 2020  s,.        }..  
-0003e2a0: 2020 6465 6620 7061 7273 655f 696e 636f    def parse_inco
-0003e2b0: 6d65 2873 656c 662c 2069 6e63 6f6d 652c  me(self, income,
-0003e2c0: 206d 6172 6b65 743d 4e6f 6e65 293a 0a20   market=None):. 
-0003e2d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0003e2e0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0003e2f0: 2023 2020 2020 2020 2022 7379 6d62 6f6c   #       "symbol
-0003e300: 223a 2022 4554 4855 5344 5422 2c0a 2020  ": "ETHUSDT",.  
-0003e310: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
-0003e320: 6e63 6f6d 6554 7970 6522 3a20 2246 554e  ncomeType": "FUN
-0003e330: 4449 4e47 5f46 4545 222c 0a20 2020 2020  DING_FEE",.     
-0003e340: 2020 2023 2020 2020 2020 2022 696e 636f     #       "inco
-0003e350: 6d65 223a 2022 302e 3030 3133 3433 3137  me": "0.00134317
-0003e360: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003e370: 2020 2022 6173 7365 7422 3a20 2255 5344     "asset": "USD
-0003e380: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-0003e390: 2020 2020 2274 696d 6522 3a20 2231 3632      "time": "162
-0003e3a0: 3135 3834 3030 3030 3030 222c 0a20 2020  1584000000",.   
-0003e3b0: 2020 2020 2023 2020 2020 2020 2022 696e       #       "in
-0003e3c0: 666f 223a 2022 4655 4e44 494e 475f 4645  fo": "FUNDING_FE
-0003e3d0: 4522 2c0a 2020 2020 2020 2020 2320 2020  E",.        #   
-0003e3e0: 2020 2020 2274 7261 6e49 6422 3a20 2234      "tranId": "4
-0003e3f0: 3438 3033 3231 3939 3137 3734 3034 3435  4803219917740445
-0003e400: 3830 222c 0a20 2020 2020 2020 2023 2020  80",.        #  
-0003e410: 2020 2020 2022 7472 6164 6549 6422 3a20       "tradeId": 
-0003e420: 2222 0a20 2020 2020 2020 2023 2020 2020  "".        #    
-0003e430: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0003e440: 2020 2020 206d 6172 6b65 7449 6420 3d20       marketId = 
-0003e450: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003e460: 2869 6e63 6f6d 652c 2027 7379 6d62 6f6c  (income, 'symbol
-0003e470: 2729 0a20 2020 2020 2020 2073 796d 626f  ').        symbo
-0003e480: 6c20 3d20 7365 6c66 2e73 6166 655f 7379  l = self.safe_sy
-0003e490: 6d62 6f6c 286d 6172 6b65 7449 642c 206d  mbol(marketId, m
-0003e4a0: 6172 6b65 742c 204e 6f6e 652c 2027 7377  arket, None, 'sw
-0003e4b0: 6170 2729 0a20 2020 2020 2020 2061 6d6f  ap').        amo
-0003e4c0: 756e 7420 3d20 7365 6c66 2e73 6166 655f  unt = self.safe_
-0003e4d0: 6e75 6d62 6572 2869 6e63 6f6d 652c 2027  number(income, '
-0003e4e0: 696e 636f 6d65 2729 0a20 2020 2020 2020  income').       
-0003e4f0: 2063 7572 7265 6e63 7949 6420 3d20 7365   currencyId = se
-0003e500: 6c66 2e73 6166 655f 7374 7269 6e67 2869  lf.safe_string(i
-0003e510: 6e63 6f6d 652c 2027 6173 7365 7427 290a  ncome, 'asset').
-0003e520: 2020 2020 2020 2020 636f 6465 203d 2073          code = s
-0003e530: 656c 662e 7361 6665 5f63 7572 7265 6e63  elf.safe_currenc
-0003e540: 795f 636f 6465 2863 7572 7265 6e63 7949  y_code(currencyI
-0003e550: 6429 0a20 2020 2020 2020 2069 6420 3d20  d).        id = 
-0003e560: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003e570: 2869 6e63 6f6d 652c 2027 7472 616e 4964  (income, 'tranId
-0003e580: 2729 0a20 2020 2020 2020 2074 696d 6573  ').        times
-0003e590: 7461 6d70 203d 2073 656c 662e 7361 6665  tamp = self.safe
-0003e5a0: 5f69 6e74 6567 6572 2869 6e63 6f6d 652c  _integer(income,
-0003e5b0: 2027 7469 6d65 2729 0a20 2020 2020 2020   'time').       
-0003e5c0: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
-0003e5d0: 2020 2020 2020 2769 6e66 6f27 3a20 696e        'info': in
-0003e5e0: 636f 6d65 2c0a 2020 2020 2020 2020 2020  come,.          
-0003e5f0: 2020 2773 796d 626f 6c27 3a20 7379 6d62    'symbol': symb
-0003e600: 6f6c 2c0a 2020 2020 2020 2020 2020 2020  ol,.            
-0003e610: 2763 6f64 6527 3a20 636f 6465 2c0a 2020  'code': code,.  
-0003e620: 2020 2020 2020 2020 2020 2774 696d 6573            'times
-0003e630: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
-0003e640: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
-0003e650: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
-0003e660: 736f 3836 3031 2874 696d 6573 7461 6d70  so8601(timestamp
-0003e670: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-0003e680: 6964 273a 2069 642c 0a20 2020 2020 2020  id': id,.       
-0003e690: 2020 2020 2027 616d 6f75 6e74 273a 2061       'amount': a
-0003e6a0: 6d6f 756e 742c 0a20 2020 2020 2020 207d  mount,.        }
-0003e6b0: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-0003e6c0: 7472 616e 7366 6572 2873 656c 662c 2063  transfer(self, c
-0003e6d0: 6f64 653a 2073 7472 2c20 616d 6f75 6e74  ode: str, amount
-0003e6e0: 2c20 6672 6f6d 4163 636f 756e 742c 2074  , fromAccount, t
-0003e6f0: 6f41 6363 6f75 6e74 2c20 7061 7261 6d73  oAccount, params
-0003e700: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-0003e710: 220a 2020 2020 2020 2020 7472 616e 7366  ".        transf
-0003e720: 6572 2063 7572 7265 6e63 7920 696e 7465  er currency inte
-0003e730: 726e 616c 6c79 2062 6574 7765 656e 2077  rnally between w
-0003e740: 616c 6c65 7473 206f 6e20 7468 6520 7361  allets on the sa
-0003e750: 6d65 2061 6363 6f75 6e74 0a20 2020 2020  me account.     
-0003e760: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
-0003e770: 696e 616e 6365 2d64 6f63 732e 6769 7468  inance-docs.gith
-0003e780: 7562 2e69 6f2f 6170 6964 6f63 732f 7370  ub.io/apidocs/sp
-0003e790: 6f74 2f65 6e2f 2375 7365 722d 756e 6976  ot/en/#user-univ
-0003e7a0: 6572 7361 6c2d 7472 616e 7366 6572 2d75  ersal-transfer-u
-0003e7b0: 7365 725f 6461 7461 0a20 2020 2020 2020  ser_data.       
-0003e7c0: 2073 6565 2068 7474 7073 3a2f 2f62 696e   see https://bin
-0003e7d0: 616e 6365 2d64 6f63 732e 6769 7468 7562  ance-docs.github
-0003e7e0: 2e69 6f2f 6170 6964 6f63 732f 7370 6f74  .io/apidocs/spot
-0003e7f0: 2f65 6e2f 2369 736f 6c61 7465 642d 6d61  /en/#isolated-ma
-0003e800: 7267 696e 2d61 6363 6f75 6e74 2d74 7261  rgin-account-tra
-0003e810: 6e73 6665 722d 6d61 7267 696e 0a20 2020  nsfer-margin.   
-0003e820: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
-0003e830: 636f 6465 3a20 756e 6966 6965 6420 6375  code: unified cu
-0003e840: 7272 656e 6379 2063 6f64 650a 2020 2020  rrency code.    
-0003e850: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
-0003e860: 2061 6d6f 756e 743a 2061 6d6f 756e 7420   amount: amount 
-0003e870: 746f 2074 7261 6e73 6665 720a 2020 2020  to transfer.    
-0003e880: 2020 2020 3a70 6172 616d 2073 7472 2066      :param str f
-0003e890: 726f 6d41 6363 6f75 6e74 3a20 6163 636f  romAccount: acco
-0003e8a0: 756e 7420 746f 2074 7261 6e73 6665 7220  unt to transfer 
-0003e8b0: 6672 6f6d 0a20 2020 2020 2020 203a 7061  from.        :pa
-0003e8c0: 7261 6d20 7374 7220 746f 4163 636f 756e  ram str toAccoun
-0003e8d0: 743a 2061 6363 6f75 6e74 2074 6f20 7472  t: account to tr
-0003e8e0: 616e 7366 6572 2074 6f0a 2020 2020 2020  ansfer to.      
-0003e8f0: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-0003e900: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-0003e910: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-0003e920: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
-0003e930: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-0003e940: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-0003e950: 743a 2061 2060 7472 616e 7366 6572 2073  t: a `transfer s
-0003e960: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0003e970: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0003e980: 232f 3f69 643d 7472 616e 7366 6572 2d73  #/?id=transfer-s
-0003e990: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-0003e9a0: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-0003e9b0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-0003e9c0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-0003e9d0: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
-0003e9e0: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
-0003e9f0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-0003ea00: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0003ea10: 2761 7373 6574 273a 2063 7572 7265 6e63  'asset': currenc
-0003ea20: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
-0003ea30: 2020 2020 2027 616d 6f75 6e74 273a 2073       'amount': s
-0003ea40: 656c 662e 6375 7272 656e 6379 5f74 6f5f  elf.currency_to_
-0003ea50: 7072 6563 6973 696f 6e28 636f 6465 2c20  precision(code, 
-0003ea60: 616d 6f75 6e74 292c 0a20 2020 2020 2020  amount),.       
-0003ea70: 207d 0a20 2020 2020 2020 2072 6571 7565   }.        reque
-0003ea80: 7374 5b27 7479 7065 275d 203d 2073 656c  st['type'] = sel
-0003ea90: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
-0003eaa0: 7261 6d73 2c20 2774 7970 6527 290a 2020  rams, 'type').  
-0003eab0: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-0003eac0: 7361 7069 506f 7374 4173 7365 7454 7261  sapiPostAssetTra
-0003ead0: 6e73 6665 7227 0a20 2020 2020 2020 2069  nsfer'.        i
-0003eae0: 6620 7265 7175 6573 745b 2774 7970 6527  f request['type'
-0003eaf0: 5d20 6973 204e 6f6e 653a 0a20 2020 2020  ] is None:.     
-0003eb00: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
-0003eb10: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003eb20: 2870 6172 616d 732c 2027 7379 6d62 6f6c  (params, 'symbol
-0003eb30: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
-0003eb40: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
-0003eb50: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0003eb60: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
-0003eb70: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-0003eb80: 2027 7379 6d62 6f6c 2729 0a20 2020 2020   'symbol').     
-0003eb90: 2020 2020 2020 2066 726f 6d49 6420 3d20         fromId = 
-0003eba0: 7365 6c66 2e63 6f6e 7665 7274 5f74 7970  self.convert_typ
-0003ebb0: 655f 746f 5f61 6363 6f75 6e74 2866 726f  e_to_account(fro
-0003ebc0: 6d41 6363 6f75 6e74 292e 7570 7065 7228  mAccount).upper(
-0003ebd0: 290a 2020 2020 2020 2020 2020 2020 746f  ).            to
-0003ebe0: 4964 203d 2073 656c 662e 636f 6e76 6572  Id = self.conver
-0003ebf0: 745f 7479 7065 5f74 6f5f 6163 636f 756e  t_type_to_accoun
-0003ec00: 7428 746f 4163 636f 756e 7429 2e75 7070  t(toAccount).upp
-0003ec10: 6572 2829 0a20 2020 2020 2020 2020 2020  er().           
-0003ec20: 2069 6620 6672 6f6d 4964 203d 3d20 2749   if fromId == 'I
-0003ec30: 534f 4c41 5445 4427 3a0a 2020 2020 2020  SOLATED':.      
-0003ec40: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
-0003ec50: 626f 6c20 6973 204e 6f6e 653a 0a20 2020  bol is None:.   
-0003ec60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ec70: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-0003ec80: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-0003ec90: 202b 2027 2074 7261 6e73 6665 7228 2920   + ' transfer() 
-0003eca0: 7265 7175 6972 6573 2070 6172 616d 735b  requires params[
-0003ecb0: 2273 796d 626f 6c22 5d20 7768 656e 2066  "symbol"] when f
-0003ecc0: 726f 6d41 6363 6f75 6e74 2069 7320 2720  romAccount is ' 
-0003ecd0: 2b20 6672 6f6d 4163 636f 756e 7429 0a20  + fromAccount). 
-0003ece0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003ecf0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003ed00: 2020 2020 2020 2020 2066 726f 6d49 6420           fromId 
-0003ed10: 3d20 7365 6c66 2e6d 6172 6b65 745f 6964  = self.market_id
-0003ed20: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-0003ed30: 2020 2020 2069 6620 746f 4964 203d 3d20       if toId == 
-0003ed40: 2749 534f 4c41 5445 4427 3a0a 2020 2020  'ISOLATED':.    
-0003ed50: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0003ed60: 796d 626f 6c20 6973 204e 6f6e 653a 0a20  ymbol is None:. 
-0003ed70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ed80: 2020 2072 6169 7365 2041 7267 756d 656e     raise Argumen
-0003ed90: 7473 5265 7175 6972 6564 2873 656c 662e  tsRequired(self.
-0003eda0: 6964 202b 2027 2074 7261 6e73 6665 7228  id + ' transfer(
-0003edb0: 2920 7265 7175 6972 6573 2070 6172 616d  ) requires param
-0003edc0: 735b 2273 796d 626f 6c22 5d20 7768 656e  s["symbol"] when
-0003edd0: 2074 6f41 6363 6f75 6e74 2069 7320 2720   toAccount is ' 
-0003ede0: 2b20 746f 4163 636f 756e 7429 0a20 2020  + toAccount).   
-0003edf0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0003ee00: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0003ee10: 2020 2020 2020 2074 6f49 6420 3d20 7365         toId = se
-0003ee20: 6c66 2e6d 6172 6b65 745f 6964 2873 796d  lf.market_id(sym
-0003ee30: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-0003ee40: 2061 6363 6f75 6e74 7342 7949 6420 3d20   accountsById = 
-0003ee50: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-0003ee60: 7365 6c66 2e6f 7074 696f 6e73 2c20 2761  self.options, 'a
-0003ee70: 6363 6f75 6e74 7342 7949 6427 2c20 7b7d  ccountsById', {}
-0003ee80: 290a 2020 2020 2020 2020 2020 2020 6672  ).            fr
-0003ee90: 6f6d 4973 6f6c 6174 6564 203d 206e 6f74  omIsolated = not
-0003eea0: 2028 6672 6f6d 4964 2069 6e20 6163 636f   (fromId in acco
-0003eeb0: 756e 7473 4279 4964 290a 2020 2020 2020  untsById).      
-0003eec0: 2020 2020 2020 746f 4973 6f6c 6174 6564        toIsolated
-0003eed0: 203d 206e 6f74 2028 746f 4964 2069 6e20   = not (toId in 
-0003eee0: 6163 636f 756e 7473 4279 4964 290a 2020  accountsById).  
-0003eef0: 2020 2020 2020 2020 2020 6966 2066 726f            if fro
-0003ef00: 6d49 736f 6c61 7465 6420 6f72 2074 6f49  mIsolated or toI
-0003ef10: 736f 6c61 7465 643a 2020 2320 4973 6f6c  solated:  # Isol
-0003ef20: 6174 6564 206d 6172 6769 6e20 7472 616e  ated margin tran
-0003ef30: 7366 6572 0a20 2020 2020 2020 2020 2020  sfer.           
-0003ef40: 2020 2020 2066 726f 6d46 7574 7572 6520       fromFuture 
-0003ef50: 3d20 6672 6f6d 4964 203d 3d20 2755 4d46  = fromId == 'UMF
-0003ef60: 5554 5552 4527 206f 7220 6672 6f6d 4964  UTURE' or fromId
-0003ef70: 203d 3d20 2743 4d46 5554 5552 4527 0a20   == 'CMFUTURE'. 
-0003ef80: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0003ef90: 6f46 7574 7572 6520 3d20 746f 4964 203d  oFuture = toId =
-0003efa0: 3d20 2755 4d46 5554 5552 4527 206f 7220  = 'UMFUTURE' or 
-0003efb0: 746f 4964 203d 3d20 2743 4d46 5554 5552  toId == 'CMFUTUR
-0003efc0: 4527 0a20 2020 2020 2020 2020 2020 2020  E'.             
-0003efd0: 2020 2066 726f 6d53 706f 7420 3d20 6672     fromSpot = fr
-0003efe0: 6f6d 4964 203d 3d20 274d 4149 4e27 0a20  omId == 'MAIN'. 
-0003eff0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0003f000: 6f53 706f 7420 3d20 746f 4964 203d 3d20  oSpot = toId == 
-0003f010: 274d 4149 4e27 0a20 2020 2020 2020 2020  'MAIN'.         
-0003f020: 2020 2020 2020 2066 756e 6469 6e67 203d         funding =
-0003f030: 2066 726f 6d49 6420 3d3d 2027 4655 4e44   fromId == 'FUND
-0003f040: 494e 4727 206f 7220 746f 4964 203d 3d20  ING' or toId == 
-0003f050: 2746 554e 4449 4e47 270a 2020 2020 2020  'FUNDING'.      
-0003f060: 2020 2020 2020 2020 2020 6d69 6e69 6e67            mining
-0003f070: 203d 2066 726f 6d49 6420 3d3d 2027 4d49   = fromId == 'MI
-0003f080: 4e49 4e47 2720 6f72 2074 6f49 6420 3d3d  NING' or toId ==
-0003f090: 2027 4d49 4e49 4e47 270a 2020 2020 2020   'MINING'.      
-0003f0a0: 2020 2020 2020 2020 2020 6f70 7469 6f6e            option
-0003f0b0: 203d 2066 726f 6d49 6420 3d3d 2027 4f50   = fromId == 'OP
-0003f0c0: 5449 4f4e 2720 6f72 2074 6f49 6420 3d3d  TION' or toId ==
-0003f0d0: 2027 4f50 5449 4f4e 270a 2020 2020 2020   'OPTION'.      
-0003f0e0: 2020 2020 2020 2020 2020 7072 6f68 6962            prohib
-0003f0f0: 6974 6564 5769 7468 4973 6f6c 6174 6564  itedWithIsolated
-0003f100: 203d 2066 726f 6d46 7574 7572 6520 6f72   = fromFuture or
-0003f110: 2074 6f46 7574 7572 6520 6f72 206d 696e   toFuture or min
-0003f120: 696e 6720 6f72 2066 756e 6469 6e67 206f  ing or funding o
-0003f130: 7220 6f70 7469 6f6e 0a20 2020 2020 2020  r option.       
-0003f140: 2020 2020 2020 2020 2069 6620 2866 726f           if (fro
-0003f150: 6d49 736f 6c61 7465 6420 6f72 2074 6f49  mIsolated or toI
-0003f160: 736f 6c61 7465 6429 2061 6e64 2070 726f  solated) and pro
-0003f170: 6869 6269 7465 6457 6974 6849 736f 6c61  hibitedWithIsola
-0003f180: 7465 643a 0a20 2020 2020 2020 2020 2020  ted:.           
-0003f190: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-0003f1a0: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-0003f1b0: 6420 2b20 2720 7472 616e 7366 6572 2829  d + ' transfer()
-0003f1c0: 2064 6f65 7320 6e6f 7420 616c 6c6f 7720   does not allow 
-0003f1d0: 7472 616e 7366 6572 7320 6265 7477 6565  transfers betwee
-0003f1e0: 6e20 2720 2b20 6672 6f6d 4163 636f 756e  n ' + fromAccoun
-0003f1f0: 7420 2b20 2720 616e 6420 2720 2b20 746f  t + ' and ' + to
-0003f200: 4163 636f 756e 7429 0a20 2020 2020 2020  Account).       
-0003f210: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
-0003f220: 5370 6f74 2061 6e64 2066 726f 6d49 736f  Spot and fromIso
-0003f230: 6c61 7465 643a 0a20 2020 2020 2020 2020  lated:.         
-0003f240: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-0003f250: 6420 3d20 2773 6170 6950 6f73 744d 6172  d = 'sapiPostMar
-0003f260: 6769 6e49 736f 6c61 7465 6454 7261 6e73  ginIsolatedTrans
-0003f270: 6665 7227 0a20 2020 2020 2020 2020 2020  fer'.           
-0003f280: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003f290: 5b27 7472 616e 7346 726f 6d27 5d20 3d20  ['transFrom'] = 
-0003f2a0: 2749 534f 4c41 5445 445f 4d41 5247 494e  'ISOLATED_MARGIN
-0003f2b0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-0003f2c0: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-0003f2d0: 7261 6e73 546f 275d 203d 2027 5350 4f54  ransTo'] = 'SPOT
-0003f2e0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-0003f2f0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-0003f300: 796d 626f 6c27 5d20 3d20 6672 6f6d 4964  ymbol'] = fromId
-0003f310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003f320: 2065 6c69 6620 6672 6f6d 5370 6f74 2061   elif fromSpot a
-0003f330: 6e64 2074 6f49 736f 6c61 7465 643a 0a20  nd toIsolated:. 
-0003f340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f350: 2020 206d 6574 686f 6420 3d20 2773 6170     method = 'sap
-0003f360: 6950 6f73 744d 6172 6769 6e49 736f 6c61  iPostMarginIsola
-0003f370: 7465 6454 7261 6e73 6665 7227 0a20 2020  tedTransfer'.   
-0003f380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f390: 2072 6571 7565 7374 5b27 7472 616e 7346   request['transF
-0003f3a0: 726f 6d27 5d20 3d20 2753 504f 5427 0a20  rom'] = 'SPOT'. 
-0003f3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f3c0: 2020 2072 6571 7565 7374 5b27 7472 616e     request['tran
-0003f3d0: 7354 6f27 5d20 3d20 2749 534f 4c41 5445  sTo'] = 'ISOLATE
-0003f3e0: 445f 4d41 5247 494e 270a 2020 2020 2020  D_MARGIN'.      
-0003f3f0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0003f400: 7175 6573 745b 2773 796d 626f 6c27 5d20  quest['symbol'] 
-0003f410: 3d20 746f 4964 0a20 2020 2020 2020 2020  = toId.         
-0003f420: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003f430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f440: 2069 6620 6672 6f6d 4973 6f6c 6174 6564   if fromIsolated
-0003f450: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003f460: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003f470: 745b 2766 726f 6d53 796d 626f 6c27 5d20  t['fromSymbol'] 
-0003f480: 3d20 6672 6f6d 4964 0a20 2020 2020 2020  = fromId.       
-0003f490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f4a0: 2066 726f 6d49 6420 3d20 2749 534f 4c41   fromId = 'ISOLA
-0003f4b0: 5445 444d 4152 4749 4e27 0a20 2020 2020  TEDMARGIN'.     
-0003f4c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003f4d0: 6620 746f 4973 6f6c 6174 6564 3a0a 2020  f toIsolated:.  
-0003f4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f4f0: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-0003f500: 6f53 796d 626f 6c27 5d20 3d20 746f 4964  oSymbol'] = toId
-0003f510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003f520: 2020 2020 2020 2020 2074 6f49 6420 3d20           toId = 
-0003f530: 2749 534f 4c41 5445 444d 4152 4749 4e27  'ISOLATEDMARGIN'
-0003f540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003f550: 2020 2020 2072 6571 7565 7374 5b27 7479       request['ty
-0003f560: 7065 275d 203d 2066 726f 6d49 6420 2b20  pe'] = fromId + 
-0003f570: 275f 2720 2b20 746f 4964 0a20 2020 2020  '_' + toId.     
-0003f580: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003f590: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003f5a0: 7565 7374 5b27 7479 7065 275d 203d 2066  uest['type'] = f
-0003f5b0: 726f 6d49 6420 2b20 275f 2720 2b20 746f  romId + '_' + to
-0003f5c0: 4964 0a20 2020 2020 2020 2070 6172 616d  Id.        param
-0003f5d0: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-0003f5e0: 7261 6d73 2c20 2774 7970 6527 290a 2020  rams, 'type').  
-0003f5f0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-0003f600: 2061 7761 6974 2067 6574 6174 7472 2873   await getattr(s
-0003f610: 656c 662c 206d 6574 686f 6429 2873 656c  elf, method)(sel
-0003f620: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-0003f630: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-0003f640: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0003f650: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0003f660: 2020 2020 2020 2022 7472 616e 4964 223a         "tranId":
-0003f670: 3133 3532 3638 3533 3632 330a 2020 2020  13526853623.    
-0003f680: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0003f690: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-0003f6a0: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-0003f6b0: 7472 616e 7366 6572 2872 6573 706f 6e73  transfer(respons
-0003f6c0: 652c 2063 7572 7265 6e63 7929 0a0a 2020  e, currency)..  
-0003f6d0: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-0003f6e0: 685f 7472 616e 7366 6572 7328 7365 6c66  h_transfers(self
-0003f6f0: 2c20 636f 6465 3a20 4f70 7469 6f6e 616c  , code: Optional
-0003f700: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
-0003f710: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
-0003f720: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
-0003f730: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-0003f740: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-0003f750: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0003f760: 2020 2020 2020 2020 6665 7463 6820 6120          fetch a 
-0003f770: 6869 7374 6f72 7920 6f66 2069 6e74 6572  history of inter
-0003f780: 6e61 6c20 7472 616e 7366 6572 7320 6d61  nal transfers ma
-0003f790: 6465 206f 6e20 616e 2061 6363 6f75 6e74  de on an account
-0003f7a0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003f7b0: 7374 727c 4e6f 6e65 2063 6f64 653a 2075  str|None code: u
-0003f7c0: 6e69 6669 6564 2063 7572 7265 6e63 7920  nified currency 
-0003f7d0: 636f 6465 206f 6620 7468 6520 6375 7272  code of the curr
-0003f7e0: 656e 6379 2074 7261 6e73 6665 7272 6564  ency transferred
-0003f7f0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003f800: 696e 747c 4e6f 6e65 2073 696e 6365 3a20  int|None since: 
-0003f810: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
-0003f820: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
-0003f830: 2074 7261 6e73 6665 7273 2066 6f72 0a20   transfers for. 
-0003f840: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-0003f850: 747c 4e6f 6e65 206c 696d 6974 3a20 7468  t|None limit: th
-0003f860: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-0003f870: 206f 6620 7472 616e 7366 6572 7320 7374   of transfers st
-0003f880: 7275 6374 7572 6573 2074 6f20 7265 7472  ructures to retr
-0003f890: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
-0003f8a0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-0003f8b0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-0003f8c0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-0003f8d0: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-0003f8e0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-0003f8f0: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-0003f900: 6120 6c69 7374 206f 6620 6074 7261 6e73  a list of `trans
-0003f910: 6665 7220 7374 7275 6374 7572 6573 203c  fer structures <
-0003f920: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-0003f930: 742e 636f 6d2f 232f 3f69 643d 7472 616e  t.com/#/?id=tran
-0003f940: 7366 6572 2d73 7472 7563 7475 7265 3e60  sfer-structure>`
-0003f950: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0003f960: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-0003f970: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-0003f980: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
-0003f990: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-0003f9a0: 6620 636f 6465 2069 7320 6e6f 7420 4e6f  f code is not No
-0003f9b0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0003f9c0: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-0003f9d0: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
-0003f9e0: 2020 2020 2020 2064 6566 6175 6c74 5479         defaultTy
-0003f9f0: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
-0003fa00: 7472 696e 675f 3228 7365 6c66 2e6f 7074  tring_2(self.opt
-0003fa10: 696f 6e73 2c20 2766 6574 6368 5472 616e  ions, 'fetchTran
-0003fa20: 7366 6572 7327 2c20 2764 6566 6175 6c74  sfers', 'default
-0003fa30: 5479 7065 272c 2027 7370 6f74 2729 0a20  Type', 'spot'). 
-0003fa40: 2020 2020 2020 2066 726f 6d41 6363 6f75         fromAccou
-0003fa50: 6e74 203d 2073 656c 662e 7361 6665 5f73  nt = self.safe_s
-0003fa60: 7472 696e 6728 7061 7261 6d73 2c20 2766  tring(params, 'f
-0003fa70: 726f 6d41 6363 6f75 6e74 272c 2064 6566  romAccount', def
-0003fa80: 6175 6c74 5479 7065 290a 2020 2020 2020  aultType).      
-0003fa90: 2020 6465 6661 756c 7454 6f20 3d20 2773    defaultTo = 's
-0003faa0: 706f 7427 2069 6620 2866 726f 6d41 6363  pot' if (fromAcc
-0003fab0: 6f75 6e74 203d 3d20 2766 7574 7572 6527  ount == 'future'
-0003fac0: 2920 656c 7365 2027 6675 7475 7265 270a  ) else 'future'.
-0003fad0: 2020 2020 2020 2020 746f 4163 636f 756e          toAccoun
-0003fae0: 7420 3d20 7365 6c66 2e73 6166 655f 7374  t = self.safe_st
-0003faf0: 7269 6e67 2870 6172 616d 732c 2027 746f  ring(params, 'to
-0003fb00: 4163 636f 756e 7427 2c20 6465 6661 756c  Account', defaul
-0003fb10: 7454 6f29 0a20 2020 2020 2020 2074 7970  tTo).        typ
-0003fb20: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-0003fb30: 7269 6e67 2870 6172 616d 732c 2027 7479  ring(params, 'ty
-0003fb40: 7065 2729 0a20 2020 2020 2020 2061 6363  pe').        acc
-0003fb50: 6f75 6e74 7342 7954 7970 6520 3d20 7365  ountsByType = se
-0003fb60: 6c66 2e73 6166 655f 7661 6c75 6528 7365  lf.safe_value(se
-0003fb70: 6c66 2e6f 7074 696f 6e73 2c20 2761 6363  lf.options, 'acc
-0003fb80: 6f75 6e74 7342 7954 7970 6527 2c20 7b7d  ountsByType', {}
-0003fb90: 290a 2020 2020 2020 2020 6672 6f6d 4964  ).        fromId
-0003fba0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0003fbb0: 696e 6728 6163 636f 756e 7473 4279 5479  ing(accountsByTy
-0003fbc0: 7065 2c20 6672 6f6d 4163 636f 756e 7429  pe, fromAccount)
-0003fbd0: 0a20 2020 2020 2020 2074 6f49 6420 3d20  .        toId = 
-0003fbe0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003fbf0: 2861 6363 6f75 6e74 7342 7954 7970 652c  (accountsByType,
-0003fc00: 2074 6f41 6363 6f75 6e74 290a 2020 2020   toAccount).    
-0003fc10: 2020 2020 6966 2074 7970 6520 6973 204e      if type is N
-0003fc20: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0003fc30: 2069 6620 6672 6f6d 4964 2069 7320 4e6f   if fromId is No
-0003fc40: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0003fc50: 2020 2020 6b65 7973 203d 206c 6973 7428      keys = list(
-0003fc60: 6163 636f 756e 7473 4279 5479 7065 2e6b  accountsByType.k
-0003fc70: 6579 7328 2929 0a20 2020 2020 2020 2020  eys()).         
-0003fc80: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
-0003fc90: 6861 6e67 6545 7272 6f72 2873 656c 662e  hangeError(self.
-0003fca0: 6964 202b 2027 2066 726f 6d41 6363 6f75  id + ' fromAccou
-0003fcb0: 6e74 2070 6172 616d 6574 6572 206d 7573  nt parameter mus
-0003fcc0: 7420 6265 206f 6e65 206f 6620 2720 2b20  t be one of ' + 
-0003fcd0: 272c 2027 2e6a 6f69 6e28 6b65 7973 2929  ', '.join(keys))
-0003fce0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0003fcf0: 746f 4964 2069 7320 4e6f 6e65 3a0a 2020  toId is None:.  
-0003fd00: 2020 2020 2020 2020 2020 2020 2020 6b65                ke
-0003fd10: 7973 203d 206c 6973 7428 6163 636f 756e  ys = list(accoun
-0003fd20: 7473 4279 5479 7065 2e6b 6579 7328 2929  tsByType.keys())
-0003fd30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003fd40: 2072 6169 7365 2045 7863 6861 6e67 6545   raise ExchangeE
-0003fd50: 7272 6f72 2873 656c 662e 6964 202b 2027  rror(self.id + '
-0003fd60: 2074 6f41 6363 6f75 6e74 2070 6172 616d   toAccount param
-0003fd70: 6574 6572 206d 7573 7420 6265 206f 6e65  eter must be one
-0003fd80: 206f 6620 2720 2b20 272c 2027 2e6a 6f69   of ' + ', '.joi
-0003fd90: 6e28 6b65 7973 2929 0a20 2020 2020 2020  n(keys)).       
-0003fda0: 2020 2020 2074 7970 6520 3d20 6672 6f6d       type = from
-0003fdb0: 4964 202b 2027 5f27 202b 2074 6f49 640a  Id + '_' + toId.
-0003fdc0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-0003fdd0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0003fde0: 2774 7970 6527 3a20 7479 7065 2c0a 2020  'type': type,.  
-0003fdf0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0003fe00: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
-0003fe10: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0003fe20: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-0003fe30: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-0003fe40: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
-0003fe50: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0003fe60: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003fe70: 5b27 7369 7a65 275d 203d 206c 696d 6974  ['size'] = limit
-0003fe80: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0003fe90: 6520 3d20 6177 6169 7420 7365 6c66 2e73  e = await self.s
-0003fea0: 6170 6947 6574 4173 7365 7454 7261 6e73  apiGetAssetTrans
-0003feb0: 6665 7228 7365 6c66 2e65 7874 656e 6428  fer(self.extend(
-0003fec0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0003fed0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0003fee0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0003fef0: 2020 2020 2320 2020 2020 2020 2020 746f      #         to
-0003ff00: 7461 6c3a 2033 2c0a 2020 2020 2020 2020  tal: 3,.        
-0003ff10: 2320 2020 2020 2020 2020 726f 7773 3a20  #         rows: 
-0003ff20: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-0003ff30: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0003ff40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003ff50: 2020 2020 7469 6d65 7374 616d 703a 2031      timestamp: 1
-0003ff60: 3631 3436 3430 3837 3830 3030 2c0a 2020  614640878000,.  
-0003ff70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003ff80: 2020 2020 2020 2020 6173 7365 743a 2027          asset: '
-0003ff90: 5553 4454 272c 0a20 2020 2020 2020 2023  USDT',.        #
-0003ffa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ffb0: 2061 6d6f 756e 743a 2027 3235 272c 0a20   amount: '25',. 
-0003ffc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003ffd0: 2020 2020 2020 2020 2074 7970 653a 2027           type: '
-0003ffe0: 4d41 494e 5f55 4d46 5554 5552 4527 2c0a  MAIN_UMFUTURE',.
-0003fff0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040000: 2020 2020 2020 2020 2020 7374 6174 7573            status
-00040010: 3a20 2743 4f4e 4649 524d 4544 272c 0a20  : 'CONFIRMED',. 
-00040020: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00040030: 2020 2020 2020 2020 2074 7261 6e49 643a           tranId:
-00040040: 2034 3330 3030 3132 3632 3438 0a20 2020   43000126248.   
-00040050: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00040060: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00040070: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-00040080: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00040090: 2020 230a 2020 2020 2020 2020 726f 7773    #.        rows
-000400a0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-000400b0: 7565 2872 6573 706f 6e73 652c 2027 726f  ue(response, 'ro
-000400c0: 7773 272c 205b 5d29 0a20 2020 2020 2020  ws', []).       
-000400d0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-000400e0: 7365 5f74 7261 6e73 6665 7273 2872 6f77  se_transfers(row
-000400f0: 732c 2063 7572 7265 6e63 792c 2073 696e  s, currency, sin
-00040100: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
-00040110: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
-00040120: 6465 706f 7369 745f 6164 6472 6573 7328  deposit_address(
-00040130: 7365 6c66 2c20 636f 6465 3a20 7374 722c  self, code: str,
-00040140: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00040150: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00040160: 2066 6574 6368 2074 6865 2064 6570 6f73   fetch the depos
-00040170: 6974 2061 6464 7265 7373 2066 6f72 2061  it address for a
-00040180: 2063 7572 7265 6e63 7920 6173 736f 6369   currency associ
-00040190: 6174 6564 2077 6974 6820 7365 6c66 2061  ated with self a
-000401a0: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
-000401b0: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
-000401c0: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
-000401d0: 2063 6f64 650a 2020 2020 2020 2020 3a70   code.        :p
-000401e0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
-000401f0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-00040200: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-00040210: 6865 2062 696e 616e 6365 2061 7069 2065  he binance api e
-00040220: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-00040230: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
-00040240: 6e20 6061 6464 7265 7373 2073 7472 7563  n `address struc
-00040250: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-00040260: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-00040270: 643d 6164 6472 6573 732d 7374 7275 6374  d=address-struct
-00040280: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-00040290: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-000402a0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-000402b0: 7328 290a 2020 2020 2020 2020 6375 7272  s().        curr
-000402c0: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-000402d0: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-000402e0: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-000402f0: 2020 2020 2020 2020 2020 2027 636f 696e             'coin
-00040300: 273a 2063 7572 7265 6e63 795b 2769 6427  ': currency['id'
-00040310: 5d2c 0a20 2020 2020 2020 2020 2020 2023  ],.            #
-00040320: 2027 6e65 7477 6f72 6b27 3a20 2745 5448   'network': 'ETH
-00040330: 272c 2020 2320 2742 5343 272c 2027 584d  ',  # 'BSC', 'XM
-00040340: 5227 2c20 796f 7520 6361 6e20 6765 7420  R', you can get 
-00040350: 6e65 7477 6f72 6b20 616e 6420 6973 4465  network and isDe
-00040360: 6661 756c 7420 696e 206e 6574 776f 726b  fault in network
-00040370: 4c69 7374 2069 6e20 7468 6520 7265 7370  List in the resp
-00040380: 6f6e 7365 206f 6620 7361 7069 4765 7443  onse of sapiGetC
-00040390: 6170 6974 616c 436f 6e66 6967 4465 7461  apitalConfigDeta
-000403a0: 696c 0a20 2020 2020 2020 207d 0a20 2020  il.        }.   
-000403b0: 2020 2020 206e 6574 776f 726b 7320 3d20       networks = 
-000403c0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-000403d0: 7365 6c66 2e6f 7074 696f 6e73 2c20 276e  self.options, 'n
-000403e0: 6574 776f 726b 7327 2c20 7b7d 290a 2020  etworks', {}).  
-000403f0: 2020 2020 2020 6e65 7477 6f72 6b20 3d20        network = 
-00040400: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00040410: 5f75 7070 6572 2870 6172 616d 732c 2027  _upper(params, '
-00040420: 6e65 7477 6f72 6b27 2920 2023 2073 656c  network')  # sel
-00040430: 6620 6c69 6e65 2061 6c6c 6f77 7320 7468  f line allows th
-00040440: 6520 7573 6572 2074 6f20 7370 6563 6966  e user to specif
-00040450: 7920 6569 7468 6572 2045 5243 3230 206f  y either ERC20 o
-00040460: 7220 4554 480a 2020 2020 2020 2020 6e65  r ETH.        ne
-00040470: 7477 6f72 6b20 3d20 7365 6c66 2e73 6166  twork = self.saf
-00040480: 655f 7374 7269 6e67 286e 6574 776f 726b  e_string(network
-00040490: 732c 206e 6574 776f 726b 2c20 6e65 7477  s, network, netw
-000404a0: 6f72 6b29 2020 2320 6861 6e64 6c65 2045  ork)  # handle E
-000404b0: 5243 3230 3e45 5448 2061 6c69 6173 0a20  RC20>ETH alias. 
-000404c0: 2020 2020 2020 2069 6620 6e65 7477 6f72         if networ
-000404d0: 6b20 6973 206e 6f74 204e 6f6e 653a 0a20  k is not None:. 
-000404e0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-000404f0: 7374 5b27 6e65 7477 6f72 6b27 5d20 3d20  st['network'] = 
-00040500: 6e65 7477 6f72 6b0a 2020 2020 2020 2020  network.        
-00040510: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-00040520: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
-00040530: 6e65 7477 6f72 6b27 290a 2020 2020 2020  network').      
-00040540: 2020 2320 6861 7320 7375 7070 6f72 7420    # has support 
-00040550: 666f 7220 7468 6520 276e 6574 776f 726b  for the 'network
-00040560: 2720 7061 7261 6d65 7465 720a 2020 2020  ' parameter.    
-00040570: 2020 2020 2320 6874 7470 733a 2f2f 6269      # https://bi
-00040580: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
-00040590: 622e 696f 2f61 7069 646f 6373 2f73 706f  b.io/apidocs/spo
-000405a0: 742f 656e 2f23 6465 706f 7369 742d 6164  t/en/#deposit-ad
-000405b0: 6472 6573 732d 7375 7070 6f72 7469 6e67  dress-supporting
-000405c0: 2d6e 6574 776f 726b 2d75 7365 725f 6461  -network-user_da
-000405d0: 7461 0a20 2020 2020 2020 2072 6573 706f  ta.        respo
-000405e0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-000405f0: 2e73 6170 6947 6574 4361 7069 7461 6c44  .sapiGetCapitalD
-00040600: 6570 6f73 6974 4164 6472 6573 7328 7365  epositAddress(se
-00040610: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00040620: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00040630: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00040640: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00040650: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-00040660: 3a20 2758 5250 272c 0a20 2020 2020 2020  : 'XRP',.       
-00040670: 2023 2020 2020 2020 2020 2061 6464 7265   #         addre
-00040680: 7373 3a20 2772 4562 3854 4b33 6742 676b  ss: 'rEb8TK3gBgk
-00040690: 3561 755a 6b77 6336 7348 6e77 7247 564a  5auZkwc6sHnwrGVJ
-000406a0: 4838 4475 614c 6827 2c0a 2020 2020 2020  H8DuaLh',.      
-000406b0: 2020 2320 2020 2020 2020 2020 7461 673a    #         tag:
-000406c0: 2027 3130 3836 3138 3236 3227 2c0a 2020   '108618262',.  
-000406d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000406e0: 696e 666f 3a20 7b0a 2020 2020 2020 2020  info: {.        
-000406f0: 2320 2020 2020 2020 2020 2020 2020 636f  #             co
-00040700: 696e 3a20 2758 5250 272c 0a20 2020 2020  in: 'XRP',.     
-00040710: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00040720: 2061 6464 7265 7373 3a20 2772 4562 3854   address: 'rEb8T
-00040730: 4b33 6742 676b 3561 755a 6b77 6336 7348  K3gBgk5auZkwc6sH
-00040740: 6e77 7247 564a 4838 4475 614c 6827 2c0a  nwrGVJH8DuaLh',.
-00040750: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040760: 2020 2020 2020 7461 673a 2027 3130 3836        tag: '1086
-00040770: 3138 3236 3227 2c0a 2020 2020 2020 2020  18262',.        
-00040780: 2320 2020 2020 2020 2020 2020 2020 7572  #             ur
-00040790: 6c3a 2027 6874 7470 733a 2f2f 6269 7468  l: 'https://bith
-000407a0: 6f6d 702e 636f 6d2f 6578 706c 6f72 6572  omp.com/explorer
-000407b0: 2f72 4562 3854 4b33 6742 676b 3561 755a  /rEb8TK3gBgk5auZ
-000407c0: 6b77 6336 7348 6e77 7247 564a 4838 4475  kwc6sHnwrGVJH8Du
-000407d0: 614c 6827 0a20 2020 2020 2020 2023 2020  aLh'.        #  
-000407e0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-000407f0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00040800: 2023 0a20 2020 2020 2020 2061 6464 7265   #.        addre
-00040810: 7373 203d 2073 656c 662e 7361 6665 5f73  ss = self.safe_s
-00040820: 7472 696e 6728 7265 7370 6f6e 7365 2c20  tring(response, 
-00040830: 2761 6464 7265 7373 2729 0a20 2020 2020  'address').     
-00040840: 2020 2075 726c 203d 2073 656c 662e 7361     url = self.sa
-00040850: 6665 5f73 7472 696e 6728 7265 7370 6f6e  fe_string(respon
-00040860: 7365 2c20 2775 726c 2729 0a20 2020 2020  se, 'url').     
-00040870: 2020 2069 6d70 6c69 6564 4e65 7477 6f72     impliedNetwor
-00040880: 6b20 3d20 4e6f 6e65 0a20 2020 2020 2020  k = None.       
-00040890: 2069 6620 7572 6c20 6973 206e 6f74 204e   if url is not N
-000408a0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000408b0: 2072 6576 6572 7365 4e65 7477 6f72 6b73   reverseNetworks
-000408c0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-000408d0: 7565 2873 656c 662e 6f70 7469 6f6e 732c  ue(self.options,
-000408e0: 2027 7265 7665 7273 654e 6574 776f 726b   'reverseNetwork
-000408f0: 7327 2c20 7b7d 290a 2020 2020 2020 2020  s', {}).        
-00040900: 2020 2020 7061 7274 7320 3d20 7572 6c2e      parts = url.
-00040910: 7370 6c69 7428 272f 2729 0a20 2020 2020  split('/').     
-00040920: 2020 2020 2020 2074 6f70 4c65 7665 6c20         topLevel 
-00040930: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00040940: 6e67 2870 6172 7473 2c20 3229 0a20 2020  ng(parts, 2).   
-00040950: 2020 2020 2020 2020 2069 6620 2874 6f70           if (top
-00040960: 4c65 7665 6c20 3d3d 2027 626c 6f63 6b63  Level == 'blockc
-00040970: 6861 6972 2e63 6f6d 2729 206f 7220 2874  hair.com') or (t
-00040980: 6f70 4c65 7665 6c20 3d3d 2027 7669 6577  opLevel == 'view
-00040990: 626c 6f63 6b2e 696f 2729 3a0a 2020 2020  block.io'):.    
-000409a0: 2020 2020 2020 2020 2020 2020 7375 624c              subL
-000409b0: 6576 656c 203d 2073 656c 662e 7361 6665  evel = self.safe
-000409c0: 5f73 7472 696e 6728 7061 7274 732c 2033  _string(parts, 3
-000409d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000409e0: 2020 6966 2073 7562 4c65 7665 6c20 6973    if subLevel is
-000409f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00040a00: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00040a10: 6f70 4c65 7665 6c20 3d20 746f 704c 6576  opLevel = topLev
-00040a20: 656c 202b 2027 2f27 202b 2073 7562 4c65  el + '/' + subLe
-00040a30: 7665 6c0a 2020 2020 2020 2020 2020 2020  vel.            
-00040a40: 696d 706c 6965 644e 6574 776f 726b 203d  impliedNetwork =
-00040a50: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00040a60: 6728 7265 7665 7273 654e 6574 776f 726b  g(reverseNetwork
-00040a70: 732c 2074 6f70 4c65 7665 6c29 0a20 2020  s, topLevel).   
-00040a80: 2020 2020 2020 2020 2069 6d70 6c69 6564           implied
-00040a90: 4e65 7477 6f72 6b73 203d 2073 656c 662e  Networks = self.
-00040aa0: 7361 6665 5f76 616c 7565 2873 656c 662e  safe_value(self.
-00040ab0: 6f70 7469 6f6e 732c 2027 696d 706c 6965  options, 'implie
-00040ac0: 644e 6574 776f 726b 7327 2c20 7b0a 2020  dNetworks', {.  
-00040ad0: 2020 2020 2020 2020 2020 2020 2020 2745                'E
-00040ae0: 5448 273a 207b 2745 5243 3230 273a 2027  TH': {'ERC20': '
-00040af0: 4554 4827 7d2c 0a20 2020 2020 2020 2020  ETH'},.         
-00040b00: 2020 2020 2020 2027 5452 5827 3a20 7b27         'TRX': {'
-00040b10: 5452 4332 3027 3a20 2754 5258 277d 2c0a  TRC20': 'TRX'},.
-00040b20: 2020 2020 2020 2020 2020 2020 7d29 0a20              }). 
-00040b30: 2020 2020 2020 2020 2020 2069 6620 636f             if co
-00040b40: 6465 2069 6e20 696d 706c 6965 644e 6574  de in impliedNet
-00040b50: 776f 726b 733a 0a20 2020 2020 2020 2020  works:.         
-00040b60: 2020 2020 2020 2063 6f6e 7665 7273 696f         conversio
-00040b70: 6e20 3d20 7365 6c66 2e73 6166 655f 7661  n = self.safe_va
-00040b80: 6c75 6528 696d 706c 6965 644e 6574 776f  lue(impliedNetwo
-00040b90: 726b 732c 2063 6f64 652c 207b 7d29 0a20  rks, code, {}). 
-00040ba0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00040bb0: 6d70 6c69 6564 4e65 7477 6f72 6b20 3d20  mpliedNetwork = 
-00040bc0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00040bd0: 2863 6f6e 7665 7273 696f 6e2c 2069 6d70  (conversion, imp
-00040be0: 6c69 6564 4e65 7477 6f72 6b2c 2069 6d70  liedNetwork, imp
-00040bf0: 6c69 6564 4e65 7477 6f72 6b29 0a20 2020  liedNetwork).   
-00040c00: 2020 2020 2074 6167 203d 2073 656c 662e       tag = self.
-00040c10: 7361 6665 5f73 7472 696e 6728 7265 7370  safe_string(resp
-00040c20: 6f6e 7365 2c20 2774 6167 272c 2027 2729  onse, 'tag', '')
-00040c30: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
-00040c40: 7461 6729 203d 3d20 303a 0a20 2020 2020  tag) == 0:.     
-00040c50: 2020 2020 2020 2074 6167 203d 204e 6f6e         tag = Non
-00040c60: 650a 2020 2020 2020 2020 7365 6c66 2e63  e.        self.c
-00040c70: 6865 636b 5f61 6464 7265 7373 2861 6464  heck_address(add
-00040c80: 7265 7373 290a 2020 2020 2020 2020 7265  ress).        re
-00040c90: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
-00040ca0: 2020 2027 6375 7272 656e 6379 273a 2063     'currency': c
-00040cb0: 6f64 652c 0a20 2020 2020 2020 2020 2020  ode,.           
-00040cc0: 2027 6164 6472 6573 7327 3a20 6164 6472   'address': addr
-00040cd0: 6573 732c 0a20 2020 2020 2020 2020 2020  ess,.           
-00040ce0: 2027 7461 6727 3a20 7461 672c 0a20 2020   'tag': tag,.   
-00040cf0: 2020 2020 2020 2020 2027 6e65 7477 6f72           'networ
-00040d00: 6b27 3a20 696d 706c 6965 644e 6574 776f  k': impliedNetwo
-00040d10: 726b 2c0a 2020 2020 2020 2020 2020 2020  rk,.            
-00040d20: 2769 6e66 6f27 3a20 7265 7370 6f6e 7365  'info': response
-00040d30: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
-00040d40: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-00040d50: 5f74 7261 6e73 6163 7469 6f6e 5f66 6565  _transaction_fee
-00040d60: 7328 7365 6c66 2c20 636f 6465 733d 4e6f  s(self, codes=No
-00040d70: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00040d80: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00040d90: 2020 2020 2a44 4550 5245 4341 5445 442a      *DEPRECATED*
-00040da0: 2070 6c65 6173 6520 7573 6520 6665 7463   please use fetc
-00040db0: 6844 6570 6f73 6974 5769 7468 6472 6177  hDepositWithdraw
-00040dc0: 4665 6573 2069 6e73 7465 6164 0a20 2020  Fees instead.   
-00040dd0: 2020 2020 203a 7061 7261 6d20 5b73 7472       :param [str
-00040de0: 5d7c 4e6f 6e65 2063 6f64 6573 3a20 6e6f  ]|None codes: no
-00040df0: 7420 7573 6564 2062 7920 6269 6e61 6e63  t used by binanc
-00040e00: 6520 6665 7463 6854 7261 6e73 6163 7469  e fetchTransacti
-00040e10: 6f6e 4665 6573 2829 0a20 2020 2020 2020  onFees().       
-00040e20: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00040e30: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00040e40: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00040e50: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
-00040e60: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00040e70: 2020 203a 7265 7475 726e 7320 5b64 6963     :returns [dic
-00040e80: 745d 3a20 6120 6c69 7374 206f 6620 6066  t]: a list of `f
-00040e90: 6565 2073 7472 7563 7475 7265 7320 3c68  ee structures <h
-00040ea0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-00040eb0: 2e63 6f6d 2f23 2f3f 6964 3d66 6565 2d73  .com/#/?id=fee-s
-00040ec0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00040ed0: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-00040ee0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-00040ef0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00040f00: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-00040f10: 7420 7365 6c66 2e73 6170 6947 6574 4361  t self.sapiGetCa
-00040f20: 7069 7461 6c43 6f6e 6669 6747 6574 616c  pitalConfigGetal
-00040f30: 6c28 7061 7261 6d73 290a 2020 2020 2020  l(params).      
-00040f40: 2020 230a 2020 2020 2020 2020 2320 205b    #.        #  [
-00040f50: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-00040f60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00040f70: 2063 6f69 6e3a 2027 4241 5427 2c0a 2020   coin: 'BAT',.  
-00040f80: 2020 2020 2020 2320 2020 2020 2020 6465        #       de
-00040f90: 706f 7369 7441 6c6c 456e 6162 6c65 3a20  positAllEnable: 
-00040fa0: 5472 7565 2c0a 2020 2020 2020 2020 2320  True,.        # 
-00040fb0: 2020 2020 2020 7769 7468 6472 6177 416c        withdrawAl
-00040fc0: 6c45 6e61 626c 653a 2054 7275 652c 0a20  lEnable: True,. 
-00040fd0: 2020 2020 2020 2023 2020 2020 2020 206e         #       n
-00040fe0: 616d 653a 2027 4261 7369 6320 4174 7465  ame: 'Basic Atte
-00040ff0: 6e74 696f 6e20 546f 6b65 6e27 2c0a 2020  ntion Token',.  
-00041000: 2020 2020 2020 2320 2020 2020 2020 6672        #       fr
-00041010: 6565 3a20 2730 272c 0a20 2020 2020 2020  ee: '0',.       
-00041020: 2023 2020 2020 2020 206c 6f63 6b65 643a   #       locked:
-00041030: 2027 3027 2c0a 2020 2020 2020 2020 2320   '0',.        # 
-00041040: 2020 2020 2020 6672 6565 7a65 3a20 2730        freeze: '0
-00041050: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00041060: 2020 2077 6974 6864 7261 7769 6e67 3a20     withdrawing: 
-00041070: 2730 272c 0a20 2020 2020 2020 2023 2020  '0',.        #  
-00041080: 2020 2020 2069 706f 696e 673a 2027 3027       ipoing: '0'
-00041090: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000410a0: 2020 6970 6f61 626c 653a 2027 3027 2c0a    ipoable: '0',.
-000410b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000410c0: 7374 6f72 6167 653a 2027 3027 2c0a 2020  storage: '0',.  
-000410d0: 2020 2020 2020 2320 2020 2020 2020 6973        #       is
-000410e0: 4c65 6761 6c4d 6f6e 6579 3a20 4661 6c73  LegalMoney: Fals
-000410f0: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00041100: 2020 2074 7261 6469 6e67 3a20 5472 7565     trading: True
-00041110: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041120: 2020 6e65 7477 6f72 6b4c 6973 743a 205b    networkList: [
-00041130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041140: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00041150: 2020 2020 2020 2020 206e 6574 776f 726b           network
-00041160: 3a20 2742 4e42 272c 0a20 2020 2020 2020  : 'BNB',.       
-00041170: 2023 2020 2020 2020 2020 2020 2063 6f69   #           coi
-00041180: 6e3a 2027 4241 5427 2c0a 2020 2020 2020  n: 'BAT',.      
-00041190: 2020 2320 2020 2020 2020 2020 2020 7769    #           wi
-000411a0: 7468 6472 6177 496e 7465 6765 724d 756c  thdrawIntegerMul
-000411b0: 7469 706c 653a 2027 302e 3030 3030 3030  tiple: '0.000000
-000411c0: 3031 272c 0a20 2020 2020 2020 2023 2020  01',.        #  
-000411d0: 2020 2020 2020 2020 2069 7344 6566 6175           isDefau
-000411e0: 6c74 3a20 4661 6c73 652c 0a20 2020 2020  lt: False,.     
-000411f0: 2020 2023 2020 2020 2020 2020 2020 2064     #           d
-00041200: 6570 6f73 6974 456e 6162 6c65 3a20 5472  epositEnable: Tr
-00041210: 7565 2c0a 2020 2020 2020 2020 2320 2020  ue,.        #   
-00041220: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
-00041230: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
-00041240: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00041250: 2020 6465 706f 7369 7444 6573 633a 2027    depositDesc: '
-00041260: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00041270: 2020 2020 2020 2077 6974 6864 7261 7744         withdrawD
-00041280: 6573 633a 2027 272c 0a20 2020 2020 2020  esc: '',.       
-00041290: 2023 2020 2020 2020 2020 2020 2073 7065   #           spe
-000412a0: 6369 616c 5469 7073 3a20 2754 6865 206e  cialTips: 'The n
-000412b0: 616d 6520 6f66 2073 656c 6620 6173 7365  ame of self asse
-000412c0: 7420 6973 2042 6173 6963 2041 7474 656e  t is Basic Atten
-000412d0: 7469 6f6e 2054 6f6b 656e 2842 4154 292e  tion Token(BAT).
-000412e0: 2042 6f74 6820 6120 4d45 4d4f 2061 6e64   Both a MEMO and
-000412f0: 2061 6e20 4164 6472 6573 7320 6172 6520   an Address are 
-00041300: 7265 7175 6972 6564 2074 6f20 7375 6363  required to succ
-00041310: 6573 7366 756c 6c79 2064 6570 6f73 6974  essfully deposit
-00041320: 2079 6f75 7220 4245 5032 2074 6f6b 656e   your BEP2 token
-00041330: 7320 746f 2042 696e 616e 6365 2e27 2c0a  s to Binance.',.
-00041340: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00041350: 2020 2020 6e61 6d65 3a20 2742 4550 3227      name: 'BEP2'
-00041360: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041370: 2020 2020 2020 7265 7365 7441 6464 7265        resetAddre
-00041380: 7373 5374 6174 7573 3a20 4661 6c73 652c  ssStatus: False,
-00041390: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000413a0: 2020 2020 2061 6464 7265 7373 5265 6765       addressRege
-000413b0: 783a 2027 5e28 626e 6231 295b 302d 3961  x: '^(bnb1)[0-9a
-000413c0: 2d7a 5d7b 3338 7d24 272c 0a20 2020 2020  -z]{38}$',.     
-000413d0: 2020 2023 2020 2020 2020 2020 2020 206d     #           m
-000413e0: 656d 6f52 6567 6578 3a20 275e 5b30 2d39  emoRegex: '^[0-9
-000413f0: 412d 5a61 2d7a 5c5c 2d5f 5d7b 312c 3132  A-Za-z\\-_]{1,12
-00041400: 307d 2427 2c0a 2020 2020 2020 2020 2320  0}$',.        # 
-00041410: 2020 2020 2020 2020 2020 7769 7468 6472            withdr
-00041420: 6177 4665 653a 2027 302e 3237 272c 0a20  awFee: '0.27',. 
-00041430: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00041440: 2020 2077 6974 6864 7261 774d 696e 3a20     withdrawMin: 
-00041450: 2730 2e35 3427 2c0a 2020 2020 2020 2020  '0.54',.        
-00041460: 2320 2020 2020 2020 2020 2020 7769 7468  #           with
-00041470: 6472 6177 4d61 783a 2027 3130 3030 3030  drawMax: '100000
-00041480: 3030 3030 3027 2c0a 2020 2020 2020 2020  00000',.        
-00041490: 2320 2020 2020 2020 2020 2020 6d69 6e43  #           minC
-000414a0: 6f6e 6669 726d 3a20 2731 272c 0a20 2020  onfirm: '1',.   
-000414b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000414c0: 2075 6e4c 6f63 6b43 6f6e 6669 726d 3a20   unLockConfirm: 
-000414d0: 2730 270a 2020 2020 2020 2020 2320 2020  '0'.        #   
-000414e0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-000414f0: 2023 2020 2020 2020 2020 207b 0a20 2020   #         {.   
-00041500: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00041510: 206e 6574 776f 726b 3a20 2742 5343 272c   network: 'BSC',
-00041520: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041530: 2020 2020 2063 6f69 6e3a 2027 4241 5427       coin: 'BAT'
-00041540: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041550: 2020 2020 2020 7769 7468 6472 6177 496e        withdrawIn
-00041560: 7465 6765 724d 756c 7469 706c 653a 2027  tegerMultiple: '
-00041570: 302e 3030 3030 3030 3031 272c 0a20 2020  0.00000001',.   
-00041580: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00041590: 2069 7344 6566 6175 6c74 3a20 4661 6c73   isDefault: Fals
-000415a0: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-000415b0: 2020 2020 2020 2064 6570 6f73 6974 456e         depositEn
-000415c0: 6162 6c65 3a20 5472 7565 2c0a 2020 2020  able: True,.    
-000415d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000415e0: 7769 7468 6472 6177 456e 6162 6c65 3a20  withdrawEnable: 
-000415f0: 5472 7565 2c0a 2020 2020 2020 2020 2320  True,.        # 
-00041600: 2020 2020 2020 2020 2020 6465 706f 7369            deposi
-00041610: 7444 6573 633a 2027 272c 0a20 2020 2020  tDesc: '',.     
-00041620: 2020 2023 2020 2020 2020 2020 2020 2077     #           w
-00041630: 6974 6864 7261 7744 6573 633a 2027 272c  ithdrawDesc: '',
-00041640: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041650: 2020 2020 2073 7065 6369 616c 5469 7073       specialTips
-00041660: 3a20 2754 6865 206e 616d 6520 6f66 2073  : 'The name of s
-00041670: 656c 6620 6173 7365 7420 6973 2042 6173  elf asset is Bas
-00041680: 6963 2041 7474 656e 7469 6f6e 2054 6f6b  ic Attention Tok
-00041690: 656e 2e20 506c 6561 7365 2065 6e73 7572  en. Please ensur
-000416a0: 6520 796f 7520 6172 6520 6465 706f 7369  e you are deposi
-000416b0: 7469 6e67 2042 6173 6963 2041 7474 656e  ting Basic Atten
-000416c0: 7469 6f6e 2054 6f6b 656e 2842 4154 2920  tion Token(BAT) 
-000416d0: 746f 6b65 6e73 2075 6e64 6572 2074 6865  tokens under the
-000416e0: 2063 6f6e 7472 6163 7420 6164 6472 6573   contract addres
-000416f0: 7320 656e 6469 6e67 2069 6e20 3937 3636  s ending in 9766
-00041700: 652e 272c 0a20 2020 2020 2020 2023 2020  e.',.        #  
-00041710: 2020 2020 2020 2020 206e 616d 653a 2027           name: '
-00041720: 4245 5032 3028 4253 4329 272c 0a20 2020  BEP20(BSC)',.   
-00041730: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00041740: 2072 6573 6574 4164 6472 6573 7353 7461   resetAddressSta
-00041750: 7475 733a 2046 616c 7365 2c0a 2020 2020  tus: False,.    
-00041760: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041770: 6164 6472 6573 7352 6567 6578 3a20 275e  addressRegex: '^
-00041780: 2830 7829 5b30 2d39 412d 4661 2d66 5d7b  (0x)[0-9A-Fa-f]{
-00041790: 3430 7d24 272c 0a20 2020 2020 2020 2023  40}$',.        #
-000417a0: 2020 2020 2020 2020 2020 206d 656d 6f52             memoR
-000417b0: 6567 6578 3a20 2727 2c0a 2020 2020 2020  egex: '',.      
-000417c0: 2020 2320 2020 2020 2020 2020 2020 7769    #           wi
-000417d0: 7468 6472 6177 4665 653a 2027 302e 3237  thdrawFee: '0.27
-000417e0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-000417f0: 2020 2020 2020 2077 6974 6864 7261 774d         withdrawM
-00041800: 696e 3a20 2730 2e35 3427 2c0a 2020 2020  in: '0.54',.    
-00041810: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041820: 7769 7468 6472 6177 4d61 783a 2027 3130  withdrawMax: '10
-00041830: 3030 3030 3030 3030 3027 2c0a 2020 2020  000000000',.    
-00041840: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041850: 6d69 6e43 6f6e 6669 726d 3a20 2731 3527  minConfirm: '15'
-00041860: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041870: 2020 2020 2020 756e 4c6f 636b 436f 6e66        unLockConf
-00041880: 6972 6d3a 2027 3027 0a20 2020 2020 2020  irm: '0'.       
-00041890: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
-000418a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000418b0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000418c0: 2020 2020 2020 6e65 7477 6f72 6b3a 2027        network: '
-000418d0: 4554 4827 2c0a 2020 2020 2020 2020 2320  ETH',.        # 
-000418e0: 2020 2020 2020 2020 2020 636f 696e 3a20            coin: 
-000418f0: 2742 4154 272c 0a20 2020 2020 2020 2023  'BAT',.        #
-00041900: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-00041910: 7261 7749 6e74 6567 6572 4d75 6c74 6970  rawIntegerMultip
-00041920: 6c65 3a20 2730 2e30 3030 3030 3030 3127  le: '0.00000001'
-00041930: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041940: 2020 2020 2020 6973 4465 6661 756c 743a        isDefault:
-00041950: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
-00041960: 2020 2020 2020 2020 2020 2064 6570 6f73             depos
-00041970: 6974 456e 6162 6c65 3a20 5472 7565 2c0a  itEnable: True,.
-00041980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00041990: 2020 2020 7769 7468 6472 6177 456e 6162      withdrawEnab
-000419a0: 6c65 3a20 5472 7565 2c0a 2020 2020 2020  le: True,.      
-000419b0: 2020 2320 2020 2020 2020 2020 2020 6465    #           de
-000419c0: 706f 7369 7444 6573 633a 2027 272c 0a20  positDesc: '',. 
-000419d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000419e0: 2020 2077 6974 6864 7261 7744 6573 633a     withdrawDesc:
-000419f0: 2027 272c 0a20 2020 2020 2020 2023 2020   '',.        #  
-00041a00: 2020 2020 2020 2020 2073 7065 6369 616c           special
-00041a10: 5469 7073 3a20 2754 6865 206e 616d 6520  Tips: 'The name 
-00041a20: 6f66 2073 656c 6620 6173 7365 7420 6973  of self asset is
-00041a30: 2042 6173 6963 2041 7474 656e 7469 6f6e   Basic Attention
-00041a40: 2054 6f6b 656e 2e20 506c 6561 7365 2065   Token. Please e
-00041a50: 6e73 7572 6520 796f 7520 6172 6520 6465  nsure you are de
-00041a60: 706f 7369 7469 6e67 2042 6173 6963 2041  positing Basic A
-00041a70: 7474 656e 7469 6f6e 2054 6f6b 656e 2842  ttention Token(B
-00041a80: 4154 2920 746f 6b65 6e73 2075 6e64 6572  AT) tokens under
-00041a90: 2074 6865 2063 6f6e 7472 6163 7420 6164   the contract ad
-00041aa0: 6472 6573 7320 656e 6469 6e67 2069 6e20  dress ending in 
-00041ab0: 3838 3765 662e 272c 0a20 2020 2020 2020  887ef.',.       
-00041ac0: 2023 2020 2020 2020 2020 2020 206e 616d   #           nam
-00041ad0: 653a 2027 4552 4332 3027 2c0a 2020 2020  e: 'ERC20',.    
-00041ae0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041af0: 7265 7365 7441 6464 7265 7373 5374 6174  resetAddressStat
-00041b00: 7573 3a20 4661 6c73 652c 0a20 2020 2020  us: False,.     
-00041b10: 2020 2023 2020 2020 2020 2020 2020 2061     #           a
-00041b20: 6464 7265 7373 5265 6765 783a 2027 5e28  ddressRegex: '^(
-00041b30: 3078 295b 302d 3941 2d46 612d 665d 7b34  0x)[0-9A-Fa-f]{4
-00041b40: 307d 2427 2c0a 2020 2020 2020 2020 2320  0}$',.        # 
-00041b50: 2020 2020 2020 2020 2020 6d65 6d6f 5265            memoRe
-00041b60: 6765 783a 2027 272c 0a20 2020 2020 2020  gex: '',.       
-00041b70: 2023 2020 2020 2020 2020 2020 2077 6974   #           wit
-00041b80: 6864 7261 7746 6565 3a20 2732 3727 2c0a  hdrawFee: '27',.
-00041b90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00041ba0: 2020 2020 7769 7468 6472 6177 4d69 6e3a      withdrawMin:
-00041bb0: 2027 3534 272c 0a20 2020 2020 2020 2023   '54',.        #
-00041bc0: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-00041bd0: 7261 774d 6178 3a20 2731 3030 3030 3030  rawMax: '1000000
-00041be0: 3030 3030 272c 0a20 2020 2020 2020 2023  0000',.        #
-00041bf0: 2020 2020 2020 2020 2020 206d 696e 436f             minCo
-00041c00: 6e66 6972 6d3a 2027 3132 272c 0a20 2020  nfirm: '12',.   
-00041c10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00041c20: 2075 6e4c 6f63 6b43 6f6e 6669 726d 3a20   unLockConfirm: 
-00041c30: 2730 270a 2020 2020 2020 2020 2320 2020  '0'.        #   
-00041c40: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00041c50: 2320 2020 2020 2020 5d0a 2020 2020 2020  #       ].      
-00041c60: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00041c70: 2020 2320 205d 0a20 2020 2020 2020 2023    #  ].        #
-00041c80: 0a20 2020 2020 2020 2077 6974 6864 7261  .        withdra
-00041c90: 7746 6565 7320 3d20 7b7d 0a20 2020 2020  wFees = {}.     
-00041ca0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-00041cb0: 6528 302c 206c 656e 2872 6573 706f 6e73  e(0, len(respons
-00041cc0: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
-00041cd0: 2065 6e74 7279 203d 2072 6573 706f 6e73   entry = respons
-00041ce0: 655b 695d 0a20 2020 2020 2020 2020 2020  e[i].           
-00041cf0: 2063 7572 7265 6e63 7949 6420 3d20 7365   currencyId = se
-00041d00: 6c66 2e73 6166 655f 7374 7269 6e67 2865  lf.safe_string(e
-00041d10: 6e74 7279 2c20 2763 6f69 6e27 290a 2020  ntry, 'coin').  
-00041d20: 2020 2020 2020 2020 2020 636f 6465 203d            code =
-00041d30: 2073 656c 662e 7361 6665 5f63 7572 7265   self.safe_curre
-00041d40: 6e63 795f 636f 6465 2863 7572 7265 6e63  ncy_code(currenc
-00041d50: 7949 6429 0a20 2020 2020 2020 2020 2020  yId).           
-00041d60: 206e 6574 776f 726b 4c69 7374 203d 2073   networkList = s
-00041d70: 656c 662e 7361 6665 5f76 616c 7565 2865  elf.safe_value(e
-00041d80: 6e74 7279 2c20 276e 6574 776f 726b 4c69  ntry, 'networkLi
-00041d90: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-00041da0: 2020 2020 2077 6974 6864 7261 7746 6565       withdrawFee
-00041db0: 735b 636f 6465 5d20 3d20 7b7d 0a20 2020  s[code] = {}.   
-00041dc0: 2020 2020 2020 2020 2066 6f72 206a 2069           for j i
-00041dd0: 6e20 7261 6e67 6528 302c 206c 656e 286e  n range(0, len(n
-00041de0: 6574 776f 726b 4c69 7374 2929 3a0a 2020  etworkList)):.  
-00041df0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00041e00: 7477 6f72 6b45 6e74 7279 203d 206e 6574  tworkEntry = net
-00041e10: 776f 726b 4c69 7374 5b6a 5d0a 2020 2020  workList[j].    
-00041e20: 2020 2020 2020 2020 2020 2020 6e65 7477              netw
-00041e30: 6f72 6b49 6420 3d20 7365 6c66 2e73 6166  orkId = self.saf
-00041e40: 655f 7374 7269 6e67 286e 6574 776f 726b  e_string(network
-00041e50: 456e 7472 792c 2027 6e65 7477 6f72 6b27  Entry, 'network'
-00041e60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00041e70: 2020 6e65 7477 6f72 6b43 6f64 6520 3d20    networkCode = 
-00041e80: 7365 6c66 2e73 6166 655f 6375 7272 656e  self.safe_curren
-00041e90: 6379 5f63 6f64 6528 6e65 7477 6f72 6b49  cy_code(networkI
-00041ea0: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-00041eb0: 2020 2066 6565 203d 2073 656c 662e 7361     fee = self.sa
-00041ec0: 6665 5f6e 756d 6265 7228 6e65 7477 6f72  fe_number(networ
-00041ed0: 6b45 6e74 7279 2c20 2777 6974 6864 7261  kEntry, 'withdra
-00041ee0: 7746 6565 2729 0a20 2020 2020 2020 2020  wFee').         
-00041ef0: 2020 2020 2020 2077 6974 6864 7261 7746         withdrawF
-00041f00: 6565 735b 636f 6465 5d5b 6e65 7477 6f72  ees[code][networ
-00041f10: 6b43 6f64 655d 203d 2066 6565 0a20 2020  kCode] = fee.   
-00041f20: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
-00041f30: 2020 2020 2020 2020 2020 2777 6974 6864            'withd
-00041f40: 7261 7727 3a20 7769 7468 6472 6177 4665  raw': withdrawFe
-00041f50: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
-00041f60: 2764 6570 6f73 6974 273a 207b 7d2c 0a20  'deposit': {},. 
-00041f70: 2020 2020 2020 2020 2020 2027 696e 666f             'info
-00041f80: 273a 2072 6573 706f 6e73 652c 0a20 2020  ': response,.   
-00041f90: 2020 2020 207d 0a0a 2020 2020 6173 796e       }..    asyn
-00041fa0: 6320 6465 6620 6665 7463 685f 6465 706f  c def fetch_depo
-00041fb0: 7369 745f 7769 7468 6472 6177 5f66 6565  sit_withdraw_fee
-00041fc0: 7328 7365 6c66 2c20 636f 6465 733d 4e6f  s(self, codes=No
-00041fd0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00041fe0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00041ff0: 2020 2020 6665 7463 6820 6465 706f 7369      fetch deposi
-00042000: 7420 616e 6420 7769 7468 6472 6177 2066  t and withdraw f
-00042010: 6565 730a 2020 2020 2020 2020 3a70 6172  ees.        :par
-00042020: 616d 205b 7374 725d 7c4e 6f6e 6520 636f  am [str]|None co
-00042030: 6465 733a 206e 6f74 2075 7365 6420 6279  des: not used by
-00042040: 2062 696e 616e 6365 2066 6574 6368 4465   binance fetchDe
-00042050: 706f 7369 7457 6974 6864 7261 7746 6565  positWithdrawFee
-00042060: 7328 290a 2020 2020 2020 2020 3a70 6172  s().        :par
-00042070: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-00042080: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-00042090: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-000420a0: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
-000420b0: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-000420c0: 6574 7572 6e73 205b 6469 6374 5d3a 2061  eturns [dict]: a
-000420d0: 206c 6973 7420 6f66 2060 6665 6520 7374   list of `fee st
-000420e0: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
-000420f0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00042100: 232f 3f69 643d 6665 652d 7374 7275 6374  #/?id=fee-struct
-00042110: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-00042120: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-00042130: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00042140: 7328 290a 2020 2020 2020 2020 7265 7370  s().        resp
-00042150: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
-00042160: 662e 7361 7069 4765 7443 6170 6974 616c  f.sapiGetCapital
-00042170: 436f 6e66 6967 4765 7461 6c6c 2870 6172  ConfigGetall(par
-00042180: 616d 7329 0a20 2020 2020 2020 2023 0a20  ams).        #. 
-00042190: 2020 2020 2020 2023 2020 2020 5b0a 2020         #    [.  
-000421a0: 2020 2020 2020 2320 2020 2020 2020 207b        #        {
-000421b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000421c0: 2020 2020 2020 636f 696e 3a20 2742 4154        coin: 'BAT
-000421d0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-000421e0: 2020 2020 2020 2020 6465 706f 7369 7441          depositA
-000421f0: 6c6c 456e 6162 6c65 3a20 5472 7565 2c0a  llEnable: True,.
-00042200: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00042210: 2020 2020 2077 6974 6864 7261 7741 6c6c       withdrawAll
-00042220: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
-00042230: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042240: 2020 206e 616d 653a 2027 4261 7369 6320     name: 'Basic 
-00042250: 4174 7465 6e74 696f 6e20 546f 6b65 6e27  Attention Token'
-00042260: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042270: 2020 2020 2020 2066 7265 653a 2027 3027         free: '0'
-00042280: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042290: 2020 2020 2020 206c 6f63 6b65 643a 2027         locked: '
-000422a0: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
-000422b0: 2020 2020 2020 2020 2066 7265 657a 653a           freeze:
-000422c0: 2027 3027 2c0a 2020 2020 2020 2020 2320   '0',.        # 
-000422d0: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-000422e0: 7261 7769 6e67 3a20 2730 272c 0a20 2020  rawing: '0',.   
-000422f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042300: 2020 6970 6f69 6e67 3a20 2730 272c 0a20    ipoing: '0',. 
-00042310: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042320: 2020 2020 6970 6f61 626c 653a 2027 3027      ipoable: '0'
-00042330: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042340: 2020 2020 2020 2073 746f 7261 6765 3a20         storage: 
-00042350: 2730 272c 0a20 2020 2020 2020 2023 2020  '0',.        #  
-00042360: 2020 2020 2020 2020 2020 6973 4c65 6761            isLega
-00042370: 6c4d 6f6e 6579 3a20 4661 6c73 652c 0a20  lMoney: False,. 
-00042380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042390: 2020 2020 7472 6164 696e 673a 2054 7275      trading: Tru
-000423a0: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-000423b0: 2020 2020 2020 2020 6e65 7477 6f72 6b4c          networkL
-000423c0: 6973 743a 205b 0a20 2020 2020 2020 2023  ist: [.        #
-000423d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000423e0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000423f0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00042400: 6574 776f 726b 3a20 2742 4e42 272c 0a20  etwork: 'BNB',. 
-00042410: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042420: 2020 2020 2020 2020 2020 2020 636f 696e              coin
-00042430: 3a20 2742 4154 272c 0a20 2020 2020 2020  : 'BAT',.       
-00042440: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042450: 2020 2020 2020 7769 7468 6472 6177 496e        withdrawIn
-00042460: 7465 6765 724d 756c 7469 706c 653a 2027  tegerMultiple: '
-00042470: 302e 3030 3030 3030 3031 272c 0a20 2020  0.00000001',.   
-00042480: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042490: 2020 2020 2020 2020 2020 6973 4465 6661            isDefa
-000424a0: 756c 743a 2046 616c 7365 2c0a 2020 2020  ult: False,.    
-000424b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000424c0: 2020 2020 2020 2020 2064 6570 6f73 6974           deposit
-000424d0: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
-000424e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000424f0: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-00042500: 7261 7745 6e61 626c 653a 2054 7275 652c  rawEnable: True,
-00042510: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042520: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00042530: 706f 7369 7444 6573 633a 2027 272c 0a20  positDesc: '',. 
-00042540: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042550: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00042560: 6472 6177 4465 7363 3a20 2727 2c0a 2020  drawDesc: '',.  
-00042570: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042580: 2020 2020 2020 2020 2020 2073 7065 6369             speci
-00042590: 616c 5469 7073 3a20 2754 6865 206e 616d  alTips: 'The nam
-000425a0: 6520 6f66 2073 656c 6620 6173 7365 7420  e of self asset 
-000425b0: 6973 2042 6173 6963 2041 7474 656e 7469  is Basic Attenti
-000425c0: 6f6e 2054 6f6b 656e 2842 4154 292e 2042  on Token(BAT). B
-000425d0: 6f74 6820 6120 4d45 4d4f 2061 6e64 2061  oth a MEMO and a
-000425e0: 6e20 4164 6472 6573 7320 6172 6520 7265  n Address are re
-000425f0: 7175 6972 6564 2074 6f20 7375 6363 6573  quired to succes
-00042600: 7366 756c 6c79 2064 6570 6f73 6974 2079  sfully deposit y
-00042610: 6f75 7220 4245 5032 2074 6f6b 656e 7320  our BEP2 tokens 
-00042620: 746f 2042 696e 616e 6365 2e27 2c0a 2020  to Binance.',.  
-00042630: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042640: 2020 2020 2020 2020 2020 206e 616d 653a             name:
-00042650: 2027 4245 5032 272c 0a20 2020 2020 2020   'BEP2',.       
-00042660: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042670: 2020 2020 2020 7265 7365 7441 6464 7265        resetAddre
-00042680: 7373 5374 6174 7573 3a20 4661 6c73 652c  ssStatus: False,
-00042690: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000426a0: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-000426b0: 6472 6573 7352 6567 6578 3a20 275e 2862  dressRegex: '^(b
-000426c0: 6e62 3129 5b30 2d39 612d 7a5d 7b33 387d  nb1)[0-9a-z]{38}
-000426d0: 2427 2c0a 2020 2020 2020 2020 2320 2020  $',.        #   
-000426e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426f0: 206d 656d 6f52 6567 6578 3a20 275e 5b30   memoRegex: '^[0
-00042700: 2d39 412d 5a61 2d7a 5c5c 2d5f 5d7b 312c  -9A-Za-z\\-_]{1,
-00042710: 3132 307d 2427 2c0a 2020 2020 2020 2020  120}$',.        
-00042720: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00042730: 2020 2020 2077 6974 6864 7261 7746 6565       withdrawFee
-00042740: 3a20 2730 2e32 3727 2c0a 2020 2020 2020  : '0.27',.      
-00042750: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042760: 2020 2020 2020 2077 6974 6864 7261 774d         withdrawM
-00042770: 696e 3a20 2730 2e35 3427 2c0a 2020 2020  in: '0.54',.    
-00042780: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042790: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
-000427a0: 774d 6178 3a20 2731 3030 3030 3030 3030  wMax: '100000000
-000427b0: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
-000427c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000427d0: 2020 6d69 6e43 6f6e 6669 726d 3a20 2731    minConfirm: '1
-000427e0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-000427f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042800: 756e 4c6f 636b 436f 6e66 6972 6d3a 2027  unLockConfirm: '
-00042810: 3027 0a20 2020 2020 2020 2023 2020 2020  0'.        #    
-00042820: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-00042830: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042840: 2020 2020 2020 2020 2e2e 2e0a 2020 2020          ....    
-00042850: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042860: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
-00042870: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-00042880: 2020 205d 0a20 2020 2020 2020 2023 0a20     ].        #. 
-00042890: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000428a0: 6c66 2e70 6172 7365 5f64 6570 6f73 6974  lf.parse_deposit
-000428b0: 5f77 6974 6864 7261 775f 6665 6573 2872  _withdraw_fees(r
-000428c0: 6573 706f 6e73 652c 2063 6f64 6573 2c20  esponse, codes, 
-000428d0: 2763 6f69 6e27 290a 0a20 2020 2064 6566  'coin')..    def
-000428e0: 2070 6172 7365 5f64 6570 6f73 6974 5f77   parse_deposit_w
-000428f0: 6974 6864 7261 775f 6665 6528 7365 6c66  ithdraw_fee(self
-00042900: 2c20 6665 652c 2063 7572 7265 6e63 793d  , fee, currency=
-00042910: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
-00042920: 0a20 2020 2020 2020 2023 2020 2020 7b0a  .        #    {.
-00042930: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00042940: 2063 6f69 6e3a 2027 4241 5427 2c0a 2020   coin: 'BAT',.  
-00042950: 2020 2020 2020 2320 2020 2020 2020 2064        #        d
-00042960: 6570 6f73 6974 416c 6c45 6e61 626c 653a  epositAllEnable:
-00042970: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
-00042980: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
-00042990: 416c 6c45 6e61 626c 653a 2054 7275 652c  AllEnable: True,
-000429a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000429b0: 2020 6e61 6d65 3a20 2742 6173 6963 2041    name: 'Basic A
-000429c0: 7474 656e 7469 6f6e 2054 6f6b 656e 272c  ttention Token',
-000429d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000429e0: 2020 6672 6565 3a20 2730 272c 0a20 2020    free: '0',.   
-000429f0: 2020 2020 2023 2020 2020 2020 2020 6c6f       #        lo
-00042a00: 636b 6564 3a20 2730 272c 0a20 2020 2020  cked: '0',.     
-00042a10: 2020 2023 2020 2020 2020 2020 6672 6565     #        free
-00042a20: 7a65 3a20 2730 272c 0a20 2020 2020 2020  ze: '0',.       
-00042a30: 2023 2020 2020 2020 2020 7769 7468 6472   #        withdr
-00042a40: 6177 696e 673a 2027 3027 2c0a 2020 2020  awing: '0',.    
-00042a50: 2020 2020 2320 2020 2020 2020 2069 706f      #        ipo
-00042a60: 696e 673a 2027 3027 2c0a 2020 2020 2020  ing: '0',.      
-00042a70: 2020 2320 2020 2020 2020 2069 706f 6162    #        ipoab
-00042a80: 6c65 3a20 2730 272c 0a20 2020 2020 2020  le: '0',.       
-00042a90: 2023 2020 2020 2020 2020 7374 6f72 6167   #        storag
-00042aa0: 653a 2027 3027 2c0a 2020 2020 2020 2020  e: '0',.        
-00042ab0: 2320 2020 2020 2020 2069 734c 6567 616c  #        isLegal
-00042ac0: 4d6f 6e65 793a 2046 616c 7365 2c0a 2020  Money: False,.  
-00042ad0: 2020 2020 2020 2320 2020 2020 2020 2074        #        t
-00042ae0: 7261 6469 6e67 3a20 5472 7565 2c0a 2020  rading: True,.  
-00042af0: 2020 2020 2020 2320 2020 2020 2020 206e        #        n
-00042b00: 6574 776f 726b 4c69 7374 3a20 5b0a 2020  etworkList: [.  
-00042b10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042b20: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00042b30: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00042b40: 7477 6f72 6b3a 2027 424e 4227 2c0a 2020  twork: 'BNB',.  
-00042b50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042b60: 2020 2020 2020 2063 6f69 6e3a 2027 4241         coin: 'BA
-00042b70: 5427 2c0a 2020 2020 2020 2020 2320 2020  T',.        #   
-00042b80: 2020 2020 2020 2020 2020 2020 2077 6974               wit
-00042b90: 6864 7261 7749 6e74 6567 6572 4d75 6c74  hdrawIntegerMult
-00042ba0: 6970 6c65 3a20 2730 2e30 3030 3030 3030  iple: '0.0000000
-00042bb0: 3127 2c0a 2020 2020 2020 2020 2320 2020  1',.        #   
-00042bc0: 2020 2020 2020 2020 2020 2020 2069 7344               isD
-00042bd0: 6566 6175 6c74 3a20 4661 6c73 652c 0a20  efault: False,. 
-00042be0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042bf0: 2020 2020 2020 2020 6465 706f 7369 7445          depositE
-00042c00: 6e61 626c 653a 2054 7275 652c 0a20 2020  nable: True,.   
-00042c10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042c20: 2020 2020 2020 7769 7468 6472 6177 456e        withdrawEn
-00042c30: 6162 6c65 3a20 5472 7565 2c0a 2020 2020  able: True,.    
-00042c40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042c50: 2020 2020 2064 6570 6f73 6974 4465 7363       depositDesc
-00042c60: 3a20 2727 2c0a 2020 2020 2020 2020 2320  : '',.        # 
-00042c70: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00042c80: 6974 6864 7261 7744 6573 633a 2027 272c  ithdrawDesc: '',
-00042c90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042ca0: 2020 2020 2020 2020 2020 7370 6563 6961            specia
-00042cb0: 6c54 6970 733a 2027 5468 6520 6e61 6d65  lTips: 'The name
-00042cc0: 206f 6620 7365 6c66 2061 7373 6574 2069   of self asset i
-00042cd0: 7320 4261 7369 6320 4174 7465 6e74 696f  s Basic Attentio
-00042ce0: 6e20 546f 6b65 6e28 4241 5429 2e20 426f  n Token(BAT). Bo
-00042cf0: 7468 2061 204d 454d 4f20 616e 6420 616e  th a MEMO and an
-00042d00: 2041 6464 7265 7373 2061 7265 2072 6571   Address are req
-00042d10: 7569 7265 6420 746f 2073 7563 6365 7373  uired to success
-00042d20: 6675 6c6c 7920 6465 706f 7369 7420 796f  fully deposit yo
-00042d30: 7572 2042 4550 3220 746f 6b65 6e73 2074  ur BEP2 tokens t
-00042d40: 6f20 4269 6e61 6e63 652e 272c 0a20 2020  o Binance.',.   
-00042d50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042d60: 2020 2020 2020 6e61 6d65 3a20 2742 4550        name: 'BEP
-00042d70: 3227 2c0a 2020 2020 2020 2020 2320 2020  2',.        #   
-00042d80: 2020 2020 2020 2020 2020 2020 2072 6573               res
-00042d90: 6574 4164 6472 6573 7353 7461 7475 733a  etAddressStatus:
-00042da0: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-00042db0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00042dc0: 2061 6464 7265 7373 5265 6765 783a 2027   addressRegex: '
-00042dd0: 5e28 626e 6231 295b 302d 3961 2d7a 5d7b  ^(bnb1)[0-9a-z]{
-00042de0: 3338 7d24 272c 0a20 2020 2020 2020 2023  38}$',.        #
-00042df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042e00: 6d65 6d6f 5265 6765 783a 2027 5e5b 302d  memoRegex: '^[0-
-00042e10: 3941 2d5a 612d 7a5c 5c2d 5f5d 7b31 2c31  9A-Za-z\\-_]{1,1
-00042e20: 3230 7d24 272c 0a20 2020 2020 2020 2023  20}$',.        #
-00042e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042e40: 7769 7468 6472 6177 4665 653a 2027 302e  withdrawFee: '0.
-00042e50: 3237 272c 0a20 2020 2020 2020 2023 2020  27',.        #  
-00042e60: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-00042e70: 7468 6472 6177 4d69 6e3a 2027 302e 3534  thdrawMin: '0.54
-00042e80: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00042e90: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00042ea0: 6472 6177 4d61 783a 2027 3130 3030 3030  drawMax: '100000
-00042eb0: 3030 3030 3027 2c0a 2020 2020 2020 2020  00000',.        
-00042ec0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00042ed0: 206d 696e 436f 6e66 6972 6d3a 2027 3127   minConfirm: '1'
-00042ee0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042ef0: 2020 2020 2020 2020 2020 2075 6e4c 6f63             unLoc
-00042f00: 6b43 6f6e 6669 726d 3a20 2730 270a 2020  kConfirm: '0'.  
-00042f10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042f20: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00042f30: 2020 2020 2020 2020 2020 202e 2e2e 0a20             .... 
-00042f40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042f50: 5d0a 2020 2020 2020 2020 2320 2020 207d  ].        #    }
-00042f60: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00042f70: 2020 206e 6574 776f 726b 4c69 7374 203d     networkList =
-00042f80: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00042f90: 2866 6565 2c20 276e 6574 776f 726b 4c69  (fee, 'networkLi
-00042fa0: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-00042fb0: 2072 6573 756c 7420 3d20 7365 6c66 2e64   result = self.d
-00042fc0: 6570 6f73 6974 5f77 6974 6864 7261 775f  eposit_withdraw_
-00042fd0: 6665 6528 6665 6529 0a20 2020 2020 2020  fee(fee).       
-00042fe0: 2066 6f72 206a 2069 6e20 7261 6e67 6528   for j in range(
-00042ff0: 302c 206c 656e 286e 6574 776f 726b 4c69  0, len(networkLi
-00043000: 7374 2929 3a0a 2020 2020 2020 2020 2020  st)):.          
-00043010: 2020 6e65 7477 6f72 6b45 6e74 7279 203d    networkEntry =
-00043020: 206e 6574 776f 726b 4c69 7374 5b6a 5d0a   networkList[j].
-00043030: 2020 2020 2020 2020 2020 2020 6e65 7477              netw
-00043040: 6f72 6b49 6420 3d20 7365 6c66 2e73 6166  orkId = self.saf
-00043050: 655f 7374 7269 6e67 286e 6574 776f 726b  e_string(network
-00043060: 456e 7472 792c 2027 6e65 7477 6f72 6b27  Entry, 'network'
-00043070: 290a 2020 2020 2020 2020 2020 2020 6e65  ).            ne
-00043080: 7477 6f72 6b43 6f64 6520 3d20 7365 6c66  tworkCode = self
-00043090: 2e6e 6574 776f 726b 5f69 645f 746f 5f63  .network_id_to_c
-000430a0: 6f64 6528 6e65 7477 6f72 6b49 6429 0a20  ode(networkId). 
-000430b0: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-000430c0: 7261 7746 6565 203d 2073 656c 662e 7361  rawFee = self.sa
-000430d0: 6665 5f6e 756d 6265 7228 6e65 7477 6f72  fe_number(networ
-000430e0: 6b45 6e74 7279 2c20 2777 6974 6864 7261  kEntry, 'withdra
-000430f0: 7746 6565 2729 0a20 2020 2020 2020 2020  wFee').         
-00043100: 2020 2069 7344 6566 6175 6c74 203d 2073     isDefault = s
-00043110: 656c 662e 7361 6665 5f76 616c 7565 286e  elf.safe_value(n
-00043120: 6574 776f 726b 456e 7472 792c 2027 6973  etworkEntry, 'is
-00043130: 4465 6661 756c 7427 290a 2020 2020 2020  Default').      
-00043140: 2020 2020 2020 6966 2069 7344 6566 6175        if isDefau
-00043150: 6c74 2069 7320 5472 7565 3a0a 2020 2020  lt is True:.    
-00043160: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00043170: 6c74 5b27 7769 7468 6472 6177 275d 203d  lt['withdraw'] =
-00043180: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00043190: 2020 2020 2020 2027 6665 6527 3a20 7769         'fee': wi
-000431a0: 7468 6472 6177 4665 652c 0a20 2020 2020  thdrawFee,.     
-000431b0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-000431c0: 7065 7263 656e 7461 6765 273a 204e 6f6e  percentage': Non
-000431d0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-000431e0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-000431f0: 2072 6573 756c 745b 276e 6574 776f 726b   result['network
-00043200: 7327 5d5b 6e65 7477 6f72 6b43 6f64 655d  s'][networkCode]
-00043210: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00043220: 2020 2020 2027 7769 7468 6472 6177 273a       'withdraw':
-00043230: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00043240: 2020 2020 2020 2027 6665 6527 3a20 7769         'fee': wi
-00043250: 7468 6472 6177 4665 652c 0a20 2020 2020  thdrawFee,.     
-00043260: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00043270: 7065 7263 656e 7461 6765 273a 204e 6f6e  percentage': Non
-00043280: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00043290: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
-000432a0: 2020 2020 2020 2764 6570 6f73 6974 273a        'deposit':
-000432b0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-000432c0: 2020 2020 2020 2027 6665 6527 3a20 4e6f         'fee': No
-000432d0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-000432e0: 2020 2020 2020 2020 2770 6572 6365 6e74          'percent
-000432f0: 6167 6527 3a20 4e6f 6e65 2c0a 2020 2020  age': None,.    
-00043300: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-00043310: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00043320: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00043330: 6c74 0a0a 2020 2020 6173 796e 6320 6465  lt..    async de
-00043340: 6620 7769 7468 6472 6177 2873 656c 662c  f withdraw(self,
-00043350: 2063 6f64 653a 2073 7472 2c20 616d 6f75   code: str, amou
-00043360: 6e74 2c20 6164 6472 6573 732c 2074 6167  nt, address, tag
-00043370: 3d4e 6f6e 652c 2070 6172 616d 733d 7b7d  =None, params={}
-00043380: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00043390: 2020 2020 2020 206d 616b 6520 6120 7769         make a wi
-000433a0: 7468 6472 6177 616c 0a20 2020 2020 2020  thdrawal.       
-000433b0: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
-000433c0: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
-000433d0: 6379 2063 6f64 650a 2020 2020 2020 2020  cy code.        
-000433e0: 3a70 6172 616d 2066 6c6f 6174 2061 6d6f  :param float amo
-000433f0: 756e 743a 2074 6865 2061 6d6f 756e 7420  unt: the amount 
-00043400: 746f 2077 6974 6864 7261 770a 2020 2020  to withdraw.    
-00043410: 2020 2020 3a70 6172 616d 2073 7472 2061      :param str a
-00043420: 6464 7265 7373 3a20 7468 6520 6164 6472  ddress: the addr
-00043430: 6573 7320 746f 2077 6974 6864 7261 7720  ess to withdraw 
-00043440: 746f 0a20 2020 2020 2020 203a 7061 7261  to.        :para
-00043450: 6d20 7374 727c 4e6f 6e65 2074 6167 3a0a  m str|None tag:.
-00043460: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-00043470: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-00043480: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-00043490: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
-000434a0: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
-000434b0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-000434c0: 6e73 2064 6963 743a 2061 2060 7472 616e  ns dict: a `tran
-000434d0: 7361 6374 696f 6e20 7374 7275 6374 7572  saction structur
-000434e0: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
-000434f0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
-00043500: 7261 6e73 6163 7469 6f6e 2d73 7472 7563  ransaction-struc
-00043510: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-00043520: 2222 0a20 2020 2020 2020 2074 6167 2c20  "".        tag, 
-00043530: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
-00043540: 6e64 6c65 5f77 6974 6864 7261 775f 7461  ndle_withdraw_ta
-00043550: 675f 616e 645f 7061 7261 6d73 2874 6167  g_and_params(tag
-00043560: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
-00043570: 2020 7365 6c66 2e63 6865 636b 5f61 6464    self.check_add
-00043580: 7265 7373 2861 6464 7265 7373 290a 2020  ress(address).  
-00043590: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-000435a0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-000435b0: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-000435c0: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
-000435d0: 2863 6f64 6529 0a20 2020 2020 2020 2072  (code).        r
-000435e0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-000435f0: 2020 2020 2020 2027 636f 696e 273a 2063         'coin': c
-00043600: 7572 7265 6e63 795b 2769 6427 5d2c 0a20  urrency['id'],. 
-00043610: 2020 2020 2020 2020 2020 2027 6164 6472             'addr
-00043620: 6573 7327 3a20 6164 6472 6573 732c 0a20  ess': address,. 
-00043630: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
-00043640: 6e74 273a 2061 6d6f 756e 742c 0a20 2020  nt': amount,.   
-00043650: 2020 2020 2020 2020 2023 2068 7474 7073           # https
-00043660: 3a2f 2f62 696e 616e 6365 2d64 6f63 732e  ://binance-docs.
-00043670: 6769 7468 7562 2e69 6f2f 6170 6964 6f63  github.io/apidoc
-00043680: 732f 7370 6f74 2f65 6e2f 2377 6974 6864  s/spot/en/#withd
-00043690: 7261 772d 7361 7069 0a20 2020 2020 2020  raw-sapi.       
-000436a0: 2020 2020 2023 2069 7373 7565 2073 6170       # issue sap
-000436b0: 6947 6574 4361 7069 7461 6c43 6f6e 6669  iGetCapitalConfi
-000436c0: 6747 6574 616c 6c28 2920 746f 2067 6574  gGetall() to get
-000436d0: 206e 6574 776f 726b 7320 666f 7220 7769   networks for wi
-000436e0: 7468 6472 6177 696e 6720 5553 4454 2045  thdrawing USDT E
-000436f0: 5243 3230 2076 7320 5553 4454 204f 6d6e  RC20 vs USDT Omn
-00043700: 690a 2020 2020 2020 2020 2020 2020 2320  i.            # 
-00043710: 276e 6574 776f 726b 273a 2027 4554 4827  'network': 'ETH'
-00043720: 2c20 2023 2027 4254 4327 2c20 2754 5258  ,  # 'BTC', 'TRX
-00043730: 272c 2065 7463 2c20 6f70 7469 6f6e 616c  ', etc, optional
-00043740: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00043750: 2020 2069 6620 7461 6720 6973 206e 6f74     if tag is not
-00043760: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00043770: 2020 2072 6571 7565 7374 5b27 6164 6472     request['addr
-00043780: 6573 7354 6167 275d 203d 2074 6167 0a20  essTag'] = tag. 
-00043790: 2020 2020 2020 206e 6574 776f 726b 7320         networks 
-000437a0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-000437b0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
-000437c0: 276e 6574 776f 726b 7327 2c20 7b7d 290a  'networks', {}).
-000437d0: 2020 2020 2020 2020 6e65 7477 6f72 6b20          network 
-000437e0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-000437f0: 6e67 5f75 7070 6572 2870 6172 616d 732c  ng_upper(params,
-00043800: 2027 6e65 7477 6f72 6b27 2920 2023 2073   'network')  # s
-00043810: 656c 6620 6c69 6e65 2061 6c6c 6f77 7320  elf line allows 
-00043820: 7468 6520 7573 6572 2074 6f20 7370 6563  the user to spec
-00043830: 6966 7920 6569 7468 6572 2045 5243 3230  ify either ERC20
-00043840: 206f 7220 4554 480a 2020 2020 2020 2020   or ETH.        
-00043850: 6e65 7477 6f72 6b20 3d20 7365 6c66 2e73  network = self.s
-00043860: 6166 655f 7374 7269 6e67 286e 6574 776f  afe_string(netwo
-00043870: 726b 732c 206e 6574 776f 726b 2c20 6e65  rks, network, ne
-00043880: 7477 6f72 6b29 2020 2320 6861 6e64 6c65  twork)  # handle
-00043890: 2045 5243 3230 3e45 5448 2061 6c69 6173   ERC20>ETH alias
-000438a0: 0a20 2020 2020 2020 2069 6620 6e65 7477  .        if netw
-000438b0: 6f72 6b20 6973 206e 6f74 204e 6f6e 653a  ork is not None:
-000438c0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000438d0: 7565 7374 5b27 6e65 7477 6f72 6b27 5d20  uest['network'] 
-000438e0: 3d20 6e65 7477 6f72 6b0a 2020 2020 2020  = network.      
-000438f0: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
-00043900: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-00043910: 2027 6e65 7477 6f72 6b27 290a 2020 2020   'network').    
-00043920: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-00043930: 7761 6974 2073 656c 662e 7361 7069 506f  wait self.sapiPo
-00043940: 7374 4361 7069 7461 6c57 6974 6864 7261  stCapitalWithdra
-00043950: 7741 7070 6c79 2873 656c 662e 6578 7465  wApply(self.exte
-00043960: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-00043970: 6d73 2929 0a20 2020 2020 2020 2023 2020  ms)).        #  
-00043980: 2020 207b 6964 3a20 2739 6136 3736 3238     {id: '9a67628
-00043990: 6231 3662 6134 3938 3861 6532 3064 3332  b16ba4988ae20d32
-000439a0: 3933 3333 6631 3662 6327 7d0a 2020 2020  9333f16bc'}.    
-000439b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000439c0: 7061 7273 655f 7472 616e 7361 6374 696f  parse_transactio
-000439d0: 6e28 7265 7370 6f6e 7365 2c20 6375 7272  n(response, curr
-000439e0: 656e 6379 290a 0a20 2020 2064 6566 2070  ency)..    def p
-000439f0: 6172 7365 5f74 7261 6469 6e67 5f66 6565  arse_trading_fee
-00043a00: 2873 656c 662c 2066 6565 2c20 6d61 726b  (self, fee, mark
-00043a10: 6574 3d4e 6f6e 6529 3a0a 2020 2020 2020  et=None):.      
-00043a20: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00043a30: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00043a40: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00043a50: 2241 4441 424e 4222 2c0a 2020 2020 2020  "ADABNB",.      
-00043a60: 2020 2320 2020 2020 2020 2020 226d 616b    #         "mak
-00043a70: 6572 436f 6d6d 6973 7369 6f6e 223a 2030  erCommission": 0
-00043a80: 2e30 3031 2c0a 2020 2020 2020 2020 2320  .001,.        # 
-00043a90: 2020 2020 2020 2020 2274 616b 6572 436f          "takerCo
-00043aa0: 6d6d 6973 7369 6f6e 223a 2030 2e30 3031  mmission": 0.001
-00043ab0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00043ac0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00043ad0: 2020 206d 6172 6b65 7449 6420 3d20 7365     marketId = se
-00043ae0: 6c66 2e73 6166 655f 7374 7269 6e67 2866  lf.safe_string(f
-00043af0: 6565 2c20 2773 796d 626f 6c27 290a 2020  ee, 'symbol').  
-00043b00: 2020 2020 2020 7379 6d62 6f6c 203d 2073        symbol = s
-00043b10: 656c 662e 7361 6665 5f73 796d 626f 6c28  elf.safe_symbol(
-00043b20: 6d61 726b 6574 4964 2c20 6d61 726b 6574  marketId, market
-00043b30: 2c20 4e6f 6e65 2c20 2773 706f 7427 290a  , None, 'spot').
-00043b40: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-00043b50: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-00043b60: 666f 273a 2066 6565 2c0a 2020 2020 2020  fo': fee,.      
-00043b70: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-00043b80: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
-00043b90: 2020 2020 276d 616b 6572 273a 2073 656c      'maker': sel
-00043ba0: 662e 7361 6665 5f6e 756d 6265 7228 6665  f.safe_number(fe
-00043bb0: 652c 2027 6d61 6b65 7243 6f6d 6d69 7373  e, 'makerCommiss
-00043bc0: 696f 6e27 292c 0a20 2020 2020 2020 2020  ion'),.         
-00043bd0: 2020 2027 7461 6b65 7227 3a20 7365 6c66     'taker': self
-00043be0: 2e73 6166 655f 6e75 6d62 6572 2866 6565  .safe_number(fee
-00043bf0: 2c20 2774 616b 6572 436f 6d6d 6973 7369  , 'takerCommissi
-00043c00: 6f6e 2729 2c0a 2020 2020 2020 2020 7d0a  on'),.        }.
-00043c10: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-00043c20: 6574 6368 5f74 7261 6469 6e67 5f66 6565  etch_trading_fee
-00043c30: 2873 656c 662c 2073 796d 626f 6c3a 2073  (self, symbol: s
-00043c40: 7472 2c20 7061 7261 6d73 3d7b 7d29 3a0a  tr, params={}):.
-00043c50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00043c60: 2020 2020 6665 7463 6820 7468 6520 7472      fetch the tr
-00043c70: 6164 696e 6720 6665 6573 2066 6f72 2061  ading fees for a
-00043c80: 206d 6172 6b65 740a 2020 2020 2020 2020   market.        
-00043c90: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
-00043ca0: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
-00043cb0: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
-00043cc0: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00043cd0: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00043ce0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00043cf0: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
-00043d00: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00043d10: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-00043d20: 3a20 6120 6066 6565 2073 7472 7563 7475  : a `fee structu
-00043d30: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
-00043d40: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-00043d50: 6665 652d 7374 7275 6374 7572 653e 600a  fee-structure>`.
-00043d60: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00043d70: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
-00043d80: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00043d90: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00043da0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00043db0: 6c29 0a20 2020 2020 2020 2072 6571 7565  l).        reque
-00043dc0: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
-00043dd0: 2020 2027 7379 6d62 6f6c 273a 206d 6172     'symbol': mar
-00043de0: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
-00043df0: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
-00043e00: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
-00043e10: 6c66 2e73 6170 6947 6574 4173 7365 7454  lf.sapiGetAssetT
-00043e20: 7261 6465 4665 6528 7365 6c66 2e65 7874  radeFee(self.ext
-00043e30: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00043e40: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00043e50: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
-00043e60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00043e70: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00043e80: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
-00043e90: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
-00043ea0: 2023 2020 2020 2020 2020 2022 6d61 6b65   #         "make
-00043eb0: 7243 6f6d 6d69 7373 696f 6e22 3a20 2230  rCommission": "0
-00043ec0: 2e30 3031 222c 0a20 2020 2020 2020 2023  .001",.        #
-00043ed0: 2020 2020 2020 2020 2022 7461 6b65 7243           "takerC
-00043ee0: 6f6d 6d69 7373 696f 6e22 3a20 2230 2e30  ommission": "0.0
-00043ef0: 3031 220a 2020 2020 2020 2020 2320 2020  01".        #   
-00043f00: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-00043f10: 2020 2020 5d0a 2020 2020 2020 2020 230a      ].        #.
-00043f20: 2020 2020 2020 2020 6669 7273 7420 3d20          first = 
-00043f30: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00043f40: 7265 7370 6f6e 7365 2c20 302c 207b 7d29  response, 0, {})
-00043f50: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00043f60: 7365 6c66 2e70 6172 7365 5f74 7261 6469  self.parse_tradi
-00043f70: 6e67 5f66 6565 2866 6972 7374 290a 0a20  ng_fee(first).. 
-00043f80: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
-00043f90: 6368 5f74 7261 6469 6e67 5f66 6565 7328  ch_trading_fees(
-00043fa0: 7365 6c66 2c20 7061 7261 6d73 3d7b 7d29  self, params={})
-00043fb0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00043fc0: 2020 2020 2020 6665 7463 6820 7468 6520        fetch the 
-00043fd0: 7472 6164 696e 6720 6665 6573 2066 6f72  trading fees for
-00043fe0: 206d 756c 7469 706c 6520 6d61 726b 6574   multiple market
-00043ff0: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-00044000: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-00044010: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00044020: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-00044030: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
-00044040: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-00044050: 7572 6e73 2064 6963 743a 2061 2064 6963  urns dict: a dic
-00044060: 7469 6f6e 6172 7920 6f66 2060 6665 6520  tionary of `fee 
-00044070: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
-00044080: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-00044090: 6d2f 232f 3f69 643d 6665 652d 7374 7275  m/#/?id=fee-stru
-000440a0: 6374 7572 653e 6020 696e 6465 7865 6420  cture>` indexed 
-000440b0: 6279 206d 6172 6b65 7420 7379 6d62 6f6c  by market symbol
-000440c0: 730a 2020 2020 2020 2020 2222 220a 2020  s.        """.  
-000440d0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-000440e0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-000440f0: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00044100: 204e 6f6e 650a 2020 2020 2020 2020 6465   None.        de
-00044110: 6661 756c 7454 7970 6520 3d20 7365 6c66  faultType = self
-00044120: 2e73 6166 655f 7374 7269 6e67 5f32 2873  .safe_string_2(s
-00044130: 656c 662e 6f70 7469 6f6e 732c 2027 6665  elf.options, 'fe
-00044140: 7463 6854 7261 6469 6e67 4665 6573 272c  tchTradingFees',
-00044150: 2027 6465 6661 756c 7454 7970 6527 2c20   'defaultType', 
-00044160: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
-00044170: 2020 7479 7065 203d 2073 656c 662e 7361    type = self.sa
-00044180: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
-00044190: 2c20 2774 7970 6527 2c20 6465 6661 756c  , 'type', defaul
-000441a0: 7454 7970 6529 0a20 2020 2020 2020 2070  tType).        p
-000441b0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-000441c0: 7428 7061 7261 6d73 2c20 2774 7970 6527  t(params, 'type'
-000441d0: 290a 2020 2020 2020 2020 7375 6254 7970  ).        subTyp
-000441e0: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-000441f0: 2073 7562 5479 7065 2c20 7061 7261 6d73   subType, params
-00044200: 203d 2073 656c 662e 6861 6e64 6c65 5f73   = self.handle_s
-00044210: 7562 5f74 7970 655f 616e 645f 7061 7261  ub_type_and_para
-00044220: 6d73 2827 6665 7463 6854 7261 6469 6e67  ms('fetchTrading
-00044230: 4665 6573 272c 204e 6f6e 652c 2070 6172  Fees', None, par
-00044240: 616d 7329 0a20 2020 2020 2020 2069 7353  ams).        isS
-00044250: 706f 744f 724d 6172 6769 6e20 3d20 2874  potOrMargin = (t
-00044260: 7970 6520 3d3d 2027 7370 6f74 2729 206f  ype == 'spot') o
-00044270: 7220 2874 7970 6520 3d3d 2027 6d61 7267  r (type == 'marg
-00044280: 696e 2729 0a20 2020 2020 2020 2069 734c  in').        isL
-00044290: 696e 6561 7220 3d20 7365 6c66 2e69 735f  inear = self.is_
-000442a0: 6c69 6e65 6172 2874 7970 652c 2073 7562  linear(type, sub
-000442b0: 5479 7065 290a 2020 2020 2020 2020 6973  Type).        is
-000442c0: 496e 7665 7273 6520 3d20 7365 6c66 2e69  Inverse = self.i
-000442d0: 735f 696e 7665 7273 6528 7479 7065 2c20  s_inverse(type, 
-000442e0: 7375 6254 7970 6529 0a20 2020 2020 2020  subType).       
-000442f0: 2069 6620 6973 5370 6f74 4f72 4d61 7267   if isSpotOrMarg
-00044300: 696e 3a0a 2020 2020 2020 2020 2020 2020  in:.            
-00044310: 6d65 7468 6f64 203d 2027 7361 7069 4765  method = 'sapiGe
-00044320: 7441 7373 6574 5472 6164 6546 6565 270a  tAssetTradeFee'.
-00044330: 2020 2020 2020 2020 656c 6966 2069 734c          elif isL
-00044340: 696e 6561 723a 0a20 2020 2020 2020 2020  inear:.         
-00044350: 2020 206d 6574 686f 6420 3d20 2766 6170     method = 'fap
-00044360: 6950 7269 7661 7465 4765 7441 6363 6f75  iPrivateGetAccou
-00044370: 6e74 270a 2020 2020 2020 2020 656c 6966  nt'.        elif
-00044380: 2069 7349 6e76 6572 7365 3a0a 2020 2020   isInverse:.    
-00044390: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-000443a0: 2027 6461 7069 5072 6976 6174 6547 6574   'dapiPrivateGet
-000443b0: 4163 636f 756e 7427 0a20 2020 2020 2020  Account'.       
-000443c0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-000443d0: 7420 6765 7461 7474 7228 7365 6c66 2c20  t getattr(self, 
-000443e0: 6d65 7468 6f64 2928 7061 7261 6d73 290a  method)(params).
-000443f0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00044400: 2020 2320 7361 7069 202f 2073 706f 740a    # sapi / spot.
-00044410: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00044420: 2020 2320 2020 205b 0a20 2020 2020 2020    #    [.       
-00044430: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
-00044440: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
-00044450: 6d62 6f6c 223a 2022 5a52 5842 4e42 222c  mbol": "ZRXBNB",
-00044460: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00044470: 2020 2022 6d61 6b65 7243 6f6d 6d69 7373     "makerCommiss
-00044480: 696f 6e22 3a20 2230 2e30 3031 222c 0a20  ion": "0.001",. 
-00044490: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000444a0: 2022 7461 6b65 7243 6f6d 6d69 7373 696f   "takerCommissio
-000444b0: 6e22 3a20 2230 2e30 3031 220a 2020 2020  n": "0.001".    
-000444c0: 2020 2020 2320 2020 2020 2020 7d2c 0a20      #       },. 
-000444d0: 2020 2020 2020 2023 2020 2020 2020 207b         #       {
-000444e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000444f0: 2020 2022 7379 6d62 6f6c 223a 2022 5a52     "symbol": "ZR
-00044500: 5842 5443 222c 0a20 2020 2020 2020 2023  XBTC",.        #
-00044510: 2020 2020 2020 2020 2022 6d61 6b65 7243           "makerC
-00044520: 6f6d 6d69 7373 696f 6e22 3a20 2230 2e30  ommission": "0.0
-00044530: 3031 222c 0a20 2020 2020 2020 2023 2020  01",.        #  
-00044540: 2020 2020 2020 2022 7461 6b65 7243 6f6d         "takerCom
-00044550: 6d69 7373 696f 6e22 3a20 2230 2e30 3031  mission": "0.001
-00044560: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00044570: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
-00044580: 2020 5d0a 2020 2020 2020 2020 230a 2020    ].        #.  
-00044590: 2020 2020 2020 2320 6661 7069 202f 2066        # fapi / f
-000445a0: 7574 7572 6520 2f20 6c69 6e65 6172 0a20  uture / linear. 
-000445b0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-000445c0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-000445d0: 2023 2020 2020 2020 2020 2022 6665 6554   #         "feeT
-000445e0: 6965 7222 3a20 302c 2020 2020 2020 2023  ier": 0,       #
-000445f0: 2061 6363 6f75 6e74 2063 6f6d 6d69 7373   account commiss
-00044600: 7369 6f6e 2074 6965 720a 2020 2020 2020  sion tier.      
-00044610: 2020 2320 2020 2020 2020 2020 2263 616e    #         "can
-00044620: 5472 6164 6522 3a20 5472 7565 2c20 2020  Trade": True,   
-00044630: 2320 6966 2063 616e 2074 7261 6465 0a20  # if can trade. 
-00044640: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044650: 2022 6361 6e44 6570 6f73 6974 223a 2054   "canDeposit": T
-00044660: 7275 652c 2020 2020 2023 2069 6620 6361  rue,     # if ca
-00044670: 6e20 7472 616e 7366 6572 2069 6e20 6173  n transfer in as
-00044680: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
-00044690: 2020 2020 2020 2263 616e 5769 7468 6472        "canWithdr
-000446a0: 6177 223a 2054 7275 652c 2020 2020 2320  aw": True,    # 
-000446b0: 6966 2063 616e 2074 7261 6e73 6665 7220  if can transfer 
-000446c0: 6f75 7420 6173 7365 740a 2020 2020 2020  out asset.      
-000446d0: 2020 2320 2020 2020 2020 2020 2275 7064    #         "upd
-000446e0: 6174 6554 696d 6522 3a20 302c 0a20 2020  ateTime": 0,.   
-000446f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00044700: 746f 7461 6c49 6e69 7469 616c 4d61 7267  totalInitialMarg
-00044710: 696e 223a 2022 302e 3030 3030 3030 3030  in": "0.00000000
-00044720: 222c 2020 2020 2320 746f 7461 6c20 696e  ",    # total in
-00044730: 6974 6961 6c20 6d61 7267 696e 2072 6571  itial margin req
-00044740: 7569 7265 6420 7769 7468 2063 7572 7265  uired with curre
-00044750: 6e74 206d 6172 6b20 7072 6963 6528 7573  nt mark price(us
-00044760: 656c 6573 7320 7769 7468 2069 736f 6c61  eless with isola
-00044770: 7465 6420 706f 7369 7469 6f6e 7329 2c20  ted positions), 
-00044780: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
-00044790: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
-000447a0: 2020 2020 2020 2274 6f74 616c 4d61 696e        "totalMain
-000447b0: 744d 6172 6769 6e22 3a20 2230 2e30 3030  tMargin": "0.000
-000447c0: 3030 3030 3022 2c20 2020 2020 2320 746f  00000",     # to
-000447d0: 7461 6c20 6d61 696e 7465 6e61 6e63 6520  tal maintenance 
-000447e0: 6d61 7267 696e 2072 6571 7569 7265 642c  margin required,
-000447f0: 206f 6e6c 7920 666f 7220 5553 4454 2061   only for USDT a
-00044800: 7373 6574 0a20 2020 2020 2020 2023 2020  sset.        #  
-00044810: 2020 2020 2020 2022 746f 7461 6c57 616c         "totalWal
-00044820: 6c65 7442 616c 616e 6365 223a 2022 3233  letBalance": "23
-00044830: 2e37 3234 3639 3230 3622 2c20 2020 2020  .72469206",     
-00044840: 2320 746f 7461 6c20 7761 6c6c 6574 2062  # total wallet b
-00044850: 616c 616e 6365 2c20 6f6e 6c79 2066 6f72  alance, only for
-00044860: 2055 5344 5420 6173 7365 740a 2020 2020   USDT asset.    
-00044870: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-00044880: 6f74 616c 556e 7265 616c 697a 6564 5072  otalUnrealizedPr
-00044890: 6f66 6974 223a 2022 302e 3030 3030 3030  ofit": "0.000000
-000448a0: 3030 222c 2020 2023 2074 6f74 616c 2075  00",   # total u
-000448b0: 6e72 6561 6c69 7a65 6420 7072 6f66 6974  nrealized profit
-000448c0: 2c20 6f6e 6c79 2066 6f72 2055 5344 5420  , only for USDT 
-000448d0: 6173 7365 740a 2020 2020 2020 2020 2320  asset.        # 
-000448e0: 2020 2020 2020 2020 2274 6f74 616c 4d61          "totalMa
-000448f0: 7267 696e 4261 6c61 6e63 6522 3a20 2232  rginBalance": "2
-00044900: 332e 3732 3436 3932 3036 222c 2020 2020  3.72469206",    
-00044910: 2023 2074 6f74 616c 206d 6172 6769 6e20   # total margin 
-00044920: 6261 6c61 6e63 652c 206f 6e6c 7920 666f  balance, only fo
-00044930: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
-00044940: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00044950: 746f 7461 6c50 6f73 6974 696f 6e49 6e69  totalPositionIni
-00044960: 7469 616c 4d61 7267 696e 223a 2022 302e  tialMargin": "0.
-00044970: 3030 3030 3030 3030 222c 2020 2020 2320  00000000",    # 
-00044980: 696e 6974 6961 6c20 6d61 7267 696e 2072  initial margin r
-00044990: 6571 7569 7265 6420 666f 7220 706f 7369  equired for posi
-000449a0: 7469 6f6e 7320 7769 7468 2063 7572 7265  tions with curre
-000449b0: 6e74 206d 6172 6b20 7072 6963 652c 206f  nt mark price, o
-000449c0: 6e6c 7920 666f 7220 5553 4454 2061 7373  nly for USDT ass
-000449d0: 6574 0a20 2020 2020 2020 2023 2020 2020  et.        #    
-000449e0: 2020 2020 2022 746f 7461 6c4f 7065 6e4f       "totalOpenO
-000449f0: 7264 6572 496e 6974 6961 6c4d 6172 6769  rderInitialMargi
-00044a00: 6e22 3a20 2230 2e30 3030 3030 3030 3022  n": "0.00000000"
-00044a10: 2c20 2020 2320 696e 6974 6961 6c20 6d61  ,   # initial ma
-00044a20: 7267 696e 2072 6571 7569 7265 6420 666f  rgin required fo
-00044a30: 7220 6f70 656e 206f 7264 6572 7320 7769  r open orders wi
-00044a40: 7468 2063 7572 7265 6e74 206d 6172 6b20  th current mark 
-00044a50: 7072 6963 652c 206f 6e6c 7920 666f 7220  price, only for 
-00044a60: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
-00044a70: 2020 2023 2020 2020 2020 2020 2022 746f     #         "to
-00044a80: 7461 6c43 726f 7373 5761 6c6c 6574 4261  talCrossWalletBa
-00044a90: 6c61 6e63 6522 3a20 2232 332e 3732 3436  lance": "23.7246
-00044aa0: 3932 3036 222c 2020 2020 2020 2320 6372  9206",      # cr
-00044ab0: 6f73 7365 6420 7761 6c6c 6574 2062 616c  ossed wallet bal
-00044ac0: 616e 6365 2c20 6f6e 6c79 2066 6f72 2055  ance, only for U
-00044ad0: 5344 5420 6173 7365 740a 2020 2020 2020  SDT asset.      
-00044ae0: 2020 2320 2020 2020 2020 2020 2274 6f74    #         "tot
-00044af0: 616c 4372 6f73 7355 6e50 6e6c 223a 2022  alCrossUnPnl": "
-00044b00: 302e 3030 3030 3030 3030 222c 2020 2020  0.00000000",    
-00044b10: 2020 2320 756e 7265 616c 697a 6564 2070    # unrealized p
-00044b20: 726f 6669 7420 6f66 2063 726f 7373 6564  rofit of crossed
-00044b30: 2070 6f73 6974 696f 6e73 2c20 6f6e 6c79   positions, only
-00044b40: 2066 6f72 2055 5344 5420 6173 7365 740a   for USDT asset.
-00044b50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00044b60: 2020 2261 7661 696c 6162 6c65 4261 6c61    "availableBala
-00044b70: 6e63 6522 3a20 2232 332e 3732 3436 3932  nce": "23.724692
-00044b80: 3036 222c 2020 2020 2020 2023 2061 7661  06",       # ava
-00044b90: 696c 6162 6c65 2062 616c 616e 6365 2c20  ilable balance, 
-00044ba0: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
-00044bb0: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
-00044bc0: 2020 2020 2020 226d 6178 5769 7468 6472        "maxWithdr
-00044bd0: 6177 416d 6f75 6e74 223a 2022 3233 2e37  awAmount": "23.7
-00044be0: 3234 3639 3230 3622 2020 2020 2023 206d  2469206"     # m
-00044bf0: 6178 696d 756d 2061 6d6f 756e 7420 666f  aximum amount fo
-00044c00: 7220 7472 616e 7366 6572 206f 7574 2c20  r transfer out, 
-00044c10: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
-00044c20: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
-00044c30: 2020 2020 2020 2e2e 2e0a 2020 2020 2020        ....      
-00044c40: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00044c50: 2020 230a 2020 2020 2020 2020 2320 6461    #.        # da
-00044c60: 7069 202f 2064 656c 6976 6572 7920 2f20  pi / delivery / 
-00044c70: 696e 7665 7273 650a 2020 2020 2020 2020  inverse.        
-00044c80: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00044c90: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00044ca0: 2020 2020 2263 616e 4465 706f 7369 7422      "canDeposit"
-00044cb0: 3a20 5472 7565 2c0a 2020 2020 2020 2020  : True,.        
-00044cc0: 2320 2020 2020 2020 2020 2263 616e 5472  #         "canTr
-00044cd0: 6164 6522 3a20 5472 7565 2c0a 2020 2020  ade": True,.    
-00044ce0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-00044cf0: 616e 5769 7468 6472 6177 223a 2054 7275  anWithdraw": Tru
-00044d00: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00044d10: 2020 2020 2022 6665 6554 6965 7222 3a20       "feeTier": 
-00044d20: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
-00044d30: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-00044d40: 223a 2030 0a20 2020 2020 2020 2023 2020  ": 0.        #  
-00044d50: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00044d60: 2020 2020 2020 2069 6620 6973 5370 6f74         if isSpot
-00044d70: 4f72 4d61 7267 696e 3a0a 2020 2020 2020  OrMargin:.      
-00044d80: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00044d90: 2020 2020 2320 2020 205b 0a20 2020 2020      #    [.     
-00044da0: 2020 2020 2020 2023 2020 2020 2020 207b         #       {
-00044db0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00044dc0: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-00044dd0: 2022 5a52 5842 4e42 222c 0a20 2020 2020   "ZRXBNB",.     
-00044de0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044df0: 2022 6d61 6b65 7243 6f6d 6d69 7373 696f   "makerCommissio
-00044e00: 6e22 3a20 2230 2e30 3031 222c 0a20 2020  n": "0.001",.   
-00044e10: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00044e20: 2020 2022 7461 6b65 7243 6f6d 6d69 7373     "takerCommiss
-00044e30: 696f 6e22 3a20 2230 2e30 3031 220a 2020  ion": "0.001".  
-00044e40: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00044e50: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
-00044e60: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
-00044e70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044e80: 2022 7379 6d62 6f6c 223a 2022 5a52 5842   "symbol": "ZRXB
-00044e90: 5443 222c 0a20 2020 2020 2020 2020 2020  TC",.           
-00044ea0: 2023 2020 2020 2020 2020 2022 6d61 6b65   #         "make
-00044eb0: 7243 6f6d 6d69 7373 696f 6e22 3a20 2230  rCommission": "0
-00044ec0: 2e30 3031 222c 0a20 2020 2020 2020 2020  .001",.         
-00044ed0: 2020 2023 2020 2020 2020 2020 2022 7461     #         "ta
-00044ee0: 6b65 7243 6f6d 6d69 7373 696f 6e22 3a20  kerCommission": 
-00044ef0: 2230 2e30 3031 220a 2020 2020 2020 2020  "0.001".        
-00044f00: 2020 2020 2320 2020 2020 2020 7d2c 0a20      #       },. 
-00044f10: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00044f20: 5d0a 2020 2020 2020 2020 2020 2020 230a  ].            #.
-00044f30: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00044f40: 6c74 203d 207b 7d0a 2020 2020 2020 2020  lt = {}.        
-00044f50: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-00044f60: 6765 2830 2c20 6c65 6e28 7265 7370 6f6e  ge(0, len(respon
-00044f70: 7365 2929 3a0a 2020 2020 2020 2020 2020  se)):.          
-00044f80: 2020 2020 2020 6665 6520 3d20 7365 6c66        fee = self
-00044f90: 2e70 6172 7365 5f74 7261 6469 6e67 5f66  .parse_trading_f
-00044fa0: 6565 2872 6573 706f 6e73 655b 695d 290a  ee(response[i]).
-00044fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044fc0: 7379 6d62 6f6c 203d 2066 6565 5b27 7379  symbol = fee['sy
-00044fd0: 6d62 6f6c 275d 0a20 2020 2020 2020 2020  mbol'].         
-00044fe0: 2020 2020 2020 2072 6573 756c 745b 7379         result[sy
-00044ff0: 6d62 6f6c 5d20 3d20 6665 650a 2020 2020  mbol] = fee.    
-00045000: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00045010: 6573 756c 740a 2020 2020 2020 2020 656c  esult.        el
-00045020: 6966 2069 734c 696e 6561 723a 0a20 2020  if isLinear:.   
-00045030: 2020 2020 2020 2020 2023 0a20 2020 2020           #.     
-00045040: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-00045050: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00045060: 2020 2020 2022 6665 6554 6965 7222 3a20       "feeTier": 
-00045070: 302c 2020 2020 2020 2023 2061 6363 6f75  0,       # accou
-00045080: 6e74 2063 6f6d 6d69 7373 7369 6f6e 2074  nt commisssion t
-00045090: 6965 720a 2020 2020 2020 2020 2020 2020  ier.            
-000450a0: 2320 2020 2020 2020 2020 2263 616e 5472  #         "canTr
-000450b0: 6164 6522 3a20 5472 7565 2c20 2020 2320  ade": True,   # 
-000450c0: 6966 2063 616e 2074 7261 6465 0a20 2020  if can trade.   
-000450d0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-000450e0: 2020 2022 6361 6e44 6570 6f73 6974 223a     "canDeposit":
-000450f0: 2054 7275 652c 2020 2020 2023 2069 6620   True,     # if 
-00045100: 6361 6e20 7472 616e 7366 6572 2069 6e20  can transfer in 
-00045110: 6173 7365 740a 2020 2020 2020 2020 2020  asset.          
-00045120: 2020 2320 2020 2020 2020 2020 2263 616e    #         "can
-00045130: 5769 7468 6472 6177 223a 2054 7275 652c  Withdraw": True,
-00045140: 2020 2020 2320 6966 2063 616e 2074 7261      # if can tra
-00045150: 6e73 6665 7220 6f75 7420 6173 7365 740a  nsfer out asset.
-00045160: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00045170: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
-00045180: 6522 3a20 302c 0a20 2020 2020 2020 2020  e": 0,.         
-00045190: 2020 2023 2020 2020 2020 2020 2022 746f     #         "to
-000451a0: 7461 6c49 6e69 7469 616c 4d61 7267 696e  talInitialMargin
-000451b0: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
-000451c0: 2020 2020 2320 746f 7461 6c20 696e 6974      # total init
-000451d0: 6961 6c20 6d61 7267 696e 2072 6571 7569  ial margin requi
-000451e0: 7265 6420 7769 7468 2063 7572 7265 6e74  red with current
-000451f0: 206d 6172 6b20 7072 6963 6528 7573 656c   mark price(usel
-00045200: 6573 7320 7769 7468 2069 736f 6c61 7465  ess with isolate
-00045210: 6420 706f 7369 7469 6f6e 7329 2c20 6f6e  d positions), on
-00045220: 6c79 2066 6f72 2055 5344 5420 6173 7365  ly for USDT asse
-00045230: 740a 2020 2020 2020 2020 2020 2020 2320  t.            # 
-00045240: 2020 2020 2020 2020 2274 6f74 616c 4d61          "totalMa
-00045250: 696e 744d 6172 6769 6e22 3a20 2230 2e30  intMargin": "0.0
-00045260: 3030 3030 3030 3022 2c20 2020 2020 2320  0000000",     # 
-00045270: 746f 7461 6c20 6d61 696e 7465 6e61 6e63  total maintenanc
-00045280: 6520 6d61 7267 696e 2072 6571 7569 7265  e margin require
-00045290: 642c 206f 6e6c 7920 666f 7220 5553 4454  d, only for USDT
-000452a0: 2061 7373 6574 0a20 2020 2020 2020 2020   asset.         
-000452b0: 2020 2023 2020 2020 2020 2020 2022 746f     #         "to
-000452c0: 7461 6c57 616c 6c65 7442 616c 616e 6365  talWalletBalance
-000452d0: 223a 2022 3233 2e37 3234 3639 3230 3622  ": "23.72469206"
-000452e0: 2c20 2020 2020 2320 746f 7461 6c20 7761  ,     # total wa
-000452f0: 6c6c 6574 2062 616c 616e 6365 2c20 6f6e  llet balance, on
-00045300: 6c79 2066 6f72 2055 5344 5420 6173 7365  ly for USDT asse
-00045310: 740a 2020 2020 2020 2020 2020 2020 2320  t.            # 
-00045320: 2020 2020 2020 2020 2274 6f74 616c 556e          "totalUn
-00045330: 7265 616c 697a 6564 5072 6f66 6974 223a  realizedProfit":
-00045340: 2022 302e 3030 3030 3030 3030 222c 2020   "0.00000000",  
-00045350: 2023 2074 6f74 616c 2075 6e72 6561 6c69   # total unreali
-00045360: 7a65 6420 7072 6f66 6974 2c20 6f6e 6c79  zed profit, only
-00045370: 2066 6f72 2055 5344 5420 6173 7365 740a   for USDT asset.
-00045380: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00045390: 2020 2020 2020 2274 6f74 616c 4d61 7267        "totalMarg
-000453a0: 696e 4261 6c61 6e63 6522 3a20 2232 332e  inBalance": "23.
-000453b0: 3732 3436 3932 3036 222c 2020 2020 2023  72469206",     #
-000453c0: 2074 6f74 616c 206d 6172 6769 6e20 6261   total margin ba
-000453d0: 6c61 6e63 652c 206f 6e6c 7920 666f 7220  lance, only for 
-000453e0: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
-000453f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00045400: 2022 746f 7461 6c50 6f73 6974 696f 6e49   "totalPositionI
-00045410: 6e69 7469 616c 4d61 7267 696e 223a 2022  nitialMargin": "
-00045420: 302e 3030 3030 3030 3030 222c 2020 2020  0.00000000",    
-00045430: 2320 696e 6974 6961 6c20 6d61 7267 696e  # initial margin
-00045440: 2072 6571 7569 7265 6420 666f 7220 706f   required for po
-00045450: 7369 7469 6f6e 7320 7769 7468 2063 7572  sitions with cur
-00045460: 7265 6e74 206d 6172 6b20 7072 6963 652c  rent mark price,
-00045470: 206f 6e6c 7920 666f 7220 5553 4454 2061   only for USDT a
-00045480: 7373 6574 0a20 2020 2020 2020 2020 2020  sset.           
-00045490: 2023 2020 2020 2020 2020 2022 746f 7461   #         "tota
-000454a0: 6c4f 7065 6e4f 7264 6572 496e 6974 6961  lOpenOrderInitia
-000454b0: 6c4d 6172 6769 6e22 3a20 2230 2e30 3030  lMargin": "0.000
-000454c0: 3030 3030 3022 2c20 2020 2320 696e 6974  00000",   # init
-000454d0: 6961 6c20 6d61 7267 696e 2072 6571 7569  ial margin requi
-000454e0: 7265 6420 666f 7220 6f70 656e 206f 7264  red for open ord
-000454f0: 6572 7320 7769 7468 2063 7572 7265 6e74  ers with current
-00045500: 206d 6172 6b20 7072 6963 652c 206f 6e6c   mark price, onl
-00045510: 7920 666f 7220 5553 4454 2061 7373 6574  y for USDT asset
-00045520: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00045530: 2020 2020 2020 2022 746f 7461 6c43 726f         "totalCro
-00045540: 7373 5761 6c6c 6574 4261 6c61 6e63 6522  ssWalletBalance"
-00045550: 3a20 2232 332e 3732 3436 3932 3036 222c  : "23.72469206",
-00045560: 2020 2020 2020 2320 6372 6f73 7365 6420        # crossed 
-00045570: 7761 6c6c 6574 2062 616c 616e 6365 2c20  wallet balance, 
-00045580: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
-00045590: 7365 740a 2020 2020 2020 2020 2020 2020  set.            
-000455a0: 2320 2020 2020 2020 2020 2274 6f74 616c  #         "total
-000455b0: 4372 6f73 7355 6e50 6e6c 223a 2022 302e  CrossUnPnl": "0.
-000455c0: 3030 3030 3030 3030 222c 2020 2020 2020  00000000",      
-000455d0: 2320 756e 7265 616c 697a 6564 2070 726f  # unrealized pro
-000455e0: 6669 7420 6f66 2063 726f 7373 6564 2070  fit of crossed p
-000455f0: 6f73 6974 696f 6e73 2c20 6f6e 6c79 2066  ositions, only f
-00045600: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
-00045610: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00045620: 2020 2020 2261 7661 696c 6162 6c65 4261      "availableBa
-00045630: 6c61 6e63 6522 3a20 2232 332e 3732 3436  lance": "23.7246
-00045640: 3932 3036 222c 2020 2020 2020 2023 2061  9206",       # a
-00045650: 7661 696c 6162 6c65 2062 616c 616e 6365  vailable balance
-00045660: 2c20 6f6e 6c79 2066 6f72 2055 5344 5420  , only for USDT 
-00045670: 6173 7365 740a 2020 2020 2020 2020 2020  asset.          
-00045680: 2020 2320 2020 2020 2020 2020 226d 6178    #         "max
-00045690: 5769 7468 6472 6177 416d 6f75 6e74 223a  WithdrawAmount":
-000456a0: 2022 3233 2e37 3234 3639 3230 3622 2020   "23.72469206"  
-000456b0: 2020 2023 206d 6178 696d 756d 2061 6d6f     # maximum amo
-000456c0: 756e 7420 666f 7220 7472 616e 7366 6572  unt for transfer
-000456d0: 206f 7574 2c20 6f6e 6c79 2066 6f72 2055   out, only for U
-000456e0: 5344 5420 6173 7365 740a 2020 2020 2020  SDT asset.      
-000456f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00045700: 2e2e 2e0a 2020 2020 2020 2020 2020 2020  ....            
-00045710: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-00045720: 2020 2020 230a 2020 2020 2020 2020 2020      #.          
-00045730: 2020 7379 6d62 6f6c 7320 3d20 6c69 7374    symbols = list
-00045740: 2873 656c 662e 6d61 726b 6574 732e 6b65  (self.markets.ke
-00045750: 7973 2829 290a 2020 2020 2020 2020 2020  ys()).          
-00045760: 2020 7265 7375 6c74 203d 207b 7d0a 2020    result = {}.  
-00045770: 2020 2020 2020 2020 2020 6665 6554 6965            feeTie
-00045780: 7220 3d20 7365 6c66 2e73 6166 655f 696e  r = self.safe_in
-00045790: 7465 6765 7228 7265 7370 6f6e 7365 2c20  teger(response, 
-000457a0: 2766 6565 5469 6572 2729 0a20 2020 2020  'feeTier').     
-000457b0: 2020 2020 2020 2066 6565 5469 6572 7320         feeTiers 
-000457c0: 3d20 7365 6c66 2e66 6565 735b 276c 696e  = self.fees['lin
-000457d0: 6561 7227 5d5b 2774 7261 6469 6e67 275d  ear']['trading']
-000457e0: 5b27 7469 6572 7327 5d0a 2020 2020 2020  ['tiers'].      
-000457f0: 2020 2020 2020 6d61 6b65 7220 3d20 6665        maker = fe
-00045800: 6554 6965 7273 5b27 6d61 6b65 7227 5d5b  eTiers['maker'][
-00045810: 6665 6554 6965 725d 5b31 5d0a 2020 2020  feeTier][1].    
-00045820: 2020 2020 2020 2020 7461 6b65 7220 3d20          taker = 
-00045830: 6665 6554 6965 7273 5b27 7461 6b65 7227  feeTiers['taker'
-00045840: 5d5b 6665 6554 6965 725d 5b31 5d0a 2020  ][feeTier][1].  
-00045850: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-00045860: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-00045870: 7379 6d62 6f6c 7329 293a 0a20 2020 2020  symbols)):.     
-00045880: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
-00045890: 6c20 3d20 7379 6d62 6f6c 735b 695d 0a20  l = symbols[i]. 
-000458a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000458b0: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-000458c0: 6b65 7473 5b73 796d 626f 6c5d 0a20 2020  kets[symbol].   
-000458d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000458e0: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-000458f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00045900: 2020 2020 2020 7265 7375 6c74 5b73 796d        result[sym
-00045910: 626f 6c5d 203d 207b 0a20 2020 2020 2020  bol] = {.       
-00045920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045930: 2027 696e 666f 273a 207b 0a20 2020 2020   'info': {.     
-00045940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045950: 2020 2020 2020 2027 6665 6554 6965 7227         'feeTier'
-00045960: 3a20 6665 6554 6965 722c 0a20 2020 2020  : feeTier,.     
-00045970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045980: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
-00045990: 2020 2020 2020 2020 2020 2020 2020 2773                's
-000459a0: 796d 626f 6c27 3a20 7379 6d62 6f6c 2c0a  ymbol': symbol,.
-000459b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000459c0: 2020 2020 2020 2020 276d 616b 6572 273a          'maker':
-000459d0: 206d 616b 6572 2c0a 2020 2020 2020 2020   maker,.        
-000459e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000459f0: 2774 616b 6572 273a 2074 616b 6572 2c0a  'taker': taker,.
-00045a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045a10: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-00045a20: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-00045a30: 2020 2020 2020 2020 656c 6966 2069 7349          elif isI
-00045a40: 6e76 6572 7365 3a0a 2020 2020 2020 2020  nverse:.        
-00045a50: 2020 2020 230a 2020 2020 2020 2020 2020      #.          
-00045a60: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-00045a70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00045a80: 2263 616e 4465 706f 7369 7422 3a20 5472  "canDeposit": Tr
-00045a90: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-00045aa0: 2320 2020 2020 2020 2020 2263 616e 5472  #         "canTr
-00045ab0: 6164 6522 3a20 5472 7565 2c0a 2020 2020  ade": True,.    
-00045ac0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00045ad0: 2020 2263 616e 5769 7468 6472 6177 223a    "canWithdraw":
-00045ae0: 2054 7275 652c 0a20 2020 2020 2020 2020   True,.         
-00045af0: 2020 2023 2020 2020 2020 2020 2022 6665     #         "fe
-00045b00: 6554 6965 7222 3a20 322c 0a20 2020 2020  eTier": 2,.     
-00045b10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00045b20: 2022 7570 6461 7465 5469 6d65 223a 2030   "updateTime": 0
-00045b30: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00045b40: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00045b50: 2023 0a20 2020 2020 2020 2020 2020 2073   #.            s
-00045b60: 796d 626f 6c73 203d 206c 6973 7428 7365  ymbols = list(se
-00045b70: 6c66 2e6d 6172 6b65 7473 2e6b 6579 7328  lf.markets.keys(
-00045b80: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
-00045b90: 6573 756c 7420 3d20 7b7d 0a20 2020 2020  esult = {}.     
-00045ba0: 2020 2020 2020 2066 6565 5469 6572 203d         feeTier =
-00045bb0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-00045bc0: 6572 2872 6573 706f 6e73 652c 2027 6665  er(response, 'fe
-00045bd0: 6554 6965 7227 290a 2020 2020 2020 2020  eTier').        
-00045be0: 2020 2020 6665 6554 6965 7273 203d 2073      feeTiers = s
-00045bf0: 656c 662e 6665 6573 5b27 696e 7665 7273  elf.fees['invers
-00045c00: 6527 5d5b 2774 7261 6469 6e67 275d 5b27  e']['trading']['
-00045c10: 7469 6572 7327 5d0a 2020 2020 2020 2020  tiers'].        
-00045c20: 2020 2020 6d61 6b65 7220 3d20 6665 6554      maker = feeT
-00045c30: 6965 7273 5b27 6d61 6b65 7227 5d5b 6665  iers['maker'][fe
-00045c40: 6554 6965 725d 5b31 5d0a 2020 2020 2020  eTier][1].      
-00045c50: 2020 2020 2020 7461 6b65 7220 3d20 6665        taker = fe
-00045c60: 6554 6965 7273 5b27 7461 6b65 7227 5d5b  eTiers['taker'][
-00045c70: 6665 6554 6965 725d 5b31 5d0a 2020 2020  feeTier][1].    
-00045c80: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00045c90: 2072 616e 6765 2830 2c20 6c65 6e28 7379   range(0, len(sy
-00045ca0: 6d62 6f6c 7329 293a 0a20 2020 2020 2020  mbols)):.       
-00045cb0: 2020 2020 2020 2020 2073 796d 626f 6c20           symbol 
-00045cc0: 3d20 7379 6d62 6f6c 735b 695d 0a20 2020  = symbols[i].   
-00045cd0: 2020 2020 2020 2020 2020 2020 206d 6172               mar
-00045ce0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-00045cf0: 7473 5b73 796d 626f 6c5d 0a20 2020 2020  ts[symbol].     
-00045d00: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
-00045d10: 726b 6574 5b27 696e 7665 7273 6527 5d3a  rket['inverse']:
-00045d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045d30: 2020 2020 2072 6573 756c 745b 7379 6d62       result[symb
-00045d40: 6f6c 5d20 3d20 7b0a 2020 2020 2020 2020  ol] = {.        
-00045d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045d60: 2769 6e66 6f27 3a20 7b0a 2020 2020 2020  'info': {.      
-00045d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045d80: 2020 2020 2020 2766 6565 5469 6572 273a        'feeTier':
-00045d90: 2066 6565 5469 6572 2c0a 2020 2020 2020   feeTier,.      
-00045da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045db0: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
-00045dc0: 2020 2020 2020 2020 2020 2020 2027 7379               'sy
-00045dd0: 6d62 6f6c 273a 2073 796d 626f 6c2c 0a20  mbol': symbol,. 
-00045de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045df0: 2020 2020 2020 2027 6d61 6b65 7227 3a20         'maker': 
-00045e00: 6d61 6b65 722c 0a20 2020 2020 2020 2020  maker,.         
-00045e10: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00045e20: 7461 6b65 7227 3a20 7461 6b65 722c 0a20  taker': taker,. 
-00045e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045e40: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00045e50: 2072 6574 7572 6e20 7265 7375 6c74 0a20   return result. 
-00045e60: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-00045e70: 6e65 0a0a 2020 2020 6173 796e 6320 6465  ne..    async de
-00045e80: 6620 6675 7475 7265 735f 7472 616e 7366  f futures_transf
-00045e90: 6572 2873 656c 662c 2063 6f64 653a 2073  er(self, code: s
-00045ea0: 7472 2c20 616d 6f75 6e74 2c20 7479 7065  tr, amount, type
-00045eb0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00045ec0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00045ed0: 2020 7472 616e 7366 6572 2062 6574 7765    transfer betwe
-00045ee0: 656e 2066 7574 7572 6573 2061 6363 6f75  en futures accou
-00045ef0: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-00045f00: 6d20 7374 7220 636f 6465 3a20 756e 6966  m str code: unif
-00045f10: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
-00045f20: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00045f30: 2066 6c6f 6174 2061 6d6f 756e 743a 2074   float amount: t
-00045f40: 6865 2061 6d6f 756e 7420 746f 2074 7261  he amount to tra
-00045f50: 6e73 6665 720a 2020 2020 2020 2020 3a70  nsfer.        :p
-00045f60: 6172 616d 2073 7472 2074 7970 653a 2031  aram str type: 1
-00045f70: 202d 2074 7261 6e73 6665 7220 6672 6f6d   - transfer from
-00045f80: 2073 706f 7420 6163 636f 756e 7420 746f   spot account to
-00045f90: 2055 5344 542d e293 8220 6675 7475 7265   USDT-... future
-00045fa0: 7320 6163 636f 756e 742c 2032 202d 2074  s account, 2 - t
-00045fb0: 7261 6e73 6665 7220 6672 6f6d 2055 5344  ransfer from USD
-00045fc0: 542d e293 8220 6675 7475 7265 7320 6163  T-... futures ac
-00045fd0: 636f 756e 7420 746f 2073 706f 7420 6163  count to spot ac
-00045fe0: 636f 756e 742c 2033 202d 2074 7261 6e73  count, 3 - trans
-00045ff0: 6665 7220 6672 6f6d 2073 706f 7420 6163  fer from spot ac
-00046000: 636f 756e 7420 746f 2043 4f49 4e2d e293  count to COIN-..
-00046010: 8220 6675 7475 7265 7320 6163 636f 756e  . futures accoun
-00046020: 742c 2034 202d 2074 7261 6e73 6665 7220  t, 4 - transfer 
-00046030: 6672 6f6d 2043 4f49 4e2d e293 8220 6675  from COIN-... fu
-00046040: 7475 7265 7320 6163 636f 756e 7420 746f  tures account to
-00046050: 2073 706f 7420 6163 636f 756e 740a 2020   spot account.  
-00046060: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-00046070: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
-00046080: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-00046090: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
-000460a0: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
-000460b0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-000460c0: 6c6f 6174 7c4e 6f6e 6520 7061 7261 6d73  loat|None params
-000460d0: 2e72 6563 7657 696e 646f 773a 0a20 2020  .recvWindow:.   
-000460e0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-000460f0: 6374 3a20 6120 6074 7261 6e73 6665 7220  ct: a `transfer 
-00046100: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
-00046110: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-00046120: 2f23 2f3f 6964 3d66 7574 7572 6573 2d74  /#/?id=futures-t
-00046130: 7261 6e73 6665 722d 7374 7275 6374 7572  ransfer-structur
-00046140: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-00046150: 2020 2020 2020 2020 6966 2028 7479 7065          if (type
-00046160: 203c 2031 2920 6f72 2028 7479 7065 203e   < 1) or (type >
-00046170: 2034 293a 0a20 2020 2020 2020 2020 2020   4):.           
-00046180: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-00046190: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-000461a0: 202b 2027 2074 7970 6520 6d75 7374 2062   + ' type must b
-000461b0: 6520 6265 7477 6565 6e20 3120 616e 6420  e between 1 and 
-000461c0: 3427 290a 2020 2020 2020 2020 6177 6169  4').        awai
-000461d0: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-000461e0: 6574 7328 290a 2020 2020 2020 2020 6375  ets().        cu
-000461f0: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-00046200: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-00046210: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00046220: 0a20 2020 2020 2020 2020 2020 2027 6173  .            'as
-00046230: 7365 7427 3a20 6375 7272 656e 6379 5b27  set': currency['
-00046240: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-00046250: 2020 2761 6d6f 756e 7427 3a20 616d 6f75    'amount': amou
-00046260: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
-00046270: 2774 7970 6527 3a20 7479 7065 2c0a 2020  'type': type,.  
-00046280: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00046290: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-000462a0: 2073 656c 662e 7361 7069 506f 7374 4675   self.sapiPostFu
-000462b0: 7475 7265 7354 7261 6e73 6665 7228 7365  turesTransfer(se
-000462c0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-000462d0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-000462e0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-000462f0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00046300: 2020 2020 2274 7261 6e49 6422 3a20 3130      "tranId": 10
-00046310: 3030 3030 3030 310a 2020 2020 2020 2020  0000001.        
-00046320: 2320 2020 7d0a 2020 2020 2020 2020 230a  #   }.        #.
-00046330: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00046340: 656c 662e 7061 7273 655f 7472 616e 7366  elf.parse_transf
-00046350: 6572 2872 6573 706f 6e73 652c 2063 7572  er(response, cur
-00046360: 7265 6e63 7929 0a0a 2020 2020 6173 796e  rency)..    asyn
-00046370: 6320 6465 6620 6665 7463 685f 6675 6e64  c def fetch_fund
-00046380: 696e 675f 7261 7465 2873 656c 662c 2073  ing_rate(self, s
-00046390: 796d 626f 6c3a 2073 7472 2c20 7061 7261  ymbol: str, para
-000463a0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-000463b0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-000463c0: 6820 7468 6520 6375 7272 656e 7420 6675  h the current fu
-000463d0: 6e64 696e 6720 7261 7465 0a20 2020 2020  nding rate.     
-000463e0: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
-000463f0: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-00046400: 726b 6574 2073 796d 626f 6c0a 2020 2020  rket symbol.    
-00046410: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-00046420: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
-00046430: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-00046440: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
-00046450: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-00046460: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00046470: 6963 743a 2061 2060 6675 6e64 696e 6720  ict: a `funding 
-00046480: 7261 7465 2073 7472 7563 7475 7265 203c  rate structure <
-00046490: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-000464a0: 742e 636f 6d2f 232f 3f69 643d 6675 6e64  t.com/#/?id=fund
-000464b0: 696e 672d 7261 7465 2d73 7472 7563 7475  ing-rate-structu
-000464c0: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
-000464d0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-000464e0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-000464f0: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-00046500: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-00046510: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-00046520: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00046530: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-00046540: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
-00046550: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00046560: 2020 6d65 7468 6f64 203d 204e 6f6e 650a    method = None.
-00046570: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-00046580: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
-00046590: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-000465a0: 3d20 2766 6170 6950 7562 6c69 6347 6574  = 'fapiPublicGet
-000465b0: 5072 656d 6975 6d49 6e64 6578 270a 2020  PremiumIndex'.  
-000465c0: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-000465d0: 745b 2769 6e76 6572 7365 275d 3a0a 2020  t['inverse']:.  
-000465e0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-000465f0: 203d 2027 6461 7069 5075 626c 6963 4765   = 'dapiPublicGe
-00046600: 7450 7265 6d69 756d 496e 6465 7827 0a20  tPremiumIndex'. 
-00046610: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00046620: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
-00046630: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
-00046640: 2e69 6420 2b20 2720 6665 7463 6846 756e  .id + ' fetchFun
-00046650: 6469 6e67 5261 7465 2829 2073 7570 706f  dingRate() suppo
-00046660: 7274 7320 6c69 6e65 6172 2061 6e64 2069  rts linear and i
-00046670: 6e76 6572 7365 2063 6f6e 7472 6163 7473  nverse contracts
-00046680: 206f 6e6c 7927 290a 2020 2020 2020 2020   only').        
-00046690: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-000466a0: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
-000466b0: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
-000466c0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-000466d0: 6d73 2929 0a20 2020 2020 2020 2069 6620  ms)).        if 
-000466e0: 6d61 726b 6574 5b27 696e 7665 7273 6527  market['inverse'
-000466f0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-00046700: 6573 706f 6e73 6520 3d20 7265 7370 6f6e  esponse = respon
-00046710: 7365 5b30 5d0a 2020 2020 2020 2020 230a  se[0].        #.
-00046720: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00046730: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046740: 2020 2273 796d 626f 6c22 3a20 2242 5443    "symbol": "BTC
-00046750: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
-00046760: 2020 2020 2020 2020 2022 6d61 726b 5072           "markPr
-00046770: 6963 6522 3a20 2234 3538 3032 2e38 3131  ice": "45802.811
-00046780: 3239 3839 3222 2c0a 2020 2020 2020 2020  29892",.        
-00046790: 2320 2020 2020 2020 2020 2269 6e64 6578  #         "index
-000467a0: 5072 6963 6522 3a20 2234 3537 3435 2e34  Price": "45745.4
-000467b0: 3737 3031 3931 3522 2c0a 2020 2020 2020  7701915",.      
-000467c0: 2020 2320 2020 2020 2020 2020 2265 7374    #         "est
-000467d0: 696d 6174 6564 5365 7474 6c65 5072 6963  imatedSettlePric
-000467e0: 6522 3a20 2234 3531 3333 2e39 3137 3533  e": "45133.91753
-000467f0: 3637 3122 2c0a 2020 2020 2020 2020 2320  671",.        # 
-00046800: 2020 2020 2020 2020 226c 6173 7446 756e          "lastFun
-00046810: 6469 6e67 5261 7465 223a 2022 302e 3030  dingRate": "0.00
-00046820: 3036 3335 3231 222c 0a20 2020 2020 2020  063521",.       
-00046830: 2023 2020 2020 2020 2020 2022 696e 7465   #         "inte
-00046840: 7265 7374 5261 7465 223a 2022 302e 3030  restRate": "0.00
-00046850: 3031 3030 3030 222c 0a20 2020 2020 2020  010000",.       
-00046860: 2023 2020 2020 2020 2020 2022 6e65 7874   #         "next
-00046870: 4675 6e64 696e 6754 696d 6522 3a20 2231  FundingTime": "1
-00046880: 3632 3132 3637 3230 3030 3030 222c 0a20  621267200000",. 
-00046890: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000468a0: 2022 7469 6d65 223a 2022 3136 3231 3235   "time": "162125
-000468b0: 3233 3434 3030 3122 0a20 2020 2020 2020  2344001".       
-000468c0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-000468d0: 2023 0a20 2020 2020 2020 2072 6574 7572   #.        retur
-000468e0: 6e20 7365 6c66 2e70 6172 7365 5f66 756e  n self.parse_fun
-000468f0: 6469 6e67 5f72 6174 6528 7265 7370 6f6e  ding_rate(respon
-00046900: 7365 2c20 6d61 726b 6574 290a 0a20 2020  se, market)..   
-00046910: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-00046920: 5f66 756e 6469 6e67 5f72 6174 655f 6869  _funding_rate_hi
-00046930: 7374 6f72 7928 7365 6c66 2c20 7379 6d62  story(self, symb
-00046940: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00046950: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-00046960: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00046970: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-00046980: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00046990: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-000469a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000469b0: 2020 2020 6665 7463 6865 7320 6869 7374      fetches hist
-000469c0: 6f72 6963 616c 2066 756e 6469 6e67 2072  orical funding r
-000469d0: 6174 6520 7072 6963 6573 0a20 2020 2020  ate prices.     
-000469e0: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-000469f0: 6e65 2073 796d 626f 6c3a 2075 6e69 6669  ne symbol: unifi
-00046a00: 6564 2073 796d 626f 6c20 6f66 2074 6865  ed symbol of the
-00046a10: 206d 6172 6b65 7420 746f 2066 6574 6368   market to fetch
-00046a20: 2074 6865 2066 756e 6469 6e67 2072 6174   the funding rat
-00046a30: 6520 6869 7374 6f72 7920 666f 720a 2020  e history for.  
-00046a40: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-00046a50: 7c4e 6f6e 6520 7369 6e63 653a 2074 696d  |None since: tim
-00046a60: 6573 7461 6d70 2069 6e20 6d73 206f 6620  estamp in ms of 
-00046a70: 7468 6520 6561 726c 6965 7374 2066 756e  the earliest fun
-00046a80: 6469 6e67 2072 6174 6520 746f 2066 6574  ding rate to fet
-00046a90: 6368 0a20 2020 2020 2020 203a 7061 7261  ch.        :para
-00046aa0: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-00046ab0: 3a20 7468 6520 6d61 7869 6d75 6d20 616d  : the maximum am
-00046ac0: 6f75 6e74 206f 6620 6066 756e 6469 6e67  ount of `funding
-00046ad0: 2072 6174 6520 7374 7275 6374 7572 6573   rate structures
-00046ae0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00046af0: 6378 742e 636f 6d2f 656e 2f6c 6174 6573  cxt.com/en/lates
-00046b00: 742f 6d61 6e75 616c 2e68 746d 6c3f 2366  t/manual.html?#f
-00046b10: 756e 6469 6e67 2d72 6174 652d 6869 7374  unding-rate-hist
-00046b20: 6f72 792d 7374 7275 6374 7572 653e 6020  ory-structure>` 
-00046b30: 746f 2066 6574 6368 0a20 2020 2020 2020  to fetch.       
-00046b40: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00046b50: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00046b60: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00046b70: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
-00046b80: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00046b90: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00046ba0: 6e65 2070 6172 616d 735b 2775 6e74 696c  ne params['until
-00046bb0: 275d 3a20 7469 6d65 7374 616d 7020 696e  ']: timestamp in
-00046bc0: 206d 7320 6f66 2074 6865 206c 6174 6573   ms of the lates
-00046bd0: 7420 6675 6e64 696e 6720 7261 7465 0a20  t funding rate. 
-00046be0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00046bf0: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
-00046c00: 6620 6066 756e 6469 6e67 2072 6174 6520  f `funding rate 
-00046c10: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
-00046c20: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-00046c30: 6d2f 656e 2f6c 6174 6573 742f 6d61 6e75  m/en/latest/manu
-00046c40: 616c 2e68 746d 6c3f 2366 756e 6469 6e67  al.html?#funding
-00046c50: 2d72 6174 652d 6869 7374 6f72 792d 7374  -rate-history-st
-00046c60: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-00046c70: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
-00046c80: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-00046c90: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-00046ca0: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
-00046cb0: 2020 2020 206d 6574 686f 6420 3d20 4e6f       method = No
-00046cc0: 6e65 0a20 2020 2020 2020 2064 6566 6175  ne.        defau
-00046cd0: 6c74 5479 7065 203d 2073 656c 662e 7361  ltType = self.sa
-00046ce0: 6665 5f73 7472 696e 675f 3228 7365 6c66  fe_string_2(self
-00046cf0: 2e6f 7074 696f 6e73 2c20 2766 6574 6368  .options, 'fetch
-00046d00: 4675 6e64 696e 6752 6174 6548 6973 746f  FundingRateHisto
-00046d10: 7279 272c 2027 6465 6661 756c 7454 7970  ry', 'defaultTyp
-00046d20: 6527 2c20 2766 7574 7572 6527 290a 2020  e', 'future').  
-00046d30: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
-00046d40: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
-00046d50: 7261 6d73 2c20 2774 7970 6527 2c20 6465  rams, 'type', de
-00046d60: 6661 756c 7454 7970 6529 0a20 2020 2020  faultType).     
-00046d70: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
-00046d80: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-00046d90: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
-00046da0: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00046db0: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00046dc0: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00046dd0: 2020 2020 2073 796d 626f 6c20 3d20 6d61       symbol = ma
-00046de0: 726b 6574 5b27 7379 6d62 6f6c 275d 0a20  rket['symbol']. 
-00046df0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00046e00: 7374 5b27 7379 6d62 6f6c 275d 203d 206d  st['symbol'] = m
-00046e10: 6172 6b65 745b 2769 6427 5d0a 2020 2020  arket['id'].    
-00046e20: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
-00046e30: 6e65 0a20 2020 2020 2020 2073 7562 5479  ne.        subTy
-00046e40: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
-00046e50: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
-00046e60: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
-00046e70: 7463 6846 756e 6469 6e67 5261 7465 4869  tchFundingRateHi
-00046e80: 7374 6f72 7927 2c20 6d61 726b 6574 2c20  story', market, 
-00046e90: 7061 7261 6d73 2c20 276c 696e 6561 7227  params, 'linear'
-00046ea0: 290a 2020 2020 2020 2020 7061 7261 6d73  ).        params
-00046eb0: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-00046ec0: 616d 732c 2027 7479 7065 2729 0a20 2020  ams, 'type').   
-00046ed0: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
-00046ee0: 6c69 6e65 6172 2874 7970 652c 2073 7562  linear(type, sub
-00046ef0: 5479 7065 293a 0a20 2020 2020 2020 2020  Type):.         
-00046f00: 2020 206d 6574 686f 6420 3d20 2766 6170     method = 'fap
-00046f10: 6950 7562 6c69 6347 6574 4675 6e64 696e  iPublicGetFundin
-00046f20: 6752 6174 6527 0a20 2020 2020 2020 2065  gRate'.        e
-00046f30: 6c69 6620 7365 6c66 2e69 735f 696e 7665  lif self.is_inve
-00046f40: 7273 6528 7479 7065 2c20 7375 6254 7970  rse(type, subTyp
-00046f50: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00046f60: 6d65 7468 6f64 203d 2027 6461 7069 5075  method = 'dapiPu
-00046f70: 626c 6963 4765 7446 756e 6469 6e67 5261  blicGetFundingRa
-00046f80: 7465 270a 2020 2020 2020 2020 6966 206d  te'.        if m
-00046f90: 6574 686f 6420 6973 204e 6f6e 653a 0a20  ethod is None:. 
-00046fa0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00046fb0: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
-00046fc0: 6c66 2e69 6420 2b20 2720 6665 7463 6846  lf.id + ' fetchF
-00046fd0: 756e 6469 6e67 5261 7465 4869 7374 6f72  undingRateHistor
-00046fe0: 7928 2920 6973 206e 6f74 2073 7570 706f  y() is not suppo
-00046ff0: 7274 6564 2066 6f72 2027 202b 2074 7970  rted for ' + typ
-00047000: 6520 2b20 2720 6d61 726b 6574 7327 290a  e + ' markets').
-00047010: 2020 2020 2020 2020 6966 2073 696e 6365          if since
-00047020: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00047030: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00047040: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
-00047050: 2073 696e 6365 0a20 2020 2020 2020 2075   since.        u
-00047060: 6e74 696c 203d 2073 656c 662e 7361 6665  ntil = self.safe
-00047070: 5f69 6e74 6567 6572 5f32 2870 6172 616d  _integer_2(param
-00047080: 732c 2027 756e 7469 6c27 2c20 2774 696c  s, 'until', 'til
-00047090: 6c27 2920 2023 2075 6e69 6669 6564 2069  l')  # unified i
-000470a0: 6e20 6d69 6c6c 6973 6563 6f6e 6473 0a20  n milliseconds. 
-000470b0: 2020 2020 2020 2065 6e64 5469 6d65 203d         endTime =
-000470c0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-000470d0: 6572 2870 6172 616d 732c 2027 656e 6454  er(params, 'endT
-000470e0: 696d 6527 2c20 756e 7469 6c29 2020 2320  ime', until)  # 
-000470f0: 6578 6368 616e 6765 2d73 7065 6369 6669  exchange-specifi
-00047100: 6320 696e 206d 696c 6c69 7365 636f 6e64  c in millisecond
-00047110: 730a 2020 2020 2020 2020 7061 7261 6d73  s.        params
-00047120: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-00047130: 616d 732c 205b 2765 6e64 5469 6d65 272c  ams, ['endTime',
-00047140: 2027 7469 6c6c 272c 2027 756e 7469 6c27   'till', 'until'
-00047150: 5d29 0a20 2020 2020 2020 2069 6620 656e  ]).        if en
-00047160: 6454 696d 6520 6973 206e 6f74 204e 6f6e  dTime is not Non
-00047170: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00047180: 6571 7565 7374 5b27 656e 6454 696d 6527  equest['endTime'
-00047190: 5d20 3d20 656e 6454 696d 650a 2020 2020  ] = endTime.    
-000471a0: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
-000471b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000471c0: 2020 2020 2020 7265 7175 6573 745b 276c        request['l
-000471d0: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
-000471e0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000471f0: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
-00047200: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
-00047210: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00047220: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00047230: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00047240: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00047250: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-00047260: 3a20 2242 5443 5553 4454 222c 0a20 2020  : "BTCUSDT",.   
-00047270: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00047280: 6675 6e64 696e 6752 6174 6522 3a20 2230  fundingRate": "0
-00047290: 2e30 3030 3633 3532 3122 2c0a 2020 2020  .00063521",.    
-000472a0: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
-000472b0: 756e 6469 6e67 5469 6d65 223a 2022 3136  undingTime": "16
-000472c0: 3231 3236 3732 3030 3030 3022 2c0a 2020  21267200000",.  
-000472d0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-000472e0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000472f0: 7261 7465 7320 3d20 5b5d 0a20 2020 2020  rates = [].     
-00047300: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-00047310: 6528 302c 206c 656e 2872 6573 706f 6e73  e(0, len(respons
-00047320: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
-00047330: 2065 6e74 7279 203d 2072 6573 706f 6e73   entry = respons
-00047340: 655b 695d 0a20 2020 2020 2020 2020 2020  e[i].           
-00047350: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
-00047360: 662e 7361 6665 5f69 6e74 6567 6572 2865  f.safe_integer(e
-00047370: 6e74 7279 2c20 2766 756e 6469 6e67 5469  ntry, 'fundingTi
-00047380: 6d65 2729 0a20 2020 2020 2020 2020 2020  me').           
-00047390: 2072 6174 6573 2e61 7070 656e 6428 7b0a   rates.append({.
-000473a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000473b0: 2769 6e66 6f27 3a20 656e 7472 792c 0a20  'info': entry,. 
-000473c0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-000473d0: 7379 6d62 6f6c 273a 2073 656c 662e 7361  symbol': self.sa
-000473e0: 6665 5f73 796d 626f 6c28 7365 6c66 2e73  fe_symbol(self.s
-000473f0: 6166 655f 7374 7269 6e67 2865 6e74 7279  afe_string(entry
-00047400: 2c20 2773 796d 626f 6c27 292c 204e 6f6e  , 'symbol'), Non
-00047410: 652c 204e 6f6e 652c 2027 7377 6170 2729  e, None, 'swap')
-00047420: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00047430: 2020 2766 756e 6469 6e67 5261 7465 273a    'fundingRate':
-00047440: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00047450: 7228 656e 7472 792c 2027 6675 6e64 696e  r(entry, 'fundin
-00047460: 6752 6174 6527 292c 0a20 2020 2020 2020  gRate'),.       
-00047470: 2020 2020 2020 2020 2027 7469 6d65 7374           'timest
-00047480: 616d 7027 3a20 7469 6d65 7374 616d 702c  amp': timestamp,
-00047490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000474a0: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
-000474b0: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
-000474c0: 616d 7029 2c0a 2020 2020 2020 2020 2020  amp),.          
-000474d0: 2020 7d29 0a20 2020 2020 2020 2073 6f72    }).        sor
-000474e0: 7465 6420 3d20 7365 6c66 2e73 6f72 745f  ted = self.sort_
-000474f0: 6279 2872 6174 6573 2c20 2774 696d 6573  by(rates, 'times
-00047500: 7461 6d70 2729 0a20 2020 2020 2020 2072  tamp').        r
-00047510: 6574 7572 6e20 7365 6c66 2e66 696c 7465  eturn self.filte
-00047520: 725f 6279 5f73 796d 626f 6c5f 7369 6e63  r_by_symbol_sinc
-00047530: 655f 6c69 6d69 7428 736f 7274 6564 2c20  e_limit(sorted, 
-00047540: 7379 6d62 6f6c 2c20 7369 6e63 652c 206c  symbol, since, l
-00047550: 696d 6974 290a 0a20 2020 2061 7379 6e63  imit)..    async
-00047560: 2064 6566 2066 6574 6368 5f66 756e 6469   def fetch_fundi
-00047570: 6e67 5f72 6174 6573 2873 656c 662c 2073  ng_rates(self, s
-00047580: 796d 626f 6c73 3a20 4f70 7469 6f6e 616c  ymbols: Optional
-00047590: 5b4c 6973 745b 7374 725d 5d20 3d20 4e6f  [List[str]] = No
-000475a0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-000475b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000475c0: 2020 2020 6665 7463 6820 7468 6520 6675      fetch the fu
-000475d0: 6e64 696e 6720 7261 7465 2066 6f72 206d  nding rate for m
-000475e0: 756c 7469 706c 6520 6d61 726b 6574 730a  ultiple markets.
-000475f0: 2020 2020 2020 2020 3a70 6172 616d 205b          :param [
-00047600: 7374 725d 7c4e 6f6e 6520 7379 6d62 6f6c  str]|None symbol
-00047610: 733a 206c 6973 7420 6f66 2075 6e69 6669  s: list of unifi
-00047620: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
-00047630: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-00047640: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-00047650: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00047660: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-00047670: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
-00047680: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-00047690: 7572 6e73 2064 6963 743a 2061 2064 6963  urns dict: a dic
-000476a0: 7469 6f6e 6172 7920 6f66 2060 6675 6e64  tionary of `fund
-000476b0: 696e 6720 7261 7465 7320 7374 7275 6374  ing rates struct
-000476c0: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
-000476d0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-000476e0: 643d 6675 6e64 696e 672d 7261 7465 732d  d=funding-rates-
-000476f0: 7374 7275 6374 7572 653e 602c 2069 6e64  structure>`, ind
-00047700: 6578 6520 6279 206d 6172 6b65 7420 7379  exe by market sy
-00047710: 6d62 6f6c 730a 2020 2020 2020 2020 2222  mbols.        ""
-00047720: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-00047730: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00047740: 7328 290a 2020 2020 2020 2020 7379 6d62  s().        symb
-00047750: 6f6c 7320 3d20 7365 6c66 2e6d 6172 6b65  ols = self.marke
-00047760: 745f 7379 6d62 6f6c 7328 7379 6d62 6f6c  t_symbols(symbol
-00047770: 7329 0a20 2020 2020 2020 206d 6574 686f  s).        metho
-00047780: 6420 3d20 4e6f 6e65 0a20 2020 2020 2020  d = None.       
-00047790: 2064 6566 6175 6c74 5479 7065 203d 2073   defaultType = s
-000477a0: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
-000477b0: 3228 7365 6c66 2e6f 7074 696f 6e73 2c20  2(self.options, 
-000477c0: 2766 6574 6368 4675 6e64 696e 6752 6174  'fetchFundingRat
-000477d0: 6573 272c 2027 6465 6661 756c 7454 7970  es', 'defaultTyp
-000477e0: 6527 2c20 2766 7574 7572 6527 290a 2020  e', 'future').  
-000477f0: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
-00047800: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
-00047810: 7261 6d73 2c20 2774 7970 6527 2c20 6465  rams, 'type', de
-00047820: 6661 756c 7454 7970 6529 0a20 2020 2020  faultType).     
-00047830: 2020 2073 7562 5479 7065 203d 204e 6f6e     subType = Non
-00047840: 650a 2020 2020 2020 2020 7375 6254 7970  e.        subTyp
-00047850: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
-00047860: 2e68 616e 646c 655f 7375 625f 7479 7065  .handle_sub_type
-00047870: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
-00047880: 6368 4675 6e64 696e 6752 6174 6573 272c  chFundingRates',
-00047890: 204e 6f6e 652c 2070 6172 616d 732c 2027   None, params, '
-000478a0: 6c69 6e65 6172 2729 0a20 2020 2020 2020  linear').       
-000478b0: 2071 7565 7279 203d 2073 656c 662e 6f6d   query = self.om
-000478c0: 6974 2870 6172 616d 732c 2027 7479 7065  it(params, 'type
-000478d0: 2729 0a20 2020 2020 2020 2069 6620 7365  ').        if se
-000478e0: 6c66 2e69 735f 6c69 6e65 6172 2874 7970  lf.is_linear(typ
-000478f0: 652c 2073 7562 5479 7065 293a 0a20 2020  e, subType):.   
-00047900: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-00047910: 3d20 2766 6170 6950 7562 6c69 6347 6574  = 'fapiPublicGet
-00047920: 5072 656d 6975 6d49 6e64 6578 270a 2020  PremiumIndex'.  
-00047930: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-00047940: 6973 5f69 6e76 6572 7365 2874 7970 652c  is_inverse(type,
-00047950: 2073 7562 5479 7065 293a 0a20 2020 2020   subType):.     
-00047960: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00047970: 2764 6170 6950 7562 6c69 6347 6574 5072  'dapiPublicGetPr
-00047980: 656d 6975 6d49 6e64 6578 270a 2020 2020  emiumIndex'.    
-00047990: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000479a0: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
-000479b0: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
-000479c0: 202b 2027 2066 6574 6368 4675 6e64 696e   + ' fetchFundin
-000479d0: 6752 6174 6573 2829 2073 7570 706f 7274  gRates() support
-000479e0: 7320 6c69 6e65 6172 2061 6e64 2069 6e76  s linear and inv
-000479f0: 6572 7365 2063 6f6e 7472 6163 7473 206f  erse contracts o
-00047a00: 6e6c 7927 290a 2020 2020 2020 2020 7265  nly').        re
-00047a10: 7370 6f6e 7365 203d 2061 7761 6974 2067  sponse = await g
-00047a20: 6574 6174 7472 2873 656c 662c 206d 6574  etattr(self, met
-00047a30: 686f 6429 2871 7565 7279 290a 2020 2020  hod)(query).    
-00047a40: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
-00047a50: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00047a60: 2072 616e 6765 2830 2c20 6c65 6e28 7265   range(0, len(re
-00047a70: 7370 6f6e 7365 2929 3a0a 2020 2020 2020  sponse)):.      
-00047a80: 2020 2020 2020 656e 7472 7920 3d20 7265        entry = re
-00047a90: 7370 6f6e 7365 5b69 5d0a 2020 2020 2020  sponse[i].      
-00047aa0: 2020 2020 2020 7061 7273 6564 203d 2073        parsed = s
-00047ab0: 656c 662e 7061 7273 655f 6675 6e64 696e  elf.parse_fundin
-00047ac0: 675f 7261 7465 2865 6e74 7279 290a 2020  g_rate(entry).  
-00047ad0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00047ae0: 2e61 7070 656e 6428 7061 7273 6564 290a  .append(parsed).
-00047af0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00047b00: 656c 662e 6669 6c74 6572 5f62 795f 6172  elf.filter_by_ar
-00047b10: 7261 7928 7265 7375 6c74 2c20 2773 796d  ray(result, 'sym
-00047b20: 626f 6c27 2c20 7379 6d62 6f6c 7329 0a0a  bol', symbols)..
-00047b30: 2020 2020 6465 6620 7061 7273 655f 6675      def parse_fu
-00047b40: 6e64 696e 675f 7261 7465 2873 656c 662c  nding_rate(self,
-00047b50: 2063 6f6e 7472 6163 742c 206d 6172 6b65   contract, marke
-00047b60: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
-00047b70: 2023 2065 6e73 7572 6520 6974 206d 6174   # ensure it mat
-00047b80: 6368 6573 2077 6974 6820 6874 7470 733a  ches with https:
-00047b90: 2f2f 7777 772e 6269 6e61 6e63 652e 636f  //www.binance.co
-00047ba0: 6d2f 656e 2f66 7574 7572 6573 2f66 756e  m/en/futures/fun
-00047bb0: 6469 6e67 2d68 6973 746f 7279 2f30 0a20  ding-history/0. 
+0002e4f0: 2020 2022 6f72 6465 7249 6422 3a20 3136     "orderId": 16
+0002e500: 3338 3331 3536 3632 302c 0a20 2020 2020  383156620,.     
+0002e510: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002e520: 2022 6f72 6465 724c 6973 7449 6422 3a20   "orderListId": 
+0002e530: 2d31 2c0a 2020 2020 2020 2020 2320 2020  -1,.        #   
+0002e540: 2020 2020 2020 2020 2020 2263 6c69 656e            "clien
+0002e550: 744f 7264 6572 4964 223a 2022 417a 7436  tOrderId": "Azt6
+0002e560: 666f 5654 5467 4850 4e68 7142 6634 3154  foVTTgHPNhqBf41T
+0002e570: 5474 222c 0a20 2020 2020 2020 2023 2020  Tt",.        #  
+0002e580: 2020 2020 2020 2020 2020 2022 7072 6963             "pric
+0002e590: 6522 3a20 2231 3430 3030 2e30 3030 3030  e": "14000.00000
+0002e5a0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0002e5b0: 2020 2020 2020 2020 2020 2020 226f 7269              "ori
+0002e5c0: 6751 7479 223a 2022 302e 3030 3131 3030  gQty": "0.001100
+0002e5d0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0002e5e0: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+0002e5f0: 7574 6564 5174 7922 3a20 2230 2e30 3030  utedQty": "0.000
+0002e600: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+0002e610: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
+0002e620: 756d 6d75 6c61 7469 7665 5175 6f74 6551  ummulativeQuoteQ
+0002e630: 7479 223a 2022 302e 3030 3030 3030 3030  ty": "0.00000000
+0002e640: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e650: 2020 2020 2020 2020 2022 7374 6174 7573           "status
+0002e660: 223a 2022 4341 4e43 454c 4544 222c 0a20  ": "CANCELED",. 
+0002e670: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002e680: 2020 2020 2022 7469 6d65 496e 466f 7263       "timeInForc
+0002e690: 6522 3a20 2247 5443 222c 0a20 2020 2020  e": "GTC",.     
+0002e6a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002e6b0: 2022 7479 7065 223a 2022 4c49 4d49 5422   "type": "LIMIT"
+0002e6c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0002e6d0: 2020 2020 2020 2020 2273 6964 6522 3a20          "side": 
+0002e6e0: 2242 5559 220a 2020 2020 2020 2020 2320  "BUY".        # 
+0002e6f0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+0002e700: 2020 2023 2020 2020 2020 2020 2022 6e65     #         "ne
+0002e710: 774f 7264 6572 5265 7370 6f6e 7365 223a  wOrderResponse":
+0002e720: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0002e730: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+0002e740: 223a 2022 4254 4355 5344 5422 2c0a 2020  ": "BTCUSDT",.  
+0002e750: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002e760: 2020 2020 226f 7264 6572 4964 223a 2031      "orderId": 1
+0002e770: 3633 3833 3137 3632 3937 2c0a 2020 2020  6383176297,.    
+0002e780: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002e790: 2020 226f 7264 6572 4c69 7374 4964 223a    "orderListId":
+0002e7a0: 202d 312c 0a20 2020 2020 2020 2023 2020   -1,.        #  
+0002e7b0: 2020 2020 2020 2020 2020 2022 636c 6965             "clie
+0002e7c0: 6e74 4f72 6465 7249 6422 3a20 2278 2d52  ntOrderId": "x-R
+0002e7d0: 3442 4433 5338 3232 3265 6362 3538 6562  4BD3S8222ecb58eb
+0002e7e0: 3930 3734 6662 3162 6530 3138 6322 2c0a  9074fb1be018c",.
+0002e7f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002e800: 2020 2020 2020 2274 7261 6e73 6163 7454        "transactT
+0002e810: 696d 6522 3a20 3136 3730 3839 3138 3437  ime": 1670891847
+0002e820: 3933 322c 0a20 2020 2020 2020 2023 2020  932,.        #  
+0002e830: 2020 2020 2020 2020 2020 2022 7072 6963             "pric
+0002e840: 6522 3a20 2231 3335 3030 2e30 3030 3030  e": "13500.00000
+0002e850: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0002e860: 2020 2020 2020 2020 2020 2020 226f 7269              "ori
+0002e870: 6751 7479 223a 2022 302e 3030 3038 3530  gQty": "0.000850
+0002e880: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0002e890: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+0002e8a0: 7574 6564 5174 7922 3a20 2230 2e30 3030  utedQty": "0.000
+0002e8b0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+0002e8c0: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
+0002e8d0: 756d 6d75 6c61 7469 7665 5175 6f74 6551  ummulativeQuoteQ
+0002e8e0: 7479 223a 2022 302e 3030 3030 3030 3030  ty": "0.00000000
+0002e8f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e900: 2020 2020 2020 2020 2022 7374 6174 7573           "status
+0002e910: 223a 2022 4e45 5722 2c0a 2020 2020 2020  ": "NEW",.      
+0002e920: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0002e930: 2274 696d 6549 6e46 6f72 6365 223a 2022  "timeInForce": "
+0002e940: 4754 4322 2c0a 2020 2020 2020 2020 2320  GTC",.        # 
+0002e950: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
+0002e960: 6522 3a20 224c 494d 4954 222c 0a20 2020  e": "LIMIT",.   
+0002e970: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002e980: 2020 2022 7369 6465 223a 2022 4255 5922     "side": "BUY"
+0002e990: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0002e9a0: 2020 2020 2020 2020 2266 696c 6c73 223a          "fills":
+0002e9b0: 205b 5d0a 2020 2020 2020 2020 2320 2020   [].        #   
+0002e9c0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0002e9d0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0002e9e0: 230a 2020 2020 2020 2020 6461 7461 203d  #.        data =
+0002e9f0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0002ea00: 2872 6573 706f 6e73 652c 2027 6e65 774f  (response, 'newO
+0002ea10: 7264 6572 5265 7370 6f6e 7365 2729 0a20  rderResponse'). 
+0002ea20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0002ea30: 6c66 2e70 6172 7365 5f6f 7264 6572 2864  lf.parse_order(d
+0002ea40: 6174 612c 206d 6172 6b65 7429 0a0a 2020  ata, market)..  
+0002ea50: 2020 6173 796e 6320 6465 6620 6564 6974    async def edit
+0002ea60: 5f63 6f6e 7472 6163 745f 6f72 6465 7228  _contract_order(
+0002ea70: 7365 6c66 2c20 6964 3a20 7374 722c 2073  self, id: str, s
+0002ea80: 796d 626f 6c2c 2074 7970 652c 2073 6964  ymbol, type, sid
+0002ea90: 652c 2061 6d6f 756e 742c 2070 7269 6365  e, amount, price
+0002eaa0: 3d4e 6f6e 652c 2070 6172 616d 733d 7b7d  =None, params={}
+0002eab0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+0002eac0: 2020 2020 2020 2065 6469 7420 6120 7472         edit a tr
+0002ead0: 6164 6520 6f72 6465 720a 2020 2020 2020  ade order.      
+0002eae0: 2020 7365 6520 6874 7470 733a 2f2f 6269    see https://bi
+0002eaf0: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
+0002eb00: 622e 696f 2f61 7069 646f 6373 2f66 7574  b.io/apidocs/fut
+0002eb10: 7572 6573 2f65 6e2f 236d 6f64 6966 792d  ures/en/#modify-
+0002eb20: 6f72 6465 722d 7472 6164 650a 2020 2020  order-trade.    
+0002eb30: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
+0002eb40: 6269 6e61 6e63 652d 646f 6373 2e67 6974  binance-docs.git
+0002eb50: 6875 622e 696f 2f61 7069 646f 6373 2f64  hub.io/apidocs/d
+0002eb60: 656c 6976 6572 792f 656e 2f23 6d6f 6469  elivery/en/#modi
+0002eb70: 6679 2d6f 7264 6572 2d74 7261 6465 0a20  fy-order-trade. 
+0002eb80: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0002eb90: 7220 6964 3a20 6361 6e63 656c 206f 7264  r id: cancel ord
+0002eba0: 6572 2069 640a 2020 2020 2020 2020 3a70  er id.        :p
+0002ebb0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
+0002ebc0: 2075 6e69 6669 6564 2073 796d 626f 6c20   unified symbol 
+0002ebd0: 6f66 2074 6865 206d 6172 6b65 7420 746f  of the market to
+0002ebe0: 2063 7265 6174 6520 616e 206f 7264 6572   create an order
+0002ebf0: 2069 6e0a 2020 2020 2020 2020 3a70 6172   in.        :par
+0002ec00: 616d 2073 7472 2074 7970 653a 2027 6d61  am str type: 'ma
+0002ec10: 726b 6574 2720 6f72 2027 6c69 6d69 7427  rket' or 'limit'
+0002ec20: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0002ec30: 7374 7220 7369 6465 3a20 2762 7579 2720  str side: 'buy' 
+0002ec40: 6f72 2027 7365 6c6c 270a 2020 2020 2020  or 'sell'.      
+0002ec50: 2020 3a70 6172 616d 2066 6c6f 6174 2061    :param float a
+0002ec60: 6d6f 756e 743a 2068 6f77 206d 7563 6820  mount: how much 
+0002ec70: 6f66 2063 7572 7265 6e63 7920 796f 7520  of currency you 
+0002ec80: 7761 6e74 2074 6f20 7472 6164 6520 696e  want to trade in
+0002ec90: 2075 6e69 7473 206f 6620 6261 7365 2063   units of base c
+0002eca0: 7572 7265 6e63 790a 2020 2020 2020 2020  urrency.        
+0002ecb0: 3a70 6172 616d 2066 6c6f 6174 7c4e 6f6e  :param float|Non
+0002ecc0: 6520 7072 6963 653a 2074 6865 2070 7269  e price: the pri
+0002ecd0: 6365 2061 7420 7768 6963 6820 7468 6520  ce at which the 
+0002ece0: 6f72 6465 7220 6973 2074 6f20 6265 2066  order is to be f
+0002ecf0: 756c 6c66 696c 6c65 642c 2069 6e20 756e  ullfilled, in un
+0002ed00: 6974 7320 6f66 2074 6865 2062 6173 6520  its of the base 
+0002ed10: 6375 7272 656e 6379 2c20 6967 6e6f 7265  currency, ignore
+0002ed20: 6420 696e 206d 6172 6b65 7420 6f72 6465  d in market orde
+0002ed30: 7273 0a20 2020 2020 2020 203a 7061 7261  rs.        :para
+0002ed40: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+0002ed50: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+0002ed60: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+0002ed70: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
+0002ed80: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+0002ed90: 7475 726e 7320 6469 6374 3a20 616e 2060  turns dict: an `
+0002eda0: 6f72 6465 7220 7374 7275 6374 7572 6520  order structure 
+0002edb0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+0002edc0: 7874 2e63 6f6d 2f23 2f3f 6964 3d6f 7264  xt.com/#/?id=ord
+0002edd0: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
+0002ede0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0002edf0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+0002ee00: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+0002ee10: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+0002ee20: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+0002ee30: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
+0002ee40: 206d 6172 6b65 745b 2763 6f6e 7472 6163   market['contrac
+0002ee50: 7427 5d3a 0a20 2020 2020 2020 2020 2020  t']:.           
+0002ee60: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+0002ee70: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+0002ee80: 6564 6974 436f 6e74 7261 6374 4f72 6465  editContractOrde
+0002ee90: 7228 2920 646f 6573 206e 6f74 2073 7570  r() does not sup
+0002eea0: 706f 7274 2027 202b 206d 6172 6b65 745b  port ' + market[
+0002eeb0: 2774 7970 6527 5d20 2b20 2720 6f72 6465  'type'] + ' orde
+0002eec0: 7273 2729 0a20 2020 2020 2020 2072 6571  rs').        req
+0002eed0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+0002eee0: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
+0002eef0: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
+0002ef00: 2020 2020 2020 2020 2027 7369 6465 273a           'side':
+0002ef10: 2073 6964 652e 7570 7065 7228 292c 0a20   side.upper(),. 
+0002ef20: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0002ef30: 2063 6c69 656e 744f 7264 6572 4964 203d   clientOrderId =
+0002ef40: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0002ef50: 675f 6e28 7061 7261 6d73 2c20 5b27 6e65  g_n(params, ['ne
+0002ef60: 7743 6c69 656e 744f 7264 6572 4964 272c  wClientOrderId',
+0002ef70: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+0002ef80: 2c20 276f 7269 6743 6c69 656e 744f 7264  , 'origClientOrd
+0002ef90: 6572 4964 275d 290a 2020 2020 2020 2020  erId']).        
+0002efa0: 7265 7175 6573 745b 276f 7264 6572 4964  request['orderId
+0002efb0: 275d 203d 2069 640a 2020 2020 2020 2020  '] = id.        
+0002efc0: 7265 7175 6573 745b 2771 7561 6e74 6974  request['quantit
+0002efd0: 7927 5d20 3d20 7365 6c66 2e61 6d6f 756e  y'] = self.amoun
+0002efe0: 745f 746f 5f70 7265 6369 7369 6f6e 2873  t_to_precision(s
+0002eff0: 796d 626f 6c2c 2061 6d6f 756e 7429 0a20  ymbol, amount). 
+0002f000: 2020 2020 2020 2069 6620 7072 6963 6520         if price 
+0002f010: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0002f020: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002f030: 5b27 7072 6963 6527 5d20 3d20 7365 6c66  ['price'] = self
+0002f040: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
+0002f050: 696f 6e28 7379 6d62 6f6c 2c20 7072 6963  ion(symbol, pric
+0002f060: 6529 0a20 2020 2020 2020 2069 6620 636c  e).        if cl
+0002f070: 6965 6e74 4f72 6465 7249 6420 6973 206e  ientOrderId is n
+0002f080: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0002f090: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
+0002f0a0: 6967 436c 6965 6e74 4f72 6465 7249 6427  igClientOrderId'
+0002f0b0: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
+0002f0c0: 640a 2020 2020 2020 2020 7061 7261 6d73  d.        params
+0002f0d0: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
+0002f0e0: 616d 732c 205b 2763 6c69 656e 744f 7264  ams, ['clientOrd
+0002f0f0: 6572 4964 272c 2027 6e65 7743 6c69 656e  erId', 'newClien
+0002f100: 744f 7264 6572 4964 275d 290a 2020 2020  tOrderId']).    
+0002f110: 2020 2020 7265 7370 6f6e 7365 203d 204e      response = N
+0002f120: 6f6e 650a 2020 2020 2020 2020 6966 206d  one.        if m
+0002f130: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
+0002f140: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0002f150: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+0002f160: 6c66 2e66 6170 6950 7269 7661 7465 5075  lf.fapiPrivatePu
+0002f170: 744f 7264 6572 2873 656c 662e 6578 7465  tOrder(self.exte
+0002f180: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+0002f190: 6d73 2929 0a20 2020 2020 2020 2065 6c69  ms)).        eli
+0002f1a0: 6620 6d61 726b 6574 5b27 696e 7665 7273  f market['invers
+0002f1b0: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+0002f1c0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+0002f1d0: 7420 7365 6c66 2e64 6170 6950 7269 7661  t self.dapiPriva
+0002f1e0: 7465 5075 744f 7264 6572 2873 656c 662e  tePutOrder(self.
+0002f1f0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+0002f200: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+0002f210: 2023 0a20 2020 2020 2020 2023 2073 7761   #.        # swa
+0002f220: 7020 616e 6420 6675 7475 7265 0a20 2020  p and future.   
+0002f230: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0002f240: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0002f250: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
+0002f260: 6422 3a20 3135 3130 3037 3438 3233 3932  d": 151007482392
+0002f270: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0002f280: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+0002f290: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
+0002f2a0: 2023 2020 2020 2020 2020 2022 7374 6174   #         "stat
+0002f2b0: 7573 223a 2022 4e45 5722 2c0a 2020 2020  us": "NEW",.    
+0002f2c0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
+0002f2d0: 6c69 656e 744f 7264 6572 4964 223a 2022  lientOrderId": "
+0002f2e0: 7765 625f 7043 4347 7039 4149 486a 7a69  web_pCCGp9AIHjzi
+0002f2f0: 4b4c 6c70 4770 5849 222c 0a20 2020 2020  KLlpGpXI",.     
+0002f300: 2020 2023 2020 2020 2020 2020 2022 7072     #         "pr
+0002f310: 6963 6522 3a20 2232 3530 3030 222c 0a20  ice": "25000",. 
+0002f320: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002f330: 2022 6176 6750 7269 6365 223a 2022 302e   "avgPrice": "0.
+0002f340: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+0002f350: 2320 2020 2020 2020 2020 226f 7269 6751  #         "origQ
+0002f360: 7479 223a 2022 302e 3030 3122 2c0a 2020  ty": "0.001",.  
+0002f370: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002f380: 2265 7865 6375 7465 6451 7479 223a 2022  "executedQty": "
+0002f390: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0002f3a0: 2020 2020 2020 2263 756d 5174 7922 3a20        "cumQty": 
+0002f3b0: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+0002f3c0: 2020 2020 2020 2022 6375 6d51 756f 7465         "cumQuote
+0002f3d0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+0002f3e0: 2320 2020 2020 2020 2020 2274 696d 6549  #         "timeI
+0002f3f0: 6e46 6f72 6365 223a 2022 4754 4322 2c0a  nForce": "GTC",.
+0002f400: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002f410: 2020 2274 7970 6522 3a20 224c 494d 4954    "type": "LIMIT
+0002f420: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002f430: 2020 2020 2022 7265 6475 6365 4f6e 6c79       "reduceOnly
+0002f440: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
+0002f450: 2020 2320 2020 2020 2020 2020 2263 6c6f    #         "clo
+0002f460: 7365 506f 7369 7469 6f6e 223a 2046 616c  sePosition": Fal
+0002f470: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
+0002f480: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
+0002f490: 5559 222c 0a20 2020 2020 2020 2023 2020  UY",.        #  
+0002f4a0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
+0002f4b0: 5369 6465 223a 2022 424f 5448 222c 0a20  Side": "BOTH",. 
+0002f4c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002f4d0: 2022 7374 6f70 5072 6963 6522 3a20 2230   "stopPrice": "0
+0002f4e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002f4f0: 2020 2020 2022 776f 726b 696e 6754 7970       "workingTyp
+0002f500: 6522 3a20 2243 4f4e 5452 4143 545f 5052  e": "CONTRACT_PR
+0002f510: 4943 4522 2c0a 2020 2020 2020 2020 2320  ICE",.        # 
+0002f520: 2020 2020 2020 2020 2270 7269 6365 5072          "pricePr
+0002f530: 6f74 6563 7422 3a20 4661 6c73 652c 0a20  otect": False,. 
+0002f540: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002f550: 2022 6f72 6967 5479 7065 223a 2022 4c49   "origType": "LI
+0002f560: 4d49 5422 2c0a 2020 2020 2020 2020 2320  MIT",.        # 
+0002f570: 2020 2020 2020 2020 2275 7064 6174 6554          "updateT
+0002f580: 696d 6522 3a20 3136 3834 3330 3035 3837  ime": 1684300587
+0002f590: 3834 350a 2020 2020 2020 2020 2320 2020  845.        #   
+0002f5a0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0002f5b0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0002f5c0: 662e 7061 7273 655f 6f72 6465 7228 7265  f.parse_order(re
+0002f5d0: 7370 6f6e 7365 2c20 6d61 726b 6574 290a  sponse, market).
+0002f5e0: 0a20 2020 2061 7379 6e63 2064 6566 2065  .    async def e
+0002f5f0: 6469 745f 6f72 6465 7228 7365 6c66 2c20  dit_order(self, 
+0002f600: 6964 3a20 7374 722c 2073 796d 626f 6c2c  id: str, symbol,
+0002f610: 2074 7970 652c 2073 6964 652c 2061 6d6f   type, side, amo
+0002f620: 756e 742c 2070 7269 6365 3d4e 6f6e 652c  unt, price=None,
+0002f630: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0002f640: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0002f650: 2065 6469 7420 6120 7472 6164 6520 6f72   edit a trade or
+0002f660: 6465 720a 2020 2020 2020 2020 7365 6520  der.        see 
+0002f670: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+0002f680: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+0002f690: 7069 646f 6373 2f73 706f 742f 656e 2f23  pidocs/spot/en/#
+0002f6a0: 6361 6e63 656c 2d61 6e2d 6578 6973 7469  cancel-an-existi
+0002f6b0: 6e67 2d6f 7264 6572 2d61 6e64 2d73 656e  ng-order-and-sen
+0002f6c0: 642d 612d 6e65 772d 6f72 6465 722d 7472  d-a-new-order-tr
+0002f6d0: 6164 650a 2020 2020 2020 2020 7365 6520  ade.        see 
+0002f6e0: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+0002f6f0: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+0002f700: 7069 646f 6373 2f66 7574 7572 6573 2f65  pidocs/futures/e
+0002f710: 6e2f 236d 6f64 6966 792d 6f72 6465 722d  n/#modify-order-
+0002f720: 7472 6164 650a 2020 2020 2020 2020 7365  trade.        se
+0002f730: 6520 6874 7470 733a 2f2f 6269 6e61 6e63  e https://binanc
+0002f740: 652d 646f 6373 2e67 6974 6875 622e 696f  e-docs.github.io
+0002f750: 2f61 7069 646f 6373 2f64 656c 6976 6572  /apidocs/deliver
+0002f760: 792f 656e 2f23 6d6f 6469 6679 2d6f 7264  y/en/#modify-ord
+0002f770: 6572 2d74 7261 6465 0a20 2020 2020 2020  er-trade.       
+0002f780: 203a 7061 7261 6d20 7374 7220 6964 3a20   :param str id: 
+0002f790: 6361 6e63 656c 206f 7264 6572 2069 640a  cancel order id.
+0002f7a0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0002f7b0: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
+0002f7c0: 6564 2073 796d 626f 6c20 6f66 2074 6865  ed symbol of the
+0002f7d0: 206d 6172 6b65 7420 746f 2063 7265 6174   market to creat
+0002f7e0: 6520 616e 206f 7264 6572 2069 6e0a 2020  e an order in.  
+0002f7f0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0002f800: 2074 7970 653a 2027 6d61 726b 6574 2720   type: 'market' 
+0002f810: 6f72 2027 6c69 6d69 7427 0a20 2020 2020  or 'limit'.     
+0002f820: 2020 203a 7061 7261 6d20 7374 7220 7369     :param str si
+0002f830: 6465 3a20 2762 7579 2720 6f72 2027 7365  de: 'buy' or 'se
+0002f840: 6c6c 270a 2020 2020 2020 2020 3a70 6172  ll'.        :par
+0002f850: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+0002f860: 2068 6f77 206d 7563 6820 6f66 2063 7572   how much of cur
+0002f870: 7265 6e63 7920 796f 7520 7761 6e74 2074  rency you want t
+0002f880: 6f20 7472 6164 6520 696e 2075 6e69 7473  o trade in units
+0002f890: 206f 6620 6261 7365 2063 7572 7265 6e63   of base currenc
+0002f8a0: 790a 2020 2020 2020 2020 3a70 6172 616d  y.        :param
+0002f8b0: 2066 6c6f 6174 7c4e 6f6e 6520 7072 6963   float|None pric
+0002f8c0: 653a 2074 6865 2070 7269 6365 2061 7420  e: the price at 
+0002f8d0: 7768 6963 6820 7468 6520 6f72 6465 7220  which the order 
+0002f8e0: 6973 2074 6f20 6265 2066 756c 6c66 696c  is to be fullfil
+0002f8f0: 6c65 642c 2069 6e20 756e 6974 7320 6f66  led, in units of
+0002f900: 2074 6865 2062 6173 6520 6375 7272 656e   the base curren
+0002f910: 6379 2c20 6967 6e6f 7265 6420 696e 206d  cy, ignored in m
+0002f920: 6172 6b65 7420 6f72 6465 7273 0a20 2020  arket orders.   
+0002f930: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0002f940: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0002f950: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0002f960: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+0002f970: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+0002f980: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0002f990: 6469 6374 3a20 616e 2060 6f72 6465 7220  dict: an `order 
+0002f9a0: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+0002f9b0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+0002f9c0: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
+0002f9d0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+0002f9e0: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
+0002f9f0: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+0002fa00: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
+0002fa10: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+0002fa20: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+0002fa30: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
+0002fa40: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
+0002fa50: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
+0002fa60: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
+0002fa70: 2b20 2720 6564 6974 4f72 6465 7228 2920  + ' editOrder() 
+0002fa80: 646f 6573 206e 6f74 2073 7570 706f 7274  does not support
+0002fa90: 2027 202b 206d 6172 6b65 745b 2774 7970   ' + market['typ
+0002faa0: 6527 5d20 2b20 2720 6f72 6465 7273 2729  e'] + ' orders')
+0002fab0: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
+0002fac0: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
+0002fad0: 2020 2020 2020 2020 7265 7475 726e 2061          return a
+0002fae0: 7761 6974 2073 656c 662e 6564 6974 5f73  wait self.edit_s
+0002faf0: 706f 745f 6f72 6465 7228 6964 2c20 7379  pot_order(id, sy
+0002fb00: 6d62 6f6c 2c20 7479 7065 2c20 7369 6465  mbol, type, side
+0002fb10: 2c20 616d 6f75 6e74 2c20 7072 6963 652c  , amount, price,
+0002fb20: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+0002fb30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002fb40: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0002fb50: 7365 6c66 2e65 6469 745f 636f 6e74 7261  self.edit_contra
+0002fb60: 6374 5f6f 7264 6572 2869 642c 2073 796d  ct_order(id, sym
+0002fb70: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
+0002fb80: 2061 6d6f 756e 742c 2070 7269 6365 2c20   amount, price, 
+0002fb90: 7061 7261 6d73 290a 0a20 2020 2064 6566  params)..    def
+0002fba0: 2070 6172 7365 5f6f 7264 6572 5f73 7461   parse_order_sta
+0002fbb0: 7475 7328 7365 6c66 2c20 7374 6174 7573  tus(self, status
+0002fbc0: 293a 0a20 2020 2020 2020 2073 7461 7475  ):.        statu
+0002fbd0: 7365 7320 3d20 7b0a 2020 2020 2020 2020  ses = {.        
+0002fbe0: 2020 2020 274e 4557 273a 2027 6f70 656e      'NEW': 'open
+0002fbf0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0002fc00: 5041 5254 4941 4c4c 595f 4649 4c4c 4544  PARTIALLY_FILLED
+0002fc10: 273a 2027 6f70 656e 272c 0a20 2020 2020  ': 'open',.     
+0002fc20: 2020 2020 2020 2027 4143 4345 5054 4544         'ACCEPTED
+0002fc30: 273a 2027 6f70 656e 272c 0a20 2020 2020  ': 'open',.     
+0002fc40: 2020 2020 2020 2027 4649 4c4c 4544 273a         'FILLED':
+0002fc50: 2027 636c 6f73 6564 272c 0a20 2020 2020   'closed',.     
+0002fc60: 2020 2020 2020 2027 4341 4e43 454c 4544         'CANCELED
+0002fc70: 273a 2027 6361 6e63 656c 6564 272c 0a20  ': 'canceled',. 
+0002fc80: 2020 2020 2020 2020 2020 2027 4341 4e43             'CANC
+0002fc90: 454c 4c45 4427 3a20 2763 616e 6365 6c65  ELLED': 'cancele
+0002fca0: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
+0002fcb0: 2750 454e 4449 4e47 5f43 414e 4345 4c27  'PENDING_CANCEL'
+0002fcc0: 3a20 2763 616e 6365 6c69 6e67 272c 2020  : 'canceling',  
+0002fcd0: 2320 6375 7272 656e 746c 7920 756e 7573  # currently unus
+0002fce0: 6564 0a20 2020 2020 2020 2020 2020 2027  ed.            '
+0002fcf0: 5245 4a45 4354 4544 273a 2027 7265 6a65  REJECTED': 'reje
+0002fd00: 6374 6564 272c 0a20 2020 2020 2020 2020  cted',.         
+0002fd10: 2020 2027 4558 5049 5245 4427 3a20 2765     'EXPIRED': 'e
+0002fd20: 7870 6972 6564 272c 0a20 2020 2020 2020  xpired',.       
+0002fd30: 2020 2020 2027 4558 5049 5245 445f 494e       'EXPIRED_IN
+0002fd40: 5f4d 4154 4348 273a 2027 6578 7069 7265  _MATCH': 'expire
+0002fd50: 6427 2c0a 2020 2020 2020 2020 7d0a 2020  d',.        }.  
+0002fd60: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0002fd70: 662e 7361 6665 5f73 7472 696e 6728 7374  f.safe_string(st
+0002fd80: 6174 7573 6573 2c20 7374 6174 7573 2c20  atuses, status, 
+0002fd90: 7374 6174 7573 290a 0a20 2020 2064 6566  status)..    def
+0002fda0: 2070 6172 7365 5f6f 7264 6572 2873 656c   parse_order(sel
+0002fdb0: 662c 206f 7264 6572 2c20 6d61 726b 6574  f, order, market
+0002fdc0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+0002fdd0: 230a 2020 2020 2020 2020 2320 7370 6f74  #.        # spot
+0002fde0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0002fdf0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0002fe00: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
+0002fe10: 6d62 6f6c 223a 2022 4c54 4342 5443 222c  mbol": "LTCBTC",
+0002fe20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002fe30: 2020 2022 6f72 6465 7249 6422 3a20 312c     "orderId": 1,
+0002fe40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002fe50: 2020 2022 636c 6965 6e74 4f72 6465 7249     "clientOrderI
+0002fe60: 6422 3a20 226d 794f 7264 6572 3122 2c0a  d": "myOrder1",.
+0002fe70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002fe80: 2020 2270 7269 6365 223a 2022 302e 3122    "price": "0.1"
+0002fe90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0002fea0: 2020 2020 226f 7269 6751 7479 223a 2022      "origQty": "
+0002feb0: 312e 3022 2c0a 2020 2020 2020 2020 2320  1.0",.        # 
+0002fec0: 2020 2020 2020 2020 2265 7865 6375 7465          "execute
+0002fed0: 6451 7479 223a 2022 302e 3022 2c0a 2020  dQty": "0.0",.  
+0002fee0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002fef0: 2263 756d 6d75 6c61 7469 7665 5175 6f74  "cummulativeQuot
+0002ff00: 6551 7479 223a 2022 302e 3022 2c0a 2020  eQty": "0.0",.  
+0002ff10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002ff20: 2273 7461 7475 7322 3a20 224e 4557 222c  "status": "NEW",
+0002ff30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002ff40: 2020 2022 7469 6d65 496e 466f 7263 6522     "timeInForce"
+0002ff50: 3a20 2247 5443 222c 0a20 2020 2020 2020  : "GTC",.       
+0002ff60: 2023 2020 2020 2020 2020 2022 7479 7065   #         "type
+0002ff70: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
+0002ff80: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
+0002ff90: 6964 6522 3a20 2242 5559 222c 0a20 2020  ide": "BUY",.   
+0002ffa0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0002ffb0: 7374 6f70 5072 6963 6522 3a20 2230 2e30  stopPrice": "0.0
+0002ffc0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002ffd0: 2020 2020 2022 6963 6562 6572 6751 7479       "icebergQty
+0002ffe0: 223a 2022 302e 3022 2c0a 2020 2020 2020  ": "0.0",.      
+0002fff0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+00030000: 6522 3a20 3134 3939 3832 3733 3139 3535  e": 149982731955
+00030010: 392c 0a20 2020 2020 2020 2023 2020 2020  9,.        #    
+00030020: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
+00030030: 223a 2031 3439 3938 3237 3331 3935 3539  ": 1499827319559
+00030040: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030050: 2020 2020 2269 7357 6f72 6b69 6e67 223a      "isWorking":
+00030060: 2054 7275 650a 2020 2020 2020 2020 2320   True.        # 
+00030070: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00030080: 2020 2020 2020 2020 2320 7370 6f74 3a20          # spot: 
+00030090: 6564 6974 4f72 6465 720a 2020 2020 2020  editOrder.      
+000300a0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+000300b0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+000300c0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+000300d0: 2242 5443 5553 4454 222c 0a20 2020 2020  "BTCUSDT",.     
+000300e0: 2020 2023 2020 2020 2020 2020 2022 6f72     #         "or
+000300f0: 6465 7249 6422 3a20 3136 3338 3331 3736  derId": 16383176
+00030100: 3239 372c 0a20 2020 2020 2020 2023 2020  297,.        #  
+00030110: 2020 2020 2020 2022 6f72 6465 724c 6973         "orderLis
+00030120: 7449 6422 3a20 2d31 2c0a 2020 2020 2020  tId": -1,.      
+00030130: 2020 2320 2020 2020 2020 2020 2263 6c69    #         "cli
+00030140: 656e 744f 7264 6572 4964 223a 2022 782d  entOrderId": "x-
+00030150: 5234 4244 3353 3832 3232 6563 6235 3865  R4BD3S8222ecb58e
+00030160: 6239 3037 3466 6231 6265 3031 3863 222c  b9074fb1be018c",
+00030170: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030180: 2020 2022 7472 616e 7361 6374 5469 6d65     "transactTime
+00030190: 223a 2031 3637 3038 3931 3834 3739 3332  ": 1670891847932
+000301a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000301b0: 2020 2020 2270 7269 6365 223a 2022 3133      "price": "13
+000301c0: 3530 302e 3030 3030 3030 3030 222c 0a20  500.00000000",. 
+000301d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000301e0: 2022 6f72 6967 5174 7922 3a20 2230 2e30   "origQty": "0.0
+000301f0: 3030 3835 3030 3022 2c0a 2020 2020 2020  0085000",.      
+00030200: 2020 2320 2020 2020 2020 2020 2265 7865    #         "exe
+00030210: 6375 7465 6451 7479 223a 2022 302e 3030  cutedQty": "0.00
+00030220: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00030230: 2023 2020 2020 2020 2020 2022 6375 6d6d   #         "cumm
+00030240: 756c 6174 6976 6551 756f 7465 5174 7922  ulativeQuoteQty"
+00030250: 3a20 2230 2e30 3030 3030 3030 3022 2c0a  : "0.00000000",.
+00030260: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030270: 2020 2273 7461 7475 7322 3a20 224e 4557    "status": "NEW
+00030280: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030290: 2020 2020 2022 7469 6d65 496e 466f 7263       "timeInForc
+000302a0: 6522 3a20 2247 5443 222c 0a20 2020 2020  e": "GTC",.     
+000302b0: 2020 2023 2020 2020 2020 2020 2022 7479     #         "ty
+000302c0: 7065 223a 2022 4c49 4d49 5422 2c0a 2020  pe": "LIMIT",.  
+000302d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000302e0: 2273 6964 6522 3a20 2242 5559 222c 0a20  "side": "BUY",. 
+000302f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030300: 2022 6669 6c6c 7322 3a20 5b5d 0a20 2020   "fills": [].   
+00030310: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00030320: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00030330: 2073 7761 7020 616e 6420 6675 7475 7265   swap and future
+00030340: 3a20 6564 6974 4f72 6465 720a 2020 2020  : editOrder.    
+00030350: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00030360: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00030370: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
+00030380: 223a 2031 3531 3030 3734 3832 3339 322c  ": 151007482392,
+00030390: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000303a0: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
+000303b0: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
+000303c0: 2320 2020 2020 2020 2020 2273 7461 7475  #         "statu
+000303d0: 7322 3a20 224e 4557 222c 0a20 2020 2020  s": "NEW",.     
+000303e0: 2020 2023 2020 2020 2020 2020 2022 636c     #         "cl
+000303f0: 6965 6e74 4f72 6465 7249 6422 3a20 2277  ientOrderId": "w
+00030400: 6562 5f70 4343 4770 3941 4948 6a7a 694b  eb_pCCGp9AIHjziK
+00030410: 4c6c 7047 7058 4922 2c0a 2020 2020 2020  LlpGpXI",.      
+00030420: 2020 2320 2020 2020 2020 2020 2270 7269    #         "pri
+00030430: 6365 223a 2022 3235 3030 3022 2c0a 2020  ce": "25000",.  
+00030440: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00030450: 2261 7667 5072 6963 6522 3a20 2230 2e30  "avgPrice": "0.0
+00030460: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00030470: 2020 2020 2020 2020 2022 6f72 6967 5174           "origQt
+00030480: 7922 3a20 2230 2e30 3031 222c 0a20 2020  y": "0.001",.   
+00030490: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000304a0: 6578 6563 7574 6564 5174 7922 3a20 2230  executedQty": "0
+000304b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000304c0: 2020 2020 2022 6375 6d51 7479 223a 2022       "cumQty": "
+000304d0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000304e0: 2020 2020 2020 2263 756d 5175 6f74 6522        "cumQuote"
+000304f0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+00030500: 2020 2020 2020 2020 2022 7469 6d65 496e           "timeIn
+00030510: 466f 7263 6522 3a20 2247 5443 222c 0a20  Force": "GTC",. 
+00030520: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030530: 2022 7479 7065 223a 2022 4c49 4d49 5422   "type": "LIMIT"
+00030540: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030550: 2020 2020 2272 6564 7563 654f 6e6c 7922      "reduceOnly"
+00030560: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
+00030570: 2023 2020 2020 2020 2020 2022 636c 6f73   #         "clos
+00030580: 6550 6f73 6974 696f 6e22 3a20 4661 6c73  ePosition": Fals
+00030590: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+000305a0: 2020 2020 2022 7369 6465 223a 2022 4255       "side": "BU
+000305b0: 5922 2c0a 2020 2020 2020 2020 2320 2020  Y",.        #   
+000305c0: 2020 2020 2020 2270 6f73 6974 696f 6e53        "positionS
+000305d0: 6964 6522 3a20 2242 4f54 4822 2c0a 2020  ide": "BOTH",.  
+000305e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000305f0: 2273 746f 7050 7269 6365 223a 2022 3022  "stopPrice": "0"
+00030600: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030610: 2020 2020 2277 6f72 6b69 6e67 5479 7065      "workingType
+00030620: 223a 2022 434f 4e54 5241 4354 5f50 5249  ": "CONTRACT_PRI
+00030630: 4345 222c 0a20 2020 2020 2020 2023 2020  CE",.        #  
+00030640: 2020 2020 2020 2022 7072 6963 6550 726f         "pricePro
+00030650: 7465 6374 223a 2046 616c 7365 2c0a 2020  tect": False,.  
+00030660: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00030670: 226f 7269 6754 7970 6522 3a20 224c 494d  "origType": "LIM
+00030680: 4954 222c 0a20 2020 2020 2020 2023 2020  IT",.        #  
+00030690: 2020 2020 2020 2022 7570 6461 7465 5469         "updateTi
+000306a0: 6d65 223a 2031 3638 3433 3030 3538 3738  me": 16843005878
+000306b0: 3435 0a20 2020 2020 2020 2023 2020 2020  45.        #    
+000306c0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+000306d0: 2020 2020 2023 2066 7574 7572 6573 0a20       # futures. 
+000306e0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000306f0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+00030700: 2023 2020 2020 2020 2020 2022 7379 6d62   #         "symb
+00030710: 6f6c 223a 2022 4254 4355 5344 5422 2c0a  ol": "BTCUSDT",.
+00030720: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030730: 2020 226f 7264 6572 4964 223a 2031 2c0a    "orderId": 1,.
+00030740: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030750: 2020 2263 6c69 656e 744f 7264 6572 4964    "clientOrderId
+00030760: 223a 2022 6d79 4f72 6465 7231 222c 0a20  ": "myOrder1",. 
+00030770: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030780: 2022 7072 6963 6522 3a20 2230 2e31 222c   "price": "0.1",
+00030790: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000307a0: 2020 2022 6f72 6967 5174 7922 3a20 2231     "origQty": "1
+000307b0: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
+000307c0: 2020 2020 2020 2022 6578 6563 7574 6564         "executed
+000307d0: 5174 7922 3a20 2231 2e30 222c 0a20 2020  Qty": "1.0",.   
+000307e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000307f0: 6375 6d51 756f 7465 223a 2022 3130 2e30  cumQuote": "10.0
+00030800: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030810: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
+00030820: 4e45 5722 2c0a 2020 2020 2020 2020 2320  NEW",.        # 
+00030830: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
+00030840: 6f72 6365 223a 2022 4754 4322 2c0a 2020  orce": "GTC",.  
+00030850: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00030860: 2274 7970 6522 3a20 224c 494d 4954 222c  "type": "LIMIT",
+00030870: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030880: 2020 2022 7369 6465 223a 2022 4255 5922     "side": "BUY"
+00030890: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000308a0: 2020 2020 2273 746f 7050 7269 6365 223a      "stopPrice":
+000308b0: 2022 302e 3022 2c0a 2020 2020 2020 2020   "0.0",.        
+000308c0: 2320 2020 2020 2020 2020 2275 7064 6174  #         "updat
+000308d0: 6554 696d 6522 3a20 3134 3939 3832 3733  eTime": 14998273
+000308e0: 3139 3535 390a 2020 2020 2020 2020 2320  19559.        # 
+000308f0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00030900: 2020 2020 2020 2020 2320 6372 6561 7465          # create
+00030910: 4f72 6465 7220 7769 7468 207b 226e 6577  Order with {"new
+00030920: 4f72 6465 7252 6573 7054 7970 6522 3a20  OrderRespType": 
+00030930: 2246 554c 4c22 7d0a 2020 2020 2020 2020  "FULL"}.        
+00030940: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00030950: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00030960: 2020 2273 796d 626f 6c22 3a20 2242 5443    "symbol": "BTC
+00030970: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+00030980: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
+00030990: 3a20 3534 3033 3233 3339 3339 2c0a 2020  : 5403233939,.  
+000309a0: 2020 2020 2020 2320 2020 2020 2020 226f        #       "o
+000309b0: 7264 6572 4c69 7374 4964 223a 202d 312c  rderListId": -1,
+000309c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000309d0: 2022 636c 6965 6e74 4f72 6465 7249 6422   "clientOrderId"
+000309e0: 3a20 2278 2d52 3442 4433 5338 3235 6536  : "x-R4BD3S825e6
+000309f0: 3639 6537 3562 3663 3134 6636 3961 3263  69e75b6c14f69a2c
+00030a00: 3433 6522 2c0a 2020 2020 2020 2020 2320  43e",.        # 
+00030a10: 2020 2020 2020 2274 7261 6e73 6163 7454        "transactT
+00030a20: 696d 6522 3a20 3136 3137 3135 3139 3233  ime": 1617151923
+00030a30: 3734 322c 0a20 2020 2020 2020 2023 2020  742,.        #  
+00030a40: 2020 2020 2022 7072 6963 6522 3a20 2230       "price": "0
+00030a50: 2e30 3030 3030 3030 3022 2c0a 2020 2020  .00000000",.    
+00030a60: 2020 2020 2320 2020 2020 2020 226f 7269      #       "ori
+00030a70: 6751 7479 223a 2022 302e 3030 3035 3030  gQty": "0.000500
+00030a80: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00030a90: 2020 2020 2022 6578 6563 7574 6564 5174       "executedQt
+00030aa0: 7922 3a20 2230 2e30 3030 3530 3030 3022  y": "0.00050000"
+00030ab0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030ac0: 2020 2263 756d 6d75 6c61 7469 7665 5175    "cummulativeQu
+00030ad0: 6f74 6551 7479 223a 2022 3239 2e34 3730  oteQty": "29.470
+00030ae0: 3831 3530 3022 2c0a 2020 2020 2020 2020  81500",.        
+00030af0: 2320 2020 2020 2020 2273 7461 7475 7322  #       "status"
+00030b00: 3a20 2246 494c 4c45 4422 2c0a 2020 2020  : "FILLED",.    
+00030b10: 2020 2020 2320 2020 2020 2020 2274 696d      #       "tim
+00030b20: 6549 6e46 6f72 6365 223a 2022 4754 4322  eInForce": "GTC"
+00030b30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030b40: 2020 2274 7970 6522 3a20 224d 4152 4b45    "type": "MARKE
+00030b50: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
+00030b60: 2020 2020 2273 6964 6522 3a20 2242 5559      "side": "BUY
+00030b70: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030b80: 2020 2022 6669 6c6c 7322 3a20 5b0a 2020     "fills": [.  
+00030b90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00030ba0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00030bb0: 2020 2020 2020 2270 7269 6365 223a 2022        "price": "
+00030bc0: 3538 3934 312e 3633 3030 3030 3030 222c  58941.63000000",
+00030bd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030be0: 2020 2020 2022 7174 7922 3a20 2230 2e30       "qty": "0.0
+00030bf0: 3030 3530 3030 3022 2c0a 2020 2020 2020  0050000",.      
+00030c00: 2020 2320 2020 2020 2020 2020 2020 2263    #           "c
+00030c10: 6f6d 6d69 7373 696f 6e22 3a20 2230 2e30  ommission": "0.0
+00030c20: 3030 3037 3035 3022 2c0a 2020 2020 2020  0007050",.      
+00030c30: 2020 2320 2020 2020 2020 2020 2020 2263    #           "c
+00030c40: 6f6d 6d69 7373 696f 6e41 7373 6574 223a  ommissionAsset":
+00030c50: 2022 424e 4222 2c0a 2020 2020 2020 2020   "BNB",.        
+00030c60: 2320 2020 2020 2020 2020 2020 2274 7261  #           "tra
+00030c70: 6465 4964 223a 2037 3337 3436 3636 3331  deId": 737466631
+00030c80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030c90: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+00030ca0: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+00030cb0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00030cc0: 0a20 2020 2020 2020 2023 2064 656c 6976  .        # deliv
+00030cd0: 6572 790a 2020 2020 2020 2020 230a 2020  ery.        #.  
+00030ce0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+00030cf0: 2020 2020 2020 2320 2020 2020 2020 226f        #       "o
+00030d00: 7264 6572 4964 223a 2022 3138 3734 3237  rderId": "187427
+00030d10: 3237 3431 3122 2c0a 2020 2020 2020 2020  27411",.        
+00030d20: 2320 2020 2020 2020 2273 796d 626f 6c22  #       "symbol"
+00030d30: 3a20 2245 5448 5553 445f 5045 5250 222c  : "ETHUSD_PERP",
+00030d40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030d50: 2022 7061 6972 223a 2022 4554 4855 5344   "pair": "ETHUSD
+00030d60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030d70: 2020 2022 7374 6174 7573 223a 2022 4649     "status": "FI
+00030d80: 4c4c 4544 222c 0a20 2020 2020 2020 2023  LLED",.        #
+00030d90: 2020 2020 2020 2022 636c 6965 6e74 4f72         "clientOr
+00030da0: 6465 7249 6422 3a20 2278 2d78 634b 7447  derId": "x-xcKtG
+00030db0: 6863 7533 6532 6431 3530 3366 6464 3534  hcu3e2d1503fdd54
+00030dc0: 3362 3362 3032 3431 3922 2c0a 2020 2020  3b3b02419",.    
+00030dd0: 2020 2020 2320 2020 2020 2020 2270 7269      #       "pri
+00030de0: 6365 223a 2022 3022 2c0a 2020 2020 2020  ce": "0",.      
+00030df0: 2020 2320 2020 2020 2020 2261 7667 5072    #       "avgPr
+00030e00: 6963 6522 3a20 2234 3532 322e 3134 222c  ice": "4522.14",
+00030e10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030e20: 2022 6f72 6967 5174 7922 3a20 2231 222c   "origQty": "1",
+00030e30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030e40: 2022 6578 6563 7574 6564 5174 7922 3a20   "executedQty": 
+00030e50: 2231 222c 0a20 2020 2020 2020 2023 2020  "1",.        #  
+00030e60: 2020 2020 2022 6375 6d42 6173 6522 3a20       "cumBase": 
+00030e70: 2230 2e30 3032 3231 3133 3422 2c0a 2020  "0.00221134",.  
+00030e80: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
+00030e90: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
+00030ea0: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+00030eb0: 2020 2020 2274 7970 6522 3a20 224d 4152      "type": "MAR
+00030ec0: 4b45 5422 2c0a 2020 2020 2020 2020 2320  KET",.        # 
+00030ed0: 2020 2020 2020 2272 6564 7563 654f 6e6c        "reduceOnl
+00030ee0: 7922 3a20 4661 6c73 652c 0a20 2020 2020  y": False,.     
+00030ef0: 2020 2023 2020 2020 2020 2022 636c 6f73     #       "clos
+00030f00: 6550 6f73 6974 696f 6e22 3a20 4661 6c73  ePosition": Fals
+00030f10: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+00030f20: 2020 2022 7369 6465 223a 2022 5345 4c4c     "side": "SELL
+00030f30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030f40: 2020 2022 706f 7369 7469 6f6e 5369 6465     "positionSide
+00030f50: 223a 2022 424f 5448 222c 0a20 2020 2020  ": "BOTH",.     
+00030f60: 2020 2023 2020 2020 2020 2022 7374 6f70     #       "stop
+00030f70: 5072 6963 6522 3a20 2230 222c 0a20 2020  Price": "0",.   
+00030f80: 2020 2020 2023 2020 2020 2020 2022 776f       #       "wo
+00030f90: 726b 696e 6754 7970 6522 3a20 2243 4f4e  rkingType": "CON
+00030fa0: 5452 4143 545f 5052 4943 4522 2c0a 2020  TRACT_PRICE",.  
+00030fb0: 2020 2020 2020 2320 2020 2020 2020 2270        #       "p
+00030fc0: 7269 6365 5072 6f74 6563 7422 3a20 4661  riceProtect": Fa
+00030fd0: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+00030fe0: 2020 2020 2022 6f72 6967 5479 7065 223a       "origType":
+00030ff0: 2022 4d41 524b 4554 222c 0a20 2020 2020   "MARKET",.     
+00031000: 2020 2023 2020 2020 2020 2022 7469 6d65     #       "time
+00031010: 223a 2022 3136 3336 3036 3139 3532 3636  ": "163606195266
+00031020: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00031030: 2020 2020 2275 7064 6174 6554 696d 6522      "updateTime"
+00031040: 3a20 2231 3633 3630 3631 3935 3236 3630  : "1636061952660
+00031050: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00031060: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+00031070: 2020 2020 2320 6f70 7469 6f6e 3a20 6372      # option: cr
+00031080: 6561 7465 4f72 6465 722c 2066 6574 6368  eateOrder, fetch
+00031090: 4f72 6465 722c 2066 6574 6368 4f70 656e  Order, fetchOpen
+000310a0: 4f72 6465 7273 2c20 6665 7463 684f 7264  Orders, fetchOrd
+000310b0: 6572 730a 2020 2020 2020 2020 230a 2020  ers.        #.  
+000310c0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+000310d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000310e0: 226f 7264 6572 4964 223a 2034 3732 3838  "orderId": 47288
+000310f0: 3333 3038 3534 3336 3937 3731 3532 2c0a  33085436977152,.
+00031100: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00031110: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
+00031120: 2d32 3330 3231 312d 3135 3030 2d43 222c  -230211-1500-C",
+00031130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00031140: 2020 2022 7072 6963 6522 3a20 2231 302e     "price": "10.
+00031150: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00031160: 2020 2020 2020 2271 7561 6e74 6974 7922        "quantity"
+00031170: 3a20 2231 2e30 3022 2c0a 2020 2020 2020  : "1.00",.      
+00031180: 2020 2320 2020 2020 2020 2020 2265 7865    #         "exe
+00031190: 6375 7465 6451 7479 223a 2022 302e 3030  cutedQty": "0.00
+000311a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000311b0: 2020 2020 2022 6665 6522 3a20 2230 222c       "fee": "0",
+000311c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000311d0: 2020 2022 7369 6465 223a 2022 4255 5922     "side": "BUY"
+000311e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000311f0: 2020 2020 2274 7970 6522 3a20 224c 494d      "type": "LIM
+00031200: 4954 222c 0a20 2020 2020 2020 2023 2020  IT",.        #  
+00031210: 2020 2020 2020 2022 7469 6d65 496e 466f         "timeInFo
+00031220: 7263 6522 3a20 2247 5443 222c 0a20 2020  rce": "GTC",.   
+00031230: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00031240: 7265 6475 6365 4f6e 6c79 223a 2046 616c  reduceOnly": Fal
+00031250: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
+00031260: 2020 2020 2020 2270 6f73 744f 6e6c 7922        "postOnly"
+00031270: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
+00031280: 2023 2020 2020 2020 2020 2022 6372 6561   #         "crea
+00031290: 7465 5469 6d65 223a 2031 3637 3630 3833  teTime": 1676083
+000312a0: 3033 3434 3632 2c0a 2020 2020 2020 2020  034462,.        
+000312b0: 2320 2020 2020 2020 2020 2275 7064 6174  #         "updat
+000312c0: 6554 696d 6522 3a20 3136 3736 3038 3330  eTime": 16760830
+000312d0: 3334 3436 322c 0a20 2020 2020 2020 2023  34462,.        #
+000312e0: 2020 2020 2020 2020 2022 7374 6174 7573           "status
+000312f0: 223a 2022 4143 4345 5054 4544 222c 0a20  ": "ACCEPTED",. 
+00031300: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00031310: 2022 6176 6750 7269 6365 223a 2022 3022   "avgPrice": "0"
+00031320: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00031330: 2020 2020 2273 6f75 7263 6522 3a20 2241      "source": "A
+00031340: 5049 222c 0a20 2020 2020 2020 2023 2020  PI",.        #  
+00031350: 2020 2020 2020 2022 636c 6965 6e74 4f72         "clientOr
+00031360: 6465 7249 6422 3a20 2222 2c0a 2020 2020  derId": "",.    
+00031370: 2020 2020 2320 2020 2020 2020 2020 2270      #         "p
+00031380: 7269 6365 5363 616c 6522 3a20 312c 0a20  riceScale": 1,. 
+00031390: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000313a0: 2022 7175 616e 7469 7479 5363 616c 6522   "quantityScale"
+000313b0: 3a20 322c 0a20 2020 2020 2020 2023 2020  : 2,.        #  
+000313c0: 2020 2020 2020 2022 6f70 7469 6f6e 5369         "optionSi
+000313d0: 6465 223a 2022 4341 4c4c 222c 0a20 2020  de": "CALL",.   
+000313e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000313f0: 7175 6f74 6541 7373 6574 223a 2022 5553  quoteAsset": "US
+00031400: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+00031410: 2020 2020 2020 2022 6c61 7374 5472 6164         "lastTrad
+00031420: 6522 3a20 7b22 6964 223a 2236 3922 2c22  e": {"id":"69","
+00031430: 7469 6d65 223a 2231 3637 3630 3834 3433  time":"167608443
+00031440: 3035 3637 222c 2270 7269 6365 223a 2232  0567","price":"2
+00031450: 342e 3922 2c22 7174 7922 3a22 312e 3030  4.9","qty":"1.00
+00031460: 227d 2c0a 2020 2020 2020 2020 2320 2020  "},.        #   
+00031470: 2020 2020 2020 226d 6d70 223a 2046 616c        "mmp": Fal
+00031480: 7365 0a20 2020 2020 2020 2023 2020 2020  se.        #    
+00031490: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+000314a0: 2020 2020 2073 7461 7475 7320 3d20 7365       status = se
+000314b0: 6c66 2e70 6172 7365 5f6f 7264 6572 5f73  lf.parse_order_s
+000314c0: 7461 7475 7328 7365 6c66 2e73 6166 655f  tatus(self.safe_
+000314d0: 7374 7269 6e67 286f 7264 6572 2c20 2773  string(order, 's
+000314e0: 7461 7475 7327 2929 0a20 2020 2020 2020  tatus')).       
+000314f0: 206d 6172 6b65 7449 6420 3d20 7365 6c66   marketId = self
+00031500: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
+00031510: 6572 2c20 2773 796d 626f 6c27 290a 2020  er, 'symbol').  
+00031520: 2020 2020 2020 6d61 726b 6574 5479 7065        marketType
+00031530: 203d 2027 636f 6e74 7261 6374 2720 6966   = 'contract' if
+00031540: 2028 2763 6c6f 7365 506f 7369 7469 6f6e   ('closePosition
+00031550: 2720 696e 206f 7264 6572 2920 656c 7365  ' in order) else
+00031560: 2027 7370 6f74 270a 2020 2020 2020 2020   'spot'.        
+00031570: 7379 6d62 6f6c 203d 2073 656c 662e 7361  symbol = self.sa
+00031580: 6665 5f73 796d 626f 6c28 6d61 726b 6574  fe_symbol(market
+00031590: 4964 2c20 6d61 726b 6574 2c20 4e6f 6e65  Id, market, None
+000315a0: 2c20 6d61 726b 6574 5479 7065 290a 2020  , marketType).  
+000315b0: 2020 2020 2020 6669 6c6c 6564 203d 2073        filled = s
+000315c0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000315d0: 6f72 6465 722c 2027 6578 6563 7574 6564  order, 'executed
+000315e0: 5174 7927 2c20 2730 2729 0a20 2020 2020  Qty', '0').     
+000315f0: 2020 2074 696d 6573 7461 6d70 203d 204e     timestamp = N
+00031600: 6f6e 650a 2020 2020 2020 2020 6c61 7374  one.        last
+00031610: 5472 6164 6554 696d 6573 7461 6d70 203d  TradeTimestamp =
+00031620: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+00031630: 2027 7469 6d65 2720 696e 206f 7264 6572   'time' in order
+00031640: 3a0a 2020 2020 2020 2020 2020 2020 7469  :.            ti
+00031650: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
+00031660: 6166 655f 696e 7465 6765 7228 6f72 6465  afe_integer(orde
+00031670: 722c 2027 7469 6d65 2729 0a20 2020 2020  r, 'time').     
+00031680: 2020 2065 6c69 6620 2777 6f72 6b69 6e67     elif 'working
+00031690: 5469 6d65 2720 696e 206f 7264 6572 3a0a  Time' in order:.
+000316a0: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+000316b0: 5472 6164 6554 696d 6573 7461 6d70 203d  TradeTimestamp =
+000316c0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+000316d0: 6572 286f 7264 6572 2c20 2774 7261 6e73  er(order, 'trans
+000316e0: 6163 7454 696d 6527 290a 2020 2020 2020  actTime').      
+000316f0: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
+00031700: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+00031710: 6765 7228 6f72 6465 722c 2027 776f 726b  ger(order, 'work
+00031720: 696e 6754 696d 6527 290a 2020 2020 2020  ingTime').      
+00031730: 2020 656c 6966 2027 7472 616e 7361 6374    elif 'transact
+00031740: 5469 6d65 2720 696e 206f 7264 6572 3a0a  Time' in order:.
+00031750: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+00031760: 5472 6164 6554 696d 6573 7461 6d70 203d  TradeTimestamp =
+00031770: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+00031780: 6572 286f 7264 6572 2c20 2774 7261 6e73  er(order, 'trans
+00031790: 6163 7454 696d 6527 290a 2020 2020 2020  actTime').      
+000317a0: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
+000317b0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+000317c0: 6765 7228 6f72 6465 722c 2027 7472 616e  ger(order, 'tran
+000317d0: 7361 6374 5469 6d65 2729 0a20 2020 2020  sactTime').     
+000317e0: 2020 2065 6c69 6620 2763 7265 6174 6554     elif 'createT
+000317f0: 696d 6527 2069 6e20 6f72 6465 723a 0a20  ime' in order:. 
+00031800: 2020 2020 2020 2020 2020 206c 6173 7454             lastT
+00031810: 7261 6465 5469 6d65 7374 616d 7020 3d20  radeTimestamp = 
+00031820: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+00031830: 7228 6f72 6465 722c 2027 7570 6461 7465  r(order, 'update
+00031840: 5469 6d65 2729 0a20 2020 2020 2020 2020  Time').         
+00031850: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
+00031860: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+00031870: 286f 7264 6572 2c20 2763 7265 6174 6554  (order, 'createT
+00031880: 696d 6527 290a 2020 2020 2020 2020 656c  ime').        el
+00031890: 6966 2027 7570 6461 7465 5469 6d65 2720  if 'updateTime' 
+000318a0: 696e 206f 7264 6572 3a0a 2020 2020 2020  in order:.      
+000318b0: 2020 2020 2020 6966 2073 7461 7475 7320        if status 
+000318c0: 3d3d 2027 6f70 656e 273a 0a20 2020 2020  == 'open':.     
+000318d0: 2020 2020 2020 2020 2020 2069 6620 5072             if Pr
+000318e0: 6563 6973 652e 7374 7269 6e67 5f67 7428  ecise.string_gt(
+000318f0: 6669 6c6c 6564 2c20 2730 2729 3a0a 2020  filled, '0'):.  
+00031900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031910: 2020 6c61 7374 5472 6164 6554 696d 6573    lastTradeTimes
+00031920: 7461 6d70 203d 2073 656c 662e 7361 6665  tamp = self.safe
+00031930: 5f69 6e74 6567 6572 286f 7264 6572 2c20  _integer(order, 
+00031940: 2775 7064 6174 6554 696d 6527 290a 2020  'updateTime').  
+00031950: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00031960: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00031970: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
+00031980: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
+00031990: 7465 6765 7228 6f72 6465 722c 2027 7570  teger(order, 'up
+000319a0: 6461 7465 5469 6d65 2729 0a20 2020 2020  dateTime').     
+000319b0: 2020 2061 7665 7261 6765 203d 2073 656c     average = sel
+000319c0: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
+000319d0: 6465 722c 2027 6176 6750 7269 6365 2729  der, 'avgPrice')
+000319e0: 0a20 2020 2020 2020 2070 7269 6365 203d  .        price =
+000319f0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00031a00: 6728 6f72 6465 722c 2027 7072 6963 6527  g(order, 'price'
+00031a10: 290a 2020 2020 2020 2020 616d 6f75 6e74  ).        amount
+00031a20: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00031a30: 696e 675f 3228 6f72 6465 722c 2027 6f72  ing_2(order, 'or
+00031a40: 6967 5174 7927 2c20 2771 7561 6e74 6974  igQty', 'quantit
+00031a50: 7927 290a 2020 2020 2020 2020 2320 2d20  y').        # - 
+00031a60: 5370 6f74 2f4d 6172 6769 6e20 6d61 726b  Spot/Margin mark
+00031a70: 6574 3a20 6375 6d6d 756c 6174 6976 6551  et: cummulativeQ
+00031a80: 756f 7465 5174 790a 2020 2020 2020 2020  uoteQty.        
+00031a90: 2320 2d20 4675 7475 7265 7320 6d61 726b  # - Futures mark
+00031aa0: 6574 3a20 6375 6d51 756f 7465 2e0a 2020  et: cumQuote..  
+00031ab0: 2020 2020 2020 2320 2020 4e6f 7465 2073        #   Note s
+00031ac0: 656c 6620 6973 206e 6f74 2074 6865 2061  elf is not the a
+00031ad0: 6374 7561 6c20 636f 7374 2c20 7369 6e63  ctual cost, sinc
+00031ae0: 6520 4269 6e61 6e63 6520 6675 7475 7265  e Binance future
+00031af0: 7320 7573 6573 206c 6576 6572 6167 6520  s uses leverage 
+00031b00: 746f 2063 616c 6375 6c61 7465 206d 6172  to calculate mar
+00031b10: 6769 6e73 2e0a 2020 2020 2020 2020 636f  gins..        co
+00031b20: 7374 203d 2073 656c 662e 7361 6665 5f73  st = self.safe_s
+00031b30: 7472 696e 675f 3228 6f72 6465 722c 2027  tring_2(order, '
+00031b40: 6375 6d6d 756c 6174 6976 6551 756f 7465  cummulativeQuote
+00031b50: 5174 7927 2c20 2763 756d 5175 6f74 6527  Qty', 'cumQuote'
+00031b60: 290a 2020 2020 2020 2020 636f 7374 203d  ).        cost =
+00031b70: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00031b80: 6728 6f72 6465 722c 2027 6375 6d42 6173  g(order, 'cumBas
+00031b90: 6527 2c20 636f 7374 290a 2020 2020 2020  e', cost).      
+00031ba0: 2020 6964 203d 2073 656c 662e 7361 6665    id = self.safe
+00031bb0: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+00031bc0: 6f72 6465 7249 6427 290a 2020 2020 2020  orderId').      
+00031bd0: 2020 7479 7065 203d 2073 656c 662e 7361    type = self.sa
+00031be0: 6665 5f73 7472 696e 675f 6c6f 7765 7228  fe_string_lower(
+00031bf0: 6f72 6465 722c 2027 7479 7065 2729 0a20  order, 'type'). 
+00031c00: 2020 2020 2020 2073 6964 6520 3d20 7365         side = se
+00031c10: 6c66 2e73 6166 655f 7374 7269 6e67 5f6c  lf.safe_string_l
+00031c20: 6f77 6572 286f 7264 6572 2c20 2773 6964  ower(order, 'sid
+00031c30: 6527 290a 2020 2020 2020 2020 6669 6c6c  e').        fill
+00031c40: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+00031c50: 6c75 6528 6f72 6465 722c 2027 6669 6c6c  lue(order, 'fill
+00031c60: 7327 2c20 5b5d 290a 2020 2020 2020 2020  s', []).        
+00031c70: 636c 6965 6e74 4f72 6465 7249 6420 3d20  clientOrderId = 
+00031c80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00031c90: 286f 7264 6572 2c20 2763 6c69 656e 744f  (order, 'clientO
+00031ca0: 7264 6572 4964 2729 0a20 2020 2020 2020  rderId').       
+00031cb0: 2074 696d 6549 6e46 6f72 6365 203d 2073   timeInForce = s
+00031cc0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00031cd0: 6f72 6465 722c 2027 7469 6d65 496e 466f  order, 'timeInFo
+00031ce0: 7263 6527 290a 2020 2020 2020 2020 6966  rce').        if
+00031cf0: 2074 696d 6549 6e46 6f72 6365 203d 3d20   timeInForce == 
+00031d00: 2747 5458 273a 0a20 2020 2020 2020 2020  'GTX':.         
+00031d10: 2020 2023 2047 5458 206d 6561 6e73 2022     # GTX means "
+00031d20: 476f 6f64 2054 696c 6c20 4372 6f73 7369  Good Till Crossi
+00031d30: 6e67 2220 616e 6420 6973 2061 6e20 6571  ng" and is an eq
+00031d40: 7569 7661 6c65 6e74 2077 6179 206f 6620  uivalent way of 
+00031d50: 7361 7969 6e67 2050 6f73 7420 4f6e 6c79  saying Post Only
+00031d60: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
+00031d70: 6549 6e46 6f72 6365 203d 2027 504f 270a  eInForce = 'PO'.
+00031d80: 2020 2020 2020 2020 706f 7374 4f6e 6c79          postOnly
+00031d90: 203d 2028 7479 7065 203d 3d20 276c 696d   = (type == 'lim
+00031da0: 6974 5f6d 616b 6572 2729 206f 7220 2874  it_maker') or (t
+00031db0: 696d 6549 6e46 6f72 6365 203d 3d20 2750  imeInForce == 'P
+00031dc0: 4f27 290a 2020 2020 2020 2020 6966 2074  O').        if t
+00031dd0: 7970 6520 3d3d 2027 6c69 6d69 745f 6d61  ype == 'limit_ma
+00031de0: 6b65 7227 3a0a 2020 2020 2020 2020 2020  ker':.          
+00031df0: 2020 7479 7065 203d 2027 6c69 6d69 7427    type = 'limit'
+00031e00: 0a20 2020 2020 2020 2073 746f 7050 7269  .        stopPri
+00031e10: 6365 5374 7269 6e67 203d 2073 656c 662e  ceString = self.
+00031e20: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
+00031e30: 722c 2027 7374 6f70 5072 6963 6527 290a  r, 'stopPrice').
+00031e40: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+00031e50: 6520 3d20 7365 6c66 2e70 6172 7365 5f6e  e = self.parse_n
+00031e60: 756d 6265 7228 7365 6c66 2e6f 6d69 745f  umber(self.omit_
+00031e70: 7a65 726f 2873 746f 7050 7269 6365 5374  zero(stopPriceSt
+00031e80: 7269 6e67 2929 0a20 2020 2020 2020 2072  ring)).        r
+00031e90: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
+00031ea0: 6f72 6465 7228 7b0a 2020 2020 2020 2020  order({.        
+00031eb0: 2020 2020 2769 6e66 6f27 3a20 6f72 6465      'info': orde
+00031ec0: 722c 0a20 2020 2020 2020 2020 2020 2027  r,.            '
+00031ed0: 6964 273a 2069 642c 0a20 2020 2020 2020  id': id,.       
+00031ee0: 2020 2020 2027 636c 6965 6e74 4f72 6465       'clientOrde
+00031ef0: 7249 6427 3a20 636c 6965 6e74 4f72 6465  rId': clientOrde
+00031f00: 7249 642c 0a20 2020 2020 2020 2020 2020  rId,.           
+00031f10: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
+00031f20: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
+00031f30: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
+00031f40: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
+00031f50: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
+00031f60: 2020 2020 2020 276c 6173 7454 7261 6465        'lastTrade
+00031f70: 5469 6d65 7374 616d 7027 3a20 6c61 7374  Timestamp': last
+00031f80: 5472 6164 6554 696d 6573 7461 6d70 2c0a  TradeTimestamp,.
+00031f90: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
+00031fa0: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
+00031fb0: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
+00031fc0: 3a20 7479 7065 2c0a 2020 2020 2020 2020  : type,.        
+00031fd0: 2020 2020 2774 696d 6549 6e46 6f72 6365      'timeInForce
+00031fe0: 273a 2074 696d 6549 6e46 6f72 6365 2c0a  ': timeInForce,.
+00031ff0: 2020 2020 2020 2020 2020 2020 2770 6f73              'pos
+00032000: 744f 6e6c 7927 3a20 706f 7374 4f6e 6c79  tOnly': postOnly
+00032010: 2c0a 2020 2020 2020 2020 2020 2020 2772  ,.            'r
+00032020: 6564 7563 654f 6e6c 7927 3a20 7365 6c66  educeOnly': self
+00032030: 2e73 6166 655f 7661 6c75 6528 6f72 6465  .safe_value(orde
+00032040: 722c 2027 7265 6475 6365 4f6e 6c79 2729  r, 'reduceOnly')
+00032050: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
+00032060: 6964 6527 3a20 7369 6465 2c0a 2020 2020  ide': side,.    
+00032070: 2020 2020 2020 2020 2770 7269 6365 273a          'price':
+00032080: 2070 7269 6365 2c0a 2020 2020 2020 2020   price,.        
+00032090: 2020 2020 2774 7269 6767 6572 5072 6963      'triggerPric
+000320a0: 6527 3a20 7374 6f70 5072 6963 652c 0a20  e': stopPrice,. 
+000320b0: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
+000320c0: 6e74 273a 2061 6d6f 756e 742c 0a20 2020  nt': amount,.   
+000320d0: 2020 2020 2020 2020 2027 636f 7374 273a           'cost':
+000320e0: 2063 6f73 742c 0a20 2020 2020 2020 2020   cost,.         
+000320f0: 2020 2027 6176 6572 6167 6527 3a20 6176     'average': av
+00032100: 6572 6167 652c 0a20 2020 2020 2020 2020  erage,.         
+00032110: 2020 2027 6669 6c6c 6564 273a 2066 696c     'filled': fil
+00032120: 6c65 642c 0a20 2020 2020 2020 2020 2020  led,.           
+00032130: 2027 7265 6d61 696e 696e 6727 3a20 4e6f   'remaining': No
+00032140: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00032150: 2773 7461 7475 7327 3a20 7374 6174 7573  'status': status
+00032160: 2c0a 2020 2020 2020 2020 2020 2020 2766  ,.            'f
+00032170: 6565 273a 207b 0a20 2020 2020 2020 2020  ee': {.         
+00032180: 2020 2020 2020 2027 6375 7272 656e 6379         'currency
+00032190: 273a 2073 656c 662e 7361 6665 5f73 7472  ': self.safe_str
+000321a0: 696e 6728 6f72 6465 722c 2027 7175 6f74  ing(order, 'quot
+000321b0: 6541 7373 6574 2729 2c0a 2020 2020 2020  eAsset'),.      
+000321c0: 2020 2020 2020 2020 2020 2763 6f73 7427            'cost'
+000321d0: 3a20 7365 6c66 2e73 6166 655f 6e75 6d62  : self.safe_numb
+000321e0: 6572 286f 7264 6572 2c20 2766 6565 2729  er(order, 'fee')
+000321f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00032200: 2020 2772 6174 6527 3a20 4e6f 6e65 2c0a    'rate': None,.
+00032210: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00032220: 2020 2020 2020 2020 2020 2027 7472 6164             'trad
+00032230: 6573 273a 2066 696c 6c73 2c0a 2020 2020  es': fills,.    
+00032240: 2020 2020 7d2c 206d 6172 6b65 7429 0a0a      }, market)..
+00032250: 2020 2020 6173 796e 6320 6465 6620 6372      async def cr
+00032260: 6561 7465 5f6f 7264 6572 2873 656c 662c  eate_order(self,
+00032270: 2073 796d 626f 6c3a 2073 7472 2c20 7479   symbol: str, ty
+00032280: 7065 2c20 7369 6465 3a20 4f72 6465 7253  pe, side: OrderS
+00032290: 6964 652c 2061 6d6f 756e 742c 2070 7269  ide, amount, pri
+000322a0: 6365 3d4e 6f6e 652c 2070 6172 616d 733d  ce=None, params=
+000322b0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+000322c0: 0a20 2020 2020 2020 2063 7265 6174 6520  .        create 
+000322d0: 6120 7472 6164 6520 6f72 6465 720a 2020  a trade order.  
+000322e0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000322f0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+00032300: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+00032310: 6172 6b65 7420 746f 2063 7265 6174 6520  arket to create 
+00032320: 616e 206f 7264 6572 2069 6e0a 2020 2020  an order in.    
+00032330: 2020 2020 3a70 6172 616d 2073 7472 2074      :param str t
+00032340: 7970 653a 2027 6d61 726b 6574 2720 6f72  ype: 'market' or
+00032350: 2027 6c69 6d69 7427 0a20 2020 2020 2020   'limit'.       
+00032360: 203a 7061 7261 6d20 7374 7220 7369 6465   :param str side
+00032370: 3a20 2762 7579 2720 6f72 2027 7365 6c6c  : 'buy' or 'sell
+00032380: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
+00032390: 2066 6c6f 6174 2061 6d6f 756e 743a 2068   float amount: h
+000323a0: 6f77 206d 7563 6820 6f66 2063 7572 7265  ow much of curre
+000323b0: 6e63 7920 796f 7520 7761 6e74 2074 6f20  ncy you want to 
+000323c0: 7472 6164 6520 696e 2075 6e69 7473 206f  trade in units o
+000323d0: 6620 6261 7365 2063 7572 7265 6e63 790a  f base currency.
+000323e0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+000323f0: 6c6f 6174 7c4e 6f6e 6520 7072 6963 653a  loat|None price:
+00032400: 2074 6865 2070 7269 6365 2061 7420 7768   the price at wh
+00032410: 6963 6820 7468 6520 6f72 6465 7220 6973  ich the order is
+00032420: 2074 6f20 6265 2066 756c 6c66 696c 6c65   to be fullfille
+00032430: 642c 2069 6e20 756e 6974 7320 6f66 2074  d, in units of t
+00032440: 6865 2071 756f 7465 2063 7572 7265 6e63  he quote currenc
+00032450: 792c 2069 676e 6f72 6564 2069 6e20 6d61  y, ignored in ma
+00032460: 726b 6574 206f 7264 6572 730a 2020 2020  rket orders.    
+00032470: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00032480: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+00032490: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+000324a0: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
+000324b0: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+000324c0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000324d0: 7c4e 6f6e 6520 7061 7261 6d73 5b27 6d61  |None params['ma
+000324e0: 7267 696e 4d6f 6465 275d 3a20 2763 726f  rginMode']: 'cro
+000324f0: 7373 2720 6f72 2027 6973 6f6c 6174 6564  ss' or 'isolated
+00032500: 272c 2066 6f72 2073 706f 7420 6d61 7267  ', for spot marg
+00032510: 696e 2074 7261 6469 6e67 0a20 2020 2020  in trading.     
+00032520: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+00032530: 3a20 616e 2060 6f72 6465 7220 7374 7275  : an `order stru
+00032540: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+00032550: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+00032560: 6964 3d6f 7264 6572 2d73 7472 7563 7475  id=order-structu
+00032570: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+00032580: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+00032590: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+000325a0: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+000325b0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+000325c0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+000325d0: 6d61 726b 6574 5479 7065 203d 2073 656c  marketType = sel
+000325e0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+000325f0: 7261 6d73 2c20 2774 7970 6527 2c20 6d61  rams, 'type', ma
+00032600: 726b 6574 5b27 7479 7065 275d 290a 2020  rket['type']).  
+00032610: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
+00032620: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
+00032630: 7374 7269 6e67 5f32 2870 6172 616d 732c  string_2(params,
+00032640: 2027 6e65 7743 6c69 656e 744f 7264 6572   'newClientOrder
+00032650: 4964 272c 2027 636c 6965 6e74 4f72 6465  Id', 'clientOrde
+00032660: 7249 6427 290a 2020 2020 2020 2020 696e  rId').        in
+00032670: 6974 6961 6c55 7070 6572 6361 7365 5479  itialUppercaseTy
+00032680: 7065 203d 2074 7970 652e 7570 7065 7228  pe = type.upper(
+00032690: 290a 2020 2020 2020 2020 6973 4d61 726b  ).        isMark
+000326a0: 6574 4f72 6465 7220 3d20 696e 6974 6961  etOrder = initia
+000326b0: 6c55 7070 6572 6361 7365 5479 7065 203d  lUppercaseType =
+000326c0: 3d20 274d 4152 4b45 5427 0a20 2020 2020  = 'MARKET'.     
+000326d0: 2020 2069 734c 696d 6974 4f72 6465 7220     isLimitOrder 
+000326e0: 3d20 696e 6974 6961 6c55 7070 6572 6361  = initialUpperca
+000326f0: 7365 5479 7065 203d 3d20 274c 494d 4954  seType == 'LIMIT
+00032700: 270a 2020 2020 2020 2020 706f 7374 4f6e  '.        postOn
+00032710: 6c79 203d 2073 656c 662e 6973 5f70 6f73  ly = self.is_pos
+00032720: 745f 6f6e 6c79 2869 734d 6172 6b65 744f  t_only(isMarketO
+00032730: 7264 6572 2c20 696e 6974 6961 6c55 7070  rder, initialUpp
+00032740: 6572 6361 7365 5479 7065 203d 3d20 274c  ercaseType == 'L
+00032750: 494d 4954 5f4d 414b 4552 272c 2070 6172  IMIT_MAKER', par
+00032760: 616d 7329 0a20 2020 2020 2020 2074 7269  ams).        tri
+00032770: 6767 6572 5072 6963 6520 3d20 7365 6c66  ggerPrice = self
+00032780: 2e73 6166 655f 7661 6c75 655f 3228 7061  .safe_value_2(pa
+00032790: 7261 6d73 2c20 2774 7269 6767 6572 5072  rams, 'triggerPr
+000327a0: 6963 6527 2c20 2773 746f 7050 7269 6365  ice', 'stopPrice
+000327b0: 2729 0a20 2020 2020 2020 2073 746f 704c  ').        stopL
+000327c0: 6f73 7350 7269 6365 203d 2073 656c 662e  ossPrice = self.
+000327d0: 7361 6665 5f76 616c 7565 2870 6172 616d  safe_value(param
+000327e0: 732c 2027 7374 6f70 4c6f 7373 5072 6963  s, 'stopLossPric
+000327f0: 6527 2c20 7472 6967 6765 7250 7269 6365  e', triggerPrice
+00032800: 2920 2023 2066 616c 6c62 6163 6b20 746f  )  # fallback to
+00032810: 2073 746f 704c 6f73 730a 2020 2020 2020   stopLoss.      
+00032820: 2020 7461 6b65 5072 6f66 6974 5072 6963    takeProfitPric
+00032830: 6520 3d20 7365 6c66 2e73 6166 655f 7661  e = self.safe_va
+00032840: 6c75 6528 7061 7261 6d73 2c20 2774 616b  lue(params, 'tak
+00032850: 6550 726f 6669 7450 7269 6365 2729 0a20  eProfitPrice'). 
+00032860: 2020 2020 2020 2069 7353 746f 704c 6f73         isStopLos
+00032870: 7320 3d20 7374 6f70 4c6f 7373 5072 6963  s = stopLossPric
+00032880: 6520 6973 206e 6f74 204e 6f6e 650a 2020  e is not None.  
+00032890: 2020 2020 2020 6973 5461 6b65 5072 6f66        isTakeProf
+000328a0: 6974 203d 2074 616b 6550 726f 6669 7450  it = takeProfitP
+000328b0: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
+000328c0: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+000328d0: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+000328e0: 6d73 2c20 5b27 7479 7065 272c 2027 6e65  ms, ['type', 'ne
+000328f0: 7743 6c69 656e 744f 7264 6572 4964 272c  wClientOrderId',
+00032900: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+00032910: 2c20 2770 6f73 744f 6e6c 7927 2c20 2773  , 'postOnly', 's
+00032920: 746f 704c 6f73 7350 7269 6365 272c 2027  topLossPrice', '
+00032930: 7461 6b65 5072 6f66 6974 5072 6963 6527  takeProfitPrice'
+00032940: 2c20 2773 746f 7050 7269 6365 272c 2027  , 'stopPrice', '
+00032950: 7472 6967 6765 7250 7269 6365 275d 290a  triggerPrice']).
+00032960: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
+00032970: 6465 2c20 7175 6572 7920 3d20 7365 6c66  de, query = self
+00032980: 2e68 616e 646c 655f 6d61 7267 696e 5f6d  .handle_margin_m
+00032990: 6f64 655f 616e 645f 7061 7261 6d73 2827  ode_and_params('
+000329a0: 6372 6561 7465 4f72 6465 7227 2c20 7061  createOrder', pa
+000329b0: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
+000329c0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+000329d0: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+000329e0: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
+000329f0: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
+00032a00: 3a20 7369 6465 2e75 7070 6572 2829 2c0a  : side.upper(),.
+00032a10: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00032a20: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+00032a30: 6174 6550 6f73 744f 7264 6572 270a 2020  atePostOrder'.  
+00032a40: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+00032a50: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+00032a60: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00032a70: 2766 6170 6950 7269 7661 7465 506f 7374  'fapiPrivatePost
+00032a80: 4f72 6465 7227 0a20 2020 2020 2020 2065  Order'.        e
+00032a90: 6c69 6620 6d61 726b 6574 5b27 696e 7665  lif market['inve
+00032aa0: 7273 6527 5d3a 0a20 2020 2020 2020 2020  rse']:.         
+00032ab0: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
+00032ac0: 6950 7269 7661 7465 506f 7374 4f72 6465  iPrivatePostOrde
+00032ad0: 7227 0a20 2020 2020 2020 2065 6c69 6620  r'.        elif 
+00032ae0: 6d61 726b 6574 5479 7065 203d 3d20 276d  marketType == 'm
+00032af0: 6172 6769 6e27 206f 7220 6d61 7267 696e  argin' or margin
+00032b00: 4d6f 6465 2069 7320 6e6f 7420 4e6f 6e65  Mode is not None
+00032b10: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+00032b20: 7468 6f64 203d 2027 7361 7069 506f 7374  thod = 'sapiPost
+00032b30: 4d61 7267 696e 4f72 6465 7227 0a20 2020  MarginOrder'.   
+00032b40: 2020 2020 2020 2020 2072 6564 7563 654f           reduceO
+00032b50: 6e6c 7920 3d20 7365 6c66 2e73 6166 655f  nly = self.safe_
+00032b60: 7661 6c75 6528 7061 7261 6d73 2c20 2772  value(params, 'r
+00032b70: 6564 7563 654f 6e6c 7927 290a 2020 2020  educeOnly').    
+00032b80: 2020 2020 2020 2020 6966 2072 6564 7563          if reduc
+00032b90: 654f 6e6c 793a 0a20 2020 2020 2020 2020  eOnly:.         
+00032ba0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00032bb0: 7369 6465 4566 6665 6374 5479 7065 275d  sideEffectType']
+00032bc0: 203d 2027 4155 544f 5f52 4550 4159 270a   = 'AUTO_REPAY'.
+00032bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032be0: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+00032bf0: 6974 2870 6172 616d 732c 2027 7265 6475  it(params, 'redu
+00032c00: 6365 4f6e 6c79 2729 0a20 2020 2020 2020  ceOnly').       
+00032c10: 2069 6620 6d61 726b 6574 5b27 7370 6f74   if market['spot
+00032c20: 275d 206f 7220 6d61 726b 6574 5479 7065  '] or marketType
+00032c30: 203d 3d20 276d 6172 6769 6e27 3a0a 2020   == 'margin':.  
+00032c40: 2020 2020 2020 2020 2020 2320 7375 7070            # supp
+00032c50: 6f72 7420 666f 7220 7465 7374 696e 6720  ort for testing 
+00032c60: 6f72 6465 7273 0a20 2020 2020 2020 2020  orders.         
+00032c70: 2020 2074 6573 7420 3d20 7365 6c66 2e73     test = self.s
+00032c80: 6166 655f 7661 6c75 6528 7175 6572 792c  afe_value(query,
+00032c90: 2027 7465 7374 272c 2046 616c 7365 290a   'test', False).
+00032ca0: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+00032cb0: 6573 743a 0a20 2020 2020 2020 2020 2020  est:.           
+00032cc0: 2020 2020 206d 6574 686f 6420 2b3d 2027       method += '
+00032cd0: 5465 7374 270a 2020 2020 2020 2020 2020  Test'.          
+00032ce0: 2020 2320 6f6e 6c79 2073 7570 706f 7274    # only support
+00032cf0: 6564 2066 6f72 2073 706f 742f 6d61 7267  ed for spot/marg
+00032d00: 696e 2061 7069 2861 6c6c 206d 6172 6769  in api(all margi
+00032d10: 6e20 6d61 726b 6574 7320 6172 6520 7370  n markets are sp
+00032d20: 6f74 206d 6172 6b65 7473 290a 2020 2020  ot markets).    
+00032d30: 2020 2020 2020 2020 6966 2070 6f73 744f          if postO
+00032d40: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
+00032d50: 2020 2020 2074 7970 6520 3d20 274c 494d       type = 'LIM
+00032d60: 4954 5f4d 414b 4552 270a 2020 2020 2020  IT_MAKER'.      
+00032d70: 2020 7570 7065 7263 6173 6554 7970 6520    uppercaseType 
+00032d80: 3d20 7479 7065 2e75 7070 6572 2829 0a20  = type.upper(). 
+00032d90: 2020 2020 2020 2073 746f 7050 7269 6365         stopPrice
+00032da0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00032db0: 6966 2069 7353 746f 704c 6f73 733a 0a20  if isStopLoss:. 
+00032dc0: 2020 2020 2020 2020 2020 2073 746f 7050             stopP
+00032dd0: 7269 6365 203d 2073 746f 704c 6f73 7350  rice = stopLossP
+00032de0: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
+00032df0: 2069 6620 6973 4d61 726b 6574 4f72 6465   if isMarketOrde
+00032e00: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+00032e10: 2020 2023 2073 706f 7420 5354 4f50 5f4c     # spot STOP_L
+00032e20: 4f53 5320 6d61 726b 6574 206f 7264 6572  OSS market order
+00032e30: 7320 6172 6520 6e6f 7420 6120 7661 6c69  s are not a vali
+00032e40: 6420 6f72 6465 7220 7479 7065 0a20 2020  d order type.   
+00032e50: 2020 2020 2020 2020 2020 2020 2075 7070               upp
+00032e60: 6572 6361 7365 5479 7065 203d 2027 5354  ercaseType = 'ST
+00032e70: 4f50 5f4d 4152 4b45 5427 2069 6620 6d61  OP_MARKET' if ma
+00032e80: 726b 6574 5b27 636f 6e74 7261 6374 275d  rket['contract']
+00032e90: 2065 6c73 6520 2753 544f 505f 4c4f 5353   else 'STOP_LOSS
+00032ea0: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
+00032eb0: 6966 2069 734c 696d 6974 4f72 6465 723a  if isLimitOrder:
+00032ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032ed0: 2075 7070 6572 6361 7365 5479 7065 203d   uppercaseType =
+00032ee0: 2027 5354 4f50 2720 6966 206d 6172 6b65   'STOP' if marke
+00032ef0: 745b 2763 6f6e 7472 6163 7427 5d20 656c  t['contract'] el
+00032f00: 7365 2027 5354 4f50 5f4c 4f53 535f 4c49  se 'STOP_LOSS_LI
+00032f10: 4d49 5427 0a20 2020 2020 2020 2065 6c69  MIT'.        eli
+00032f20: 6620 6973 5461 6b65 5072 6f66 6974 3a0a  f isTakeProfit:.
+00032f30: 2020 2020 2020 2020 2020 2020 7374 6f70              stop
+00032f40: 5072 6963 6520 3d20 7461 6b65 5072 6f66  Price = takeProf
+00032f50: 6974 5072 6963 650a 2020 2020 2020 2020  itPrice.        
+00032f60: 2020 2020 6966 2069 734d 6172 6b65 744f      if isMarketO
+00032f70: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
+00032f80: 2020 2020 2020 2320 7370 6f74 2054 414b        # spot TAK
+00032f90: 455f 5052 4f46 4954 206d 6172 6b65 7420  E_PROFIT market 
+00032fa0: 6f72 6465 7273 2061 7265 206e 6f74 2061  orders are not a
+00032fb0: 2076 616c 6964 206f 7264 6572 2074 7970   valid order typ
+00032fc0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00032fd0: 2020 7570 7065 7263 6173 6554 7970 6520    uppercaseType 
+00032fe0: 3d20 2754 414b 455f 5052 4f46 4954 5f4d  = 'TAKE_PROFIT_M
+00032ff0: 4152 4b45 5427 2069 6620 6d61 726b 6574  ARKET' if market
+00033000: 5b27 636f 6e74 7261 6374 275d 2065 6c73  ['contract'] els
+00033010: 6520 2754 414b 455f 5052 4f46 4954 270a  e 'TAKE_PROFIT'.
+00033020: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00033030: 2069 734c 696d 6974 4f72 6465 723a 0a20   isLimitOrder:. 
+00033040: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+00033050: 7070 6572 6361 7365 5479 7065 203d 2027  ppercaseType = '
+00033060: 5441 4b45 5f50 524f 4649 5427 2069 6620  TAKE_PROFIT' if 
+00033070: 6d61 726b 6574 5b27 636f 6e74 7261 6374  market['contract
+00033080: 275d 2065 6c73 6520 2754 414b 455f 5052  '] else 'TAKE_PR
+00033090: 4f46 4954 5f4c 494d 4954 270a 2020 2020  OFIT_LIMIT'.    
+000330a0: 2020 2020 6966 206d 6172 6769 6e4d 6f64      if marginMod
+000330b0: 6520 3d3d 2027 6973 6f6c 6174 6564 273a  e == 'isolated':
+000330c0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+000330d0: 7565 7374 5b27 6973 4973 6f6c 6174 6564  uest['isIsolated
+000330e0: 275d 203d 2054 7275 650a 2020 2020 2020  '] = True.      
+000330f0: 2020 6966 2063 6c69 656e 744f 7264 6572    if clientOrder
+00033100: 4964 2069 7320 4e6f 6e65 3a0a 2020 2020  Id is None:.    
+00033110: 2020 2020 2020 2020 6272 6f6b 6572 203d          broker =
+00033120: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00033130: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
+00033140: 6272 6f6b 6572 2729 0a20 2020 2020 2020  broker').       
+00033150: 2020 2020 2069 6620 6272 6f6b 6572 2069       if broker i
+00033160: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00033170: 2020 2020 2020 2020 2020 2020 6272 6f6b              brok
+00033180: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
+00033190: 5f73 7472 696e 6728 6272 6f6b 6572 2c20  _string(broker, 
+000331a0: 6d61 726b 6574 5479 7065 290a 2020 2020  marketType).    
+000331b0: 2020 2020 2020 2020 2020 2020 6966 2062              if b
+000331c0: 726f 6b65 7249 6420 6973 206e 6f74 204e  rokerId is not N
+000331d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000331e0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+000331f0: 5b27 6e65 7743 6c69 656e 744f 7264 6572  ['newClientOrder
+00033200: 4964 275d 203d 2062 726f 6b65 7249 6420  Id'] = brokerId 
+00033210: 2b20 7365 6c66 2e75 7569 6432 3228 290a  + self.uuid22().
+00033220: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00033230: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00033240: 745b 276e 6577 436c 6965 6e74 4f72 6465  t['newClientOrde
+00033250: 7249 6427 5d20 3d20 636c 6965 6e74 4f72  rId'] = clientOr
+00033260: 6465 7249 640a 2020 2020 2020 2020 6966  derId.        if
+00033270: 2028 6d61 726b 6574 5479 7065 203d 3d20   (marketType == 
+00033280: 2773 706f 7427 2920 6f72 2028 6d61 726b  'spot') or (mark
+00033290: 6574 5479 7065 203d 3d20 276d 6172 6769  etType == 'margi
+000332a0: 6e27 293a 0a20 2020 2020 2020 2020 2020  n'):.           
+000332b0: 2072 6571 7565 7374 5b27 6e65 774f 7264   request['newOrd
+000332c0: 6572 5265 7370 5479 7065 275d 203d 2073  erRespType'] = s
+000332d0: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
+000332e0: 656c 662e 6f70 7469 6f6e 735b 276e 6577  elf.options['new
+000332f0: 4f72 6465 7252 6573 7054 7970 6527 5d2c  OrderRespType'],
+00033300: 2074 7970 652c 2027 5245 5355 4c54 2729   type, 'RESULT')
+00033310: 2020 2320 2741 434b 2720 666f 7220 6f72    # 'ACK' for or
+00033320: 6465 7220 6964 2c20 2752 4553 554c 5427  der id, 'RESULT'
+00033330: 2066 6f72 2066 756c 6c20 6f72 6465 7220   for full order 
+00033340: 6f72 2027 4655 4c4c 2720 666f 7220 6f72  or 'FULL' for or
+00033350: 6465 7220 7769 7468 2066 696c 6c73 0a20  der with fills. 
+00033360: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00033370: 2020 2020 2020 2020 2023 2073 7761 702c           # swap,
+00033380: 2066 7574 7572 6573 2061 6e64 206f 7074   futures and opt
+00033390: 696f 6e73 0a20 2020 2020 2020 2020 2020  ions.           
+000333a0: 2072 6571 7565 7374 5b27 6e65 774f 7264   request['newOrd
+000333b0: 6572 5265 7370 5479 7065 275d 203d 2027  erRespType'] = '
+000333c0: 5245 5355 4c54 2720 2023 2022 4143 4b22  RESULT'  # "ACK"
+000333d0: 2c20 2252 4553 554c 5422 2c20 6465 6661  , "RESULT", defa
+000333e0: 756c 7420 2241 434b 220a 2020 2020 2020  ult "ACK".      
+000333f0: 2020 6966 206d 6172 6b65 745b 276f 7074    if market['opt
+00033400: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
+00033410: 2020 2069 6620 7479 7065 203d 3d20 276d     if type == 'm
+00033420: 6172 6b65 7427 3a0a 2020 2020 2020 2020  arket':.        
+00033430: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+00033440: 7661 6c69 644f 7264 6572 2873 656c 662e  validOrder(self.
+00033450: 6964 202b 2027 2027 202b 2074 7970 6520  id + ' ' + type 
+00033460: 2b20 2720 6973 206e 6f74 2061 2076 616c  + ' is not a val
+00033470: 6964 206f 7264 6572 2074 7970 6520 666f  id order type fo
+00033480: 7220 7468 6520 2720 2b20 7379 6d62 6f6c  r the ' + symbol
+00033490: 202b 2027 206d 6172 6b65 7427 290a 2020   + ' market').  
+000334a0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+000334b0: 203d 2027 6561 7069 5072 6976 6174 6550   = 'eapiPrivateP
+000334c0: 6f73 744f 7264 6572 270a 2020 2020 2020  ostOrder'.      
+000334d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000334e0: 2020 2020 7661 6c69 644f 7264 6572 5479      validOrderTy
+000334f0: 7065 7320 3d20 7365 6c66 2e73 6166 655f  pes = self.safe_
+00033500: 7661 6c75 6528 6d61 726b 6574 5b27 696e  value(market['in
+00033510: 666f 275d 2c20 276f 7264 6572 5479 7065  fo'], 'orderType
+00033520: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
+00033530: 6966 206e 6f74 2073 656c 662e 696e 5f61  if not self.in_a
+00033540: 7272 6179 2875 7070 6572 6361 7365 5479  rray(uppercaseTy
+00033550: 7065 2c20 7661 6c69 644f 7264 6572 5479  pe, validOrderTy
+00033560: 7065 7329 3a0a 2020 2020 2020 2020 2020  pes):.          
+00033570: 2020 2020 2020 6966 2069 6e69 7469 616c        if initial
+00033580: 5570 7065 7263 6173 6554 7970 6520 213d  UppercaseType !=
+00033590: 2075 7070 6572 6361 7365 5479 7065 3a0a   uppercaseType:.
+000335a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000335b0: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
+000335c0: 644f 7264 6572 2873 656c 662e 6964 202b  dOrder(self.id +
+000335d0: 2027 2073 746f 7050 7269 6365 2070 6172   ' stopPrice par
+000335e0: 616d 6574 6572 2069 7320 6e6f 7420 616c  ameter is not al
+000335f0: 6c6f 7765 6420 666f 7220 2720 2b20 7379  lowed for ' + sy
+00033600: 6d62 6f6c 202b 2027 2027 202b 2074 7970  mbol + ' ' + typ
+00033610: 6520 2b20 2720 6f72 6465 7273 2729 0a20  e + ' orders'). 
+00033620: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00033630: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00033640: 2020 2020 2020 2020 2072 6169 7365 2049           raise I
+00033650: 6e76 616c 6964 4f72 6465 7228 7365 6c66  nvalidOrder(self
+00033660: 2e69 6420 2b20 2720 2720 2b20 7479 7065  .id + ' ' + type
+00033670: 202b 2027 2069 7320 6e6f 7420 6120 7661   + ' is not a va
+00033680: 6c69 6420 6f72 6465 7220 7479 7065 2066  lid order type f
+00033690: 6f72 2074 6865 2027 202b 2073 796d 626f  or the ' + symbo
+000336a0: 6c20 2b20 2720 6d61 726b 6574 2729 0a20  l + ' market'). 
+000336b0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+000336c0: 7479 7065 275d 203d 2075 7070 6572 6361  type'] = upperca
+000336d0: 7365 5479 7065 0a20 2020 2020 2020 2023  seType.        #
+000336e0: 2061 6464 6974 696f 6e61 6c20 7265 7175   additional requ
+000336f0: 6972 6564 2066 6965 6c64 7320 6465 7065  ired fields depe
+00033700: 6e64 696e 6720 6f6e 2074 6865 206f 7264  nding on the ord
+00033710: 6572 2074 7970 650a 2020 2020 2020 2020  er type.        
+00033720: 7469 6d65 496e 466f 7263 6549 7352 6571  timeInForceIsReq
+00033730: 7569 7265 6420 3d20 4661 6c73 650a 2020  uired = False.  
+00033740: 2020 2020 2020 7072 6963 6549 7352 6571        priceIsReq
+00033750: 7569 7265 6420 3d20 4661 6c73 650a 2020  uired = False.  
+00033760: 2020 2020 2020 7374 6f70 5072 6963 6549        stopPriceI
+00033770: 7352 6571 7569 7265 6420 3d20 4661 6c73  sRequired = Fals
+00033780: 650a 2020 2020 2020 2020 7175 616e 7469  e.        quanti
+00033790: 7479 4973 5265 7175 6972 6564 203d 2046  tyIsRequired = F
+000337a0: 616c 7365 0a20 2020 2020 2020 2023 0a20  alse.        #. 
+000337b0: 2020 2020 2020 2023 2073 706f 742f 6d61         # spot/ma
+000337c0: 7267 696e 0a20 2020 2020 2020 2023 0a20  rgin.        #. 
+000337d0: 2020 2020 2020 2023 2020 2020 204c 494d         #     LIM
+000337e0: 4954 2020 2020 2020 2020 2020 2020 2020  IT              
+000337f0: 2020 7469 6d65 496e 466f 7263 652c 2071    timeInForce, q
+00033800: 7561 6e74 6974 792c 2070 7269 6365 0a20  uantity, price. 
+00033810: 2020 2020 2020 2023 2020 2020 204d 4152         #     MAR
+00033820: 4b45 5420 2020 2020 2020 2020 2020 2020  KET             
+00033830: 2020 7175 616e 7469 7479 206f 7220 7175    quantity or qu
+00033840: 6f74 654f 7264 6572 5174 790a 2020 2020  oteOrderQty.    
+00033850: 2020 2020 2320 2020 2020 5354 4f50 5f4c      #     STOP_L
+00033860: 4f53 5320 2020 2020 2020 2020 2020 2071  OSS            q
+00033870: 7561 6e74 6974 792c 2073 746f 7050 7269  uantity, stopPri
+00033880: 6365 0a20 2020 2020 2020 2023 2020 2020  ce.        #    
+00033890: 2053 544f 505f 4c4f 5353 5f4c 494d 4954   STOP_LOSS_LIMIT
+000338a0: 2020 2020 2020 7469 6d65 496e 466f 7263        timeInForc
+000338b0: 652c 2071 7561 6e74 6974 792c 2070 7269  e, quantity, pri
+000338c0: 6365 2c20 7374 6f70 5072 6963 650a 2020  ce, stopPrice.  
+000338d0: 2020 2020 2020 2320 2020 2020 5441 4b45        #     TAKE
+000338e0: 5f50 524f 4649 5420 2020 2020 2020 2020  _PROFIT         
+000338f0: 2071 7561 6e74 6974 792c 2073 746f 7050   quantity, stopP
+00033900: 7269 6365 0a20 2020 2020 2020 2023 2020  rice.        #  
+00033910: 2020 2054 414b 455f 5052 4f46 4954 5f4c     TAKE_PROFIT_L
+00033920: 494d 4954 2020 2020 7469 6d65 496e 466f  IMIT    timeInFo
+00033930: 7263 652c 2071 7561 6e74 6974 792c 2070  rce, quantity, p
+00033940: 7269 6365 2c20 7374 6f70 5072 6963 650a  rice, stopPrice.
+00033950: 2020 2020 2020 2020 2320 2020 2020 4c49          #     LI
+00033960: 4d49 545f 4d41 4b45 5220 2020 2020 2020  MIT_MAKER       
+00033970: 2020 2071 7561 6e74 6974 792c 2070 7269     quantity, pri
+00033980: 6365 0a20 2020 2020 2020 2023 0a20 2020  ce.        #.   
+00033990: 2020 2020 2023 2066 7574 7572 6573 0a20       # futures. 
+000339a0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000339b0: 2023 2020 2020 204c 494d 4954 2020 2020   #     LIMIT    
+000339c0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+000339d0: 496e 466f 7263 652c 2071 7561 6e74 6974  InForce, quantit
+000339e0: 792c 2070 7269 6365 0a20 2020 2020 2020  y, price.       
+000339f0: 2023 2020 2020 204d 4152 4b45 5420 2020   #     MARKET   
+00033a00: 2020 2020 2020 2020 2020 2020 7175 616e              quan
+00033a10: 7469 7479 0a20 2020 2020 2020 2023 2020  tity.        #  
+00033a20: 2020 2053 544f 502f 5441 4b45 5f50 524f     STOP/TAKE_PRO
+00033a30: 4649 5420 2020 2020 7175 616e 7469 7479  FIT     quantity
+00033a40: 2c20 7072 6963 652c 2073 746f 7050 7269  , price, stopPri
+00033a50: 6365 0a20 2020 2020 2020 2023 2020 2020  ce.        #    
+00033a60: 2053 544f 505f 4d41 524b 4554 2020 2020   STOP_MARKET    
+00033a70: 2020 2020 2020 7374 6f70 5072 6963 650a        stopPrice.
+00033a80: 2020 2020 2020 2020 2320 2020 2020 5441          #     TA
+00033a90: 4b45 5f50 524f 4649 545f 4d41 524b 4554  KE_PROFIT_MARKET
+00033aa0: 2020 2073 746f 7050 7269 6365 0a20 2020     stopPrice.   
+00033ab0: 2020 2020 2023 2020 2020 2054 5241 494c       #     TRAIL
+00033ac0: 494e 475f 5354 4f50 5f4d 4152 4b45 5420  ING_STOP_MARKET 
+00033ad0: 6361 6c6c 6261 636b 5261 7465 0a20 2020  callbackRate.   
+00033ae0: 2020 2020 2023 0a20 2020 2020 2020 2069       #.        i
+00033af0: 6620 7570 7065 7263 6173 6554 7970 6520  f uppercaseType 
+00033b00: 3d3d 2027 4d41 524b 4554 273a 0a20 2020  == 'MARKET':.   
+00033b10: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
+00033b20: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
+00033b30: 2020 2020 2020 2020 2020 2020 7175 6f74              quot
+00033b40: 654f 7264 6572 5174 7920 3d20 7365 6c66  eOrderQty = self
+00033b50: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
+00033b60: 2e6f 7074 696f 6e73 2c20 2771 756f 7465  .options, 'quote
+00033b70: 4f72 6465 7251 7479 272c 2054 7275 6529  OrderQty', True)
+00033b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033b90: 2069 6620 7175 6f74 654f 7264 6572 5174   if quoteOrderQt
+00033ba0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00033bb0: 2020 2020 2020 2071 756f 7465 4f72 6465         quoteOrde
+00033bc0: 7251 7479 4e65 7720 3d20 7365 6c66 2e73  rQtyNew = self.s
+00033bd0: 6166 655f 7661 6c75 655f 3228 7175 6572  afe_value_2(quer
+00033be0: 792c 2027 7175 6f74 654f 7264 6572 5174  y, 'quoteOrderQt
+00033bf0: 7927 2c20 2763 6f73 7427 290a 2020 2020  y', 'cost').    
+00033c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033c10: 7072 6563 6973 696f 6e20 3d20 6d61 726b  precision = mark
+00033c20: 6574 5b27 7072 6563 6973 696f 6e27 5d5b  et['precision'][
+00033c30: 2770 7269 6365 275d 0a20 2020 2020 2020  'price'].       
+00033c40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00033c50: 7175 6f74 654f 7264 6572 5174 794e 6577  quoteOrderQtyNew
+00033c60: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00033c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033c80: 2020 2020 2020 7265 7175 6573 745b 2771        request['q
+00033c90: 756f 7465 4f72 6465 7251 7479 275d 203d  uoteOrderQty'] =
+00033ca0: 2073 656c 662e 6465 6369 6d61 6c5f 746f   self.decimal_to
+00033cb0: 5f70 7265 6369 7369 6f6e 2871 756f 7465  _precision(quote
+00033cc0: 4f72 6465 7251 7479 4e65 772c 2054 5255  OrderQtyNew, TRU
+00033cd0: 4e43 4154 452c 2070 7265 6369 7369 6f6e  NCATE, precision
+00033ce0: 2c20 7365 6c66 2e70 7265 6369 7369 6f6e  , self.precision
+00033cf0: 4d6f 6465 290a 2020 2020 2020 2020 2020  Mode).          
+00033d00: 2020 2020 2020 2020 2020 656c 6966 2070            elif p
+00033d10: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
+00033d20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00033d30: 2020 2020 2020 2020 2020 616d 6f75 6e74            amount
+00033d40: 5374 7269 6e67 203d 2073 656c 662e 6e75  String = self.nu
+00033d50: 6d62 6572 5f74 6f5f 7374 7269 6e67 2861  mber_to_string(a
+00033d60: 6d6f 756e 7429 0a20 2020 2020 2020 2020  mount).         
+00033d70: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00033d80: 7269 6365 5374 7269 6e67 203d 2073 656c  riceString = sel
+00033d90: 662e 6e75 6d62 6572 5f74 6f5f 7374 7269  f.number_to_stri
+00033da0: 6e67 2870 7269 6365 290a 2020 2020 2020  ng(price).      
+00033db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033dc0: 2020 7175 6f74 654f 7264 6572 5175 616e    quoteOrderQuan
+00033dd0: 7469 7479 203d 2050 7265 6369 7365 2e73  tity = Precise.s
+00033de0: 7472 696e 675f 6d75 6c28 616d 6f75 6e74  tring_mul(amount
+00033df0: 5374 7269 6e67 2c20 7072 6963 6553 7472  String, priceStr
+00033e00: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+00033e10: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00033e20: 7565 7374 5b27 7175 6f74 654f 7264 6572  uest['quoteOrder
+00033e30: 5174 7927 5d20 3d20 7365 6c66 2e64 6563  Qty'] = self.dec
+00033e40: 696d 616c 5f74 6f5f 7072 6563 6973 696f  imal_to_precisio
+00033e50: 6e28 7175 6f74 654f 7264 6572 5175 616e  n(quoteOrderQuan
+00033e60: 7469 7479 2c20 5452 554e 4341 5445 2c20  tity, TRUNCATE, 
+00033e70: 7072 6563 6973 696f 6e2c 2073 656c 662e  precision, self.
+00033e80: 7072 6563 6973 696f 6e4d 6f64 6529 0a20  precisionMode). 
+00033e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033ea0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00033eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033ec0: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
+00033ed0: 7265 6420 3d20 5472 7565 0a20 2020 2020  red = True.     
+00033ee0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00033ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033f00: 2020 2020 2071 7561 6e74 6974 7949 7352       quantityIsR
+00033f10: 6571 7569 7265 6420 3d20 5472 7565 0a20  equired = True. 
+00033f20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00033f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033f40: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
+00033f50: 7265 6420 3d20 5472 7565 0a20 2020 2020  red = True.     
+00033f60: 2020 2065 6c69 6620 7570 7065 7263 6173     elif uppercas
+00033f70: 6554 7970 6520 3d3d 2027 4c49 4d49 5427  eType == 'LIMIT'
+00033f80: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+00033f90: 6963 6549 7352 6571 7569 7265 6420 3d20  iceIsRequired = 
+00033fa0: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+00033fb0: 2074 696d 6549 6e46 6f72 6365 4973 5265   timeInForceIsRe
+00033fc0: 7175 6972 6564 203d 2054 7275 650a 2020  quired = True.  
+00033fd0: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
+00033fe0: 7479 4973 5265 7175 6972 6564 203d 2054  tyIsRequired = T
+00033ff0: 7275 650a 2020 2020 2020 2020 656c 6966  rue.        elif
+00034000: 2028 7570 7065 7263 6173 6554 7970 6520   (uppercaseType 
+00034010: 3d3d 2027 5354 4f50 5f4c 4f53 5327 2920  == 'STOP_LOSS') 
+00034020: 6f72 2028 7570 7065 7263 6173 6554 7970  or (uppercaseTyp
+00034030: 6520 3d3d 2027 5441 4b45 5f50 524f 4649  e == 'TAKE_PROFI
+00034040: 5427 293a 0a20 2020 2020 2020 2020 2020  T'):.           
+00034050: 2073 746f 7050 7269 6365 4973 5265 7175   stopPriceIsRequ
+00034060: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
+00034070: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
+00034080: 4973 5265 7175 6972 6564 203d 2054 7275  IsRequired = Tru
+00034090: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+000340a0: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
+000340b0: 5d20 6f72 206d 6172 6b65 745b 2769 6e76  ] or market['inv
+000340c0: 6572 7365 275d 3a0a 2020 2020 2020 2020  erse']:.        
+000340d0: 2020 2020 2020 2020 7072 6963 6549 7352          priceIsR
+000340e0: 6571 7569 7265 6420 3d20 5472 7565 0a20  equired = True. 
+000340f0: 2020 2020 2020 2065 6c69 6620 2875 7070         elif (upp
+00034100: 6572 6361 7365 5479 7065 203d 3d20 2753  ercaseType == 'S
+00034110: 544f 505f 4c4f 5353 5f4c 494d 4954 2729  TOP_LOSS_LIMIT')
+00034120: 206f 7220 2875 7070 6572 6361 7365 5479   or (uppercaseTy
+00034130: 7065 203d 3d20 2754 414b 455f 5052 4f46  pe == 'TAKE_PROF
+00034140: 4954 5f4c 494d 4954 2729 3a0a 2020 2020  IT_LIMIT'):.    
+00034150: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
+00034160: 4973 5265 7175 6972 6564 203d 2054 7275  IsRequired = Tru
+00034170: 650a 2020 2020 2020 2020 2020 2020 7374  e.            st
+00034180: 6f70 5072 6963 6549 7352 6571 7569 7265  opPriceIsRequire
+00034190: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+000341a0: 2020 2020 2070 7269 6365 4973 5265 7175       priceIsRequ
+000341b0: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
+000341c0: 2020 2020 2020 2020 7469 6d65 496e 466f          timeInFo
+000341d0: 7263 6549 7352 6571 7569 7265 6420 3d20  rceIsRequired = 
+000341e0: 5472 7565 0a20 2020 2020 2020 2065 6c69  True.        eli
+000341f0: 6620 7570 7065 7263 6173 6554 7970 6520  f uppercaseType 
+00034200: 3d3d 2027 4c49 4d49 545f 4d41 4b45 5227  == 'LIMIT_MAKER'
+00034210: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+00034220: 6963 6549 7352 6571 7569 7265 6420 3d20  iceIsRequired = 
+00034230: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+00034240: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
+00034250: 7265 6420 3d20 5472 7565 0a20 2020 2020  red = True.     
+00034260: 2020 2065 6c69 6620 7570 7065 7263 6173     elif uppercas
+00034270: 6554 7970 6520 3d3d 2027 5354 4f50 273a  eType == 'STOP':
+00034280: 0a20 2020 2020 2020 2020 2020 2071 7561  .            qua
+00034290: 6e74 6974 7949 7352 6571 7569 7265 6420  ntityIsRequired 
+000342a0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
+000342b0: 2020 2073 746f 7050 7269 6365 4973 5265     stopPriceIsRe
+000342c0: 7175 6972 6564 203d 2054 7275 650a 2020  quired = True.  
+000342d0: 2020 2020 2020 2020 2020 7072 6963 6549            priceI
+000342e0: 7352 6571 7569 7265 6420 3d20 5472 7565  sRequired = True
+000342f0: 0a20 2020 2020 2020 2065 6c69 6620 2875  .        elif (u
+00034300: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
+00034310: 2753 544f 505f 4d41 524b 4554 2729 206f  'STOP_MARKET') o
+00034320: 7220 2875 7070 6572 6361 7365 5479 7065  r (uppercaseType
+00034330: 203d 3d20 2754 414b 455f 5052 4f46 4954   == 'TAKE_PROFIT
+00034340: 5f4d 4152 4b45 5427 293a 0a20 2020 2020  _MARKET'):.     
+00034350: 2020 2020 2020 2063 6c6f 7365 506f 7369         closePosi
+00034360: 7469 6f6e 203d 2073 656c 662e 7361 6665  tion = self.safe
+00034370: 5f76 616c 7565 2871 7565 7279 2c20 2763  _value(query, 'c
+00034380: 6c6f 7365 506f 7369 7469 6f6e 2729 0a20  losePosition'). 
+00034390: 2020 2020 2020 2020 2020 2069 6620 636c             if cl
+000343a0: 6f73 6550 6f73 6974 696f 6e20 6973 204e  osePosition is N
+000343b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000343c0: 2020 2020 2071 7561 6e74 6974 7949 7352       quantityIsR
+000343d0: 6571 7569 7265 6420 3d20 5472 7565 0a20  equired = True. 
+000343e0: 2020 2020 2020 2020 2020 2073 746f 7050             stopP
+000343f0: 7269 6365 4973 5265 7175 6972 6564 203d  riceIsRequired =
+00034400: 2054 7275 650a 2020 2020 2020 2020 656c   True.        el
+00034410: 6966 2075 7070 6572 6361 7365 5479 7065  if uppercaseType
+00034420: 203d 3d20 2754 5241 494c 494e 475f 5354   == 'TRAILING_ST
+00034430: 4f50 5f4d 4152 4b45 5427 3a0a 2020 2020  OP_MARKET':.    
+00034440: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
+00034450: 4973 5265 7175 6972 6564 203d 2054 7275  IsRequired = Tru
+00034460: 650a 2020 2020 2020 2020 2020 2020 6361  e.            ca
+00034470: 6c6c 6261 636b 5261 7465 203d 2073 656c  llbackRate = sel
+00034480: 662e 7361 6665 5f6e 756d 6265 7228 7175  f.safe_number(qu
+00034490: 6572 792c 2027 6361 6c6c 6261 636b 5261  ery, 'callbackRa
+000344a0: 7465 2729 0a20 2020 2020 2020 2020 2020  te').           
+000344b0: 2069 6620 6361 6c6c 6261 636b 5261 7465   if callbackRate
+000344c0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+000344d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000344e0: 496e 7661 6c69 644f 7264 6572 2873 656c  InvalidOrder(sel
+000344f0: 662e 6964 202b 2027 2063 7265 6174 654f  f.id + ' createO
+00034500: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
+00034510: 6120 6361 6c6c 6261 636b 5261 7465 2065  a callbackRate e
+00034520: 7874 7261 2070 6172 616d 2066 6f72 2061  xtra param for a
+00034530: 2027 202b 2074 7970 6520 2b20 2720 6f72   ' + type + ' or
+00034540: 6465 7227 290a 2020 2020 2020 2020 6966  der').        if
+00034550: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
+00034560: 7265 643a 0a20 2020 2020 2020 2020 2020  red:.           
+00034570: 2072 6571 7565 7374 5b27 7175 616e 7469   request['quanti
+00034580: 7479 275d 203d 2073 656c 662e 616d 6f75  ty'] = self.amou
+00034590: 6e74 5f74 6f5f 7072 6563 6973 696f 6e28  nt_to_precision(
+000345a0: 7379 6d62 6f6c 2c20 616d 6f75 6e74 290a  symbol, amount).
+000345b0: 2020 2020 2020 2020 6966 2070 7269 6365          if price
+000345c0: 4973 5265 7175 6972 6564 3a0a 2020 2020  IsRequired:.    
+000345d0: 2020 2020 2020 2020 6966 2070 7269 6365          if price
+000345e0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+000345f0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00034600: 496e 7661 6c69 644f 7264 6572 2873 656c  InvalidOrder(sel
+00034610: 662e 6964 202b 2027 2063 7265 6174 654f  f.id + ' createO
+00034620: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
+00034630: 6120 7072 6963 6520 6172 6775 6d65 6e74  a price argument
+00034640: 2066 6f72 2061 2027 202b 2074 7970 6520   for a ' + type 
+00034650: 2b20 2720 6f72 6465 7227 290a 2020 2020  + ' order').    
+00034660: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00034670: 2770 7269 6365 275d 203d 2073 656c 662e  'price'] = self.
+00034680: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
+00034690: 6f6e 2873 796d 626f 6c2c 2070 7269 6365  on(symbol, price
+000346a0: 290a 2020 2020 2020 2020 6966 2074 696d  ).        if tim
+000346b0: 6549 6e46 6f72 6365 4973 5265 7175 6972  eInForceIsRequir
+000346c0: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+000346d0: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
+000346e0: 6f72 6365 275d 203d 2073 656c 662e 6f70  orce'] = self.op
+000346f0: 7469 6f6e 735b 2764 6566 6175 6c74 5469  tions['defaultTi
+00034700: 6d65 496e 466f 7263 6527 5d20 2023 2027  meInForce']  # '
+00034710: 4754 4327 203d 2047 6f6f 6420 546f 2043  GTC' = Good To C
+00034720: 616e 6365 6c28 6465 6661 756c 7429 2c20  ancel(default), 
+00034730: 2749 4f43 2720 3d20 496d 6d65 6469 6174  'IOC' = Immediat
+00034740: 6520 4f72 2043 616e 6365 6c0a 2020 2020  e Or Cancel.    
+00034750: 2020 2020 6966 206d 6172 6b65 745b 2763      if market['c
+00034760: 6f6e 7472 6163 7427 5d20 616e 6420 706f  ontract'] and po
+00034770: 7374 4f6e 6c79 3a0a 2020 2020 2020 2020  stOnly:.        
+00034780: 2020 2020 7265 7175 6573 745b 2774 696d      request['tim
+00034790: 6549 6e46 6f72 6365 275d 203d 2027 4754  eInForce'] = 'GT
+000347a0: 5827 0a20 2020 2020 2020 2069 6620 7374  X'.        if st
+000347b0: 6f70 5072 6963 6549 7352 6571 7569 7265  opPriceIsRequire
+000347c0: 643a 0a20 2020 2020 2020 2020 2020 2069  d:.            i
+000347d0: 6620 6d61 726b 6574 5b27 636f 6e74 7261  f market['contra
+000347e0: 6374 275d 3a0a 2020 2020 2020 2020 2020  ct']:.          
+000347f0: 2020 2020 2020 6966 2073 746f 7050 7269        if stopPri
+00034800: 6365 2069 7320 4e6f 6e65 3a0a 2020 2020  ce is None:.    
+00034810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034820: 7261 6973 6520 496e 7661 6c69 644f 7264  raise InvalidOrd
+00034830: 6572 2873 656c 662e 6964 202b 2027 2063  er(self.id + ' c
+00034840: 7265 6174 654f 7264 6572 2829 2072 6571  reateOrder() req
+00034850: 7569 7265 7320 6120 7374 6f70 5072 6963  uires a stopPric
+00034860: 6520 6578 7472 6120 7061 7261 6d20 666f  e extra param fo
+00034870: 7220 6120 2720 2b20 7479 7065 202b 2027  r a ' + type + '
+00034880: 206f 7264 6572 2729 0a20 2020 2020 2020   order').       
+00034890: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000348a0: 2020 2020 2020 2020 2020 2023 2063 6865             # che
+000348b0: 636b 2066 6f72 2064 656c 7461 2070 7269  ck for delta pri
+000348c0: 6365 0a20 2020 2020 2020 2020 2020 2020  ce.             
+000348d0: 2020 2074 7261 696c 696e 6744 656c 7461     trailingDelta
+000348e0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+000348f0: 7565 2870 6172 616d 732c 2027 7472 6169  ue(params, 'trai
+00034900: 6c69 6e67 4465 6c74 6127 290a 2020 2020  lingDelta').    
+00034910: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+00034920: 7261 696c 696e 6744 656c 7461 2069 7320  railingDelta is 
+00034930: 4e6f 6e65 2061 6e64 2073 746f 7050 7269  None and stopPri
+00034940: 6365 2069 7320 4e6f 6e65 3a0a 2020 2020  ce is None:.    
+00034950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034960: 7261 6973 6520 496e 7661 6c69 644f 7264  raise InvalidOrd
+00034970: 6572 2873 656c 662e 6964 202b 2027 2063  er(self.id + ' c
+00034980: 7265 6174 654f 7264 6572 2829 2072 6571  reateOrder() req
+00034990: 7569 7265 7320 6120 7374 6f70 5072 6963  uires a stopPric
+000349a0: 6520 6f72 2074 7261 696c 696e 6744 656c  e or trailingDel
+000349b0: 7461 2070 6172 616d 2066 6f72 2061 2027  ta param for a '
+000349c0: 202b 2074 7970 6520 2b20 2720 6f72 6465   + type + ' orde
+000349d0: 7227 290a 2020 2020 2020 2020 2020 2020  r').            
+000349e0: 6966 2073 746f 7050 7269 6365 2069 7320  if stopPrice is 
+000349f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00034a00: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00034a10: 745b 2773 746f 7050 7269 6365 275d 203d  t['stopPrice'] =
+00034a20: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00034a30: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00034a40: 2073 746f 7050 7269 6365 290a 2020 2020   stopPrice).    
+00034a50: 2020 2020 2320 7265 6d6f 7665 2074 696d      # remove tim
+00034a60: 6549 6e46 6f72 6365 2066 726f 6d20 7061  eInForce from pa
+00034a70: 7261 6d73 2062 6563 6175 7365 2050 4f20  rams because PO 
+00034a80: 6973 206f 6e6c 7920 7573 6564 2062 7920  is only used by 
+00034a90: 7365 6c66 2e69 735f 706f 7374 5f6f 6e6c  self.is_post_onl
+00034aa0: 7961 6e64 2069 7427 7320 6e6f 7420 6120  yand it's not a 
+00034ab0: 7661 6c69 6420 7661 6c75 6520 666f 7220  valid value for 
+00034ac0: 4269 6e61 6e63 650a 2020 2020 2020 2020  Binance.        
+00034ad0: 6966 2073 656c 662e 7361 6665 5f73 7472  if self.safe_str
+00034ae0: 696e 6728 7061 7261 6d73 2c20 2774 696d  ing(params, 'tim
+00034af0: 6549 6e46 6f72 6365 2729 203d 3d20 2750  eInForce') == 'P
+00034b00: 4f27 3a0a 2020 2020 2020 2020 2020 2020  O':.            
+00034b10: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+00034b20: 6974 2870 6172 616d 732c 205b 2774 696d  it(params, ['tim
+00034b30: 6549 6e46 6f72 6365 275d 290a 2020 2020  eInForce']).    
+00034b40: 2020 2020 7265 7175 6573 7450 6172 616d      requestParam
+00034b50: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+00034b60: 7261 6d73 2c20 5b27 7175 6f74 654f 7264  rams, ['quoteOrd
+00034b70: 6572 5174 7927 2c20 2763 6f73 7427 2c20  erQty', 'cost', 
+00034b80: 2773 746f 7050 7269 6365 272c 2027 7465  'stopPrice', 'te
+00034b90: 7374 272c 2027 7479 7065 272c 2027 6e65  st', 'type', 'ne
+00034ba0: 7743 6c69 656e 744f 7264 6572 4964 272c  wClientOrderId',
+00034bb0: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+00034bc0: 2c20 2770 6f73 744f 6e6c 7927 5d29 0a20  , 'postOnly']). 
+00034bd0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00034be0: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
+00034bf0: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
+00034c00: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00034c10: 742c 2072 6571 7565 7374 5061 7261 6d73  t, requestParams
+00034c20: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+00034c30: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
+00034c40: 6572 2872 6573 706f 6e73 652c 206d 6172  er(response, mar
+00034c50: 6b65 7429 0a0a 2020 2020 6173 796e 6320  ket)..    async 
+00034c60: 6465 6620 6665 7463 685f 6f72 6465 7228  def fetch_order(
+00034c70: 7365 6c66 2c20 6964 3a20 7374 722c 2073  self, id: str, s
+00034c80: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00034c90: 7374 725d 203d 204e 6f6e 652c 2070 6172  str] = None, par
+00034ca0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00034cb0: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00034cc0: 6368 6573 2069 6e66 6f72 6d61 7469 6f6e  ches information
+00034cd0: 206f 6e20 616e 206f 7264 6572 206d 6164   on an order mad
+00034ce0: 6520 6279 2074 6865 2075 7365 720a 2020  e by the user.  
+00034cf0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00034d00: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+00034d10: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+00034d20: 6172 6b65 7420 7468 6520 6f72 6465 7220  arket the order 
+00034d30: 7761 7320 6d61 6465 2069 6e0a 2020 2020  was made in.    
+00034d40: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00034d50: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+00034d60: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+00034d70: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
+00034d80: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+00034d90: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00034da0: 7c4e 6f6e 6520 7061 7261 6d73 5b27 6d61  |None params['ma
+00034db0: 7267 696e 4d6f 6465 275d 3a20 2763 726f  rginMode']: 'cro
+00034dc0: 7373 2720 6f72 2027 6973 6f6c 6174 6564  ss' or 'isolated
+00034dd0: 272c 2066 6f72 2073 706f 7420 6d61 7267  ', for spot marg
+00034de0: 696e 2074 7261 6469 6e67 0a20 2020 2020  in trading.     
+00034df0: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+00034e00: 3a20 416e 2060 6f72 6465 7220 7374 7275  : An `order stru
+00034e10: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+00034e20: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+00034e30: 6964 3d6f 7264 6572 2d73 7472 7563 7475  id=order-structu
+00034e40: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+00034e50: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
+00034e60: 6563 6b5f 7265 7175 6972 6564 5f73 796d  eck_required_sym
+00034e70: 626f 6c28 2766 6574 6368 4f72 6465 7227  bol('fetchOrder'
+00034e80: 2c20 7379 6d62 6f6c 290a 2020 2020 2020  , symbol).      
+00034e90: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+00034ea0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00034eb0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00034ec0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00034ed0: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
+00034ee0: 5479 7065 203d 2073 656c 662e 7361 6665  Type = self.safe
+00034ef0: 5f73 7472 696e 675f 3228 7365 6c66 2e6f  _string_2(self.o
+00034f00: 7074 696f 6e73 2c20 2766 6574 6368 4f72  ptions, 'fetchOr
+00034f10: 6465 7227 2c20 2764 6566 6175 6c74 5479  der', 'defaultTy
+00034f20: 7065 272c 2027 7370 6f74 2729 0a20 2020  pe', 'spot').   
+00034f30: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
+00034f40: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+00034f50: 616d 732c 2027 7479 7065 272c 2064 6566  ams, 'type', def
+00034f60: 6175 6c74 5479 7065 290a 2020 2020 2020  aultType).      
+00034f70: 2020 6d61 7267 696e 4d6f 6465 2c20 7175    marginMode, qu
+00034f80: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
+00034f90: 655f 6d61 7267 696e 5f6d 6f64 655f 616e  e_margin_mode_an
+00034fa0: 645f 7061 7261 6d73 2827 6665 7463 684f  d_params('fetchO
+00034fb0: 7264 6572 272c 2070 6172 616d 7329 0a20  rder', params). 
+00034fc0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00034fd0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00034fe0: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
+00034ff0: 2769 6427 5d2c 0a20 2020 2020 2020 207d  'id'],.        }
+00035000: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
+00035010: 3d20 2770 7269 7661 7465 4765 744f 7264  = 'privateGetOrd
+00035020: 6572 270a 2020 2020 2020 2020 6966 206d  er'.        if m
+00035030: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+00035040: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00035050: 686f 6420 3d20 2765 6170 6950 7269 7661  hod = 'eapiPriva
+00035060: 7465 4765 744f 7264 6572 270a 2020 2020  teGetOrder'.    
+00035070: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
+00035080: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+00035090: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+000350a0: 2766 6170 6950 7269 7661 7465 4765 744f  'fapiPrivateGetO
+000350b0: 7264 6572 270a 2020 2020 2020 2020 656c  rder'.        el
+000350c0: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+000350d0: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+000350e0: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
+000350f0: 5072 6976 6174 6547 6574 4f72 6465 7227  PrivateGetOrder'
+00035100: 0a20 2020 2020 2020 2065 6c69 6620 7479  .        elif ty
+00035110: 7065 203d 3d20 276d 6172 6769 6e27 206f  pe == 'margin' o
+00035120: 7220 6d61 7267 696e 4d6f 6465 2069 7320  r marginMode is 
+00035130: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00035140: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+00035150: 7361 7069 4765 744d 6172 6769 6e4f 7264  sapiGetMarginOrd
+00035160: 6572 270a 2020 2020 2020 2020 2020 2020  er'.            
+00035170: 6966 206d 6172 6769 6e4d 6f64 6520 3d3d  if marginMode ==
+00035180: 2027 6973 6f6c 6174 6564 273a 0a20 2020   'isolated':.   
+00035190: 2020 2020 2020 2020 2020 2020 2072 6571               req
+000351a0: 7565 7374 5b27 6973 4973 6f6c 6174 6564  uest['isIsolated
+000351b0: 275d 203d 2054 7275 650a 2020 2020 2020  '] = True.      
+000351c0: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
+000351d0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+000351e0: 655f 3228 7061 7261 6d73 2c20 276f 7269  e_2(params, 'ori
+000351f0: 6743 6c69 656e 744f 7264 6572 4964 272c  gClientOrderId',
+00035200: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+00035210: 290a 2020 2020 2020 2020 6966 2063 6c69  ).        if cli
+00035220: 656e 744f 7264 6572 4964 2069 7320 6e6f  entOrderId is no
+00035230: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00035240: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
+00035250: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
+00035260: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00035270: 5b27 636c 6965 6e74 4f72 6465 7249 6427  ['clientOrderId'
+00035280: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
+00035290: 640a 2020 2020 2020 2020 2020 2020 656c  d.            el
+000352a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000352b0: 2020 2020 7265 7175 6573 745b 276f 7269      request['ori
+000352c0: 6743 6c69 656e 744f 7264 6572 4964 275d  gClientOrderId']
+000352d0: 203d 2063 6c69 656e 744f 7264 6572 4964   = clientOrderId
+000352e0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+000352f0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00035300: 7374 5b27 6f72 6465 7249 6427 5d20 3d20  st['orderId'] = 
+00035310: 6964 0a20 2020 2020 2020 2072 6571 7565  id.        reque
+00035320: 7374 5061 7261 6d73 203d 2073 656c 662e  stParams = self.
+00035330: 6f6d 6974 2871 7565 7279 2c20 5b27 7479  omit(query, ['ty
+00035340: 7065 272c 2027 636c 6965 6e74 4f72 6465  pe', 'clientOrde
+00035350: 7249 6427 2c20 276f 7269 6743 6c69 656e  rId', 'origClien
+00035360: 744f 7264 6572 4964 275d 290a 2020 2020  tOrderId']).    
+00035370: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00035380: 7761 6974 2067 6574 6174 7472 2873 656c  wait getattr(sel
+00035390: 662c 206d 6574 686f 6429 2873 656c 662e  f, method)(self.
+000353a0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+000353b0: 7265 7175 6573 7450 6172 616d 7329 290a  requestParams)).
+000353c0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000353d0: 656c 662e 7061 7273 655f 6f72 6465 7228  elf.parse_order(
+000353e0: 7265 7370 6f6e 7365 2c20 6d61 726b 6574  response, market
+000353f0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+00035400: 2066 6574 6368 5f6f 7264 6572 7328 7365   fetch_orders(se
+00035410: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
+00035420: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00035430: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
+00035440: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
+00035450: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
+00035460: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
+00035470: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00035480: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+00035490: 6865 7320 696e 666f 726d 6174 696f 6e20  hes information 
+000354a0: 6f6e 206d 756c 7469 706c 6520 6f72 6465  on multiple orde
+000354b0: 7273 206d 6164 6520 6279 2074 6865 2075  rs made by the u
+000354c0: 7365 720a 2020 2020 2020 2020 3a70 6172  ser.        :par
+000354d0: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+000354e0: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
+000354f0: 6d62 6f6c 206f 6620 7468 6520 6d61 726b  mbol of the mark
+00035500: 6574 206f 7264 6572 7320 7765 7265 206d  et orders were m
+00035510: 6164 6520 696e 0a20 2020 2020 2020 203a  ade in.        :
+00035520: 7061 7261 6d20 696e 747c 4e6f 6e65 2073  param int|None s
+00035530: 696e 6365 3a20 7468 6520 6561 726c 6965  ince: the earlie
+00035540: 7374 2074 696d 6520 696e 206d 7320 746f  st time in ms to
+00035550: 2066 6574 6368 206f 7264 6572 7320 666f   fetch orders fo
+00035560: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
+00035570: 2069 6e74 7c4e 6f6e 6520 6c69 6d69 743a   int|None limit:
+00035580: 2074 6865 206d 6178 696d 756d 206e 756d   the maximum num
+00035590: 6265 7220 6f66 206f 7264 6572 2073 7472  ber of order str
+000355a0: 7563 7475 7265 7320 746f 2072 6574 7269  uctures to retri
+000355b0: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
+000355c0: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+000355d0: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+000355e0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+000355f0: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00035600: 706f 696e 740a 2020 2020 2020 2020 3a70  point.        :p
+00035610: 6172 616d 2073 7472 7c4e 6f6e 6520 7061  aram str|None pa
+00035620: 7261 6d73 5b27 6d61 7267 696e 4d6f 6465  rams['marginMode
+00035630: 275d 3a20 2763 726f 7373 2720 6f72 2027  ']: 'cross' or '
+00035640: 6973 6f6c 6174 6564 272c 2066 6f72 2073  isolated', for s
+00035650: 706f 7420 6d61 7267 696e 2074 7261 6469  pot margin tradi
+00035660: 6e67 0a20 2020 2020 2020 203a 7265 7475  ng.        :retu
+00035670: 726e 7320 5b64 6963 745d 3a20 6120 6c69  rns [dict]: a li
+00035680: 7374 206f 6620 606f 7264 6572 2073 7472  st of `order str
+00035690: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+000356a0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+000356b0: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
+000356c0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+000356d0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+000356e0: 6368 6563 6b5f 7265 7175 6972 6564 5f73  check_required_s
+000356f0: 796d 626f 6c28 2766 6574 6368 4f72 6465  ymbol('fetchOrde
+00035700: 7273 272c 2073 796d 626f 6c29 0a20 2020  rs', symbol).   
+00035710: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+00035720: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00035730: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00035740: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00035750: 6f6c 290a 2020 2020 2020 2020 6465 6661  ol).        defa
+00035760: 756c 7454 7970 6520 3d20 7365 6c66 2e73  ultType = self.s
+00035770: 6166 655f 7374 7269 6e67 5f32 2873 656c  afe_string_2(sel
+00035780: 662e 6f70 7469 6f6e 732c 2027 6665 7463  f.options, 'fetc
+00035790: 684f 7264 6572 7327 2c20 2764 6566 6175  hOrders', 'defau
+000357a0: 6c74 5479 7065 272c 2027 7370 6f74 2729  ltType', 'spot')
+000357b0: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
+000357c0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000357d0: 2870 6172 616d 732c 2027 7479 7065 272c  (params, 'type',
+000357e0: 2064 6566 6175 6c74 5479 7065 290a 2020   defaultType).  
+000357f0: 2020 2020 2020 6d61 7267 696e 4d6f 6465        marginMode
+00035800: 2c20 7175 6572 7920 3d20 7365 6c66 2e68  , query = self.h
+00035810: 616e 646c 655f 6d61 7267 696e 5f6d 6f64  andle_margin_mod
+00035820: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
+00035830: 7463 684f 7264 6572 7327 2c20 7061 7261  tchOrders', para
+00035840: 6d73 290a 2020 2020 2020 2020 7265 7175  ms).        requ
+00035850: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+00035860: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
+00035870: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
+00035880: 2020 2020 7d0a 2020 2020 2020 2020 6d65      }.        me
+00035890: 7468 6f64 203d 2027 7072 6976 6174 6547  thod = 'privateG
+000358a0: 6574 416c 6c4f 7264 6572 7327 0a20 2020  etAllOrders'.   
+000358b0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+000358c0: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
+000358d0: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+000358e0: 6561 7069 5072 6976 6174 6547 6574 4869  eapiPrivateGetHi
+000358f0: 7374 6f72 794f 7264 6572 7327 0a20 2020  storyOrders'.   
+00035900: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
+00035910: 5b27 6c69 6e65 6172 275d 3a0a 2020 2020  ['linear']:.    
+00035920: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
+00035930: 2027 6661 7069 5072 6976 6174 6547 6574   'fapiPrivateGet
+00035940: 416c 6c4f 7264 6572 7327 0a20 2020 2020  AllOrders'.     
+00035950: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+00035960: 696e 7665 7273 6527 5d3a 0a20 2020 2020  inverse']:.     
+00035970: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00035980: 2764 6170 6950 7269 7661 7465 4765 7441  'dapiPrivateGetA
+00035990: 6c6c 4f72 6465 7273 270a 2020 2020 2020  llOrders'.      
+000359a0: 2020 656c 6966 2074 7970 6520 3d3d 2027    elif type == '
+000359b0: 6d61 7267 696e 2720 6f72 206d 6172 6769  margin' or margi
+000359c0: 6e4d 6f64 6520 6973 206e 6f74 204e 6f6e  nMode is not Non
+000359d0: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
+000359e0: 6574 686f 6420 3d20 2773 6170 6947 6574  ethod = 'sapiGet
+000359f0: 4d61 7267 696e 416c 6c4f 7264 6572 7327  MarginAllOrders'
+00035a00: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00035a10: 6d61 7267 696e 4d6f 6465 203d 3d20 2769  marginMode == 'i
+00035a20: 736f 6c61 7465 6427 3a0a 2020 2020 2020  solated':.      
+00035a30: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00035a40: 745b 2769 7349 736f 6c61 7465 6427 5d20  t['isIsolated'] 
+00035a50: 3d20 5472 7565 0a20 2020 2020 2020 2069  = True.        i
+00035a60: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
+00035a70: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00035a80: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
+00035a90: 696d 6527 5d20 3d20 7369 6e63 650a 2020  ime'] = since.  
+00035aa0: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
+00035ab0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00035ac0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00035ad0: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
+00035ae0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+00035af0: 6520 3d20 6177 6169 7420 6765 7461 7474  e = await getatt
+00035b00: 7228 7365 6c66 2c20 6d65 7468 6f64 2928  r(self, method)(
+00035b10: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00035b20: 6573 742c 2071 7565 7279 2929 0a20 2020  est, query)).   
+00035b30: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00035b40: 2020 7370 6f74 0a20 2020 2020 2020 2023    spot.        #
+00035b50: 0a20 2020 2020 2020 2023 2020 2020 205b  .        #     [
+00035b60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00035b70: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00035b80: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+00035b90: 6f6c 223a 2022 4c54 4342 5443 222c 0a20  ol": "LTCBTC",. 
+00035ba0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00035bb0: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
+00035bc0: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+00035bd0: 2020 2020 2020 2020 2022 636c 6965 6e74           "client
+00035be0: 4f72 6465 7249 6422 3a20 226d 794f 7264  OrderId": "myOrd
+00035bf0: 6572 3122 2c0a 2020 2020 2020 2020 2320  er1",.        # 
+00035c00: 2020 2020 2020 2020 2020 2020 2270 7269              "pri
+00035c10: 6365 223a 2022 302e 3122 2c0a 2020 2020  ce": "0.1",.    
+00035c20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00035c30: 2020 226f 7269 6751 7479 223a 2022 312e    "origQty": "1.
+00035c40: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00035c50: 2020 2020 2020 2020 2020 2265 7865 6375            "execu
+00035c60: 7465 6451 7479 223a 2022 302e 3022 2c0a  tedQty": "0.0",.
+00035c70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00035c80: 2020 2020 2020 2263 756d 6d75 6c61 7469        "cummulati
+00035c90: 7665 5175 6f74 6551 7479 223a 2022 302e  veQuoteQty": "0.
+00035ca0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00035cb0: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
+00035cc0: 7322 3a20 224e 4557 222c 0a20 2020 2020  s": "NEW",.     
+00035cd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00035ce0: 2022 7469 6d65 496e 466f 7263 6522 3a20   "timeInForce": 
+00035cf0: 2247 5443 222c 0a20 2020 2020 2020 2023  "GTC",.        #
+00035d00: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
+00035d10: 7065 223a 2022 4c49 4d49 5422 2c0a 2020  pe": "LIMIT",.  
+00035d20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00035d30: 2020 2020 2273 6964 6522 3a20 2242 5559      "side": "BUY
+00035d40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00035d50: 2020 2020 2020 2020 2022 7374 6f70 5072           "stopPr
+00035d60: 6963 6522 3a20 2230 2e30 222c 0a20 2020  ice": "0.0",.   
+00035d70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00035d80: 2020 2022 6963 6562 6572 6751 7479 223a     "icebergQty":
+00035d90: 2022 302e 3022 2c0a 2020 2020 2020 2020   "0.0",.        
+00035da0: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
+00035db0: 696d 6522 3a20 3134 3939 3832 3733 3139  ime": 1499827319
+00035dc0: 3535 392c 0a20 2020 2020 2020 2023 2020  559,.        #  
+00035dd0: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
+00035de0: 7465 5469 6d65 223a 2031 3439 3938 3237  teTime": 1499827
+00035df0: 3331 3935 3539 2c0a 2020 2020 2020 2020  319559,.        
+00035e00: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
+00035e10: 7357 6f72 6b69 6e67 223a 2054 7275 650a  sWorking": True.
+00035e20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00035e30: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00035e40: 2020 5d0a 2020 2020 2020 2020 230a 2020    ].        #.  
+00035e50: 2020 2020 2020 2320 2066 7574 7572 6573        #  futures
+00035e60: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00035e70: 2020 2023 2020 2020 205b 0a20 2020 2020     #     [.     
+00035e80: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
+00035e90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00035ea0: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+00035eb0: 4254 4355 5344 5422 2c0a 2020 2020 2020  BTCUSDT",.      
+00035ec0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00035ed0: 226f 7264 6572 4964 223a 2031 2c0a 2020  "orderId": 1,.  
+00035ee0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00035ef0: 2020 2020 2263 6c69 656e 744f 7264 6572      "clientOrder
+00035f00: 4964 223a 2022 6d79 4f72 6465 7231 222c  Id": "myOrder1",
+00035f10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00035f20: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
+00035f30: 2230 2e31 222c 0a20 2020 2020 2020 2023  "0.1",.        #
+00035f40: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00035f50: 6967 5174 7922 3a20 2231 2e30 222c 0a20  igQty": "1.0",. 
+00035f60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00035f70: 2020 2020 2022 6578 6563 7574 6564 5174       "executedQt
+00035f80: 7922 3a20 2231 2e30 222c 0a20 2020 2020  y": "1.0",.     
+00035f90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00035fa0: 2022 6375 6d51 756f 7465 223a 2022 3130   "cumQuote": "10
+00035fb0: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
+00035fc0: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
+00035fd0: 7573 223a 2022 4e45 5722 2c0a 2020 2020  us": "NEW",.    
+00035fe0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00035ff0: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
+00036000: 2022 4754 4322 2c0a 2020 2020 2020 2020   "GTC",.        
+00036010: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
+00036020: 7970 6522 3a20 224c 494d 4954 222c 0a20  ype": "LIMIT",. 
+00036030: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00036040: 2020 2020 2022 7369 6465 223a 2022 4255       "side": "BU
+00036050: 5922 2c0a 2020 2020 2020 2020 2320 2020  Y",.        #   
+00036060: 2020 2020 2020 2020 2020 2273 746f 7050            "stopP
+00036070: 7269 6365 223a 2022 302e 3022 2c0a 2020  rice": "0.0",.  
+00036080: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00036090: 2020 2020 2275 7064 6174 6554 696d 6522      "updateTime"
+000360a0: 3a20 3134 3939 3832 3733 3139 3535 390a  : 1499827319559.
+000360b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000360c0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+000360d0: 2020 5d0a 2020 2020 2020 2020 230a 2020    ].        #.  
+000360e0: 2020 2020 2020 2320 6f70 7469 6f6e 730a        # options.
+000360f0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00036100: 2020 2320 2020 2020 5b0a 2020 2020 2020    #     [.      
+00036110: 2020 2320 2020 2020 2020 2020 7b0a 2020    #         {.  
+00036120: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00036130: 2020 2020 226f 7264 6572 4964 223a 2034      "orderId": 4
+00036140: 3732 3838 3333 3038 3534 3336 3937 3731  7288330854369771
+00036150: 3532 2c0a 2020 2020 2020 2020 2320 2020  52,.        #   
+00036160: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00036170: 6c22 3a20 2245 5448 2d32 3330 3231 312d  l": "ETH-230211-
+00036180: 3135 3030 2d43 222c 0a20 2020 2020 2020  1500-C",.       
+00036190: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000361a0: 7072 6963 6522 3a20 2231 302e 3022 2c0a  price": "10.0",.
+000361b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000361c0: 2020 2020 2020 2271 7561 6e74 6974 7922        "quantity"
+000361d0: 3a20 2231 2e30 3022 2c0a 2020 2020 2020  : "1.00",.      
+000361e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000361f0: 2265 7865 6375 7465 6451 7479 223a 2022  "executedQty": "
+00036200: 302e 3030 222c 0a20 2020 2020 2020 2023  0.00",.        #
+00036210: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
+00036220: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
+00036230: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00036240: 7369 6465 223a 2022 4255 5922 2c0a 2020  side": "BUY",.  
+00036250: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00036260: 2020 2020 2274 7970 6522 3a20 224c 494d      "type": "LIM
+00036270: 4954 222c 0a20 2020 2020 2020 2023 2020  IT",.        #  
+00036280: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
+00036290: 496e 466f 7263 6522 3a20 2247 5443 222c  InForce": "GTC",
+000362a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000362b0: 2020 2020 2020 2022 7265 6475 6365 4f6e         "reduceOn
+000362c0: 6c79 223a 2046 616c 7365 2c0a 2020 2020  ly": False,.    
+000362d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000362e0: 2020 2270 6f73 744f 6e6c 7922 3a20 4661    "postOnly": Fa
+000362f0: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+00036300: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
+00036310: 7465 5469 6d65 223a 2031 3637 3630 3833  teTime": 1676083
+00036320: 3033 3434 3632 2c0a 2020 2020 2020 2020  034462,.        
+00036330: 2320 2020 2020 2020 2020 2020 2020 2275  #             "u
+00036340: 7064 6174 6554 696d 6522 3a20 3136 3736  pdateTime": 1676
+00036350: 3038 3330 3334 3436 322c 0a20 2020 2020  083034462,.     
+00036360: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00036370: 2022 7374 6174 7573 223a 2022 4143 4345   "status": "ACCE
+00036380: 5054 4544 222c 0a20 2020 2020 2020 2023  PTED",.        #
+00036390: 2020 2020 2020 2020 2020 2020 2022 6176               "av
+000363a0: 6750 7269 6365 223a 2022 3022 2c0a 2020  gPrice": "0",.  
+000363b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000363c0: 2020 2020 2273 6f75 7263 6522 3a20 2241      "source": "A
+000363d0: 5049 222c 0a20 2020 2020 2020 2023 2020  PI",.        #  
+000363e0: 2020 2020 2020 2020 2020 2022 636c 6965             "clie
+000363f0: 6e74 4f72 6465 7249 6422 3a20 2222 2c0a  ntOrderId": "",.
+00036400: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036410: 2020 2020 2020 2270 7269 6365 5363 616c        "priceScal
+00036420: 6522 3a20 312c 0a20 2020 2020 2020 2023  e": 1,.        #
+00036430: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
+00036440: 616e 7469 7479 5363 616c 6522 3a20 322c  antityScale": 2,
+00036450: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00036460: 2020 2020 2020 2022 6f70 7469 6f6e 5369         "optionSi
+00036470: 6465 223a 2022 4341 4c4c 222c 0a20 2020  de": "CALL",.   
+00036480: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00036490: 2020 2022 7175 6f74 6541 7373 6574 223a     "quoteAsset":
+000364a0: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+000364b0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000364c0: 6c61 7374 5472 6164 6522 3a20 7b22 6964  lastTrade": {"id
+000364d0: 223a 2236 3922 2c22 7469 6d65 223a 2231  ":"69","time":"1
+000364e0: 3637 3630 3834 3433 3035 3637 222c 2270  676084430567","p
+000364f0: 7269 6365 223a 2232 342e 3922 2c22 7174  rice":"24.9","qt
+00036500: 7922 3a22 312e 3030 227d 2c0a 2020 2020  y":"1.00"},.    
+00036510: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00036520: 2020 226d 6d70 223a 2046 616c 7365 0a20    "mmp": False. 
+00036530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00036540: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+00036550: 205d 0a20 2020 2020 2020 2023 0a20 2020   ].        #.   
+00036560: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00036570: 2e70 6172 7365 5f6f 7264 6572 7328 7265  .parse_orders(re
+00036580: 7370 6f6e 7365 2c20 6d61 726b 6574 2c20  sponse, market, 
+00036590: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+000365a0: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
+000365b0: 6368 5f6f 7065 6e5f 6f72 6465 7273 2873  ch_open_orders(s
+000365c0: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+000365d0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+000365e0: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+000365f0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+00036600: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+00036610: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+00036620: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00036630: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00036640: 6368 2061 6c6c 2075 6e66 696c 6c65 6420  ch all unfilled 
+00036650: 6375 7272 656e 746c 7920 6f70 656e 206f  currently open o
+00036660: 7264 6572 730a 2020 2020 2020 2020 3a70  rders.        :p
+00036670: 6172 616d 2073 7472 7c4e 6f6e 6520 7379  aram str|None sy
+00036680: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
+00036690: 726b 6574 2073 796d 626f 6c0a 2020 2020  rket symbol.    
+000366a0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+000366b0: 6f6e 6520 7369 6e63 653a 2074 6865 2065  one since: the e
+000366c0: 6172 6c69 6573 7420 7469 6d65 2069 6e20  arliest time in 
+000366d0: 6d73 2074 6f20 6665 7463 6820 6f70 656e  ms to fetch open
+000366e0: 206f 7264 6572 7320 666f 720a 2020 2020   orders for.    
+000366f0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00036700: 6f6e 6520 6c69 6d69 743a 2074 6865 206d  one limit: the m
+00036710: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
+00036720: 206f 7065 6e20 6f72 6465 7273 2073 7472   open orders str
+00036730: 7563 7475 7265 7320 746f 2072 6574 7269  uctures to retri
+00036740: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
+00036750: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+00036760: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00036770: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00036780: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00036790: 706f 696e 740a 2020 2020 2020 2020 3a70  point.        :p
+000367a0: 6172 616d 2073 7472 7c4e 6f6e 6520 7061  aram str|None pa
+000367b0: 7261 6d73 5b27 6d61 7267 696e 4d6f 6465  rams['marginMode
+000367c0: 275d 3a20 2763 726f 7373 2720 6f72 2027  ']: 'cross' or '
+000367d0: 6973 6f6c 6174 6564 272c 2066 6f72 2073  isolated', for s
+000367e0: 706f 7420 6d61 7267 696e 2074 7261 6469  pot margin tradi
+000367f0: 6e67 0a20 2020 2020 2020 203a 7265 7475  ng.        :retu
+00036800: 726e 7320 5b64 6963 745d 3a20 6120 6c69  rns [dict]: a li
+00036810: 7374 206f 6620 606f 7264 6572 2073 7472  st of `order str
+00036820: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+00036830: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+00036840: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
+00036850: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00036860: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
+00036870: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00036880: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+00036890: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+000368a0: 2020 2074 7970 6520 3d20 4e6f 6e65 0a20     type = None. 
+000368b0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+000368c0: 207b 7d0a 2020 2020 2020 2020 6d61 7267   {}.        marg
+000368d0: 696e 4d6f 6465 203d 204e 6f6e 650a 2020  inMode = None.  
+000368e0: 2020 2020 2020 7175 6572 7920 3d20 4e6f        query = No
+000368f0: 6e65 0a20 2020 2020 2020 206d 6172 6769  ne.        margi
+00036900: 6e4d 6f64 652c 2071 7565 7279 203d 2073  nMode, query = s
+00036910: 656c 662e 6861 6e64 6c65 5f6d 6172 6769  elf.handle_margi
+00036920: 6e5f 6d6f 6465 5f61 6e64 5f70 6172 616d  n_mode_and_param
+00036930: 7328 2766 6574 6368 4f70 656e 4f72 6465  s('fetchOpenOrde
+00036940: 7273 272c 2070 6172 616d 7329 0a20 2020  rs', params).   
+00036950: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+00036960: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00036970: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00036980: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00036990: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+000369a0: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
+000369b0: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
+000369c0: 5d0a 2020 2020 2020 2020 2020 2020 6465  ].            de
+000369d0: 6661 756c 7454 7970 6520 3d20 7365 6c66  faultType = self
+000369e0: 2e73 6166 655f 7374 7269 6e67 5f32 2873  .safe_string_2(s
+000369f0: 656c 662e 6f70 7469 6f6e 732c 2027 6665  elf.options, 'fe
+00036a00: 7463 684f 7065 6e4f 7264 6572 7327 2c20  tchOpenOrders', 
+00036a10: 2764 6566 6175 6c74 5479 7065 272c 2027  'defaultType', '
+00036a20: 7370 6f74 2729 0a20 2020 2020 2020 2020  spot').         
+00036a30: 2020 206d 6172 6b65 7454 7970 6520 3d20     marketType = 
+00036a40: 6d61 726b 6574 5b27 7479 7065 275d 2069  market['type'] i
+00036a50: 6620 2827 7479 7065 2720 696e 206d 6172  f ('type' in mar
+00036a60: 6b65 7429 2065 6c73 6520 6465 6661 756c  ket) else defaul
+00036a70: 7454 7970 650a 2020 2020 2020 2020 2020  tType.          
+00036a80: 2020 7479 7065 203d 2073 656c 662e 7361    type = self.sa
+00036a90: 6665 5f73 7472 696e 6728 7175 6572 792c  fe_string(query,
+00036aa0: 2027 7479 7065 272c 206d 6172 6b65 7454   'type', marketT
+00036ab0: 7970 6529 0a20 2020 2020 2020 2065 6c69  ype).        eli
+00036ac0: 6620 7365 6c66 2e6f 7074 696f 6e73 5b27  f self.options['
+00036ad0: 7761 726e 4f6e 4665 7463 684f 7065 6e4f  warnOnFetchOpenO
+00036ae0: 7264 6572 7357 6974 686f 7574 5379 6d62  rdersWithoutSymb
+00036af0: 6f6c 275d 3a0a 2020 2020 2020 2020 2020  ol']:.          
+00036b00: 2020 7379 6d62 6f6c 7320 3d20 7365 6c66    symbols = self
+00036b10: 2e73 796d 626f 6c73 0a20 2020 2020 2020  .symbols.       
+00036b20: 2020 2020 206e 756d 5379 6d62 6f6c 7320       numSymbols 
+00036b30: 3d20 6c65 6e28 7379 6d62 6f6c 7329 0a20  = len(symbols). 
+00036b40: 2020 2020 2020 2020 2020 2066 6574 6368             fetch
+00036b50: 4f70 656e 4f72 6465 7273 5261 7465 4c69  OpenOrdersRateLi
+00036b60: 6d69 7420 3d20 7365 6c66 2e70 6172 7365  mit = self.parse
+00036b70: 5f74 6f5f 696e 7428 6e75 6d53 796d 626f  _to_int(numSymbo
+00036b80: 6c73 202f 2032 290a 2020 2020 2020 2020  ls / 2).        
+00036b90: 2020 2020 7261 6973 6520 4578 6368 616e      raise Exchan
+00036ba0: 6765 4572 726f 7228 7365 6c66 2e69 6420  geError(self.id 
+00036bb0: 2b20 2720 6665 7463 684f 7065 6e4f 7264  + ' fetchOpenOrd
+00036bc0: 6572 7328 2920 5741 524e 494e 473a 2066  ers() WARNING: f
+00036bd0: 6574 6368 696e 6720 6f70 656e 206f 7264  etching open ord
+00036be0: 6572 7320 7769 7468 6f75 7420 7370 6563  ers without spec
+00036bf0: 6966 7969 6e67 2061 2073 796d 626f 6c20  ifying a symbol 
+00036c00: 6973 2072 6174 652d 6c69 6d69 7465 6420  is rate-limited 
+00036c10: 746f 206f 6e65 2063 616c 6c20 7065 7220  to one call per 
+00036c20: 2720 2b20 7374 7228 6665 7463 684f 7065  ' + str(fetchOpe
+00036c30: 6e4f 7264 6572 7352 6174 654c 696d 6974  nOrdersRateLimit
+00036c40: 2920 2b20 2720 7365 636f 6e64 732e 2044  ) + ' seconds. D
+00036c50: 6f20 6e6f 7420 6361 6c6c 2073 656c 6620  o not call self 
+00036c60: 6d65 7468 6f64 2066 7265 7175 656e 746c  method frequentl
+00036c70: 7920 746f 2061 766f 6964 2062 616e 2e20  y to avoid ban. 
+00036c80: 5365 7420 2720 2b20 7365 6c66 2e69 6420  Set ' + self.id 
+00036c90: 2b20 272e 6f70 7469 6f6e 735b 2277 6172  + '.options["war
+00036ca0: 6e4f 6e46 6574 6368 4f70 656e 4f72 6465  nOnFetchOpenOrde
+00036cb0: 7273 5769 7468 6f75 7453 796d 626f 6c22  rsWithoutSymbol"
+00036cc0: 5d20 3d20 4661 6c73 6520 746f 2073 7570  ] = False to sup
+00036cd0: 7072 6573 7320 7365 6c66 2077 6172 6e69  press self warni
+00036ce0: 6e67 206d 6573 7361 6765 2e27 290a 2020  ng message.').  
+00036cf0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00036d00: 2020 2020 2020 2020 6465 6661 756c 7454          defaultT
+00036d10: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
+00036d20: 7374 7269 6e67 5f32 2873 656c 662e 6f70  string_2(self.op
+00036d30: 7469 6f6e 732c 2027 6665 7463 684f 7065  tions, 'fetchOpe
+00036d40: 6e4f 7264 6572 7327 2c20 2764 6566 6175  nOrders', 'defau
+00036d50: 6c74 5479 7065 272c 2027 7370 6f74 2729  ltType', 'spot')
+00036d60: 0a20 2020 2020 2020 2020 2020 2074 7970  .            typ
+00036d70: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+00036d80: 7269 6e67 2871 7565 7279 2c20 2774 7970  ring(query, 'typ
+00036d90: 6527 2c20 6465 6661 756c 7454 7970 6529  e', defaultType)
+00036da0: 0a20 2020 2020 2020 2073 7562 5479 7065  .        subType
+00036db0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00036dc0: 7375 6254 7970 652c 2071 7565 7279 203d  subType, query =
+00036dd0: 2073 656c 662e 6861 6e64 6c65 5f73 7562   self.handle_sub
+00036de0: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
+00036df0: 2827 6665 7463 684f 7065 6e4f 7264 6572  ('fetchOpenOrder
+00036e00: 7327 2c20 6d61 726b 6574 2c20 7175 6572  s', market, quer
+00036e10: 7929 0a20 2020 2020 2020 2072 6571 7565  y).        reque
+00036e20: 7374 5061 7261 6d73 203d 2073 656c 662e  stParams = self.
+00036e30: 6f6d 6974 2871 7565 7279 2c20 2774 7970  omit(query, 'typ
+00036e40: 6527 290a 2020 2020 2020 2020 6d65 7468  e').        meth
+00036e50: 6f64 203d 2027 7072 6976 6174 6547 6574  od = 'privateGet
+00036e60: 4f70 656e 4f72 6465 7273 270a 2020 2020  OpenOrders'.    
+00036e70: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
+00036e80: 6f70 7469 6f6e 273a 0a20 2020 2020 2020  option':.       
+00036e90: 2020 2020 206d 6574 686f 6420 3d20 2765       method = 'e
+00036ea0: 6170 6950 7269 7661 7465 4765 744f 7065  apiPrivateGetOpe
+00036eb0: 6e4f 7264 6572 7327 0a20 2020 2020 2020  nOrders'.       
+00036ec0: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
+00036ed0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00036ee0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00036ef0: 7374 5b27 7374 6172 7454 696d 6527 5d20  st['startTime'] 
+00036f00: 3d20 7369 6e63 650a 2020 2020 2020 2020  = since.        
+00036f10: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
+00036f20: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00036f30: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00036f40: 745b 276c 696d 6974 275d 203d 206c 696d  t['limit'] = lim
+00036f50: 6974 0a20 2020 2020 2020 2065 6c69 6620  it.        elif 
+00036f60: 7365 6c66 2e69 735f 6c69 6e65 6172 2874  self.is_linear(t
+00036f70: 7970 652c 2073 7562 5479 7065 293a 0a20  ype, subType):. 
+00036f80: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+00036f90: 6420 3d20 2766 6170 6950 7269 7661 7465  d = 'fapiPrivate
+00036fa0: 4765 744f 7065 6e4f 7264 6572 7327 0a20  GetOpenOrders'. 
+00036fb0: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
+00036fc0: 2e69 735f 696e 7665 7273 6528 7479 7065  .is_inverse(type
+00036fd0: 2c20 7375 6254 7970 6529 3a0a 2020 2020  , subType):.    
+00036fe0: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
+00036ff0: 2027 6461 7069 5072 6976 6174 6547 6574   'dapiPrivateGet
+00037000: 4f70 656e 4f72 6465 7273 270a 2020 2020  OpenOrders'.    
+00037010: 2020 2020 656c 6966 2074 7970 6520 3d3d      elif type ==
+00037020: 2027 6d61 7267 696e 2720 6f72 206d 6172   'margin' or mar
+00037030: 6769 6e4d 6f64 6520 6973 206e 6f74 204e  ginMode is not N
+00037040: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00037050: 206d 6574 686f 6420 3d20 2773 6170 6947   method = 'sapiG
+00037060: 6574 4d61 7267 696e 4f70 656e 4f72 6465  etMarginOpenOrde
+00037070: 7273 270a 2020 2020 2020 2020 2020 2020  rs'.            
+00037080: 6966 206d 6172 6769 6e4d 6f64 6520 3d3d  if marginMode ==
+00037090: 2027 6973 6f6c 6174 6564 273a 0a20 2020   'isolated':.   
+000370a0: 2020 2020 2020 2020 2020 2020 2072 6571               req
+000370b0: 7565 7374 5b27 6973 4973 6f6c 6174 6564  uest['isIsolated
+000370c0: 275d 203d 2054 7275 650a 2020 2020 2020  '] = True.      
+000370d0: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
+000370e0: 626f 6c20 6973 204e 6f6e 653a 0a20 2020  bol is None:.   
+000370f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037100: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
+00037110: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
+00037120: 202b 2027 2066 6574 6368 4f70 656e 4f72   + ' fetchOpenOr
+00037130: 6465 7273 2829 2072 6571 7569 7265 7320  ders() requires 
+00037140: 6120 7379 6d62 6f6c 2061 7267 756d 656e  a symbol argumen
+00037150: 7420 666f 7220 6973 6f6c 6174 6564 206d  t for isolated m
+00037160: 6172 6b65 7473 2729 0a20 2020 2020 2020  arkets').       
+00037170: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+00037180: 7420 6765 7461 7474 7228 7365 6c66 2c20  t getattr(self, 
+00037190: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+000371a0: 656e 6428 7265 7175 6573 742c 2072 6571  end(request, req
+000371b0: 7565 7374 5061 7261 6d73 2929 0a20 2020  uestParams)).   
+000371c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000371d0: 2e70 6172 7365 5f6f 7264 6572 7328 7265  .parse_orders(re
+000371e0: 7370 6f6e 7365 2c20 6d61 726b 6574 2c20  sponse, market, 
+000371f0: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+00037200: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
+00037210: 6368 5f63 6c6f 7365 645f 6f72 6465 7273  ch_closed_orders
+00037220: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
+00037230: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00037240: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
+00037250: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00037260: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
+00037270: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
+00037280: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00037290: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
+000372a0: 6574 6368 6573 2069 6e66 6f72 6d61 7469  etches informati
+000372b0: 6f6e 206f 6e20 6d75 6c74 6970 6c65 2063  on on multiple c
+000372c0: 6c6f 7365 6420 6f72 6465 7273 206d 6164  losed orders mad
+000372d0: 6520 6279 2074 6865 2075 7365 720a 2020  e by the user.  
+000372e0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000372f0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+00037300: 206d 6172 6b65 7420 7379 6d62 6f6c 206f   market symbol o
+00037310: 6620 7468 6520 6d61 726b 6574 206f 7264  f the market ord
+00037320: 6572 7320 7765 7265 206d 6164 6520 696e  ers were made in
+00037330: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00037340: 696e 747c 4e6f 6e65 2073 696e 6365 3a20  int|None since: 
+00037350: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
+00037360: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
+00037370: 206f 7264 6572 7320 666f 720a 2020 2020   orders for.    
+00037380: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00037390: 6f6e 6520 6c69 6d69 743a 2074 6865 206d  one limit: the m
+000373a0: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
+000373b0: 206f 7264 6572 2073 7472 7563 7475 7265   order structure
+000373c0: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
+000373d0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+000373e0: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+000373f0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00037400: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
+00037410: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
+00037420: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+00037430: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
+00037440: 6f66 2060 6f72 6465 7220 7374 7275 6374  of `order struct
+00037450: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
+00037460: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+00037470: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
+00037480: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00037490: 2020 2020 2020 2020 6f72 6465 7273 203d          orders =
+000374a0: 2061 7761 6974 2073 656c 662e 6665 7463   await self.fetc
+000374b0: 685f 6f72 6465 7273 2873 796d 626f 6c2c  h_orders(symbol,
+000374c0: 2073 696e 6365 2c20 6c69 6d69 742c 2070   since, limit, p
+000374d0: 6172 616d 7329 0a20 2020 2020 2020 2072  arams).        r
+000374e0: 6574 7572 6e20 7365 6c66 2e66 696c 7465  eturn self.filte
+000374f0: 725f 6279 286f 7264 6572 732c 2027 7374  r_by(orders, 'st
+00037500: 6174 7573 272c 2027 636c 6f73 6564 2729  atus', 'closed')
+00037510: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+00037520: 6665 7463 685f 6361 6e63 656c 6564 5f6f  fetch_canceled_o
+00037530: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
+00037540: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+00037550: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+00037560: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00037570: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+00037580: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00037590: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+000375a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000375b0: 2020 2020 6665 7463 6865 7320 696e 666f      fetches info
+000375c0: 726d 6174 696f 6e20 6f6e 206d 756c 7469  rmation on multi
+000375d0: 706c 6520 6361 6e63 656c 6564 206f 7264  ple canceled ord
+000375e0: 6572 7320 6d61 6465 2062 7920 7468 6520  ers made by the 
+000375f0: 7573 6572 0a20 2020 2020 2020 2073 6565  user.        see
+00037600: 2068 7474 7073 3a2f 2f62 696e 616e 6365   https://binance
+00037610: 2d64 6f63 732e 6769 7468 7562 2e69 6f2f  -docs.github.io/
+00037620: 6170 6964 6f63 732f 7370 6f74 2f65 6e2f  apidocs/spot/en/
+00037630: 2361 6c6c 2d6f 7264 6572 732d 7573 6572  #all-orders-user
+00037640: 5f64 6174 610a 2020 2020 2020 2020 7365  _data.        se
+00037650: 6520 6874 7470 733a 2f2f 6269 6e61 6e63  e https://binanc
+00037660: 652d 646f 6373 2e67 6974 6875 622e 696f  e-docs.github.io
+00037670: 2f61 7069 646f 6373 2f73 706f 742f 656e  /apidocs/spot/en
+00037680: 2f23 7175 6572 792d 6d61 7267 696e 2d61  /#query-margin-a
+00037690: 6363 6f75 6e74 2d33 392d 732d 616c 6c2d  ccount-39-s-all-
+000376a0: 6f72 6465 7273 2d75 7365 725f 6461 7461  orders-user_data
+000376b0: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
+000376c0: 7073 3a2f 2f62 696e 616e 6365 2d64 6f63  ps://binance-doc
+000376d0: 732e 6769 7468 7562 2e69 6f2f 6170 6964  s.github.io/apid
+000376e0: 6f63 732f 766f 7074 696f 6e73 2f65 6e2f  ocs/voptions/en/
+000376f0: 2371 7565 7279 2d6f 7074 696f 6e2d 6f72  #query-option-or
+00037700: 6465 722d 6869 7374 6f72 792d 7472 6164  der-history-trad
+00037710: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+00037720: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
+00037730: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
+00037740: 6f6c 206f 6620 7468 6520 6d61 726b 6574  ol of the market
+00037750: 2074 6865 206f 7264 6572 7320 7765 7265   the orders were
+00037760: 206d 6164 6520 696e 0a20 2020 2020 2020   made in.       
+00037770: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
+00037780: 2073 696e 6365 3a20 7468 6520 6561 726c   since: the earl
+00037790: 6965 7374 2074 696d 6520 696e 206d 7320  iest time in ms 
+000377a0: 746f 2066 6574 6368 206f 7264 6572 7320  to fetch orders 
+000377b0: 666f 720a 2020 2020 2020 2020 3a70 6172  for.        :par
+000377c0: 616d 2069 6e74 7c4e 6f6e 6520 6c69 6d69  am int|None limi
+000377d0: 743a 2074 6865 206d 6178 696d 756d 206e  t: the maximum n
+000377e0: 756d 6265 7220 6f66 206f 7264 6572 2073  umber of order s
+000377f0: 7472 7563 7475 7265 7320 746f 2072 6574  tructures to ret
+00037800: 7269 6576 650a 2020 2020 2020 2020 3a70  rieve.        :p
+00037810: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+00037820: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+00037830: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+00037840: 6865 2062 696e 616e 6365 2061 7069 2065  he binance api e
+00037850: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+00037860: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
+00037870: 2061 206c 6973 7420 6f66 2060 6f72 6465   a list of `orde
+00037880: 7220 7374 7275 6374 7572 6573 203c 6874  r structures <ht
+00037890: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+000378a0: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
+000378b0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+000378c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000378d0: 7365 6c66 2e63 6865 636b 5f72 6571 7569  self.check_requi
+000378e0: 7265 645f 7379 6d62 6f6c 2827 6665 7463  red_symbol('fetc
+000378f0: 6843 616e 6365 6c65 644f 7264 6572 7327  hCanceledOrders'
+00037900: 2c20 7379 6d62 6f6c 290a 2020 2020 2020  , symbol).      
+00037910: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+00037920: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00037930: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00037940: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00037950: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
+00037960: 6574 5b27 7377 6170 275d 206f 7220 6d61  et['swap'] or ma
+00037970: 726b 6574 5b27 6675 7475 7265 275d 3a0a  rket['future']:.
+00037980: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00037990: 6520 4e6f 7453 7570 706f 7274 6564 2873  e NotSupported(s
+000379a0: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+000379b0: 4361 6e63 656c 6564 4f72 6465 7273 2829  CanceledOrders()
+000379c0: 2073 7570 706f 7274 7320 7370 6f74 2c20   supports spot, 
+000379d0: 6d61 7267 696e 2061 6e64 206f 7074 696f  margin and optio
+000379e0: 6e20 6d61 726b 6574 7320 6f6e 6c79 2729  n markets only')
+000379f0: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+00037a00: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+00037a10: 6d73 2c20 2774 7970 6527 290a 2020 2020  ms, 'type').    
+00037a20: 2020 2020 6f72 6465 7273 203d 2061 7761      orders = awa
+00037a30: 6974 2073 656c 662e 6665 7463 685f 6f72  it self.fetch_or
+00037a40: 6465 7273 2873 796d 626f 6c2c 2073 696e  ders(symbol, sin
+00037a50: 6365 2c20 4e6f 6e65 2c20 7061 7261 6d73  ce, None, params
+00037a60: 290a 2020 2020 2020 2020 6669 6c74 6572  ).        filter
+00037a70: 6564 4f72 6465 7273 203d 2073 656c 662e  edOrders = self.
+00037a80: 6669 6c74 6572 5f62 7928 6f72 6465 7273  filter_by(orders
+00037a90: 2c20 2773 7461 7475 7327 2c20 2763 616e  , 'status', 'can
+00037aa0: 6365 6c65 6427 290a 2020 2020 2020 2020  celed').        
+00037ab0: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
+00037ac0: 6572 5f62 795f 6c69 6d69 7428 6669 6c74  er_by_limit(filt
+00037ad0: 6572 6564 4f72 6465 7273 2c20 6c69 6d69  eredOrders, limi
+00037ae0: 7429 0a0a 2020 2020 6173 796e 6320 6465  t)..    async de
+00037af0: 6620 6361 6e63 656c 5f6f 7264 6572 2873  f cancel_order(s
+00037b00: 656c 662c 2069 643a 2073 7472 2c20 7379  elf, id: str, sy
+00037b10: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+00037b20: 7472 5d20 3d20 4e6f 6e65 2c20 7061 7261  tr] = None, para
+00037b30: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00037b40: 2222 220a 2020 2020 2020 2020 6361 6e63  """.        canc
+00037b50: 656c 7320 616e 206f 7065 6e20 6f72 6465  els an open orde
+00037b60: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
+00037b70: 2073 7472 2069 643a 206f 7264 6572 2069   str id: order i
+00037b80: 640a 2020 2020 2020 2020 3a70 6172 616d  d.        :param
+00037b90: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
+00037ba0: 6669 6564 2073 796d 626f 6c20 6f66 2074  fied symbol of t
+00037bb0: 6865 206d 6172 6b65 7420 7468 6520 6f72  he market the or
+00037bc0: 6465 7220 7761 7320 6d61 6465 2069 6e0a  der was made in.
+00037bd0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+00037be0: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+00037bf0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+00037c00: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
+00037c10: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
+00037c20: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+00037c30: 6e73 2064 6963 743a 2041 6e20 606f 7264  ns dict: An `ord
+00037c40: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
+00037c50: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+00037c60: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
+00037c70: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+00037c80: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00037c90: 7365 6c66 2e63 6865 636b 5f72 6571 7569  self.check_requi
+00037ca0: 7265 645f 7379 6d62 6f6c 2827 6361 6e63  red_symbol('canc
+00037cb0: 656c 4f72 6465 7227 2c20 7379 6d62 6f6c  elOrder', symbol
+00037cc0: 290a 2020 2020 2020 2020 6177 6169 7420  ).        await 
+00037cd0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00037ce0: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
+00037cf0: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+00037d00: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+00037d10: 2064 6566 6175 6c74 5479 7065 203d 2073   defaultType = s
+00037d20: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
+00037d30: 3228 7365 6c66 2e6f 7074 696f 6e73 2c20  2(self.options, 
+00037d40: 2763 616e 6365 6c4f 7264 6572 272c 2027  'cancelOrder', '
+00037d50: 6465 6661 756c 7454 7970 6527 2c20 2773  defaultType', 's
+00037d60: 706f 7427 290a 2020 2020 2020 2020 7479  pot').        ty
+00037d70: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
+00037d80: 7472 696e 6728 7061 7261 6d73 2c20 2774  tring(params, 't
+00037d90: 7970 6527 2c20 6465 6661 756c 7454 7970  ype', defaultTyp
+00037da0: 6529 0a20 2020 2020 2020 206d 6172 6769  e).        margi
+00037db0: 6e4d 6f64 652c 2071 7565 7279 203d 2073  nMode, query = s
+00037dc0: 656c 662e 6861 6e64 6c65 5f6d 6172 6769  elf.handle_margi
+00037dd0: 6e5f 6d6f 6465 5f61 6e64 5f70 6172 616d  n_mode_and_param
+00037de0: 7328 2763 616e 6365 6c4f 7264 6572 272c  s('cancelOrder',
+00037df0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+00037e00: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+00037e10: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
+00037e20: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
+00037e30: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00037e40: 6f72 6465 7249 6427 3a20 6964 2c0a 2020  orderId': id,.  
+00037e50: 2020 2020 2020 2020 2020 2320 276f 7269            # 'ori
+00037e60: 6743 6c69 656e 744f 7264 6572 4964 273a  gClientOrderId':
+00037e70: 2069 642c 0a20 2020 2020 2020 207d 0a20   id,.        }. 
+00037e80: 2020 2020 2020 2063 6c69 656e 744f 7264         clientOrd
+00037e90: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
+00037ea0: 5f76 616c 7565 5f32 2870 6172 616d 732c  _value_2(params,
+00037eb0: 2027 6f72 6967 436c 6965 6e74 4f72 6465   'origClientOrde
+00037ec0: 7249 6427 2c20 2763 6c69 656e 744f 7264  rId', 'clientOrd
+00037ed0: 6572 4964 2729 0a20 2020 2020 2020 2069  erId').        i
+00037ee0: 6620 636c 6965 6e74 4f72 6465 7249 6420  f clientOrderId 
+00037ef0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00037f00: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
+00037f10: 6574 5b27 6f70 7469 6f6e 275d 3a0a 2020  et['option']:.  
+00037f20: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00037f30: 7175 6573 745b 2763 6c69 656e 744f 7264  quest['clientOrd
+00037f40: 6572 4964 275d 203d 2063 6c69 656e 744f  erId'] = clientO
+00037f50: 7264 6572 4964 0a20 2020 2020 2020 2020  rderId.         
+00037f60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00037f70: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00037f80: 5b27 6f72 6967 436c 6965 6e74 4f72 6465  ['origClientOrde
+00037f90: 7249 6427 5d20 3d20 636c 6965 6e74 4f72  rId'] = clientOr
+00037fa0: 6465 7249 640a 2020 2020 2020 2020 656c  derId.        el
+00037fb0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00037fc0: 7265 7175 6573 745b 276f 7264 6572 4964  request['orderId
+00037fd0: 275d 203d 2069 640a 2020 2020 2020 2020  '] = id.        
+00037fe0: 6d65 7468 6f64 203d 2027 7072 6976 6174  method = 'privat
+00037ff0: 6544 656c 6574 654f 7264 6572 270a 2020  eDeleteOrder'.  
+00038000: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+00038010: 276f 7074 696f 6e27 5d3a 0a20 2020 2020  'option']:.     
+00038020: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00038030: 2765 6170 6950 7269 7661 7465 4465 6c65  'eapiPrivateDele
+00038040: 7465 4f72 6465 7227 0a20 2020 2020 2020  teOrder'.       
+00038050: 2065 6c69 6620 6d61 726b 6574 5b27 6c69   elif market['li
+00038060: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
+00038070: 2020 2020 6d65 7468 6f64 203d 2027 6661      method = 'fa
+00038080: 7069 5072 6976 6174 6544 656c 6574 654f  piPrivateDeleteO
+00038090: 7264 6572 270a 2020 2020 2020 2020 656c  rder'.        el
+000380a0: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+000380b0: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+000380c0: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
+000380d0: 5072 6976 6174 6544 656c 6574 654f 7264  PrivateDeleteOrd
+000380e0: 6572 270a 2020 2020 2020 2020 656c 6966  er'.        elif
+000380f0: 2074 7970 6520 3d3d 2027 6d61 7267 696e   type == 'margin
+00038100: 2720 6f72 206d 6172 6769 6e4d 6f64 6520  ' or marginMode 
+00038110: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00038120: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00038130: 3d20 2773 6170 6944 656c 6574 654d 6172  = 'sapiDeleteMar
+00038140: 6769 6e4f 7264 6572 270a 2020 2020 2020  ginOrder'.      
+00038150: 2020 2020 2020 6966 206d 6172 6769 6e4d        if marginM
+00038160: 6f64 6520 3d3d 2027 6973 6f6c 6174 6564  ode == 'isolated
+00038170: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00038180: 2020 2072 6571 7565 7374 5b27 6973 4973     request['isIs
+00038190: 6f6c 6174 6564 275d 203d 2054 7275 650a  olated'] = True.
+000381a0: 2020 2020 2020 2020 7265 7175 6573 7450          requestP
+000381b0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+000381c0: 7428 7175 6572 792c 205b 2774 7970 6527  t(query, ['type'
+000381d0: 2c20 276f 7269 6743 6c69 656e 744f 7264  , 'origClientOrd
+000381e0: 6572 4964 272c 2027 636c 6965 6e74 4f72  erId', 'clientOr
+000381f0: 6465 7249 6427 5d29 0a20 2020 2020 2020  derId']).       
+00038200: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+00038210: 7420 6765 7461 7474 7228 7365 6c66 2c20  t getattr(self, 
+00038220: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+00038230: 656e 6428 7265 7175 6573 742c 2072 6571  end(request, req
+00038240: 7565 7374 5061 7261 6d73 2929 0a20 2020  uestParams)).   
+00038250: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00038260: 2e70 6172 7365 5f6f 7264 6572 2872 6573  .parse_order(res
+00038270: 706f 6e73 652c 206d 6172 6b65 7429 0a0a  ponse, market)..
+00038280: 2020 2020 6173 796e 6320 6465 6620 6361      async def ca
+00038290: 6e63 656c 5f61 6c6c 5f6f 7264 6572 7328  ncel_all_orders(
+000382a0: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
+000382b0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+000382c0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+000382d0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000382e0: 2020 2020 6361 6e63 656c 2061 6c6c 206f      cancel all o
+000382f0: 7065 6e20 6f72 6465 7273 2069 6e20 6120  pen orders in a 
+00038300: 6d61 726b 6574 0a20 2020 2020 2020 203a  market.        :
+00038310: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
+00038320: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+00038330: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+00038340: 6172 6b65 7420 746f 2063 616e 6365 6c20  arket to cancel 
+00038350: 6f72 6465 7273 2069 6e0a 2020 2020 2020  orders in.      
+00038360: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+00038370: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+00038380: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+00038390: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
+000383a0: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+000383b0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
+000383c0: 6f6e 6520 7061 7261 6d73 5b27 6d61 7267  one params['marg
+000383d0: 696e 4d6f 6465 275d 3a20 2763 726f 7373  inMode']: 'cross
+000383e0: 2720 6f72 2027 6973 6f6c 6174 6564 272c  ' or 'isolated',
+000383f0: 2066 6f72 2073 706f 7420 6d61 7267 696e   for spot margin
+00038400: 2074 7261 6469 6e67 0a20 2020 2020 2020   trading.       
+00038410: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
+00038420: 3a20 6120 6c69 7374 206f 6620 606f 7264  : a list of `ord
+00038430: 6572 2073 7472 7563 7475 7265 7320 3c68  er structures <h
+00038440: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00038450: 2e63 6f6d 2f23 2f3f 6964 3d6f 7264 6572  .com/#/?id=order
+00038460: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+00038470: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00038480: 2073 656c 662e 6368 6563 6b5f 7265 7175   self.check_requ
+00038490: 6972 6564 5f73 796d 626f 6c28 2763 616e  ired_symbol('can
+000384a0: 6365 6c41 6c6c 4f72 6465 7273 272c 2073  celAllOrders', s
+000384b0: 796d 626f 6c29 0a20 2020 2020 2020 2061  ymbol).        a
+000384c0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
+000384d0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+000384e0: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
+000384f0: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
+00038500: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00038510: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
+00038520: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
+00038530: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
+00038540: 2020 2020 2020 2020 7479 7065 203d 2073          type = s
+00038550: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00038560: 7061 7261 6d73 2c20 2774 7970 6527 2c20  params, 'type', 
+00038570: 6d61 726b 6574 5b27 7479 7065 275d 290a  market['type']).
+00038580: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+00038590: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+000385a0: 732c 205b 2774 7970 6527 5d29 0a20 2020  s, ['type']).   
+000385b0: 2020 2020 206d 6172 6769 6e4d 6f64 652c       marginMode,
+000385c0: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
+000385d0: 6e64 6c65 5f6d 6172 6769 6e5f 6d6f 6465  ndle_margin_mode
+000385e0: 5f61 6e64 5f70 6172 616d 7328 2763 616e  _and_params('can
+000385f0: 6365 6c41 6c6c 4f72 6465 7273 272c 2070  celAllOrders', p
+00038600: 6172 616d 7329 0a20 2020 2020 2020 206d  arams).        m
+00038610: 6574 686f 6420 3d20 2770 7269 7661 7465  ethod = 'private
+00038620: 4465 6c65 7465 4f70 656e 4f72 6465 7273  DeleteOpenOrders
+00038630: 270a 2020 2020 2020 2020 6966 206d 6172  '.        if mar
+00038640: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
+00038650: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+00038660: 6420 3d20 2765 6170 6950 7269 7661 7465  d = 'eapiPrivate
+00038670: 4465 6c65 7465 416c 6c4f 7065 6e4f 7264  DeleteAllOpenOrd
+00038680: 6572 7327 0a20 2020 2020 2020 2065 6c69  ers'.        eli
+00038690: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
+000386a0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+000386b0: 6d65 7468 6f64 203d 2027 6661 7069 5072  method = 'fapiPr
+000386c0: 6976 6174 6544 656c 6574 6541 6c6c 4f70  ivateDeleteAllOp
+000386d0: 656e 4f72 6465 7273 270a 2020 2020 2020  enOrders'.      
+000386e0: 2020 656c 6966 206d 6172 6b65 745b 2769    elif market['i
+000386f0: 6e76 6572 7365 275d 3a0a 2020 2020 2020  nverse']:.      
+00038700: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+00038710: 6461 7069 5072 6976 6174 6544 656c 6574  dapiPrivateDelet
+00038720: 6541 6c6c 4f70 656e 4f72 6465 7273 270a  eAllOpenOrders'.
+00038730: 2020 2020 2020 2020 656c 6966 2028 7479          elif (ty
+00038740: 7065 203d 3d20 276d 6172 6769 6e27 2920  pe == 'margin') 
+00038750: 6f72 2028 6d61 7267 696e 4d6f 6465 2069  or (marginMode i
+00038760: 7320 6e6f 7420 4e6f 6e65 293a 0a20 2020  s not None):.   
+00038770: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00038780: 3d20 2773 6170 6944 656c 6574 654d 6172  = 'sapiDeleteMar
+00038790: 6769 6e4f 7065 6e4f 7264 6572 7327 0a20  ginOpenOrders'. 
+000387a0: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
+000387b0: 7267 696e 4d6f 6465 203d 3d20 2769 736f  rginMode == 'iso
+000387c0: 6c61 7465 6427 3a0a 2020 2020 2020 2020  lated':.        
+000387d0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+000387e0: 2769 7349 736f 6c61 7465 6427 5d20 3d20  'isIsolated'] = 
+000387f0: 5472 7565 0a20 2020 2020 2020 2072 6573  True.        res
+00038800: 706f 6e73 6520 3d20 6177 6169 7420 6765  ponse = await ge
+00038810: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
+00038820: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
+00038830: 7265 7175 6573 742c 2071 7565 7279 2929  request, query))
+00038840: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00038850: 7374 616e 6365 2872 6573 706f 6e73 652c  stance(response,
+00038860: 206c 6973 7429 3a0a 2020 2020 2020 2020   list):.        
+00038870: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00038880: 7061 7273 655f 6f72 6465 7273 2872 6573  parse_orders(res
+00038890: 706f 6e73 652c 206d 6172 6b65 7429 0a20  ponse, market). 
+000388a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000388b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000388c0: 7265 7370 6f6e 7365 0a0a 2020 2020 6173  response..    as
+000388d0: 796e 6320 6465 6620 6665 7463 685f 6f72  ync def fetch_or
+000388e0: 6465 725f 7472 6164 6573 2873 656c 662c  der_trades(self,
+000388f0: 2069 643a 2073 7472 2c20 7379 6d62 6f6c   id: str, symbol
+00038900: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00038910: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
+00038920: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+00038930: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
+00038940: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00038950: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00038960: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00038970: 2020 6665 7463 6820 616c 6c20 7468 6520    fetch all the 
+00038980: 7472 6164 6573 206d 6164 6520 6672 6f6d  trades made from
+00038990: 2061 2073 696e 676c 6520 6f72 6465 720a   a single order.
+000389a0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+000389b0: 7472 2069 643a 206f 7264 6572 2069 640a  tr id: order id.
+000389c0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+000389d0: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
+000389e0: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
+000389f0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00038a00: 696e 747c 4e6f 6e65 2073 696e 6365 3a20  int|None since: 
+00038a10: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
+00038a20: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
+00038a30: 2074 7261 6465 7320 666f 720a 2020 2020   trades for.    
+00038a40: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00038a50: 6f6e 6520 6c69 6d69 743a 2074 6865 206d  one limit: the m
+00038a60: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
+00038a70: 2074 7261 6465 7320 746f 2072 6574 7269   trades to retri
+00038a80: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
+00038a90: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+00038aa0: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00038ab0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00038ac0: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00038ad0: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+00038ae0: 6574 7572 6e73 205b 6469 6374 5d3a 2061  eturns [dict]: a
+00038af0: 206c 6973 7420 6f66 2060 7472 6164 6520   list of `trade 
+00038b00: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
+00038b10: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+00038b20: 6d2f 232f 3f69 643d 7472 6164 652d 7374  m/#/?id=trade-st
+00038b30: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+00038b40: 2020 2222 220a 2020 2020 2020 2020 6966    """.        if
+00038b50: 2073 796d 626f 6c20 6973 204e 6f6e 653a   symbol is None:
+00038b60: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00038b70: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
+00038b80: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
+00038b90: 2066 6574 6368 4f72 6465 7254 7261 6465   fetchOrderTrade
+00038ba0: 7328 2920 7265 7175 6972 6573 2061 2073  s() requires a s
+00038bb0: 796d 626f 6c20 6172 6775 6d65 6e74 2729  ymbol argument')
+00038bc0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+00038bd0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+00038be0: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+00038bf0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+00038c00: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+00038c10: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
+00038c20: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
+00038c30: 2774 7970 6527 2c20 6d61 726b 6574 5b27  'type', market['
+00038c40: 7479 7065 275d 290a 2020 2020 2020 2020  type']).        
+00038c50: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+00038c60: 6974 2870 6172 616d 732c 2027 7479 7065  it(params, 'type
+00038c70: 2729 0a20 2020 2020 2020 2069 6620 7479  ').        if ty
+00038c80: 7065 2021 3d20 2773 706f 7427 3a0a 2020  pe != 'spot':.  
+00038c90: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00038ca0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
+00038cb0: 662e 6964 202b 2027 2066 6574 6368 4f72  f.id + ' fetchOr
+00038cc0: 6465 7254 7261 6465 7328 2920 7375 7070  derTrades() supp
+00038cd0: 6f72 7473 2073 706f 7420 6d61 726b 6574  orts spot market
+00038ce0: 7320 6f6e 6c79 2729 0a20 2020 2020 2020  s only').       
+00038cf0: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+00038d00: 2020 2020 2020 2020 2027 6f72 6465 7249           'orderI
+00038d10: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
+00038d20: 7d0a 2020 2020 2020 2020 7265 7475 726e  }.        return
+00038d30: 2061 7761 6974 2073 656c 662e 6665 7463   await self.fetc
+00038d40: 685f 6d79 5f74 7261 6465 7328 7379 6d62  h_my_trades(symb
+00038d50: 6f6c 2c20 7369 6e63 652c 206c 696d 6974  ol, since, limit
+00038d60: 2c20 7365 6c66 2e65 7874 656e 6428 7265  , self.extend(re
+00038d70: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00038d80: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
+00038d90: 6574 6368 5f6d 795f 7472 6164 6573 2873  etch_my_trades(s
+00038da0: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+00038db0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00038dc0: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+00038dd0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+00038de0: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+00038df0: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+00038e00: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00038e10: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00038e20: 6368 2061 6c6c 2074 7261 6465 7320 6d61  ch all trades ma
+00038e30: 6465 2062 7920 7468 6520 7573 6572 0a20  de by the user. 
+00038e40: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+00038e50: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
+00038e60: 6420 6d61 726b 6574 2073 796d 626f 6c0a  d market symbol.
+00038e70: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00038e80: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
+00038e90: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
+00038ea0: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+00038eb0: 7472 6164 6573 2066 6f72 0a20 2020 2020  trades for.     
+00038ec0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+00038ed0: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
+00038ee0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
+00038ef0: 7472 6164 6573 2073 7472 7563 7475 7265  trades structure
+00038f00: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
+00038f10: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00038f20: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+00038f30: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00038f40: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
+00038f50: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
+00038f60: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+00038f70: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
+00038f80: 6f66 2060 7472 6164 6520 7374 7275 6374  of `trade struct
+00038f90: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
+00038fa0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+00038fb0: 643d 7472 6164 652d 7374 7275 6374 7572  d=trade-structur
+00038fc0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00038fd0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00038fe0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00038ff0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+00039000: 7420 3d20 7b7d 0a20 2020 2020 2020 206d  t = {}.        m
+00039010: 6172 6b65 7420 3d20 4e6f 6e65 0a20 2020  arket = None.   
+00039020: 2020 2020 2074 7970 6520 3d20 4e6f 6e65       type = None
+00039030: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
+00039040: 3d20 4e6f 6e65 0a20 2020 2020 2020 206d  = None.        m
+00039050: 6172 6769 6e4d 6f64 6520 3d20 4e6f 6e65  arginMode = None
+00039060: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
+00039070: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
+00039080: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+00039090: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+000390a0: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+000390b0: 2020 2020 2072 6571 7565 7374 5b27 7379       request['sy
+000390c0: 6d62 6f6c 275d 203d 206d 6172 6b65 745b  mbol'] = market[
+000390d0: 2769 6427 5d0a 2020 2020 2020 2020 7479  'id'].        ty
+000390e0: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
+000390f0: 662e 6861 6e64 6c65 5f6d 6172 6b65 745f  f.handle_market_
+00039100: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
+00039110: 2766 6574 6368 4d79 5472 6164 6573 272c  'fetchMyTrades',
+00039120: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
+00039130: 0a20 2020 2020 2020 2069 6620 7479 7065  .        if type
+00039140: 203d 3d20 276f 7074 696f 6e27 3a0a 2020   == 'option':.  
+00039150: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+00039160: 203d 2027 6561 7069 5072 6976 6174 6547   = 'eapiPrivateG
+00039170: 6574 5573 6572 5472 6164 6573 270a 2020  etUserTrades'.  
+00039180: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00039190: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
+000391a0: 636b 5f72 6571 7569 7265 645f 7379 6d62  ck_required_symb
+000391b0: 6f6c 2827 6665 7463 684d 7954 7261 6465  ol('fetchMyTrade
+000391c0: 7327 2c20 7379 6d62 6f6c 290a 2020 2020  s', symbol).    
+000391d0: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
+000391e0: 6465 2c20 7061 7261 6d73 203d 2073 656c  de, params = sel
+000391f0: 662e 6861 6e64 6c65 5f6d 6172 6769 6e5f  f.handle_margin_
+00039200: 6d6f 6465 5f61 6e64 5f70 6172 616d 7328  mode_and_params(
+00039210: 2766 6574 6368 4d79 5472 6164 6573 272c  'fetchMyTrades',
+00039220: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+00039230: 2020 2020 2069 6620 7479 7065 203d 3d20       if type == 
+00039240: 2773 706f 7427 206f 7220 7479 7065 203d  'spot' or type =
+00039250: 3d20 276d 6172 6769 6e27 3a0a 2020 2020  = 'margin':.    
+00039260: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00039270: 6f64 203d 2027 7072 6976 6174 6547 6574  od = 'privateGet
+00039280: 4d79 5472 6164 6573 270a 2020 2020 2020  MyTrades'.      
+00039290: 2020 2020 2020 2020 2020 6966 2028 7479            if (ty
+000392a0: 7065 203d 3d20 276d 6172 6769 6e27 2920  pe == 'margin') 
+000392b0: 6f72 2028 6d61 7267 696e 4d6f 6465 2069  or (marginMode i
+000392c0: 7320 6e6f 7420 4e6f 6e65 293a 0a20 2020  s not None):.   
+000392d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000392e0: 206d 6574 686f 6420 3d20 2773 6170 6947   method = 'sapiG
+000392f0: 6574 4d61 7267 696e 4d79 5472 6164 6573  etMarginMyTrades
+00039300: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+00039310: 2020 2020 2020 6966 206d 6172 6769 6e4d        if marginM
+00039320: 6f64 6520 3d3d 2027 6973 6f6c 6174 6564  ode == 'isolated
+00039330: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00039340: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00039350: 7374 5b27 6973 4973 6f6c 6174 6564 275d  st['isIsolated']
+00039360: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00039370: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
+00039380: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+00039390: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+000393a0: 6420 3d20 2766 6170 6950 7269 7661 7465  d = 'fapiPrivate
+000393b0: 4765 7455 7365 7254 7261 6465 7327 0a20  GetUserTrades'. 
+000393c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000393d0: 6d61 726b 6574 5b27 696e 7665 7273 6527  market['inverse'
+000393e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000393f0: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
+00039400: 6950 7269 7661 7465 4765 7455 7365 7254  iPrivateGetUserT
+00039410: 7261 6465 7327 0a20 2020 2020 2020 2065  rades'.        e
+00039420: 6e64 5469 6d65 203d 2073 656c 662e 7361  ndTime = self.sa
+00039430: 6665 5f69 6e74 6567 6572 5f32 2870 6172  fe_integer_2(par
+00039440: 616d 732c 2027 756e 7469 6c27 2c20 2765  ams, 'until', 'e
+00039450: 6e64 5469 6d65 2729 0a20 2020 2020 2020  ndTime').       
+00039460: 2069 6620 7369 6e63 6520 6973 206e 6f74   if since is not
+00039470: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00039480: 2020 2073 7461 7274 5469 6d65 203d 2073     startTime = s
+00039490: 696e 6365 0a20 2020 2020 2020 2020 2020  ince.           
+000394a0: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
+000394b0: 696d 6527 5d20 3d20 7374 6172 7454 696d  ime'] = startTim
+000394c0: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+000394d0: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+000394e0: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+000394f0: 7069 646f 6373 2f66 7574 7572 6573 2f65  pidocs/futures/e
+00039500: 6e2f 2361 6363 6f75 6e74 2d74 7261 6465  n/#account-trade
+00039510: 2d6c 6973 742d 7573 6572 5f64 6174 610a  -list-user_data.
+00039520: 2020 2020 2020 2020 2020 2020 2320 4966              # If
+00039530: 2073 7461 7274 5469 6d65 2061 6e64 2065   startTime and e
+00039540: 6e64 5469 6d65 2061 7265 2062 6f74 6820  ndTime are both 
+00039550: 6e6f 7420 7365 6e74 2c20 7468 656e 2074  not sent, then t
+00039560: 6865 206c 6173 7420 3720 6461 7973 2720  he last 7 days' 
+00039570: 6461 7461 2077 696c 6c20 6265 2072 6574  data will be ret
+00039580: 7572 6e65 642e 0a20 2020 2020 2020 2020  urned..         
+00039590: 2020 2023 2054 6865 2074 696d 6520 6265     # The time be
+000395a0: 7477 6565 6e20 7374 6172 7454 696d 6520  tween startTime 
+000395b0: 616e 6420 656e 6454 696d 6520 6361 6e6e  and endTime cann
+000395c0: 6f74 2062 6520 6c6f 6e67 6572 2074 6861  ot be longer tha
+000395d0: 6e20 3720 6461 7973 2e0a 2020 2020 2020  n 7 days..      
+000395e0: 2020 2020 2020 2320 5468 6520 7061 7261        # The para
+000395f0: 6d65 7465 7220 6672 6f6d 4964 2063 616e  meter fromId can
+00039600: 6e6f 7420 6265 2073 656e 7420 7769 7468  not be sent with
+00039610: 2073 7461 7274 5469 6d65 206f 7220 656e   startTime or en
+00039620: 6454 696d 652e 0a20 2020 2020 2020 2020  dTime..         
+00039630: 2020 2063 7572 7265 6e74 5469 6d65 7374     currentTimest
+00039640: 616d 7020 3d20 7365 6c66 2e6d 696c 6c69  amp = self.milli
+00039650: 7365 636f 6e64 7328 290a 2020 2020 2020  seconds().      
+00039660: 2020 2020 2020 6f6e 6557 6565 6b20 3d20        oneWeek = 
+00039670: 3720 2a20 3234 202a 2036 3020 2a20 3630  7 * 24 * 60 * 60
+00039680: 202a 2031 3030 300a 2020 2020 2020 2020   * 1000.        
+00039690: 2020 2020 6966 2028 6375 7272 656e 7454      if (currentT
+000396a0: 696d 6573 7461 6d70 202d 2073 7461 7274  imestamp - start
+000396b0: 5469 6d65 2920 3e3d 206f 6e65 5765 656b  Time) >= oneWeek
+000396c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000396d0: 2020 6966 2028 656e 6454 696d 6520 6973    if (endTime is
+000396e0: 204e 6f6e 6529 2061 6e64 206d 6172 6b65   None) and marke
+000396f0: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
+00039700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039710: 2065 6e64 5469 6d65 203d 2073 656c 662e   endTime = self.
+00039720: 7375 6d28 7374 6172 7454 696d 652c 206f  sum(startTime, o
+00039730: 6e65 5765 656b 290a 2020 2020 2020 2020  neWeek).        
+00039740: 2020 2020 2020 2020 2020 2020 656e 6454              endT
+00039750: 696d 6520 3d20 6d69 6e28 656e 6454 696d  ime = min(endTim
+00039760: 652c 2063 7572 7265 6e74 5469 6d65 7374  e, currentTimest
+00039770: 616d 7029 0a20 2020 2020 2020 2069 6620  amp).        if 
+00039780: 656e 6454 696d 6520 6973 206e 6f74 204e  endTime is not N
+00039790: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000397a0: 2072 6571 7565 7374 5b27 656e 6454 696d   request['endTim
+000397b0: 6527 5d20 3d20 656e 6454 696d 650a 2020  e'] = endTime.  
+000397c0: 2020 2020 2020 2020 2020 7061 7261 6d73            params
+000397d0: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
+000397e0: 616d 732c 205b 2765 6e64 5469 6d65 272c  ams, ['endTime',
+000397f0: 2027 756e 7469 6c27 5d29 0a20 2020 2020   'until']).     
+00039800: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+00039810: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00039820: 2020 2020 2069 6620 2874 7970 6520 3d3d       if (type ==
+00039830: 2027 6f70 7469 6f6e 2729 206f 7220 6d61   'option') or ma
+00039840: 726b 6574 5b27 636f 6e74 7261 6374 275d  rket['contract']
+00039850: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00039860: 2020 6c69 6d69 7420 3d20 6d69 6e28 6c69    limit = min(li
+00039870: 6d69 742c 2031 3030 3029 2020 2320 6162  mit, 1000)  # ab
+00039880: 6f76 6520 3130 3030 2c20 7265 7475 726e  ove 1000, return
+00039890: 7320 6572 726f 720a 2020 2020 2020 2020  s error.        
+000398a0: 2020 2020 7265 7175 6573 745b 276c 696d      request['lim
+000398b0: 6974 275d 203d 206c 696d 6974 0a20 2020  it'] = limit.   
+000398c0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+000398d0: 6177 6169 7420 6765 7461 7474 7228 7365  await getattr(se
+000398e0: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
+000398f0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+00039900: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+00039910: 2020 230a 2020 2020 2020 2020 2320 7370    #.        # sp
+00039920: 6f74 2074 7261 6465 0a20 2020 2020 2020  ot trade.       
+00039930: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00039940: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+00039950: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00039960: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
+00039970: 6d62 6f6c 223a 2022 424e 4242 5443 222c  mbol": "BNBBTC",
+00039980: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039990: 2020 2020 2020 2022 6964 223a 2032 3834         "id": 284
+000399a0: 3537 2c0a 2020 2020 2020 2020 2320 2020  57,.        #   
+000399b0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+000399c0: 4964 223a 2031 3030 3233 342c 0a20 2020  Id": 100234,.   
+000399d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000399e0: 2020 2022 7072 6963 6522 3a20 2234 2e30     "price": "4.0
+000399f0: 3030 3030 3130 3022 2c0a 2020 2020 2020  0000100",.      
+00039a00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039a10: 2271 7479 223a 2022 3132 2e30 3030 3030  "qty": "12.00000
+00039a20: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00039a30: 2020 2020 2020 2020 2020 2020 2263 6f6d              "com
+00039a40: 6d69 7373 696f 6e22 3a20 2231 302e 3130  mission": "10.10
+00039a50: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00039a60: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039a70: 636f 6d6d 6973 7369 6f6e 4173 7365 7422  commissionAsset"
+00039a80: 3a20 2242 4e42 222c 0a20 2020 2020 2020  : "BNB",.       
+00039a90: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039aa0: 7469 6d65 223a 2031 3439 3938 3635 3534  time": 149986554
+00039ab0: 3935 3930 2c0a 2020 2020 2020 2020 2320  9590,.        # 
+00039ac0: 2020 2020 2020 2020 2020 2020 2269 7342              "isB
+00039ad0: 7579 6572 223a 2054 7275 652c 0a20 2020  uyer": True,.   
+00039ae0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00039af0: 2020 2022 6973 4d61 6b65 7222 3a20 4661     "isMaker": Fa
+00039b00: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+00039b10: 2020 2020 2020 2020 2020 2022 6973 4265             "isBe
+00039b20: 7374 4d61 7463 6822 3a20 5472 7565 2c0a  stMatch": True,.
+00039b30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00039b40: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00039b50: 2020 5d0a 2020 2020 2020 2020 230a 2020    ].        #.  
+00039b60: 2020 2020 2020 2320 6675 7475 7265 7320        # futures 
+00039b70: 7472 6164 650a 2020 2020 2020 2020 230a  trade.        #.
+00039b80: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
+00039b90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00039ba0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00039bb0: 2020 2020 2020 2020 2020 2261 6363 6f75            "accou
+00039bc0: 6e74 4964 223a 2032 302c 0a20 2020 2020  ntId": 20,.     
+00039bd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00039be0: 2022 6275 7965 7222 3a20 4661 6c73 652c   "buyer": False,
+00039bf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039c00: 2020 2020 2020 2022 636f 6d6d 6973 7369         "commissi
+00039c10: 6f6e 223a 2022 2d30 2e30 3738 3139 3031  on": "-0.0781901
+00039c20: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00039c30: 2020 2020 2020 2020 2020 2263 6f6d 6d69            "commi
+00039c40: 7373 696f 6e41 7373 6574 223a 2022 5553  ssionAsset": "US
+00039c50: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+00039c60: 2020 2020 2020 2020 2020 2022 636f 756e             "coun
+00039c70: 7465 7250 6172 7479 4964 223a 2036 3533  terPartyId": 653
+00039c80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00039c90: 2020 2020 2020 2020 2269 6422 3a20 3639          "id": 69
+00039ca0: 3837 3539 2c0a 2020 2020 2020 2020 2320  8759,.        # 
+00039cb0: 2020 2020 2020 2020 2020 2020 226d 616b              "mak
+00039cc0: 6572 223a 2046 616c 7365 2c0a 2020 2020  er": False,.    
+00039cd0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00039ce0: 2020 226f 7264 6572 4964 223a 2032 3538    "orderId": 258
+00039cf0: 3531 3831 332c 0a20 2020 2020 2020 2023  51813,.        #
+00039d00: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
+00039d10: 6963 6522 3a20 2237 3831 392e 3031 222c  ice": "7819.01",
+00039d20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039d30: 2020 2020 2020 2022 7174 7922 3a20 2230         "qty": "0
+00039d40: 2e30 3032 222c 0a20 2020 2020 2020 2023  .002",.        #
+00039d50: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
+00039d60: 6f74 6551 7479 223a 2022 302e 3031 3536  oteQty": "0.0156
+00039d70: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
+00039d80: 2020 2020 2020 2020 2020 2272 6561 6c69            "reali
+00039d90: 7a65 6450 6e6c 223a 2022 2d30 2e39 3135  zedPnl": "-0.915
+00039da0: 3339 3939 3922 2c0a 2020 2020 2020 2020  39999",.        
+00039db0: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
+00039dc0: 6964 6522 3a20 2253 454c 4c22 2c0a 2020  ide": "SELL",.  
+00039dd0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00039de0: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+00039df0: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
+00039e00: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039e10: 7469 6d65 223a 2031 3536 3935 3134 3937  time": 156951497
+00039e20: 3830 3230 0a20 2020 2020 2020 2023 2020  8020.        #  
+00039e30: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00039e40: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
+00039e50: 2023 0a20 2020 2020 2020 2023 206f 7074   #.        # opt
+00039e60: 696f 6e73 2865 6170 6929 0a20 2020 2020  ions(eapi).     
+00039e70: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00039e80: 2020 205b 0a20 2020 2020 2020 2023 2020     [.        #  
+00039e90: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00039ea0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039eb0: 6964 223a 2031 3132 3538 3939 3930 3638  id": 11258999068
+00039ec0: 3434 3232 3630 3132 2c0a 2020 2020 2020  44226012,.      
+00039ed0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039ee0: 2274 7261 6465 4964 223a 2037 332c 0a20  "tradeId": 73,. 
+00039ef0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00039f00: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
+00039f10: 3436 3338 3736 3131 3030 3834 3330 3430  4638761100843040
+00039f20: 3736 382c 0a20 2020 2020 2020 2023 2020  768,.        #  
+00039f30: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+00039f40: 6f6c 223a 2022 4554 482d 3233 3032 3131  ol": "ETH-230211
+00039f50: 2d31 3530 302d 4322 2c0a 2020 2020 2020  -1500-C",.      
+00039f60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039f70: 2270 7269 6365 223a 2022 3138 2e37 3030  "price": "18.700
+00039f80: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00039f90: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
+00039fa0: 7561 6e74 6974 7922 3a20 222d 302e 3537  uantity": "-0.57
+00039fb0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00039fc0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039fd0: 6665 6522 3a20 2230 2e31 3733 3035 3839  fee": "0.1730589
+00039fe0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00039ff0: 2020 2020 2020 2020 2020 2272 6561 6c69            "reali
+0003a000: 7a65 6450 726f 6669 7422 3a20 222d 332e  zedProfit": "-3.
+0003a010: 3533 3430 3030 3030 222c 0a20 2020 2020  53400000",.     
+0003a020: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003a030: 2022 7369 6465 223a 2022 5345 4c4c 222c   "side": "SELL",
+0003a040: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003a050: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
+0003a060: 4c49 4d49 5422 2c0a 2020 2020 2020 2020  LIMIT",.        
+0003a070: 2320 2020 2020 2020 2020 2020 2020 2276  #             "v
+0003a080: 6f6c 6174 696c 6974 7922 3a20 2230 2e33  olatility": "0.3
+0003a090: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+0003a0a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003a0b0: 226c 6971 7569 6469 7479 223a 2022 4d41  "liquidity": "MA
+0003a0c0: 4b45 5222 2c0a 2020 2020 2020 2020 2320  KER",.        # 
+0003a0d0: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
+0003a0e0: 6522 3a20 3136 3736 3038 3532 3136 3834  e": 167608521684
+0003a0f0: 352c 0a20 2020 2020 2020 2023 2020 2020  5,.        #    
+0003a100: 2020 2020 2020 2020 2022 7072 6963 6553           "priceS
+0003a110: 6361 6c65 223a 2031 2c0a 2020 2020 2020  cale": 1,.      
+0003a120: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003a130: 2271 7561 6e74 6974 7953 6361 6c65 223a  "quantityScale":
+0003a140: 2032 2c0a 2020 2020 2020 2020 2320 2020   2,.        #   
+0003a150: 2020 2020 2020 2020 2020 226f 7074 696f            "optio
+0003a160: 6e53 6964 6522 3a20 2243 414c 4c22 2c0a  nSide": "CALL",.
+0003a170: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003a180: 2020 2020 2020 2271 756f 7465 4173 7365        "quoteAsse
+0003a190: 7422 3a20 2255 5344 5422 0a20 2020 2020  t": "USDT".     
+0003a1a0: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
+0003a1b0: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
+0003a1c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0003a1d0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+0003a1e0: 7365 5f74 7261 6465 7328 7265 7370 6f6e  se_trades(respon
+0003a1f0: 7365 2c20 6d61 726b 6574 2c20 7369 6e63  se, market, sinc
+0003a200: 652c 206c 696d 6974 290a 0a20 2020 2061  e, limit)..    a
+0003a210: 7379 6e63 2064 6566 2066 6574 6368 5f6d  sync def fetch_m
+0003a220: 795f 6475 7374 5f74 7261 6465 7328 7365  y_dust_trades(se
+0003a230: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
+0003a240: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+0003a250: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
+0003a260: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
+0003a270: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
+0003a280: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
+0003a290: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0003a2a0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+0003a2b0: 6820 616c 6c20 6475 7374 2074 7261 6465  h all dust trade
+0003a2c0: 7320 6d61 6465 2062 7920 7468 6520 7573  s made by the us
+0003a2d0: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
+0003a2e0: 6d20 7374 727c 4e6f 6e65 2073 796d 626f  m str|None symbo
+0003a2f0: 6c3a 206e 6f74 2075 7365 6420 6279 2062  l: not used by b
+0003a300: 696e 616e 6365 2066 6574 6368 4d79 4475  inance fetchMyDu
+0003a310: 7374 5472 6164 6573 2829 0a20 2020 2020  stTrades().     
+0003a320: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+0003a330: 6e65 2073 696e 6365 3a20 7468 6520 6561  ne since: the ea
+0003a340: 726c 6965 7374 2074 696d 6520 696e 206d  rliest time in m
+0003a350: 7320 746f 2066 6574 6368 206d 7920 6475  s to fetch my du
+0003a360: 7374 2074 7261 6465 7320 666f 720a 2020  st trades for.  
+0003a370: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+0003a380: 7c4e 6f6e 6520 6c69 6d69 743a 2074 6865  |None limit: the
+0003a390: 206d 6178 696d 756d 206e 756d 6265 7220   maximum number 
+0003a3a0: 6f66 2064 7573 7420 7472 6164 6573 2074  of dust trades t
+0003a3b0: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
+0003a3c0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+0003a3d0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+0003a3e0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+0003a3f0: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
+0003a400: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0003a410: 2020 2020 203a 7265 7475 726e 7320 5b64       :returns [d
+0003a420: 6963 745d 3a20 6120 6c69 7374 206f 6620  ict]: a list of 
+0003a430: 6074 7261 6465 2073 7472 7563 7475 7265  `trade structure
+0003a440: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+0003a450: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
+0003a460: 7261 6465 2d73 7472 7563 7475 7265 3e60  rade-structure>`
+0003a470: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0003a480: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0003a490: 2042 696e 616e 6365 2070 726f 7669 6465   Binance provide
+0003a4a0: 7320 616e 206f 7070 6f72 7475 6e69 7479  s an opportunity
+0003a4b0: 2074 6f20 7472 6164 6520 696e 7369 676e   to trade insign
+0003a4c0: 6966 6963 616e 7428 692e 652e 206e 6f6e  ificant(i.e. non
+0003a4d0: 2d74 7261 6461 626c 6520 616e 6420 6e6f  -tradable and no
+0003a4e0: 6e2d 7769 7468 6472 6177 6162 6c65 290a  n-withdrawable).
+0003a4f0: 2020 2020 2020 2020 2320 746f 6b65 6e20          # token 
+0003a500: 6c65 6674 6f76 6572 7328 6f66 2061 6e79  leftovers(of any
+0003a510: 2061 7373 6574 2920 696e 746f 2060 424e   asset) into `BN
+0003a520: 4260 2063 6f69 6e20 7768 6963 6820 696e  B` coin which in
+0003a530: 2074 7572 6e20 6361 6e20 6265 2075 7365   turn can be use
+0003a540: 6420 746f 2070 6179 2074 7261 6469 6e67  d to pay trading
+0003a550: 2066 6565 7320 7769 7468 2069 742e 0a20   fees with it.. 
+0003a560: 2020 2020 2020 2023 2054 6865 2063 6f72         # The cor
+0003a570: 7265 7370 6f6e 6469 6e67 2074 7261 6465  responding trade
+0003a580: 7320 6869 7374 6f72 7920 6973 2063 616c  s history is cal
+0003a590: 6c65 6420 7468 6520 6044 7573 7420 4c6f  led the `Dust Lo
+0003a5a0: 6760 2061 6e64 2063 616e 2062 6520 7265  g` and can be re
+0003a5b0: 7175 6573 7465 6420 7669 6120 7468 6520  quested via the 
+0003a5c0: 666f 6c6c 6f77 696e 6720 656e 642d 706f  following end-po
+0003a5d0: 696e 743a 0a20 2020 2020 2020 2023 2068  int:.        # h
+0003a5e0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+0003a5f0: 6d2f 6269 6e61 6e63 652d 6578 6368 616e  m/binance-exchan
+0003a600: 6765 2f62 696e 616e 6365 2d6f 6666 6963  ge/binance-offic
+0003a610: 6961 6c2d 6170 692d 646f 6373 2f62 6c6f  ial-api-docs/blo
+0003a620: 622f 6d61 7374 6572 2f77 6170 692d 6170  b/master/wapi-ap
+0003a630: 692e 6d64 2364 7573 746c 6f67 2d75 7365  i.md#dustlog-use
+0003a640: 725f 6461 7461 0a20 2020 2020 2020 2023  r_data.        #
+0003a650: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0003a660: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0003a670: 2829 0a20 2020 2020 2020 2072 6571 7565  ().        reque
+0003a680: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
+0003a690: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
+0003a6a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0003a6b0: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
+0003a6c0: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
+0003a6d0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0003a6e0: 7374 5b27 656e 6454 696d 6527 5d20 3d20  st['endTime'] = 
+0003a6f0: 7365 6c66 2e73 756d 2873 696e 6365 2c20  self.sum(since, 
+0003a700: 3737 3736 3030 3030 3030 290a 2020 2020  7776000000).    
+0003a710: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+0003a720: 7761 6974 2073 656c 662e 7361 7069 4765  wait self.sapiGe
+0003a730: 7441 7373 6574 4472 6962 626c 6574 2873  tAssetDribblet(s
+0003a740: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0003a750: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0003a760: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0003a770: 2020 2020 2023 2020 2020 2020 2022 746f       #       "to
+0003a780: 7461 6c22 3a20 2234 222c 0a20 2020 2020  tal": "4",.     
+0003a790: 2020 2023 2020 2020 2020 2022 7573 6572     #       "user
+0003a7a0: 4173 7365 7444 7269 6262 6c65 7473 223a  AssetDribblets":
+0003a7b0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+0003a7c0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0003a7d0: 2020 2020 2020 2020 2020 2022 6f70 6572             "oper
+0003a7e0: 6174 6554 696d 6522 3a20 2231 3632 3735  ateTime": "16275
+0003a7f0: 3735 3733 3130 3030 222c 0a20 2020 2020  75731000",.     
+0003a800: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
+0003a810: 746f 7461 6c53 6572 7669 6365 4368 6172  totalServiceChar
+0003a820: 6765 416d 6f75 6e74 223a 2022 302e 3030  geAmount": "0.00
+0003a830: 3030 3134 3533 222c 0a20 2020 2020 2020  001453",.       
+0003a840: 2023 2020 2020 2020 2020 2020 2022 746f   #           "to
+0003a850: 7461 6c54 7261 6e73 6665 7265 6441 6d6f  talTransferedAmo
+0003a860: 756e 7422 3a20 2230 2e30 3030 3732 3639  unt": "0.0007269
+0003a870: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
+0003a880: 2020 2020 2020 2020 2274 7261 6e73 4964          "transId
+0003a890: 223a 2022 3730 3839 3938 3135 3836 3322  ": "70899815863"
+0003a8a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003a8b0: 2020 2020 2020 2275 7365 7241 7373 6574        "userAsset
+0003a8c0: 4472 6962 626c 6574 4465 7461 696c 7322  DribbletDetails"
+0003a8d0: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+0003a8e0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+0003a8f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003a900: 2020 2020 2266 726f 6d41 7373 6574 223a      "fromAsset":
+0003a910: 2022 4c54 4322 2c0a 2020 2020 2020 2020   "LTC",.        
+0003a920: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003a930: 2261 6d6f 756e 7422 3a20 2230 2e30 3030  "amount": "0.000
+0003a940: 3030 3622 2c0a 2020 2020 2020 2020 2320  006",.        # 
+0003a950: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0003a960: 7261 6e73 6665 7265 6441 6d6f 756e 7422  ransferedAmount"
+0003a970: 3a20 2230 2e30 3030 3030 3236 3722 2c0a  : "0.00000267",.
+0003a980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003a990: 2020 2020 2020 2020 2273 6572 7669 6365          "service
+0003a9a0: 4368 6172 6765 416d 6f75 6e74 223a 2022  ChargeAmount": "
+0003a9b0: 302e 3030 3030 3030 3035 222c 0a20 2020  0.00000005",.   
+0003a9c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003a9d0: 2020 2020 2022 6f70 6572 6174 6554 696d       "operateTim
+0003a9e0: 6522 3a20 2231 3632 3735 3735 3733 3130  e": "16275757310
+0003a9f0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0003aa00: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+0003aa10: 616e 7349 6422 3a20 2237 3038 3939 3831  ansId": "7089981
+0003aa20: 3538 3633 220a 2020 2020 2020 2020 2320  5863".        # 
+0003aa30: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+0003aa40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003aa50: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0003aa60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003aa70: 6672 6f6d 4173 7365 7422 3a20 2247 4250  fromAsset": "GBP
+0003aa80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003aa90: 2020 2020 2020 2020 2020 2022 616d 6f75             "amou
+0003aaa0: 6e74 223a 2022 302e 3135 3934 3931 3537  nt": "0.15949157
+0003aab0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003aac0: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
+0003aad0: 7366 6572 6564 416d 6f75 6e74 223a 2022  sferedAmount": "
+0003aae0: 302e 3030 3037 3234 3236 222c 0a20 2020  0.00072426",.   
+0003aaf0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003ab00: 2020 2020 2022 7365 7276 6963 6543 6861       "serviceCha
+0003ab10: 7267 6541 6d6f 756e 7422 3a20 2230 2e30  rgeAmount": "0.0
+0003ab20: 3030 3031 3434 3822 2c0a 2020 2020 2020  0001448",.      
+0003ab30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003ab40: 2020 226f 7065 7261 7465 5469 6d65 223a    "operateTime":
+0003ab50: 2022 3136 3237 3537 3537 3331 3030 3022   "1627575731000"
+0003ab60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003ab70: 2020 2020 2020 2020 2020 2274 7261 6e73            "trans
+0003ab80: 4964 223a 2022 3730 3839 3938 3135 3836  Id": "7089981586
+0003ab90: 3322 0a20 2020 2020 2020 2023 2020 2020  3".        #    
+0003aba0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0003abb0: 2020 2023 2020 2020 2020 2020 2020 205d     #           ]
+0003abc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003abd0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+0003abe0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+0003abf0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0003ac00: 7265 7375 6c74 7320 3d20 7365 6c66 2e73  results = self.s
+0003ac10: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+0003ac20: 7365 2c20 2775 7365 7241 7373 6574 4472  se, 'userAssetDr
+0003ac30: 6962 626c 6574 7327 2c20 5b5d 290a 2020  ibblets', []).  
+0003ac40: 2020 2020 2020 726f 7773 203d 2073 656c        rows = sel
+0003ac50: 662e 7361 6665 5f69 6e74 6567 6572 2872  f.safe_integer(r
+0003ac60: 6573 706f 6e73 652c 2027 746f 7461 6c27  esponse, 'total'
+0003ac70: 2c20 3029 0a20 2020 2020 2020 2064 6174  , 0).        dat
+0003ac80: 6120 3d20 5b5d 0a20 2020 2020 2020 2066  a = [].        f
+0003ac90: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+0003aca0: 2072 6f77 7329 3a0a 2020 2020 2020 2020   rows):.        
+0003acb0: 2020 2020 6c6f 6773 203d 2073 656c 662e      logs = self.
+0003acc0: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
+0003acd0: 7473 5b69 5d2c 2027 7573 6572 4173 7365  ts[i], 'userAsse
+0003ace0: 7444 7269 6262 6c65 7444 6574 6169 6c73  tDribbletDetails
+0003acf0: 272c 205b 5d29 0a20 2020 2020 2020 2020  ', []).         
+0003ad00: 2020 2066 6f72 206a 2069 6e20 7261 6e67     for j in rang
+0003ad10: 6528 302c 206c 656e 286c 6f67 7329 293a  e(0, len(logs)):
+0003ad20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003ad30: 206c 6f67 735b 6a5d 5b27 6973 4475 7374   logs[j]['isDust
+0003ad40: 5472 6164 6527 5d20 3d20 5472 7565 0a20  Trade'] = True. 
+0003ad50: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0003ad60: 6174 612e 6170 7065 6e64 286c 6f67 735b  ata.append(logs[
+0003ad70: 6a5d 290a 2020 2020 2020 2020 7472 6164  j]).        trad
+0003ad80: 6573 203d 2073 656c 662e 7061 7273 655f  es = self.parse_
+0003ad90: 7472 6164 6573 2864 6174 612c 204e 6f6e  trades(data, Non
+0003ada0: 652c 2073 696e 6365 2c20 6c69 6d69 7429  e, since, limit)
+0003adb0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003adc0: 7365 6c66 2e66 696c 7465 725f 6279 5f73  self.filter_by_s
+0003add0: 696e 6365 5f6c 696d 6974 2874 7261 6465  ince_limit(trade
+0003ade0: 732c 2073 696e 6365 2c20 6c69 6d69 7429  s, since, limit)
+0003adf0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+0003ae00: 6475 7374 5f74 7261 6465 2873 656c 662c  dust_trade(self,
+0003ae10: 2074 7261 6465 2c20 6d61 726b 6574 3d4e   trade, market=N
+0003ae20: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+0003ae30: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0003ae40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003ae50: 2266 726f 6d41 7373 6574 223a 2022 5553  "fromAsset": "US
+0003ae60: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0003ae70: 2020 2020 2022 616d 6f75 6e74 223a 2022       "amount": "
+0003ae80: 302e 3030 3936 3639 222c 0a20 2020 2020  0.009669",.     
+0003ae90: 2020 2023 2020 2020 2020 2022 7472 616e     #       "tran
+0003aea0: 7366 6572 6564 416d 6f75 6e74 223a 2022  sferedAmount": "
+0003aeb0: 302e 3030 3030 3239 3932 222c 0a20 2020  0.00002992",.   
+0003aec0: 2020 2020 2023 2020 2020 2020 2022 7365       #       "se
+0003aed0: 7276 6963 6543 6861 7267 6541 6d6f 756e  rviceChargeAmoun
+0003aee0: 7422 3a20 2230 2e30 3030 3030 3035 3922  t": "0.00000059"
+0003aef0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003af00: 2020 226f 7065 7261 7465 5469 6d65 223a    "operateTime":
+0003af10: 2022 3136 3238 3037 3630 3130 3030 3022   "1628076010000"
+0003af20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003af30: 2020 2274 7261 6e73 4964 223a 2022 3731    "transId": "71
+0003af40: 3431 3635 3738 3731 3222 2c0a 2020 2020  416578712",.    
+0003af50: 2020 2020 2320 2020 2020 2020 2269 7344      #       "isD
+0003af60: 7573 7454 7261 6465 223a 2054 7275 650a  ustTrade": True.
+0003af70: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0003af80: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0003af90: 2020 6f72 6465 7249 6420 3d20 7365 6c66    orderId = self
+0003afa0: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
+0003afb0: 6465 2c20 2774 7261 6e73 4964 2729 0a20  de, 'transId'). 
+0003afc0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0003afd0: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
+0003afe0: 6567 6572 2874 7261 6465 2c20 276f 7065  eger(trade, 'ope
+0003aff0: 7261 7465 5469 6d65 2729 0a20 2020 2020  rateTime').     
+0003b000: 2020 2063 7572 7265 6e63 7949 6420 3d20     currencyId = 
+0003b010: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0003b020: 2874 7261 6465 2c20 2766 726f 6d41 7373  (trade, 'fromAss
+0003b030: 6574 2729 0a20 2020 2020 2020 2074 7261  et').        tra
+0003b040: 6465 6443 7572 7265 6e63 7920 3d20 7365  dedCurrency = se
+0003b050: 6c66 2e73 6166 655f 6375 7272 656e 6379  lf.safe_currency
+0003b060: 5f63 6f64 6528 6375 7272 656e 6379 4964  _code(currencyId
+0003b070: 290a 2020 2020 2020 2020 626e 6220 3d20  ).        bnb = 
+0003b080: 7365 6c66 2e63 7572 7265 6e63 7928 2742  self.currency('B
+0003b090: 4e42 2729 0a20 2020 2020 2020 2065 6172  NB').        ear
+0003b0a0: 6e65 6443 7572 7265 6e63 7920 3d20 626e  nedCurrency = bn
+0003b0b0: 625b 2763 6f64 6527 5d0a 2020 2020 2020  b['code'].      
+0003b0c0: 2020 6170 706c 6963 616e 7453 796d 626f    applicantSymbo
+0003b0d0: 6c20 3d20 6561 726e 6564 4375 7272 656e  l = earnedCurren
+0003b0e0: 6379 202b 2027 2f27 202b 2074 7261 6465  cy + '/' + trade
+0003b0f0: 6443 7572 7265 6e63 790a 2020 2020 2020  dCurrency.      
+0003b100: 2020 7472 6164 6564 4375 7272 656e 6379    tradedCurrency
+0003b110: 4973 5175 6f74 6520 3d20 4661 6c73 650a  IsQuote = False.
+0003b120: 2020 2020 2020 2020 6966 2061 7070 6c69          if appli
+0003b130: 6361 6e74 5379 6d62 6f6c 2069 6e20 7365  cantSymbol in se
+0003b140: 6c66 2e6d 6172 6b65 7473 3a0a 2020 2020  lf.markets:.    
+0003b150: 2020 2020 2020 2020 7472 6164 6564 4375          tradedCu
+0003b160: 7272 656e 6379 4973 5175 6f74 6520 3d20  rrencyIsQuote = 
+0003b170: 5472 7565 0a20 2020 2020 2020 2066 6565  True.        fee
+0003b180: 436f 7374 5374 7269 6e67 203d 2073 656c  CostString = sel
+0003b190: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
+0003b1a0: 6164 652c 2027 7365 7276 6963 6543 6861  ade, 'serviceCha
+0003b1b0: 7267 6541 6d6f 756e 7427 290a 2020 2020  rgeAmount').    
+0003b1c0: 2020 2020 6665 6520 3d20 7b0a 2020 2020      fee = {.    
+0003b1d0: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
+0003b1e0: 7927 3a20 6561 726e 6564 4375 7272 656e  y': earnedCurren
+0003b1f0: 6379 2c0a 2020 2020 2020 2020 2020 2020  cy,.            
+0003b200: 2763 6f73 7427 3a20 7365 6c66 2e70 6172  'cost': self.par
+0003b210: 7365 5f6e 756d 6265 7228 6665 6543 6f73  se_number(feeCos
+0003b220: 7453 7472 696e 6729 2c0a 2020 2020 2020  tString),.      
+0003b230: 2020 7d0a 2020 2020 2020 2020 7379 6d62    }.        symb
+0003b240: 6f6c 203d 204e 6f6e 650a 2020 2020 2020  ol = None.      
+0003b250: 2020 616d 6f75 6e74 5374 7269 6e67 203d    amountString =
+0003b260: 204e 6f6e 650a 2020 2020 2020 2020 636f   None.        co
+0003b270: 7374 5374 7269 6e67 203d 204e 6f6e 650a  stString = None.
+0003b280: 2020 2020 2020 2020 7369 6465 203d 204e          side = N
+0003b290: 6f6e 650a 2020 2020 2020 2020 6966 2074  one.        if t
+0003b2a0: 7261 6465 6443 7572 7265 6e63 7949 7351  radedCurrencyIsQ
+0003b2b0: 756f 7465 3a0a 2020 2020 2020 2020 2020  uote:.          
+0003b2c0: 2020 7379 6d62 6f6c 203d 2061 7070 6c69    symbol = appli
+0003b2d0: 6361 6e74 5379 6d62 6f6c 0a20 2020 2020  cantSymbol.     
+0003b2e0: 2020 2020 2020 2061 6d6f 756e 7453 7472         amountStr
+0003b2f0: 696e 6720 3d20 7365 6c66 2e73 6166 655f  ing = self.safe_
+0003b300: 7374 7269 6e67 2874 7261 6465 2c20 2774  string(trade, 't
+0003b310: 7261 6e73 6665 7265 6441 6d6f 756e 7427  ransferedAmount'
+0003b320: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
+0003b330: 7374 5374 7269 6e67 203d 2073 656c 662e  stString = self.
+0003b340: 7361 6665 5f73 7472 696e 6728 7472 6164  safe_string(trad
+0003b350: 652c 2027 616d 6f75 6e74 2729 0a20 2020  e, 'amount').   
+0003b360: 2020 2020 2020 2020 2073 6964 6520 3d20           side = 
+0003b370: 2762 7579 270a 2020 2020 2020 2020 656c  'buy'.        el
+0003b380: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0003b390: 7379 6d62 6f6c 203d 2074 7261 6465 6443  symbol = tradedC
+0003b3a0: 7572 7265 6e63 7920 2b20 272f 2720 2b20  urrency + '/' + 
+0003b3b0: 6561 726e 6564 4375 7272 656e 6379 0a20  earnedCurrency. 
+0003b3c0: 2020 2020 2020 2020 2020 2061 6d6f 756e             amoun
+0003b3d0: 7453 7472 696e 6720 3d20 7365 6c66 2e73  tString = self.s
+0003b3e0: 6166 655f 7374 7269 6e67 2874 7261 6465  afe_string(trade
+0003b3f0: 2c20 2761 6d6f 756e 7427 290a 2020 2020  , 'amount').    
+0003b400: 2020 2020 2020 2020 636f 7374 5374 7269          costStri
+0003b410: 6e67 203d 2073 656c 662e 7361 6665 5f73  ng = self.safe_s
+0003b420: 7472 696e 6728 7472 6164 652c 2027 7472  tring(trade, 'tr
+0003b430: 616e 7366 6572 6564 416d 6f75 6e74 2729  ansferedAmount')
+0003b440: 0a20 2020 2020 2020 2020 2020 2073 6964  .            sid
+0003b450: 6520 3d20 2773 656c 6c27 0a20 2020 2020  e = 'sell'.     
+0003b460: 2020 2070 7269 6365 5374 7269 6e67 203d     priceString =
+0003b470: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0003b480: 2063 6f73 7453 7472 696e 6720 6973 206e   costString is n
+0003b490: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0003b4a0: 2020 2020 2069 6620 616d 6f75 6e74 5374       if amountSt
+0003b4b0: 7269 6e67 3a0a 2020 2020 2020 2020 2020  ring:.          
+0003b4c0: 2020 2020 2020 7072 6963 6553 7472 696e        priceStrin
+0003b4d0: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+0003b4e0: 6e67 5f64 6976 2863 6f73 7453 7472 696e  ng_div(costStrin
+0003b4f0: 672c 2061 6d6f 756e 7453 7472 696e 6729  g, amountString)
+0003b500: 0a20 2020 2020 2020 2069 6420 3d20 4e6f  .        id = No
+0003b510: 6e65 0a20 2020 2020 2020 2061 6d6f 756e  ne.        amoun
+0003b520: 7420 3d20 7365 6c66 2e70 6172 7365 5f6e  t = self.parse_n
+0003b530: 756d 6265 7228 616d 6f75 6e74 5374 7269  umber(amountStri
+0003b540: 6e67 290a 2020 2020 2020 2020 7072 6963  ng).        pric
+0003b550: 6520 3d20 7365 6c66 2e70 6172 7365 5f6e  e = self.parse_n
+0003b560: 756d 6265 7228 7072 6963 6553 7472 696e  umber(priceStrin
+0003b570: 6729 0a20 2020 2020 2020 2063 6f73 7420  g).        cost 
+0003b580: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0003b590: 6265 7228 636f 7374 5374 7269 6e67 290a  ber(costString).
+0003b5a0: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
+0003b5b0: 6f6e 650a 2020 2020 2020 2020 7461 6b65  one.        take
+0003b5c0: 724f 724d 616b 6572 203d 204e 6f6e 650a  rOrMaker = None.
+0003b5d0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0003b5e0: 0a20 2020 2020 2020 2020 2020 2027 6964  .            'id
+0003b5f0: 273a 2069 642c 0a20 2020 2020 2020 2020  ': id,.         
+0003b600: 2020 2027 7469 6d65 7374 616d 7027 3a20     'timestamp': 
+0003b610: 7469 6d65 7374 616d 702c 0a20 2020 2020  timestamp,.     
+0003b620: 2020 2020 2020 2027 6461 7465 7469 6d65         'datetime
+0003b630: 273a 2073 656c 662e 6973 6f38 3630 3128  ': self.iso8601(
+0003b640: 7469 6d65 7374 616d 7029 2c0a 2020 2020  timestamp),.    
+0003b650: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+0003b660: 3a20 7379 6d62 6f6c 2c0a 2020 2020 2020  : symbol,.      
+0003b670: 2020 2020 2020 276f 7264 6572 273a 206f        'order': o
+0003b680: 7264 6572 4964 2c0a 2020 2020 2020 2020  rderId,.        
+0003b690: 2020 2020 2774 7970 6527 3a20 7479 7065      'type': type
+0003b6a0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0003b6b0: 616b 6572 4f72 4d61 6b65 7227 3a20 7461  akerOrMaker': ta
+0003b6c0: 6b65 724f 724d 616b 6572 2c0a 2020 2020  kerOrMaker,.    
+0003b6d0: 2020 2020 2020 2020 2773 6964 6527 3a20          'side': 
+0003b6e0: 7369 6465 2c0a 2020 2020 2020 2020 2020  side,.          
+0003b6f0: 2020 2761 6d6f 756e 7427 3a20 616d 6f75    'amount': amou
+0003b700: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+0003b710: 2770 7269 6365 273a 2070 7269 6365 2c0a  'price': price,.
+0003b720: 2020 2020 2020 2020 2020 2020 2763 6f73              'cos
+0003b730: 7427 3a20 636f 7374 2c0a 2020 2020 2020  t': cost,.      
+0003b740: 2020 2020 2020 2766 6565 273a 2066 6565        'fee': fee
+0003b750: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+0003b760: 6e66 6f27 3a20 7472 6164 652c 0a20 2020  nfo': trade,.   
+0003b770: 2020 2020 207d 0a0a 2020 2020 6173 796e       }..    asyn
+0003b780: 6320 6465 6620 6665 7463 685f 6465 706f  c def fetch_depo
+0003b790: 7369 7473 2873 656c 662c 2063 6f64 653a  sits(self, code:
+0003b7a0: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+0003b7b0: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
+0003b7c0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+0003b7d0: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
+0003b7e0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+0003b7f0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0003b800: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0003b810: 2066 6574 6368 2061 6c6c 2064 6570 6f73   fetch all depos
+0003b820: 6974 7320 6d61 6465 2074 6f20 616e 2061  its made to an a
+0003b830: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
+0003b840: 7061 7261 6d20 7374 727c 4e6f 6e65 2063  param str|None c
+0003b850: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
+0003b860: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
+0003b870: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+0003b880: 6e65 2073 696e 6365 3a20 7468 6520 6561  ne since: the ea
+0003b890: 726c 6965 7374 2074 696d 6520 696e 206d  rliest time in m
+0003b8a0: 7320 746f 2066 6574 6368 2064 6570 6f73  s to fetch depos
+0003b8b0: 6974 7320 666f 720a 2020 2020 2020 2020  its for.        
+0003b8c0: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+0003b8d0: 6c69 6d69 743a 2074 6865 206d 6178 696d  limit: the maxim
+0003b8e0: 756d 206e 756d 6265 7220 6f66 2064 6570  um number of dep
+0003b8f0: 6f73 6974 7320 7374 7275 6374 7572 6573  osits structures
+0003b900: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
+0003b910: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0003b920: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0003b930: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0003b940: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+0003b950: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+0003b960: 2020 2020 2020 203a 7061 7261 6d20 626f         :param bo
+0003b970: 6f6c 2070 6172 616d 735b 2766 6961 7427  ol params['fiat'
+0003b980: 5d3a 2069 6620 5472 7565 2c20 6f6e 6c79  ]: if True, only
+0003b990: 2066 6961 7420 6465 706f 7369 7473 2077   fiat deposits w
+0003b9a0: 696c 6c20 6265 2072 6574 7572 6e65 640a  ill be returned.
+0003b9b0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0003b9c0: 6e74 7c4e 6f6e 6520 7061 7261 6d73 5b27  nt|None params['
+0003b9d0: 756e 7469 6c27 5d3a 2074 6865 206c 6174  until']: the lat
+0003b9e0: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
+0003b9f0: 6f20 6665 7463 6820 6465 706f 7369 7473  o fetch deposits
+0003ba00: 2066 6f72 0a20 2020 2020 2020 203a 7265   for.        :re
+0003ba10: 7475 726e 7320 5b64 6963 745d 3a20 6120  turns [dict]: a 
+0003ba20: 6c69 7374 206f 6620 6074 7261 6e73 6163  list of `transac
+0003ba30: 7469 6f6e 2073 7472 7563 7475 7265 7320  tion structures 
+0003ba40: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+0003ba50: 7874 2e63 6f6d 2f23 2f3f 6964 3d74 7261  xt.com/#/?id=tra
+0003ba60: 6e73 6163 7469 6f6e 2d73 7472 7563 7475  nsaction-structu
+0003ba70: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+0003ba80: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0003ba90: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0003baa0: 2829 0a20 2020 2020 2020 2063 7572 7265  ().        curre
+0003bab0: 6e63 7920 3d20 4e6f 6e65 0a20 2020 2020  ncy = None.     
+0003bac0: 2020 2072 6573 706f 6e73 6520 3d20 4e6f     response = No
+0003bad0: 6e65 0a20 2020 2020 2020 2072 6571 7565  ne.        reque
+0003bae0: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
+0003baf0: 6c65 6761 6c4d 6f6e 6579 203d 2073 656c  legalMoney = sel
+0003bb00: 662e 7361 6665 5f76 616c 7565 2873 656c  f.safe_value(sel
+0003bb10: 662e 6f70 7469 6f6e 732c 2027 6c65 6761  f.options, 'lega
+0003bb20: 6c4d 6f6e 6579 272c 207b 7d29 0a20 2020  lMoney', {}).   
+0003bb30: 2020 2020 2066 6961 744f 6e6c 7920 3d20       fiatOnly = 
+0003bb40: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0003bb50: 7061 7261 6d73 2c20 2766 6961 7427 2c20  params, 'fiat', 
+0003bb60: 4661 6c73 6529 0a20 2020 2020 2020 2070  False).        p
+0003bb70: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+0003bb80: 7428 7061 7261 6d73 2c20 2766 6961 744f  t(params, 'fiatO
+0003bb90: 6e6c 7927 290a 2020 2020 2020 2020 756e  nly').        un
+0003bba0: 7469 6c20 3d20 7365 6c66 2e73 6166 655f  til = self.safe_
+0003bbb0: 696e 7465 6765 7228 7061 7261 6d73 2c20  integer(params, 
+0003bbc0: 2775 6e74 696c 2729 0a20 2020 2020 2020  'until').       
+0003bbd0: 2069 6620 6669 6174 4f6e 6c79 206f 7220   if fiatOnly or 
+0003bbe0: 2863 6f64 6520 696e 206c 6567 616c 4d6f  (code in legalMo
+0003bbf0: 6e65 7929 3a0a 2020 2020 2020 2020 2020  ney):.          
+0003bc00: 2020 6966 2063 6f64 6520 6973 206e 6f74    if code is not
+0003bc10: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0003bc20: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
+0003bc30: 3d20 7365 6c66 2e63 7572 7265 6e63 7928  = self.currency(
+0003bc40: 636f 6465 290a 2020 2020 2020 2020 2020  code).          
+0003bc50: 2020 7265 7175 6573 745b 2774 7261 6e73    request['trans
+0003bc60: 6163 7469 6f6e 5479 7065 275d 203d 2030  actionType'] = 0
+0003bc70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0003bc80: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
+0003bc90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0003bca0: 2020 2072 6571 7565 7374 5b27 6265 6769     request['begi
+0003bcb0: 6e54 696d 6527 5d20 3d20 7369 6e63 650a  nTime'] = since.
+0003bcc0: 2020 2020 2020 2020 2020 2020 6966 2075              if u
+0003bcd0: 6e74 696c 2069 7320 6e6f 7420 4e6f 6e65  ntil is not None
+0003bce0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003bcf0: 2020 7265 7175 6573 745b 2765 6e64 5469    request['endTi
+0003bd00: 6d65 275d 203d 2075 6e74 696c 0a20 2020  me'] = until.   
+0003bd10: 2020 2020 2020 2020 2072 6177 203d 2061           raw = a
+0003bd20: 7761 6974 2073 656c 662e 7361 7069 4765  wait self.sapiGe
+0003bd30: 7446 6961 744f 7264 6572 7328 7365 6c66  tFiatOrders(self
+0003bd40: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+0003bd50: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+0003bd60: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0003bd70: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0003bd80: 2872 6177 2c20 2764 6174 6127 290a 2020  (raw, 'data').  
+0003bd90: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003bda0: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
+0003bdb0: 2020 2020 2020 2263 6f64 6522 3a20 2230        "code": "0
+0003bdc0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+0003bdd0: 2020 2020 2320 2020 2020 2020 226d 6573      #       "mes
+0003bde0: 7361 6765 223a 2022 7375 6363 6573 7322  sage": "success"
+0003bdf0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003be00: 2020 2020 2020 2264 6174 6122 3a20 5b0a        "data": [.
+0003be10: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003be20: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0003be30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003be40: 226f 7264 6572 4e6f 223a 2022 3235 6365  "orderNo": "25ce
+0003be50: 6433 3730 3735 6331 3437 3062 6138 3933  d37075c1470ba893
+0003be60: 3964 3064 6632 3331 3665 3233 222c 0a20  9d0df2316e23",. 
+0003be70: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003be80: 2020 2020 2020 2022 6669 6174 4375 7272         "fiatCurr
+0003be90: 656e 6379 223a 2022 4555 5222 2c0a 2020  ency": "EUR",.  
+0003bea0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003beb0: 2020 2020 2020 2269 6e64 6963 6174 6564        "indicated
+0003bec0: 416d 6f75 6e74 223a 2022 3135 2e30 3022  Amount": "15.00"
+0003bed0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003bee0: 2020 2020 2020 2020 2020 2261 6d6f 756e            "amoun
+0003bef0: 7422 3a20 2231 352e 3030 222c 0a20 2020  t": "15.00",.   
+0003bf00: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003bf10: 2020 2020 2022 746f 7461 6c46 6565 223a       "totalFee":
+0003bf20: 2022 302e 3030 222c 0a20 2020 2020 2020   "0.00",.       
+0003bf30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003bf40: 2022 6d65 7468 6f64 223a 2022 6361 7264   "method": "card
+0003bf50: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003bf60: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
+0003bf70: 7573 223a 2022 4661 696c 6564 222c 0a20  us": "Failed",. 
+0003bf80: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003bf90: 2020 2020 2020 2022 6372 6561 7465 5469         "createTi
+0003bfa0: 6d65 223a 2031 3632 3735 3031 3032 3630  me": 16275010260
+0003bfb0: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
+0003bfc0: 2320 2020 2020 2020 2020 2020 2275 7064  #           "upd
+0003bfd0: 6174 6554 696d 6522 3a20 3136 3237 3530  ateTime": 162750
+0003bfe0: 3130 3237 3030 300a 2020 2020 2020 2020  1027000.        
+0003bff0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
+0003c000: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003c010: 2020 2020 5d2c 0a20 2020 2020 2020 2020      ],.         
+0003c020: 2020 2023 2020 2020 2020 2022 746f 7461     #       "tota
+0003c030: 6c22 3a20 312c 0a20 2020 2020 2020 2020  l": 1,.         
+0003c040: 2020 2023 2020 2020 2020 2022 7375 6363     #       "succ
+0003c050: 6573 7322 3a20 5472 7565 0a20 2020 2020  ess": True.     
+0003c060: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0003c070: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003c080: 2020 2020 2020 2020 2069 6620 636f 6465           if code
+0003c090: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0003c0a0: 2020 2020 2020 2020 2020 2020 2020 6375                cu
+0003c0b0: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
+0003c0c0: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
+0003c0d0: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0003c0e0: 7565 7374 5b27 636f 696e 275d 203d 2063  uest['coin'] = c
+0003c0f0: 7572 7265 6e63 795b 2769 6427 5d0a 2020  urrency['id'].  
+0003c100: 2020 2020 2020 2020 2020 6966 2073 696e            if sin
+0003c110: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+0003c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c130: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
+0003c140: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
+0003c150: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+0003c160: 6178 2033 206d 6f6e 7468 7320 7261 6e67  ax 3 months rang
+0003c170: 6520 6874 7470 733a 2f2f 6769 7468 7562  e https://github
+0003c180: 2e63 6f6d 2f63 6378 742f 6363 7874 2f69  .com/ccxt/ccxt/i
+0003c190: 7373 7565 732f 3634 3935 0a20 2020 2020  ssues/6495.     
+0003c1a0: 2020 2020 2020 2020 2020 2065 6e64 5469             endTi
+0003c1b0: 6d65 203d 2073 656c 662e 7375 6d28 7369  me = self.sum(si
+0003c1c0: 6e63 652c 2037 3737 3630 3030 3030 3029  nce, 7776000000)
+0003c1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003c1e0: 2069 6620 756e 7469 6c20 6973 206e 6f74   if until is not
+0003c1f0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0003c200: 2020 2020 2020 2020 2020 2065 6e64 5469             endTi
+0003c210: 6d65 203d 206d 696e 2865 6e64 5469 6d65  me = min(endTime
+0003c220: 2c20 756e 7469 6c29 0a20 2020 2020 2020  , until).       
+0003c230: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003c240: 5b27 656e 6454 696d 6527 5d20 3d20 656e  ['endTime'] = en
+0003c250: 6454 696d 650a 2020 2020 2020 2020 2020  dTime.          
+0003c260: 2020 6966 206c 696d 6974 2069 7320 6e6f    if limit is no
+0003c270: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0003c280: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0003c290: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
+0003c2a0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0003c2b0: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+0003c2c0: 6c66 2e73 6170 6947 6574 4361 7069 7461  lf.sapiGetCapita
+0003c2d0: 6c44 6570 6f73 6974 4869 7372 6563 2873  lDepositHisrec(s
+0003c2e0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0003c2f0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0003c300: 2020 2020 2020 2020 2023 2020 2020 205b           #     [
+0003c310: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003c320: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+0003c330: 2020 2023 2020 2020 2020 2020 2022 616d     #         "am
+0003c340: 6f75 6e74 223a 2022 302e 3031 3834 3434  ount": "0.018444
+0003c350: 3837 222c 0a20 2020 2020 2020 2020 2020  87",.           
+0003c360: 2023 2020 2020 2020 2020 2022 636f 696e   #         "coin
+0003c370: 223a 2022 4243 4822 2c0a 2020 2020 2020  ": "BCH",.      
+0003c380: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c390: 226e 6574 776f 726b 223a 2022 4243 4822  "network": "BCH"
+0003c3a0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003c3b0: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
+0003c3c0: 3a20 312c 0a20 2020 2020 2020 2020 2020  : 1,.           
+0003c3d0: 2023 2020 2020 2020 2020 2022 6164 6472   #         "addr
+0003c3e0: 6573 7322 3a20 2231 4e59 7841 4a68 5732  ess": "1NYxAJhW2
+0003c3f0: 3238 3148 4b31 4b74 4a65 6145 4e42 7148  281HK1KtJeaENBqH
+0003c400: 6579 6741 3838 467a 5222 2c0a 2020 2020  eygA88FzR",.    
+0003c410: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c420: 2020 2261 6464 7265 7373 5461 6722 3a20    "addressTag": 
+0003c430: 2222 2c0a 2020 2020 2020 2020 2020 2020  "",.            
+0003c440: 2320 2020 2020 2020 2020 2274 7849 6422  #         "txId"
+0003c450: 3a20 2262 6166 6335 3930 3235 3034 6436  : "bafc5902504d6
+0003c460: 3530 3461 3030 6237 6430 3330 3661 3431  504a00b7d0306a41
+0003c470: 3135 3463 6266 3164 3162 3736 3761 6237  154cbf1d1b767ab7
+0003c480: 3066 3362 6332 3236 3332 3733 3632 3538  0f3bc22632736258
+0003c490: 3861 6622 2c0a 2020 2020 2020 2020 2020  8af",.          
+0003c4a0: 2020 2320 2020 2020 2020 2020 2269 6e73    #         "ins
+0003c4b0: 6572 7454 696d 6522 3a20 3136 3130 3738  ertTime": 161078
+0003c4c0: 3439 3830 3030 302c 0a20 2020 2020 2020  4980000,.       
+0003c4d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003c4e0: 7472 616e 7366 6572 5479 7065 223a 2030  transferType": 0
+0003c4f0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003c500: 2020 2020 2020 2020 2263 6f6e 6669 726d          "confirm
+0003c510: 5469 6d65 7322 3a20 2232 2f32 220a 2020  Times": "2/2".  
+0003c520: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003c530: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
+0003c540: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
+0003c550: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c560: 2022 616d 6f75 6e74 223a 2022 3435 3030   "amount": "4500
+0003c570: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003c580: 2020 2020 2020 2020 2022 636f 696e 223a           "coin":
+0003c590: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+0003c5a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003c5b0: 6e65 7477 6f72 6b22 3a20 2242 5343 222c  network": "BSC",
+0003c5c0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003c5d0: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
+0003c5e0: 2031 2c0a 2020 2020 2020 2020 2020 2020   1,.            
+0003c5f0: 2320 2020 2020 2020 2020 2261 6464 7265  #         "addre
+0003c600: 7373 223a 2022 3078 6339 6339 3233 6338  ss": "0xc9c923c8
+0003c610: 3733 3437 6361 3066 3334 3531 6436 6433  7347ca0f3451d6d3
+0003c620: 3038 6365 3834 6636 3931 6239 6635 3031  08ce84f691b9f501
+0003c630: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003c640: 2020 2020 2020 2020 2022 6164 6472 6573           "addres
+0003c650: 7354 6167 223a 2022 222c 0a20 2020 2020  sTag": "",.     
+0003c660: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c670: 2022 7478 4964 223a 2022 496e 7465 726e   "txId": "Intern
+0003c680: 616c 2074 7261 6e73 6665 7220 3531 3337  al transfer 5137
+0003c690: 3636 3237 3930 3122 2c0a 2020 2020 2020  6627901",.      
+0003c6a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c6b0: 2269 6e73 6572 7454 696d 6522 3a20 3136  "insertTime": 16
+0003c6c0: 3138 3339 3433 3831 3030 302c 0a20 2020  18394381000,.   
+0003c6d0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003c6e0: 2020 2022 7472 616e 7366 6572 5479 7065     "transferType
+0003c6f0: 223a 2031 2c0a 2020 2020 2020 2020 2020  ": 1,.          
+0003c700: 2020 2320 2020 2020 2020 2020 2263 6f6e    #         "con
+0003c710: 6669 726d 5469 6d65 7322 3a20 2231 2f31  firmTimes": "1/1
+0003c720: 3522 0a20 2020 2020 2020 2020 2020 2023  5".            #
+0003c730: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+0003c740: 2020 2023 2020 205d 0a20 2020 2020 2020     #   ].       
+0003c750: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0003c760: 302c 206c 656e 2872 6573 706f 6e73 6529  0, len(response)
+0003c770: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0003c780: 6573 706f 6e73 655b 695d 5b27 7479 7065  esponse[i]['type
+0003c790: 275d 203d 2027 6465 706f 7369 7427 0a20  '] = 'deposit'. 
+0003c7a0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0003c7b0: 6c66 2e70 6172 7365 5f74 7261 6e73 6163  lf.parse_transac
+0003c7c0: 7469 6f6e 7328 7265 7370 6f6e 7365 2c20  tions(response, 
+0003c7d0: 6375 7272 656e 6379 2c20 7369 6e63 652c  currency, since,
+0003c7e0: 206c 696d 6974 290a 0a20 2020 2061 7379   limit)..    asy
+0003c7f0: 6e63 2064 6566 2066 6574 6368 5f77 6974  nc def fetch_wit
+0003c800: 6864 7261 7761 6c73 2873 656c 662c 2063  hdrawals(self, c
+0003c810: 6f64 653a 204f 7074 696f 6e61 6c5b 7374  ode: Optional[st
+0003c820: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
+0003c830: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+0003c840: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
+0003c850: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+0003c860: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+0003c870: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0003c880: 2020 2020 2066 6574 6368 2061 6c6c 2077       fetch all w
+0003c890: 6974 6864 7261 7761 6c73 206d 6164 6520  ithdrawals made 
+0003c8a0: 6672 6f6d 2061 6e20 6163 636f 756e 740a  from an account.
+0003c8b0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0003c8c0: 7472 7c4e 6f6e 6520 636f 6465 3a20 756e  tr|None code: un
+0003c8d0: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+0003c8e0: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+0003c8f0: 616d 2069 6e74 7c4e 6f6e 6520 7369 6e63  am int|None sinc
+0003c900: 653a 2074 6865 2065 6172 6c69 6573 7420  e: the earliest 
+0003c910: 7469 6d65 2069 6e20 6d73 2074 6f20 6665  time in ms to fe
+0003c920: 7463 6820 7769 7468 6472 6177 616c 7320  tch withdrawals 
+0003c930: 666f 720a 2020 2020 2020 2020 3a70 6172  for.        :par
+0003c940: 616d 2069 6e74 7c4e 6f6e 6520 6c69 6d69  am int|None limi
+0003c950: 743a 2074 6865 206d 6178 696d 756d 206e  t: the maximum n
+0003c960: 756d 6265 7220 6f66 2077 6974 6864 7261  umber of withdra
+0003c970: 7761 6c73 2073 7472 7563 7475 7265 7320  wals structures 
+0003c980: 746f 2072 6574 7269 6576 650a 2020 2020  to retrieve.    
+0003c990: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0003c9a0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0003c9b0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0003c9c0: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
+0003c9d0: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+0003c9e0: 2020 2020 2020 3a70 6172 616d 2062 6f6f        :param boo
+0003c9f0: 6c20 7061 7261 6d73 5b27 6669 6174 275d  l params['fiat']
+0003ca00: 3a20 6966 2054 7275 652c 206f 6e6c 7920  : if True, only 
+0003ca10: 6669 6174 2077 6974 6864 7261 7761 6c73  fiat withdrawals
+0003ca20: 2077 696c 6c20 6265 2072 6574 7572 6e65   will be returne
+0003ca30: 640a 2020 2020 2020 2020 3a72 6574 7572  d.        :retur
+0003ca40: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
+0003ca50: 7420 6f66 2060 7472 616e 7361 6374 696f  t of `transactio
+0003ca60: 6e20 7374 7275 6374 7572 6573 203c 6874  n structures <ht
+0003ca70: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+0003ca80: 636f 6d2f 232f 3f69 643d 7472 616e 7361  com/#/?id=transa
+0003ca90: 6374 696f 6e2d 7374 7275 6374 7572 653e  ction-structure>
+0003caa0: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0003cab0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+0003cac0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0003cad0: 2020 2020 2020 2020 6c65 6761 6c4d 6f6e          legalMon
+0003cae0: 6579 203d 2073 656c 662e 7361 6665 5f76  ey = self.safe_v
+0003caf0: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
+0003cb00: 732c 2027 6c65 6761 6c4d 6f6e 6579 272c  s, 'legalMoney',
+0003cb10: 207b 7d29 0a20 2020 2020 2020 2066 6961   {}).        fia
+0003cb20: 744f 6e6c 7920 3d20 7365 6c66 2e73 6166  tOnly = self.saf
+0003cb30: 655f 7661 6c75 6528 7061 7261 6d73 2c20  e_value(params, 
+0003cb40: 2766 6961 7427 2c20 4661 6c73 6529 0a20  'fiat', False). 
+0003cb50: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
+0003cb60: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
+0003cb70: 2c20 2766 6961 744f 6e6c 7927 290a 2020  , 'fiatOnly').  
+0003cb80: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0003cb90: 7b7d 0a20 2020 2020 2020 2072 6573 706f  {}.        respo
+0003cba0: 6e73 6520 3d20 4e6f 6e65 0a20 2020 2020  nse = None.     
+0003cbb0: 2020 2063 7572 7265 6e63 7920 3d20 4e6f     currency = No
+0003cbc0: 6e65 0a20 2020 2020 2020 2069 6620 6669  ne.        if fi
+0003cbd0: 6174 4f6e 6c79 206f 7220 2863 6f64 6520  atOnly or (code 
+0003cbe0: 696e 206c 6567 616c 4d6f 6e65 7929 3a0a  in legalMoney):.
+0003cbf0: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+0003cc00: 6f64 6520 6973 206e 6f74 204e 6f6e 653a  ode is not None:
+0003cc10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003cc20: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+0003cc30: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+0003cc40: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003cc50: 6573 745b 2774 7261 6e73 6163 7469 6f6e  est['transaction
+0003cc60: 5479 7065 275d 203d 2031 0a20 2020 2020  Type'] = 1.     
+0003cc70: 2020 2020 2020 2069 6620 7369 6e63 6520         if since 
+0003cc80: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0003cc90: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0003cca0: 7565 7374 5b27 6265 6769 6e54 696d 6527  uest['beginTime'
+0003ccb0: 5d20 3d20 7369 6e63 650a 2020 2020 2020  ] = since.      
+0003ccc0: 2020 2020 2020 7261 7720 3d20 6177 6169        raw = awai
+0003ccd0: 7420 7365 6c66 2e73 6170 6947 6574 4669  t self.sapiGetFi
+0003cce0: 6174 4f72 6465 7273 2873 656c 662e 6578  atOrders(self.ex
+0003ccf0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+0003cd00: 7261 6d73 2929 0a20 2020 2020 2020 2020  rams)).         
+0003cd10: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
+0003cd20: 6c66 2e73 6166 655f 7661 6c75 6528 7261  lf.safe_value(ra
+0003cd30: 772c 2027 6461 7461 2729 0a20 2020 2020  w, 'data').     
+0003cd40: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+0003cd50: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003cd60: 2020 2022 636f 6465 223a 2022 3030 3030     "code": "0000
+0003cd70: 3030 222c 0a20 2020 2020 2020 2020 2020  00",.           
+0003cd80: 2023 2020 2020 2020 2022 6d65 7373 6167   #       "messag
+0003cd90: 6522 3a20 2273 7563 6365 7373 222c 0a20  e": "success",. 
+0003cda0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003cdb0: 2020 2022 6461 7461 223a 205b 0a20 2020     "data": [.   
+0003cdc0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003cdd0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0003cde0: 2023 2020 2020 2020 2020 2020 2022 6f72   #           "or
+0003cdf0: 6465 724e 6f22 3a20 2243 4a57 3730 3634  derNo": "CJW7064
+0003ce00: 3532 3236 3631 3135 3137 3033 3034 222c  52266115170304",
+0003ce10: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003ce20: 2020 2020 2020 2020 2022 6669 6174 4375           "fiatCu
+0003ce30: 7272 656e 6379 223a 2022 4742 5022 2c0a  rrency": "GBP",.
+0003ce40: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003ce50: 2020 2020 2020 2020 2269 6e64 6963 6174          "indicat
+0003ce60: 6564 416d 6f75 6e74 223a 2022 3130 3030  edAmount": "1000
+0003ce70: 312e 3530 222c 0a20 2020 2020 2020 2020  1.50",.         
+0003ce80: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
+0003ce90: 616d 6f75 6e74 223a 2022 3130 302e 3030  amount": "100.00
+0003cea0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003ceb0: 2020 2020 2020 2020 2020 2022 746f 7461             "tota
+0003cec0: 6c46 6565 223a 2022 312e 3530 222c 0a20  lFee": "1.50",. 
+0003ced0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003cee0: 2020 2020 2020 2022 6d65 7468 6f64 223a         "method":
+0003cef0: 2022 6261 6e6b 2074 7261 6e73 6665 7222   "bank transfer"
+0003cf00: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003cf10: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
+0003cf20: 7322 3a20 2253 7563 6365 7373 6675 6c22  s": "Successful"
+0003cf30: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003cf40: 2020 2020 2020 2020 2020 2263 7265 6174            "creat
+0003cf50: 6554 696d 6522 3a20 3136 3230 3033 3737  eTime": 16200377
+0003cf60: 3435 3030 302c 0a20 2020 2020 2020 2020  45000,.         
+0003cf70: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
+0003cf80: 7570 6461 7465 5469 6d65 223a 2031 3632  updateTime": 162
+0003cf90: 3030 3338 3438 3030 3030 0a20 2020 2020  0038480000.     
+0003cfa0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003cfb0: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
+0003cfc0: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
+0003cfd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003cfe0: 2020 2020 226f 7264 6572 4e6f 223a 2022      "orderNo": "
+0003cff0: 434a 5737 3036 3238 3734 3932 3738 3138  CJW7062874927818
+0003d000: 3931 3538 3422 2c0a 2020 2020 2020 2020  91584",.        
+0003d010: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003d020: 2266 6961 7443 7572 7265 6e63 7922 3a20  "fiatCurrency": 
+0003d030: 2247 4250 222c 0a20 2020 2020 2020 2020  "GBP",.         
+0003d040: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
+0003d050: 696e 6469 6361 7465 6441 6d6f 756e 7422  indicatedAmount"
+0003d060: 3a20 2231 3030 3031 2e35 3022 2c0a 2020  : "10001.50",.  
+0003d070: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003d080: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
+0003d090: 2231 3030 2e30 3022 2c0a 2020 2020 2020  "100.00",.      
+0003d0a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d0b0: 2020 2274 6f74 616c 4665 6522 3a20 2231    "totalFee": "1
+0003d0c0: 2e35 3022 2c0a 2020 2020 2020 2020 2020  .50",.          
+0003d0d0: 2020 2320 2020 2020 2020 2020 2020 226d    #           "m
+0003d0e0: 6574 686f 6422 3a20 2262 616e 6b20 7472  ethod": "bank tr
+0003d0f0: 616e 7366 6572 222c 0a20 2020 2020 2020  ansfer",.       
+0003d100: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d110: 2022 7374 6174 7573 223a 2022 5375 6363   "status": "Succ
+0003d120: 6573 7366 756c 222c 0a20 2020 2020 2020  essful",.       
+0003d130: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d140: 2022 6372 6561 7465 5469 6d65 223a 2031   "createTime": 1
+0003d150: 3631 3939 3938 3436 3030 3030 2c0a 2020  619998460000,.  
+0003d160: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003d170: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
+0003d180: 6522 3a20 3136 3139 3939 3838 3233 3030  e": 161999882300
+0003d190: 300a 2020 2020 2020 2020 2020 2020 2320  0.            # 
+0003d1a0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0003d1b0: 2020 2020 2020 2320 2020 2020 2020 5d2c        #       ],
+0003d1c0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003d1d0: 2020 2020 2022 746f 7461 6c22 3a20 3339       "total": 39
+0003d1e0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003d1f0: 2020 2020 2020 2273 7563 6365 7373 223a        "success":
+0003d200: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+0003d210: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0003d220: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003d230: 2020 2020 6966 2063 6f64 6520 6973 206e      if code is n
+0003d240: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0003d250: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+0003d260: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+0003d270: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+0003d280: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0003d290: 2763 6f69 6e27 5d20 3d20 6375 7272 656e  'coin'] = curren
+0003d2a0: 6379 5b27 6964 275d 0a20 2020 2020 2020  cy['id'].       
+0003d2b0: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
+0003d2c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0003d2d0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0003d2e0: 7374 5b27 7374 6172 7454 696d 6527 5d20  st['startTime'] 
+0003d2f0: 3d20 7369 6e63 650a 2020 2020 2020 2020  = since.        
+0003d300: 2020 2020 2020 2020 2320 6d61 7820 3320          # max 3 
+0003d310: 6d6f 6e74 6873 2072 616e 6765 2068 7474  months range htt
+0003d320: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+0003d330: 6363 7874 2f63 6378 742f 6973 7375 6573  ccxt/ccxt/issues
+0003d340: 2f36 3439 350a 2020 2020 2020 2020 2020  /6495.          
+0003d350: 2020 2020 2020 7265 7175 6573 745b 2765        request['e
+0003d360: 6e64 5469 6d65 275d 203d 2073 656c 662e  ndTime'] = self.
+0003d370: 7375 6d28 7369 6e63 652c 2037 3737 3630  sum(since, 77760
+0003d380: 3030 3030 3029 0a20 2020 2020 2020 2020  00000).         
+0003d390: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+0003d3a0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0003d3b0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003d3c0: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
+0003d3d0: 740a 2020 2020 2020 2020 2020 2020 7265  t.            re
+0003d3e0: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+0003d3f0: 656c 662e 7361 7069 4765 7443 6170 6974  elf.sapiGetCapit
+0003d400: 616c 5769 7468 6472 6177 4869 7374 6f72  alWithdrawHistor
+0003d410: 7928 7365 6c66 2e65 7874 656e 6428 7265  y(self.extend(re
+0003d420: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+0003d430: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003d440: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+0003d450: 2320 2020 2020 2020 7b0a 2020 2020 2020  #       {.      
+0003d460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d470: 2269 6422 3a20 2236 3965 3533 6164 3330  "id": "69e53ad30
+0003d480: 3531 3234 6239 3662 3433 3636 3863 6561  5124b96b43668cea
+0003d490: 6231 3538 6131 3822 2c0a 2020 2020 2020  b158a18",.      
+0003d4a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d4b0: 2261 6d6f 756e 7422 3a20 2232 382e 3735  "amount": "28.75
+0003d4c0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003d4d0: 2020 2020 2020 2020 2022 7472 616e 7361           "transa
+0003d4e0: 6374 696f 6e46 6565 223a 2022 302e 3235  ctionFee": "0.25
+0003d4f0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003d500: 2020 2020 2020 2020 2022 636f 696e 223a           "coin":
+0003d510: 2022 5852 5022 2c0a 2020 2020 2020 2020   "XRP",.        
+0003d520: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
+0003d530: 7461 7475 7322 3a20 362c 0a20 2020 2020  tatus": 6,.     
+0003d540: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d550: 2022 6164 6472 6573 7322 3a20 2272 3354   "address": "r3T
+0003d560: 3735 6675 4c6a 5835 316d 6d66 6235 536b  75fuLjX51mmfb5Sk
+0003d570: 316b 4d4e 7568 4267 4250 4a73 6a7a 6122  1kMNuhBgBPJsjza"
+0003d580: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003d590: 2020 2020 2020 2020 2261 6464 7265 7373          "address
+0003d5a0: 5461 6722 3a20 2231 3031 3238 3639 3232  Tag": "101286922
+0003d5b0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003d5c0: 2020 2020 2020 2020 2022 7478 4964 223a           "txId":
+0003d5d0: 2022 3139 4135 4232 3445 4430 4236 3937   "19A5B24ED0B697
+0003d5e0: 4534 4630 4539 4344 3039 4643 4230 3037  E4F0E9CD09FCB007
+0003d5f0: 3137 3041 3630 3542 4339 3343 3932 3830  170A605BC93C9280
+0003d600: 4239 4536 3337 3943 3545 3645 4630 4636  B9E6379C5E6EF0F6
+0003d610: 3541 222c 0a20 2020 2020 2020 2020 2020  5A",.           
+0003d620: 2023 2020 2020 2020 2020 2022 6170 706c   #         "appl
+0003d630: 7954 696d 6522 3a20 2232 3032 312d 3034  yTime": "2021-04
+0003d640: 2d31 3520 3132 3a30 393a 3136 222c 0a20  -15 12:09:16",. 
+0003d650: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003d660: 2020 2020 2022 6e65 7477 6f72 6b22 3a20       "network": 
+0003d670: 2258 5250 222c 0a20 2020 2020 2020 2020  "XRP",.         
+0003d680: 2020 2023 2020 2020 2020 2020 2022 7472     #         "tr
+0003d690: 616e 7366 6572 5479 7065 223a 2030 0a20  ansferType": 0. 
+0003d6a0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003d6b0: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
+0003d6c0: 2020 2320 2020 2020 2020 7b0a 2020 2020    #       {.    
+0003d6d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d6e0: 2020 2269 6422 3a20 2239 6136 3736 3238    "id": "9a67628
+0003d6f0: 6231 3662 6134 3938 3861 6532 3064 3332  b16ba4988ae20d32
+0003d700: 3933 3333 6631 3662 6322 2c0a 2020 2020  9333f16bc",.    
+0003d710: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d720: 2020 2261 6d6f 756e 7422 3a20 2232 3022    "amount": "20"
+0003d730: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003d740: 2020 2020 2020 2020 2274 7261 6e73 6163          "transac
+0003d750: 7469 6f6e 4665 6522 3a20 2232 3022 2c0a  tionFee": "20",.
+0003d760: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003d770: 2020 2020 2020 2263 6f69 6e22 3a20 2255        "coin": "U
+0003d780: 5344 5422 2c0a 2020 2020 2020 2020 2020  SDT",.          
+0003d790: 2020 2320 2020 2020 2020 2020 2273 7461    #         "sta
+0003d7a0: 7475 7322 3a20 362c 0a20 2020 2020 2020  tus": 6,.       
+0003d7b0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003d7c0: 6164 6472 6573 7322 3a20 2230 7830 4142  address": "0x0AB
+0003d7d0: 3939 3134 3937 3131 3666 3746 3535 3332  991497116f7F5532
+0003d7e0: 6134 6332 6634 6637 4231 3738 3434 3838  a4c2f4f7B1784488
+0003d7f0: 3632 3865 3122 2c0a 2020 2020 2020 2020  628e1",.        
+0003d800: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0003d810: 7849 6422 3a20 2230 7837 3766 6266 3263  xId": "0x77fbf2c
+0003d820: 6632 6338 3562 3535 3266 3066 6433 3166  f2c85b552f0fd31f
+0003d830: 6432 6535 3664 6339 3563 3038 6164 6165  d2e56dc95c08adae
+0003d840: 3033 3164 3936 6633 3731 3764 3862 3137  031d96f3717d8b17
+0003d850: 6531 6165 6133 6534 3622 2c0a 2020 2020  e1aea3e46",.    
+0003d860: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d870: 2020 2261 7070 6c79 5469 6d65 223a 2022    "applyTime": "
+0003d880: 3230 3231 2d30 342d 3135 2031 323a 3036  2021-04-15 12:06
+0003d890: 3a35 3322 2c0a 2020 2020 2020 2020 2020  :53",.          
+0003d8a0: 2020 2320 2020 2020 2020 2020 226e 6574    #         "net
+0003d8b0: 776f 726b 223a 2022 4554 4822 2c0a 2020  work": "ETH",.  
+0003d8c0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003d8d0: 2020 2020 2274 7261 6e73 6665 7254 7970      "transferTyp
+0003d8e0: 6522 3a20 300a 2020 2020 2020 2020 2020  e": 0.          
+0003d8f0: 2020 2320 2020 2020 2020 7d2c 0a20 2020    #       },.   
+0003d900: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003d910: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+0003d920: 2020 2020 2020 2020 2022 6964 223a 2022           "id": "
+0003d930: 6137 6364 6330 6166 6266 6134 3461 3438  a7cdc0afbfa44a48
+0003d940: 6264 3232 3563 3965 6365 3935 3866 6532  bd225c9ece958fe2
+0003d950: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003d960: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
+0003d970: 223a 2022 3531 222c 0a20 2020 2020 2020  ": "51",.       
+0003d980: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003d990: 7472 616e 7361 6374 696f 6e46 6565 223a  transactionFee":
+0003d9a0: 2022 3122 2c0a 2020 2020 2020 2020 2020   "1",.          
+0003d9b0: 2020 2320 2020 2020 2020 2020 2263 6f69    #         "coi
+0003d9c0: 6e22 3a20 2255 5344 5422 2c0a 2020 2020  n": "USDT",.    
+0003d9d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d9e0: 2020 2273 7461 7475 7322 3a20 362c 0a20    "status": 6,. 
+0003d9f0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003da00: 2020 2020 2022 6164 6472 6573 7322 3a20       "address": 
+0003da10: 2254 5944 6d74 7557 4c38 6273 796a 7663  "TYDmtuWL8bsyjvc
+0003da20: 6175 5554 6572 7066 5979 5668 4674 426a  auUTerpfYyVhFtBj
+0003da30: 7179 6f22 2c0a 2020 2020 2020 2020 2020  qyo",.          
+0003da40: 2020 2320 2020 2020 2020 2020 2274 7849    #         "txI
+0003da50: 6422 3a20 2231 3638 6137 3531 3132 6263  d": "168a75112bc
+0003da60: 6536 6365 6234 3832 3363 3636 3732 3661  e6ceb4823c66726a
+0003da70: 6434 3736 3230 6164 3333 3265 3639 6665  d47620ad332e69fe
+0003da80: 3932 6439 6362 3863 6562 3736 3032 3366  92d9cb8ceb76023f
+0003da90: 3961 3032 3822 2c0a 2020 2020 2020 2020  9a028",.        
+0003daa0: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
+0003dab0: 7070 6c79 5469 6d65 223a 2022 3230 3231  pplyTime": "2021
+0003dac0: 2d30 342d 3133 2031 323a 3436 3a35 3922  -04-13 12:46:59"
+0003dad0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003dae0: 2020 2020 2020 2020 226e 6574 776f 726b          "network
+0003daf0: 223a 2022 5452 5822 2c0a 2020 2020 2020  ": "TRX",.      
+0003db00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003db10: 2274 7261 6e73 6665 7254 7970 6522 3a20  "transferType": 
+0003db20: 300a 2020 2020 2020 2020 2020 2020 2320  0.            # 
+0003db30: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0003db40: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
+0003db50: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+0003db60: 6765 2830 2c20 6c65 6e28 7265 7370 6f6e  ge(0, len(respon
+0003db70: 7365 2929 3a0a 2020 2020 2020 2020 2020  se)):.          
+0003db80: 2020 7265 7370 6f6e 7365 5b69 5d5b 2774    response[i]['t
+0003db90: 7970 6527 5d20 3d20 2777 6974 6864 7261  ype'] = 'withdra
+0003dba0: 7761 6c27 0a20 2020 2020 2020 2072 6574  wal'.        ret
+0003dbb0: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+0003dbc0: 7261 6e73 6163 7469 6f6e 7328 7265 7370  ransactions(resp
+0003dbd0: 6f6e 7365 2c20 6375 7272 656e 6379 2c20  onse, currency, 
+0003dbe0: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+0003dbf0: 2020 2064 6566 2070 6172 7365 5f74 7261     def parse_tra
+0003dc00: 6e73 6163 7469 6f6e 5f73 7461 7475 735f  nsaction_status_
+0003dc10: 6279 5f74 7970 6528 7365 6c66 2c20 7374  by_type(self, st
+0003dc20: 6174 7573 2c20 7479 7065 3d4e 6f6e 6529  atus, type=None)
+0003dc30: 3a0a 2020 2020 2020 2020 7374 6174 7573  :.        status
+0003dc40: 6573 4279 5479 7065 203d 207b 0a20 2020  esByType = {.   
+0003dc50: 2020 2020 2020 2020 2027 6465 706f 7369           'deposi
+0003dc60: 7427 3a20 7b0a 2020 2020 2020 2020 2020  t': {.          
+0003dc70: 2020 2020 2020 2730 273a 2027 7065 6e64        '0': 'pend
+0003dc80: 696e 6727 2c0a 2020 2020 2020 2020 2020  ing',.          
+0003dc90: 2020 2020 2020 2731 273a 2027 6f6b 272c        '1': 'ok',
+0003dca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003dcb0: 2027 3627 3a20 276f 6b27 2c0a 2020 2020   '6': 'ok',.    
+0003dcc0: 2020 2020 2020 2020 2020 2020 2320 4669              # Fi
+0003dcd0: 6174 0a20 2020 2020 2020 2020 2020 2020  at.             
+0003dce0: 2020 2023 2050 726f 6365 7373 696e 672c     # Processing,
+0003dcf0: 2046 6169 6c65 642c 2053 7563 6365 7373   Failed, Success
+0003dd00: 6675 6c2c 2046 696e 6973 6865 642c 2052  ful, Finished, R
+0003dd10: 6566 756e 6469 6e67 2c20 5265 6675 6e64  efunding, Refund
+0003dd20: 6564 2c20 5265 6675 6e64 2046 6169 6c65  ed, Refund Faile
+0003dd30: 642c 204f 7264 6572 2050 6172 7469 616c  d, Order Partial
+0003dd40: 2063 7265 6469 7420 5374 6f70 7065 640a   credit Stopped.
+0003dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dd60: 2750 726f 6365 7373 696e 6727 3a20 2770  'Processing': 'p
+0003dd70: 656e 6469 6e67 272c 0a20 2020 2020 2020  ending',.       
+0003dd80: 2020 2020 2020 2020 2027 4661 696c 6564           'Failed
+0003dd90: 273a 2027 6661 696c 6564 272c 0a20 2020  ': 'failed',.   
+0003dda0: 2020 2020 2020 2020 2020 2020 2027 5375               'Su
+0003ddb0: 6363 6573 7366 756c 273a 2027 6f6b 272c  ccessful': 'ok',
+0003ddc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003ddd0: 2027 5265 6675 6e64 696e 6727 3a20 2763   'Refunding': 'c
+0003dde0: 616e 6365 6c65 6427 2c0a 2020 2020 2020  anceled',.      
+0003ddf0: 2020 2020 2020 2020 2020 2752 6566 756e            'Refun
+0003de00: 6465 6427 3a20 2763 616e 6365 6c65 6427  ded': 'canceled'
+0003de10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0003de20: 2020 2752 6566 756e 6420 4661 696c 6564    'Refund Failed
+0003de30: 273a 2027 6661 696c 6564 272c 0a20 2020  ': 'failed',.   
+0003de40: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0003de50: 2020 2020 2020 2020 2777 6974 6864 7261          'withdra
+0003de60: 7761 6c27 3a20 7b0a 2020 2020 2020 2020  wal': {.        
+0003de70: 2020 2020 2020 2020 2730 273a 2027 7065          '0': 'pe
+0003de80: 6e64 696e 6727 2c20 2023 2045 6d61 696c  nding',  # Email
+0003de90: 2053 656e 740a 2020 2020 2020 2020 2020   Sent.          
+0003dea0: 2020 2020 2020 2731 273a 2027 6361 6e63        '1': 'canc
+0003deb0: 656c 6564 272c 2020 2320 4361 6e63 656c  eled',  # Cancel
+0003dec0: 6c65 6428 6469 6666 6572 656e 7420 6672  led(different fr
+0003ded0: 6f6d 2031 203d 206f 6b20 696e 2064 6570  om 1 = ok in dep
+0003dee0: 6f73 6974 7329 0a20 2020 2020 2020 2020  osits).         
+0003def0: 2020 2020 2020 2027 3227 3a20 2770 656e         '2': 'pen
+0003df00: 6469 6e67 272c 2020 2320 4177 6169 7469  ding',  # Awaiti
+0003df10: 6e67 2041 7070 726f 7661 6c0a 2020 2020  ng Approval.    
+0003df20: 2020 2020 2020 2020 2020 2020 2733 273a              '3':
+0003df30: 2027 6661 696c 6564 272c 2020 2320 5265   'failed',  # Re
+0003df40: 6a65 6374 6564 0a20 2020 2020 2020 2020  jected.         
+0003df50: 2020 2020 2020 2027 3427 3a20 2770 656e         '4': 'pen
+0003df60: 6469 6e67 272c 2020 2320 5072 6f63 6573  ding',  # Proces
+0003df70: 7369 6e67 0a20 2020 2020 2020 2020 2020  sing.           
+0003df80: 2020 2020 2027 3527 3a20 2766 6169 6c65       '5': 'faile
+0003df90: 6427 2c20 2023 2046 6169 6c75 7265 0a20  d',  # Failure. 
+0003dfa0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0003dfb0: 3627 3a20 276f 6b27 2c20 2023 2043 6f6d  6': 'ok',  # Com
+0003dfc0: 706c 6574 6564 0a20 2020 2020 2020 2020  pleted.         
+0003dfd0: 2020 2020 2020 2023 2046 6961 740a 2020         # Fiat.  
+0003dfe0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0003dff0: 5072 6f63 6573 7369 6e67 2c20 4661 696c  Processing, Fail
+0003e000: 6564 2c20 5375 6363 6573 7366 756c 2c20  ed, Successful, 
+0003e010: 4669 6e69 7368 6564 2c20 5265 6675 6e64  Finished, Refund
+0003e020: 696e 672c 2052 6566 756e 6465 642c 2052  ing, Refunded, R
+0003e030: 6566 756e 6420 4661 696c 6564 2c20 4f72  efund Failed, Or
+0003e040: 6465 7220 5061 7274 6961 6c20 6372 6564  der Partial cred
+0003e050: 6974 2053 746f 7070 6564 0a20 2020 2020  it Stopped.     
+0003e060: 2020 2020 2020 2020 2020 2027 5072 6f63             'Proc
+0003e070: 6573 7369 6e67 273a 2027 7065 6e64 696e  essing': 'pendin
+0003e080: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
+0003e090: 2020 2020 2746 6169 6c65 6427 3a20 2766      'Failed': 'f
+0003e0a0: 6169 6c65 6427 2c0a 2020 2020 2020 2020  ailed',.        
+0003e0b0: 2020 2020 2020 2020 2753 7563 6365 7373          'Success
+0003e0c0: 6675 6c27 3a20 276f 6b27 2c0a 2020 2020  ful': 'ok',.    
+0003e0d0: 2020 2020 2020 2020 2020 2020 2752 6566              'Ref
+0003e0e0: 756e 6469 6e67 273a 2027 6361 6e63 656c  unding': 'cancel
+0003e0f0: 6564 272c 0a20 2020 2020 2020 2020 2020  ed',.           
+0003e100: 2020 2020 2027 5265 6675 6e64 6564 273a       'Refunded':
+0003e110: 2027 6361 6e63 656c 6564 272c 0a20 2020   'canceled',.   
+0003e120: 2020 2020 2020 2020 2020 2020 2027 5265               'Re
+0003e130: 6675 6e64 2046 6169 6c65 6427 3a20 2766  fund Failed': 'f
+0003e140: 6169 6c65 6427 2c0a 2020 2020 2020 2020  ailed',.        
+0003e150: 2020 2020 7d2c 0a20 2020 2020 2020 207d      },.        }
+0003e160: 0a20 2020 2020 2020 2073 7461 7475 7365  .        statuse
+0003e170: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+0003e180: 6c75 6528 7374 6174 7573 6573 4279 5479  lue(statusesByTy
+0003e190: 7065 2c20 7479 7065 2c20 7b7d 290a 2020  pe, type, {}).  
+0003e1a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0003e1b0: 662e 7361 6665 5f73 7472 696e 6728 7374  f.safe_string(st
+0003e1c0: 6174 7573 6573 2c20 7374 6174 7573 2c20  atuses, status, 
+0003e1d0: 7374 6174 7573 290a 0a20 2020 2064 6566  status)..    def
+0003e1e0: 2070 6172 7365 5f74 7261 6e73 6163 7469   parse_transacti
+0003e1f0: 6f6e 2873 656c 662c 2074 7261 6e73 6163  on(self, transac
+0003e200: 7469 6f6e 2c20 6375 7272 656e 6379 3d4e  tion, currency=N
+0003e210: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+0003e220: 2020 2020 2020 2020 2320 6665 7463 6844          # fetchD
+0003e230: 6570 6f73 6974 730a 2020 2020 2020 2020  eposits.        
+0003e240: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0003e250: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0003e260: 2020 2261 6d6f 756e 7422 3a20 2234 3530    "amount": "450
+0003e270: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0003e280: 2020 2020 2263 6f69 6e22 3a20 2255 5344      "coin": "USD
+0003e290: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
+0003e2a0: 2020 2020 226e 6574 776f 726b 223a 2022      "network": "
+0003e2b0: 4253 4322 2c0a 2020 2020 2020 2020 2320  BSC",.        # 
+0003e2c0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
+0003e2d0: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+0003e2e0: 2020 2022 6164 6472 6573 7322 3a20 2230     "address": "0
+0003e2f0: 7863 3963 3932 3363 3837 3334 3763 6130  xc9c923c87347ca0
+0003e300: 6633 3435 3164 3664 3330 3863 6538 3466  f3451d6d308ce84f
+0003e310: 3639 3162 3966 3530 3122 2c0a 2020 2020  691b9f501",.    
+0003e320: 2020 2020 2320 2020 2020 2020 2261 6464      #       "add
+0003e330: 7265 7373 5461 6722 3a20 2222 2c0a 2020  ressTag": "",.  
+0003e340: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
+0003e350: 7849 6422 3a20 2249 6e74 6572 6e61 6c20  xId": "Internal 
+0003e360: 7472 616e 7366 6572 2035 3133 3736 3632  transfer 5137662
+0003e370: 3739 3031 222c 0a20 2020 2020 2020 2023  7901",.        #
+0003e380: 2020 2020 2020 2022 696e 7365 7274 5469         "insertTi
+0003e390: 6d65 223a 2031 3631 3833 3934 3338 3130  me": 16183943810
+0003e3a0: 3030 2c0a 2020 2020 2020 2020 2320 2020  00,.        #   
+0003e3b0: 2020 2020 2274 7261 6e73 6665 7254 7970      "transferTyp
+0003e3c0: 6522 3a20 312c 0a20 2020 2020 2020 2023  e": 1,.        #
+0003e3d0: 2020 2020 2020 2022 636f 6e66 6972 6d54         "confirmT
+0003e3e0: 696d 6573 223a 2022 312f 3135 220a 2020  imes": "1/15".  
+0003e3f0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0003e400: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0003e410: 2320 6665 7463 6857 6974 6864 7261 7761  # fetchWithdrawa
+0003e420: 6c73 0a20 2020 2020 2020 2023 0a20 2020  ls.        #.   
+0003e430: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0003e440: 2020 2020 2023 2020 2020 2020 2022 6964       #       "id
+0003e450: 223a 2022 3639 6535 3361 6433 3035 3132  ": "69e53ad30512
+0003e460: 3462 3936 6234 3336 3638 6365 6162 3135  4b96b43668ceab15
+0003e470: 3861 3138 222c 0a20 2020 2020 2020 2023  8a18",.        #
+0003e480: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
+0003e490: 2022 3238 2e37 3522 2c0a 2020 2020 2020   "28.75",.      
+0003e4a0: 2020 2320 2020 2020 2020 2274 7261 6e73    #       "trans
+0003e4b0: 6163 7469 6f6e 4665 6522 3a20 2230 2e32  actionFee": "0.2
+0003e4c0: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
+0003e4d0: 2020 2020 2263 6f69 6e22 3a20 2258 5250      "coin": "XRP
+0003e4e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003e4f0: 2020 2022 7374 6174 7573 223a 2036 2c0a     "status": 6,.
+0003e500: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e510: 2261 6464 7265 7373 223a 2022 7233 5437  "address": "r3T7
+0003e520: 3566 754c 6a58 3531 6d6d 6662 3553 6b31  5fuLjX51mmfb5Sk1
+0003e530: 6b4d 4e75 6842 6742 504a 736a 7a61 222c  kMNuhBgBPJsjza",
+0003e540: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e550: 2022 6164 6472 6573 7354 6167 223a 2022   "addressTag": "
+0003e560: 3130 3132 3836 3932 3222 2c0a 2020 2020  101286922",.    
+0003e570: 2020 2020 2320 2020 2020 2020 2274 7849      #       "txI
+0003e580: 6422 3a20 2231 3941 3542 3234 4544 3042  d": "19A5B24ED0B
+0003e590: 3639 3745 3446 3045 3943 4430 3946 4342  697E4F0E9CD09FCB
+0003e5a0: 3030 3731 3730 4136 3035 4243 3933 4339  007170A605BC93C9
+0003e5b0: 3238 3042 3945 3633 3739 4335 4536 4546  280B9E6379C5E6EF
+0003e5c0: 3046 3635 4122 2c0a 2020 2020 2020 2020  0F65A",.        
+0003e5d0: 2320 2020 2020 2020 2261 7070 6c79 5469  #       "applyTi
+0003e5e0: 6d65 223a 2022 3230 3231 2d30 342d 3135  me": "2021-04-15
+0003e5f0: 2031 323a 3039 3a31 3622 2c0a 2020 2020   12:09:16",.    
+0003e600: 2020 2020 2320 2020 2020 2020 226e 6574      #       "net
+0003e610: 776f 726b 223a 2022 5852 5022 2c0a 2020  work": "XRP",.  
+0003e620: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
+0003e630: 7261 6e73 6665 7254 7970 6522 3a20 300a  ransferType": 0.
+0003e640: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0003e650: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0003e660: 2020 2320 6669 6174 2074 7261 6e73 6163    # fiat transac
+0003e670: 7469 6f6e 0a20 2020 2020 2020 2023 2077  tion.        # w
+0003e680: 6974 6864 7261 770a 2020 2020 2020 2020  ithdraw.        
+0003e690: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0003e6a0: 2320 2020 2020 2020 226f 7264 6572 4e6f  #       "orderNo
+0003e6b0: 223a 2022 434a 5736 3834 3839 3735 3531  ": "CJW684897551
+0003e6c0: 3339 3731 3731 3230 3022 2c0a 2020 2020  397171200",.    
+0003e6d0: 2020 2020 2320 2020 2020 2020 2266 6961      #       "fia
+0003e6e0: 7443 7572 7265 6e63 7922 3a20 2247 4250  tCurrency": "GBP
+0003e6f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003e700: 2020 2022 696e 6469 6361 7465 6441 6d6f     "indicatedAmo
+0003e710: 756e 7422 3a20 2232 392e 3939 222c 0a20  unt": "29.99",. 
+0003e720: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0003e730: 616d 6f75 6e74 223a 2022 3238 2e34 3922  amount": "28.49"
+0003e740: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e750: 2020 2274 6f74 616c 4665 6522 3a20 2231    "totalFee": "1
+0003e760: 2e35 3022 2c0a 2020 2020 2020 2020 2320  .50",.        # 
+0003e770: 2020 2020 2020 226d 6574 686f 6422 3a20        "method": 
+0003e780: 2262 616e 6b20 7472 616e 7366 6572 222c  "bank transfer",
+0003e790: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e7a0: 2022 7374 6174 7573 223a 2022 5375 6363   "status": "Succ
+0003e7b0: 6573 7366 756c 222c 0a20 2020 2020 2020  essful",.       
+0003e7c0: 2023 2020 2020 2020 2022 6372 6561 7465   #       "create
+0003e7d0: 5469 6d65 223a 2031 3631 3438 3938 3730  Time": 161489870
+0003e7e0: 3130 3030 2c0a 2020 2020 2020 2020 2320  1000,.        # 
+0003e7f0: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
+0003e800: 6522 3a20 3136 3134 3839 3838 3230 3030  e": 161489882000
+0003e810: 300a 2020 2020 2020 2020 2320 2020 2020  0.        #     
+0003e820: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+0003e830: 2020 2020 2320 6465 706f 7369 740a 2020      # deposit.  
+0003e840: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0003e850: 2020 2020 2020 2320 2020 2020 2020 226f        #       "o
+0003e860: 7264 6572 4e6f 223a 2022 3235 6365 6433  rderNo": "25ced3
+0003e870: 3730 3735 6331 3437 3062 6138 3933 3964  7075c1470ba8939d
+0003e880: 3064 6632 3331 3665 3233 222c 0a20 2020  0df2316e23",.   
+0003e890: 2020 2020 2023 2020 2020 2020 2022 6669       #       "fi
+0003e8a0: 6174 4375 7272 656e 6379 223a 2022 4555  atCurrency": "EU
+0003e8b0: 5222 2c0a 2020 2020 2020 2020 2320 2020  R",.        #   
+0003e8c0: 2020 2020 2274 7261 6e73 6163 7469 6f6e      "transaction
+0003e8d0: 5479 7065 223a 2030 2c0a 2020 2020 2020  Type": 0,.      
+0003e8e0: 2020 2320 2020 2020 2020 2269 6e64 6963    #       "indic
+0003e8f0: 6174 6564 416d 6f75 6e74 223a 2022 3135  atedAmount": "15
+0003e900: 2e30 3022 2c0a 2020 2020 2020 2020 2320  .00",.        # 
+0003e910: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
+0003e920: 2231 352e 3030 222c 0a20 2020 2020 2020  "15.00",.       
+0003e930: 2023 2020 2020 2020 2022 746f 7461 6c46   #       "totalF
+0003e940: 6565 223a 2022 302e 3030 222c 0a20 2020  ee": "0.00",.   
+0003e950: 2020 2020 2023 2020 2020 2020 2022 6d65       #       "me
+0003e960: 7468 6f64 223a 2022 6361 7264 222c 0a20  thod": "card",. 
+0003e970: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0003e980: 7374 6174 7573 223a 2022 4661 696c 6564  status": "Failed
+0003e990: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003e9a0: 2020 2022 6372 6561 7465 5469 6d65 223a     "createTime":
+0003e9b0: 2022 3136 3237 3530 3130 3236 3030 3022   "1627501026000"
+0003e9c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e9d0: 2020 2275 7064 6174 6554 696d 6522 3a20    "updateTime": 
+0003e9e0: 2231 3632 3735 3031 3032 3730 3030 220a  "1627501027000".
+0003e9f0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0003ea00: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0003ea10: 2020 2320 7769 7468 6472 6177 0a20 2020    # withdraw.   
+0003ea20: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0003ea30: 2020 2020 7b69 643a 2027 3961 3637 3632      {id: '9a6762
+0003ea40: 3862 3136 6261 3439 3838 6165 3230 6433  8b16ba4988ae20d3
+0003ea50: 3239 3333 3366 3136 6263 277d 0a20 2020  29333f16bc'}.   
+0003ea60: 2020 2020 2023 0a20 2020 2020 2020 2069       #.        i
+0003ea70: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+0003ea80: 7269 6e67 5f32 2874 7261 6e73 6163 7469  ring_2(transacti
+0003ea90: 6f6e 2c20 2769 6427 2c20 276f 7264 6572  on, 'id', 'order
+0003eaa0: 4e6f 2729 0a20 2020 2020 2020 2061 6464  No').        add
+0003eab0: 7265 7373 203d 2073 656c 662e 7361 6665  ress = self.safe
+0003eac0: 5f73 7472 696e 6728 7472 616e 7361 6374  _string(transact
+0003ead0: 696f 6e2c 2027 6164 6472 6573 7327 290a  ion, 'address').
+0003eae0: 2020 2020 2020 2020 7461 6720 3d20 7365          tag = se
+0003eaf0: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
+0003eb00: 7261 6e73 6163 7469 6f6e 2c20 2761 6464  ransaction, 'add
+0003eb10: 7265 7373 5461 6727 2920 2023 2073 6574  ressTag')  # set
+0003eb20: 2062 7574 2075 6e75 7365 640a 2020 2020   but unused.    
+0003eb30: 2020 2020 6966 2074 6167 2069 7320 6e6f      if tag is no
+0003eb40: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0003eb50: 2020 2020 6966 206c 656e 2874 6167 2920      if len(tag) 
+0003eb60: 3c20 313a 0a20 2020 2020 2020 2020 2020  < 1:.           
+0003eb70: 2020 2020 2074 6167 203d 204e 6f6e 650a       tag = None.
+0003eb80: 2020 2020 2020 2020 7478 6964 203d 2073          txid = s
+0003eb90: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0003eba0: 7472 616e 7361 6374 696f 6e2c 2027 7478  transaction, 'tx
+0003ebb0: 4964 2729 0a20 2020 2020 2020 2069 6620  Id').        if 
+0003ebc0: 2874 7869 6420 6973 206e 6f74 204e 6f6e  (txid is not Non
+0003ebd0: 6529 2061 6e64 2028 7478 6964 2e66 696e  e) and (txid.fin
+0003ebe0: 6428 2749 6e74 6572 6e61 6c20 7472 616e  d('Internal tran
+0003ebf0: 7366 6572 2027 2920 3e3d 2030 293a 0a20  sfer ') >= 0):. 
+0003ec00: 2020 2020 2020 2020 2020 2074 7869 6420             txid 
+0003ec10: 3d20 7478 6964 5b31 383a 5d0a 2020 2020  = txid[18:].    
+0003ec20: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
+0003ec30: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0003ec40: 675f 3228 7472 616e 7361 6374 696f 6e2c  g_2(transaction,
+0003ec50: 2027 636f 696e 272c 2027 6669 6174 4375   'coin', 'fiatCu
+0003ec60: 7272 656e 6379 2729 0a20 2020 2020 2020  rrency').       
+0003ec70: 2063 6f64 6520 3d20 7365 6c66 2e73 6166   code = self.saf
+0003ec80: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
+0003ec90: 6375 7272 656e 6379 4964 2c20 6375 7272  currencyId, curr
+0003eca0: 656e 6379 290a 2020 2020 2020 2020 7469  ency).        ti
+0003ecb0: 6d65 7374 616d 7020 3d20 4e6f 6e65 0a20  mestamp = None. 
+0003ecc0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0003ecd0: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
+0003ece0: 6567 6572 5f32 2874 7261 6e73 6163 7469  eger_2(transacti
+0003ecf0: 6f6e 2c20 2769 6e73 6572 7454 696d 6527  on, 'insertTime'
+0003ed00: 2c20 2763 7265 6174 6554 696d 6527 290a  , 'createTime').
+0003ed10: 2020 2020 2020 2020 6966 2074 696d 6573          if times
+0003ed20: 7461 6d70 2069 7320 4e6f 6e65 3a0a 2020  tamp is None:.  
+0003ed30: 2020 2020 2020 2020 2020 7469 6d65 7374            timest
+0003ed40: 616d 7020 3d20 7365 6c66 2e70 6172 7365  amp = self.parse
+0003ed50: 3836 3031 2873 656c 662e 7361 6665 5f73  8601(self.safe_s
+0003ed60: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
+0003ed70: 6e2c 2027 6170 706c 7954 696d 6527 2929  n, 'applyTime'))
+0003ed80: 0a20 2020 2020 2020 2075 7064 6174 6564  .        updated
+0003ed90: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
+0003eda0: 6567 6572 5f32 2874 7261 6e73 6163 7469  eger_2(transacti
+0003edb0: 6f6e 2c20 2773 7563 6365 7373 5469 6d65  on, 'successTime
+0003edc0: 272c 2027 7570 6461 7465 5469 6d65 2729  ', 'updateTime')
+0003edd0: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
+0003ede0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0003edf0: 2874 7261 6e73 6163 7469 6f6e 2c20 2774  (transaction, 't
+0003ee00: 7970 6527 290a 2020 2020 2020 2020 6966  ype').        if
+0003ee10: 2074 7970 6520 6973 204e 6f6e 653a 0a20   type is None:. 
+0003ee20: 2020 2020 2020 2020 2020 2074 7854 7970             txTyp
+0003ee30: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+0003ee40: 7269 6e67 2874 7261 6e73 6163 7469 6f6e  ring(transaction
+0003ee50: 2c20 2774 7261 6e73 6163 7469 6f6e 5479  , 'transactionTy
+0003ee60: 7065 2729 0a20 2020 2020 2020 2020 2020  pe').           
+0003ee70: 2069 6620 7478 5479 7065 2069 7320 6e6f   if txType is no
+0003ee80: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0003ee90: 2020 2020 2020 2020 7479 7065 203d 2027          type = '
+0003eea0: 6465 706f 7369 7427 2069 6620 2874 7854  deposit' if (txT
+0003eeb0: 7970 6520 3d3d 2027 3027 2920 656c 7365  ype == '0') else
+0003eec0: 2027 7769 7468 6472 6177 616c 270a 2020   'withdrawal'.  
+0003eed0: 2020 2020 2020 2020 2020 6c65 6761 6c4d            legalM
+0003eee0: 6f6e 6579 4375 7272 656e 6369 6573 4279  oneyCurrenciesBy
+0003eef0: 4964 203d 2073 656c 662e 7361 6665 5f76  Id = self.safe_v
+0003ef00: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
+0003ef10: 732c 2027 6c65 6761 6c4d 6f6e 6579 4375  s, 'legalMoneyCu
+0003ef20: 7272 656e 6369 6573 4279 4964 2729 0a20  rrenciesById'). 
+0003ef30: 2020 2020 2020 2020 2020 2063 6f64 6520             code 
+0003ef40: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0003ef50: 6e67 286c 6567 616c 4d6f 6e65 7943 7572  ng(legalMoneyCur
+0003ef60: 7265 6e63 6965 7342 7949 642c 2063 6f64  renciesById, cod
+0003ef70: 652c 2063 6f64 6529 0a20 2020 2020 2020  e, code).       
+0003ef80: 2073 7461 7475 7320 3d20 7365 6c66 2e70   status = self.p
+0003ef90: 6172 7365 5f74 7261 6e73 6163 7469 6f6e  arse_transaction
+0003efa0: 5f73 7461 7475 735f 6279 5f74 7970 6528  _status_by_type(
+0003efb0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0003efc0: 2874 7261 6e73 6163 7469 6f6e 2c20 2773  (transaction, 's
+0003efd0: 7461 7475 7327 292c 2074 7970 6529 0a20  tatus'), type). 
+0003efe0: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
+0003eff0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0003f000: 2874 7261 6e73 6163 7469 6f6e 2c20 2761  (transaction, 'a
+0003f010: 6d6f 756e 7427 290a 2020 2020 2020 2020  mount').        
+0003f020: 6665 6543 6f73 7420 3d20 7365 6c66 2e73  feeCost = self.s
+0003f030: 6166 655f 6e75 6d62 6572 5f32 2874 7261  afe_number_2(tra
+0003f040: 6e73 6163 7469 6f6e 2c20 2774 7261 6e73  nsaction, 'trans
+0003f050: 6163 7469 6f6e 4665 6527 2c20 2774 6f74  actionFee', 'tot
+0003f060: 616c 4665 6527 290a 2020 2020 2020 2020  alFee').        
+0003f070: 6665 6520 3d20 4e6f 6e65 0a20 2020 2020  fee = None.     
+0003f080: 2020 2069 6620 6665 6543 6f73 7420 6973     if feeCost is
+0003f090: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0003f0a0: 2020 2020 2020 2066 6565 203d 207b 2763         fee = {'c
+0003f0b0: 7572 7265 6e63 7927 3a20 636f 6465 2c20  urrency': code, 
+0003f0c0: 2763 6f73 7427 3a20 6665 6543 6f73 747d  'cost': feeCost}
+0003f0d0: 0a20 2020 2020 2020 2069 6e74 6572 6e61  .        interna
+0003f0e0: 6c20 3d20 7365 6c66 2e73 6166 655f 696e  l = self.safe_in
+0003f0f0: 7465 6765 7228 7472 616e 7361 6374 696f  teger(transactio
+0003f100: 6e2c 2027 7472 616e 7366 6572 5479 7065  n, 'transferType
+0003f110: 2729 0a20 2020 2020 2020 2069 6620 696e  ').        if in
+0003f120: 7465 726e 616c 2069 7320 6e6f 7420 4e6f  ternal is not No
+0003f130: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0003f140: 696e 7465 726e 616c 203d 2054 7275 6520  internal = True 
+0003f150: 6966 2069 6e74 6572 6e61 6c20 656c 7365  if internal else
+0003f160: 2046 616c 7365 0a20 2020 2020 2020 206e   False.        n
+0003f170: 6574 776f 726b 203d 2073 656c 662e 7361  etwork = self.sa
+0003f180: 6665 5f73 7472 696e 6728 7472 616e 7361  fe_string(transa
+0003f190: 6374 696f 6e2c 2027 6e65 7477 6f72 6b27  ction, 'network'
+0003f1a0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0003f1b0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0003f1c0: 696e 666f 273a 2074 7261 6e73 6163 7469  info': transacti
+0003f1d0: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
+0003f1e0: 2769 6427 3a20 6964 2c0a 2020 2020 2020  'id': id,.      
+0003f1f0: 2020 2020 2020 2774 7869 6427 3a20 7478        'txid': tx
+0003f200: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
+0003f210: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
+0003f220: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
+0003f230: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
+0003f240: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
+0003f250: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
+0003f260: 2020 2020 2027 6e65 7477 6f72 6b27 3a20       'network': 
+0003f270: 6e65 7477 6f72 6b2c 0a20 2020 2020 2020  network,.       
+0003f280: 2020 2020 2027 6164 6472 6573 7327 3a20       'address': 
+0003f290: 6164 6472 6573 732c 0a20 2020 2020 2020  address,.       
+0003f2a0: 2020 2020 2027 6164 6472 6573 7354 6f27       'addressTo'
+0003f2b0: 3a20 6164 6472 6573 732c 0a20 2020 2020  : address,.     
+0003f2c0: 2020 2020 2020 2027 6164 6472 6573 7346         'addressF
+0003f2d0: 726f 6d27 3a20 4e6f 6e65 2c0a 2020 2020  rom': None,.    
+0003f2e0: 2020 2020 2020 2020 2774 6167 273a 2074          'tag': t
+0003f2f0: 6167 2c0a 2020 2020 2020 2020 2020 2020  ag,.            
+0003f300: 2774 6167 546f 273a 2074 6167 2c0a 2020  'tagTo': tag,.  
+0003f310: 2020 2020 2020 2020 2020 2774 6167 4672            'tagFr
+0003f320: 6f6d 273a 204e 6f6e 652c 0a20 2020 2020  om': None,.     
+0003f330: 2020 2020 2020 2027 7479 7065 273a 2074         'type': t
+0003f340: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
+0003f350: 2027 616d 6f75 6e74 273a 2061 6d6f 756e   'amount': amoun
+0003f360: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
+0003f370: 6375 7272 656e 6379 273a 2063 6f64 652c  currency': code,
+0003f380: 0a20 2020 2020 2020 2020 2020 2027 7374  .            'st
+0003f390: 6174 7573 273a 2073 7461 7475 732c 0a20  atus': status,. 
+0003f3a0: 2020 2020 2020 2020 2020 2027 7570 6461             'upda
+0003f3b0: 7465 6427 3a20 7570 6461 7465 642c 0a20  ted': updated,. 
+0003f3c0: 2020 2020 2020 2020 2020 2027 696e 7465             'inte
+0003f3d0: 726e 616c 273a 2069 6e74 6572 6e61 6c2c  rnal': internal,
+0003f3e0: 0a20 2020 2020 2020 2020 2020 2027 6665  .            'fe
+0003f3f0: 6527 3a20 6665 652c 0a20 2020 2020 2020  e': fee,.       
+0003f400: 207d 0a0a 2020 2020 6465 6620 7061 7273   }..    def pars
+0003f410: 655f 7472 616e 7366 6572 5f73 7461 7475  e_transfer_statu
+0003f420: 7328 7365 6c66 2c20 7374 6174 7573 293a  s(self, status):
+0003f430: 0a20 2020 2020 2020 2073 7461 7475 7365  .        statuse
+0003f440: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+0003f450: 2020 2743 4f4e 4649 524d 4544 273a 2027    'CONFIRMED': '
+0003f460: 6f6b 272c 0a20 2020 2020 2020 207d 0a20  ok',.        }. 
+0003f470: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0003f480: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
+0003f490: 7461 7475 7365 732c 2073 7461 7475 732c  tatuses, status,
+0003f4a0: 2073 7461 7475 7329 0a0a 2020 2020 6465   status)..    de
+0003f4b0: 6620 7061 7273 655f 7472 616e 7366 6572  f parse_transfer
+0003f4c0: 2873 656c 662c 2074 7261 6e73 6665 722c  (self, transfer,
+0003f4d0: 2063 7572 7265 6e63 793d 4e6f 6e65 293a   currency=None):
+0003f4e0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0003f4f0: 2020 2023 2074 7261 6e73 6665 720a 2020     # transfer.  
+0003f500: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0003f510: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0003f520: 2320 2020 2020 2020 2020 2274 7261 6e49  #         "tranI
+0003f530: 6422 3a31 3335 3236 3835 3336 3233 0a20  d":13526853623. 
+0003f540: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0003f550: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0003f560: 2023 2066 6574 6368 5472 616e 7366 6572   # fetchTransfer
+0003f570: 730a 2020 2020 2020 2020 230a 2020 2020  s.        #.    
+0003f580: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0003f590: 2020 2020 2320 2020 2020 2020 2020 7469      #         ti
+0003f5a0: 6d65 7374 616d 703a 2031 3631 3436 3430  mestamp: 1614640
+0003f5b0: 3837 3830 3030 2c0a 2020 2020 2020 2020  878000,.        
+0003f5c0: 2320 2020 2020 2020 2020 6173 7365 743a  #         asset:
+0003f5d0: 2027 5553 4454 272c 0a20 2020 2020 2020   'USDT',.       
+0003f5e0: 2023 2020 2020 2020 2020 2061 6d6f 756e   #         amoun
+0003f5f0: 743a 2027 3235 272c 0a20 2020 2020 2020  t: '25',.       
+0003f600: 2023 2020 2020 2020 2020 2074 7970 653a   #         type:
+0003f610: 2027 4d41 494e 5f55 4d46 5554 5552 4527   'MAIN_UMFUTURE'
+0003f620: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003f630: 2020 2020 7374 6174 7573 3a20 2743 4f4e      status: 'CON
+0003f640: 4649 524d 4544 272c 0a20 2020 2020 2020  FIRMED',.       
+0003f650: 2023 2020 2020 2020 2020 2074 7261 6e49   #         tranI
+0003f660: 643a 2034 3330 3030 3132 3632 3438 0a20  d: 43000126248. 
+0003f670: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0003f680: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0003f690: 2069 6420 3d20 7365 6c66 2e73 6166 655f   id = self.safe_
+0003f6a0: 7374 7269 6e67 2874 7261 6e73 6665 722c  string(transfer,
+0003f6b0: 2027 7472 616e 4964 2729 0a20 2020 2020   'tranId').     
+0003f6c0: 2020 2063 7572 7265 6e63 7949 6420 3d20     currencyId = 
+0003f6d0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0003f6e0: 2874 7261 6e73 6665 722c 2027 6173 7365  (transfer, 'asse
+0003f6f0: 7427 290a 2020 2020 2020 2020 636f 6465  t').        code
+0003f700: 203d 2073 656c 662e 7361 6665 5f63 7572   = self.safe_cur
+0003f710: 7265 6e63 795f 636f 6465 2863 7572 7265  rency_code(curre
+0003f720: 6e63 7949 642c 2063 7572 7265 6e63 7929  ncyId, currency)
+0003f730: 0a20 2020 2020 2020 2061 6d6f 756e 7420  .        amount 
+0003f740: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
+0003f750: 6572 2874 7261 6e73 6665 722c 2027 616d  er(transfer, 'am
+0003f760: 6f75 6e74 2729 0a20 2020 2020 2020 2074  ount').        t
+0003f770: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
+0003f780: 7374 7269 6e67 2874 7261 6e73 6665 722c  string(transfer,
+0003f790: 2027 7479 7065 2729 0a20 2020 2020 2020   'type').       
+0003f7a0: 2066 726f 6d41 6363 6f75 6e74 203d 204e   fromAccount = N
+0003f7b0: 6f6e 650a 2020 2020 2020 2020 746f 4163  one.        toAc
+0003f7c0: 636f 756e 7420 3d20 4e6f 6e65 0a20 2020  count = None.   
+0003f7d0: 2020 2020 2061 6363 6f75 6e74 7342 7949       accountsByI
+0003f7e0: 6420 3d20 7365 6c66 2e73 6166 655f 7661  d = self.safe_va
+0003f7f0: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
+0003f800: 2c20 2761 6363 6f75 6e74 7342 7949 6427  , 'accountsById'
+0003f810: 2c20 7b7d 290a 2020 2020 2020 2020 6966  , {}).        if
+0003f820: 2074 7970 6520 6973 206e 6f74 204e 6f6e   type is not Non
+0003f830: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
+0003f840: 6172 7473 203d 2074 7970 652e 7370 6c69  arts = type.spli
+0003f850: 7428 275f 2729 0a20 2020 2020 2020 2020  t('_').         
+0003f860: 2020 2066 726f 6d41 6363 6f75 6e74 203d     fromAccount =
+0003f870: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0003f880: 2870 6172 7473 2c20 3029 0a20 2020 2020  (parts, 0).     
+0003f890: 2020 2020 2020 2074 6f41 6363 6f75 6e74         toAccount
+0003f8a0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0003f8b0: 7565 2870 6172 7473 2c20 3129 0a20 2020  ue(parts, 1).   
+0003f8c0: 2020 2020 2020 2020 2066 726f 6d41 6363           fromAcc
+0003f8d0: 6f75 6e74 203d 2073 656c 662e 7361 6665  ount = self.safe
+0003f8e0: 5f73 7472 696e 6728 6163 636f 756e 7473  _string(accounts
+0003f8f0: 4279 4964 2c20 6672 6f6d 4163 636f 756e  ById, fromAccoun
+0003f900: 742c 2066 726f 6d41 6363 6f75 6e74 290a  t, fromAccount).
+0003f910: 2020 2020 2020 2020 2020 2020 746f 4163              toAc
+0003f920: 636f 756e 7420 3d20 7365 6c66 2e73 6166  count = self.saf
+0003f930: 655f 7374 7269 6e67 2861 6363 6f75 6e74  e_string(account
+0003f940: 7342 7949 642c 2074 6f41 6363 6f75 6e74  sById, toAccount
+0003f950: 2c20 746f 4163 636f 756e 7429 0a20 2020  , toAccount).   
+0003f960: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+0003f970: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+0003f980: 6572 2874 7261 6e73 6665 722c 2027 7469  er(transfer, 'ti
+0003f990: 6d65 7374 616d 7027 290a 2020 2020 2020  mestamp').      
+0003f9a0: 2020 7374 6174 7573 203d 2073 656c 662e    status = self.
+0003f9b0: 7061 7273 655f 7472 616e 7366 6572 5f73  parse_transfer_s
+0003f9c0: 7461 7475 7328 7365 6c66 2e73 6166 655f  tatus(self.safe_
+0003f9d0: 7374 7269 6e67 2874 7261 6e73 6665 722c  string(transfer,
+0003f9e0: 2027 7374 6174 7573 2729 290a 2020 2020   'status')).    
+0003f9f0: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
+0003fa00: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+0003fa10: 2074 7261 6e73 6665 722c 0a20 2020 2020   transfer,.     
+0003fa20: 2020 2020 2020 2027 6964 273a 2069 642c         'id': id,
+0003fa30: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
+0003fa40: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
+0003fa50: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
+0003fa60: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
+0003fa70: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
+0003fa80: 616d 7029 2c0a 2020 2020 2020 2020 2020  amp),.          
+0003fa90: 2020 2763 7572 7265 6e63 7927 3a20 636f    'currency': co
+0003faa0: 6465 2c0a 2020 2020 2020 2020 2020 2020  de,.            
+0003fab0: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
+0003fac0: 2c0a 2020 2020 2020 2020 2020 2020 2766  ,.            'f
+0003fad0: 726f 6d41 6363 6f75 6e74 273a 2066 726f  romAccount': fro
+0003fae0: 6d41 6363 6f75 6e74 2c0a 2020 2020 2020  mAccount,.      
+0003faf0: 2020 2020 2020 2774 6f41 6363 6f75 6e74        'toAccount
+0003fb00: 273a 2074 6f41 6363 6f75 6e74 2c0a 2020  ': toAccount,.  
+0003fb10: 2020 2020 2020 2020 2020 2773 7461 7475            'statu
+0003fb20: 7327 3a20 7374 6174 7573 2c0a 2020 2020  s': status,.    
+0003fb30: 2020 2020 7d0a 0a20 2020 2064 6566 2070      }..    def p
+0003fb40: 6172 7365 5f69 6e63 6f6d 6528 7365 6c66  arse_income(self
+0003fb50: 2c20 696e 636f 6d65 2c20 6d61 726b 6574  , income, market
+0003fb60: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+0003fb70: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0003fb80: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0003fb90: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
+0003fba0: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+0003fbb0: 2020 2020 2020 2022 696e 636f 6d65 5479         "incomeTy
+0003fbc0: 7065 223a 2022 4655 4e44 494e 475f 4645  pe": "FUNDING_FE
+0003fbd0: 4522 2c0a 2020 2020 2020 2020 2320 2020  E",.        #   
+0003fbe0: 2020 2020 2269 6e63 6f6d 6522 3a20 2230      "income": "0
+0003fbf0: 2e30 3031 3334 3331 3722 2c0a 2020 2020  .00134317",.    
+0003fc00: 2020 2020 2320 2020 2020 2020 2261 7373      #       "ass
+0003fc10: 6574 223a 2022 5553 4454 222c 0a20 2020  et": "USDT",.   
+0003fc20: 2020 2020 2023 2020 2020 2020 2022 7469       #       "ti
+0003fc30: 6d65 223a 2022 3136 3231 3538 3430 3030  me": "1621584000
+0003fc40: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0003fc50: 2020 2020 2020 2269 6e66 6f22 3a20 2246        "info": "F
+0003fc60: 554e 4449 4e47 5f46 4545 222c 0a20 2020  UNDING_FEE",.   
+0003fc70: 2020 2020 2023 2020 2020 2020 2022 7472       #       "tr
+0003fc80: 616e 4964 223a 2022 3434 3830 3332 3139  anId": "44803219
+0003fc90: 3931 3737 3430 3434 3538 3022 2c0a 2020  91774044580",.  
+0003fca0: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
+0003fcb0: 7261 6465 4964 223a 2022 220a 2020 2020  radeId": "".    
+0003fcc0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0003fcd0: 2020 2020 230a 2020 2020 2020 2020 6d61      #.        ma
+0003fce0: 726b 6574 4964 203d 2073 656c 662e 7361  rketId = self.sa
+0003fcf0: 6665 5f73 7472 696e 6728 696e 636f 6d65  fe_string(income
+0003fd00: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
+0003fd10: 2020 2020 7379 6d62 6f6c 203d 2073 656c      symbol = sel
+0003fd20: 662e 7361 6665 5f73 796d 626f 6c28 6d61  f.safe_symbol(ma
+0003fd30: 726b 6574 4964 2c20 6d61 726b 6574 2c20  rketId, market, 
+0003fd40: 4e6f 6e65 2c20 2773 7761 7027 290a 2020  None, 'swap').  
+0003fd50: 2020 2020 2020 616d 6f75 6e74 203d 2073        amount = s
+0003fd60: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0003fd70: 696e 636f 6d65 2c20 2769 6e63 6f6d 6527  income, 'income'
+0003fd80: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
+0003fd90: 6379 4964 203d 2073 656c 662e 7361 6665  cyId = self.safe
+0003fda0: 5f73 7472 696e 6728 696e 636f 6d65 2c20  _string(income, 
+0003fdb0: 2761 7373 6574 2729 0a20 2020 2020 2020  'asset').       
+0003fdc0: 2063 6f64 6520 3d20 7365 6c66 2e73 6166   code = self.saf
+0003fdd0: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
+0003fde0: 6375 7272 656e 6379 4964 290a 2020 2020  currencyId).    
+0003fdf0: 2020 2020 6964 203d 2073 656c 662e 7361      id = self.sa
+0003fe00: 6665 5f73 7472 696e 6728 696e 636f 6d65  fe_string(income
+0003fe10: 2c20 2774 7261 6e49 6427 290a 2020 2020  , 'tranId').    
+0003fe20: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
+0003fe30: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+0003fe40: 7228 696e 636f 6d65 2c20 2774 696d 6527  r(income, 'time'
+0003fe50: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0003fe60: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0003fe70: 696e 666f 273a 2069 6e63 6f6d 652c 0a20  info': income,. 
+0003fe80: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+0003fe90: 6f6c 273a 2073 796d 626f 6c2c 0a20 2020  ol': symbol,.   
+0003fea0: 2020 2020 2020 2020 2027 636f 6465 273a           'code':
+0003feb0: 2063 6f64 652c 0a20 2020 2020 2020 2020   code,.         
+0003fec0: 2020 2027 7469 6d65 7374 616d 7027 3a20     'timestamp': 
+0003fed0: 7469 6d65 7374 616d 702c 0a20 2020 2020  timestamp,.     
+0003fee0: 2020 2020 2020 2027 6461 7465 7469 6d65         'datetime
+0003fef0: 273a 2073 656c 662e 6973 6f38 3630 3128  ': self.iso8601(
+0003ff00: 7469 6d65 7374 616d 7029 2c0a 2020 2020  timestamp),.    
+0003ff10: 2020 2020 2020 2020 2769 6427 3a20 6964          'id': id
+0003ff20: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0003ff30: 6d6f 756e 7427 3a20 616d 6f75 6e74 2c0a  mount': amount,.
+0003ff40: 2020 2020 2020 2020 7d0a 0a20 2020 2061          }..    a
+0003ff50: 7379 6e63 2064 6566 2074 7261 6e73 6665  sync def transfe
+0003ff60: 7228 7365 6c66 2c20 636f 6465 3a20 7374  r(self, code: st
+0003ff70: 722c 2061 6d6f 756e 742c 2066 726f 6d41  r, amount, fromA
+0003ff80: 6363 6f75 6e74 2c20 746f 4163 636f 756e  ccount, toAccoun
+0003ff90: 742c 2070 6172 616d 733d 7b7d 293a 0a20  t, params={}):. 
+0003ffa0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0003ffb0: 2020 2074 7261 6e73 6665 7220 6375 7272     transfer curr
+0003ffc0: 656e 6379 2069 6e74 6572 6e61 6c6c 7920  ency internally 
+0003ffd0: 6265 7477 6565 6e20 7761 6c6c 6574 7320  between wallets 
+0003ffe0: 6f6e 2074 6865 2073 616d 6520 6163 636f  on the same acco
+0003fff0: 756e 740a 2020 2020 2020 2020 7365 6520  unt.        see 
+00040000: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+00040010: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+00040020: 7069 646f 6373 2f73 706f 742f 656e 2f23  pidocs/spot/en/#
+00040030: 7573 6572 2d75 6e69 7665 7273 616c 2d74  user-universal-t
+00040040: 7261 6e73 6665 722d 7573 6572 5f64 6174  ransfer-user_dat
+00040050: 610a 2020 2020 2020 2020 7365 6520 6874  a.        see ht
+00040060: 7470 733a 2f2f 6269 6e61 6e63 652d 646f  tps://binance-do
+00040070: 6373 2e67 6974 6875 622e 696f 2f61 7069  cs.github.io/api
+00040080: 646f 6373 2f73 706f 742f 656e 2f23 6973  docs/spot/en/#is
+00040090: 6f6c 6174 6564 2d6d 6172 6769 6e2d 6163  olated-margin-ac
+000400a0: 636f 756e 742d 7472 616e 7366 6572 2d6d  count-transfer-m
+000400b0: 6172 6769 6e0a 2020 2020 2020 2020 3a70  argin.        :p
+000400c0: 6172 616d 2073 7472 2063 6f64 653a 2075  aram str code: u
+000400d0: 6e69 6669 6564 2063 7572 7265 6e63 7920  nified currency 
+000400e0: 636f 6465 0a20 2020 2020 2020 203a 7061  code.        :pa
+000400f0: 7261 6d20 666c 6f61 7420 616d 6f75 6e74  ram float amount
+00040100: 3a20 616d 6f75 6e74 2074 6f20 7472 616e  : amount to tran
+00040110: 7366 6572 0a20 2020 2020 2020 203a 7061  sfer.        :pa
+00040120: 7261 6d20 7374 7220 6672 6f6d 4163 636f  ram str fromAcco
+00040130: 756e 743a 2061 6363 6f75 6e74 2074 6f20  unt: account to 
+00040140: 7472 616e 7366 6572 2066 726f 6d0a 2020  transfer from.  
+00040150: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00040160: 2074 6f41 6363 6f75 6e74 3a20 6163 636f   toAccount: acco
+00040170: 756e 7420 746f 2074 7261 6e73 6665 7220  unt to transfer 
+00040180: 746f 0a20 2020 2020 2020 203a 7061 7261  to.        :para
+00040190: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+000401a0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+000401b0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+000401c0: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
+000401d0: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+000401e0: 7475 726e 7320 6469 6374 3a20 6120 6074  turns dict: a `t
+000401f0: 7261 6e73 6665 7220 7374 7275 6374 7572  ransfer structur
+00040200: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+00040210: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
+00040220: 7261 6e73 6665 722d 7374 7275 6374 7572  ransfer-structur
+00040230: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00040240: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00040250: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00040260: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
+00040270: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
+00040280: 6379 2863 6f64 6529 0a20 2020 2020 2020  cy(code).       
+00040290: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+000402a0: 2020 2020 2020 2020 2027 6173 7365 7427           'asset'
+000402b0: 3a20 6375 7272 656e 6379 5b27 6964 275d  : currency['id']
+000402c0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+000402d0: 6d6f 756e 7427 3a20 7365 6c66 2e63 7572  mount': self.cur
+000402e0: 7265 6e63 795f 746f 5f70 7265 6369 7369  rency_to_precisi
+000402f0: 6f6e 2863 6f64 652c 2061 6d6f 756e 7429  on(code, amount)
+00040300: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00040310: 2020 2020 7265 7175 6573 745b 2774 7970      request['typ
+00040320: 6527 5d20 3d20 7365 6c66 2e73 6166 655f  e'] = self.safe_
+00040330: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
+00040340: 7479 7065 2729 0a20 2020 2020 2020 206d  type').        m
+00040350: 6574 686f 6420 3d20 2773 6170 6950 6f73  ethod = 'sapiPos
+00040360: 7441 7373 6574 5472 616e 7366 6572 270a  tAssetTransfer'.
+00040370: 2020 2020 2020 2020 6966 2072 6571 7565          if reque
+00040380: 7374 5b27 7479 7065 275d 2069 7320 4e6f  st['type'] is No
+00040390: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000403a0: 7379 6d62 6f6c 203d 2073 656c 662e 7361  symbol = self.sa
+000403b0: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
+000403c0: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
+000403d0: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+000403e0: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
+000403f0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00040400: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+00040410: 7428 7061 7261 6d73 2c20 2773 796d 626f  t(params, 'symbo
+00040420: 6c27 290a 2020 2020 2020 2020 2020 2020  l').            
+00040430: 6672 6f6d 4964 203d 2073 656c 662e 636f  fromId = self.co
+00040440: 6e76 6572 745f 7479 7065 5f74 6f5f 6163  nvert_type_to_ac
+00040450: 636f 756e 7428 6672 6f6d 4163 636f 756e  count(fromAccoun
+00040460: 7429 2e75 7070 6572 2829 0a20 2020 2020  t).upper().     
+00040470: 2020 2020 2020 2074 6f49 6420 3d20 7365         toId = se
+00040480: 6c66 2e63 6f6e 7665 7274 5f74 7970 655f  lf.convert_type_
+00040490: 746f 5f61 6363 6f75 6e74 2874 6f41 6363  to_account(toAcc
+000404a0: 6f75 6e74 292e 7570 7065 7228 290a 2020  ount).upper().  
+000404b0: 2020 2020 2020 2020 2020 6966 2066 726f            if fro
+000404c0: 6d49 6420 3d3d 2027 4953 4f4c 4154 4544  mId == 'ISOLATED
+000404d0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+000404e0: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
+000404f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00040500: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00040510: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
+00040520: 6428 7365 6c66 2e69 6420 2b20 2720 7472  d(self.id + ' tr
+00040530: 616e 7366 6572 2829 2072 6571 7569 7265  ansfer() require
+00040540: 7320 7061 7261 6d73 5b22 7379 6d62 6f6c  s params["symbol
+00040550: 225d 2077 6865 6e20 6672 6f6d 4163 636f  "] when fromAcco
+00040560: 756e 7420 6973 2027 202b 2066 726f 6d41  unt is ' + fromA
+00040570: 6363 6f75 6e74 290a 2020 2020 2020 2020  ccount).        
+00040580: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00040590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000405a0: 2020 6672 6f6d 4964 203d 2073 656c 662e    fromId = self.
+000405b0: 6d61 726b 6574 5f69 6428 7379 6d62 6f6c  market_id(symbol
+000405c0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000405d0: 2074 6f49 6420 3d3d 2027 4953 4f4c 4154   toId == 'ISOLAT
+000405e0: 4544 273a 0a20 2020 2020 2020 2020 2020  ED':.           
+000405f0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+00040600: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00040610: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00040620: 6520 4172 6775 6d65 6e74 7352 6571 7569  e ArgumentsRequi
+00040630: 7265 6428 7365 6c66 2e69 6420 2b20 2720  red(self.id + ' 
+00040640: 7472 616e 7366 6572 2829 2072 6571 7569  transfer() requi
+00040650: 7265 7320 7061 7261 6d73 5b22 7379 6d62  res params["symb
+00040660: 6f6c 225d 2077 6865 6e20 746f 4163 636f  ol"] when toAcco
+00040670: 756e 7420 6973 2027 202b 2074 6f41 6363  unt is ' + toAcc
+00040680: 6f75 6e74 290a 2020 2020 2020 2020 2020  ount).          
+00040690: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000406a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000406b0: 746f 4964 203d 2073 656c 662e 6d61 726b  toId = self.mark
+000406c0: 6574 5f69 6428 7379 6d62 6f6c 290a 2020  et_id(symbol).  
+000406d0: 2020 2020 2020 2020 2020 6163 636f 756e            accoun
+000406e0: 7473 4279 4964 203d 2073 656c 662e 7361  tsById = self.sa
+000406f0: 6665 5f76 616c 7565 2873 656c 662e 6f70  fe_value(self.op
+00040700: 7469 6f6e 732c 2027 6163 636f 756e 7473  tions, 'accounts
+00040710: 4279 4964 272c 207b 7d29 0a20 2020 2020  ById', {}).     
+00040720: 2020 2020 2020 2066 726f 6d49 736f 6c61         fromIsola
+00040730: 7465 6420 3d20 6e6f 7420 2866 726f 6d49  ted = not (fromI
+00040740: 6420 696e 2061 6363 6f75 6e74 7342 7949  d in accountsByI
+00040750: 6429 0a20 2020 2020 2020 2020 2020 2074  d).            t
+00040760: 6f49 736f 6c61 7465 6420 3d20 6e6f 7420  oIsolated = not 
+00040770: 2874 6f49 6420 696e 2061 6363 6f75 6e74  (toId in account
+00040780: 7342 7949 6429 0a20 2020 2020 2020 2020  sById).         
+00040790: 2020 2069 6620 6672 6f6d 4973 6f6c 6174     if fromIsolat
+000407a0: 6564 206f 7220 746f 4973 6f6c 6174 6564  ed or toIsolated
+000407b0: 3a20 2023 2049 736f 6c61 7465 6420 6d61  :  # Isolated ma
+000407c0: 7267 696e 2074 7261 6e73 6665 720a 2020  rgin transfer.  
+000407d0: 2020 2020 2020 2020 2020 2020 2020 6672                fr
+000407e0: 6f6d 4675 7475 7265 203d 2066 726f 6d49  omFuture = fromI
+000407f0: 6420 3d3d 2027 554d 4655 5455 5245 2720  d == 'UMFUTURE' 
+00040800: 6f72 2066 726f 6d49 6420 3d3d 2027 434d  or fromId == 'CM
+00040810: 4655 5455 5245 270a 2020 2020 2020 2020  FUTURE'.        
+00040820: 2020 2020 2020 2020 746f 4675 7475 7265          toFuture
+00040830: 203d 2074 6f49 6420 3d3d 2027 554d 4655   = toId == 'UMFU
+00040840: 5455 5245 2720 6f72 2074 6f49 6420 3d3d  TURE' or toId ==
+00040850: 2027 434d 4655 5455 5245 270a 2020 2020   'CMFUTURE'.    
+00040860: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+00040870: 5370 6f74 203d 2066 726f 6d49 6420 3d3d  Spot = fromId ==
+00040880: 2027 4d41 494e 270a 2020 2020 2020 2020   'MAIN'.        
+00040890: 2020 2020 2020 2020 746f 5370 6f74 203d          toSpot =
+000408a0: 2074 6f49 6420 3d3d 2027 4d41 494e 270a   toId == 'MAIN'.
+000408b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000408c0: 6675 6e64 696e 6720 3d20 6672 6f6d 4964  funding = fromId
+000408d0: 203d 3d20 2746 554e 4449 4e47 2720 6f72   == 'FUNDING' or
+000408e0: 2074 6f49 6420 3d3d 2027 4655 4e44 494e   toId == 'FUNDIN
+000408f0: 4727 0a20 2020 2020 2020 2020 2020 2020  G'.             
+00040900: 2020 206d 696e 696e 6720 3d20 6672 6f6d     mining = from
+00040910: 4964 203d 3d20 274d 494e 494e 4727 206f  Id == 'MINING' o
+00040920: 7220 746f 4964 203d 3d20 274d 494e 494e  r toId == 'MININ
+00040930: 4727 0a20 2020 2020 2020 2020 2020 2020  G'.             
+00040940: 2020 206f 7074 696f 6e20 3d20 6672 6f6d     option = from
+00040950: 4964 203d 3d20 274f 5054 494f 4e27 206f  Id == 'OPTION' o
+00040960: 7220 746f 4964 203d 3d20 274f 5054 494f  r toId == 'OPTIO
+00040970: 4e27 0a20 2020 2020 2020 2020 2020 2020  N'.             
+00040980: 2020 2070 726f 6869 6269 7465 6457 6974     prohibitedWit
+00040990: 6849 736f 6c61 7465 6420 3d20 6672 6f6d  hIsolated = from
+000409a0: 4675 7475 7265 206f 7220 746f 4675 7475  Future or toFutu
+000409b0: 7265 206f 7220 6d69 6e69 6e67 206f 7220  re or mining or 
+000409c0: 6675 6e64 696e 6720 6f72 206f 7074 696f  funding or optio
+000409d0: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
+000409e0: 2020 6966 2028 6672 6f6d 4973 6f6c 6174    if (fromIsolat
+000409f0: 6564 206f 7220 746f 4973 6f6c 6174 6564  ed or toIsolated
+00040a00: 2920 616e 6420 7072 6f68 6962 6974 6564  ) and prohibited
+00040a10: 5769 7468 4973 6f6c 6174 6564 3a0a 2020  WithIsolated:.  
+00040a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040a30: 2020 7261 6973 6520 4261 6452 6571 7565    raise BadReque
+00040a40: 7374 2873 656c 662e 6964 202b 2027 2074  st(self.id + ' t
+00040a50: 7261 6e73 6665 7228 2920 646f 6573 206e  ransfer() does n
+00040a60: 6f74 2061 6c6c 6f77 2074 7261 6e73 6665  ot allow transfe
+00040a70: 7273 2062 6574 7765 656e 2027 202b 2066  rs between ' + f
+00040a80: 726f 6d41 6363 6f75 6e74 202b 2027 2061  romAccount + ' a
+00040a90: 6e64 2027 202b 2074 6f41 6363 6f75 6e74  nd ' + toAccount
+00040aa0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00040ab0: 2020 656c 6966 2074 6f53 706f 7420 616e    elif toSpot an
+00040ac0: 6420 6672 6f6d 4973 6f6c 6174 6564 3a0a  d fromIsolated:.
+00040ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040ae0: 2020 2020 6d65 7468 6f64 203d 2027 7361      method = 'sa
+00040af0: 7069 506f 7374 4d61 7267 696e 4973 6f6c  piPostMarginIsol
+00040b00: 6174 6564 5472 616e 7366 6572 270a 2020  atedTransfer'.  
+00040b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040b20: 2020 7265 7175 6573 745b 2774 7261 6e73    request['trans
+00040b30: 4672 6f6d 275d 203d 2027 4953 4f4c 4154  From'] = 'ISOLAT
+00040b40: 4544 5f4d 4152 4749 4e27 0a20 2020 2020  ED_MARGIN'.     
+00040b50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00040b60: 6571 7565 7374 5b27 7472 616e 7354 6f27  equest['transTo'
+00040b70: 5d20 3d20 2753 504f 5427 0a20 2020 2020  ] = 'SPOT'.     
+00040b80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00040b90: 6571 7565 7374 5b27 7379 6d62 6f6c 275d  equest['symbol']
+00040ba0: 203d 2066 726f 6d49 640a 2020 2020 2020   = fromId.      
+00040bb0: 2020 2020 2020 2020 2020 656c 6966 2066            elif f
+00040bc0: 726f 6d53 706f 7420 616e 6420 746f 4973  romSpot and toIs
+00040bd0: 6f6c 6174 6564 3a0a 2020 2020 2020 2020  olated:.        
+00040be0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00040bf0: 6f64 203d 2027 7361 7069 506f 7374 4d61  od = 'sapiPostMa
+00040c00: 7267 696e 4973 6f6c 6174 6564 5472 616e  rginIsolatedTran
+00040c10: 7366 6572 270a 2020 2020 2020 2020 2020  sfer'.          
+00040c20: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00040c30: 745b 2774 7261 6e73 4672 6f6d 275d 203d  t['transFrom'] =
+00040c40: 2027 5350 4f54 270a 2020 2020 2020 2020   'SPOT'.        
+00040c50: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00040c60: 6573 745b 2774 7261 6e73 546f 275d 203d  est['transTo'] =
+00040c70: 2027 4953 4f4c 4154 4544 5f4d 4152 4749   'ISOLATED_MARGI
+00040c80: 4e27 0a20 2020 2020 2020 2020 2020 2020  N'.             
+00040c90: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00040ca0: 7379 6d62 6f6c 275d 203d 2074 6f49 640a  symbol'] = toId.
+00040cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040cc0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00040cd0: 2020 2020 2020 2020 2020 6966 2066 726f            if fro
+00040ce0: 6d49 736f 6c61 7465 643a 0a20 2020 2020  mIsolated:.     
+00040cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040d00: 2020 2072 6571 7565 7374 5b27 6672 6f6d     request['from
+00040d10: 5379 6d62 6f6c 275d 203d 2066 726f 6d49  Symbol'] = fromI
+00040d20: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+00040d30: 2020 2020 2020 2020 2020 6672 6f6d 4964            fromId
+00040d40: 203d 2027 4953 4f4c 4154 4544 4d41 5247   = 'ISOLATEDMARG
+00040d50: 494e 270a 2020 2020 2020 2020 2020 2020  IN'.            
+00040d60: 2020 2020 2020 2020 6966 2074 6f49 736f          if toIso
+00040d70: 6c61 7465 643a 0a20 2020 2020 2020 2020  lated:.         
+00040d80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00040d90: 6571 7565 7374 5b27 746f 5379 6d62 6f6c  equest['toSymbol
+00040da0: 275d 203d 2074 6f49 640a 2020 2020 2020  '] = toId.      
+00040db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040dc0: 2020 746f 4964 203d 2027 4953 4f4c 4154    toId = 'ISOLAT
+00040dd0: 4544 4d41 5247 494e 270a 2020 2020 2020  EDMARGIN'.      
+00040de0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00040df0: 7175 6573 745b 2774 7970 6527 5d20 3d20  quest['type'] = 
+00040e00: 6672 6f6d 4964 202b 2027 5f27 202b 2074  fromId + '_' + t
+00040e10: 6f49 640a 2020 2020 2020 2020 2020 2020  oId.            
+00040e20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00040e30: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
+00040e40: 7970 6527 5d20 3d20 6672 6f6d 4964 202b  ype'] = fromId +
+00040e50: 2027 5f27 202b 2074 6f49 640a 2020 2020   '_' + toId.    
+00040e60: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
+00040e70: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
+00040e80: 7479 7065 2729 0a20 2020 2020 2020 2072  type').        r
+00040e90: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
+00040ea0: 6765 7461 7474 7228 7365 6c66 2c20 6d65  getattr(self, me
+00040eb0: 7468 6f64 2928 7365 6c66 2e65 7874 656e  thod)(self.exten
+00040ec0: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00040ed0: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+00040ee0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+00040ef0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040f00: 2274 7261 6e49 6422 3a31 3335 3236 3835  "tranId":1352685
+00040f10: 3336 3233 0a20 2020 2020 2020 2023 2020  3623.        #  
+00040f20: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00040f30: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00040f40: 6c66 2e70 6172 7365 5f74 7261 6e73 6665  lf.parse_transfe
+00040f50: 7228 7265 7370 6f6e 7365 2c20 6375 7272  r(response, curr
+00040f60: 656e 6379 290a 0a20 2020 2061 7379 6e63  ency)..    async
+00040f70: 2064 6566 2066 6574 6368 5f74 7261 6e73   def fetch_trans
+00040f80: 6665 7273 2873 656c 662c 2063 6f64 653a  fers(self, code:
+00040f90: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+00040fa0: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
+00040fb0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00040fc0: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
+00040fd0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+00040fe0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00040ff0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00041000: 2066 6574 6368 2061 2068 6973 746f 7279   fetch a history
+00041010: 206f 6620 696e 7465 726e 616c 2074 7261   of internal tra
+00041020: 6e73 6665 7273 206d 6164 6520 6f6e 2061  nsfers made on a
+00041030: 6e20 6163 636f 756e 740a 2020 2020 2020  n account.      
+00041040: 2020 3a70 6172 616d 2073 7472 7c4e 6f6e    :param str|Non
+00041050: 6520 636f 6465 3a20 756e 6966 6965 6420  e code: unified 
+00041060: 6375 7272 656e 6379 2063 6f64 6520 6f66  currency code of
+00041070: 2074 6865 2063 7572 7265 6e63 7920 7472   the currency tr
+00041080: 616e 7366 6572 7265 640a 2020 2020 2020  ansferred.      
+00041090: 2020 3a70 6172 616d 2069 6e74 7c4e 6f6e    :param int|Non
+000410a0: 6520 7369 6e63 653a 2074 6865 2065 6172  e since: the ear
+000410b0: 6c69 6573 7420 7469 6d65 2069 6e20 6d73  liest time in ms
+000410c0: 2074 6f20 6665 7463 6820 7472 616e 7366   to fetch transf
+000410d0: 6572 7320 666f 720a 2020 2020 2020 2020  ers for.        
+000410e0: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+000410f0: 6c69 6d69 743a 2074 6865 206d 6178 696d  limit: the maxim
+00041100: 756d 206e 756d 6265 7220 6f66 2074 7261  um number of tra
+00041110: 6e73 6665 7273 2073 7472 7563 7475 7265  nsfers structure
+00041120: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
+00041130: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00041140: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+00041150: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00041160: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
+00041170: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
+00041180: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+00041190: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
+000411a0: 6f66 2060 7472 616e 7366 6572 2073 7472  of `transfer str
+000411b0: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+000411c0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+000411d0: 2f3f 6964 3d74 7261 6e73 6665 722d 7374  /?id=transfer-st
+000411e0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+000411f0: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
+00041200: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+00041210: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00041220: 6375 7272 656e 6379 203d 204e 6f6e 650a  currency = None.
+00041230: 2020 2020 2020 2020 6966 2063 6f64 6520          if code 
+00041240: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00041250: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+00041260: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+00041270: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+00041280: 6465 6661 756c 7454 7970 6520 3d20 7365  defaultType = se
+00041290: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
+000412a0: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
+000412b0: 6665 7463 6854 7261 6e73 6665 7273 272c  fetchTransfers',
+000412c0: 2027 6465 6661 756c 7454 7970 6527 2c20   'defaultType', 
+000412d0: 2773 706f 7427 290a 2020 2020 2020 2020  'spot').        
+000412e0: 6672 6f6d 4163 636f 756e 7420 3d20 7365  fromAccount = se
+000412f0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00041300: 6172 616d 732c 2027 6672 6f6d 4163 636f  arams, 'fromAcco
+00041310: 756e 7427 2c20 6465 6661 756c 7454 7970  unt', defaultTyp
+00041320: 6529 0a20 2020 2020 2020 2064 6566 6175  e).        defau
+00041330: 6c74 546f 203d 2027 7370 6f74 2720 6966  ltTo = 'spot' if
+00041340: 2028 6672 6f6d 4163 636f 756e 7420 3d3d   (fromAccount ==
+00041350: 2027 6675 7475 7265 2729 2065 6c73 6520   'future') else 
+00041360: 2766 7574 7572 6527 0a20 2020 2020 2020  'future'.       
+00041370: 2074 6f41 6363 6f75 6e74 203d 2073 656c   toAccount = sel
+00041380: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00041390: 7261 6d73 2c20 2774 6f41 6363 6f75 6e74  rams, 'toAccount
+000413a0: 272c 2064 6566 6175 6c74 546f 290a 2020  ', defaultTo).  
+000413b0: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
+000413c0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+000413d0: 7261 6d73 2c20 2774 7970 6527 290a 2020  rams, 'type').  
+000413e0: 2020 2020 2020 6163 636f 756e 7473 4279        accountsBy
+000413f0: 5479 7065 203d 2073 656c 662e 7361 6665  Type = self.safe
+00041400: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
+00041410: 6f6e 732c 2027 6163 636f 756e 7473 4279  ons, 'accountsBy
+00041420: 5479 7065 272c 207b 7d29 0a20 2020 2020  Type', {}).     
+00041430: 2020 2066 726f 6d49 6420 3d20 7365 6c66     fromId = self
+00041440: 2e73 6166 655f 7374 7269 6e67 2861 6363  .safe_string(acc
+00041450: 6f75 6e74 7342 7954 7970 652c 2066 726f  ountsByType, fro
+00041460: 6d41 6363 6f75 6e74 290a 2020 2020 2020  mAccount).      
+00041470: 2020 746f 4964 203d 2073 656c 662e 7361    toId = self.sa
+00041480: 6665 5f73 7472 696e 6728 6163 636f 756e  fe_string(accoun
+00041490: 7473 4279 5479 7065 2c20 746f 4163 636f  tsByType, toAcco
+000414a0: 756e 7429 0a20 2020 2020 2020 2069 6620  unt).        if 
+000414b0: 7479 7065 2069 7320 4e6f 6e65 3a0a 2020  type is None:.  
+000414c0: 2020 2020 2020 2020 2020 6966 2066 726f            if fro
+000414d0: 6d49 6420 6973 204e 6f6e 653a 0a20 2020  mId is None:.   
+000414e0: 2020 2020 2020 2020 2020 2020 206b 6579               key
+000414f0: 7320 3d20 6c69 7374 2861 6363 6f75 6e74  s = list(account
+00041500: 7342 7954 7970 652e 6b65 7973 2829 290a  sByType.keys()).
+00041510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041520: 7261 6973 6520 4578 6368 616e 6765 4572  raise ExchangeEr
+00041530: 726f 7228 7365 6c66 2e69 6420 2b20 2720  ror(self.id + ' 
+00041540: 6672 6f6d 4163 636f 756e 7420 7061 7261  fromAccount para
+00041550: 6d65 7465 7220 6d75 7374 2062 6520 6f6e  meter must be on
+00041560: 6520 6f66 2027 202b 2027 2c20 272e 6a6f  e of ' + ', '.jo
+00041570: 696e 286b 6579 7329 290a 2020 2020 2020  in(keys)).      
+00041580: 2020 2020 2020 6966 2074 6f49 6420 6973        if toId is
+00041590: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000415a0: 2020 2020 2020 206b 6579 7320 3d20 6c69         keys = li
+000415b0: 7374 2861 6363 6f75 6e74 7342 7954 7970  st(accountsByTyp
+000415c0: 652e 6b65 7973 2829 290a 2020 2020 2020  e.keys()).      
+000415d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000415e0: 4578 6368 616e 6765 4572 726f 7228 7365  ExchangeError(se
+000415f0: 6c66 2e69 6420 2b20 2720 746f 4163 636f  lf.id + ' toAcco
+00041600: 756e 7420 7061 7261 6d65 7465 7220 6d75  unt parameter mu
+00041610: 7374 2062 6520 6f6e 6520 6f66 2027 202b  st be one of ' +
+00041620: 2027 2c20 272e 6a6f 696e 286b 6579 7329   ', '.join(keys)
+00041630: 290a 2020 2020 2020 2020 2020 2020 7479  ).            ty
+00041640: 7065 203d 2066 726f 6d49 6420 2b20 275f  pe = fromId + '_
+00041650: 2720 2b20 746f 4964 0a20 2020 2020 2020  ' + toId.       
+00041660: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+00041670: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
+00041680: 2074 7970 652c 0a20 2020 2020 2020 207d   type,.        }
+00041690: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
+000416a0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+000416b0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+000416c0: 7374 5b27 7374 6172 7454 696d 6527 5d20  st['startTime'] 
+000416d0: 3d20 7369 6e63 650a 2020 2020 2020 2020  = since.        
+000416e0: 6966 206c 696d 6974 2069 7320 6e6f 7420  if limit is not 
+000416f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00041700: 2020 7265 7175 6573 745b 2773 697a 6527    request['size'
+00041710: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
+00041720: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
+00041730: 6974 2073 656c 662e 7361 7069 4765 7441  it self.sapiGetA
+00041740: 7373 6574 5472 616e 7366 6572 2873 656c  ssetTransfer(sel
+00041750: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+00041760: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+00041770: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00041780: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00041790: 2020 2020 2020 2074 6f74 616c 3a20 332c         total: 3,
+000417a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000417b0: 2020 2072 6f77 733a 205b 0a20 2020 2020     rows: [.     
+000417c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000417d0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+000417e0: 2020 2020 2020 2020 2020 2020 2074 696d               tim
+000417f0: 6573 7461 6d70 3a20 3136 3134 3634 3038  estamp: 16146408
+00041800: 3738 3030 302c 0a20 2020 2020 2020 2023  78000,.        #
+00041810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041820: 2061 7373 6574 3a20 2755 5344 5427 2c0a   asset: 'USDT',.
+00041830: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00041840: 2020 2020 2020 2020 2020 616d 6f75 6e74            amount
+00041850: 3a20 2732 3527 2c0a 2020 2020 2020 2020  : '25',.        
+00041860: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00041870: 2020 7479 7065 3a20 274d 4149 4e5f 554d    type: 'MAIN_UM
+00041880: 4655 5455 5245 272c 0a20 2020 2020 2020  FUTURE',.       
+00041890: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000418a0: 2020 2073 7461 7475 733a 2027 434f 4e46     status: 'CONF
+000418b0: 4952 4d45 4427 2c0a 2020 2020 2020 2020  IRMED',.        
+000418c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000418d0: 2020 7472 616e 4964 3a20 3433 3030 3031    tranId: 430001
+000418e0: 3236 3234 380a 2020 2020 2020 2020 2320  26248.        # 
+000418f0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00041900: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041910: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+00041920: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+00041930: 2020 2020 2072 6f77 7320 3d20 7365 6c66       rows = self
+00041940: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
+00041950: 6f6e 7365 2c20 2772 6f77 7327 2c20 5b5d  onse, 'rows', []
+00041960: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00041970: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
+00041980: 7366 6572 7328 726f 7773 2c20 6375 7272  sfers(rows, curr
+00041990: 656e 6379 2c20 7369 6e63 652c 206c 696d  ency, since, lim
+000419a0: 6974 290a 0a20 2020 2061 7379 6e63 2064  it)..    async d
+000419b0: 6566 2066 6574 6368 5f64 6570 6f73 6974  ef fetch_deposit
+000419c0: 5f61 6464 7265 7373 2873 656c 662c 2063  _address(self, c
+000419d0: 6f64 653a 2073 7472 2c20 7061 7261 6d73  ode: str, params
+000419e0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+000419f0: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00041a00: 7468 6520 6465 706f 7369 7420 6164 6472  the deposit addr
+00041a10: 6573 7320 666f 7220 6120 6375 7272 656e  ess for a curren
+00041a20: 6379 2061 7373 6f63 6961 7465 6420 7769  cy associated wi
+00041a30: 7468 2073 656c 6620 6163 636f 756e 740a  th self account.
+00041a40: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00041a50: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
+00041a60: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
+00041a70: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+00041a80: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+00041a90: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+00041aa0: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
+00041ab0: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
+00041ac0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00041ad0: 7320 6469 6374 3a20 616e 2060 6164 6472  s dict: an `addr
+00041ae0: 6573 7320 7374 7275 6374 7572 6520 3c68  ess structure <h
+00041af0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00041b00: 2e63 6f6d 2f23 2f3f 6964 3d61 6464 7265  .com/#/?id=addre
+00041b10: 7373 2d73 7472 7563 7475 7265 3e60 0a20  ss-structure>`. 
+00041b20: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00041b30: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+00041b40: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00041b50: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
+00041b60: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
+00041b70: 6465 290a 2020 2020 2020 2020 7265 7175  de).        requ
+00041b80: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+00041b90: 2020 2020 2763 6f69 6e27 3a20 6375 7272      'coin': curr
+00041ba0: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
+00041bb0: 2020 2020 2020 2020 2320 276e 6574 776f          # 'netwo
+00041bc0: 726b 273a 2027 4554 4827 2c20 2023 2027  rk': 'ETH',  # '
+00041bd0: 4253 4327 2c20 2758 4d52 272c 2079 6f75  BSC', 'XMR', you
+00041be0: 2063 616e 2067 6574 206e 6574 776f 726b   can get network
+00041bf0: 2061 6e64 2069 7344 6566 6175 6c74 2069   and isDefault i
+00041c00: 6e20 6e65 7477 6f72 6b4c 6973 7420 696e  n networkList in
+00041c10: 2074 6865 2072 6573 706f 6e73 6520 6f66   the response of
+00041c20: 2073 6170 6947 6574 4361 7069 7461 6c43   sapiGetCapitalC
+00041c30: 6f6e 6669 6744 6574 6169 6c0a 2020 2020  onfigDetail.    
+00041c40: 2020 2020 7d0a 2020 2020 2020 2020 6e65      }.        ne
+00041c50: 7477 6f72 6b73 203d 2073 656c 662e 7361  tworks = self.sa
+00041c60: 6665 5f76 616c 7565 2873 656c 662e 6f70  fe_value(self.op
+00041c70: 7469 6f6e 732c 2027 6e65 7477 6f72 6b73  tions, 'networks
+00041c80: 272c 207b 7d29 0a20 2020 2020 2020 206e  ', {}).        n
+00041c90: 6574 776f 726b 203d 2073 656c 662e 7361  etwork = self.sa
+00041ca0: 6665 5f73 7472 696e 675f 7570 7065 7228  fe_string_upper(
+00041cb0: 7061 7261 6d73 2c20 276e 6574 776f 726b  params, 'network
+00041cc0: 2729 2020 2320 7365 6c66 206c 696e 6520  ')  # self line 
+00041cd0: 616c 6c6f 7773 2074 6865 2075 7365 7220  allows the user 
+00041ce0: 746f 2073 7065 6369 6679 2065 6974 6865  to specify eithe
+00041cf0: 7220 4552 4332 3020 6f72 2045 5448 0a20  r ERC20 or ETH. 
+00041d00: 2020 2020 2020 206e 6574 776f 726b 203d         network =
+00041d10: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00041d20: 6728 6e65 7477 6f72 6b73 2c20 6e65 7477  g(networks, netw
+00041d30: 6f72 6b2c 206e 6574 776f 726b 2920 2023  ork, network)  #
+00041d40: 2068 616e 646c 6520 4552 4332 303e 4554   handle ERC20>ET
+00041d50: 4820 616c 6961 730a 2020 2020 2020 2020  H alias.        
+00041d60: 6966 206e 6574 776f 726b 2069 7320 6e6f  if network is no
+00041d70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00041d80: 2020 2020 7265 7175 6573 745b 276e 6574      request['net
+00041d90: 776f 726b 275d 203d 206e 6574 776f 726b  work'] = network
+00041da0: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+00041db0: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
+00041dc0: 7061 7261 6d73 2c20 276e 6574 776f 726b  params, 'network
+00041dd0: 2729 0a20 2020 2020 2020 2023 2068 6173  ').        # has
+00041de0: 2073 7570 706f 7274 2066 6f72 2074 6865   support for the
+00041df0: 2027 6e65 7477 6f72 6b27 2070 6172 616d   'network' param
+00041e00: 6574 6572 0a20 2020 2020 2020 2023 2068  eter.        # h
+00041e10: 7474 7073 3a2f 2f62 696e 616e 6365 2d64  ttps://binance-d
+00041e20: 6f63 732e 6769 7468 7562 2e69 6f2f 6170  ocs.github.io/ap
+00041e30: 6964 6f63 732f 7370 6f74 2f65 6e2f 2364  idocs/spot/en/#d
+00041e40: 6570 6f73 6974 2d61 6464 7265 7373 2d73  eposit-address-s
+00041e50: 7570 706f 7274 696e 672d 6e65 7477 6f72  upporting-networ
+00041e60: 6b2d 7573 6572 5f64 6174 610a 2020 2020  k-user_data.    
+00041e70: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00041e80: 7761 6974 2073 656c 662e 7361 7069 4765  wait self.sapiGe
+00041e90: 7443 6170 6974 616c 4465 706f 7369 7441  tCapitalDepositA
+00041ea0: 6464 7265 7373 2873 656c 662e 6578 7465  ddress(self.exte
+00041eb0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00041ec0: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00041ed0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00041ee0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041ef0: 2063 7572 7265 6e63 793a 2027 5852 5027   currency: 'XRP'
+00041f00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00041f10: 2020 2020 6164 6472 6573 733a 2027 7245      address: 'rE
+00041f20: 6238 544b 3367 4267 6b35 6175 5a6b 7763  b8TK3gBgk5auZkwc
+00041f30: 3673 486e 7772 4756 4a48 3844 7561 4c68  6sHnwrGVJH8DuaLh
+00041f40: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00041f50: 2020 2020 2074 6167 3a20 2731 3038 3631       tag: '10861
+00041f60: 3832 3632 272c 0a20 2020 2020 2020 2023  8262',.        #
+00041f70: 2020 2020 2020 2020 2069 6e66 6f3a 207b           info: {
+00041f80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00041f90: 2020 2020 2020 2063 6f69 6e3a 2027 5852         coin: 'XR
+00041fa0: 5027 2c0a 2020 2020 2020 2020 2320 2020  P',.        #   
+00041fb0: 2020 2020 2020 2020 2020 6164 6472 6573            addres
+00041fc0: 733a 2027 7245 6238 544b 3367 4267 6b35  s: 'rEb8TK3gBgk5
+00041fd0: 6175 5a6b 7763 3673 486e 7772 4756 4a48  auZkwc6sHnwrGVJH
+00041fe0: 3844 7561 4c68 272c 0a20 2020 2020 2020  8DuaLh',.       
+00041ff0: 2023 2020 2020 2020 2020 2020 2020 2074   #             t
+00042000: 6167 3a20 2731 3038 3631 3832 3632 272c  ag: '108618262',
+00042010: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042020: 2020 2020 2020 2075 726c 3a20 2768 7474         url: 'htt
+00042030: 7073 3a2f 2f62 6974 686f 6d70 2e63 6f6d  ps://bithomp.com
+00042040: 2f65 7870 6c6f 7265 722f 7245 6238 544b  /explorer/rEb8TK
+00042050: 3367 4267 6b35 6175 5a6b 7763 3673 486e  3gBgk5auZkwc6sHn
+00042060: 7772 4756 4a48 3844 7561 4c68 270a 2020  wrGVJH8DuaLh'.  
+00042070: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042080: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
+00042090: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+000420a0: 2020 2020 6164 6472 6573 7320 3d20 7365      address = se
+000420b0: 6c66 2e73 6166 655f 7374 7269 6e67 2872  lf.safe_string(r
+000420c0: 6573 706f 6e73 652c 2027 6164 6472 6573  esponse, 'addres
+000420d0: 7327 290a 2020 2020 2020 2020 7572 6c20  s').        url 
+000420e0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+000420f0: 6e67 2872 6573 706f 6e73 652c 2027 7572  ng(response, 'ur
+00042100: 6c27 290a 2020 2020 2020 2020 696d 706c  l').        impl
+00042110: 6965 644e 6574 776f 726b 203d 204e 6f6e  iedNetwork = Non
+00042120: 650a 2020 2020 2020 2020 6966 2075 726c  e.        if url
+00042130: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00042140: 2020 2020 2020 2020 2020 7265 7665 7273            revers
+00042150: 654e 6574 776f 726b 7320 3d20 7365 6c66  eNetworks = self
+00042160: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
+00042170: 2e6f 7074 696f 6e73 2c20 2772 6576 6572  .options, 'rever
+00042180: 7365 4e65 7477 6f72 6b73 272c 207b 7d29  seNetworks', {})
+00042190: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+000421a0: 7473 203d 2075 726c 2e73 706c 6974 2827  ts = url.split('
+000421b0: 2f27 290a 2020 2020 2020 2020 2020 2020  /').            
+000421c0: 746f 704c 6576 656c 203d 2073 656c 662e  topLevel = self.
+000421d0: 7361 6665 5f73 7472 696e 6728 7061 7274  safe_string(part
+000421e0: 732c 2032 290a 2020 2020 2020 2020 2020  s, 2).          
+000421f0: 2020 6966 2028 746f 704c 6576 656c 203d    if (topLevel =
+00042200: 3d20 2762 6c6f 636b 6368 6169 722e 636f  = 'blockchair.co
+00042210: 6d27 2920 6f72 2028 746f 704c 6576 656c  m') or (topLevel
+00042220: 203d 3d20 2776 6965 7762 6c6f 636b 2e69   == 'viewblock.i
+00042230: 6f27 293a 0a20 2020 2020 2020 2020 2020  o'):.           
+00042240: 2020 2020 2073 7562 4c65 7665 6c20 3d20       subLevel = 
+00042250: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00042260: 2870 6172 7473 2c20 3329 0a20 2020 2020  (parts, 3).     
+00042270: 2020 2020 2020 2020 2020 2069 6620 7375             if su
+00042280: 624c 6576 656c 2069 7320 6e6f 7420 4e6f  bLevel is not No
+00042290: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000422a0: 2020 2020 2020 2020 746f 704c 6576 656c          topLevel
+000422b0: 203d 2074 6f70 4c65 7665 6c20 2b20 272f   = topLevel + '/
+000422c0: 2720 2b20 7375 624c 6576 656c 0a20 2020  ' + subLevel.   
+000422d0: 2020 2020 2020 2020 2069 6d70 6c69 6564           implied
+000422e0: 4e65 7477 6f72 6b20 3d20 7365 6c66 2e73  Network = self.s
+000422f0: 6166 655f 7374 7269 6e67 2872 6576 6572  afe_string(rever
+00042300: 7365 4e65 7477 6f72 6b73 2c20 746f 704c  seNetworks, topL
+00042310: 6576 656c 290a 2020 2020 2020 2020 2020  evel).          
+00042320: 2020 696d 706c 6965 644e 6574 776f 726b    impliedNetwork
+00042330: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+00042340: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
+00042350: 2c20 2769 6d70 6c69 6564 4e65 7477 6f72  , 'impliedNetwor
+00042360: 6b73 272c 207b 0a20 2020 2020 2020 2020  ks', {.         
+00042370: 2020 2020 2020 2027 4554 4827 3a20 7b27         'ETH': {'
+00042380: 4552 4332 3027 3a20 2745 5448 277d 2c0a  ERC20': 'ETH'},.
+00042390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000423a0: 2754 5258 273a 207b 2754 5243 3230 273a  'TRX': {'TRC20':
+000423b0: 2027 5452 5827 7d2c 0a20 2020 2020 2020   'TRX'},.       
+000423c0: 2020 2020 207d 290a 2020 2020 2020 2020       }).        
+000423d0: 2020 2020 6966 2063 6f64 6520 696e 2069      if code in i
+000423e0: 6d70 6c69 6564 4e65 7477 6f72 6b73 3a0a  mpliedNetworks:.
+000423f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042400: 636f 6e76 6572 7369 6f6e 203d 2073 656c  conversion = sel
+00042410: 662e 7361 6665 5f76 616c 7565 2869 6d70  f.safe_value(imp
+00042420: 6c69 6564 4e65 7477 6f72 6b73 2c20 636f  liedNetworks, co
+00042430: 6465 2c20 7b7d 290a 2020 2020 2020 2020  de, {}).        
+00042440: 2020 2020 2020 2020 696d 706c 6965 644e          impliedN
+00042450: 6574 776f 726b 203d 2073 656c 662e 7361  etwork = self.sa
+00042460: 6665 5f73 7472 696e 6728 636f 6e76 6572  fe_string(conver
+00042470: 7369 6f6e 2c20 696d 706c 6965 644e 6574  sion, impliedNet
+00042480: 776f 726b 2c20 696d 706c 6965 644e 6574  work, impliedNet
+00042490: 776f 726b 290a 2020 2020 2020 2020 7461  work).        ta
+000424a0: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
+000424b0: 7269 6e67 2872 6573 706f 6e73 652c 2027  ring(response, '
+000424c0: 7461 6727 2c20 2727 290a 2020 2020 2020  tag', '').      
+000424d0: 2020 6966 206c 656e 2874 6167 2920 3d3d    if len(tag) ==
+000424e0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+000424f0: 7461 6720 3d20 4e6f 6e65 0a20 2020 2020  tag = None.     
+00042500: 2020 2073 656c 662e 6368 6563 6b5f 6164     self.check_ad
+00042510: 6472 6573 7328 6164 6472 6573 7329 0a20  dress(address). 
+00042520: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
+00042530: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
+00042540: 7265 6e63 7927 3a20 636f 6465 2c0a 2020  rency': code,.  
+00042550: 2020 2020 2020 2020 2020 2761 6464 7265            'addre
+00042560: 7373 273a 2061 6464 7265 7373 2c0a 2020  ss': address,.  
+00042570: 2020 2020 2020 2020 2020 2774 6167 273a            'tag':
+00042580: 2074 6167 2c0a 2020 2020 2020 2020 2020   tag,.          
+00042590: 2020 276e 6574 776f 726b 273a 2069 6d70    'network': imp
+000425a0: 6c69 6564 4e65 7477 6f72 6b2c 0a20 2020  liedNetwork,.   
+000425b0: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+000425c0: 2072 6573 706f 6e73 652c 0a20 2020 2020   response,.     
+000425d0: 2020 207d 0a0a 2020 2020 6173 796e 6320     }..    async 
+000425e0: 6465 6620 6665 7463 685f 7472 616e 7361  def fetch_transa
+000425f0: 6374 696f 6e5f 6665 6573 2873 656c 662c  ction_fees(self,
+00042600: 2063 6f64 6573 3d4e 6f6e 652c 2070 6172   codes=None, par
+00042610: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00042620: 2022 2222 0a20 2020 2020 2020 202a 4445   """.        *DE
+00042630: 5052 4543 4154 4544 2a20 706c 6561 7365  PRECATED* please
+00042640: 2075 7365 2066 6574 6368 4465 706f 7369   use fetchDeposi
+00042650: 7457 6974 6864 7261 7746 6565 7320 696e  tWithdrawFees in
+00042660: 7374 6561 640a 2020 2020 2020 2020 3a70  stead.        :p
+00042670: 6172 616d 205b 7374 725d 7c4e 6f6e 6520  aram [str]|None 
+00042680: 636f 6465 733a 206e 6f74 2075 7365 6420  codes: not used 
+00042690: 6279 2062 696e 616e 6365 2066 6574 6368  by binance fetch
+000426a0: 5472 616e 7361 6374 696f 6e46 6565 7328  TransactionFees(
+000426b0: 290a 2020 2020 2020 2020 3a70 6172 616d  ).        :param
+000426c0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+000426d0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+000426e0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+000426f0: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
+00042700: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+00042710: 7572 6e73 205b 6469 6374 5d3a 2061 206c  urns [dict]: a l
+00042720: 6973 7420 6f66 2060 6665 6520 7374 7275  ist of `fee stru
+00042730: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
+00042740: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+00042750: 3f69 643d 6665 652d 7374 7275 6374 7572  ?id=fee-structur
+00042760: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00042770: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00042780: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00042790: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
+000427a0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+000427b0: 7361 7069 4765 7443 6170 6974 616c 436f  sapiGetCapitalCo
+000427c0: 6e66 6967 4765 7461 6c6c 2870 6172 616d  nfigGetall(param
+000427d0: 7329 0a20 2020 2020 2020 2023 0a20 2020  s).        #.   
+000427e0: 2020 2020 2023 2020 5b0a 2020 2020 2020       #  [.      
+000427f0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+00042800: 2020 2320 2020 2020 2020 636f 696e 3a20    #       coin: 
+00042810: 2742 4154 272c 0a20 2020 2020 2020 2023  'BAT',.        #
+00042820: 2020 2020 2020 2064 6570 6f73 6974 416c         depositAl
+00042830: 6c45 6e61 626c 653a 2054 7275 652c 0a20  lEnable: True,. 
+00042840: 2020 2020 2020 2023 2020 2020 2020 2077         #       w
+00042850: 6974 6864 7261 7741 6c6c 456e 6162 6c65  ithdrawAllEnable
+00042860: 3a20 5472 7565 2c0a 2020 2020 2020 2020  : True,.        
+00042870: 2320 2020 2020 2020 6e61 6d65 3a20 2742  #       name: 'B
+00042880: 6173 6963 2041 7474 656e 7469 6f6e 2054  asic Attention T
+00042890: 6f6b 656e 272c 0a20 2020 2020 2020 2023  oken',.        #
+000428a0: 2020 2020 2020 2066 7265 653a 2027 3027         free: '0'
+000428b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000428c0: 2020 6c6f 636b 6564 3a20 2730 272c 0a20    locked: '0',. 
+000428d0: 2020 2020 2020 2023 2020 2020 2020 2066         #       f
+000428e0: 7265 657a 653a 2027 3027 2c0a 2020 2020  reeze: '0',.    
+000428f0: 2020 2020 2320 2020 2020 2020 7769 7468      #       with
+00042900: 6472 6177 696e 673a 2027 3027 2c0a 2020  drawing: '0',.  
+00042910: 2020 2020 2020 2320 2020 2020 2020 6970        #       ip
+00042920: 6f69 6e67 3a20 2730 272c 0a20 2020 2020  oing: '0',.     
+00042930: 2020 2023 2020 2020 2020 2069 706f 6162     #       ipoab
+00042940: 6c65 3a20 2730 272c 0a20 2020 2020 2020  le: '0',.       
+00042950: 2023 2020 2020 2020 2073 746f 7261 6765   #       storage
+00042960: 3a20 2730 272c 0a20 2020 2020 2020 2023  : '0',.        #
+00042970: 2020 2020 2020 2069 734c 6567 616c 4d6f         isLegalMo
+00042980: 6e65 793a 2046 616c 7365 2c0a 2020 2020  ney: False,.    
+00042990: 2020 2020 2320 2020 2020 2020 7472 6164      #       trad
+000429a0: 696e 673a 2054 7275 652c 0a20 2020 2020  ing: True,.     
+000429b0: 2020 2023 2020 2020 2020 206e 6574 776f     #       netwo
+000429c0: 726b 4c69 7374 3a20 5b0a 2020 2020 2020  rkList: [.      
+000429d0: 2020 2320 2020 2020 2020 2020 7b0a 2020    #         {.  
+000429e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000429f0: 2020 6e65 7477 6f72 6b3a 2027 424e 4227    network: 'BNB'
+00042a00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042a10: 2020 2020 2020 636f 696e 3a20 2742 4154        coin: 'BAT
+00042a20: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00042a30: 2020 2020 2020 2077 6974 6864 7261 7749         withdrawI
+00042a40: 6e74 6567 6572 4d75 6c74 6970 6c65 3a20  ntegerMultiple: 
+00042a50: 2730 2e30 3030 3030 3030 3127 2c0a 2020  '0.00000001',.  
+00042a60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042a70: 2020 6973 4465 6661 756c 743a 2046 616c    isDefault: Fal
+00042a80: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
+00042a90: 2020 2020 2020 2020 6465 706f 7369 7445          depositE
+00042aa0: 6e61 626c 653a 2054 7275 652c 0a20 2020  nable: True,.   
+00042ab0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00042ac0: 2077 6974 6864 7261 7745 6e61 626c 653a   withdrawEnable:
+00042ad0: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
+00042ae0: 2020 2020 2020 2020 2020 2064 6570 6f73             depos
+00042af0: 6974 4465 7363 3a20 2727 2c0a 2020 2020  itDesc: '',.    
+00042b00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00042b10: 7769 7468 6472 6177 4465 7363 3a20 2727  withdrawDesc: ''
+00042b20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042b30: 2020 2020 2020 7370 6563 6961 6c54 6970        specialTip
+00042b40: 733a 2027 5468 6520 6e61 6d65 206f 6620  s: 'The name of 
+00042b50: 7365 6c66 2061 7373 6574 2069 7320 4261  self asset is Ba
+00042b60: 7369 6320 4174 7465 6e74 696f 6e20 546f  sic Attention To
+00042b70: 6b65 6e28 4241 5429 2e20 426f 7468 2061  ken(BAT). Both a
+00042b80: 204d 454d 4f20 616e 6420 616e 2041 6464   MEMO and an Add
+00042b90: 7265 7373 2061 7265 2072 6571 7569 7265  ress are require
+00042ba0: 6420 746f 2073 7563 6365 7373 6675 6c6c  d to successfull
+00042bb0: 7920 6465 706f 7369 7420 796f 7572 2042  y deposit your B
+00042bc0: 4550 3220 746f 6b65 6e73 2074 6f20 4269  EP2 tokens to Bi
+00042bd0: 6e61 6e63 652e 272c 0a20 2020 2020 2020  nance.',.       
+00042be0: 2023 2020 2020 2020 2020 2020 206e 616d   #           nam
+00042bf0: 653a 2027 4245 5032 272c 0a20 2020 2020  e: 'BEP2',.     
+00042c00: 2020 2023 2020 2020 2020 2020 2020 2072     #           r
+00042c10: 6573 6574 4164 6472 6573 7353 7461 7475  esetAddressStatu
+00042c20: 733a 2046 616c 7365 2c0a 2020 2020 2020  s: False,.      
+00042c30: 2020 2320 2020 2020 2020 2020 2020 6164    #           ad
+00042c40: 6472 6573 7352 6567 6578 3a20 275e 2862  dressRegex: '^(b
+00042c50: 6e62 3129 5b30 2d39 612d 7a5d 7b33 387d  nb1)[0-9a-z]{38}
+00042c60: 2427 2c0a 2020 2020 2020 2020 2320 2020  $',.        #   
+00042c70: 2020 2020 2020 2020 6d65 6d6f 5265 6765          memoRege
+00042c80: 783a 2027 5e5b 302d 3941 2d5a 612d 7a5c  x: '^[0-9A-Za-z\
+00042c90: 5c2d 5f5d 7b31 2c31 3230 7d24 272c 0a20  \-_]{1,120}$',. 
+00042ca0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042cb0: 2020 2077 6974 6864 7261 7746 6565 3a20     withdrawFee: 
+00042cc0: 2730 2e32 3727 2c0a 2020 2020 2020 2020  '0.27',.        
+00042cd0: 2320 2020 2020 2020 2020 2020 7769 7468  #           with
+00042ce0: 6472 6177 4d69 6e3a 2027 302e 3534 272c  drawMin: '0.54',
+00042cf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042d00: 2020 2020 2077 6974 6864 7261 774d 6178       withdrawMax
+00042d10: 3a20 2731 3030 3030 3030 3030 3030 272c  : '10000000000',
+00042d20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042d30: 2020 2020 206d 696e 436f 6e66 6972 6d3a       minConfirm:
+00042d40: 2027 3127 2c0a 2020 2020 2020 2020 2320   '1',.        # 
+00042d50: 2020 2020 2020 2020 2020 756e 4c6f 636b            unLock
+00042d60: 436f 6e66 6972 6d3a 2027 3027 0a20 2020  Confirm: '0'.   
+00042d70: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
+00042d80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042d90: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00042da0: 2020 2020 2020 2020 2020 6e65 7477 6f72            networ
+00042db0: 6b3a 2027 4253 4327 2c0a 2020 2020 2020  k: 'BSC',.      
+00042dc0: 2020 2320 2020 2020 2020 2020 2020 636f    #           co
+00042dd0: 696e 3a20 2742 4154 272c 0a20 2020 2020  in: 'BAT',.     
+00042de0: 2020 2023 2020 2020 2020 2020 2020 2077     #           w
+00042df0: 6974 6864 7261 7749 6e74 6567 6572 4d75  ithdrawIntegerMu
+00042e00: 6c74 6970 6c65 3a20 2730 2e30 3030 3030  ltiple: '0.00000
+00042e10: 3030 3127 2c0a 2020 2020 2020 2020 2320  001',.        # 
+00042e20: 2020 2020 2020 2020 2020 6973 4465 6661            isDefa
+00042e30: 756c 743a 2046 616c 7365 2c0a 2020 2020  ult: False,.    
+00042e40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00042e50: 6465 706f 7369 7445 6e61 626c 653a 2054  depositEnable: T
+00042e60: 7275 652c 0a20 2020 2020 2020 2023 2020  rue,.        #  
+00042e70: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
+00042e80: 7745 6e61 626c 653a 2054 7275 652c 0a20  wEnable: True,. 
+00042e90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042ea0: 2020 2064 6570 6f73 6974 4465 7363 3a20     depositDesc: 
+00042eb0: 2727 2c0a 2020 2020 2020 2020 2320 2020  '',.        #   
+00042ec0: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
+00042ed0: 4465 7363 3a20 2727 2c0a 2020 2020 2020  Desc: '',.      
+00042ee0: 2020 2320 2020 2020 2020 2020 2020 7370    #           sp
+00042ef0: 6563 6961 6c54 6970 733a 2027 5468 6520  ecialTips: 'The 
+00042f00: 6e61 6d65 206f 6620 7365 6c66 2061 7373  name of self ass
+00042f10: 6574 2069 7320 4261 7369 6320 4174 7465  et is Basic Atte
+00042f20: 6e74 696f 6e20 546f 6b65 6e2e 2050 6c65  ntion Token. Ple
+00042f30: 6173 6520 656e 7375 7265 2079 6f75 2061  ase ensure you a
+00042f40: 7265 2064 6570 6f73 6974 696e 6720 4261  re depositing Ba
+00042f50: 7369 6320 4174 7465 6e74 696f 6e20 546f  sic Attention To
+00042f60: 6b65 6e28 4241 5429 2074 6f6b 656e 7320  ken(BAT) tokens 
+00042f70: 756e 6465 7220 7468 6520 636f 6e74 7261  under the contra
+00042f80: 6374 2061 6464 7265 7373 2065 6e64 696e  ct address endin
+00042f90: 6720 696e 2039 3736 3665 2e27 2c0a 2020  g in 9766e.',.  
+00042fa0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042fb0: 2020 6e61 6d65 3a20 2742 4550 3230 2842    name: 'BEP20(B
+00042fc0: 5343 2927 2c0a 2020 2020 2020 2020 2320  SC)',.        # 
+00042fd0: 2020 2020 2020 2020 2020 7265 7365 7441            resetA
+00042fe0: 6464 7265 7373 5374 6174 7573 3a20 4661  ddressStatus: Fa
+00042ff0: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+00043000: 2020 2020 2020 2020 2061 6464 7265 7373           address
+00043010: 5265 6765 783a 2027 5e28 3078 295b 302d  Regex: '^(0x)[0-
+00043020: 3941 2d46 612d 665d 7b34 307d 2427 2c0a  9A-Fa-f]{40}$',.
+00043030: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043040: 2020 2020 6d65 6d6f 5265 6765 783a 2027      memoRegex: '
+00043050: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00043060: 2020 2020 2020 2077 6974 6864 7261 7746         withdrawF
+00043070: 6565 3a20 2730 2e32 3727 2c0a 2020 2020  ee: '0.27',.    
+00043080: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043090: 7769 7468 6472 6177 4d69 6e3a 2027 302e  withdrawMin: '0.
+000430a0: 3534 272c 0a20 2020 2020 2020 2023 2020  54',.        #  
+000430b0: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
+000430c0: 774d 6178 3a20 2731 3030 3030 3030 3030  wMax: '100000000
+000430d0: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
+000430e0: 2020 2020 2020 2020 206d 696e 436f 6e66           minConf
+000430f0: 6972 6d3a 2027 3135 272c 0a20 2020 2020  irm: '15',.     
+00043100: 2020 2023 2020 2020 2020 2020 2020 2075     #           u
+00043110: 6e4c 6f63 6b43 6f6e 6669 726d 3a20 2730  nLockConfirm: '0
+00043120: 270a 2020 2020 2020 2020 2320 2020 2020  '.        #     
+00043130: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+00043140: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00043150: 2020 2023 2020 2020 2020 2020 2020 206e     #           n
+00043160: 6574 776f 726b 3a20 2745 5448 272c 0a20  etwork: 'ETH',. 
+00043170: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00043180: 2020 2063 6f69 6e3a 2027 4241 5427 2c0a     coin: 'BAT',.
+00043190: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000431a0: 2020 2020 7769 7468 6472 6177 496e 7465      withdrawInte
+000431b0: 6765 724d 756c 7469 706c 653a 2027 302e  gerMultiple: '0.
+000431c0: 3030 3030 3030 3031 272c 0a20 2020 2020  00000001',.     
+000431d0: 2020 2023 2020 2020 2020 2020 2020 2069     #           i
+000431e0: 7344 6566 6175 6c74 3a20 5472 7565 2c0a  sDefault: True,.
+000431f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043200: 2020 2020 6465 706f 7369 7445 6e61 626c      depositEnabl
+00043210: 653a 2054 7275 652c 0a20 2020 2020 2020  e: True,.       
+00043220: 2023 2020 2020 2020 2020 2020 2077 6974   #           wit
+00043230: 6864 7261 7745 6e61 626c 653a 2054 7275  hdrawEnable: Tru
+00043240: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+00043250: 2020 2020 2020 2064 6570 6f73 6974 4465         depositDe
+00043260: 7363 3a20 2727 2c0a 2020 2020 2020 2020  sc: '',.        
+00043270: 2320 2020 2020 2020 2020 2020 7769 7468  #           with
+00043280: 6472 6177 4465 7363 3a20 2727 2c0a 2020  drawDesc: '',.  
+00043290: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000432a0: 2020 7370 6563 6961 6c54 6970 733a 2027    specialTips: '
+000432b0: 5468 6520 6e61 6d65 206f 6620 7365 6c66  The name of self
+000432c0: 2061 7373 6574 2069 7320 4261 7369 6320   asset is Basic 
+000432d0: 4174 7465 6e74 696f 6e20 546f 6b65 6e2e  Attention Token.
+000432e0: 2050 6c65 6173 6520 656e 7375 7265 2079   Please ensure y
+000432f0: 6f75 2061 7265 2064 6570 6f73 6974 696e  ou are depositin
+00043300: 6720 4261 7369 6320 4174 7465 6e74 696f  g Basic Attentio
+00043310: 6e20 546f 6b65 6e28 4241 5429 2074 6f6b  n Token(BAT) tok
+00043320: 656e 7320 756e 6465 7220 7468 6520 636f  ens under the co
+00043330: 6e74 7261 6374 2061 6464 7265 7373 2065  ntract address e
+00043340: 6e64 696e 6720 696e 2038 3837 6566 2e27  nding in 887ef.'
+00043350: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00043360: 2020 2020 2020 6e61 6d65 3a20 2745 5243        name: 'ERC
+00043370: 3230 272c 0a20 2020 2020 2020 2023 2020  20',.        #  
+00043380: 2020 2020 2020 2020 2072 6573 6574 4164           resetAd
+00043390: 6472 6573 7353 7461 7475 733a 2046 616c  dressStatus: Fal
+000433a0: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
+000433b0: 2020 2020 2020 2020 6164 6472 6573 7352          addressR
+000433c0: 6567 6578 3a20 275e 2830 7829 5b30 2d39  egex: '^(0x)[0-9
+000433d0: 412d 4661 2d66 5d7b 3430 7d24 272c 0a20  A-Fa-f]{40}$',. 
+000433e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000433f0: 2020 206d 656d 6f52 6567 6578 3a20 2727     memoRegex: ''
+00043400: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00043410: 2020 2020 2020 7769 7468 6472 6177 4665        withdrawFe
+00043420: 653a 2027 3237 272c 0a20 2020 2020 2020  e: '27',.       
+00043430: 2023 2020 2020 2020 2020 2020 2077 6974   #           wit
+00043440: 6864 7261 774d 696e 3a20 2735 3427 2c0a  hdrawMin: '54',.
+00043450: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043460: 2020 2020 7769 7468 6472 6177 4d61 783a      withdrawMax:
+00043470: 2027 3130 3030 3030 3030 3030 3027 2c0a   '10000000000',.
+00043480: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043490: 2020 2020 6d69 6e43 6f6e 6669 726d 3a20      minConfirm: 
+000434a0: 2731 3227 2c0a 2020 2020 2020 2020 2320  '12',.        # 
+000434b0: 2020 2020 2020 2020 2020 756e 4c6f 636b            unLock
+000434c0: 436f 6e66 6972 6d3a 2027 3027 0a20 2020  Confirm: '0'.   
+000434d0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
+000434e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000434f0: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+00043500: 207d 0a20 2020 2020 2020 2023 2020 5d0a   }.        #  ].
+00043510: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00043520: 2020 7769 7468 6472 6177 4665 6573 203d    withdrawFees =
+00043530: 207b 7d0a 2020 2020 2020 2020 666f 7220   {}.        for 
+00043540: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+00043550: 6e28 7265 7370 6f6e 7365 2929 3a0a 2020  n(response)):.  
+00043560: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
+00043570: 3d20 7265 7370 6f6e 7365 5b69 5d0a 2020  = response[i].  
+00043580: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+00043590: 6379 4964 203d 2073 656c 662e 7361 6665  cyId = self.safe
+000435a0: 5f73 7472 696e 6728 656e 7472 792c 2027  _string(entry, '
+000435b0: 636f 696e 2729 0a20 2020 2020 2020 2020  coin').         
+000435c0: 2020 2063 6f64 6520 3d20 7365 6c66 2e73     code = self.s
+000435d0: 6166 655f 6375 7272 656e 6379 5f63 6f64  afe_currency_cod
+000435e0: 6528 6375 7272 656e 6379 4964 290a 2020  e(currencyId).  
+000435f0: 2020 2020 2020 2020 2020 6e65 7477 6f72            networ
+00043600: 6b4c 6973 7420 3d20 7365 6c66 2e73 6166  kList = self.saf
+00043610: 655f 7661 6c75 6528 656e 7472 792c 2027  e_value(entry, '
+00043620: 6e65 7477 6f72 6b4c 6973 7427 2c20 5b5d  networkList', []
+00043630: 290a 2020 2020 2020 2020 2020 2020 7769  ).            wi
+00043640: 7468 6472 6177 4665 6573 5b63 6f64 655d  thdrawFees[code]
+00043650: 203d 207b 7d0a 2020 2020 2020 2020 2020   = {}.          
+00043660: 2020 666f 7220 6a20 696e 2072 616e 6765    for j in range
+00043670: 2830 2c20 6c65 6e28 6e65 7477 6f72 6b4c  (0, len(networkL
+00043680: 6973 7429 293a 0a20 2020 2020 2020 2020  ist)):.         
+00043690: 2020 2020 2020 206e 6574 776f 726b 456e         networkEn
+000436a0: 7472 7920 3d20 6e65 7477 6f72 6b4c 6973  try = networkLis
+000436b0: 745b 6a5d 0a20 2020 2020 2020 2020 2020  t[j].           
+000436c0: 2020 2020 206e 6574 776f 726b 4964 203d       networkId =
+000436d0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+000436e0: 6728 6e65 7477 6f72 6b45 6e74 7279 2c20  g(networkEntry, 
+000436f0: 276e 6574 776f 726b 2729 0a20 2020 2020  'network').     
+00043700: 2020 2020 2020 2020 2020 206e 6574 776f             netwo
+00043710: 726b 436f 6465 203d 2073 656c 662e 7361  rkCode = self.sa
+00043720: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
+00043730: 286e 6574 776f 726b 4964 290a 2020 2020  (networkId).    
+00043740: 2020 2020 2020 2020 2020 2020 6665 6520              fee 
+00043750: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
+00043760: 6572 286e 6574 776f 726b 456e 7472 792c  er(networkEntry,
+00043770: 2027 7769 7468 6472 6177 4665 6527 290a   'withdrawFee').
+00043780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043790: 7769 7468 6472 6177 4665 6573 5b63 6f64  withdrawFees[cod
+000437a0: 655d 5b6e 6574 776f 726b 436f 6465 5d20  e][networkCode] 
+000437b0: 3d20 6665 650a 2020 2020 2020 2020 7265  = fee.        re
+000437c0: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
+000437d0: 2020 2027 7769 7468 6472 6177 273a 2077     'withdraw': w
+000437e0: 6974 6864 7261 7746 6565 732c 0a20 2020  ithdrawFees,.   
+000437f0: 2020 2020 2020 2020 2027 6465 706f 7369           'deposi
+00043800: 7427 3a20 7b7d 2c0a 2020 2020 2020 2020  t': {},.        
+00043810: 2020 2020 2769 6e66 6f27 3a20 7265 7370      'info': resp
+00043820: 6f6e 7365 2c0a 2020 2020 2020 2020 7d0a  onse,.        }.
+00043830: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
+00043840: 6574 6368 5f64 6570 6f73 6974 5f77 6974  etch_deposit_wit
+00043850: 6864 7261 775f 6665 6573 2873 656c 662c  hdraw_fees(self,
+00043860: 2063 6f64 6573 3d4e 6f6e 652c 2070 6172   codes=None, par
+00043870: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00043880: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00043890: 6368 2064 6570 6f73 6974 2061 6e64 2077  ch deposit and w
+000438a0: 6974 6864 7261 7720 6665 6573 0a20 2020  ithdraw fees.   
+000438b0: 2020 2020 203a 7061 7261 6d20 5b73 7472       :param [str
+000438c0: 5d7c 4e6f 6e65 2063 6f64 6573 3a20 6e6f  ]|None codes: no
+000438d0: 7420 7573 6564 2062 7920 6269 6e61 6e63  t used by binanc
+000438e0: 6520 6665 7463 6844 6570 6f73 6974 5769  e fetchDepositWi
+000438f0: 7468 6472 6177 4665 6573 2829 0a20 2020  thdrawFees().   
+00043900: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+00043910: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+00043920: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+00043930: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+00043940: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+00043950: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+00043960: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
+00043970: 6620 6066 6565 2073 7472 7563 7475 7265  f `fee structure
+00043980: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+00043990: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d66  ccxt.com/#/?id=f
+000439a0: 6565 2d73 7472 7563 7475 7265 3e60 0a20  ee-structure>`. 
+000439b0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000439c0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+000439d0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+000439e0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+000439f0: 6177 6169 7420 7365 6c66 2e73 6170 6947  await self.sapiG
+00043a00: 6574 4361 7069 7461 6c43 6f6e 6669 6747  etCapitalConfigG
+00043a10: 6574 616c 6c28 7061 7261 6d73 290a 2020  etall(params).  
+00043a20: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00043a30: 2320 2020 205b 0a20 2020 2020 2020 2023  #    [.        #
+00043a40: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00043a50: 2020 2320 2020 2020 2020 2020 2020 2063    #            c
+00043a60: 6f69 6e3a 2027 4241 5427 2c0a 2020 2020  oin: 'BAT',.    
+00043a70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043a80: 2064 6570 6f73 6974 416c 6c45 6e61 626c   depositAllEnabl
+00043a90: 653a 2054 7275 652c 0a20 2020 2020 2020  e: True,.       
+00043aa0: 2023 2020 2020 2020 2020 2020 2020 7769   #            wi
+00043ab0: 7468 6472 6177 416c 6c45 6e61 626c 653a  thdrawAllEnable:
+00043ac0: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
+00043ad0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00043ae0: 3a20 2742 6173 6963 2041 7474 656e 7469  : 'Basic Attenti
+00043af0: 6f6e 2054 6f6b 656e 272c 0a20 2020 2020  on Token',.     
+00043b00: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043b10: 6672 6565 3a20 2730 272c 0a20 2020 2020  free: '0',.     
+00043b20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043b30: 6c6f 636b 6564 3a20 2730 272c 0a20 2020  locked: '0',.   
+00043b40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00043b50: 2020 6672 6565 7a65 3a20 2730 272c 0a20    freeze: '0',. 
+00043b60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00043b70: 2020 2020 7769 7468 6472 6177 696e 673a      withdrawing:
+00043b80: 2027 3027 2c0a 2020 2020 2020 2020 2320   '0',.        # 
+00043b90: 2020 2020 2020 2020 2020 2069 706f 696e             ipoin
+00043ba0: 673a 2027 3027 2c0a 2020 2020 2020 2020  g: '0',.        
+00043bb0: 2320 2020 2020 2020 2020 2020 2069 706f  #            ipo
+00043bc0: 6162 6c65 3a20 2730 272c 0a20 2020 2020  able: '0',.     
+00043bd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043be0: 7374 6f72 6167 653a 2027 3027 2c0a 2020  storage: '0',.  
+00043bf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00043c00: 2020 2069 734c 6567 616c 4d6f 6e65 793a     isLegalMoney:
+00043c10: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+00043c20: 2320 2020 2020 2020 2020 2020 2074 7261  #            tra
+00043c30: 6469 6e67 3a20 5472 7565 2c0a 2020 2020  ding: True,.    
+00043c40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043c50: 206e 6574 776f 726b 4c69 7374 3a20 5b0a   networkList: [.
+00043c60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043c70: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00043c80: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043c90: 2020 2020 2020 2020 6e65 7477 6f72 6b3a          network:
+00043ca0: 2027 424e 4227 2c0a 2020 2020 2020 2020   'BNB',.        
+00043cb0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00043cc0: 2020 2020 2063 6f69 6e3a 2027 4241 5427       coin: 'BAT'
+00043cd0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00043ce0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00043cf0: 6974 6864 7261 7749 6e74 6567 6572 4d75  ithdrawIntegerMu
+00043d00: 6c74 6970 6c65 3a20 2730 2e30 3030 3030  ltiple: '0.00000
+00043d10: 3030 3127 2c0a 2020 2020 2020 2020 2320  001',.        # 
+00043d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043d30: 2020 2069 7344 6566 6175 6c74 3a20 4661     isDefault: Fa
+00043d40: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+00043d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043d60: 2020 6465 706f 7369 7445 6e61 626c 653a    depositEnable:
+00043d70: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
+00043d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043d90: 2020 2020 7769 7468 6472 6177 456e 6162      withdrawEnab
+00043da0: 6c65 3a20 5472 7565 2c0a 2020 2020 2020  le: True,.      
+00043db0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00043dc0: 2020 2020 2020 2064 6570 6f73 6974 4465         depositDe
+00043dd0: 7363 3a20 2727 2c0a 2020 2020 2020 2020  sc: '',.        
+00043de0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00043df0: 2020 2020 2077 6974 6864 7261 7744 6573       withdrawDes
+00043e00: 633a 2027 272c 0a20 2020 2020 2020 2023  c: '',.        #
+00043e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043e20: 2020 2020 7370 6563 6961 6c54 6970 733a      specialTips:
+00043e30: 2027 5468 6520 6e61 6d65 206f 6620 7365   'The name of se
+00043e40: 6c66 2061 7373 6574 2069 7320 4261 7369  lf asset is Basi
+00043e50: 6320 4174 7465 6e74 696f 6e20 546f 6b65  c Attention Toke
+00043e60: 6e28 4241 5429 2e20 426f 7468 2061 204d  n(BAT). Both a M
+00043e70: 454d 4f20 616e 6420 616e 2041 6464 7265  EMO and an Addre
+00043e80: 7373 2061 7265 2072 6571 7569 7265 6420  ss are required 
+00043e90: 746f 2073 7563 6365 7373 6675 6c6c 7920  to successfully 
+00043ea0: 6465 706f 7369 7420 796f 7572 2042 4550  deposit your BEP
+00043eb0: 3220 746f 6b65 6e73 2074 6f20 4269 6e61  2 tokens to Bina
+00043ec0: 6e63 652e 272c 0a20 2020 2020 2020 2023  nce.',.        #
+00043ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043ee0: 2020 2020 6e61 6d65 3a20 2742 4550 3227      name: 'BEP2'
+00043ef0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00043f00: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00043f10: 6573 6574 4164 6472 6573 7353 7461 7475  esetAddressStatu
+00043f20: 733a 2046 616c 7365 2c0a 2020 2020 2020  s: False,.      
+00043f30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00043f40: 2020 2020 2020 2061 6464 7265 7373 5265         addressRe
+00043f50: 6765 783a 2027 5e28 626e 6231 295b 302d  gex: '^(bnb1)[0-
+00043f60: 3961 2d7a 5d7b 3338 7d24 272c 0a20 2020  9a-z]{38}$',.   
+00043f70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00043f80: 2020 2020 2020 2020 2020 6d65 6d6f 5265            memoRe
+00043f90: 6765 783a 2027 5e5b 302d 3941 2d5a 612d  gex: '^[0-9A-Za-
+00043fa0: 7a5c 5c2d 5f5d 7b31 2c31 3230 7d24 272c  z\\-_]{1,120}$',
+00043fb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00043fc0: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+00043fd0: 7468 6472 6177 4665 653a 2027 302e 3237  thdrawFee: '0.27
+00043fe0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00043ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044000: 7769 7468 6472 6177 4d69 6e3a 2027 302e  withdrawMin: '0.
+00044010: 3534 272c 0a20 2020 2020 2020 2023 2020  54',.        #  
+00044020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044030: 2020 7769 7468 6472 6177 4d61 783a 2027    withdrawMax: '
+00044040: 3130 3030 3030 3030 3030 3027 2c0a 2020  10000000000',.  
+00044050: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00044060: 2020 2020 2020 2020 2020 206d 696e 436f             minCo
+00044070: 6e66 6972 6d3a 2027 3127 2c0a 2020 2020  nfirm: '1',.    
+00044080: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044090: 2020 2020 2020 2020 2075 6e4c 6f63 6b43           unLockC
+000440a0: 6f6e 6669 726d 3a20 2730 270a 2020 2020  onfirm: '0'.    
+000440b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000440c0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+000440d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000440e0: 202e 2e2e 0a20 2020 2020 2020 2023 2020   ....        #  
+000440f0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
+00044100: 2020 2020 2320 2020 2020 2020 207d 0a20      #        }. 
+00044110: 2020 2020 2020 2023 2020 2020 5d0a 2020         #    ].  
+00044120: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00044130: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
+00044140: 655f 6465 706f 7369 745f 7769 7468 6472  e_deposit_withdr
+00044150: 6177 5f66 6565 7328 7265 7370 6f6e 7365  aw_fees(response
+00044160: 2c20 636f 6465 732c 2027 636f 696e 2729  , codes, 'coin')
+00044170: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+00044180: 6465 706f 7369 745f 7769 7468 6472 6177  deposit_withdraw
+00044190: 5f66 6565 2873 656c 662c 2066 6565 2c20  _fee(self, fee, 
+000441a0: 6375 7272 656e 6379 3d4e 6f6e 6529 3a0a  currency=None):.
+000441b0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+000441c0: 2020 2320 2020 207b 0a20 2020 2020 2020    #    {.       
+000441d0: 2023 2020 2020 2020 2020 636f 696e 3a20   #        coin: 
+000441e0: 2742 4154 272c 0a20 2020 2020 2020 2023  'BAT',.        #
+000441f0: 2020 2020 2020 2020 6465 706f 7369 7441          depositA
+00044200: 6c6c 456e 6162 6c65 3a20 5472 7565 2c0a  llEnable: True,.
+00044210: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00044220: 2077 6974 6864 7261 7741 6c6c 456e 6162   withdrawAllEnab
+00044230: 6c65 3a20 5472 7565 2c0a 2020 2020 2020  le: True,.      
+00044240: 2020 2320 2020 2020 2020 206e 616d 653a    #        name:
+00044250: 2027 4261 7369 6320 4174 7465 6e74 696f   'Basic Attentio
+00044260: 6e20 546f 6b65 6e27 2c0a 2020 2020 2020  n Token',.      
+00044270: 2020 2320 2020 2020 2020 2066 7265 653a    #        free:
+00044280: 2027 3027 2c0a 2020 2020 2020 2020 2320   '0',.        # 
+00044290: 2020 2020 2020 206c 6f63 6b65 643a 2027         locked: '
+000442a0: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
+000442b0: 2020 2020 2066 7265 657a 653a 2027 3027       freeze: '0'
+000442c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000442d0: 2020 2077 6974 6864 7261 7769 6e67 3a20     withdrawing: 
+000442e0: 2730 272c 0a20 2020 2020 2020 2023 2020  '0',.        #  
+000442f0: 2020 2020 2020 6970 6f69 6e67 3a20 2730        ipoing: '0
+00044300: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00044310: 2020 2020 6970 6f61 626c 653a 2027 3027      ipoable: '0'
+00044320: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00044330: 2020 2073 746f 7261 6765 3a20 2730 272c     storage: '0',
+00044340: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044350: 2020 6973 4c65 6761 6c4d 6f6e 6579 3a20    isLegalMoney: 
+00044360: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+00044370: 2020 2020 2020 2020 7472 6164 696e 673a          trading:
+00044380: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
+00044390: 2020 2020 2020 2020 6e65 7477 6f72 6b4c          networkL
+000443a0: 6973 743a 205b 0a20 2020 2020 2020 2023  ist: [.        #
+000443b0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+000443c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000443d0: 2020 2020 2020 206e 6574 776f 726b 3a20         network: 
+000443e0: 2742 4e42 272c 0a20 2020 2020 2020 2023  'BNB',.        #
+000443f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044400: 636f 696e 3a20 2742 4154 272c 0a20 2020  coin: 'BAT',.   
+00044410: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00044420: 2020 2020 2020 7769 7468 6472 6177 496e        withdrawIn
+00044430: 7465 6765 724d 756c 7469 706c 653a 2027  tegerMultiple: '
+00044440: 302e 3030 3030 3030 3031 272c 0a20 2020  0.00000001',.   
+00044450: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00044460: 2020 2020 2020 6973 4465 6661 756c 743a        isDefault:
+00044470: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+00044480: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00044490: 2064 6570 6f73 6974 456e 6162 6c65 3a20   depositEnable: 
+000444a0: 5472 7565 2c0a 2020 2020 2020 2020 2320  True,.        # 
+000444b0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+000444c0: 6974 6864 7261 7745 6e61 626c 653a 2054  ithdrawEnable: T
+000444d0: 7275 652c 0a20 2020 2020 2020 2023 2020  rue,.        #  
+000444e0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+000444f0: 706f 7369 7444 6573 633a 2027 272c 0a20  positDesc: '',. 
+00044500: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00044510: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
+00044520: 4465 7363 3a20 2727 2c0a 2020 2020 2020  Desc: '',.      
+00044530: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00044540: 2020 2073 7065 6369 616c 5469 7073 3a20     specialTips: 
+00044550: 2754 6865 206e 616d 6520 6f66 2073 656c  'The name of sel
+00044560: 6620 6173 7365 7420 6973 2042 6173 6963  f asset is Basic
+00044570: 2041 7474 656e 7469 6f6e 2054 6f6b 656e   Attention Token
+00044580: 2842 4154 292e 2042 6f74 6820 6120 4d45  (BAT). Both a ME
+00044590: 4d4f 2061 6e64 2061 6e20 4164 6472 6573  MO and an Addres
+000445a0: 7320 6172 6520 7265 7175 6972 6564 2074  s are required t
+000445b0: 6f20 7375 6363 6573 7366 756c 6c79 2064  o successfully d
+000445c0: 6570 6f73 6974 2079 6f75 7220 4245 5032  eposit your BEP2
+000445d0: 2074 6f6b 656e 7320 746f 2042 696e 616e   tokens to Binan
+000445e0: 6365 2e27 2c0a 2020 2020 2020 2020 2320  ce.',.        # 
+000445f0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00044600: 616d 653a 2027 4245 5032 272c 0a20 2020  ame: 'BEP2',.   
+00044610: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00044620: 2020 2020 2020 7265 7365 7441 6464 7265        resetAddre
+00044630: 7373 5374 6174 7573 3a20 4661 6c73 652c  ssStatus: False,
+00044640: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044650: 2020 2020 2020 2020 2020 6164 6472 6573            addres
+00044660: 7352 6567 6578 3a20 275e 2862 6e62 3129  sRegex: '^(bnb1)
+00044670: 5b30 2d39 612d 7a5d 7b33 387d 2427 2c0a  [0-9a-z]{38}$',.
+00044680: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00044690: 2020 2020 2020 2020 206d 656d 6f52 6567           memoReg
+000446a0: 6578 3a20 275e 5b30 2d39 412d 5a61 2d7a  ex: '^[0-9A-Za-z
+000446b0: 5c5c 2d5f 5d7b 312c 3132 307d 2427 2c0a  \\-_]{1,120}$',.
+000446c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000446d0: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
+000446e0: 7746 6565 3a20 2730 2e32 3727 2c0a 2020  wFee: '0.27',.  
+000446f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00044700: 2020 2020 2020 2077 6974 6864 7261 774d         withdrawM
+00044710: 696e 3a20 2730 2e35 3427 2c0a 2020 2020  in: '0.54',.    
+00044720: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044730: 2020 2020 2077 6974 6864 7261 774d 6178       withdrawMax
+00044740: 3a20 2731 3030 3030 3030 3030 3030 272c  : '10000000000',
+00044750: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044760: 2020 2020 2020 2020 2020 6d69 6e43 6f6e            minCon
+00044770: 6669 726d 3a20 2731 272c 0a20 2020 2020  firm: '1',.     
+00044780: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00044790: 2020 2020 756e 4c6f 636b 436f 6e66 6972      unLockConfir
+000447a0: 6d3a 2027 3027 0a20 2020 2020 2020 2023  m: '0'.        #
+000447b0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+000447c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000447d0: 2020 2020 2e2e 2e0a 2020 2020 2020 2020      ....        
+000447e0: 2320 2020 2020 2020 205d 0a20 2020 2020  #        ].     
+000447f0: 2020 2023 2020 2020 7d0a 2020 2020 2020     #    }.      
+00044800: 2020 230a 2020 2020 2020 2020 6e65 7477    #.        netw
+00044810: 6f72 6b4c 6973 7420 3d20 7365 6c66 2e73  orkList = self.s
+00044820: 6166 655f 7661 6c75 6528 6665 652c 2027  afe_value(fee, '
+00044830: 6e65 7477 6f72 6b4c 6973 7427 2c20 5b5d  networkList', []
+00044840: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
+00044850: 203d 2073 656c 662e 6465 706f 7369 745f   = self.deposit_
+00044860: 7769 7468 6472 6177 5f66 6565 2866 6565  withdraw_fee(fee
+00044870: 290a 2020 2020 2020 2020 666f 7220 6a20  ).        for j 
+00044880: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
+00044890: 6e65 7477 6f72 6b4c 6973 7429 293a 0a20  networkList)):. 
+000448a0: 2020 2020 2020 2020 2020 206e 6574 776f             netwo
+000448b0: 726b 456e 7472 7920 3d20 6e65 7477 6f72  rkEntry = networ
+000448c0: 6b4c 6973 745b 6a5d 0a20 2020 2020 2020  kList[j].       
+000448d0: 2020 2020 206e 6574 776f 726b 4964 203d       networkId =
+000448e0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+000448f0: 6728 6e65 7477 6f72 6b45 6e74 7279 2c20  g(networkEntry, 
+00044900: 276e 6574 776f 726b 2729 0a20 2020 2020  'network').     
+00044910: 2020 2020 2020 206e 6574 776f 726b 436f         networkCo
+00044920: 6465 203d 2073 656c 662e 6e65 7477 6f72  de = self.networ
+00044930: 6b5f 6964 5f74 6f5f 636f 6465 286e 6574  k_id_to_code(net
+00044940: 776f 726b 4964 290a 2020 2020 2020 2020  workId).        
+00044950: 2020 2020 7769 7468 6472 6177 4665 6520      withdrawFee 
+00044960: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
+00044970: 6572 286e 6574 776f 726b 456e 7472 792c  er(networkEntry,
+00044980: 2027 7769 7468 6472 6177 4665 6527 290a   'withdrawFee').
+00044990: 2020 2020 2020 2020 2020 2020 6973 4465              isDe
+000449a0: 6661 756c 7420 3d20 7365 6c66 2e73 6166  fault = self.saf
+000449b0: 655f 7661 6c75 6528 6e65 7477 6f72 6b45  e_value(networkE
+000449c0: 6e74 7279 2c20 2769 7344 6566 6175 6c74  ntry, 'isDefault
+000449d0: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
+000449e0: 6620 6973 4465 6661 756c 7420 6973 2054  f isDefault is T
+000449f0: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+00044a00: 2020 2020 2072 6573 756c 745b 2777 6974       result['wit
+00044a10: 6864 7261 7727 5d20 3d20 7b0a 2020 2020  hdraw'] = {.    
+00044a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044a30: 2766 6565 273a 2077 6974 6864 7261 7746  'fee': withdrawF
+00044a40: 6565 2c0a 2020 2020 2020 2020 2020 2020  ee,.            
+00044a50: 2020 2020 2020 2020 2770 6572 6365 6e74          'percent
+00044a60: 6167 6527 3a20 4e6f 6e65 2c0a 2020 2020  age': None,.    
+00044a70: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00044a80: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00044a90: 5b27 6e65 7477 6f72 6b73 275d 5b6e 6574  ['networks'][net
+00044aa0: 776f 726b 436f 6465 5d20 3d20 7b0a 2020  workCode] = {.  
+00044ab0: 2020 2020 2020 2020 2020 2020 2020 2777                'w
+00044ac0: 6974 6864 7261 7727 3a20 7b0a 2020 2020  ithdraw': {.    
+00044ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044ae0: 2766 6565 273a 2077 6974 6864 7261 7746  'fee': withdrawF
+00044af0: 6565 2c0a 2020 2020 2020 2020 2020 2020  ee,.            
+00044b00: 2020 2020 2020 2020 2770 6572 6365 6e74          'percent
+00044b10: 6167 6527 3a20 4e6f 6e65 2c0a 2020 2020  age': None,.    
+00044b20: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00044b30: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00044b40: 6465 706f 7369 7427 3a20 7b0a 2020 2020  deposit': {.    
+00044b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044b60: 2766 6565 273a 204e 6f6e 652c 0a20 2020  'fee': None,.   
+00044b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044b80: 2027 7065 7263 656e 7461 6765 273a 204e   'percentage': N
+00044b90: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00044ba0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00044bb0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+00044bc0: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
+00044bd0: 2061 7379 6e63 2064 6566 2077 6974 6864   async def withd
+00044be0: 7261 7728 7365 6c66 2c20 636f 6465 3a20  raw(self, code: 
+00044bf0: 7374 722c 2061 6d6f 756e 742c 2061 6464  str, amount, add
+00044c00: 7265 7373 2c20 7461 673d 4e6f 6e65 2c20  ress, tag=None, 
+00044c10: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00044c20: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00044c30: 6d61 6b65 2061 2077 6974 6864 7261 7761  make a withdrawa
+00044c40: 6c0a 2020 2020 2020 2020 3a70 6172 616d  l.        :param
+00044c50: 2073 7472 2063 6f64 653a 2075 6e69 6669   str code: unifi
+00044c60: 6564 2063 7572 7265 6e63 7920 636f 6465  ed currency code
+00044c70: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00044c80: 666c 6f61 7420 616d 6f75 6e74 3a20 7468  float amount: th
+00044c90: 6520 616d 6f75 6e74 2074 6f20 7769 7468  e amount to with
+00044ca0: 6472 6177 0a20 2020 2020 2020 203a 7061  draw.        :pa
+00044cb0: 7261 6d20 7374 7220 6164 6472 6573 733a  ram str address:
+00044cc0: 2074 6865 2061 6464 7265 7373 2074 6f20   the address to 
+00044cd0: 7769 7468 6472 6177 2074 6f0a 2020 2020  withdraw to.    
+00044ce0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
+00044cf0: 6f6e 6520 7461 673a 0a20 2020 2020 2020  one tag:.       
+00044d00: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
+00044d10: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
+00044d20: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+00044d30: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
+00044d40: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
+00044d50: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+00044d60: 3a20 6120 6074 7261 6e73 6163 7469 6f6e  : a `transaction
+00044d70: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
+00044d80: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+00044d90: 6d2f 232f 3f69 643d 7472 616e 7361 6374  m/#/?id=transact
+00044da0: 696f 6e2d 7374 7275 6374 7572 653e 600a  ion-structure>`.
+00044db0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00044dc0: 2020 2020 7461 672c 2070 6172 616d 7320      tag, params 
+00044dd0: 3d20 7365 6c66 2e68 616e 646c 655f 7769  = self.handle_wi
+00044de0: 7468 6472 6177 5f74 6167 5f61 6e64 5f70  thdraw_tag_and_p
+00044df0: 6172 616d 7328 7461 672c 2070 6172 616d  arams(tag, param
+00044e00: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
+00044e10: 6368 6563 6b5f 6164 6472 6573 7328 6164  check_address(ad
+00044e20: 6472 6573 7329 0a20 2020 2020 2020 2061  dress).        a
+00044e30: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
+00044e40: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+00044e50: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+00044e60: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+00044e70: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00044e80: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00044e90: 2763 6f69 6e27 3a20 6375 7272 656e 6379  'coin': currency
+00044ea0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+00044eb0: 2020 2020 2761 6464 7265 7373 273a 2061      'address': a
+00044ec0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
+00044ed0: 2020 2020 2761 6d6f 756e 7427 3a20 616d      'amount': am
+00044ee0: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
+00044ef0: 2020 2320 6874 7470 733a 2f2f 6269 6e61    # https://bina
+00044f00: 6e63 652d 646f 6373 2e67 6974 6875 622e  nce-docs.github.
+00044f10: 696f 2f61 7069 646f 6373 2f73 706f 742f  io/apidocs/spot/
+00044f20: 656e 2f23 7769 7468 6472 6177 2d73 6170  en/#withdraw-sap
+00044f30: 690a 2020 2020 2020 2020 2020 2020 2320  i.            # 
+00044f40: 6973 7375 6520 7361 7069 4765 7443 6170  issue sapiGetCap
+00044f50: 6974 616c 436f 6e66 6967 4765 7461 6c6c  italConfigGetall
+00044f60: 2829 2074 6f20 6765 7420 6e65 7477 6f72  () to get networ
+00044f70: 6b73 2066 6f72 2077 6974 6864 7261 7769  ks for withdrawi
+00044f80: 6e67 2055 5344 5420 4552 4332 3020 7673  ng USDT ERC20 vs
+00044f90: 2055 5344 5420 4f6d 6e69 0a20 2020 2020   USDT Omni.     
+00044fa0: 2020 2020 2020 2023 2027 6e65 7477 6f72         # 'networ
+00044fb0: 6b27 3a20 2745 5448 272c 2020 2320 2742  k': 'ETH',  # 'B
+00044fc0: 5443 272c 2027 5452 5827 2c20 6574 632c  TC', 'TRX', etc,
+00044fd0: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
+00044fe0: 2020 7d0a 2020 2020 2020 2020 6966 2074    }.        if t
+00044ff0: 6167 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ag is not None:.
+00045000: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00045010: 6573 745b 2761 6464 7265 7373 5461 6727  est['addressTag'
+00045020: 5d20 3d20 7461 670a 2020 2020 2020 2020  ] = tag.        
+00045030: 6e65 7477 6f72 6b73 203d 2073 656c 662e  networks = self.
+00045040: 7361 6665 5f76 616c 7565 2873 656c 662e  safe_value(self.
+00045050: 6f70 7469 6f6e 732c 2027 6e65 7477 6f72  options, 'networ
+00045060: 6b73 272c 207b 7d29 0a20 2020 2020 2020  ks', {}).       
+00045070: 206e 6574 776f 726b 203d 2073 656c 662e   network = self.
+00045080: 7361 6665 5f73 7472 696e 675f 7570 7065  safe_string_uppe
+00045090: 7228 7061 7261 6d73 2c20 276e 6574 776f  r(params, 'netwo
+000450a0: 726b 2729 2020 2320 7365 6c66 206c 696e  rk')  # self lin
+000450b0: 6520 616c 6c6f 7773 2074 6865 2075 7365  e allows the use
+000450c0: 7220 746f 2073 7065 6369 6679 2065 6974  r to specify eit
+000450d0: 6865 7220 4552 4332 3020 6f72 2045 5448  her ERC20 or ETH
+000450e0: 0a20 2020 2020 2020 206e 6574 776f 726b  .        network
+000450f0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00045100: 696e 6728 6e65 7477 6f72 6b73 2c20 6e65  ing(networks, ne
+00045110: 7477 6f72 6b2c 206e 6574 776f 726b 2920  twork, network) 
+00045120: 2023 2068 616e 646c 6520 4552 4332 303e   # handle ERC20>
+00045130: 4554 4820 616c 6961 730a 2020 2020 2020  ETH alias.      
+00045140: 2020 6966 206e 6574 776f 726b 2069 7320    if network is 
+00045150: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00045160: 2020 2020 2020 7265 7175 6573 745b 276e        request['n
+00045170: 6574 776f 726b 275d 203d 206e 6574 776f  etwork'] = netwo
+00045180: 726b 0a20 2020 2020 2020 2020 2020 2070  rk.            p
+00045190: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+000451a0: 7428 7061 7261 6d73 2c20 276e 6574 776f  t(params, 'netwo
+000451b0: 726b 2729 0a20 2020 2020 2020 2072 6573  rk').        res
+000451c0: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+000451d0: 6c66 2e73 6170 6950 6f73 7443 6170 6974  lf.sapiPostCapit
+000451e0: 616c 5769 7468 6472 6177 4170 706c 7928  alWithdrawApply(
+000451f0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00045200: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+00045210: 2020 2020 2020 2320 2020 2020 7b69 643a        #     {id:
+00045220: 2027 3961 3637 3632 3862 3136 6261 3439   '9a67628b16ba49
+00045230: 3838 6165 3230 6433 3239 3333 3366 3136  88ae20d329333f16
+00045240: 6263 277d 0a20 2020 2020 2020 2072 6574  bc'}.        ret
+00045250: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+00045260: 7261 6e73 6163 7469 6f6e 2872 6573 706f  ransaction(respo
+00045270: 6e73 652c 2063 7572 7265 6e63 7929 0a0a  nse, currency)..
+00045280: 2020 2020 6465 6620 7061 7273 655f 7472      def parse_tr
+00045290: 6164 696e 675f 6665 6528 7365 6c66 2c20  ading_fee(self, 
+000452a0: 6665 652c 206d 6172 6b65 743d 4e6f 6e65  fee, market=None
+000452b0: 293a 0a20 2020 2020 2020 2023 0a20 2020  ):.        #.   
+000452c0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+000452d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000452e0: 7379 6d62 6f6c 223a 2022 4144 4142 4e42  symbol": "ADABNB
+000452f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00045300: 2020 2020 2022 6d61 6b65 7243 6f6d 6d69       "makerCommi
+00045310: 7373 696f 6e22 3a20 302e 3030 312c 0a20  ssion": 0.001,. 
+00045320: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00045330: 2022 7461 6b65 7243 6f6d 6d69 7373 696f   "takerCommissio
+00045340: 6e22 3a20 302e 3030 310a 2020 2020 2020  n": 0.001.      
+00045350: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00045360: 2020 230a 2020 2020 2020 2020 6d61 726b    #.        mark
+00045370: 6574 4964 203d 2073 656c 662e 7361 6665  etId = self.safe
+00045380: 5f73 7472 696e 6728 6665 652c 2027 7379  _string(fee, 'sy
+00045390: 6d62 6f6c 2729 0a20 2020 2020 2020 2073  mbol').        s
+000453a0: 796d 626f 6c20 3d20 7365 6c66 2e73 6166  ymbol = self.saf
+000453b0: 655f 7379 6d62 6f6c 286d 6172 6b65 7449  e_symbol(marketI
+000453c0: 642c 206d 6172 6b65 742c 204e 6f6e 652c  d, market, None,
+000453d0: 2027 7370 6f74 2729 0a20 2020 2020 2020   'spot').       
+000453e0: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
+000453f0: 2020 2020 2020 2769 6e66 6f27 3a20 6665        'info': fe
+00045400: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+00045410: 7379 6d62 6f6c 273a 2073 796d 626f 6c2c  symbol': symbol,
+00045420: 0a20 2020 2020 2020 2020 2020 2027 6d61  .            'ma
+00045430: 6b65 7227 3a20 7365 6c66 2e73 6166 655f  ker': self.safe_
+00045440: 6e75 6d62 6572 2866 6565 2c20 276d 616b  number(fee, 'mak
+00045450: 6572 436f 6d6d 6973 7369 6f6e 2729 2c0a  erCommission'),.
+00045460: 2020 2020 2020 2020 2020 2020 2774 616b              'tak
+00045470: 6572 273a 2073 656c 662e 7361 6665 5f6e  er': self.safe_n
+00045480: 756d 6265 7228 6665 652c 2027 7461 6b65  umber(fee, 'take
+00045490: 7243 6f6d 6d69 7373 696f 6e27 292c 0a20  rCommission'),. 
+000454a0: 2020 2020 2020 207d 0a0a 2020 2020 6173         }..    as
+000454b0: 796e 6320 6465 6620 6665 7463 685f 7472  ync def fetch_tr
+000454c0: 6164 696e 675f 6665 6528 7365 6c66 2c20  ading_fee(self, 
+000454d0: 7379 6d62 6f6c 3a20 7374 722c 2070 6172  symbol: str, par
+000454e0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+000454f0: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00045500: 6368 2074 6865 2074 7261 6469 6e67 2066  ch the trading f
+00045510: 6565 7320 666f 7220 6120 6d61 726b 6574  ees for a market
+00045520: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00045530: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
+00045540: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
+00045550: 6c0a 2020 2020 2020 2020 3a70 6172 616d  l.        :param
+00045560: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+00045570: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+00045580: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+00045590: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
+000455a0: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+000455b0: 7572 6e73 2064 6963 743a 2061 2060 6665  urns dict: a `fe
+000455c0: 6520 7374 7275 6374 7572 6520 3c68 7474  e structure <htt
+000455d0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+000455e0: 6f6d 2f23 2f3f 6964 3d66 6565 2d73 7472  om/#/?id=fee-str
+000455f0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+00045600: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
+00045610: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+00045620: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
+00045630: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+00045640: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+00045650: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+00045660: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
+00045670: 626f 6c27 3a20 6d61 726b 6574 5b27 6964  bol': market['id
+00045680: 275d 2c0a 2020 2020 2020 2020 7d0a 2020  '],.        }.  
+00045690: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+000456a0: 2061 7761 6974 2073 656c 662e 7361 7069   await self.sapi
+000456b0: 4765 7441 7373 6574 5472 6164 6546 6565  GetAssetTradeFee
+000456c0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+000456d0: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+000456e0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000456f0: 2023 2020 2020 205b 0a20 2020 2020 2020   #     [.       
+00045700: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
+00045710: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
+00045720: 6d62 6f6c 223a 2022 4254 4355 5344 5422  mbol": "BTCUSDT"
+00045730: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00045740: 2020 2020 226d 616b 6572 436f 6d6d 6973      "makerCommis
+00045750: 7369 6f6e 223a 2022 302e 3030 3122 2c0a  sion": "0.001",.
+00045760: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00045770: 2020 2274 616b 6572 436f 6d6d 6973 7369    "takerCommissi
+00045780: 6f6e 223a 2022 302e 3030 3122 0a20 2020  on": "0.001".   
+00045790: 2020 2020 2023 2020 2020 2020 207d 0a20       #       }. 
+000457a0: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
+000457b0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000457c0: 2066 6972 7374 203d 2073 656c 662e 7361   first = self.sa
+000457d0: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+000457e0: 652c 2030 2c20 7b7d 290a 2020 2020 2020  e, 0, {}).      
+000457f0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00045800: 7273 655f 7472 6164 696e 675f 6665 6528  rse_trading_fee(
+00045810: 6669 7273 7429 0a0a 2020 2020 6173 796e  first)..    asyn
+00045820: 6320 6465 6620 6665 7463 685f 7472 6164  c def fetch_trad
+00045830: 696e 675f 6665 6573 2873 656c 662c 2070  ing_fees(self, p
+00045840: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00045850: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
+00045860: 6574 6368 2074 6865 2074 7261 6469 6e67  etch the trading
+00045870: 2066 6565 7320 666f 7220 6d75 6c74 6970   fees for multip
+00045880: 6c65 206d 6172 6b65 7473 0a20 2020 2020  le markets.     
+00045890: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+000458a0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+000458b0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+000458c0: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
+000458d0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+000458e0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+000458f0: 6374 3a20 6120 6469 6374 696f 6e61 7279  ct: a dictionary
+00045900: 206f 6620 6066 6565 2073 7472 7563 7475   of `fee structu
+00045910: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
+00045920: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
+00045930: 3d66 6565 2d73 7472 7563 7475 7265 3e60  =fee-structure>`
+00045940: 2069 6e64 6578 6564 2062 7920 6d61 726b   indexed by mark
+00045950: 6574 2073 796d 626f 6c73 0a20 2020 2020  et symbols.     
+00045960: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
+00045970: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
+00045980: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+00045990: 206d 6574 686f 6420 3d20 4e6f 6e65 0a20   method = None. 
+000459a0: 2020 2020 2020 2064 6566 6175 6c74 5479         defaultTy
+000459b0: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
+000459c0: 7472 696e 675f 3228 7365 6c66 2e6f 7074  tring_2(self.opt
+000459d0: 696f 6e73 2c20 2766 6574 6368 5472 6164  ions, 'fetchTrad
+000459e0: 696e 6746 6565 7327 2c20 2764 6566 6175  ingFees', 'defau
+000459f0: 6c74 5479 7065 272c 2027 6c69 6e65 6172  ltType', 'linear
+00045a00: 2729 0a20 2020 2020 2020 2074 7970 6520  ').        type 
+00045a10: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00045a20: 6e67 2870 6172 616d 732c 2027 7479 7065  ng(params, 'type
+00045a30: 272c 2064 6566 6175 6c74 5479 7065 290a  ', defaultType).
+00045a40: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+00045a50: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+00045a60: 732c 2027 7479 7065 2729 0a20 2020 2020  s, 'type').     
+00045a70: 2020 2073 7562 5479 7065 203d 204e 6f6e     subType = Non
+00045a80: 650a 2020 2020 2020 2020 7375 6254 7970  e.        subTyp
+00045a90: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
+00045aa0: 2e68 616e 646c 655f 7375 625f 7479 7065  .handle_sub_type
+00045ab0: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+00045ac0: 6368 5472 6164 696e 6746 6565 7327 2c20  chTradingFees', 
+00045ad0: 4e6f 6e65 2c20 7061 7261 6d73 290a 2020  None, params).  
+00045ae0: 2020 2020 2020 6973 5370 6f74 4f72 4d61        isSpotOrMa
+00045af0: 7267 696e 203d 2028 7479 7065 203d 3d20  rgin = (type == 
+00045b00: 2773 706f 7427 2920 6f72 2028 7479 7065  'spot') or (type
+00045b10: 203d 3d20 276d 6172 6769 6e27 290a 2020   == 'margin').  
+00045b20: 2020 2020 2020 6973 4c69 6e65 6172 203d        isLinear =
+00045b30: 2073 656c 662e 6973 5f6c 696e 6561 7228   self.is_linear(
+00045b40: 7479 7065 2c20 7375 6254 7970 6529 0a20  type, subType). 
+00045b50: 2020 2020 2020 2069 7349 6e76 6572 7365         isInverse
+00045b60: 203d 2073 656c 662e 6973 5f69 6e76 6572   = self.is_inver
+00045b70: 7365 2874 7970 652c 2073 7562 5479 7065  se(type, subType
+00045b80: 290a 2020 2020 2020 2020 6966 2069 7353  ).        if isS
+00045b90: 706f 744f 724d 6172 6769 6e3a 0a20 2020  potOrMargin:.   
+00045ba0: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00045bb0: 3d20 2773 6170 6947 6574 4173 7365 7454  = 'sapiGetAssetT
+00045bc0: 7261 6465 4665 6527 0a20 2020 2020 2020  radeFee'.       
+00045bd0: 2065 6c69 6620 6973 4c69 6e65 6172 3a0a   elif isLinear:.
+00045be0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00045bf0: 6f64 203d 2027 6661 7069 5072 6976 6174  od = 'fapiPrivat
+00045c00: 6547 6574 4163 636f 756e 7427 0a20 2020  eGetAccount'.   
+00045c10: 2020 2020 2065 6c69 6620 6973 496e 7665       elif isInve
+00045c20: 7273 653a 0a20 2020 2020 2020 2020 2020  rse:.           
+00045c30: 206d 6574 686f 6420 3d20 2764 6170 6950   method = 'dapiP
+00045c40: 7269 7661 7465 4765 7441 6363 6f75 6e74  rivateGetAccount
+00045c50: 270a 2020 2020 2020 2020 7265 7370 6f6e  '.        respon
+00045c60: 7365 203d 2061 7761 6974 2067 6574 6174  se = await getat
+00045c70: 7472 2873 656c 662c 206d 6574 686f 6429  tr(self, method)
+00045c80: 2870 6172 616d 7329 0a20 2020 2020 2020  (params).       
+00045c90: 2023 0a20 2020 2020 2020 2023 2073 6170   #.        # sap
+00045ca0: 6920 2f20 7370 6f74 0a20 2020 2020 2020  i / spot.       
+00045cb0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00045cc0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
+00045cd0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00045ce0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+00045cf0: 225a 5258 424e 4222 2c0a 2020 2020 2020  "ZRXBNB",.      
+00045d00: 2020 2320 2020 2020 2020 2020 226d 616b    #         "mak
+00045d10: 6572 436f 6d6d 6973 7369 6f6e 223a 2022  erCommission": "
+00045d20: 302e 3030 3122 2c0a 2020 2020 2020 2020  0.001",.        
+00045d30: 2320 2020 2020 2020 2020 2274 616b 6572  #         "taker
+00045d40: 436f 6d6d 6973 7369 6f6e 223a 2022 302e  Commission": "0.
+00045d50: 3030 3122 0a20 2020 2020 2020 2023 2020  001".        #  
+00045d60: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00045d70: 2320 2020 2020 2020 7b0a 2020 2020 2020  #       {.      
+00045d80: 2020 2320 2020 2020 2020 2020 2273 796d    #         "sym
+00045d90: 626f 6c22 3a20 225a 5258 4254 4322 2c0a  bol": "ZRXBTC",.
+00045da0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00045db0: 2020 226d 616b 6572 436f 6d6d 6973 7369    "makerCommissi
+00045dc0: 6f6e 223a 2022 302e 3030 3122 2c0a 2020  on": "0.001",.  
+00045dd0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00045de0: 2274 616b 6572 436f 6d6d 6973 7369 6f6e  "takerCommission
+00045df0: 223a 2022 302e 3030 3122 0a20 2020 2020  ": "0.001".     
+00045e00: 2020 2023 2020 2020 2020 207d 2c0a 2020     #       },.  
+00045e10: 2020 2020 2020 2320 2020 205d 0a20 2020        #    ].   
+00045e20: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00045e30: 2066 6170 6920 2f20 6675 7475 7265 202f   fapi / future /
+00045e40: 206c 696e 6561 720a 2020 2020 2020 2020   linear.        
+00045e50: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00045e60: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00045e70: 2020 2020 2266 6565 5469 6572 223a 2030      "feeTier": 0
+00045e80: 2c20 2020 2020 2020 2320 6163 636f 756e  ,       # accoun
+00045e90: 7420 636f 6d6d 6973 7373 696f 6e20 7469  t commisssion ti
+00045ea0: 6572 0a20 2020 2020 2020 2023 2020 2020  er.        #    
+00045eb0: 2020 2020 2022 6361 6e54 7261 6465 223a       "canTrade":
+00045ec0: 2054 7275 652c 2020 2023 2069 6620 6361   True,   # if ca
+00045ed0: 6e20 7472 6164 650a 2020 2020 2020 2020  n trade.        
+00045ee0: 2320 2020 2020 2020 2020 2263 616e 4465  #         "canDe
+00045ef0: 706f 7369 7422 3a20 5472 7565 2c20 2020  posit": True,   
+00045f00: 2020 2320 6966 2063 616e 2074 7261 6e73    # if can trans
+00045f10: 6665 7220 696e 2061 7373 6574 0a20 2020  fer in asset.   
+00045f20: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00045f30: 6361 6e57 6974 6864 7261 7722 3a20 5472  canWithdraw": Tr
+00045f40: 7565 2c20 2020 2023 2069 6620 6361 6e20  ue,    # if can 
+00045f50: 7472 616e 7366 6572 206f 7574 2061 7373  transfer out ass
+00045f60: 6574 0a20 2020 2020 2020 2023 2020 2020  et.        #    
+00045f70: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
+00045f80: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+00045f90: 2020 2020 2020 2020 2274 6f74 616c 496e          "totalIn
+00045fa0: 6974 6961 6c4d 6172 6769 6e22 3a20 2230  itialMargin": "0
+00045fb0: 2e30 3030 3030 3030 3022 2c20 2020 2023  .00000000",    #
+00045fc0: 2074 6f74 616c 2069 6e69 7469 616c 206d   total initial m
+00045fd0: 6172 6769 6e20 7265 7175 6972 6564 2077  argin required w
+00045fe0: 6974 6820 6375 7272 656e 7420 6d61 726b  ith current mark
+00045ff0: 2070 7269 6365 2875 7365 6c65 7373 2077   price(useless w
+00046000: 6974 6820 6973 6f6c 6174 6564 2070 6f73  ith isolated pos
+00046010: 6974 696f 6e73 292c 206f 6e6c 7920 666f  itions), only fo
+00046020: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
+00046030: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046040: 746f 7461 6c4d 6169 6e74 4d61 7267 696e  totalMaintMargin
+00046050: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
+00046060: 2020 2020 2023 2074 6f74 616c 206d 6169       # total mai
+00046070: 6e74 656e 616e 6365 206d 6172 6769 6e20  ntenance margin 
+00046080: 7265 7175 6972 6564 2c20 6f6e 6c79 2066  required, only f
+00046090: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
+000460a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000460b0: 2274 6f74 616c 5761 6c6c 6574 4261 6c61  "totalWalletBala
+000460c0: 6e63 6522 3a20 2232 332e 3732 3436 3932  nce": "23.724692
+000460d0: 3036 222c 2020 2020 2023 2074 6f74 616c  06",     # total
+000460e0: 2077 616c 6c65 7420 6261 6c61 6e63 652c   wallet balance,
+000460f0: 206f 6e6c 7920 666f 7220 5553 4454 2061   only for USDT a
+00046100: 7373 6574 0a20 2020 2020 2020 2023 2020  sset.        #  
+00046110: 2020 2020 2020 2022 746f 7461 6c55 6e72         "totalUnr
+00046120: 6561 6c69 7a65 6450 726f 6669 7422 3a20  ealizedProfit": 
+00046130: 2230 2e30 3030 3030 3030 3022 2c20 2020  "0.00000000",   
+00046140: 2320 746f 7461 6c20 756e 7265 616c 697a  # total unrealiz
+00046150: 6564 2070 726f 6669 742c 206f 6e6c 7920  ed profit, only 
+00046160: 666f 7220 5553 4454 2061 7373 6574 0a20  for USDT asset. 
+00046170: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046180: 2022 746f 7461 6c4d 6172 6769 6e42 616c   "totalMarginBal
+00046190: 616e 6365 223a 2022 3233 2e37 3234 3639  ance": "23.72469
+000461a0: 3230 3622 2c20 2020 2020 2320 746f 7461  206",     # tota
+000461b0: 6c20 6d61 7267 696e 2062 616c 616e 6365  l margin balance
+000461c0: 2c20 6f6e 6c79 2066 6f72 2055 5344 5420  , only for USDT 
+000461d0: 6173 7365 740a 2020 2020 2020 2020 2320  asset.        # 
+000461e0: 2020 2020 2020 2020 2274 6f74 616c 506f          "totalPo
+000461f0: 7369 7469 6f6e 496e 6974 6961 6c4d 6172  sitionInitialMar
+00046200: 6769 6e22 3a20 2230 2e30 3030 3030 3030  gin": "0.0000000
+00046210: 3022 2c20 2020 2023 2069 6e69 7469 616c  0",    # initial
+00046220: 206d 6172 6769 6e20 7265 7175 6972 6564   margin required
+00046230: 2066 6f72 2070 6f73 6974 696f 6e73 2077   for positions w
+00046240: 6974 6820 6375 7272 656e 7420 6d61 726b  ith current mark
+00046250: 2070 7269 6365 2c20 6f6e 6c79 2066 6f72   price, only for
+00046260: 2055 5344 5420 6173 7365 740a 2020 2020   USDT asset.    
+00046270: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00046280: 6f74 616c 4f70 656e 4f72 6465 7249 6e69  otalOpenOrderIni
+00046290: 7469 616c 4d61 7267 696e 223a 2022 302e  tialMargin": "0.
+000462a0: 3030 3030 3030 3030 222c 2020 2023 2069  00000000",   # i
+000462b0: 6e69 7469 616c 206d 6172 6769 6e20 7265  nitial margin re
+000462c0: 7175 6972 6564 2066 6f72 206f 7065 6e20  quired for open 
+000462d0: 6f72 6465 7273 2077 6974 6820 6375 7272  orders with curr
+000462e0: 656e 7420 6d61 726b 2070 7269 6365 2c20  ent mark price, 
+000462f0: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
+00046300: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
+00046310: 2020 2020 2020 2274 6f74 616c 4372 6f73        "totalCros
+00046320: 7357 616c 6c65 7442 616c 616e 6365 223a  sWalletBalance":
+00046330: 2022 3233 2e37 3234 3639 3230 3622 2c20   "23.72469206", 
+00046340: 2020 2020 2023 2063 726f 7373 6564 2077       # crossed w
+00046350: 616c 6c65 7420 6261 6c61 6e63 652c 206f  allet balance, o
+00046360: 6e6c 7920 666f 7220 5553 4454 2061 7373  nly for USDT ass
+00046370: 6574 0a20 2020 2020 2020 2023 2020 2020  et.        #    
+00046380: 2020 2020 2022 746f 7461 6c43 726f 7373       "totalCross
+00046390: 556e 506e 6c22 3a20 2230 2e30 3030 3030  UnPnl": "0.00000
+000463a0: 3030 3022 2c20 2020 2020 2023 2075 6e72  000",      # unr
+000463b0: 6561 6c69 7a65 6420 7072 6f66 6974 206f  ealized profit o
+000463c0: 6620 6372 6f73 7365 6420 706f 7369 7469  f crossed positi
+000463d0: 6f6e 732c 206f 6e6c 7920 666f 7220 5553  ons, only for US
+000463e0: 4454 2061 7373 6574 0a20 2020 2020 2020  DT asset.       
+000463f0: 2023 2020 2020 2020 2020 2022 6176 6169   #         "avai
+00046400: 6c61 626c 6542 616c 616e 6365 223a 2022  lableBalance": "
+00046410: 3233 2e37 3234 3639 3230 3622 2c20 2020  23.72469206",   
+00046420: 2020 2020 2320 6176 6169 6c61 626c 6520      # available 
+00046430: 6261 6c61 6e63 652c 206f 6e6c 7920 666f  balance, only fo
+00046440: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
+00046450: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046460: 6d61 7857 6974 6864 7261 7741 6d6f 756e  maxWithdrawAmoun
+00046470: 7422 3a20 2232 332e 3732 3436 3932 3036  t": "23.72469206
+00046480: 2220 2020 2020 2320 6d61 7869 6d75 6d20  "     # maximum 
+00046490: 616d 6f75 6e74 2066 6f72 2074 7261 6e73  amount for trans
+000464a0: 6665 7220 6f75 742c 206f 6e6c 7920 666f  fer out, only fo
+000464b0: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
+000464c0: 2020 2020 2023 2020 2020 2020 2020 202e       #         .
+000464d0: 2e2e 0a20 2020 2020 2020 2023 2020 2020  ...        #    
+000464e0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+000464f0: 2020 2020 2023 2064 6170 6920 2f20 6465       # dapi / de
+00046500: 6c69 7665 7279 202f 2069 6e76 6572 7365  livery / inverse
+00046510: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00046520: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00046530: 2020 2023 2020 2020 2020 2020 2022 6361     #         "ca
+00046540: 6e44 6570 6f73 6974 223a 2054 7275 652c  nDeposit": True,
+00046550: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00046560: 2020 2022 6361 6e54 7261 6465 223a 2054     "canTrade": T
+00046570: 7275 652c 0a20 2020 2020 2020 2023 2020  rue,.        #  
+00046580: 2020 2020 2020 2022 6361 6e57 6974 6864         "canWithd
+00046590: 7261 7722 3a20 5472 7565 2c0a 2020 2020  raw": True,.    
+000465a0: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
+000465b0: 6565 5469 6572 223a 2032 2c0a 2020 2020  eeTier": 2,.    
+000465c0: 2020 2020 2320 2020 2020 2020 2020 2275      #         "u
+000465d0: 7064 6174 6554 696d 6522 3a20 300a 2020  pdateTime": 0.  
+000465e0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+000465f0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00046600: 6966 2069 7353 706f 744f 724d 6172 6769  if isSpotOrMargi
+00046610: 6e3a 0a20 2020 2020 2020 2020 2020 2023  n:.            #
+00046620: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00046630: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+00046640: 2320 2020 2020 2020 7b0a 2020 2020 2020  #       {.      
+00046650: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00046660: 2273 796d 626f 6c22 3a20 225a 5258 424e  "symbol": "ZRXBN
+00046670: 4222 2c0a 2020 2020 2020 2020 2020 2020  B",.            
+00046680: 2320 2020 2020 2020 2020 226d 616b 6572  #         "maker
+00046690: 436f 6d6d 6973 7369 6f6e 223a 2022 302e  Commission": "0.
+000466a0: 3030 3122 2c0a 2020 2020 2020 2020 2020  001",.          
+000466b0: 2020 2320 2020 2020 2020 2020 2274 616b    #         "tak
+000466c0: 6572 436f 6d6d 6973 7369 6f6e 223a 2022  erCommission": "
+000466d0: 302e 3030 3122 0a20 2020 2020 2020 2020  0.001".         
+000466e0: 2020 2023 2020 2020 2020 207d 2c0a 2020     #       },.  
+000466f0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00046700: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00046710: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
+00046720: 6c22 3a20 225a 5258 4254 4322 2c0a 2020  l": "ZRXBTC",.  
+00046730: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00046740: 2020 2020 226d 616b 6572 436f 6d6d 6973      "makerCommis
+00046750: 7369 6f6e 223a 2022 302e 3030 3122 2c0a  sion": "0.001",.
+00046760: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00046770: 2020 2020 2020 2274 616b 6572 436f 6d6d        "takerComm
+00046780: 6973 7369 6f6e 223a 2022 302e 3030 3122  ission": "0.001"
+00046790: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000467a0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+000467b0: 2020 2020 2320 2020 205d 0a20 2020 2020      #    ].     
+000467c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000467d0: 2020 2020 2072 6573 756c 7420 3d20 7b7d       result = {}
+000467e0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000467f0: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
+00046800: 656e 2872 6573 706f 6e73 6529 293a 0a20  en(response)):. 
+00046810: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00046820: 6565 203d 2073 656c 662e 7061 7273 655f  ee = self.parse_
+00046830: 7472 6164 696e 675f 6665 6528 7265 7370  trading_fee(resp
+00046840: 6f6e 7365 5b69 5d29 0a20 2020 2020 2020  onse[i]).       
+00046850: 2020 2020 2020 2020 2073 796d 626f 6c20           symbol 
+00046860: 3d20 6665 655b 2773 796d 626f 6c27 5d0a  = fee['symbol'].
+00046870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046880: 7265 7375 6c74 5b73 796d 626f 6c5d 203d  result[symbol] =
+00046890: 2066 6565 0a20 2020 2020 2020 2020 2020   fee.           
+000468a0: 2072 6574 7572 6e20 7265 7375 6c74 0a20   return result. 
+000468b0: 2020 2020 2020 2065 6c69 6620 6973 4c69         elif isLi
+000468c0: 6e65 6172 3a0a 2020 2020 2020 2020 2020  near:.          
+000468d0: 2020 230a 2020 2020 2020 2020 2020 2020    #.            
+000468e0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+000468f0: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
+00046900: 6565 5469 6572 223a 2030 2c20 2020 2020  eeTier": 0,     
+00046910: 2020 2320 6163 636f 756e 7420 636f 6d6d    # account comm
+00046920: 6973 7373 696f 6e20 7469 6572 0a20 2020  isssion tier.   
+00046930: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00046940: 2020 2022 6361 6e54 7261 6465 223a 2054     "canTrade": T
+00046950: 7275 652c 2020 2023 2069 6620 6361 6e20  rue,   # if can 
+00046960: 7472 6164 650a 2020 2020 2020 2020 2020  trade.          
+00046970: 2020 2320 2020 2020 2020 2020 2263 616e    #         "can
+00046980: 4465 706f 7369 7422 3a20 5472 7565 2c20  Deposit": True, 
+00046990: 2020 2020 2320 6966 2063 616e 2074 7261      # if can tra
+000469a0: 6e73 6665 7220 696e 2061 7373 6574 0a20  nsfer in asset. 
+000469b0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000469c0: 2020 2020 2022 6361 6e57 6974 6864 7261       "canWithdra
+000469d0: 7722 3a20 5472 7565 2c20 2020 2023 2069  w": True,    # i
+000469e0: 6620 6361 6e20 7472 616e 7366 6572 206f  f can transfer o
+000469f0: 7574 2061 7373 6574 0a20 2020 2020 2020  ut asset.       
+00046a00: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046a10: 7570 6461 7465 5469 6d65 223a 2030 2c0a  updateTime": 0,.
+00046a20: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00046a30: 2020 2020 2020 2274 6f74 616c 496e 6974        "totalInit
+00046a40: 6961 6c4d 6172 6769 6e22 3a20 2230 2e30  ialMargin": "0.0
+00046a50: 3030 3030 3030 3022 2c20 2020 2023 2074  0000000",    # t
+00046a60: 6f74 616c 2069 6e69 7469 616c 206d 6172  otal initial mar
+00046a70: 6769 6e20 7265 7175 6972 6564 2077 6974  gin required wit
+00046a80: 6820 6375 7272 656e 7420 6d61 726b 2070  h current mark p
+00046a90: 7269 6365 2875 7365 6c65 7373 2077 6974  rice(useless wit
+00046aa0: 6820 6973 6f6c 6174 6564 2070 6f73 6974  h isolated posit
+00046ab0: 696f 6e73 292c 206f 6e6c 7920 666f 7220  ions), only for 
+00046ac0: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
+00046ad0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046ae0: 2022 746f 7461 6c4d 6169 6e74 4d61 7267   "totalMaintMarg
+00046af0: 696e 223a 2022 302e 3030 3030 3030 3030  in": "0.00000000
+00046b00: 222c 2020 2020 2023 2074 6f74 616c 206d  ",     # total m
+00046b10: 6169 6e74 656e 616e 6365 206d 6172 6769  aintenance margi
+00046b20: 6e20 7265 7175 6972 6564 2c20 6f6e 6c79  n required, only
+00046b30: 2066 6f72 2055 5344 5420 6173 7365 740a   for USDT asset.
+00046b40: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00046b50: 2020 2020 2020 2274 6f74 616c 5761 6c6c        "totalWall
+00046b60: 6574 4261 6c61 6e63 6522 3a20 2232 332e  etBalance": "23.
+00046b70: 3732 3436 3932 3036 222c 2020 2020 2023  72469206",     #
+00046b80: 2074 6f74 616c 2077 616c 6c65 7420 6261   total wallet ba
+00046b90: 6c61 6e63 652c 206f 6e6c 7920 666f 7220  lance, only for 
+00046ba0: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
+00046bb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046bc0: 2022 746f 7461 6c55 6e72 6561 6c69 7a65   "totalUnrealize
+00046bd0: 6450 726f 6669 7422 3a20 2230 2e30 3030  dProfit": "0.000
+00046be0: 3030 3030 3022 2c20 2020 2320 746f 7461  00000",   # tota
+00046bf0: 6c20 756e 7265 616c 697a 6564 2070 726f  l unrealized pro
+00046c00: 6669 742c 206f 6e6c 7920 666f 7220 5553  fit, only for US
+00046c10: 4454 2061 7373 6574 0a20 2020 2020 2020  DT asset.       
+00046c20: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046c30: 746f 7461 6c4d 6172 6769 6e42 616c 616e  totalMarginBalan
+00046c40: 6365 223a 2022 3233 2e37 3234 3639 3230  ce": "23.7246920
+00046c50: 3622 2c20 2020 2020 2320 746f 7461 6c20  6",     # total 
+00046c60: 6d61 7267 696e 2062 616c 616e 6365 2c20  margin balance, 
+00046c70: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
+00046c80: 7365 740a 2020 2020 2020 2020 2020 2020  set.            
+00046c90: 2320 2020 2020 2020 2020 2274 6f74 616c  #         "total
+00046ca0: 506f 7369 7469 6f6e 496e 6974 6961 6c4d  PositionInitialM
+00046cb0: 6172 6769 6e22 3a20 2230 2e30 3030 3030  argin": "0.00000
+00046cc0: 3030 3022 2c20 2020 2023 2069 6e69 7469  000",    # initi
+00046cd0: 616c 206d 6172 6769 6e20 7265 7175 6972  al margin requir
+00046ce0: 6564 2066 6f72 2070 6f73 6974 696f 6e73  ed for positions
+00046cf0: 2077 6974 6820 6375 7272 656e 7420 6d61   with current ma
+00046d00: 726b 2070 7269 6365 2c20 6f6e 6c79 2066  rk price, only f
+00046d10: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
+00046d20: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00046d30: 2020 2020 2274 6f74 616c 4f70 656e 4f72      "totalOpenOr
+00046d40: 6465 7249 6e69 7469 616c 4d61 7267 696e  derInitialMargin
+00046d50: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
+00046d60: 2020 2023 2069 6e69 7469 616c 206d 6172     # initial mar
+00046d70: 6769 6e20 7265 7175 6972 6564 2066 6f72  gin required for
+00046d80: 206f 7065 6e20 6f72 6465 7273 2077 6974   open orders wit
+00046d90: 6820 6375 7272 656e 7420 6d61 726b 2070  h current mark p
+00046da0: 7269 6365 2c20 6f6e 6c79 2066 6f72 2055  rice, only for U
+00046db0: 5344 5420 6173 7365 740a 2020 2020 2020  SDT asset.      
+00046dc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00046dd0: 2274 6f74 616c 4372 6f73 7357 616c 6c65  "totalCrossWalle
+00046de0: 7442 616c 616e 6365 223a 2022 3233 2e37  tBalance": "23.7
+00046df0: 3234 3639 3230 3622 2c20 2020 2020 2023  2469206",      #
+00046e00: 2063 726f 7373 6564 2077 616c 6c65 7420   crossed wallet 
+00046e10: 6261 6c61 6e63 652c 206f 6e6c 7920 666f  balance, only fo
+00046e20: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
+00046e30: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00046e40: 2020 2022 746f 7461 6c43 726f 7373 556e     "totalCrossUn
+00046e50: 506e 6c22 3a20 2230 2e30 3030 3030 3030  Pnl": "0.0000000
+00046e60: 3022 2c20 2020 2020 2023 2075 6e72 6561  0",      # unrea
+00046e70: 6c69 7a65 6420 7072 6f66 6974 206f 6620  lized profit of 
+00046e80: 6372 6f73 7365 6420 706f 7369 7469 6f6e  crossed position
+00046e90: 732c 206f 6e6c 7920 666f 7220 5553 4454  s, only for USDT
+00046ea0: 2061 7373 6574 0a20 2020 2020 2020 2020   asset.         
+00046eb0: 2020 2023 2020 2020 2020 2020 2022 6176     #         "av
+00046ec0: 6169 6c61 626c 6542 616c 616e 6365 223a  ailableBalance":
+00046ed0: 2022 3233 2e37 3234 3639 3230 3622 2c20   "23.72469206", 
+00046ee0: 2020 2020 2020 2320 6176 6169 6c61 626c        # availabl
+00046ef0: 6520 6261 6c61 6e63 652c 206f 6e6c 7920  e balance, only 
+00046f00: 666f 7220 5553 4454 2061 7373 6574 0a20  for USDT asset. 
+00046f10: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00046f20: 2020 2020 2022 6d61 7857 6974 6864 7261       "maxWithdra
+00046f30: 7741 6d6f 756e 7422 3a20 2232 332e 3732  wAmount": "23.72
+00046f40: 3436 3932 3036 2220 2020 2020 2320 6d61  469206"     # ma
+00046f50: 7869 6d75 6d20 616d 6f75 6e74 2066 6f72  ximum amount for
+00046f60: 2074 7261 6e73 6665 7220 6f75 742c 206f   transfer out, o
+00046f70: 6e6c 7920 666f 7220 5553 4454 2061 7373  nly for USDT ass
+00046f80: 6574 0a20 2020 2020 2020 2020 2020 2023  et.            #
+00046f90: 2020 2020 2020 2020 202e 2e2e 0a20 2020           ....   
+00046fa0: 2020 2020 2020 2020 2023 2020 2020 207d           #     }
+00046fb0: 0a20 2020 2020 2020 2020 2020 2023 0a20  .            #. 
+00046fc0: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
+00046fd0: 6c73 203d 206c 6973 7428 7365 6c66 2e6d  ls = list(self.m
+00046fe0: 6172 6b65 7473 2e6b 6579 7328 2929 0a20  arkets.keys()). 
+00046ff0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00047000: 7420 3d20 7b7d 0a20 2020 2020 2020 2020  t = {}.         
+00047010: 2020 2066 6565 5469 6572 203d 2073 656c     feeTier = sel
+00047020: 662e 7361 6665 5f69 6e74 6567 6572 2872  f.safe_integer(r
+00047030: 6573 706f 6e73 652c 2027 6665 6554 6965  esponse, 'feeTie
+00047040: 7227 290a 2020 2020 2020 2020 2020 2020  r').            
+00047050: 6665 6554 6965 7273 203d 2073 656c 662e  feeTiers = self.
+00047060: 6665 6573 5b27 6c69 6e65 6172 275d 5b27  fees['linear']['
+00047070: 7472 6164 696e 6727 5d5b 2774 6965 7273  trading']['tiers
+00047080: 275d 0a20 2020 2020 2020 2020 2020 206d  '].            m
+00047090: 616b 6572 203d 2066 6565 5469 6572 735b  aker = feeTiers[
+000470a0: 276d 616b 6572 275d 5b66 6565 5469 6572  'maker'][feeTier
+000470b0: 5d5b 315d 0a20 2020 2020 2020 2020 2020  ][1].           
+000470c0: 2074 616b 6572 203d 2066 6565 5469 6572   taker = feeTier
+000470d0: 735b 2774 616b 6572 275d 5b66 6565 5469  s['taker'][feeTi
+000470e0: 6572 5d5b 315d 0a20 2020 2020 2020 2020  er][1].         
+000470f0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+00047100: 6528 302c 206c 656e 2873 796d 626f 6c73  e(0, len(symbols
+00047110: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00047120: 2020 2020 7379 6d62 6f6c 203d 2073 796d      symbol = sym
+00047130: 626f 6c73 5b69 5d0a 2020 2020 2020 2020  bols[i].        
+00047140: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00047150: 2073 656c 662e 6d61 726b 6574 735b 7379   self.markets[sy
+00047160: 6d62 6f6c 5d0a 2020 2020 2020 2020 2020  mbol].          
+00047170: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+00047180: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+00047190: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000471a0: 6573 756c 745b 7379 6d62 6f6c 5d20 3d20  esult[symbol] = 
+000471b0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+000471c0: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+000471d0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+000471e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000471f0: 2766 6565 5469 6572 273a 2066 6565 5469  'feeTier': feeTi
+00047200: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
+00047210: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00047220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047230: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
+00047240: 2073 796d 626f 6c2c 0a20 2020 2020 2020   symbol,.       
+00047250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047260: 2027 6d61 6b65 7227 3a20 6d61 6b65 722c   'maker': maker,
+00047270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047280: 2020 2020 2020 2020 2027 7461 6b65 7227           'taker'
+00047290: 3a20 7461 6b65 722c 0a20 2020 2020 2020  : taker,.       
+000472a0: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+000472b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000472c0: 6e20 7265 7375 6c74 0a20 2020 2020 2020  n result.       
+000472d0: 2065 6c69 6620 6973 496e 7665 7273 653a   elif isInverse:
+000472e0: 0a20 2020 2020 2020 2020 2020 2023 0a20  .            #. 
+000472f0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00047300: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+00047310: 2020 2020 2020 2020 2022 6361 6e44 6570           "canDep
+00047320: 6f73 6974 223a 2054 7275 652c 0a20 2020  osit": True,.   
+00047330: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00047340: 2020 2022 6361 6e54 7261 6465 223a 2054     "canTrade": T
+00047350: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
+00047360: 2023 2020 2020 2020 2020 2022 6361 6e57   #         "canW
+00047370: 6974 6864 7261 7722 3a20 5472 7565 2c0a  ithdraw": True,.
+00047380: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00047390: 2020 2020 2020 2266 6565 5469 6572 223a        "feeTier":
+000473a0: 2032 2c0a 2020 2020 2020 2020 2020 2020   2,.            
+000473b0: 2320 2020 2020 2020 2020 2275 7064 6174  #         "updat
+000473c0: 6554 696d 6522 3a20 300a 2020 2020 2020  eTime": 0.      
+000473d0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+000473e0: 2020 2020 2020 2020 2020 230a 2020 2020            #.    
+000473f0: 2020 2020 2020 2020 7379 6d62 6f6c 7320          symbols 
+00047400: 3d20 6c69 7374 2873 656c 662e 6d61 726b  = list(self.mark
+00047410: 6574 732e 6b65 7973 2829 290a 2020 2020  ets.keys()).    
+00047420: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00047430: 207b 7d0a 2020 2020 2020 2020 2020 2020   {}.            
+00047440: 6665 6554 6965 7220 3d20 7365 6c66 2e73  feeTier = self.s
+00047450: 6166 655f 696e 7465 6765 7228 7265 7370  afe_integer(resp
+00047460: 6f6e 7365 2c20 2766 6565 5469 6572 2729  onse, 'feeTier')
+00047470: 0a20 2020 2020 2020 2020 2020 2066 6565  .            fee
+00047480: 5469 6572 7320 3d20 7365 6c66 2e66 6565  Tiers = self.fee
+00047490: 735b 2769 6e76 6572 7365 275d 5b27 7472  s['inverse']['tr
+000474a0: 6164 696e 6727 5d5b 2774 6965 7273 275d  ading']['tiers']
+000474b0: 0a20 2020 2020 2020 2020 2020 206d 616b  .            mak
+000474c0: 6572 203d 2066 6565 5469 6572 735b 276d  er = feeTiers['m
+000474d0: 616b 6572 275d 5b66 6565 5469 6572 5d5b  aker'][feeTier][
+000474e0: 315d 0a20 2020 2020 2020 2020 2020 2074  1].            t
+000474f0: 616b 6572 203d 2066 6565 5469 6572 735b  aker = feeTiers[
+00047500: 2774 616b 6572 275d 5b66 6565 5469 6572  'taker'][feeTier
+00047510: 5d5b 315d 0a20 2020 2020 2020 2020 2020  ][1].           
+00047520: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00047530: 302c 206c 656e 2873 796d 626f 6c73 2929  0, len(symbols))
+00047540: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00047550: 2020 7379 6d62 6f6c 203d 2073 796d 626f    symbol = symbo
+00047560: 6c73 5b69 5d0a 2020 2020 2020 2020 2020  ls[i].          
+00047570: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00047580: 656c 662e 6d61 726b 6574 735b 7379 6d62  elf.markets[symb
+00047590: 6f6c 5d0a 2020 2020 2020 2020 2020 2020  ol].            
+000475a0: 2020 2020 6966 206d 6172 6b65 745b 2769      if market['i
+000475b0: 6e76 6572 7365 275d 3a0a 2020 2020 2020  nverse']:.      
+000475c0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000475d0: 7375 6c74 5b73 796d 626f 6c5d 203d 207b  sult[symbol] = {
+000475e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000475f0: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+00047600: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00047610: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00047620: 6665 6554 6965 7227 3a20 6665 6554 6965  feeTier': feeTie
+00047630: 722c 0a20 2020 2020 2020 2020 2020 2020  r,.             
+00047640: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+00047650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047660: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+00047670: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
+00047680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047690: 276d 616b 6572 273a 206d 616b 6572 2c0a  'maker': maker,.
+000476a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000476b0: 2020 2020 2020 2020 2774 616b 6572 273a          'taker':
+000476c0: 2074 616b 6572 2c0a 2020 2020 2020 2020   taker,.        
+000476d0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+000476e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000476f0: 2072 6573 756c 740a 2020 2020 2020 2020   result.        
+00047700: 7265 7475 726e 204e 6f6e 650a 0a20 2020  return None..   
+00047710: 2061 7379 6e63 2064 6566 2066 7574 7572   async def futur
+00047720: 6573 5f74 7261 6e73 6665 7228 7365 6c66  es_transfer(self
+00047730: 2c20 636f 6465 3a20 7374 722c 2061 6d6f  , code: str, amo
+00047740: 756e 742c 2074 7970 652c 2070 6172 616d  unt, type, param
+00047750: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00047760: 2222 0a20 2020 2020 2020 2074 7261 6e73  "".        trans
+00047770: 6665 7220 6265 7477 6565 6e20 6675 7475  fer between futu
+00047780: 7265 7320 6163 636f 756e 740a 2020 2020  res account.    
+00047790: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
+000477a0: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
+000477b0: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
+000477c0: 2020 203a 7061 7261 6d20 666c 6f61 7420     :param float 
+000477d0: 616d 6f75 6e74 3a20 7468 6520 616d 6f75  amount: the amou
+000477e0: 6e74 2074 6f20 7472 616e 7366 6572 0a20  nt to transfer. 
+000477f0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+00047800: 7220 7479 7065 3a20 3120 2d20 7472 616e  r type: 1 - tran
+00047810: 7366 6572 2066 726f 6d20 7370 6f74 2061  sfer from spot a
+00047820: 6363 6f75 6e74 2074 6f20 5553 4454 2de2  ccount to USDT-.
+00047830: 9382 2066 7574 7572 6573 2061 6363 6f75  .. futures accou
+00047840: 6e74 2c20 3220 2d20 7472 616e 7366 6572  nt, 2 - transfer
+00047850: 2066 726f 6d20 5553 4454 2de2 9382 2066   from USDT-... f
+00047860: 7574 7572 6573 2061 6363 6f75 6e74 2074  utures account t
+00047870: 6f20 7370 6f74 2061 6363 6f75 6e74 2c20  o spot account, 
+00047880: 3320 2d20 7472 616e 7366 6572 2066 726f  3 - transfer fro
+00047890: 6d20 7370 6f74 2061 6363 6f75 6e74 2074  m spot account t
+000478a0: 6f20 434f 494e 2de2 9382 2066 7574 7572  o COIN-... futur
+000478b0: 6573 2061 6363 6f75 6e74 2c20 3420 2d20  es account, 4 - 
+000478c0: 7472 616e 7366 6572 2066 726f 6d20 434f  transfer from CO
+000478d0: 494e 2de2 9382 2066 7574 7572 6573 2061  IN-... futures a
+000478e0: 6363 6f75 6e74 2074 6f20 7370 6f74 2061  ccount to spot a
+000478f0: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
+00047900: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+00047910: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+00047920: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00047930: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
+00047940: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+00047950: 203a 7061 7261 6d20 666c 6f61 747c 4e6f   :param float|No
+00047960: 6e65 2070 6172 616d 732e 7265 6376 5769  ne params.recvWi
+00047970: 6e64 6f77 3a0a 2020 2020 2020 2020 3a72  ndow:.        :r
+00047980: 6574 7572 6e73 2064 6963 743a 2061 2060  eturns dict: a `
+00047990: 7472 616e 7366 6572 2073 7472 7563 7475  transfer structu
+000479a0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
+000479b0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+000479c0: 6675 7475 7265 732d 7472 616e 7366 6572  futures-transfer
+000479d0: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+000479e0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000479f0: 2069 6620 2874 7970 6520 3c20 3129 206f   if (type < 1) o
+00047a00: 7220 2874 7970 6520 3e20 3429 3a0a 2020  r (type > 4):.  
+00047a10: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00047a20: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
+00047a30: 6428 7365 6c66 2e69 6420 2b20 2720 7479  d(self.id + ' ty
+00047a40: 7065 206d 7573 7420 6265 2062 6574 7765  pe must be betwe
+00047a50: 656e 2031 2061 6e64 2034 2729 0a20 2020  en 1 and 4').   
+00047a60: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+00047a70: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00047a80: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
+00047a90: 3d20 7365 6c66 2e63 7572 7265 6e63 7928  = self.currency(
+00047aa0: 636f 6465 290a 2020 2020 2020 2020 7265  code).        re
+00047ab0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+00047ac0: 2020 2020 2020 2761 7373 6574 273a 2063        'asset': c
+00047ad0: 7572 7265 6e63 795b 2769 6427 5d2c 0a20  urrency['id'],. 
+00047ae0: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
+00047af0: 6e74 273a 2061 6d6f 756e 742c 0a20 2020  nt': amount,.   
+00047b00: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
+00047b10: 2074 7970 652c 0a20 2020 2020 2020 207d   type,.        }
+00047b20: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+00047b30: 6520 3d20 6177 6169 7420 7365 6c66 2e73  e = await self.s
+00047b40: 6170 6950 6f73 7446 7574 7572 6573 5472  apiPostFuturesTr
+00047b50: 616e 7366 6572 2873 656c 662e 6578 7465  ansfer(self.exte
+00047b60: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00047b70: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00047b80: 2020 2020 2020 2023 2020 207b 0a20 2020         #   {.   
+00047b90: 2020 2020 2023 2020 2020 2020 2022 7472       #       "tr
+00047ba0: 616e 4964 223a 2031 3030 3030 3030 3031  anId": 100000001
+00047bb0: 0a20 2020 2020 2020 2023 2020 207d 0a20  .        #   }. 
 00047bc0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00047bd0: 2023 2020 207b 0a20 2020 2020 2020 2023   #   {.        #
-00047be0: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-00047bf0: 4254 4355 5344 5422 2c0a 2020 2020 2020  BTCUSDT",.      
-00047c00: 2020 2320 2020 2020 226d 6172 6b50 7269    #     "markPri
-00047c10: 6365 223a 2022 3435 3830 322e 3831 3132  ce": "45802.8112
-00047c20: 3938 3932 222c 0a20 2020 2020 2020 2023  9892",.        #
-00047c30: 2020 2020 2022 696e 6465 7850 7269 6365       "indexPrice
-00047c40: 223a 2022 3435 3734 352e 3437 3730 3139  ": "45745.477019
-00047c50: 3135 222c 0a20 2020 2020 2020 2023 2020  15",.        #  
-00047c60: 2020 2022 6573 7469 6d61 7465 6453 6574     "estimatedSet
-00047c70: 746c 6550 7269 6365 223a 2022 3435 3133  tlePrice": "4513
-00047c80: 332e 3931 3735 3336 3731 222c 0a20 2020  3.91753671",.   
-00047c90: 2020 2020 2023 2020 2020 2022 6c61 7374       #     "last
-00047ca0: 4675 6e64 696e 6752 6174 6522 3a20 2230  FundingRate": "0
-00047cb0: 2e30 3030 3633 3532 3122 2c0a 2020 2020  .00063521",.    
-00047cc0: 2020 2020 2320 2020 2020 2269 6e74 6572      #     "inter
-00047cd0: 6573 7452 6174 6522 3a20 2230 2e30 3030  estRate": "0.000
-00047ce0: 3130 3030 3022 2c0a 2020 2020 2020 2020  10000",.        
-00047cf0: 2320 2020 2020 226e 6578 7446 756e 6469  #     "nextFundi
-00047d00: 6e67 5469 6d65 223a 2022 3136 3231 3236  ngTime": "162126
-00047d10: 3732 3030 3030 3022 2c0a 2020 2020 2020  7200000",.      
-00047d20: 2020 2320 2020 2020 2274 696d 6522 3a20    #     "time": 
-00047d30: 2231 3632 3132 3532 3334 3430 3031 220a  "1621252344001".
-00047d40: 2020 2020 2020 2020 2320 207d 0a20 2020          #  }.   
-00047d50: 2020 2020 2023 0a20 2020 2020 2020 2074       #.        t
-00047d60: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
-00047d70: 7361 6665 5f69 6e74 6567 6572 2863 6f6e  safe_integer(con
-00047d80: 7472 6163 742c 2027 7469 6d65 2729 0a20  tract, 'time'). 
-00047d90: 2020 2020 2020 206d 6172 6b65 7449 6420         marketId 
-00047da0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00047db0: 6e67 2863 6f6e 7472 6163 742c 2027 7379  ng(contract, 'sy
-00047dc0: 6d62 6f6c 2729 0a20 2020 2020 2020 2073  mbol').        s
-00047dd0: 796d 626f 6c20 3d20 7365 6c66 2e73 6166  ymbol = self.saf
-00047de0: 655f 7379 6d62 6f6c 286d 6172 6b65 7449  e_symbol(marketI
-00047df0: 642c 206d 6172 6b65 742c 204e 6f6e 652c  d, market, None,
-00047e00: 2027 636f 6e74 7261 6374 2729 0a20 2020   'contract').   
-00047e10: 2020 2020 206d 6172 6b50 7269 6365 203d       markPrice =
-00047e20: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00047e30: 7228 636f 6e74 7261 6374 2c20 276d 6172  r(contract, 'mar
-00047e40: 6b50 7269 6365 2729 0a20 2020 2020 2020  kPrice').       
-00047e50: 2069 6e64 6578 5072 6963 6520 3d20 7365   indexPrice = se
-00047e60: 6c66 2e73 6166 655f 6e75 6d62 6572 2863  lf.safe_number(c
-00047e70: 6f6e 7472 6163 742c 2027 696e 6465 7850  ontract, 'indexP
-00047e80: 7269 6365 2729 0a20 2020 2020 2020 2069  rice').        i
-00047e90: 6e74 6572 6573 7452 6174 6520 3d20 7365  nterestRate = se
-00047ea0: 6c66 2e73 6166 655f 6e75 6d62 6572 2863  lf.safe_number(c
-00047eb0: 6f6e 7472 6163 742c 2027 696e 7465 7265  ontract, 'intere
-00047ec0: 7374 5261 7465 2729 0a20 2020 2020 2020  stRate').       
-00047ed0: 2065 7374 696d 6174 6564 5365 7474 6c65   estimatedSettle
-00047ee0: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
-00047ef0: 655f 6e75 6d62 6572 2863 6f6e 7472 6163  e_number(contrac
-00047f00: 742c 2027 6573 7469 6d61 7465 6453 6574  t, 'estimatedSet
-00047f10: 746c 6550 7269 6365 2729 0a20 2020 2020  tlePrice').     
-00047f20: 2020 2066 756e 6469 6e67 5261 7465 203d     fundingRate =
-00047f30: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00047f40: 7228 636f 6e74 7261 6374 2c20 276c 6173  r(contract, 'las
-00047f50: 7446 756e 6469 6e67 5261 7465 2729 0a20  tFundingRate'). 
-00047f60: 2020 2020 2020 2066 756e 6469 6e67 5469         fundingTi
-00047f70: 6d65 203d 2073 656c 662e 7361 6665 5f69  me = self.safe_i
-00047f80: 6e74 6567 6572 2863 6f6e 7472 6163 742c  nteger(contract,
-00047f90: 2027 6e65 7874 4675 6e64 696e 6754 696d   'nextFundingTim
-00047fa0: 6527 290a 2020 2020 2020 2020 7265 7475  e').        retu
-00047fb0: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
-00047fc0: 2027 696e 666f 273a 2063 6f6e 7472 6163   'info': contrac
-00047fd0: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
-00047fe0: 7379 6d62 6f6c 273a 2073 796d 626f 6c2c  symbol': symbol,
-00047ff0: 0a20 2020 2020 2020 2020 2020 2027 6d61  .            'ma
-00048000: 726b 5072 6963 6527 3a20 6d61 726b 5072  rkPrice': markPr
-00048010: 6963 652c 0a20 2020 2020 2020 2020 2020  ice,.           
-00048020: 2027 696e 6465 7850 7269 6365 273a 2069   'indexPrice': i
-00048030: 6e64 6578 5072 6963 652c 0a20 2020 2020  ndexPrice,.     
-00048040: 2020 2020 2020 2027 696e 7465 7265 7374         'interest
-00048050: 5261 7465 273a 2069 6e74 6572 6573 7452  Rate': interestR
-00048060: 6174 652c 0a20 2020 2020 2020 2020 2020  ate,.           
-00048070: 2027 6573 7469 6d61 7465 6453 6574 746c   'estimatedSettl
-00048080: 6550 7269 6365 273a 2065 7374 696d 6174  ePrice': estimat
-00048090: 6564 5365 7474 6c65 5072 6963 652c 0a20  edSettlePrice,. 
-000480a0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-000480b0: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
-000480c0: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
-000480d0: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
-000480e0: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
-000480f0: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
-00048100: 2766 756e 6469 6e67 5261 7465 273a 2066  'fundingRate': f
-00048110: 756e 6469 6e67 5261 7465 2c0a 2020 2020  undingRate,.    
-00048120: 2020 2020 2020 2020 2766 756e 6469 6e67          'funding
-00048130: 5469 6d65 7374 616d 7027 3a20 6675 6e64  Timestamp': fund
-00048140: 696e 6754 696d 652c 0a20 2020 2020 2020  ingTime,.       
-00048150: 2020 2020 2027 6675 6e64 696e 6744 6174       'fundingDat
-00048160: 6574 696d 6527 3a20 7365 6c66 2e69 736f  etime': self.iso
-00048170: 3836 3031 2866 756e 6469 6e67 5469 6d65  8601(fundingTime
-00048180: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00048190: 6e65 7874 4675 6e64 696e 6752 6174 6527  nextFundingRate'
-000481a0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-000481b0: 2020 2020 276e 6578 7446 756e 6469 6e67      'nextFunding
-000481c0: 5469 6d65 7374 616d 7027 3a20 4e6f 6e65  Timestamp': None
-000481d0: 2c0a 2020 2020 2020 2020 2020 2020 276e  ,.            'n
-000481e0: 6578 7446 756e 6469 6e67 4461 7465 7469  extFundingDateti
-000481f0: 6d65 273a 204e 6f6e 652c 0a20 2020 2020  me': None,.     
-00048200: 2020 2020 2020 2027 7072 6576 696f 7573         'previous
-00048210: 4675 6e64 696e 6752 6174 6527 3a20 4e6f  FundingRate': No
-00048220: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00048230: 2770 7265 7669 6f75 7346 756e 6469 6e67  'previousFunding
-00048240: 5469 6d65 7374 616d 7027 3a20 4e6f 6e65  Timestamp': None
-00048250: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
-00048260: 7265 7669 6f75 7346 756e 6469 6e67 4461  reviousFundingDa
-00048270: 7465 7469 6d65 273a 204e 6f6e 652c 0a20  tetime': None,. 
-00048280: 2020 2020 2020 207d 0a0a 2020 2020 6465         }..    de
-00048290: 6620 7061 7273 655f 6163 636f 756e 745f  f parse_account_
-000482a0: 706f 7369 7469 6f6e 7328 7365 6c66 2c20  positions(self, 
-000482b0: 6163 636f 756e 7429 3a0a 2020 2020 2020  account):.      
-000482c0: 2020 706f 7369 7469 6f6e 7320 3d20 7365    positions = se
-000482d0: 6c66 2e73 6166 655f 7661 6c75 6528 6163  lf.safe_value(ac
-000482e0: 636f 756e 742c 2027 706f 7369 7469 6f6e  count, 'position
-000482f0: 7327 290a 2020 2020 2020 2020 6173 7365  s').        asse
-00048300: 7473 203d 2073 656c 662e 7361 6665 5f76  ts = self.safe_v
-00048310: 616c 7565 2861 6363 6f75 6e74 2c20 2761  alue(account, 'a
-00048320: 7373 6574 7327 2c20 5b5d 290a 2020 2020  ssets', []).    
-00048330: 2020 2020 6261 6c61 6e63 6573 203d 207b      balances = {
-00048340: 7d0a 2020 2020 2020 2020 666f 7220 6920  }.        for i 
-00048350: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-00048360: 6173 7365 7473 2929 3a0a 2020 2020 2020  assets)):.      
-00048370: 2020 2020 2020 656e 7472 7920 3d20 6173        entry = as
-00048380: 7365 7473 5b69 5d0a 2020 2020 2020 2020  sets[i].        
-00048390: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
-000483a0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-000483b0: 6728 656e 7472 792c 2027 6173 7365 7427  g(entry, 'asset'
-000483c0: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
-000483d0: 6465 203d 2073 656c 662e 7361 6665 5f63  de = self.safe_c
-000483e0: 7572 7265 6e63 795f 636f 6465 2863 7572  urrency_code(cur
-000483f0: 7265 6e63 7949 6429 0a20 2020 2020 2020  rencyId).       
-00048400: 2020 2020 2063 726f 7373 5761 6c6c 6574       crossWallet
-00048410: 4261 6c61 6e63 6520 3d20 7365 6c66 2e73  Balance = self.s
-00048420: 6166 655f 7374 7269 6e67 2865 6e74 7279  afe_string(entry
-00048430: 2c20 2763 726f 7373 5761 6c6c 6574 4261  , 'crossWalletBa
-00048440: 6c61 6e63 6527 290a 2020 2020 2020 2020  lance').        
-00048450: 2020 2020 6372 6f73 7355 6e50 6e6c 203d      crossUnPnl =
-00048460: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00048470: 6728 656e 7472 792c 2027 6372 6f73 7355  g(entry, 'crossU
-00048480: 6e50 6e6c 2729 0a20 2020 2020 2020 2020  nPnl').         
-00048490: 2020 2062 616c 616e 6365 735b 636f 6465     balances[code
-000484a0: 5d20 3d20 7b0a 2020 2020 2020 2020 2020  ] = {.          
-000484b0: 2020 2020 2020 2763 726f 7373 4d61 7267        'crossMarg
-000484c0: 696e 273a 2050 7265 6369 7365 2e73 7472  in': Precise.str
-000484d0: 696e 675f 6164 6428 6372 6f73 7357 616c  ing_add(crossWal
-000484e0: 6c65 7442 616c 616e 6365 2c20 6372 6f73  letBalance, cros
-000484f0: 7355 6e50 6e6c 292c 0a20 2020 2020 2020  sUnPnl),.       
-00048500: 2020 2020 2020 2020 2027 6372 6f73 7357           'crossW
-00048510: 616c 6c65 7442 616c 616e 6365 273a 2063  alletBalance': c
-00048520: 726f 7373 5761 6c6c 6574 4261 6c61 6e63  rossWalletBalanc
-00048530: 652c 0a20 2020 2020 2020 2020 2020 207d  e,.            }
-00048540: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00048550: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
-00048560: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
-00048570: 656e 2870 6f73 6974 696f 6e73 2929 3a0a  en(positions)):.
-00048580: 2020 2020 2020 2020 2020 2020 706f 7369              posi
-00048590: 7469 6f6e 203d 2070 6f73 6974 696f 6e73  tion = positions
-000485a0: 5b69 5d0a 2020 2020 2020 2020 2020 2020  [i].            
-000485b0: 6d61 726b 6574 4964 203d 2073 656c 662e  marketId = self.
-000485c0: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
-000485d0: 7469 6f6e 2c20 2773 796d 626f 6c27 290a  tion, 'symbol').
-000485e0: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-000485f0: 6574 203d 2073 656c 662e 7361 6665 5f6d  et = self.safe_m
-00048600: 6172 6b65 7428 6d61 726b 6574 4964 2c20  arket(marketId, 
-00048610: 4e6f 6e65 2c20 4e6f 6e65 2c20 2763 6f6e  None, None, 'con
-00048620: 7472 6163 7427 290a 2020 2020 2020 2020  tract').        
-00048630: 2020 2020 636f 6465 203d 206d 6172 6b65      code = marke
-00048640: 745b 2771 756f 7465 275d 2069 6620 6d61  t['quote'] if ma
-00048650: 726b 6574 5b27 6c69 6e65 6172 275d 2065  rket['linear'] e
-00048660: 6c73 6520 6d61 726b 6574 5b27 6261 7365  lse market['base
-00048670: 275d 0a20 2020 2020 2020 2020 2020 2023  '].            #
-00048680: 2073 6f6d 6574 696d 6573 206e 6f74 2061   sometimes not a
-00048690: 6c6c 2074 6865 2063 6f64 6573 2061 7265  ll the codes are
-000486a0: 2063 6f72 7265 6374 6c79 2072 6574 7572   correctly retur
-000486b0: 6e65 642e 2e2e 0a20 2020 2020 2020 2020  ned....         
-000486c0: 2020 2069 6620 636f 6465 2069 6e20 6261     if code in ba
-000486d0: 6c61 6e63 6573 3a0a 2020 2020 2020 2020  lances:.        
-000486e0: 2020 2020 2020 2020 7061 7273 6564 203d          parsed =
-000486f0: 2073 656c 662e 7061 7273 655f 6163 636f   self.parse_acco
-00048700: 756e 745f 706f 7369 7469 6f6e 2873 656c  unt_position(sel
-00048710: 662e 6578 7465 6e64 2870 6f73 6974 696f  f.extend(positio
-00048720: 6e2c 207b 0a20 2020 2020 2020 2020 2020  n, {.           
-00048730: 2020 2020 2020 2020 2027 6372 6f73 734d           'crossM
-00048740: 6172 6769 6e27 3a20 6261 6c61 6e63 6573  argin': balances
-00048750: 5b63 6f64 655d 5b27 6372 6f73 734d 6172  [code]['crossMar
-00048760: 6769 6e27 5d2c 0a20 2020 2020 2020 2020  gin'],.         
-00048770: 2020 2020 2020 2020 2020 2027 6372 6f73             'cros
-00048780: 7357 616c 6c65 7442 616c 616e 6365 273a  sWalletBalance':
-00048790: 2062 616c 616e 6365 735b 636f 6465 5d5b   balances[code][
-000487a0: 2763 726f 7373 5761 6c6c 6574 4261 6c61  'crossWalletBala
-000487b0: 6e63 6527 5d2c 0a20 2020 2020 2020 2020  nce'],.         
-000487c0: 2020 2020 2020 207d 292c 206d 6172 6b65         }), marke
-000487d0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-000487e0: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
-000487f0: 2870 6172 7365 6429 0a20 2020 2020 2020  (parsed).       
-00048800: 2072 6574 7572 6e20 7265 7375 6c74 0a0a   return result..
-00048810: 2020 2020 6465 6620 7061 7273 655f 6163      def parse_ac
-00048820: 636f 756e 745f 706f 7369 7469 6f6e 2873  count_position(s
-00048830: 656c 662c 2070 6f73 6974 696f 6e2c 206d  elf, position, m
-00048840: 6172 6b65 743d 4e6f 6e65 293a 0a20 2020  arket=None):.   
-00048850: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00048860: 2075 7364 6d0a 2020 2020 2020 2020 2320   usdm.        # 
-00048870: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00048880: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-00048890: 4254 4342 5553 4422 2c0a 2020 2020 2020  BTCBUSD",.      
-000488a0: 2020 2320 2020 2020 2020 2269 6e69 7469    #       "initi
-000488b0: 616c 4d61 7267 696e 223a 2022 3022 2c0a  alMargin": "0",.
-000488c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000488d0: 226d 6169 6e74 4d61 7267 696e 223a 2022  "maintMargin": "
-000488e0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000488f0: 2020 2020 2275 6e72 6561 6c69 7a65 6450      "unrealizedP
-00048900: 726f 6669 7422 3a20 2230 2e30 3030 3030  rofit": "0.00000
-00048910: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-00048920: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
-00048930: 6e69 7469 616c 4d61 7267 696e 223a 2022  nitialMargin": "
-00048940: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00048950: 2020 2020 226f 7065 6e4f 7264 6572 496e      "openOrderIn
-00048960: 6974 6961 6c4d 6172 6769 6e22 3a20 2230  itialMargin": "0
-00048970: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00048980: 2020 2022 6c65 7665 7261 6765 223a 2022     "leverage": "
-00048990: 3230 222c 0a20 2020 2020 2020 2023 2020  20",.        #  
-000489a0: 2020 2020 2022 6973 6f6c 6174 6564 223a       "isolated":
-000489b0: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-000489c0: 2320 2020 2020 2020 2265 6e74 7279 5072  #       "entryPr
-000489d0: 6963 6522 3a20 2230 2e30 3030 3022 2c0a  ice": "0.0000",.
-000489e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000489f0: 226d 6178 4e6f 7469 6f6e 616c 223a 2022  "maxNotional": "
-00048a00: 3130 3030 3030 222c 0a20 2020 2020 2020  100000",.       
-00048a10: 2023 2020 2020 2020 2022 706f 7369 7469   #       "positi
-00048a20: 6f6e 5369 6465 223a 2022 424f 5448 222c  onSide": "BOTH",
-00048a30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00048a40: 2022 706f 7369 7469 6f6e 416d 7422 3a20   "positionAmt": 
-00048a50: 2230 2e30 3030 222c 0a20 2020 2020 2020  "0.000",.       
-00048a60: 2023 2020 2020 2020 2022 6e6f 7469 6f6e   #       "notion
-00048a70: 616c 223a 2022 3022 2c0a 2020 2020 2020  al": "0",.      
-00048a80: 2020 2320 2020 2020 2020 2269 736f 6c61    #       "isola
-00048a90: 7465 6457 616c 6c65 7422 3a20 2230 222c  tedWallet": "0",
-00048aa0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00048ab0: 2022 7570 6461 7465 5469 6d65 223a 2022   "updateTime": "
-00048ac0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00048ad0: 2020 2020 2263 726f 7373 4d61 7267 696e      "crossMargin
-00048ae0: 223a 2022 3130 302e 3933 3633 3438 3039  ": "100.93634809
-00048af0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00048b00: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00048b10: 2020 2020 2023 2063 6f69 6e6d 0a20 2020       # coinm.   
-00048b20: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00048b30: 2020 2020 2023 2020 2020 2020 2022 7379       #       "sy
-00048b40: 6d62 6f6c 223a 2022 4254 4355 5344 5f32  mbol": "BTCUSD_2
-00048b50: 3130 3632 3522 2c0a 2020 2020 2020 2020  10625",.        
-00048b60: 2320 2020 2020 2020 2269 6e69 7469 616c  #       "initial
-00048b70: 4d61 7267 696e 223a 2022 302e 3030 3032  Margin": "0.0002
-00048b80: 3433 3933 222c 0a20 2020 2020 2020 2023  4393",.        #
-00048b90: 2020 2020 2020 2022 6d61 696e 744d 6172         "maintMar
-00048ba0: 6769 6e22 3a20 2230 2e30 3030 3032 3433  gin": "0.0000243
-00048bb0: 3922 2c0a 2020 2020 2020 2020 2320 2020  9",.        #   
-00048bc0: 2020 2020 2275 6e72 6561 6c69 7a65 6450      "unrealizedP
-00048bd0: 726f 6669 7422 3a20 222d 302e 3030 3030  rofit": "-0.0000
-00048be0: 3031 3633 222c 0a20 2020 2020 2020 2023  0163",.        #
-00048bf0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-00048c00: 496e 6974 6961 6c4d 6172 6769 6e22 3a20  InitialMargin": 
-00048c10: 2230 2e30 3030 3234 3339 3322 2c0a 2020  "0.00024393",.  
-00048c20: 2020 2020 2020 2320 2020 2020 2020 226f        #       "o
-00048c30: 7065 6e4f 7264 6572 496e 6974 6961 6c4d  penOrderInitialM
-00048c40: 6172 6769 6e22 3a20 2230 222c 0a20 2020  argin": "0",.   
-00048c50: 2020 2020 2023 2020 2020 2020 2022 6c65       #       "le
-00048c60: 7665 7261 6765 223a 2022 3130 222c 0a20  verage": "10",. 
-00048c70: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-00048c80: 6973 6f6c 6174 6564 223a 2046 616c 7365  isolated": False
-00048c90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00048ca0: 2020 2270 6f73 6974 696f 6e53 6964 6522    "positionSide"
-00048cb0: 3a20 2242 4f54 4822 2c0a 2020 2020 2020  : "BOTH",.      
-00048cc0: 2020 2320 2020 2020 2020 2265 6e74 7279    #       "entry
-00048cd0: 5072 6963 6522 3a20 2234 3130 3231 2e32  Price": "41021.2
-00048ce0: 3030 3030 3036 3922 2c0a 2020 2020 2020  0000069",.      
-00048cf0: 2020 2320 2020 2020 2020 226d 6178 5174    #       "maxQt
-00048d00: 7922 3a20 2231 3030 222c 0a20 2020 2020  y": "100",.     
-00048d10: 2020 2023 2020 2020 2020 2022 6e6f 7469     #       "noti
-00048d20: 6f6e 616c 5661 6c75 6522 3a20 2230 2e30  onalValue": "0.0
-00048d30: 3032 3433 3933 3922 2c0a 2020 2020 2020  0243939",.      
-00048d40: 2020 2320 2020 2020 2020 2269 736f 6c61    #       "isola
-00048d50: 7465 6457 616c 6c65 7422 3a20 2230 222c  tedWallet": "0",
-00048d60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00048d70: 2022 6372 6f73 734d 6172 6769 6e22 3a20   "crossMargin": 
-00048d80: 2230 2e33 3134 220a 2020 2020 2020 2020  "0.314".        
-00048d90: 2320 2020 2020 2020 2263 726f 7373 5761  #       "crossWa
-00048da0: 6c6c 6574 4261 6c61 6e63 6522 3a20 2233  lletBalance": "3
-00048db0: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-00048dc0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00048dd0: 2020 2020 2020 6d61 726b 6574 4964 203d        marketId =
-00048de0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00048df0: 6728 706f 7369 7469 6f6e 2c20 2773 796d  g(position, 'sym
-00048e00: 626f 6c27 290a 2020 2020 2020 2020 6d61  bol').        ma
-00048e10: 726b 6574 203d 2073 656c 662e 7361 6665  rket = self.safe
-00048e20: 5f6d 6172 6b65 7428 6d61 726b 6574 4964  _market(marketId
-00048e30: 2c20 6d61 726b 6574 2c20 4e6f 6e65 2c20  , market, None, 
-00048e40: 2763 6f6e 7472 6163 7427 290a 2020 2020  'contract').    
-00048e50: 2020 2020 7379 6d62 6f6c 203d 2073 656c      symbol = sel
-00048e60: 662e 7361 6665 5f73 7472 696e 6728 6d61  f.safe_string(ma
-00048e70: 726b 6574 2c20 2773 796d 626f 6c27 290a  rket, 'symbol').
-00048e80: 2020 2020 2020 2020 6c65 7665 7261 6765          leverage
-00048e90: 5374 7269 6e67 203d 2073 656c 662e 7361  String = self.sa
-00048ea0: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
-00048eb0: 6f6e 2c20 276c 6576 6572 6167 6527 290a  on, 'leverage').
-00048ec0: 2020 2020 2020 2020 6c65 7665 7261 6765          leverage
-00048ed0: 203d 2069 6e74 286c 6576 6572 6167 6553   = int(leverageS
-00048ee0: 7472 696e 6729 0a20 2020 2020 2020 2069  tring).        i
-00048ef0: 6e69 7469 616c 4d61 7267 696e 5374 7269  nitialMarginStri
-00048f00: 6e67 203d 2073 656c 662e 7361 6665 5f73  ng = self.safe_s
-00048f10: 7472 696e 6728 706f 7369 7469 6f6e 2c20  tring(position, 
-00048f20: 2769 6e69 7469 616c 4d61 7267 696e 2729  'initialMargin')
-00048f30: 0a20 2020 2020 2020 2069 6e69 7469 616c  .        initial
-00048f40: 4d61 7267 696e 203d 2073 656c 662e 7061  Margin = self.pa
-00048f50: 7273 655f 6e75 6d62 6572 2869 6e69 7469  rse_number(initi
-00048f60: 616c 4d61 7267 696e 5374 7269 6e67 290a  alMarginString).
-00048f70: 2020 2020 2020 2020 696e 6974 6961 6c4d          initialM
-00048f80: 6172 6769 6e50 6572 6365 6e74 6167 6553  arginPercentageS
-00048f90: 7472 696e 6720 3d20 5072 6563 6973 652e  tring = Precise.
-00048fa0: 7374 7269 6e67 5f64 6976 2827 3127 2c20  string_div('1', 
-00048fb0: 6c65 7665 7261 6765 5374 7269 6e67 2c20  leverageString, 
-00048fc0: 3829 0a20 2020 2020 2020 2072 6174 696f  8).        ratio
-00048fd0: 6e61 6c20 3d20 2831 3030 3020 2520 6c65  nal = (1000 % le
-00048fe0: 7665 7261 6765 2920 3d3d 2030 0a20 2020  verage) == 0.   
-00048ff0: 2020 2020 2069 6620 6e6f 7420 7261 7469       if not rati
-00049000: 6f6e 616c 3a0a 2020 2020 2020 2020 2020  onal:.          
-00049010: 2020 696e 6974 6961 6c4d 6172 6769 6e50    initialMarginP
-00049020: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
-00049030: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-00049040: 5f64 6976 2850 7265 6369 7365 2e73 7472  _div(Precise.str
-00049050: 696e 675f 6164 6428 696e 6974 6961 6c4d  ing_add(initialM
-00049060: 6172 6769 6e50 6572 6365 6e74 6167 6553  arginPercentageS
-00049070: 7472 696e 672c 2027 3165 2d38 2729 2c20  tring, '1e-8'), 
-00049080: 2731 272c 2038 290a 2020 2020 2020 2020  '1', 8).        
-00049090: 2320 746f 206e 6f74 696f 6e61 6c56 616c  # to notionalVal
-000490a0: 7565 0a20 2020 2020 2020 2075 7364 6d20  ue.        usdm 
-000490b0: 3d20 2827 6e6f 7469 6f6e 616c 2720 696e  = ('notional' in
-000490c0: 2070 6f73 6974 696f 6e29 0a20 2020 2020   position).     
-000490d0: 2020 206d 6169 6e74 656e 616e 6365 4d61     maintenanceMa
-000490e0: 7267 696e 5374 7269 6e67 203d 2073 656c  rginString = sel
-000490f0: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
-00049100: 7369 7469 6f6e 2c20 276d 6169 6e74 4d61  sition, 'maintMa
-00049110: 7267 696e 2729 0a20 2020 2020 2020 206d  rgin').        m
-00049120: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
-00049130: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
-00049140: 6d62 6572 286d 6169 6e74 656e 616e 6365  mber(maintenance
-00049150: 4d61 7267 696e 5374 7269 6e67 290a 2020  MarginString).  
-00049160: 2020 2020 2020 656e 7472 7950 7269 6365        entryPrice
-00049170: 5374 7269 6e67 203d 2073 656c 662e 7361  String = self.sa
-00049180: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
-00049190: 6f6e 2c20 2765 6e74 7279 5072 6963 6527  on, 'entryPrice'
-000491a0: 290a 2020 2020 2020 2020 656e 7472 7950  ).        entryP
-000491b0: 7269 6365 203d 2073 656c 662e 7061 7273  rice = self.pars
-000491c0: 655f 6e75 6d62 6572 2865 6e74 7279 5072  e_number(entryPr
-000491d0: 6963 6553 7472 696e 6729 0a20 2020 2020  iceString).     
-000491e0: 2020 206e 6f74 696f 6e61 6c53 7472 696e     notionalStrin
-000491f0: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
-00049200: 7269 6e67 5f32 2870 6f73 6974 696f 6e2c  ring_2(position,
-00049210: 2027 6e6f 7469 6f6e 616c 272c 2027 6e6f   'notional', 'no
-00049220: 7469 6f6e 616c 5661 6c75 6527 290a 2020  tionalValue').  
-00049230: 2020 2020 2020 6e6f 7469 6f6e 616c 5374        notionalSt
-00049240: 7269 6e67 4162 7320 3d20 5072 6563 6973  ringAbs = Precis
-00049250: 652e 7374 7269 6e67 5f61 6273 286e 6f74  e.string_abs(not
-00049260: 696f 6e61 6c53 7472 696e 6729 0a20 2020  ionalString).   
-00049270: 2020 2020 206e 6f74 696f 6e61 6c20 3d20       notional = 
-00049280: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
-00049290: 7228 6e6f 7469 6f6e 616c 5374 7269 6e67  r(notionalString
-000492a0: 4162 7329 0a20 2020 2020 2020 2063 6f6e  Abs).        con
-000492b0: 7472 6163 7473 5374 7269 6e67 203d 2073  tractsString = s
-000492c0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-000492d0: 706f 7369 7469 6f6e 2c20 2770 6f73 6974  position, 'posit
-000492e0: 696f 6e41 6d74 2729 0a20 2020 2020 2020  ionAmt').       
-000492f0: 2063 6f6e 7472 6163 7473 5374 7269 6e67   contractsString
-00049300: 4162 7320 3d20 5072 6563 6973 652e 7374  Abs = Precise.st
-00049310: 7269 6e67 5f61 6273 2863 6f6e 7472 6163  ring_abs(contrac
-00049320: 7473 5374 7269 6e67 290a 2020 2020 2020  tsString).      
-00049330: 2020 6966 2063 6f6e 7472 6163 7473 5374    if contractsSt
-00049340: 7269 6e67 2069 7320 4e6f 6e65 3a0a 2020  ring is None:.  
-00049350: 2020 2020 2020 2020 2020 656e 7472 794e            entryN
-00049360: 6f74 696f 6e61 6c20 3d20 5072 6563 6973  otional = Precis
-00049370: 652e 7374 7269 6e67 5f6d 756c 2850 7265  e.string_mul(Pre
-00049380: 6369 7365 2e73 7472 696e 675f 6d75 6c28  cise.string_mul(
-00049390: 6c65 7665 7261 6765 5374 7269 6e67 2c20  leverageString, 
-000493a0: 696e 6974 6961 6c4d 6172 6769 6e53 7472  initialMarginStr
-000493b0: 696e 6729 2c20 656e 7472 7950 7269 6365  ing), entryPrice
-000493c0: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-000493d0: 2020 2020 636f 6e74 7261 6374 5369 7a65      contractSize
-000493e0: 4e65 7720 3d20 7365 6c66 2e73 6166 655f  New = self.safe_
-000493f0: 7374 7269 6e67 286d 6172 6b65 742c 2027  string(market, '
-00049400: 636f 6e74 7261 6374 5369 7a65 2729 0a20  contractSize'). 
-00049410: 2020 2020 2020 2020 2020 2063 6f6e 7472             contr
-00049420: 6163 7473 5374 7269 6e67 203d 2050 7265  actsString = Pre
-00049430: 6369 7365 2e73 7472 696e 675f 6469 7628  cise.string_div(
-00049440: 656e 7472 794e 6f74 696f 6e61 6c2c 2063  entryNotional, c
-00049450: 6f6e 7472 6163 7453 697a 654e 6577 290a  ontractSizeNew).
-00049460: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00049470: 7261 6374 7353 7472 696e 6741 6273 203d  ractsStringAbs =
-00049480: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-00049490: 6469 7628 5072 6563 6973 652e 7374 7269  div(Precise.stri
-000494a0: 6e67 5f61 6464 2863 6f6e 7472 6163 7473  ng_add(contracts
-000494b0: 5374 7269 6e67 2c20 2730 2e35 2729 2c20  String, '0.5'), 
-000494c0: 2731 272c 2030 290a 2020 2020 2020 2020  '1', 0).        
-000494d0: 636f 6e74 7261 6374 7320 3d20 7365 6c66  contracts = self
-000494e0: 2e70 6172 7365 5f6e 756d 6265 7228 636f  .parse_number(co
-000494f0: 6e74 7261 6374 7353 7472 696e 6741 6273  ntractsStringAbs
-00049500: 290a 2020 2020 2020 2020 6c65 7665 7261  ).        levera
-00049510: 6765 4272 6163 6b65 7473 203d 2073 656c  geBrackets = sel
-00049520: 662e 7361 6665 5f76 616c 7565 2873 656c  f.safe_value(sel
-00049530: 662e 6f70 7469 6f6e 732c 2027 6c65 7665  f.options, 'leve
-00049540: 7261 6765 4272 6163 6b65 7473 272c 207b  rageBrackets', {
-00049550: 7d29 0a20 2020 2020 2020 206c 6576 6572  }).        lever
-00049560: 6167 6542 7261 636b 6574 203d 2073 656c  ageBracket = sel
-00049570: 662e 7361 6665 5f76 616c 7565 286c 6576  f.safe_value(lev
-00049580: 6572 6167 6542 7261 636b 6574 732c 2073  erageBrackets, s
-00049590: 796d 626f 6c2c 205b 5d29 0a20 2020 2020  ymbol, []).     
-000495a0: 2020 206d 6169 6e74 656e 616e 6365 4d61     maintenanceMa
-000495b0: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-000495c0: 7269 6e67 203d 204e 6f6e 650a 2020 2020  ring = None.    
-000495d0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-000495e0: 6765 2830 2c20 6c65 6e28 6c65 7665 7261  ge(0, len(levera
-000495f0: 6765 4272 6163 6b65 7429 293a 0a20 2020  geBracket)):.   
-00049600: 2020 2020 2020 2020 2062 7261 636b 6574           bracket
-00049610: 203d 206c 6576 6572 6167 6542 7261 636b   = leverageBrack
-00049620: 6574 5b69 5d0a 2020 2020 2020 2020 2020  et[i].          
-00049630: 2020 6966 2050 7265 6369 7365 2e73 7472    if Precise.str
-00049640: 696e 675f 6c74 286e 6f74 696f 6e61 6c53  ing_lt(notionalS
-00049650: 7472 696e 6741 6273 2c20 6272 6163 6b65  tringAbs, bracke
-00049660: 745b 305d 293a 0a20 2020 2020 2020 2020  t[0]):.         
-00049670: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
-00049680: 2020 2020 2020 2020 206d 6169 6e74 656e           mainten
-00049690: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-000496a0: 7461 6765 5374 7269 6e67 203d 2062 7261  tageString = bra
-000496b0: 636b 6574 5b31 5d0a 2020 2020 2020 2020  cket[1].        
-000496c0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
-000496d0: 6e50 6572 6365 6e74 6167 6520 3d20 7365  nPercentage = se
-000496e0: 6c66 2e70 6172 7365 5f6e 756d 6265 7228  lf.parse_number(
-000496f0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
-00049700: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
-00049710: 6729 0a20 2020 2020 2020 2075 6e72 6561  g).        unrea
-00049720: 6c69 7a65 6450 6e6c 5374 7269 6e67 203d  lizedPnlString =
-00049730: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00049740: 6728 706f 7369 7469 6f6e 2c20 2775 6e72  g(position, 'unr
-00049750: 6561 6c69 7a65 6450 726f 6669 7427 290a  ealizedProfit').
-00049760: 2020 2020 2020 2020 756e 7265 616c 697a          unrealiz
-00049770: 6564 506e 6c20 3d20 7365 6c66 2e70 6172  edPnl = self.par
-00049780: 7365 5f6e 756d 6265 7228 756e 7265 616c  se_number(unreal
-00049790: 697a 6564 506e 6c53 7472 696e 6729 0a20  izedPnlString). 
-000497a0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-000497b0: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
-000497c0: 6567 6572 2870 6f73 6974 696f 6e2c 2027  eger(position, '
-000497d0: 7570 6461 7465 5469 6d65 2729 0a20 2020  updateTime').   
-000497e0: 2020 2020 2069 6620 7469 6d65 7374 616d       if timestam
-000497f0: 7020 3d3d 2030 3a0a 2020 2020 2020 2020  p == 0:.        
-00049800: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
-00049810: 4e6f 6e65 0a20 2020 2020 2020 2069 736f  None.        iso
-00049820: 6c61 7465 6420 3d20 7365 6c66 2e73 6166  lated = self.saf
-00049830: 655f 7661 6c75 6528 706f 7369 7469 6f6e  e_value(position
-00049840: 2c20 2769 736f 6c61 7465 6427 290a 2020  , 'isolated').  
-00049850: 2020 2020 2020 6d61 7267 696e 4d6f 6465        marginMode
-00049860: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00049870: 636f 6c6c 6174 6572 616c 5374 7269 6e67  collateralString
-00049880: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00049890: 7761 6c6c 6574 4261 6c61 6e63 6520 3d20  walletBalance = 
-000498a0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-000498b0: 6973 6f6c 6174 6564 3a0a 2020 2020 2020  isolated:.      
-000498c0: 2020 2020 2020 6d61 7267 696e 4d6f 6465        marginMode
-000498d0: 203d 2027 6973 6f6c 6174 6564 270a 2020   = 'isolated'.  
-000498e0: 2020 2020 2020 2020 2020 7761 6c6c 6574            wallet
-000498f0: 4261 6c61 6e63 6520 3d20 7365 6c66 2e73  Balance = self.s
-00049900: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
-00049910: 696f 6e2c 2027 6973 6f6c 6174 6564 5761  ion, 'isolatedWa
-00049920: 6c6c 6574 2729 0a20 2020 2020 2020 2020  llet').         
-00049930: 2020 2063 6f6c 6c61 7465 7261 6c53 7472     collateralStr
-00049940: 696e 6720 3d20 5072 6563 6973 652e 7374  ing = Precise.st
-00049950: 7269 6e67 5f61 6464 2877 616c 6c65 7442  ring_add(walletB
-00049960: 616c 616e 6365 2c20 756e 7265 616c 697a  alance, unrealiz
-00049970: 6564 506e 6c53 7472 696e 6729 0a20 2020  edPnlString).   
-00049980: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00049990: 2020 2020 2020 206d 6172 6769 6e4d 6f64         marginMod
-000499a0: 6520 3d20 2763 726f 7373 270a 2020 2020  e = 'cross'.    
-000499b0: 2020 2020 2020 2020 7761 6c6c 6574 4261          walletBa
-000499c0: 6c61 6e63 6520 3d20 7365 6c66 2e73 6166  lance = self.saf
-000499d0: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
-000499e0: 6e2c 2027 6372 6f73 7357 616c 6c65 7442  n, 'crossWalletB
-000499f0: 616c 616e 6365 2729 0a20 2020 2020 2020  alance').       
-00049a00: 2020 2020 2063 6f6c 6c61 7465 7261 6c53       collateralS
-00049a10: 7472 696e 6720 3d20 7365 6c66 2e73 6166  tring = self.saf
-00049a20: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
-00049a30: 6e2c 2027 6372 6f73 734d 6172 6769 6e27  n, 'crossMargin'
-00049a40: 290a 2020 2020 2020 2020 636f 6c6c 6174  ).        collat
-00049a50: 6572 616c 203d 2073 656c 662e 7061 7273  eral = self.pars
-00049a60: 655f 6e75 6d62 6572 2863 6f6c 6c61 7465  e_number(collate
-00049a70: 7261 6c53 7472 696e 6729 0a20 2020 2020  ralString).     
-00049a80: 2020 206d 6172 6769 6e52 6174 696f 203d     marginRatio =
-00049a90: 204e 6f6e 650a 2020 2020 2020 2020 7369   None.        si
-00049aa0: 6465 203d 204e 6f6e 650a 2020 2020 2020  de = None.      
-00049ab0: 2020 7065 7263 656e 7461 6765 203d 204e    percentage = N
-00049ac0: 6f6e 650a 2020 2020 2020 2020 6c69 7175  one.        liqu
-00049ad0: 6964 6174 696f 6e50 7269 6365 5374 7269  idationPriceStri
-00049ae0: 6e67 5261 7720 3d20 4e6f 6e65 0a20 2020  ngRaw = None.   
-00049af0: 2020 2020 206c 6971 7569 6461 7469 6f6e       liquidation
-00049b00: 5072 6963 6520 3d20 4e6f 6e65 0a20 2020  Price = None.   
-00049b10: 2020 2020 2063 6f6e 7472 6163 7453 697a       contractSiz
-00049b20: 6520 3d20 7365 6c66 2e73 6166 655f 7661  e = self.safe_va
-00049b30: 6c75 6528 6d61 726b 6574 2c20 2763 6f6e  lue(market, 'con
-00049b40: 7472 6163 7453 697a 6527 290a 2020 2020  tractSize').    
-00049b50: 2020 2020 636f 6e74 7261 6374 5369 7a65      contractSize
-00049b60: 5374 7269 6e67 203d 2073 656c 662e 6e75  String = self.nu
-00049b70: 6d62 6572 5f74 6f5f 7374 7269 6e67 2863  mber_to_string(c
-00049b80: 6f6e 7472 6163 7453 697a 6529 0a20 2020  ontractSize).   
-00049b90: 2020 2020 2069 6620 5072 6563 6973 652e       if Precise.
-00049ba0: 7374 7269 6e67 5f65 7175 616c 7328 6e6f  string_equals(no
-00049bb0: 7469 6f6e 616c 5374 7269 6e67 2c20 2730  tionalString, '0
-00049bc0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-00049bd0: 656e 7472 7950 7269 6365 203d 204e 6f6e  entryPrice = Non
-00049be0: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-00049bf0: 2020 2020 2020 2020 2020 2020 7369 6465              side
-00049c00: 203d 2027 7368 6f72 7427 2069 6620 5072   = 'short' if Pr
-00049c10: 6563 6973 652e 7374 7269 6e67 5f6c 7428  ecise.string_lt(
-00049c20: 6e6f 7469 6f6e 616c 5374 7269 6e67 2c20  notionalString, 
-00049c30: 2730 2729 2065 6c73 6520 276c 6f6e 6727  '0') else 'long'
-00049c40: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
-00049c50: 6769 6e52 6174 696f 203d 2073 656c 662e  ginRatio = self.
-00049c60: 7061 7273 655f 6e75 6d62 6572 2850 7265  parse_number(Pre
-00049c70: 6369 7365 2e73 7472 696e 675f 6469 7628  cise.string_div(
-00049c80: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
-00049c90: 6464 2850 7265 6369 7365 2e73 7472 696e  dd(Precise.strin
-00049ca0: 675f 6469 7628 6d61 696e 7465 6e61 6e63  g_div(maintenanc
-00049cb0: 654d 6172 6769 6e53 7472 696e 672c 2063  eMarginString, c
-00049cc0: 6f6c 6c61 7465 7261 6c53 7472 696e 6729  ollateralString)
-00049cd0: 2c20 2735 652d 3527 292c 2027 3127 2c20  , '5e-5'), '1', 
-00049ce0: 3429 290a 2020 2020 2020 2020 2020 2020  4)).            
-00049cf0: 7065 7263 656e 7461 6765 203d 2073 656c  percentage = sel
-00049d00: 662e 7061 7273 655f 6e75 6d62 6572 2850  f.parse_number(P
-00049d10: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
-00049d20: 6c28 5072 6563 6973 652e 7374 7269 6e67  l(Precise.string
-00049d30: 5f64 6976 2875 6e72 6561 6c69 7a65 6450  _div(unrealizedP
-00049d40: 6e6c 5374 7269 6e67 2c20 696e 6974 6961  nlString, initia
-00049d50: 6c4d 6172 6769 6e53 7472 696e 672c 2034  lMarginString, 4
-00049d60: 292c 2027 3130 3027 2929 0a20 2020 2020  ), '100')).     
-00049d70: 2020 2020 2020 2069 6620 7573 646d 3a0a         if usdm:.
-00049d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049d90: 2320 6361 6c63 756c 6174 6520 6c69 7175  # calculate liqu
-00049da0: 6964 6174 696f 6e20 7072 6963 650a 2020  idation price.  
-00049db0: 2020 2020 2020 2020 2020 2020 2020 230a                #.
-00049dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049dd0: 2320 6c69 7175 6964 6174 696f 6e50 7269  # liquidationPri
-00049de0: 6365 203d 2028 7761 6c6c 6574 4261 6c61  ce = (walletBala
-00049df0: 6e63 6520 2f20 2863 6f6e 7472 6163 7473  nce / (contracts
-00049e00: 202a 2028 c2b1 3120 2b20 6d6d 7029 2929   * (..1 + mmp)))
-00049e10: 202b 2028 c2b1 656e 7472 7950 7269 6365   + (..entryPrice
-00049e20: 202f 2028 c2b1 3120 2b20 6d6d 7029 290a   / (..1 + mmp)).
-00049e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049e40: 230a 2020 2020 2020 2020 2020 2020 2020  #.              
-00049e50: 2020 2320 6d6d 7020 3d20 6d61 696e 7465    # mmp = mainte
-00049e60: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
-00049e70: 6e74 6167 650a 2020 2020 2020 2020 2020  ntage.          
-00049e80: 2020 2020 2020 2320 7768 6572 6520 c2b1        # where ..
-00049e90: 2069 7320 6e65 6761 7469 7665 2066 6f72   is negative for
-00049ea0: 206c 6f6e 6720 616e 6420 706f 7369 7469   long and positi
-00049eb0: 7665 2066 6f72 2073 686f 7274 0a20 2020  ve for short.   
-00049ec0: 2020 2020 2020 2020 2020 2020 2023 2054               # T
-00049ed0: 4f44 4f3a 2063 616c 6375 6c61 7465 206c  ODO: calculate l
-00049ee0: 6971 7569 6461 7469 6f6e 2070 7269 6365  iquidation price
-00049ef0: 2066 6f72 2063 6f69 6e6d 2063 6f6e 7472   for coinm contr
-00049f00: 6163 7473 0a20 2020 2020 2020 2020 2020  acts.           
-00049f10: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
-00049f20: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-00049f30: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
-00049f40: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-00049f50: 2020 2020 2065 6e74 7279 5072 6963 6553       entryPriceS
-00049f60: 6967 6e53 7472 696e 6720 3d20 656e 7472  ignString = entr
-00049f70: 7950 7269 6365 5374 7269 6e67 0a20 2020  yPriceString.   
-00049f80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00049f90: 7369 6465 203d 3d20 2773 686f 7274 273a  side == 'short':
-00049fa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00049fb0: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
-00049fc0: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-00049fd0: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
-00049fe0: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
-00049ff0: 6464 2827 3127 2c20 6d61 696e 7465 6e61  dd('1', maintena
-0004a000: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
-0004a010: 6167 6553 7472 696e 6729 0a20 2020 2020  ageString).     
-0004a020: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0004a030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004a040: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
-0004a050: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-0004a060: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
-0004a070: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
-0004a080: 6464 2827 2d31 272c 206d 6169 6e74 656e  dd('-1', mainten
-0004a090: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-0004a0a0: 7461 6765 5374 7269 6e67 290a 2020 2020  tageString).    
-0004a0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a0c0: 656e 7472 7950 7269 6365 5369 676e 5374  entryPriceSignSt
-0004a0d0: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
-0004a0e0: 7472 696e 675f 6d75 6c28 272d 3127 2c20  tring_mul('-1', 
-0004a0f0: 656e 7472 7950 7269 6365 5369 676e 5374  entryPriceSignSt
-0004a100: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0004a110: 2020 2020 2020 6c65 6674 5369 6465 203d        leftSide =
-0004a120: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004a130: 6469 7628 7761 6c6c 6574 4261 6c61 6e63  div(walletBalanc
-0004a140: 652c 2050 7265 6369 7365 2e73 7472 696e  e, Precise.strin
-0004a150: 675f 6d75 6c28 636f 6e74 7261 6374 7353  g_mul(contractsS
-0004a160: 7472 696e 6741 6273 2c20 6f6e 6550 6c75  tringAbs, onePlu
-0004a170: 734d 6169 6e74 656e 616e 6365 4d61 7267  sMaintenanceMarg
-0004a180: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
-0004a190: 6e67 2929 0a20 2020 2020 2020 2020 2020  ng)).           
-0004a1a0: 2020 2020 2072 6967 6874 5369 6465 203d       rightSide =
-0004a1b0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004a1c0: 6469 7628 656e 7472 7950 7269 6365 5369  div(entryPriceSi
-0004a1d0: 676e 5374 7269 6e67 2c20 6f6e 6550 6c75  gnString, onePlu
-0004a1e0: 734d 6169 6e74 656e 616e 6365 4d61 7267  sMaintenanceMarg
-0004a1f0: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
-0004a200: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0004a210: 2020 2020 6c69 7175 6964 6174 696f 6e50      liquidationP
-0004a220: 7269 6365 5374 7269 6e67 5261 7720 3d20  riceStringRaw = 
-0004a230: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
-0004a240: 6464 286c 6566 7453 6964 652c 2072 6967  dd(leftSide, rig
-0004a250: 6874 5369 6465 290a 2020 2020 2020 2020  htSide).        
-0004a260: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0004a270: 2020 2020 2020 2020 2020 2320 6361 6c63            # calc
-0004a280: 756c 6174 6520 6c69 7175 6964 6174 696f  ulate liquidatio
-0004a290: 6e20 7072 6963 650a 2020 2020 2020 2020  n price.        
-0004a2a0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0004a2b0: 2020 2020 2020 2020 2020 2320 6c69 7175            # liqu
-0004a2c0: 6964 6174 696f 6e50 7269 6365 203d 2028  idationPrice = (
-0004a2d0: 636f 6e74 7261 6374 7320 2a20 636f 6e74  contracts * cont
-0004a2e0: 7261 6374 5369 7a65 28c2 b131 202d 206d  ractSize(..1 - m
-0004a2f0: 6d70 2929 202f 2028 c2b1 312f 656e 7472  mp)) / (..1/entr
-0004a300: 7950 7269 6365 202a 2063 6f6e 7472 6163  yPrice * contrac
-0004a310: 7473 202a 2063 6f6e 7472 6163 7453 697a  ts * contractSiz
-0004a320: 6520 2d20 7761 6c6c 6574 4261 6c61 6e63  e - walletBalanc
-0004a330: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-0004a340: 2020 2023 0a20 2020 2020 2020 2020 2020     #.           
-0004a350: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
-0004a360: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-0004a370: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
-0004a380: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0004a390: 2020 2020 2065 6e74 7279 5072 6963 6553       entryPriceS
-0004a3a0: 6967 6e53 7472 696e 6720 3d20 656e 7472  ignString = entr
-0004a3b0: 7950 7269 6365 5374 7269 6e67 0a20 2020  yPriceString.   
-0004a3c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0004a3d0: 7369 6465 203d 3d20 2773 686f 7274 273a  side == 'short':
-0004a3e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004a3f0: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
-0004a400: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-0004a410: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
-0004a420: 5072 6563 6973 652e 7374 7269 6e67 5f73  Precise.string_s
-0004a430: 7562 2827 3127 2c20 6d61 696e 7465 6e61  ub('1', maintena
-0004a440: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
-0004a450: 6167 6553 7472 696e 6729 0a20 2020 2020  ageString).     
-0004a460: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0004a470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004a480: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
-0004a490: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-0004a4a0: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
-0004a4b0: 5072 6563 6973 652e 7374 7269 6e67 5f73  Precise.string_s
-0004a4c0: 7562 2827 2d31 272c 206d 6169 6e74 656e  ub('-1', mainten
-0004a4d0: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-0004a4e0: 7461 6765 5374 7269 6e67 290a 2020 2020  tageString).    
-0004a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a500: 656e 7472 7950 7269 6365 5369 676e 5374  entryPriceSignSt
-0004a510: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
-0004a520: 7472 696e 675f 6d75 6c28 272d 3127 2c20  tring_mul('-1', 
-0004a530: 656e 7472 7950 7269 6365 5369 676e 5374  entryPriceSignSt
-0004a540: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0004a550: 2020 2020 2020 7369 7a65 203d 2050 7265        size = Pre
-0004a560: 6369 7365 2e73 7472 696e 675f 6d75 6c28  cise.string_mul(
-0004a570: 636f 6e74 7261 6374 7353 7472 696e 6741  contractsStringA
-0004a580: 6273 2c20 636f 6e74 7261 6374 5369 7a65  bs, contractSize
-0004a590: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-0004a5a0: 2020 2020 2020 2020 6c65 6674 5369 6465          leftSide
-0004a5b0: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-0004a5c0: 675f 6d75 6c28 7369 7a65 2c20 6f6e 6550  g_mul(size, oneP
-0004a5d0: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-0004a5e0: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-0004a5f0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0004a600: 2020 2020 2020 7269 6768 7453 6964 6520        rightSide 
-0004a610: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-0004a620: 5f73 7562 2850 7265 6369 7365 2e73 7472  _sub(Precise.str
-0004a630: 696e 675f 6d75 6c28 5072 6563 6973 652e  ing_mul(Precise.
-0004a640: 7374 7269 6e67 5f64 6976 2827 3127 2c20  string_div('1', 
-0004a650: 656e 7472 7950 7269 6365 5369 676e 5374  entryPriceSignSt
-0004a660: 7269 6e67 292c 2073 697a 6529 2c20 7761  ring), size), wa
-0004a670: 6c6c 6574 4261 6c61 6e63 6529 0a20 2020  lletBalance).   
-0004a680: 2020 2020 2020 2020 2020 2020 206c 6971               liq
-0004a690: 7569 6461 7469 6f6e 5072 6963 6553 7472  uidationPriceStr
-0004a6a0: 696e 6752 6177 203d 2050 7265 6369 7365  ingRaw = Precise
-0004a6b0: 2e73 7472 696e 675f 6469 7628 6c65 6674  .string_div(left
-0004a6c0: 5369 6465 2c20 7269 6768 7453 6964 6529  Side, rightSide)
-0004a6d0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-0004a6e0: 6365 5072 6563 6973 696f 6e20 3d20 6d61  cePrecision = ma
-0004a6f0: 726b 6574 5b27 7072 6563 6973 696f 6e27  rket['precision'
-0004a700: 5d5b 2770 7269 6365 275d 0a20 2020 2020  ]['price'].     
-0004a710: 2020 2020 2020 2070 7269 6365 5072 6563         pricePrec
-0004a720: 6973 696f 6e50 6c75 734f 6e65 203d 2070  isionPlusOne = p
-0004a730: 7269 6365 5072 6563 6973 696f 6e20 2b20  ricePrecision + 
-0004a740: 310a 2020 2020 2020 2020 2020 2020 7072  1.            pr
-0004a750: 6963 6550 7265 6369 7369 6f6e 506c 7573  icePrecisionPlus
-0004a760: 4f6e 6553 7472 696e 6720 3d20 7374 7228  OneString = str(
-0004a770: 7072 6963 6550 7265 6369 7369 6f6e 506c  pricePrecisionPl
-0004a780: 7573 4f6e 6529 0a20 2020 2020 2020 2020  usOne).         
-0004a790: 2020 2023 2072 6f75 6e64 2068 616c 6620     # round half 
-0004a7a0: 7570 0a20 2020 2020 2020 2020 2020 2072  up.            r
-0004a7b0: 6f75 6e64 6572 203d 2050 7265 6369 7365  ounder = Precise
-0004a7c0: 2827 3565 2d27 202b 2070 7269 6365 5072  ('5e-' + pricePr
-0004a7d0: 6563 6973 696f 6e50 6c75 734f 6e65 5374  ecisionPlusOneSt
-0004a7e0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0004a7f0: 2020 726f 756e 6465 7253 7472 696e 6720    rounderString 
-0004a800: 3d20 7374 7228 726f 756e 6465 7229 0a20  = str(rounder). 
-0004a810: 2020 2020 2020 2020 2020 206c 6971 7569             liqui
-0004a820: 6461 7469 6f6e 5072 6963 6552 6f75 6e64  dationPriceRound
-0004a830: 6564 5374 7269 6e67 203d 2050 7265 6369  edString = Preci
-0004a840: 7365 2e73 7472 696e 675f 6164 6428 726f  se.string_add(ro
-0004a850: 756e 6465 7253 7472 696e 672c 206c 6971  underString, liq
-0004a860: 7569 6461 7469 6f6e 5072 6963 6553 7472  uidationPriceStr
-0004a870: 696e 6752 6177 290a 2020 2020 2020 2020  ingRaw).        
-0004a880: 2020 2020 7472 756e 6361 7465 644c 6971      truncatedLiq
-0004a890: 7569 6461 7469 6f6e 5072 6963 6520 3d20  uidationPrice = 
-0004a8a0: 5072 6563 6973 652e 7374 7269 6e67 5f64  Precise.string_d
-0004a8b0: 6976 286c 6971 7569 6461 7469 6f6e 5072  iv(liquidationPr
-0004a8c0: 6963 6552 6f75 6e64 6564 5374 7269 6e67  iceRoundedString
-0004a8d0: 2c20 2731 272c 2070 7269 6365 5072 6563  , '1', pricePrec
-0004a8e0: 6973 696f 6e29 0a20 2020 2020 2020 2020  ision).         
-0004a8f0: 2020 2069 6620 7472 756e 6361 7465 644c     if truncatedL
-0004a900: 6971 7569 6461 7469 6f6e 5072 6963 655b  iquidationPrice[
-0004a910: 305d 203d 3d20 272d 273a 0a20 2020 2020  0] == '-':.     
-0004a920: 2020 2020 2020 2020 2020 2023 2075 7365             # use
-0004a930: 7220 6361 6e6e 6f74 2062 6520 6c69 7175  r cannot be liqu
-0004a940: 6964 6174 6564 0a20 2020 2020 2020 2020  idated.         
-0004a950: 2020 2020 2020 2023 2073 696e 6365 2068         # since h
-0004a960: 6520 6861 7320 6d6f 7265 2063 6f6c 6c61  e has more colla
-0004a970: 7465 7261 6c20 7468 616e 2074 6865 2073  teral than the s
-0004a980: 697a 6520 6f66 2074 6865 2070 6f73 6974  ize of the posit
-0004a990: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-0004a9a0: 2020 2020 7472 756e 6361 7465 644c 6971      truncatedLiq
-0004a9b0: 7569 6461 7469 6f6e 5072 6963 6520 3d20  uidationPrice = 
-0004a9c0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0004a9d0: 206c 6971 7569 6461 7469 6f6e 5072 6963   liquidationPric
-0004a9e0: 6520 3d20 7365 6c66 2e70 6172 7365 5f6e  e = self.parse_n
-0004a9f0: 756d 6265 7228 7472 756e 6361 7465 644c  umber(truncatedL
-0004aa00: 6971 7569 6461 7469 6f6e 5072 6963 6529  iquidationPrice)
-0004aa10: 0a20 2020 2020 2020 2070 6f73 6974 696f  .        positio
-0004aa20: 6e53 6964 6520 3d20 7365 6c66 2e73 6166  nSide = self.saf
-0004aa30: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
-0004aa40: 6e2c 2027 706f 7369 7469 6f6e 5369 6465  n, 'positionSide
-0004aa50: 2729 0a20 2020 2020 2020 2068 6564 6765  ').        hedge
-0004aa60: 6420 3d20 706f 7369 7469 6f6e 5369 6465  d = positionSide
-0004aa70: 2021 3d20 2742 4f54 4827 0a20 2020 2020   != 'BOTH'.     
-0004aa80: 2020 2072 6574 7572 6e20 7b0a 2020 2020     return {.    
-0004aa90: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
-0004aaa0: 706f 7369 7469 6f6e 2c0a 2020 2020 2020  position,.      
-0004aab0: 2020 2020 2020 2769 6427 3a20 4e6f 6e65        'id': None
-0004aac0: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
-0004aad0: 796d 626f 6c27 3a20 7379 6d62 6f6c 2c0a  ymbol': symbol,.
-0004aae0: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
-0004aaf0: 6573 7461 6d70 273a 2074 696d 6573 7461  estamp': timesta
-0004ab00: 6d70 2c0a 2020 2020 2020 2020 2020 2020  mp,.            
-0004ab10: 2764 6174 6574 696d 6527 3a20 7365 6c66  'datetime': self
-0004ab20: 2e69 736f 3836 3031 2874 696d 6573 7461  .iso8601(timesta
-0004ab30: 6d70 292c 0a20 2020 2020 2020 2020 2020  mp),.           
-0004ab40: 2027 696e 6974 6961 6c4d 6172 6769 6e27   'initialMargin'
-0004ab50: 3a20 696e 6974 6961 6c4d 6172 6769 6e2c  : initialMargin,
-0004ab60: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-0004ab70: 6974 6961 6c4d 6172 6769 6e50 6572 6365  itialMarginPerce
-0004ab80: 6e74 6167 6527 3a20 7365 6c66 2e70 6172  ntage': self.par
-0004ab90: 7365 5f6e 756d 6265 7228 696e 6974 6961  se_number(initia
-0004aba0: 6c4d 6172 6769 6e50 6572 6365 6e74 6167  lMarginPercentag
-0004abb0: 6553 7472 696e 6729 2c0a 2020 2020 2020  eString),.      
-0004abc0: 2020 2020 2020 276d 6169 6e74 656e 616e        'maintenan
-0004abd0: 6365 4d61 7267 696e 273a 206d 6169 6e74  ceMargin': maint
-0004abe0: 656e 616e 6365 4d61 7267 696e 2c0a 2020  enanceMargin,.  
-0004abf0: 2020 2020 2020 2020 2020 276d 6169 6e74            'maint
-0004ac00: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-0004ac10: 656e 7461 6765 273a 206d 6169 6e74 656e  entage': mainten
-0004ac20: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-0004ac30: 7461 6765 2c0a 2020 2020 2020 2020 2020  tage,.          
-0004ac40: 2020 2765 6e74 7279 5072 6963 6527 3a20    'entryPrice': 
-0004ac50: 656e 7472 7950 7269 6365 2c0a 2020 2020  entryPrice,.    
-0004ac60: 2020 2020 2020 2020 276e 6f74 696f 6e61          'notiona
-0004ac70: 6c27 3a20 6e6f 7469 6f6e 616c 2c0a 2020  l': notional,.  
-0004ac80: 2020 2020 2020 2020 2020 276c 6576 6572            'lever
-0004ac90: 6167 6527 3a20 7365 6c66 2e70 6172 7365  age': self.parse
-0004aca0: 5f6e 756d 6265 7228 6c65 7665 7261 6765  _number(leverage
-0004acb0: 5374 7269 6e67 292c 0a20 2020 2020 2020  String),.       
-0004acc0: 2020 2020 2027 756e 7265 616c 697a 6564       'unrealized
-0004acd0: 506e 6c27 3a20 756e 7265 616c 697a 6564  Pnl': unrealized
-0004ace0: 506e 6c2c 0a20 2020 2020 2020 2020 2020  Pnl,.           
-0004acf0: 2027 636f 6e74 7261 6374 7327 3a20 636f   'contracts': co
-0004ad00: 6e74 7261 6374 732c 0a20 2020 2020 2020  ntracts,.       
-0004ad10: 2020 2020 2027 636f 6e74 7261 6374 5369       'contractSi
-0004ad20: 7a65 273a 2063 6f6e 7472 6163 7453 697a  ze': contractSiz
-0004ad30: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0004ad40: 6d61 7267 696e 5261 7469 6f27 3a20 6d61  marginRatio': ma
-0004ad50: 7267 696e 5261 7469 6f2c 0a20 2020 2020  rginRatio,.     
-0004ad60: 2020 2020 2020 2027 6c69 7175 6964 6174         'liquidat
-0004ad70: 696f 6e50 7269 6365 273a 206c 6971 7569  ionPrice': liqui
-0004ad80: 6461 7469 6f6e 5072 6963 652c 0a20 2020  dationPrice,.   
-0004ad90: 2020 2020 2020 2020 2027 6d61 726b 5072           'markPr
-0004ada0: 6963 6527 3a20 4e6f 6e65 2c0a 2020 2020  ice': None,.    
-0004adb0: 2020 2020 2020 2020 2763 6f6c 6c61 7465          'collate
-0004adc0: 7261 6c27 3a20 636f 6c6c 6174 6572 616c  ral': collateral
-0004add0: 2c0a 2020 2020 2020 2020 2020 2020 276d  ,.            'm
-0004ade0: 6172 6769 6e4d 6f64 6527 3a20 6d61 7267  arginMode': marg
-0004adf0: 696e 4d6f 6465 2c0a 2020 2020 2020 2020  inMode,.        
-0004ae00: 2020 2020 2773 6964 6527 3a20 7369 6465      'side': side
-0004ae10: 2c0a 2020 2020 2020 2020 2020 2020 2768  ,.            'h
-0004ae20: 6564 6765 6427 3a20 6865 6467 6564 2c0a  edged': hedged,.
-0004ae30: 2020 2020 2020 2020 2020 2020 2770 6572              'per
-0004ae40: 6365 6e74 6167 6527 3a20 7065 7263 656e  centage': percen
-0004ae50: 7461 6765 2c0a 2020 2020 2020 2020 7d0a  tage,.        }.
-0004ae60: 0a20 2020 2064 6566 2070 6172 7365 5f70  .    def parse_p
-0004ae70: 6f73 6974 696f 6e5f 7269 736b 2873 656c  osition_risk(sel
-0004ae80: 662c 2070 6f73 6974 696f 6e2c 206d 6172  f, position, mar
-0004ae90: 6b65 743d 4e6f 6e65 293a 0a20 2020 2020  ket=None):.     
-0004aea0: 2020 2023 0a20 2020 2020 2020 2023 2075     #.        # u
-0004aeb0: 7364 6d0a 2020 2020 2020 2020 2320 2020  sdm.        #   
-0004aec0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0004aed0: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
-0004aee0: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
-0004aef0: 2023 2020 2020 2020 2022 706f 7369 7469   #       "positi
-0004af00: 6f6e 416d 7422 3a20 2230 2e30 3031 222c  onAmt": "0.001",
-0004af10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004af20: 2022 656e 7472 7950 7269 6365 223a 2022   "entryPrice": "
-0004af30: 3433 3537 382e 3037 3030 3022 2c0a 2020  43578.07000",.  
-0004af40: 2020 2020 2020 2320 2020 2020 2020 226d        #       "m
-0004af50: 6172 6b50 7269 6365 223a 2022 3433 3533  arkPrice": "4353
-0004af60: 322e 3330 3030 3030 3030 222c 0a20 2020  2.30000000",.   
-0004af70: 2020 2020 2023 2020 2020 2020 2022 756e       #       "un
-0004af80: 5265 616c 697a 6564 5072 6f66 6974 223a  RealizedProfit":
-0004af90: 2022 2d30 2e30 3435 3737 3030 3022 2c0a   "-0.04577000",.
-0004afa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004afb0: 226c 6971 7569 6461 7469 6f6e 5072 6963  "liquidationPric
-0004afc0: 6522 3a20 2232 3138 3431 2e32 3439 3933  e": "21841.24993
-0004afd0: 3937 3622 2c0a 2020 2020 2020 2020 2320  976",.        # 
-0004afe0: 2020 2020 2020 226c 6576 6572 6167 6522        "leverage"
-0004aff0: 3a20 2232 222c 0a20 2020 2020 2020 2023  : "2",.        #
-0004b000: 2020 2020 2020 2022 6d61 784e 6f74 696f         "maxNotio
-0004b010: 6e61 6c56 616c 7565 223a 2022 3330 3030  nalValue": "3000
-0004b020: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0004b030: 2320 2020 2020 2020 226d 6172 6769 6e54  #       "marginT
-0004b040: 7970 6522 3a20 2269 736f 6c61 7465 6422  ype": "isolated"
-0004b050: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004b060: 2020 2269 736f 6c61 7465 644d 6172 6769    "isolatedMargi
-0004b070: 6e22 3a20 2232 312e 3737 3834 3135 3036  n": "21.77841506
-0004b080: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004b090: 2020 2022 6973 4175 746f 4164 644d 6172     "isAutoAddMar
-0004b0a0: 6769 6e22 3a20 2266 616c 7365 222c 0a20  gin": "false",. 
-0004b0b0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0004b0c0: 706f 7369 7469 6f6e 5369 6465 223a 2022  positionSide": "
-0004b0d0: 424f 5448 222c 0a20 2020 2020 2020 2023  BOTH",.        #
-0004b0e0: 2020 2020 2020 2022 6e6f 7469 6f6e 616c         "notional
-0004b0f0: 223a 2022 3433 2e35 3332 3330 3030 3022  ": "43.53230000"
-0004b100: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004b110: 2020 2269 736f 6c61 7465 6457 616c 6c65    "isolatedWalle
-0004b120: 7422 3a20 2232 312e 3832 3431 3835 3036  t": "21.82418506
-0004b130: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004b140: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
-0004b150: 2022 3136 3231 3335 3830 3233 3838 3622   "1621358023886"
-0004b160: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0004b170: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0004b180: 2020 2023 2063 6f69 6e6d 0a20 2020 2020     # coinm.     
-0004b190: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0004b1a0: 2020 2023 2020 2020 2020 2022 7379 6d62     #       "symb
-0004b1b0: 6f6c 223a 2022 4254 4355 5344 5f50 4552  ol": "BTCUSD_PER
-0004b1c0: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
-0004b1d0: 2020 2020 2270 6f73 6974 696f 6e41 6d74      "positionAmt
-0004b1e0: 223a 2022 3222 2c0a 2020 2020 2020 2020  ": "2",.        
-0004b1f0: 2320 2020 2020 2020 2265 6e74 7279 5072  #       "entryPr
-0004b200: 6963 6522 3a20 2233 3736 3433 2e31 3030  ice": "37643.100
-0004b210: 3030 3032 3122 2c0a 2020 2020 2020 2020  00021",.        
-0004b220: 2320 2020 2020 2020 226d 6172 6b50 7269  #       "markPri
-0004b230: 6365 223a 2022 3338 3130 332e 3035 3531  ce": "38103.0551
-0004b240: 3034 3535 222c 0a20 2020 2020 2020 2023  0455",.        #
-0004b250: 2020 2020 2020 2022 756e 5265 616c 697a         "unRealiz
-0004b260: 6564 5072 6f66 6974 223a 2022 302e 3030  edProfit": "0.00
-0004b270: 3030 3634 3133 222c 0a20 2020 2020 2020  006413",.       
-0004b280: 2023 2020 2020 2020 2022 6c69 7175 6964   #       "liquid
-0004b290: 6174 696f 6e50 7269 6365 223a 2022 3235  ationPrice": "25
-0004b2a0: 3131 392e 3937 3434 3537 3630 222c 0a20  119.97445760",. 
-0004b2b0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0004b2c0: 6c65 7665 7261 6765 223a 2022 3222 2c0a  leverage": "2",.
-0004b2d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004b2e0: 226d 6178 5174 7922 3a20 2231 3530 3022  "maxQty": "1500"
-0004b2f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004b300: 2020 226d 6172 6769 6e54 7970 6522 3a20    "marginType": 
-0004b310: 2269 736f 6c61 7465 6422 2c0a 2020 2020  "isolated",.    
-0004b320: 2020 2020 2320 2020 2020 2020 2269 736f      #       "iso
-0004b330: 6c61 7465 644d 6172 6769 6e22 3a20 2230  latedMargin": "0
-0004b340: 2e30 3032 3734 3437 3122 2c0a 2020 2020  .00274471",.    
-0004b350: 2020 2020 2320 2020 2020 2020 2269 7341      #       "isA
-0004b360: 7574 6f41 6464 4d61 7267 696e 223a 2022  utoAddMargin": "
-0004b370: 6661 6c73 6522 2c0a 2020 2020 2020 2020  false",.        
-0004b380: 2320 2020 2020 2020 2270 6f73 6974 696f  #       "positio
-0004b390: 6e53 6964 6522 3a20 2242 4f54 4822 2c0a  nSide": "BOTH",.
-0004b3a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004b3b0: 226e 6f74 696f 6e61 6c56 616c 7565 223a  "notionalValue":
-0004b3c0: 2022 302e 3030 3532 3438 3932 222c 0a20   "0.00524892",. 
-0004b3d0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0004b3e0: 6973 6f6c 6174 6564 5761 6c6c 6574 223a  isolatedWallet":
-0004b3f0: 2022 302e 3030 3236 3830 3538 220a 2020   "0.00268058".  
-0004b400: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-0004b410: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0004b420: 6d61 726b 6574 4964 203d 2073 656c 662e  marketId = self.
-0004b430: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
-0004b440: 7469 6f6e 2c20 2773 796d 626f 6c27 290a  tion, 'symbol').
-0004b450: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-0004b460: 2073 656c 662e 7361 6665 5f6d 6172 6b65   self.safe_marke
-0004b470: 7428 6d61 726b 6574 4964 2c20 6d61 726b  t(marketId, mark
-0004b480: 6574 2c20 4e6f 6e65 2c20 2763 6f6e 7472  et, None, 'contr
-0004b490: 6163 7427 290a 2020 2020 2020 2020 7379  act').        sy
-0004b4a0: 6d62 6f6c 203d 2073 656c 662e 7361 6665  mbol = self.safe
-0004b4b0: 5f73 7472 696e 6728 6d61 726b 6574 2c20  _string(market, 
-0004b4c0: 2773 796d 626f 6c27 290a 2020 2020 2020  'symbol').      
-0004b4d0: 2020 6c65 7665 7261 6765 4272 6163 6b65    leverageBracke
-0004b4e0: 7473 203d 2073 656c 662e 7361 6665 5f76  ts = self.safe_v
-0004b4f0: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
-0004b500: 732c 2027 6c65 7665 7261 6765 4272 6163  s, 'leverageBrac
-0004b510: 6b65 7473 272c 207b 7d29 0a20 2020 2020  kets', {}).     
-0004b520: 2020 206c 6576 6572 6167 6542 7261 636b     leverageBrack
-0004b530: 6574 203d 2073 656c 662e 7361 6665 5f76  et = self.safe_v
-0004b540: 616c 7565 286c 6576 6572 6167 6542 7261  alue(leverageBra
-0004b550: 636b 6574 732c 2073 796d 626f 6c2c 205b  ckets, symbol, [
-0004b560: 5d29 0a20 2020 2020 2020 206e 6f74 696f  ]).        notio
-0004b570: 6e61 6c53 7472 696e 6720 3d20 7365 6c66  nalString = self
-0004b580: 2e73 6166 655f 7374 7269 6e67 5f32 2870  .safe_string_2(p
-0004b590: 6f73 6974 696f 6e2c 2027 6e6f 7469 6f6e  osition, 'notion
-0004b5a0: 616c 272c 2027 6e6f 7469 6f6e 616c 5661  al', 'notionalVa
-0004b5b0: 6c75 6527 290a 2020 2020 2020 2020 6e6f  lue').        no
-0004b5c0: 7469 6f6e 616c 5374 7269 6e67 4162 7320  tionalStringAbs 
-0004b5d0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-0004b5e0: 5f61 6273 286e 6f74 696f 6e61 6c53 7472  _abs(notionalStr
-0004b5f0: 696e 6729 0a20 2020 2020 2020 206d 6169  ing).        mai
-0004b600: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004b610: 7263 656e 7461 6765 5374 7269 6e67 203d  rcentageString =
-0004b620: 204e 6f6e 650a 2020 2020 2020 2020 666f   None.        fo
-0004b630: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
-0004b640: 6c65 6e28 6c65 7665 7261 6765 4272 6163  len(leverageBrac
-0004b650: 6b65 7429 293a 0a20 2020 2020 2020 2020  ket)):.         
-0004b660: 2020 2062 7261 636b 6574 203d 206c 6576     bracket = lev
-0004b670: 6572 6167 6542 7261 636b 6574 5b69 5d0a  erageBracket[i].
-0004b680: 2020 2020 2020 2020 2020 2020 6966 2050              if P
-0004b690: 7265 6369 7365 2e73 7472 696e 675f 6c74  recise.string_lt
-0004b6a0: 286e 6f74 696f 6e61 6c53 7472 696e 6741  (notionalStringA
-0004b6b0: 6273 2c20 6272 6163 6b65 745b 305d 293a  bs, bracket[0]):
-0004b6c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004b6d0: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
-0004b6e0: 2020 206d 6169 6e74 656e 616e 6365 4d61     maintenanceMa
-0004b6f0: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-0004b700: 7269 6e67 203d 2062 7261 636b 6574 5b31  ring = bracket[1
-0004b710: 5d0a 2020 2020 2020 2020 6e6f 7469 6f6e  ].        notion
-0004b720: 616c 203d 2073 656c 662e 7061 7273 655f  al = self.parse_
-0004b730: 6e75 6d62 6572 286e 6f74 696f 6e61 6c53  number(notionalS
-0004b740: 7472 696e 6741 6273 290a 2020 2020 2020  tringAbs).      
-0004b750: 2020 636f 6e74 7261 6374 7341 6273 203d    contractsAbs =
-0004b760: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004b770: 6162 7328 7365 6c66 2e73 6166 655f 7374  abs(self.safe_st
-0004b780: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
-0004b790: 706f 7369 7469 6f6e 416d 7427 2929 0a20  positionAmt')). 
-0004b7a0: 2020 2020 2020 2063 6f6e 7472 6163 7473         contracts
-0004b7b0: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
-0004b7c0: 6d62 6572 2863 6f6e 7472 6163 7473 4162  mber(contractsAb
-0004b7d0: 7329 0a20 2020 2020 2020 2075 6e72 6561  s).        unrea
-0004b7e0: 6c69 7a65 6450 6e6c 5374 7269 6e67 203d  lizedPnlString =
-0004b7f0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0004b800: 6728 706f 7369 7469 6f6e 2c20 2775 6e52  g(position, 'unR
-0004b810: 6561 6c69 7a65 6450 726f 6669 7427 290a  ealizedProfit').
-0004b820: 2020 2020 2020 2020 756e 7265 616c 697a          unrealiz
-0004b830: 6564 506e 6c20 3d20 7365 6c66 2e70 6172  edPnl = self.par
-0004b840: 7365 5f6e 756d 6265 7228 756e 7265 616c  se_number(unreal
-0004b850: 697a 6564 506e 6c53 7472 696e 6729 0a20  izedPnlString). 
-0004b860: 2020 2020 2020 206c 6576 6572 6167 6553         leverageS
-0004b870: 7472 696e 6720 3d20 7365 6c66 2e73 6166  tring = self.saf
-0004b880: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
-0004b890: 6e2c 2027 6c65 7665 7261 6765 2729 0a20  n, 'leverage'). 
-0004b8a0: 2020 2020 2020 206c 6576 6572 6167 6520         leverage 
-0004b8b0: 3d20 696e 7428 6c65 7665 7261 6765 5374  = int(leverageSt
-0004b8c0: 7269 6e67 290a 2020 2020 2020 2020 6c69  ring).        li
-0004b8d0: 7175 6964 6174 696f 6e50 7269 6365 5374  quidationPriceSt
-0004b8e0: 7269 6e67 203d 2073 656c 662e 6f6d 6974  ring = self.omit
-0004b8f0: 5f7a 6572 6f28 7365 6c66 2e73 6166 655f  _zero(self.safe_
-0004b900: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
-0004b910: 2027 6c69 7175 6964 6174 696f 6e50 7269   'liquidationPri
-0004b920: 6365 2729 290a 2020 2020 2020 2020 6c69  ce')).        li
-0004b930: 7175 6964 6174 696f 6e50 7269 6365 203d  quidationPrice =
-0004b940: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-0004b950: 6572 286c 6971 7569 6461 7469 6f6e 5072  er(liquidationPr
-0004b960: 6963 6553 7472 696e 6729 0a20 2020 2020  iceString).     
-0004b970: 2020 2063 6f6c 6c61 7465 7261 6c53 7472     collateralStr
-0004b980: 696e 6720 3d20 4e6f 6e65 0a20 2020 2020  ing = None.     
-0004b990: 2020 206d 6172 6769 6e4d 6f64 6520 3d20     marginMode = 
-0004b9a0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0004b9b0: 2870 6f73 6974 696f 6e2c 2027 6d61 7267  (position, 'marg
-0004b9c0: 696e 5479 7065 2729 0a20 2020 2020 2020  inType').       
-0004b9d0: 2073 6964 6520 3d20 4e6f 6e65 0a20 2020   side = None.   
-0004b9e0: 2020 2020 2069 6620 5072 6563 6973 652e       if Precise.
-0004b9f0: 7374 7269 6e67 5f67 7428 6e6f 7469 6f6e  string_gt(notion
-0004ba00: 616c 5374 7269 6e67 2c20 2730 2729 3a0a  alString, '0'):.
-0004ba10: 2020 2020 2020 2020 2020 2020 7369 6465              side
-0004ba20: 203d 2027 6c6f 6e67 270a 2020 2020 2020   = 'long'.      
-0004ba30: 2020 656c 6966 2050 7265 6369 7365 2e73    elif Precise.s
-0004ba40: 7472 696e 675f 6c74 286e 6f74 696f 6e61  tring_lt(notiona
-0004ba50: 6c53 7472 696e 672c 2027 3027 293a 0a20  lString, '0'):. 
-0004ba60: 2020 2020 2020 2020 2020 2073 6964 6520             side 
-0004ba70: 3d20 2773 686f 7274 270a 2020 2020 2020  = 'short'.      
-0004ba80: 2020 656e 7472 7950 7269 6365 5374 7269    entryPriceStri
-0004ba90: 6e67 203d 2073 656c 662e 7361 6665 5f73  ng = self.safe_s
-0004baa0: 7472 696e 6728 706f 7369 7469 6f6e 2c20  tring(position, 
-0004bab0: 2765 6e74 7279 5072 6963 6527 290a 2020  'entryPrice').  
-0004bac0: 2020 2020 2020 656e 7472 7950 7269 6365        entryPrice
-0004bad0: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
-0004bae0: 6d62 6572 2865 6e74 7279 5072 6963 6553  mber(entryPriceS
-0004baf0: 7472 696e 6729 0a20 2020 2020 2020 2063  tring).        c
-0004bb00: 6f6e 7472 6163 7453 697a 6520 3d20 7365  ontractSize = se
-0004bb10: 6c66 2e73 6166 655f 7661 6c75 6528 6d61  lf.safe_value(ma
-0004bb20: 726b 6574 2c20 2763 6f6e 7472 6163 7453  rket, 'contractS
-0004bb30: 697a 6527 290a 2020 2020 2020 2020 636f  ize').        co
-0004bb40: 6e74 7261 6374 5369 7a65 5374 7269 6e67  ntractSizeString
-0004bb50: 203d 2073 656c 662e 6e75 6d62 6572 5f74   = self.number_t
-0004bb60: 6f5f 7374 7269 6e67 2863 6f6e 7472 6163  o_string(contrac
-0004bb70: 7453 697a 6529 0a20 2020 2020 2020 2023  tSize).        #
-0004bb80: 2074 6f20 6e6f 7469 6f6e 616c 5661 6c75   to notionalValu
-0004bb90: 650a 2020 2020 2020 2020 6c69 6e65 6172  e.        linear
-0004bba0: 203d 2028 276e 6f74 696f 6e61 6c27 2069   = ('notional' i
-0004bbb0: 6e20 706f 7369 7469 6f6e 290a 2020 2020  n position).    
-0004bbc0: 2020 2020 6966 206d 6172 6769 6e4d 6f64      if marginMod
-0004bbd0: 6520 3d3d 2027 6372 6f73 7327 3a0a 2020  e == 'cross':.  
-0004bbe0: 2020 2020 2020 2020 2020 2320 6361 6c63            # calc
-0004bbf0: 756c 6174 6520 636f 6c6c 6174 6572 616c  ulate collateral
-0004bc00: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
-0004bc10: 6369 7369 6f6e 203d 2073 656c 662e 7361  cision = self.sa
-0004bc20: 6665 5f76 616c 7565 286d 6172 6b65 742c  fe_value(market,
-0004bc30: 2027 7072 6563 6973 696f 6e27 2c20 7b7d   'precision', {}
-0004bc40: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0004bc50: 206c 696e 6561 723a 0a20 2020 2020 2020   linear:.       
-0004bc60: 2020 2020 2020 2020 2023 2077 616c 6c65           # walle
-0004bc70: 7442 616c 616e 6365 203d 2028 6c69 7175  tBalance = (liqu
-0004bc80: 6964 6174 696f 6e50 7269 6365 202a 2028  idationPrice * (
-0004bc90: c2b1 3120 2b20 6d6d 7029 20c2 b120 656e  ..1 + mmp) .. en
-0004bca0: 7472 7950 7269 6365 2920 2a20 636f 6e74  tryPrice) * cont
-0004bcb0: 7261 6374 730a 2020 2020 2020 2020 2020  racts.          
-0004bcc0: 2020 2020 2020 6f6e 6550 6c75 734d 6169        onePlusMai
-0004bcd0: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004bce0: 7263 656e 7461 6765 5374 7269 6e67 203d  rcentageString =
-0004bcf0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0004bd00: 2020 2020 2020 656e 7472 7950 7269 6365        entryPrice
-0004bd10: 5369 676e 5374 7269 6e67 203d 2065 6e74  SignString = ent
-0004bd20: 7279 5072 6963 6553 7472 696e 670a 2020  ryPriceString.  
-0004bd30: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0004bd40: 2073 6964 6520 3d3d 2027 7368 6f72 7427   side == 'short'
-0004bd50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0004bd60: 2020 2020 2020 6f6e 6550 6c75 734d 6169        onePlusMai
-0004bd70: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004bd80: 7263 656e 7461 6765 5374 7269 6e67 203d  rcentageString =
-0004bd90: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004bda0: 6164 6428 2731 272c 206d 6169 6e74 656e  add('1', mainten
-0004bdb0: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-0004bdc0: 7461 6765 5374 7269 6e67 290a 2020 2020  tageString).    
-0004bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bde0: 656e 7472 7950 7269 6365 5369 676e 5374  entryPriceSignSt
-0004bdf0: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
-0004be00: 7472 696e 675f 6d75 6c28 272d 3127 2c20  tring_mul('-1', 
-0004be10: 656e 7472 7950 7269 6365 5369 676e 5374  entryPriceSignSt
-0004be20: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0004be30: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0004be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004be50: 6f6e 6550 6c75 734d 6169 6e74 656e 616e  onePlusMaintenan
-0004be60: 6365 4d61 7267 696e 5065 7263 656e 7461  ceMarginPercenta
-0004be70: 6765 5374 7269 6e67 203d 2050 7265 6369  geString = Preci
-0004be80: 7365 2e73 7472 696e 675f 6164 6428 272d  se.string_add('-
-0004be90: 3127 2c20 6d61 696e 7465 6e61 6e63 654d  1', maintenanceM
-0004bea0: 6172 6769 6e50 6572 6365 6e74 6167 6553  arginPercentageS
-0004beb0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0004bec0: 2020 2020 2020 2069 6e6e 6572 203d 2050         inner = P
-0004bed0: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
-0004bee0: 6c28 6c69 7175 6964 6174 696f 6e50 7269  l(liquidationPri
-0004bef0: 6365 5374 7269 6e67 2c20 6f6e 6550 6c75  ceString, onePlu
-0004bf00: 734d 6169 6e74 656e 616e 6365 4d61 7267  sMaintenanceMarg
-0004bf10: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
-0004bf20: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0004bf30: 2020 2020 6c65 6674 5369 6465 203d 2050      leftSide = P
-0004bf40: 7265 6369 7365 2e73 7472 696e 675f 6164  recise.string_ad
-0004bf50: 6428 696e 6e65 722c 2065 6e74 7279 5072  d(inner, entryPr
-0004bf60: 6963 6553 6967 6e53 7472 696e 6729 0a20  iceSignString). 
-0004bf70: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0004bf80: 7269 6365 5072 6563 6973 696f 6e20 3d20  ricePrecision = 
-0004bf90: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
-0004bfa0: 7228 7072 6563 6973 696f 6e2c 2027 7072  r(precision, 'pr
-0004bfb0: 6963 6527 290a 2020 2020 2020 2020 2020  ice').          
-0004bfc0: 2020 2020 2020 7175 6f74 6550 7265 6369        quotePreci
-0004bfd0: 7369 6f6e 203d 2073 656c 662e 7361 6665  sion = self.safe
-0004bfe0: 5f69 6e74 6567 6572 2870 7265 6369 7369  _integer(precisi
-0004bff0: 6f6e 2c20 2771 756f 7465 272c 2070 7269  on, 'quote', pri
-0004c000: 6365 5072 6563 6973 696f 6e29 0a20 2020  cePrecision).   
-0004c010: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0004c020: 7175 6f74 6550 7265 6369 7369 6f6e 2069  quotePrecision i
-0004c030: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0004c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c050: 636f 6c6c 6174 6572 616c 5374 7269 6e67  collateralString
-0004c060: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-0004c070: 675f 6469 7628 5072 6563 6973 652e 7374  g_div(Precise.st
-0004c080: 7269 6e67 5f6d 756c 286c 6566 7453 6964  ring_mul(leftSid
-0004c090: 652c 2063 6f6e 7472 6163 7473 4162 7329  e, contractsAbs)
-0004c0a0: 2c20 2731 272c 2071 756f 7465 5072 6563  , '1', quotePrec
-0004c0b0: 6973 696f 6e29 0a20 2020 2020 2020 2020  ision).         
-0004c0c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0004c0d0: 2020 2020 2020 2020 2023 2077 616c 6c65           # walle
-0004c0e0: 7442 616c 616e 6365 203d 2028 636f 6e74  tBalance = (cont
-0004c0f0: 7261 6374 7320 2a20 636f 6e74 7261 6374  racts * contract
-0004c100: 5369 7a65 2920 2a20 28c2 b131 2f65 6e74  Size) * (..1/ent
-0004c110: 7279 5072 6963 6520 2d20 28c2 b131 202d  ryPrice - (..1 -
-0004c120: 206d 6d70 2920 2f20 6c69 7175 6964 6174   mmp) / liquidat
-0004c130: 696f 6e50 7269 6365 290a 2020 2020 2020  ionPrice).      
-0004c140: 2020 2020 2020 2020 2020 6f6e 6550 6c75            onePlu
-0004c150: 734d 6169 6e74 656e 616e 6365 4d61 7267  sMaintenanceMarg
-0004c160: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
-0004c170: 6e67 203d 204e 6f6e 650a 2020 2020 2020  ng = None.      
-0004c180: 2020 2020 2020 2020 2020 656e 7472 7950            entryP
-0004c190: 7269 6365 5369 676e 5374 7269 6e67 203d  riceSignString =
-0004c1a0: 2065 6e74 7279 5072 6963 6553 7472 696e   entryPriceStrin
-0004c1b0: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
-0004c1c0: 2020 6966 2073 6964 6520 3d3d 2027 7368    if side == 'sh
-0004c1d0: 6f72 7427 3a0a 2020 2020 2020 2020 2020  ort':.          
-0004c1e0: 2020 2020 2020 2020 2020 6f6e 6550 6c75            onePlu
-0004c1f0: 734d 6169 6e74 656e 616e 6365 4d61 7267  sMaintenanceMarg
-0004c200: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
-0004c210: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
-0004c220: 696e 675f 7375 6228 2731 272c 206d 6169  ing_sub('1', mai
-0004c230: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004c240: 7263 656e 7461 6765 5374 7269 6e67 290a  rcentageString).
-0004c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c260: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0004c270: 2020 2020 2020 2020 2020 6f6e 6550 6c75            onePlu
-0004c280: 734d 6169 6e74 656e 616e 6365 4d61 7267  sMaintenanceMarg
-0004c290: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
-0004c2a0: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
-0004c2b0: 696e 675f 7375 6228 272d 3127 2c20 6d61  ing_sub('-1', ma
-0004c2c0: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-0004c2d0: 6572 6365 6e74 6167 6553 7472 696e 6729  ercentageString)
-0004c2e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004c2f0: 2020 2020 2065 6e74 7279 5072 6963 6553       entryPriceS
-0004c300: 6967 6e53 7472 696e 6720 3d20 5072 6563  ignString = Prec
-0004c310: 6973 652e 7374 7269 6e67 5f6d 756c 2827  ise.string_mul('
-0004c320: 2d31 272c 2065 6e74 7279 5072 6963 6553  -1', entryPriceS
-0004c330: 6967 6e53 7472 696e 6729 0a20 2020 2020  ignString).     
-0004c340: 2020 2020 2020 2020 2020 206c 6566 7453             leftS
-0004c350: 6964 6520 3d20 5072 6563 6973 652e 7374  ide = Precise.st
-0004c360: 7269 6e67 5f6d 756c 2863 6f6e 7472 6163  ring_mul(contrac
-0004c370: 7473 4162 732c 2063 6f6e 7472 6163 7453  tsAbs, contractS
-0004c380: 697a 6553 7472 696e 6729 0a20 2020 2020  izeString).     
-0004c390: 2020 2020 2020 2020 2020 2072 6967 6874             right
-0004c3a0: 5369 6465 203d 2050 7265 6369 7365 2e73  Side = Precise.s
-0004c3b0: 7472 696e 675f 7375 6228 5072 6563 6973  tring_sub(Precis
-0004c3c0: 652e 7374 7269 6e67 5f64 6976 2827 3127  e.string_div('1'
-0004c3d0: 2c20 656e 7472 7950 7269 6365 5369 676e  , entryPriceSign
-0004c3e0: 5374 7269 6e67 292c 2050 7265 6369 7365  String), Precise
-0004c3f0: 2e73 7472 696e 675f 6469 7628 6f6e 6550  .string_div(oneP
-0004c400: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-0004c410: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-0004c420: 7269 6e67 2c20 6c69 7175 6964 6174 696f  ring, liquidatio
-0004c430: 6e50 7269 6365 5374 7269 6e67 2929 0a20  nPriceString)). 
-0004c440: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0004c450: 6173 6550 7265 6369 7369 6f6e 203d 2073  asePrecision = s
-0004c460: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
-0004c470: 2870 7265 6369 7369 6f6e 2c20 2762 6173  (precision, 'bas
-0004c480: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
-0004c490: 2020 2020 6966 2062 6173 6550 7265 6369      if basePreci
-0004c4a0: 7369 6f6e 2069 7320 6e6f 7420 4e6f 6e65  sion is not None
-0004c4b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0004c4c0: 2020 2020 2020 636f 6c6c 6174 6572 616c        collateral
-0004c4d0: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
-0004c4e0: 2e73 7472 696e 675f 6469 7628 5072 6563  .string_div(Prec
-0004c4f0: 6973 652e 7374 7269 6e67 5f6d 756c 286c  ise.string_mul(l
-0004c500: 6566 7453 6964 652c 2072 6967 6874 5369  eftSide, rightSi
-0004c510: 6465 292c 2027 3127 2c20 6261 7365 5072  de), '1', basePr
-0004c520: 6563 6973 696f 6e29 0a20 2020 2020 2020  ecision).       
-0004c530: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0004c540: 2020 2063 6f6c 6c61 7465 7261 6c53 7472     collateralStr
-0004c550: 696e 6720 3d20 7365 6c66 2e73 6166 655f  ing = self.safe_
-0004c560: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
-0004c570: 2027 6973 6f6c 6174 6564 4d61 7267 696e   'isolatedMargin
-0004c580: 2729 0a20 2020 2020 2020 2063 6f6c 6c61  ').        colla
-0004c590: 7465 7261 6c53 7472 696e 6720 3d20 2730  teralString = '0
-0004c5a0: 2720 6966 2028 636f 6c6c 6174 6572 616c  ' if (collateral
-0004c5b0: 5374 7269 6e67 2069 7320 4e6f 6e65 2920  String is None) 
-0004c5c0: 656c 7365 2063 6f6c 6c61 7465 7261 6c53  else collateralS
-0004c5d0: 7472 696e 670a 2020 2020 2020 2020 636f  tring.        co
-0004c5e0: 6c6c 6174 6572 616c 203d 2073 656c 662e  llateral = self.
-0004c5f0: 7061 7273 655f 6e75 6d62 6572 2863 6f6c  parse_number(col
-0004c600: 6c61 7465 7261 6c53 7472 696e 6729 0a20  lateralString). 
-0004c610: 2020 2020 2020 206d 6172 6b50 7269 6365         markPrice
-0004c620: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
-0004c630: 6d62 6572 2873 656c 662e 6f6d 6974 5f7a  mber(self.omit_z
-0004c640: 6572 6f28 7365 6c66 2e73 6166 655f 7374  ero(self.safe_st
-0004c650: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
-0004c660: 6d61 726b 5072 6963 6527 2929 290a 2020  markPrice'))).  
-0004c670: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-0004c680: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-0004c690: 6765 7228 706f 7369 7469 6f6e 2c20 2775  ger(position, 'u
-0004c6a0: 7064 6174 6554 696d 6527 290a 2020 2020  pdateTime').    
-0004c6b0: 2020 2020 6966 2074 696d 6573 7461 6d70      if timestamp
-0004c6c0: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
-0004c6d0: 2020 2074 696d 6573 7461 6d70 203d 204e     timestamp = N
-0004c6e0: 6f6e 650a 2020 2020 2020 2020 6d61 696e  one.        main
-0004c6f0: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-0004c700: 6365 6e74 6167 6520 3d20 7365 6c66 2e70  centage = self.p
-0004c710: 6172 7365 5f6e 756d 6265 7228 6d61 696e  arse_number(main
-0004c720: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-0004c730: 6365 6e74 6167 6553 7472 696e 6729 0a20  centageString). 
-0004c740: 2020 2020 2020 206d 6169 6e74 656e 616e         maintenan
-0004c750: 6365 4d61 7267 696e 5374 7269 6e67 203d  ceMarginString =
-0004c760: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004c770: 6d75 6c28 6d61 696e 7465 6e61 6e63 654d  mul(maintenanceM
-0004c780: 6172 6769 6e50 6572 6365 6e74 6167 6553  arginPercentageS
-0004c790: 7472 696e 672c 206e 6f74 696f 6e61 6c53  tring, notionalS
-0004c7a0: 7472 696e 6741 6273 290a 2020 2020 2020  tringAbs).      
-0004c7b0: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
-0004c7c0: 6769 6e20 3d20 7365 6c66 2e70 6172 7365  gin = self.parse
-0004c7d0: 5f6e 756d 6265 7228 6d61 696e 7465 6e61  _number(maintena
-0004c7e0: 6e63 654d 6172 6769 6e53 7472 696e 6729  nceMarginString)
-0004c7f0: 0a20 2020 2020 2020 2069 6e69 7469 616c  .        initial
-0004c800: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
-0004c810: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
-0004c820: 2e73 7472 696e 675f 6469 7628 2731 272c  .string_div('1',
-0004c830: 206c 6576 6572 6167 6553 7472 696e 672c   leverageString,
-0004c840: 2038 290a 2020 2020 2020 2020 7261 7469   8).        rati
-0004c850: 6f6e 616c 203d 2028 3130 3030 2025 206c  onal = (1000 % l
-0004c860: 6576 6572 6167 6529 203d 3d20 300a 2020  everage) == 0.  
-0004c870: 2020 2020 2020 6966 206e 6f74 2072 6174        if not rat
-0004c880: 696f 6e61 6c3a 0a20 2020 2020 2020 2020  ional:.         
-0004c890: 2020 2069 6e69 7469 616c 4d61 7267 696e     initialMargin
-0004c8a0: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
-0004c8b0: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-0004c8c0: 675f 6164 6428 696e 6974 6961 6c4d 6172  g_add(initialMar
-0004c8d0: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
-0004c8e0: 696e 672c 2027 3165 2d38 2729 0a20 2020  ing, '1e-8').   
-0004c8f0: 2020 2020 2069 6e69 7469 616c 4d61 7267       initialMarg
-0004c900: 696e 5374 7269 6e67 203d 2050 7265 6369  inString = Preci
-0004c910: 7365 2e73 7472 696e 675f 6469 7628 5072  se.string_div(Pr
-0004c920: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
-0004c930: 286e 6f74 696f 6e61 6c53 7472 696e 6741  (notionalStringA
-0004c940: 6273 2c20 696e 6974 6961 6c4d 6172 6769  bs, initialMargi
-0004c950: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
-0004c960: 6729 2c20 2731 272c 2038 290a 2020 2020  g), '1', 8).    
-0004c970: 2020 2020 696e 6974 6961 6c4d 6172 6769      initialMargi
-0004c980: 6e20 3d20 7365 6c66 2e70 6172 7365 5f6e  n = self.parse_n
-0004c990: 756d 6265 7228 696e 6974 6961 6c4d 6172  umber(initialMar
-0004c9a0: 6769 6e53 7472 696e 6729 0a20 2020 2020  ginString).     
-0004c9b0: 2020 206d 6172 6769 6e52 6174 696f 203d     marginRatio =
-0004c9c0: 204e 6f6e 650a 2020 2020 2020 2020 7065   None.        pe
-0004c9d0: 7263 656e 7461 6765 203d 204e 6f6e 650a  rcentage = None.
-0004c9e0: 2020 2020 2020 2020 6966 206e 6f74 2050          if not P
-0004c9f0: 7265 6369 7365 2e73 7472 696e 675f 6571  recise.string_eq
-0004ca00: 7561 6c73 2863 6f6c 6c61 7465 7261 6c53  uals(collateralS
-0004ca10: 7472 696e 672c 2027 3027 293a 0a20 2020  tring, '0'):.   
-0004ca20: 2020 2020 2020 2020 206d 6172 6769 6e52           marginR
-0004ca30: 6174 696f 203d 2073 656c 662e 7061 7273  atio = self.pars
-0004ca40: 655f 6e75 6d62 6572 2850 7265 6369 7365  e_number(Precise
-0004ca50: 2e73 7472 696e 675f 6469 7628 5072 6563  .string_div(Prec
-0004ca60: 6973 652e 7374 7269 6e67 5f61 6464 2850  ise.string_add(P
-0004ca70: 7265 6369 7365 2e73 7472 696e 675f 6469  recise.string_di
-0004ca80: 7628 6d61 696e 7465 6e61 6e63 654d 6172  v(maintenanceMar
-0004ca90: 6769 6e53 7472 696e 672c 2063 6f6c 6c61  ginString, colla
-0004caa0: 7465 7261 6c53 7472 696e 6729 2c20 2735  teralString), '5
-0004cab0: 652d 3527 292c 2027 3127 2c20 3429 290a  e-5'), '1', 4)).
-0004cac0: 2020 2020 2020 2020 2020 2020 7065 7263              perc
-0004cad0: 656e 7461 6765 203d 2073 656c 662e 7061  entage = self.pa
-0004cae0: 7273 655f 6e75 6d62 6572 2850 7265 6369  rse_number(Preci
-0004caf0: 7365 2e73 7472 696e 675f 6d75 6c28 5072  se.string_mul(Pr
-0004cb00: 6563 6973 652e 7374 7269 6e67 5f64 6976  ecise.string_div
-0004cb10: 2875 6e72 6561 6c69 7a65 6450 6e6c 5374  (unrealizedPnlSt
-0004cb20: 7269 6e67 2c20 696e 6974 6961 6c4d 6172  ring, initialMar
-0004cb30: 6769 6e53 7472 696e 672c 2034 292c 2027  ginString, 4), '
-0004cb40: 3130 3027 2929 0a20 2020 2020 2020 2070  100')).        p
-0004cb50: 6f73 6974 696f 6e53 6964 6520 3d20 7365  ositionSide = se
-0004cb60: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-0004cb70: 6f73 6974 696f 6e2c 2027 706f 7369 7469  osition, 'positi
-0004cb80: 6f6e 5369 6465 2729 0a20 2020 2020 2020  onSide').       
-0004cb90: 2068 6564 6765 6420 3d20 706f 7369 7469   hedged = positi
-0004cba0: 6f6e 5369 6465 2021 3d20 2742 4f54 4827  onSide != 'BOTH'
-0004cbb0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0004cbc0: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
-0004cbd0: 6e66 6f27 3a20 706f 7369 7469 6f6e 2c0a  nfo': position,.
-0004cbe0: 2020 2020 2020 2020 2020 2020 2769 6427              'id'
-0004cbf0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-0004cc00: 2020 2020 2773 796d 626f 6c27 3a20 7379      'symbol': sy
-0004cc10: 6d62 6f6c 2c0a 2020 2020 2020 2020 2020  mbol,.          
-0004cc20: 2020 2763 6f6e 7472 6163 7473 273a 2063    'contracts': c
-0004cc30: 6f6e 7472 6163 7473 2c0a 2020 2020 2020  ontracts,.      
-0004cc40: 2020 2020 2020 2763 6f6e 7472 6163 7453        'contractS
-0004cc50: 697a 6527 3a20 636f 6e74 7261 6374 5369  ize': contractSi
-0004cc60: 7a65 2c0a 2020 2020 2020 2020 2020 2020  ze,.            
-0004cc70: 2775 6e72 6561 6c69 7a65 6450 6e6c 273a  'unrealizedPnl':
-0004cc80: 2075 6e72 6561 6c69 7a65 6450 6e6c 2c0a   unrealizedPnl,.
-0004cc90: 2020 2020 2020 2020 2020 2020 276c 6576              'lev
-0004cca0: 6572 6167 6527 3a20 7365 6c66 2e70 6172  erage': self.par
-0004ccb0: 7365 5f6e 756d 6265 7228 6c65 7665 7261  se_number(levera
-0004ccc0: 6765 5374 7269 6e67 292c 0a20 2020 2020  geString),.     
-0004ccd0: 2020 2020 2020 2027 6c69 7175 6964 6174         'liquidat
-0004cce0: 696f 6e50 7269 6365 273a 206c 6971 7569  ionPrice': liqui
-0004ccf0: 6461 7469 6f6e 5072 6963 652c 0a20 2020  dationPrice,.   
-0004cd00: 2020 2020 2020 2020 2027 636f 6c6c 6174           'collat
-0004cd10: 6572 616c 273a 2063 6f6c 6c61 7465 7261  eral': collatera
-0004cd20: 6c2c 0a20 2020 2020 2020 2020 2020 2027  l,.            '
-0004cd30: 6e6f 7469 6f6e 616c 273a 206e 6f74 696f  notional': notio
-0004cd40: 6e61 6c2c 0a20 2020 2020 2020 2020 2020  nal,.           
-0004cd50: 2027 6d61 726b 5072 6963 6527 3a20 6d61   'markPrice': ma
-0004cd60: 726b 5072 6963 652c 0a20 2020 2020 2020  rkPrice,.       
-0004cd70: 2020 2020 2027 656e 7472 7950 7269 6365       'entryPrice
-0004cd80: 273a 2065 6e74 7279 5072 6963 652c 0a20  ': entryPrice,. 
-0004cd90: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-0004cda0: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
-0004cdb0: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
-0004cdc0: 696e 6974 6961 6c4d 6172 6769 6e27 3a20  initialMargin': 
-0004cdd0: 696e 6974 6961 6c4d 6172 6769 6e2c 0a20  initialMargin,. 
-0004cde0: 2020 2020 2020 2020 2020 2027 696e 6974             'init
-0004cdf0: 6961 6c4d 6172 6769 6e50 6572 6365 6e74  ialMarginPercent
-0004ce00: 6167 6527 3a20 7365 6c66 2e70 6172 7365  age': self.parse
-0004ce10: 5f6e 756d 6265 7228 696e 6974 6961 6c4d  _number(initialM
-0004ce20: 6172 6769 6e50 6572 6365 6e74 6167 6553  arginPercentageS
-0004ce30: 7472 696e 6729 2c0a 2020 2020 2020 2020  tring),.        
-0004ce40: 2020 2020 276d 6169 6e74 656e 616e 6365      'maintenance
-0004ce50: 4d61 7267 696e 273a 206d 6169 6e74 656e  Margin': mainten
-0004ce60: 616e 6365 4d61 7267 696e 2c0a 2020 2020  anceMargin,.    
-0004ce70: 2020 2020 2020 2020 276d 6169 6e74 656e          'mainten
-0004ce80: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-0004ce90: 7461 6765 273a 206d 6169 6e74 656e 616e  tage': maintenan
-0004cea0: 6365 4d61 7267 696e 5065 7263 656e 7461  ceMarginPercenta
-0004ceb0: 6765 2c0a 2020 2020 2020 2020 2020 2020  ge,.            
-0004cec0: 276d 6172 6769 6e52 6174 696f 273a 206d  'marginRatio': m
-0004ced0: 6172 6769 6e52 6174 696f 2c0a 2020 2020  arginRatio,.    
-0004cee0: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-0004cef0: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-0004cf00: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
-0004cf10: 2020 2020 2020 2020 2027 6d61 7267 696e           'margin
-0004cf20: 4d6f 6465 273a 206d 6172 6769 6e4d 6f64  Mode': marginMod
-0004cf30: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0004cf40: 6d61 7267 696e 5479 7065 273a 206d 6172  marginType': mar
-0004cf50: 6769 6e4d 6f64 652c 2020 2320 6465 7072  ginMode,  # depr
-0004cf60: 6563 6174 6564 0a20 2020 2020 2020 2020  ecated.         
-0004cf70: 2020 2027 7369 6465 273a 2073 6964 652c     'side': side,
-0004cf80: 0a20 2020 2020 2020 2020 2020 2027 6865  .            'he
-0004cf90: 6467 6564 273a 2068 6564 6765 642c 0a20  dged': hedged,. 
-0004cfa0: 2020 2020 2020 2020 2020 2027 7065 7263             'perc
-0004cfb0: 656e 7461 6765 273a 2070 6572 6365 6e74  entage': percent
-0004cfc0: 6167 652c 0a20 2020 2020 2020 207d 0a0a  age,.        }..
-0004cfd0: 2020 2020 6173 796e 6320 6465 6620 6c6f      async def lo
-0004cfe0: 6164 5f6c 6576 6572 6167 655f 6272 6163  ad_leverage_brac
-0004cff0: 6b65 7473 2873 656c 662c 2072 656c 6f61  kets(self, reloa
-0004d000: 643d 4661 6c73 652c 2070 6172 616d 733d  d=False, params=
-0004d010: 7b7d 293a 0a20 2020 2020 2020 2061 7761  {}):.        awa
-0004d020: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
-0004d030: 6b65 7473 2829 0a20 2020 2020 2020 2023  kets().        #
-0004d040: 2062 7920 6465 6661 756c 7420 6361 6368   by default cach
-0004d050: 6520 7468 6520 6c65 7665 7261 6765 2062  e the leverage b
-0004d060: 7261 636b 6574 0a20 2020 2020 2020 2023  racket.        #
-0004d070: 2069 7420 636f 6e74 6169 6e73 2075 7365   it contains use
-0004d080: 6675 6c20 7374 7566 6620 6c69 6b65 2074  ful stuff like t
-0004d090: 6865 206d 6169 6e74 656e 616e 6365 206d  he maintenance m
-0004d0a0: 6172 6769 6e20 616e 6420 696e 6974 6961  argin and initia
-0004d0b0: 6c20 6d61 7267 696e 2066 6f72 2070 6f73  l margin for pos
-0004d0c0: 6974 696f 6e73 0a20 2020 2020 2020 206c  itions.        l
-0004d0d0: 6576 6572 6167 6542 7261 636b 6574 7320  everageBrackets 
-0004d0e0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0004d0f0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
-0004d100: 276c 6576 6572 6167 6542 7261 636b 6574  'leverageBracket
-0004d110: 7327 290a 2020 2020 2020 2020 6966 2028  s').        if (
-0004d120: 6c65 7665 7261 6765 4272 6163 6b65 7473  leverageBrackets
-0004d130: 2069 7320 4e6f 6e65 2920 6f72 2028 7265   is None) or (re
-0004d140: 6c6f 6164 293a 0a20 2020 2020 2020 2020  load):.         
-0004d150: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
-0004d160: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-0004d170: 6175 6c74 5479 7065 203d 2073 656c 662e  aultType = self.
-0004d180: 7361 6665 5f73 7472 696e 6728 7365 6c66  safe_string(self
-0004d190: 2e6f 7074 696f 6e73 2c20 2764 6566 6175  .options, 'defau
-0004d1a0: 6c74 5479 7065 272c 2027 6675 7475 7265  ltType', 'future
-0004d1b0: 2729 0a20 2020 2020 2020 2020 2020 2074  ').            t
-0004d1c0: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
-0004d1d0: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-0004d1e0: 7479 7065 272c 2064 6566 6175 6c74 5479  type', defaultTy
-0004d1f0: 7065 290a 2020 2020 2020 2020 2020 2020  pe).            
-0004d200: 7175 6572 7920 3d20 7365 6c66 2e6f 6d69  query = self.omi
-0004d210: 7428 7061 7261 6d73 2c20 2774 7970 6527  t(params, 'type'
-0004d220: 290a 2020 2020 2020 2020 2020 2020 7375  ).            su
-0004d230: 6254 7970 6520 3d20 4e6f 6e65 0a20 2020  bType = None.   
-0004d240: 2020 2020 2020 2020 2073 7562 5479 7065           subType
-0004d250: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
-0004d260: 6861 6e64 6c65 5f73 7562 5f74 7970 655f  handle_sub_type_
-0004d270: 616e 645f 7061 7261 6d73 2827 6c6f 6164  and_params('load
-0004d280: 4c65 7665 7261 6765 4272 6163 6b65 7473  LeverageBrackets
-0004d290: 272c 204e 6f6e 652c 2070 6172 616d 732c  ', None, params,
-0004d2a0: 2027 6c69 6e65 6172 2729 0a20 2020 2020   'linear').     
-0004d2b0: 2020 2020 2020 2069 6620 7365 6c66 2e69         if self.i
-0004d2c0: 735f 6c69 6e65 6172 2874 7970 652c 2073  s_linear(type, s
-0004d2d0: 7562 5479 7065 293a 0a20 2020 2020 2020  ubType):.       
-0004d2e0: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-0004d2f0: 3d20 2766 6170 6950 7269 7661 7465 4765  = 'fapiPrivateGe
-0004d300: 744c 6576 6572 6167 6542 7261 636b 6574  tLeverageBracket
-0004d310: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
-0004d320: 6966 2073 656c 662e 6973 5f69 6e76 6572  if self.is_inver
-0004d330: 7365 2874 7970 652c 2073 7562 5479 7065  se(type, subType
-0004d340: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0004d350: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
-0004d360: 6950 7269 7661 7465 5632 4765 744c 6576  iPrivateV2GetLev
-0004d370: 6572 6167 6542 7261 636b 6574 270a 2020  erageBracket'.  
-0004d380: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0004d390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d3a0: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-0004d3b0: 6564 2873 656c 662e 6964 202b 2027 206c  ed(self.id + ' l
-0004d3c0: 6f61 644c 6576 6572 6167 6542 7261 636b  oadLeverageBrack
-0004d3d0: 6574 7328 2920 7375 7070 6f72 7473 206c  ets() supports l
-0004d3e0: 696e 6561 7220 616e 6420 696e 7665 7273  inear and invers
-0004d3f0: 6520 636f 6e74 7261 6374 7320 6f6e 6c79  e contracts only
-0004d400: 2729 0a20 2020 2020 2020 2020 2020 2072  ').            r
-0004d410: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
-0004d420: 6765 7461 7474 7228 7365 6c66 2c20 6d65  getattr(self, me
-0004d430: 7468 6f64 2928 7175 6572 7929 0a20 2020  thod)(query).   
-0004d440: 2020 2020 2020 2020 2073 656c 662e 6f70           self.op
-0004d450: 7469 6f6e 735b 276c 6576 6572 6167 6542  tions['leverageB
-0004d460: 7261 636b 6574 7327 5d20 3d20 7b7d 0a20  rackets'] = {}. 
-0004d470: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0004d480: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
-0004d490: 2872 6573 706f 6e73 6529 293a 0a20 2020  (response)):.   
-0004d4a0: 2020 2020 2020 2020 2020 2020 2065 6e74               ent
-0004d4b0: 7279 203d 2072 6573 706f 6e73 655b 695d  ry = response[i]
-0004d4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004d4d0: 206d 6172 6b65 7449 6420 3d20 7365 6c66   marketId = self
-0004d4e0: 2e73 6166 655f 7374 7269 6e67 2865 6e74  .safe_string(ent
-0004d4f0: 7279 2c20 2773 796d 626f 6c27 290a 2020  ry, 'symbol').  
-0004d500: 2020 2020 2020 2020 2020 2020 2020 7379                sy
-0004d510: 6d62 6f6c 203d 2073 656c 662e 7361 6665  mbol = self.safe
-0004d520: 5f73 796d 626f 6c28 6d61 726b 6574 4964  _symbol(marketId
-0004d530: 2c20 4e6f 6e65 2c20 4e6f 6e65 2c20 2763  , None, None, 'c
-0004d540: 6f6e 7472 6163 7427 290a 2020 2020 2020  ontract').      
-0004d550: 2020 2020 2020 2020 2020 6272 6163 6b65            bracke
-0004d560: 7473 203d 2073 656c 662e 7361 6665 5f76  ts = self.safe_v
-0004d570: 616c 7565 2865 6e74 7279 2c20 2762 7261  alue(entry, 'bra
-0004d580: 636b 6574 7327 2c20 5b5d 290a 2020 2020  ckets', []).    
-0004d590: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0004d5a0: 6c74 203d 205b 5d0a 2020 2020 2020 2020  lt = [].        
-0004d5b0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
-0004d5c0: 2072 616e 6765 2830 2c20 6c65 6e28 6272   range(0, len(br
-0004d5d0: 6163 6b65 7473 2929 3a0a 2020 2020 2020  ackets)):.      
-0004d5e0: 2020 2020 2020 2020 2020 2020 2020 6272                br
-0004d5f0: 6163 6b65 7420 3d20 6272 6163 6b65 7473  acket = brackets
-0004d600: 5b6a 5d0a 2020 2020 2020 2020 2020 2020  [j].            
-0004d610: 2020 2020 2020 2020 666c 6f6f 7256 616c          floorVal
-0004d620: 7565 203d 2073 656c 662e 7361 6665 5f73  ue = self.safe_s
-0004d630: 7472 696e 675f 3228 6272 6163 6b65 742c  tring_2(bracket,
-0004d640: 2027 6e6f 7469 6f6e 616c 466c 6f6f 7227   'notionalFloor'
-0004d650: 2c20 2771 7479 466c 6f6f 7227 290a 2020  , 'qtyFloor').  
-0004d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d670: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
-0004d680: 6769 6e50 6572 6365 6e74 6167 6520 3d20  ginPercentage = 
-0004d690: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0004d6a0: 2862 7261 636b 6574 2c20 276d 6169 6e74  (bracket, 'maint
-0004d6b0: 4d61 7267 696e 5261 7469 6f27 290a 2020  MarginRatio').  
-0004d6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d6d0: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
-0004d6e0: 5b66 6c6f 6f72 5661 6c75 652c 206d 6169  [floorValue, mai
-0004d6f0: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004d700: 7263 656e 7461 6765 5d29 0a20 2020 2020  rcentage]).     
-0004d710: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0004d720: 6f70 7469 6f6e 735b 276c 6576 6572 6167  options['leverag
-0004d730: 6542 7261 636b 6574 7327 5d5b 7379 6d62  eBrackets'][symb
-0004d740: 6f6c 5d20 3d20 7265 7375 6c74 0a20 2020  ol] = result.   
-0004d750: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0004d760: 2e6f 7074 696f 6e73 5b27 6c65 7665 7261  .options['levera
-0004d770: 6765 4272 6163 6b65 7473 275d 0a0a 2020  geBrackets']..  
-0004d780: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-0004d790: 685f 6c65 7665 7261 6765 5f74 6965 7273  h_leverage_tiers
-0004d7a0: 2873 656c 662c 2073 796d 626f 6c73 3a20  (self, symbols: 
-0004d7b0: 4f70 7469 6f6e 616c 5b4c 6973 745b 7374  Optional[List[st
-0004d7c0: 725d 5d20 3d20 4e6f 6e65 2c20 7061 7261  r]] = None, para
-0004d7d0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-0004d7e0: 2222 220a 2020 2020 2020 2020 7265 7472  """.        retr
-0004d7f0: 6965 7665 2069 6e66 6f72 6d61 7469 6f6e  ieve information
-0004d800: 206f 6e20 7468 6520 6d61 7869 6d75 6d20   on the maximum 
-0004d810: 6c65 7665 7261 6765 2c20 616e 6420 6d61  leverage, and ma
-0004d820: 696e 7465 6e61 6e63 6520 6d61 7267 696e  intenance margin
-0004d830: 2066 6f72 2074 7261 6465 7320 6f66 2076   for trades of v
-0004d840: 6172 7969 6e67 2074 7261 6465 2073 697a  arying trade siz
-0004d850: 6573 0a20 2020 2020 2020 203a 7061 7261  es.        :para
-0004d860: 6d20 5b73 7472 5d7c 4e6f 6e65 2073 796d  m [str]|None sym
-0004d870: 626f 6c73 3a20 6c69 7374 206f 6620 756e  bols: list of un
-0004d880: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-0004d890: 626f 6c73 0a20 2020 2020 2020 203a 7061  bols.        :pa
-0004d8a0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-0004d8b0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-0004d8c0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-0004d8d0: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-0004d8e0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-0004d8f0: 7265 7475 726e 7320 6469 6374 3a20 6120  returns dict: a 
-0004d900: 6469 6374 696f 6e61 7279 206f 6620 606c  dictionary of `l
-0004d910: 6576 6572 6167 6520 7469 6572 7320 7374  everage tiers st
-0004d920: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
-0004d930: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0004d940: 232f 3f69 643d 6c65 7665 7261 6765 2d74  #/?id=leverage-t
-0004d950: 6965 7273 2d73 7472 7563 7475 7265 3e60  iers-structure>`
-0004d960: 2c20 696e 6465 7865 6420 6279 206d 6172  , indexed by mar
-0004d970: 6b65 7420 7379 6d62 6f6c 730a 2020 2020  ket symbols.    
-0004d980: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0004d990: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-0004d9a0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-0004d9b0: 2020 7479 7065 2c20 7175 6572 7920 3d20    type, query = 
-0004d9c0: 7365 6c66 2e68 616e 646c 655f 6d61 726b  self.handle_mark
-0004d9d0: 6574 5f74 7970 655f 616e 645f 7061 7261  et_type_and_para
-0004d9e0: 6d73 2827 6665 7463 684c 6576 6572 6167  ms('fetchLeverag
-0004d9f0: 6554 6965 7273 272c 204e 6f6e 652c 2070  eTiers', None, p
-0004da00: 6172 616d 7329 0a20 2020 2020 2020 2073  arams).        s
-0004da10: 7562 5479 7065 203d 204e 6f6e 650a 2020  ubType = None.  
-0004da20: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
-0004da30: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-0004da40: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-0004da50: 5f70 6172 616d 7328 2766 6574 6368 4c65  _params('fetchLe
-0004da60: 7665 7261 6765 5469 6572 7327 2c20 4e6f  verageTiers', No
-0004da70: 6e65 2c20 7175 6572 792c 2027 6c69 6e65  ne, query, 'line
-0004da80: 6172 2729 0a20 2020 2020 2020 206d 6574  ar').        met
-0004da90: 686f 6420 3d20 4e6f 6e65 0a20 2020 2020  hod = None.     
-0004daa0: 2020 2069 6620 7365 6c66 2e69 735f 6c69     if self.is_li
-0004dab0: 6e65 6172 2874 7970 652c 2073 7562 5479  near(type, subTy
-0004dac0: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
-0004dad0: 206d 6574 686f 6420 3d20 2766 6170 6950   method = 'fapiP
-0004dae0: 7269 7661 7465 4765 744c 6576 6572 6167  rivateGetLeverag
-0004daf0: 6542 7261 636b 6574 270a 2020 2020 2020  eBracket'.      
-0004db00: 2020 656c 6966 2073 656c 662e 6973 5f69    elif self.is_i
-0004db10: 6e76 6572 7365 2874 7970 652c 2073 7562  nverse(type, sub
-0004db20: 5479 7065 293a 0a20 2020 2020 2020 2020  Type):.         
-0004db30: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
-0004db40: 6950 7269 7661 7465 5632 4765 744c 6576  iPrivateV2GetLev
-0004db50: 6572 6167 6542 7261 636b 6574 270a 2020  erageBracket'.  
-0004db60: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0004db70: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
-0004db80: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
-0004db90: 6964 202b 2027 2066 6574 6368 4c65 7665  id + ' fetchLeve
-0004dba0: 7261 6765 5469 6572 7328 2920 7375 7070  rageTiers() supp
-0004dbb0: 6f72 7473 206c 696e 6561 7220 616e 6420  orts linear and 
-0004dbc0: 696e 7665 7273 6520 636f 6e74 7261 6374  inverse contract
-0004dbd0: 7320 6f6e 6c79 2729 0a20 2020 2020 2020  s only').       
-0004dbe0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-0004dbf0: 7420 6765 7461 7474 7228 7365 6c66 2c20  t getattr(self, 
-0004dc00: 6d65 7468 6f64 2928 7175 6572 7929 0a20  method)(query). 
-0004dc10: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0004dc20: 2023 2075 7364 6d0a 2020 2020 2020 2020   # usdm.        
-0004dc30: 230a 2020 2020 2020 2020 2320 2020 205b  #.        #    [
-0004dc40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004dc50: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0004dc60: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-0004dc70: 223a 2022 5355 5348 4955 5344 5422 2c0a  ": "SUSHIUSDT",.
-0004dc80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004dc90: 2020 2020 2022 6272 6163 6b65 7473 223a       "brackets":
-0004dca0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-0004dcb0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0004dcc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004dcd0: 2020 2020 2020 2020 2020 2022 6272 6163             "brac
-0004dce0: 6b65 7422 3a20 312c 0a20 2020 2020 2020  ket": 1,.       
-0004dcf0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004dd00: 2020 2020 2020 2269 6e69 7469 616c 4c65        "initialLe
-0004dd10: 7665 7261 6765 223a 2035 302c 0a20 2020  verage": 50,.   
-0004dd20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004dd30: 2020 2020 2020 2020 2020 226e 6f74 696f            "notio
-0004dd40: 6e61 6c43 6170 223a 2035 3030 3030 2c0a  nalCap": 50000,.
-0004dd50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004dd60: 2020 2020 2020 2020 2020 2020 2022 6e6f               "no
-0004dd70: 7469 6f6e 616c 466c 6f6f 7222 3a20 302c  tionalFloor": 0,
-0004dd80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004dd90: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-0004dda0: 6169 6e74 4d61 7267 696e 5261 7469 6f22  aintMarginRatio"
-0004ddb0: 3a20 302e 3031 2c0a 2020 2020 2020 2020  : 0.01,.        
-0004ddc0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004ddd0: 2020 2020 2022 6375 6d22 3a20 302e 300a       "cum": 0.0.
-0004dde0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004ddf0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-0004de00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004de10: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
-0004de20: 2023 2020 2020 2020 2020 2020 2020 5d0a   #            ].
-0004de30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004de40: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-0004de50: 5d0a 2020 2020 2020 2020 230a 2020 2020  ].        #.    
-0004de60: 2020 2020 2320 636f 696e 6d0a 2020 2020      # coinm.    
-0004de70: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0004de80: 2020 2020 5b0a 2020 2020 2020 2020 2320      [.        # 
-0004de90: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0004dea0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004deb0: 2273 796d 626f 6c22 3a22 5852 5055 5344  "symbol":"XRPUSD
-0004dec0: 5f32 3130 3332 3622 2c0a 2020 2020 2020  _210326",.      
-0004ded0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004dee0: 2262 7261 636b 6574 7322 3a5b 0a20 2020  "brackets":[.   
-0004def0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004df00: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0004df10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004df20: 2020 2020 2020 2022 6272 6163 6b65 7422         "bracket"
-0004df30: 3a31 2c0a 2020 2020 2020 2020 2320 2020  :1,.        #   
-0004df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004df50: 2020 2269 6e69 7469 616c 4c65 7665 7261    "initialLevera
-0004df60: 6765 223a 3230 2c0a 2020 2020 2020 2020  ge":20,.        
-0004df70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004df80: 2020 2020 2020 2271 7479 4361 7022 3a35        "qtyCap":5
-0004df90: 3030 3030 302c 0a20 2020 2020 2020 2023  00000,.        #
-0004dfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dfb0: 2020 2020 2022 7174 7946 6c6f 6f72 223a       "qtyFloor":
-0004dfc0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-0004dfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dfe0: 2022 6d61 696e 744d 6172 6769 6e52 6174   "maintMarginRat
-0004dff0: 696f 223a 302e 3031 3835 2c0a 2020 2020  io":0.0185,.    
-0004e000: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004e010: 2020 2020 2020 2020 2020 2263 756d 223a            "cum":
-0004e020: 302e 300a 2020 2020 2020 2020 2320 2020  0.0.        #   
-0004e030: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0004e040: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004e050: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-0004e060: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
-0004e070: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
-0004e080: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-0004e090: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-0004e0a0: 6c65 7665 7261 6765 5f74 6965 7273 2872  leverage_tiers(r
-0004e0b0: 6573 706f 6e73 652c 2073 796d 626f 6c73  esponse, symbols
-0004e0c0: 2c20 2773 796d 626f 6c27 290a 0a20 2020  , 'symbol')..   
-0004e0d0: 2064 6566 2070 6172 7365 5f6d 6172 6b65   def parse_marke
-0004e0e0: 745f 6c65 7665 7261 6765 5f74 6965 7273  t_leverage_tiers
-0004e0f0: 2873 656c 662c 2069 6e66 6f2c 206d 6172  (self, info, mar
-0004e100: 6b65 743d 4e6f 6e65 293a 0a20 2020 2020  ket=None):.     
-0004e110: 2020 2022 2222 0a20 2020 2020 2020 2020     """.         
-0004e120: 2a20 4069 676e 6f72 650a 2020 2020 2020  * @ignore.      
-0004e130: 2020 3a70 6172 616d 2064 6963 7420 696e    :param dict in
-0004e140: 666f 3a20 4578 6368 616e 6765 2072 6573  fo: Exchange res
-0004e150: 706f 6e73 6520 666f 7220 3120 6d61 726b  ponse for 1 mark
-0004e160: 6574 0a20 2020 2020 2020 203a 7061 7261  et.        :para
-0004e170: 6d20 6469 6374 206d 6172 6b65 743a 2043  m dict market: C
-0004e180: 4358 5420 6d61 726b 6574 0a20 2020 2020  CXT market.     
-0004e190: 2020 2022 2222 0a20 2020 2020 2020 2023     """.        #
-0004e1a0: 0a20 2020 2020 2020 2023 2020 2020 7b0a  .        #    {.
-0004e1b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004e1c0: 2022 7379 6d62 6f6c 223a 2022 5355 5348   "symbol": "SUSH
-0004e1d0: 4955 5344 5422 2c0a 2020 2020 2020 2020  IUSDT",.        
-0004e1e0: 2320 2020 2020 2020 2022 6272 6163 6b65  #        "bracke
-0004e1f0: 7473 223a 205b 0a20 2020 2020 2020 2023  ts": [.        #
-0004e200: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0004e210: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004e220: 2020 2020 2020 2022 6272 6163 6b65 7422         "bracket"
-0004e230: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
-0004e240: 2020 2020 2020 2020 2020 2020 2020 2269                "i
-0004e250: 6e69 7469 616c 4c65 7665 7261 6765 223a  nitialLeverage":
-0004e260: 2035 302c 0a20 2020 2020 2020 2023 2020   50,.        #  
-0004e270: 2020 2020 2020 2020 2020 2020 2020 226e                "n
-0004e280: 6f74 696f 6e61 6c43 6170 223a 2035 3030  otionalCap": 500
-0004e290: 3030 2c0a 2020 2020 2020 2020 2320 2020  00,.        #   
-0004e2a0: 2020 2020 2020 2020 2020 2020 2022 6e6f               "no
-0004e2b0: 7469 6f6e 616c 466c 6f6f 7222 3a20 302c  tionalFloor": 0,
-0004e2c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004e2d0: 2020 2020 2020 2020 2020 226d 6169 6e74            "maint
-0004e2e0: 4d61 7267 696e 5261 7469 6f22 3a20 302e  MarginRatio": 0.
-0004e2f0: 3031 2c0a 2020 2020 2020 2020 2320 2020  01,.        #   
-0004e300: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
-0004e310: 6d22 3a20 302e 300a 2020 2020 2020 2020  m": 0.0.        
-0004e320: 2320 2020 2020 2020 2020 2020 207d 2c0a  #            },.
-0004e330: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004e340: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
-0004e350: 2023 2020 2020 2020 2020 5d0a 2020 2020   #        ].    
-0004e360: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
-0004e370: 2020 2023 0a20 2020 2020 2020 206d 6172     #.        mar
-0004e380: 6b65 7449 6420 3d20 7365 6c66 2e73 6166  ketId = self.saf
-0004e390: 655f 7374 7269 6e67 2869 6e66 6f2c 2027  e_string(info, '
-0004e3a0: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
-0004e3b0: 206d 6172 6b65 7420 3d20 7365 6c66 2e73   market = self.s
-0004e3c0: 6166 655f 6d61 726b 6574 286d 6172 6b65  afe_market(marke
-0004e3d0: 7449 642c 206d 6172 6b65 742c 204e 6f6e  tId, market, Non
-0004e3e0: 652c 2027 636f 6e74 7261 6374 2729 0a20  e, 'contract'). 
-0004e3f0: 2020 2020 2020 2062 7261 636b 6574 7320         brackets 
-0004e400: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0004e410: 6528 696e 666f 2c20 2762 7261 636b 6574  e(info, 'bracket
-0004e420: 7327 2c20 5b5d 290a 2020 2020 2020 2020  s', []).        
-0004e430: 7469 6572 7320 3d20 5b5d 0a20 2020 2020  tiers = [].     
-0004e440: 2020 2066 6f72 206a 2069 6e20 7261 6e67     for j in rang
-0004e450: 6528 302c 206c 656e 2862 7261 636b 6574  e(0, len(bracket
-0004e460: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-0004e470: 2062 7261 636b 6574 203d 2062 7261 636b   bracket = brack
-0004e480: 6574 735b 6a5d 0a20 2020 2020 2020 2020  ets[j].         
-0004e490: 2020 2074 6965 7273 2e61 7070 656e 6428     tiers.append(
-0004e4a0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0004e4b0: 2020 2774 6965 7227 3a20 7365 6c66 2e73    'tier': self.s
-0004e4c0: 6166 655f 6e75 6d62 6572 2862 7261 636b  afe_number(brack
-0004e4d0: 6574 2c20 2762 7261 636b 6574 2729 2c0a  et, 'bracket'),.
-0004e4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004e4f0: 2763 7572 7265 6e63 7927 3a20 6d61 726b  'currency': mark
-0004e500: 6574 5b27 7175 6f74 6527 5d2c 0a20 2020  et['quote'],.   
-0004e510: 2020 2020 2020 2020 2020 2020 2027 6d69               'mi
-0004e520: 6e4e 6f74 696f 6e61 6c27 3a20 7365 6c66  nNotional': self
-0004e530: 2e73 6166 655f 6e75 6d62 6572 5f32 2862  .safe_number_2(b
-0004e540: 7261 636b 6574 2c20 276e 6f74 696f 6e61  racket, 'notiona
-0004e550: 6c46 6c6f 6f72 272c 2027 7174 7946 6c6f  lFloor', 'qtyFlo
-0004e560: 6f72 2729 2c0a 2020 2020 2020 2020 2020  or'),.          
-0004e570: 2020 2020 2020 276d 6178 4e6f 7469 6f6e        'maxNotion
-0004e580: 616c 273a 2073 656c 662e 7361 6665 5f6e  al': self.safe_n
-0004e590: 756d 6265 725f 3228 6272 6163 6b65 742c  umber_2(bracket,
-0004e5a0: 2027 6e6f 7469 6f6e 616c 4361 7027 2c20   'notionalCap', 
-0004e5b0: 2771 7479 4361 7027 292c 0a20 2020 2020  'qtyCap'),.     
-0004e5c0: 2020 2020 2020 2020 2020 2027 6d61 696e             'main
-0004e5d0: 7465 6e61 6e63 654d 6172 6769 6e52 6174  tenanceMarginRat
-0004e5e0: 6527 3a20 7365 6c66 2e73 6166 655f 6e75  e': self.safe_nu
-0004e5f0: 6d62 6572 2862 7261 636b 6574 2c20 276d  mber(bracket, 'm
-0004e600: 6169 6e74 4d61 7267 696e 5261 7469 6f27  aintMarginRatio'
-0004e610: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-0004e620: 2020 2027 6d61 784c 6576 6572 6167 6527     'maxLeverage'
-0004e630: 3a20 7365 6c66 2e73 6166 655f 6e75 6d62  : self.safe_numb
-0004e640: 6572 2862 7261 636b 6574 2c20 2769 6e69  er(bracket, 'ini
-0004e650: 7469 616c 4c65 7665 7261 6765 2729 2c0a  tialLeverage'),.
-0004e660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004e670: 2769 6e66 6f27 3a20 6272 6163 6b65 742c  'info': bracket,
-0004e680: 0a20 2020 2020 2020 2020 2020 207d 290a  .            }).
-0004e690: 2020 2020 2020 2020 7265 7475 726e 2074          return t
-0004e6a0: 6965 7273 0a0a 2020 2020 6173 796e 6320  iers..    async 
-0004e6b0: 6465 6620 6665 7463 685f 706f 7369 7469  def fetch_positi
-0004e6c0: 6f6e 2873 656c 662c 2073 796d 626f 6c3a  on(self, symbol:
-0004e6d0: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-0004e6e0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0004e6f0: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
-0004e700: 2f2f 6269 6e61 6e63 652d 646f 6373 2e67  //binance-docs.g
-0004e710: 6974 6875 622e 696f 2f61 7069 646f 6373  ithub.io/apidocs
-0004e720: 2f76 6f70 7469 6f6e 732f 656e 2f23 6f70  /voptions/en/#op
-0004e730: 7469 6f6e 2d70 6f73 6974 696f 6e2d 696e  tion-position-in
-0004e740: 666f 726d 6174 696f 6e2d 7573 6572 5f64  formation-user_d
-0004e750: 6174 610a 2020 2020 2020 2020 6665 7463  ata.        fetc
-0004e760: 6820 6461 7461 206f 6e20 616e 206f 7065  h data on an ope
-0004e770: 6e20 706f 7369 7469 6f6e 0a20 2020 2020  n position.     
-0004e780: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
-0004e790: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-0004e7a0: 726b 6574 2073 796d 626f 6c20 6f66 2074  rket symbol of t
-0004e7b0: 6865 206d 6172 6b65 7420 7468 6520 706f  he market the po
-0004e7c0: 7369 7469 6f6e 2069 7320 6865 6c64 2069  sition is held i
-0004e7d0: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
-0004e7e0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-0004e7f0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-0004e800: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-0004e810: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
-0004e820: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-0004e830: 7572 6e73 2064 6963 743a 2061 2060 706f  urns dict: a `po
-0004e840: 7369 7469 6f6e 2073 7472 7563 7475 7265  sition structure
-0004e850: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0004e860: 6378 742e 636f 6d2f 656e 2f6c 6174 6573  cxt.com/en/lates
-0004e870: 742f 6d61 6e75 616c 2e68 746d 6c23 706f  t/manual.html#po
-0004e880: 7369 7469 6f6e 2d73 7472 7563 7475 7265  sition-structure
-0004e890: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-0004e8a0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-0004e8b0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-0004e8c0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-0004e8d0: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-0004e8e0: 6d62 6f6c 290a 2020 2020 2020 2020 6966  mbol).        if
-0004e8f0: 206e 6f74 206d 6172 6b65 745b 276f 7074   not market['opt
-0004e900: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
-0004e910: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-0004e920: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-0004e930: 2720 6665 7463 6850 6f73 6974 696f 6e28  ' fetchPosition(
-0004e940: 2920 7375 7070 6f72 7473 206f 7074 696f  ) supports optio
-0004e950: 6e20 6d61 726b 6574 7320 6f6e 6c79 2729  n markets only')
-0004e960: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0004e970: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0004e980: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
-0004e990: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-0004e9a0: 207d 0a20 2020 2020 2020 2072 6573 706f   }.        respo
-0004e9b0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-0004e9c0: 2e65 6170 6950 7269 7661 7465 4765 7450  .eapiPrivateGetP
-0004e9d0: 6f73 6974 696f 6e28 7365 6c66 2e65 7874  osition(self.ext
-0004e9e0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-0004e9f0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-0004ea00: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
-0004ea10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004ea20: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0004ea30: 2020 2020 2020 2020 2020 2265 6e74 7279            "entry
-0004ea40: 5072 6963 6522 3a20 2232 372e 3730 3030  Price": "27.7000
-0004ea50: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0004ea60: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
-0004ea70: 6d62 6f6c 223a 2022 4554 482d 3233 3034  mbol": "ETH-2304
-0004ea80: 3236 2d31 3835 302d 4322 2c0a 2020 2020  26-1850-C",.    
-0004ea90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004eaa0: 2020 2273 6964 6522 3a20 224c 4f4e 4722    "side": "LONG"
-0004eab0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004eac0: 2020 2020 2020 2020 2271 7561 6e74 6974          "quantit
-0004ead0: 7922 3a20 2230 2e35 3030 3030 3030 3022  y": "0.50000000"
-0004eae0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004eaf0: 2020 2020 2020 2020 2272 6564 7563 6962          "reducib
-0004eb00: 6c65 5174 7922 3a20 2230 2e35 3030 3030  leQty": "0.50000
-0004eb10: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0004eb20: 2020 2020 2020 2020 2020 2020 226d 6172              "mar
-0004eb30: 6b56 616c 7565 223a 2022 3130 2e32 3530  kValue": "10.250
-0004eb40: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0004eb50: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0004eb60: 726f 7222 3a20 222d 302e 3235 3939 222c  ror": "-0.2599",
-0004eb70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004eb80: 2020 2020 2020 2022 756e 7265 616c 697a         "unrealiz
-0004eb90: 6564 504e 4c22 3a20 222d 332e 3630 3030  edPNL": "-3.6000
-0004eba0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0004ebb0: 2320 2020 2020 2020 2020 2020 2020 226d  #             "m
-0004ebc0: 6172 6b50 7269 6365 223a 2022 3230 2e35  arkPrice": "20.5
-0004ebd0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004ebe0: 2020 2020 2020 2020 2022 7374 7269 6b65           "strike
-0004ebf0: 5072 6963 6522 3a20 2231 3835 302e 3030  Price": "1850.00
-0004ec00: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0004ec10: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0004ec20: 706f 7369 7469 6f6e 436f 7374 223a 2022  positionCost": "
-0004ec30: 3133 2e38 3530 3030 3030 3022 2c0a 2020  13.85000000",.  
-0004ec40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004ec50: 2020 2020 2265 7870 6972 7944 6174 6522      "expiryDate"
-0004ec60: 3a20 3136 3832 3439 3630 3030 3030 302c  : 1682496000000,
-0004ec70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004ec80: 2020 2020 2020 2022 7072 6963 6553 6361         "priceSca
-0004ec90: 6c65 223a 2031 2c0a 2020 2020 2020 2020  le": 1,.        
-0004eca0: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
-0004ecb0: 7561 6e74 6974 7953 6361 6c65 223a 2032  uantityScale": 2
-0004ecc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004ecd0: 2020 2020 2020 2020 226f 7074 696f 6e53          "optionS
-0004ece0: 6964 6522 3a20 2243 414c 4c22 2c0a 2020  ide": "CALL",.  
-0004ecf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004ed00: 2020 2020 2271 756f 7465 4173 7365 7422      "quoteAsset"
-0004ed10: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
-0004ed20: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004ed30: 2274 696d 6522 3a20 3136 3832 3439 3234  "time": 16824924
-0004ed40: 3237 3130 360a 2020 2020 2020 2020 2320  27106.        # 
-0004ed50: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0004ed60: 2020 2320 2020 2020 5d0a 2020 2020 2020    #     ].      
-0004ed70: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
-0004ed80: 726e 2073 656c 662e 7061 7273 655f 706f  rn self.parse_po
-0004ed90: 7369 7469 6f6e 2872 6573 706f 6e73 655b  sition(response[
-0004eda0: 305d 2c20 6d61 726b 6574 290a 0a20 2020  0], market)..   
-0004edb0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-0004edc0: 5f6f 7074 696f 6e5f 706f 7369 7469 6f6e  _option_position
-0004edd0: 7328 7365 6c66 2c20 7379 6d62 6f6c 733a  s(self, symbols:
-0004ede0: 204f 7074 696f 6e61 6c5b 4c69 7374 5b73   Optional[List[s
-0004edf0: 7472 5d5d 203d 204e 6f6e 652c 2070 6172  tr]] = None, par
-0004ee00: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-0004ee10: 2022 2222 0a20 2020 2020 2020 2073 6565   """.        see
-0004ee20: 2068 7474 7073 3a2f 2f62 696e 616e 6365   https://binance
-0004ee30: 2d64 6f63 732e 6769 7468 7562 2e69 6f2f  -docs.github.io/
-0004ee40: 6170 6964 6f63 732f 766f 7074 696f 6e73  apidocs/voptions
-0004ee50: 2f65 6e2f 236f 7074 696f 6e2d 706f 7369  /en/#option-posi
-0004ee60: 7469 6f6e 2d69 6e66 6f72 6d61 7469 6f6e  tion-information
-0004ee70: 2d75 7365 725f 6461 7461 0a20 2020 2020  -user_data.     
-0004ee80: 2020 2066 6574 6368 2064 6174 6120 6f6e     fetch data on
-0004ee90: 206f 7065 6e20 6f70 7469 6f6e 7320 706f   open options po
-0004eea0: 7369 7469 6f6e 730a 2020 2020 2020 2020  sitions.        
-0004eeb0: 3a70 6172 616d 205b 7374 725d 7c4e 6f6e  :param [str]|Non
-0004eec0: 6520 7379 6d62 6f6c 733a 206c 6973 7420  e symbols: list 
-0004eed0: 6f66 2075 6e69 6669 6564 206d 6172 6b65  of unified marke
-0004eee0: 7420 7379 6d62 6f6c 730a 2020 2020 2020  t symbols.      
-0004eef0: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-0004ef00: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-0004ef10: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-0004ef20: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
-0004ef30: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-0004ef40: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
-0004ef50: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
-0004ef60: 706f 7369 7469 6f6e 2073 7472 7563 7475  position structu
-0004ef70: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-0004ef80: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-0004ef90: 3d70 6f73 6974 696f 6e2d 7374 7275 6374  =position-struct
-0004efa0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-0004efb0: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-0004efc0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-0004efd0: 7328 290a 2020 2020 2020 2020 7379 6d62  s().        symb
-0004efe0: 6f6c 7320 3d20 7365 6c66 2e6d 6172 6b65  ols = self.marke
-0004eff0: 745f 7379 6d62 6f6c 7328 7379 6d62 6f6c  t_symbols(symbol
-0004f000: 7329 0a20 2020 2020 2020 2072 6571 7565  s).        reque
-0004f010: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
-0004f020: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
-0004f030: 2020 2020 2020 6966 2073 796d 626f 6c73        if symbols
-0004f040: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0004f050: 2020 2020 2020 2020 2020 7379 6d62 6f6c            symbol
-0004f060: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0004f070: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0004f080: 6528 7379 6d62 6f6c 732c 206c 6973 7429  e(symbols, list)
-0004f090: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0004f0a0: 2020 7379 6d62 6f6c 734c 656e 6774 6820    symbolsLength 
-0004f0b0: 3d20 6c65 6e28 7379 6d62 6f6c 7329 0a20  = len(symbols). 
-0004f0c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0004f0d0: 6620 7379 6d62 6f6c 734c 656e 6774 6820  f symbolsLength 
-0004f0e0: 3e20 313a 0a20 2020 2020 2020 2020 2020  > 1:.           
-0004f0f0: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-0004f100: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-0004f110: 6420 2b20 2720 6665 7463 6850 6f73 6974  d + ' fetchPosit
-0004f120: 696f 6e73 2829 2073 796d 626f 6c73 2061  ions() symbols a
-0004f130: 7267 756d 656e 7420 6361 6e6e 6f74 2063  rgument cannot c
-0004f140: 6f6e 7461 696e 206d 6f72 6520 7468 616e  ontain more than
-0004f150: 2031 2073 796d 626f 6c27 290a 2020 2020   1 symbol').    
-0004f160: 2020 2020 2020 2020 2020 2020 7379 6d62              symb
-0004f170: 6f6c 203d 2073 796d 626f 6c73 5b30 5d0a  ol = symbols[0].
-0004f180: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0004f190: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0004f1a0: 2020 7379 6d62 6f6c 203d 2073 796d 626f    symbol = symbo
-0004f1b0: 6c73 0a20 2020 2020 2020 2020 2020 206d  ls.            m
-0004f1c0: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-0004f1d0: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-0004f1e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0004f1f0: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
-0004f200: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-0004f210: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-0004f220: 7420 7365 6c66 2e65 6170 6950 7269 7661  t self.eapiPriva
-0004f230: 7465 4765 7450 6f73 6974 696f 6e28 7365  teGetPosition(se
-0004f240: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-0004f250: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-0004f260: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0004f270: 2020 2020 5b0a 2020 2020 2020 2020 2320      [.        # 
-0004f280: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0004f290: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004f2a0: 2265 6e74 7279 5072 6963 6522 3a20 2232  "entryPrice": "2
-0004f2b0: 372e 3730 3030 3030 3030 222c 0a20 2020  7.70000000",.   
-0004f2c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f2d0: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
-0004f2e0: 482d 3233 3034 3236 2d31 3835 302d 4322  H-230426-1850-C"
-0004f2f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f300: 2020 2020 2020 2020 2273 6964 6522 3a20          "side": 
-0004f310: 224c 4f4e 4722 2c0a 2020 2020 2020 2020  "LONG",.        
-0004f320: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
-0004f330: 7561 6e74 6974 7922 3a20 2230 2e35 3030  uantity": "0.500
-0004f340: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0004f350: 2320 2020 2020 2020 2020 2020 2020 2272  #             "r
-0004f360: 6564 7563 6962 6c65 5174 7922 3a20 2230  educibleQty": "0
-0004f370: 2e35 3030 3030 3030 3022 2c0a 2020 2020  .50000000",.    
-0004f380: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004f390: 2020 226d 6172 6b56 616c 7565 223a 2022    "markValue": "
-0004f3a0: 3130 2e32 3530 3030 3030 3030 222c 0a20  10.250000000",. 
-0004f3b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f3c0: 2020 2020 2022 726f 7222 3a20 222d 302e       "ror": "-0.
-0004f3d0: 3235 3939 222c 0a20 2020 2020 2020 2023  2599",.        #
-0004f3e0: 2020 2020 2020 2020 2020 2020 2022 756e               "un
-0004f3f0: 7265 616c 697a 6564 504e 4c22 3a20 222d  realizedPNL": "-
-0004f400: 332e 3630 3030 3030 3030 3022 2c0a 2020  3.600000000",.  
-0004f410: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f420: 2020 2020 226d 6172 6b50 7269 6365 223a      "markPrice":
-0004f430: 2022 3230 2e35 222c 0a20 2020 2020 2020   "20.5",.       
-0004f440: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0004f450: 7374 7269 6b65 5072 6963 6522 3a20 2231  strikePrice": "1
-0004f460: 3835 302e 3030 3030 3030 3030 222c 0a20  850.00000000",. 
-0004f470: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f480: 2020 2020 2022 706f 7369 7469 6f6e 436f       "positionCo
-0004f490: 7374 223a 2022 3133 2e38 3530 3030 3030  st": "13.8500000
-0004f4a0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004f4b0: 2020 2020 2020 2020 2020 2265 7870 6972            "expir
-0004f4c0: 7944 6174 6522 3a20 3136 3832 3439 3630  yDate": 16824960
-0004f4d0: 3030 3030 302c 0a20 2020 2020 2020 2023  00000,.        #
-0004f4e0: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-0004f4f0: 6963 6553 6361 6c65 223a 2031 2c0a 2020  iceScale": 1,.  
-0004f500: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f510: 2020 2020 2271 7561 6e74 6974 7953 6361      "quantitySca
-0004f520: 6c65 223a 2032 2c0a 2020 2020 2020 2020  le": 2,.        
-0004f530: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
-0004f540: 7074 696f 6e53 6964 6522 3a20 2243 414c  ptionSide": "CAL
-0004f550: 4c22 2c0a 2020 2020 2020 2020 2320 2020  L",.        #   
-0004f560: 2020 2020 2020 2020 2020 2271 756f 7465            "quote
-0004f570: 4173 7365 7422 3a20 2255 5344 5422 2c0a  Asset": "USDT",.
-0004f580: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f590: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-0004f5a0: 3832 3439 3234 3237 3130 360a 2020 2020  82492427106.    
-0004f5b0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-0004f5c0: 2020 2020 2020 2020 2320 2020 2020 5d0a          #     ].
-0004f5d0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0004f5e0: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
-0004f5f0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-0004f600: 616e 6765 2830 2c20 6c65 6e28 7265 7370  ange(0, len(resp
-0004f610: 6f6e 7365 2929 3a0a 2020 2020 2020 2020  onse)):.        
-0004f620: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
-0004f630: 6428 7365 6c66 2e70 6172 7365 5f70 6f73  d(self.parse_pos
-0004f640: 6974 696f 6e28 7265 7370 6f6e 7365 5b69  ition(response[i
-0004f650: 5d2c 206d 6172 6b65 7429 290a 2020 2020  ], market)).    
-0004f660: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0004f670: 6669 6c74 6572 5f62 795f 6172 7261 7928  filter_by_array(
-0004f680: 7265 7375 6c74 2c20 2773 796d 626f 6c27  result, 'symbol'
-0004f690: 2c20 7379 6d62 6f6c 732c 2046 616c 7365  , symbols, False
-0004f6a0: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
-0004f6b0: 5f70 6f73 6974 696f 6e28 7365 6c66 2c20  _position(self, 
-0004f6c0: 706f 7369 7469 6f6e 2c20 6d61 726b 6574  position, market
-0004f6d0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0004f6e0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-0004f6f0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0004f700: 2020 2020 2265 6e74 7279 5072 6963 6522      "entryPrice"
-0004f710: 3a20 2232 372e 3730 3030 3030 3030 222c  : "27.70000000",
-0004f720: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f730: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
-0004f740: 482d 3233 3034 3236 2d31 3835 302d 4322  H-230426-1850-C"
-0004f750: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f760: 2020 2020 2273 6964 6522 3a20 224c 4f4e      "side": "LON
-0004f770: 4722 2c0a 2020 2020 2020 2020 2320 2020  G",.        #   
-0004f780: 2020 2020 2020 2271 7561 6e74 6974 7922        "quantity"
-0004f790: 3a20 2230 2e35 3030 3030 3030 3022 2c0a  : "0.50000000",.
-0004f7a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f7b0: 2020 2272 6564 7563 6962 6c65 5174 7922    "reducibleQty"
-0004f7c0: 3a20 2230 2e35 3030 3030 3030 3022 2c0a  : "0.50000000",.
-0004f7d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f7e0: 2020 226d 6172 6b56 616c 7565 223a 2022    "markValue": "
-0004f7f0: 3130 2e32 3530 3030 3030 3030 222c 0a20  10.250000000",. 
-0004f800: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f810: 2022 726f 7222 3a20 222d 302e 3235 3939   "ror": "-0.2599
-0004f820: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004f830: 2020 2020 2022 756e 7265 616c 697a 6564       "unrealized
-0004f840: 504e 4c22 3a20 222d 332e 3630 3030 3030  PNL": "-3.600000
-0004f850: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0004f860: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
-0004f870: 6365 223a 2022 3230 2e35 222c 0a20 2020  ce": "20.5",.   
-0004f880: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0004f890: 7374 7269 6b65 5072 6963 6522 3a20 2231  strikePrice": "1
-0004f8a0: 3835 302e 3030 3030 3030 3030 222c 0a20  850.00000000",. 
-0004f8b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f8c0: 2022 706f 7369 7469 6f6e 436f 7374 223a   "positionCost":
-0004f8d0: 2022 3133 2e38 3530 3030 3030 3022 2c0a   "13.85000000",.
-0004f8e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f8f0: 2020 2265 7870 6972 7944 6174 6522 3a20    "expiryDate": 
-0004f900: 3136 3832 3439 3630 3030 3030 302c 0a20  1682496000000,. 
-0004f910: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f920: 2022 7072 6963 6553 6361 6c65 223a 2031   "priceScale": 1
-0004f930: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f940: 2020 2020 2271 7561 6e74 6974 7953 6361      "quantitySca
-0004f950: 6c65 223a 2032 2c0a 2020 2020 2020 2020  le": 2,.        
-0004f960: 2320 2020 2020 2020 2020 226f 7074 696f  #         "optio
-0004f970: 6e53 6964 6522 3a20 2243 414c 4c22 2c0a  nSide": "CALL",.
-0004f980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f990: 2020 2271 756f 7465 4173 7365 7422 3a20    "quoteAsset": 
-0004f9a0: 2255 5344 5422 2c0a 2020 2020 2020 2020  "USDT",.        
-0004f9b0: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-0004f9c0: 3a20 3136 3832 3439 3234 3237 3130 360a  : 1682492427106.
-0004f9d0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0004f9e0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0004f9f0: 2020 6d61 726b 6574 4964 203d 2073 656c    marketId = sel
-0004fa00: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
-0004fa10: 7369 7469 6f6e 2c20 2773 796d 626f 6c27  sition, 'symbol'
-0004fa20: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-0004fa30: 203d 2073 656c 662e 7361 6665 5f6d 6172   = self.safe_mar
-0004fa40: 6b65 7428 6d61 726b 6574 4964 2c20 6d61  ket(marketId, ma
-0004fa50: 726b 6574 290a 2020 2020 2020 2020 7379  rket).        sy
-0004fa60: 6d62 6f6c 203d 206d 6172 6b65 745b 2773  mbol = market['s
-0004fa70: 796d 626f 6c27 5d0a 2020 2020 2020 2020  ymbol'].        
-0004fa80: 7369 6465 203d 2073 656c 662e 7361 6665  side = self.safe
-0004fa90: 5f73 7472 696e 675f 6c6f 7765 7228 706f  _string_lower(po
-0004faa0: 7369 7469 6f6e 2c20 2773 6964 6527 290a  sition, 'side').
-0004fab0: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
-0004fac0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0004fad0: 696e 6728 706f 7369 7469 6f6e 2c20 2771  ing(position, 'q
-0004fae0: 7561 6e74 6974 7927 290a 2020 2020 2020  uantity').      
-0004faf0: 2020 6966 2073 6964 6520 213d 2027 6c6f    if side != 'lo
-0004fb00: 6e67 273a 0a20 2020 2020 2020 2020 2020  ng':.           
-0004fb10: 2071 7561 6e74 6974 7920 3d20 5072 6563   quantity = Prec
-0004fb20: 6973 652e 7374 7269 6e67 5f6d 756c 2827  ise.string_mul('
-0004fb30: 2d31 272c 2071 7561 6e74 6974 7929 0a20  -1', quantity). 
-0004fb40: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-0004fb50: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
-0004fb60: 6567 6572 2870 6f73 6974 696f 6e2c 2027  eger(position, '
-0004fb70: 7469 6d65 2729 0a20 2020 2020 2020 2072  time').        r
-0004fb80: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
-0004fb90: 706f 7369 7469 6f6e 287b 0a20 2020 2020  position({.     
-0004fba0: 2020 2020 2020 2027 696e 666f 273a 2070         'info': p
-0004fbb0: 6f73 6974 696f 6e2c 0a20 2020 2020 2020  osition,.       
-0004fbc0: 2020 2020 2027 6964 273a 204e 6f6e 652c       'id': None,
-0004fbd0: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
-0004fbe0: 6d62 6f6c 273a 2073 796d 626f 6c2c 0a20  mbol': symbol,. 
-0004fbf0: 2020 2020 2020 2020 2020 2027 656e 7472             'entr
-0004fc00: 7950 7269 6365 273a 2073 656c 662e 7361  yPrice': self.sa
-0004fc10: 6665 5f6e 756d 6265 7228 706f 7369 7469  fe_number(positi
-0004fc20: 6f6e 2c20 2765 6e74 7279 5072 6963 6527  on, 'entryPrice'
-0004fc30: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-0004fc40: 6d61 726b 5072 6963 6527 3a20 7365 6c66  markPrice': self
-0004fc50: 2e73 6166 655f 6e75 6d62 6572 2870 6f73  .safe_number(pos
-0004fc60: 6974 696f 6e2c 2027 6d61 726b 5072 6963  ition, 'markPric
-0004fc70: 6527 292c 0a20 2020 2020 2020 2020 2020  e'),.           
-0004fc80: 2027 6e6f 7469 6f6e 616c 273a 2073 656c   'notional': sel
-0004fc90: 662e 7361 6665 5f6e 756d 6265 7228 706f  f.safe_number(po
-0004fca0: 7369 7469 6f6e 2c20 276d 6172 6b56 616c  sition, 'markVal
-0004fcb0: 7565 2729 2c0a 2020 2020 2020 2020 2020  ue'),.          
-0004fcc0: 2020 2763 6f6c 6c61 7465 7261 6c27 3a20    'collateral': 
-0004fcd0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0004fce0: 2870 6f73 6974 696f 6e2c 2027 706f 7369  (position, 'posi
-0004fcf0: 7469 6f6e 436f 7374 2729 2c0a 2020 2020  tionCost'),.    
-0004fd00: 2020 2020 2020 2020 2775 6e72 6561 6c69          'unreali
-0004fd10: 7a65 6450 6e6c 273a 2073 656c 662e 7361  zedPnl': self.sa
-0004fd20: 6665 5f6e 756d 6265 7228 706f 7369 7469  fe_number(positi
-0004fd30: 6f6e 2c20 2775 6e72 6561 6c69 7a65 6450  on, 'unrealizedP
-0004fd40: 4e4c 2729 2c0a 2020 2020 2020 2020 2020  NL'),.          
-0004fd50: 2020 2773 6964 6527 3a20 7369 6465 2c0a    'side': side,.
-0004fd60: 2020 2020 2020 2020 2020 2020 2763 6f6e              'con
-0004fd70: 7472 6163 7473 273a 2073 656c 662e 7061  tracts': self.pa
-0004fd80: 7273 655f 6e75 6d62 6572 2871 7561 6e74  rse_number(quant
-0004fd90: 6974 7929 2c0a 2020 2020 2020 2020 2020  ity),.          
-0004fda0: 2020 2763 6f6e 7472 6163 7453 697a 6527    'contractSize'
-0004fdb0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-0004fdc0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
-0004fdd0: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
-0004fde0: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-0004fdf0: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-0004fe00: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
-0004fe10: 2020 2020 2020 2020 2027 6865 6467 6564           'hedged
-0004fe20: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
-0004fe30: 2020 2020 2027 6d61 696e 7465 6e61 6e63       'maintenanc
-0004fe40: 654d 6172 6769 6e27 3a20 4e6f 6e65 2c0a  eMargin': None,.
-0004fe50: 2020 2020 2020 2020 2020 2020 276d 6169              'mai
-0004fe60: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004fe70: 7263 656e 7461 6765 273a 204e 6f6e 652c  rcentage': None,
-0004fe80: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-0004fe90: 6974 6961 6c4d 6172 6769 6e27 3a20 4e6f  itialMargin': No
-0004fea0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-0004feb0: 2769 6e69 7469 616c 4d61 7267 696e 5065  'initialMarginPe
-0004fec0: 7263 656e 7461 6765 273a 204e 6f6e 652c  rcentage': None,
-0004fed0: 0a20 2020 2020 2020 2020 2020 2027 6c65  .            'le
-0004fee0: 7665 7261 6765 273a 204e 6f6e 652c 0a20  verage': None,. 
-0004fef0: 2020 2020 2020 2020 2020 2027 6c69 7175             'liqu
-0004ff00: 6964 6174 696f 6e50 7269 6365 273a 204e  idationPrice': N
-0004ff10: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-0004ff20: 2027 6d61 7267 696e 5261 7469 6f27 3a20   'marginRatio': 
-0004ff30: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-0004ff40: 2020 276d 6172 6769 6e4d 6f64 6527 3a20    'marginMode': 
-0004ff50: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-0004ff60: 2020 2770 6572 6365 6e74 6167 6527 3a20    'percentage': 
-0004ff70: 4e6f 6e65 2c0a 2020 2020 2020 2020 7d29  None,.        })
-0004ff80: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-0004ff90: 6665 7463 685f 706f 7369 7469 6f6e 7328  fetch_positions(
-0004ffa0: 7365 6c66 2c20 7379 6d62 6f6c 733a 204f  self, symbols: O
-0004ffb0: 7074 696f 6e61 6c5b 4c69 7374 5b73 7472  ptional[List[str
-0004ffc0: 5d5d 203d 204e 6f6e 652c 2070 6172 616d  ]] = None, param
-0004ffd0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0004ffe0: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-0004fff0: 2061 6c6c 206f 7065 6e20 706f 7369 7469   all open positi
-00050000: 6f6e 730a 2020 2020 2020 2020 3a70 6172  ons.        :par
-00050010: 616d 205b 7374 725d 7c4e 6f6e 6520 7379  am [str]|None sy
-00050020: 6d62 6f6c 733a 206c 6973 7420 6f66 2075  mbols: list of u
+00047bd0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+00047be0: 7365 5f74 7261 6e73 6665 7228 7265 7370  se_transfer(resp
+00047bf0: 6f6e 7365 2c20 6375 7272 656e 6379 290a  onse, currency).
+00047c00: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
+00047c10: 6574 6368 5f66 756e 6469 6e67 5f72 6174  etch_funding_rat
+00047c20: 6528 7365 6c66 2c20 7379 6d62 6f6c 3a20  e(self, symbol: 
+00047c30: 7374 722c 2070 6172 616d 733d 7b7d 293a  str, params={}):
+00047c40: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00047c50: 2020 2020 2066 6574 6368 2074 6865 2063       fetch the c
+00047c60: 7572 7265 6e74 2066 756e 6469 6e67 2072  urrent funding r
+00047c70: 6174 650a 2020 2020 2020 2020 3a70 6172  ate.        :par
+00047c80: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+00047c90: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
+00047ca0: 6d62 6f6c 0a20 2020 2020 2020 203a 7061  mbol.        :pa
+00047cb0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+00047cc0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00047cd0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+00047ce0: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
+00047cf0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+00047d00: 7265 7475 726e 7320 6469 6374 3a20 6120  returns dict: a 
+00047d10: 6066 756e 6469 6e67 2072 6174 6520 7374  `funding rate st
+00047d20: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+00047d30: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+00047d40: 2f3f 6964 3d66 756e 6469 6e67 2d72 6174  /?id=funding-rat
+00047d50: 652d 7374 7275 6374 7572 653e 600a 2020  e-structure>`.  
+00047d60: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00047d70: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+00047d80: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00047d90: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00047da0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00047db0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+00047dc0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00047dd0: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
+00047de0: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
+00047df0: 207d 0a20 2020 2020 2020 206d 6574 686f   }.        metho
+00047e00: 6420 3d20 4e6f 6e65 0a20 2020 2020 2020  d = None.       
+00047e10: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
+00047e20: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
+00047e30: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
+00047e40: 5075 626c 6963 4765 7450 7265 6d69 756d  PublicGetPremium
+00047e50: 496e 6465 7827 0a20 2020 2020 2020 2065  Index'.        e
+00047e60: 6c69 6620 6d61 726b 6574 5b27 696e 7665  lif market['inve
+00047e70: 7273 6527 5d3a 0a20 2020 2020 2020 2020  rse']:.         
+00047e80: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
+00047e90: 6950 7562 6c69 6347 6574 5072 656d 6975  iPublicGetPremiu
+00047ea0: 6d49 6e64 6578 270a 2020 2020 2020 2020  mIndex'.        
+00047eb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00047ec0: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+00047ed0: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+00047ee0: 2066 6574 6368 4675 6e64 696e 6752 6174   fetchFundingRat
+00047ef0: 6528 2920 7375 7070 6f72 7473 206c 696e  e() supports lin
+00047f00: 6561 7220 616e 6420 696e 7665 7273 6520  ear and inverse 
+00047f10: 636f 6e74 7261 6374 7320 6f6e 6c79 2729  contracts only')
+00047f20: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+00047f30: 6520 3d20 6177 6169 7420 6765 7461 7474  e = await getatt
+00047f40: 7228 7365 6c66 2c20 6d65 7468 6f64 2928  r(self, method)(
+00047f50: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00047f60: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+00047f70: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+00047f80: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
+00047f90: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00047fa0: 203d 2072 6573 706f 6e73 655b 305d 0a20   = response[0]. 
+00047fb0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00047fc0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+00047fd0: 2023 2020 2020 2020 2020 2022 7379 6d62   #         "symb
+00047fe0: 6f6c 223a 2022 4254 4355 5344 5422 2c0a  ol": "BTCUSDT",.
+00047ff0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00048000: 2020 226d 6172 6b50 7269 6365 223a 2022    "markPrice": "
+00048010: 3435 3830 322e 3831 3132 3938 3932 222c  45802.81129892",
+00048020: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00048030: 2020 2022 696e 6465 7850 7269 6365 223a     "indexPrice":
+00048040: 2022 3435 3734 352e 3437 3730 3139 3135   "45745.47701915
+00048050: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00048060: 2020 2020 2022 6573 7469 6d61 7465 6453       "estimatedS
+00048070: 6574 746c 6550 7269 6365 223a 2022 3435  ettlePrice": "45
+00048080: 3133 332e 3931 3735 3336 3731 222c 0a20  133.91753671",. 
+00048090: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000480a0: 2022 6c61 7374 4675 6e64 696e 6752 6174   "lastFundingRat
+000480b0: 6522 3a20 2230 2e30 3030 3633 3532 3122  e": "0.00063521"
+000480c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000480d0: 2020 2020 2269 6e74 6572 6573 7452 6174      "interestRat
+000480e0: 6522 3a20 2230 2e30 3030 3130 3030 3022  e": "0.00010000"
+000480f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00048100: 2020 2020 226e 6578 7446 756e 6469 6e67      "nextFunding
+00048110: 5469 6d65 223a 2022 3136 3231 3236 3732  Time": "16212672
+00048120: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00048130: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
+00048140: 3a20 2231 3632 3132 3532 3334 3430 3031  : "1621252344001
+00048150: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00048160: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+00048170: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00048180: 7061 7273 655f 6675 6e64 696e 675f 7261  parse_funding_ra
+00048190: 7465 2872 6573 706f 6e73 652c 206d 6172  te(response, mar
+000481a0: 6b65 7429 0a0a 2020 2020 6173 796e 6320  ket)..    async 
+000481b0: 6465 6620 6665 7463 685f 6675 6e64 696e  def fetch_fundin
+000481c0: 675f 7261 7465 5f68 6973 746f 7279 2873  g_rate_history(s
+000481d0: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+000481e0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+000481f0: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+00048200: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+00048210: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+00048220: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+00048230: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00048240: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00048250: 6368 6573 2068 6973 746f 7269 6361 6c20  ches historical 
+00048260: 6675 6e64 696e 6720 7261 7465 2070 7269  funding rate pri
+00048270: 6365 730a 2020 2020 2020 2020 3a70 6172  ces.        :par
+00048280: 616d 2073 7472 7c4e 6f6e 6520 7379 6d62  am str|None symb
+00048290: 6f6c 3a20 756e 6966 6965 6420 7379 6d62  ol: unified symb
+000482a0: 6f6c 206f 6620 7468 6520 6d61 726b 6574  ol of the market
+000482b0: 2074 6f20 6665 7463 6820 7468 6520 6675   to fetch the fu
+000482c0: 6e64 696e 6720 7261 7465 2068 6973 746f  nding rate histo
+000482d0: 7279 2066 6f72 0a20 2020 2020 2020 203a  ry for.        :
+000482e0: 7061 7261 6d20 696e 747c 4e6f 6e65 2073  param int|None s
+000482f0: 696e 6365 3a20 7469 6d65 7374 616d 7020  ince: timestamp 
+00048300: 696e 206d 7320 6f66 2074 6865 2065 6172  in ms of the ear
+00048310: 6c69 6573 7420 6675 6e64 696e 6720 7261  liest funding ra
+00048320: 7465 2074 6f20 6665 7463 680a 2020 2020  te to fetch.    
+00048330: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00048340: 6f6e 6520 6c69 6d69 743a 2074 6865 206d  one limit: the m
+00048350: 6178 696d 756d 2061 6d6f 756e 7420 6f66  aximum amount of
+00048360: 2060 6675 6e64 696e 6720 7261 7465 2073   `funding rate s
+00048370: 7472 7563 7475 7265 7320 3c68 7474 7073  tructures <https
+00048380: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+00048390: 2f65 6e2f 6c61 7465 7374 2f6d 616e 7561  /en/latest/manua
+000483a0: 6c2e 6874 6d6c 3f23 6675 6e64 696e 672d  l.html?#funding-
+000483b0: 7261 7465 2d68 6973 746f 7279 2d73 7472  rate-history-str
+000483c0: 7563 7475 7265 3e60 2074 6f20 6665 7463  ucture>` to fetc
+000483d0: 680a 2020 2020 2020 2020 3a70 6172 616d  h.        :param
+000483e0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+000483f0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+00048400: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+00048410: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
+00048420: 696e 740a 2020 2020 2020 2020 3a70 6172  int.        :par
+00048430: 616d 2069 6e74 7c4e 6f6e 6520 7061 7261  am int|None para
+00048440: 6d73 5b27 756e 7469 6c27 5d3a 2074 696d  ms['until']: tim
+00048450: 6573 7461 6d70 2069 6e20 6d73 206f 6620  estamp in ms of 
+00048460: 7468 6520 6c61 7465 7374 2066 756e 6469  the latest fundi
+00048470: 6e67 2072 6174 650a 2020 2020 2020 2020  ng rate.        
+00048480: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
+00048490: 2061 206c 6973 7420 6f66 2060 6675 6e64   a list of `fund
+000484a0: 696e 6720 7261 7465 2073 7472 7563 7475  ing rate structu
+000484b0: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
+000484c0: 732e 6363 7874 2e63 6f6d 2f65 6e2f 6c61  s.ccxt.com/en/la
+000484d0: 7465 7374 2f6d 616e 7561 6c2e 6874 6d6c  test/manual.html
+000484e0: 3f23 6675 6e64 696e 672d 7261 7465 2d68  ?#funding-rate-h
+000484f0: 6973 746f 7279 2d73 7472 7563 7475 7265  istory-structure
+00048500: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+00048510: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+00048520: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+00048530: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+00048540: 203d 207b 7d0a 2020 2020 2020 2020 6d65   = {}.        me
+00048550: 7468 6f64 203d 204e 6f6e 650a 2020 2020  thod = None.    
+00048560: 2020 2020 6465 6661 756c 7454 7970 6520      defaultType 
+00048570: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00048580: 6e67 5f32 2873 656c 662e 6f70 7469 6f6e  ng_2(self.option
+00048590: 732c 2027 6665 7463 6846 756e 6469 6e67  s, 'fetchFunding
+000485a0: 5261 7465 4869 7374 6f72 7927 2c20 2764  RateHistory', 'd
+000485b0: 6566 6175 6c74 5479 7065 272c 2027 6675  efaultType', 'fu
+000485c0: 7475 7265 2729 0a20 2020 2020 2020 2074  ture').        t
+000485d0: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
+000485e0: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
+000485f0: 7479 7065 272c 2064 6566 6175 6c74 5479  type', defaultTy
+00048600: 7065 290a 2020 2020 2020 2020 6d61 726b  pe).        mark
+00048610: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
+00048620: 2020 6966 2073 796d 626f 6c20 6973 206e    if symbol is n
+00048630: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00048640: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00048650: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+00048660: 290a 2020 2020 2020 2020 2020 2020 7379  ).            sy
+00048670: 6d62 6f6c 203d 206d 6172 6b65 745b 2773  mbol = market['s
+00048680: 796d 626f 6c27 5d0a 2020 2020 2020 2020  ymbol'].        
+00048690: 2020 2020 7265 7175 6573 745b 2773 796d      request['sym
+000486a0: 626f 6c27 5d20 3d20 6d61 726b 6574 5b27  bol'] = market['
+000486b0: 6964 275d 0a20 2020 2020 2020 2073 7562  id'].        sub
+000486c0: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
+000486d0: 2020 2020 7375 6254 7970 652c 2070 6172      subType, par
+000486e0: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
+000486f0: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
+00048700: 6172 616d 7328 2766 6574 6368 4675 6e64  arams('fetchFund
+00048710: 696e 6752 6174 6548 6973 746f 7279 272c  ingRateHistory',
+00048720: 206d 6172 6b65 742c 2070 6172 616d 732c   market, params,
+00048730: 2027 6c69 6e65 6172 2729 0a20 2020 2020   'linear').     
+00048740: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
+00048750: 2e6f 6d69 7428 7061 7261 6d73 2c20 2774  .omit(params, 't
+00048760: 7970 6527 290a 2020 2020 2020 2020 6966  ype').        if
+00048770: 2073 656c 662e 6973 5f6c 696e 6561 7228   self.is_linear(
+00048780: 7479 7065 2c20 7375 6254 7970 6529 3a0a  type, subType):.
+00048790: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+000487a0: 6f64 203d 2027 6661 7069 5075 626c 6963  od = 'fapiPublic
+000487b0: 4765 7446 756e 6469 6e67 5261 7465 270a  GetFundingRate'.
+000487c0: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+000487d0: 662e 6973 5f69 6e76 6572 7365 2874 7970  f.is_inverse(typ
+000487e0: 652c 2073 7562 5479 7065 293a 0a20 2020  e, subType):.   
+000487f0: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00048800: 3d20 2764 6170 6950 7562 6c69 6347 6574  = 'dapiPublicGet
+00048810: 4675 6e64 696e 6752 6174 6527 0a20 2020  FundingRate'.   
+00048820: 2020 2020 2069 6620 6d65 7468 6f64 2069       if method i
+00048830: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00048840: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
+00048850: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
+00048860: 2027 2066 6574 6368 4675 6e64 696e 6752   ' fetchFundingR
+00048870: 6174 6548 6973 746f 7279 2829 2069 7320  ateHistory() is 
+00048880: 6e6f 7420 7375 7070 6f72 7465 6420 666f  not supported fo
+00048890: 7220 2720 2b20 7479 7065 202b 2027 206d  r ' + type + ' m
+000488a0: 6172 6b65 7473 2729 0a20 2020 2020 2020  arkets').       
+000488b0: 2069 6620 7369 6e63 6520 6973 206e 6f74   if since is not
+000488c0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000488d0: 2020 2072 6571 7565 7374 5b27 7374 6172     request['star
+000488e0: 7454 696d 6527 5d20 3d20 7369 6e63 650a  tTime'] = since.
+000488f0: 2020 2020 2020 2020 756e 7469 6c20 3d20          until = 
+00048900: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+00048910: 725f 3228 7061 7261 6d73 2c20 2775 6e74  r_2(params, 'unt
+00048920: 696c 272c 2027 7469 6c6c 2729 2020 2320  il', 'till')  # 
+00048930: 756e 6966 6965 6420 696e 206d 696c 6c69  unified in milli
+00048940: 7365 636f 6e64 730a 2020 2020 2020 2020  seconds.        
+00048950: 656e 6454 696d 6520 3d20 7365 6c66 2e73  endTime = self.s
+00048960: 6166 655f 696e 7465 6765 7228 7061 7261  afe_integer(para
+00048970: 6d73 2c20 2765 6e64 5469 6d65 272c 2075  ms, 'endTime', u
+00048980: 6e74 696c 2920 2023 2065 7863 6861 6e67  ntil)  # exchang
+00048990: 652d 7370 6563 6966 6963 2069 6e20 6d69  e-specific in mi
+000489a0: 6c6c 6973 6563 6f6e 6473 0a20 2020 2020  lliseconds.     
+000489b0: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
+000489c0: 2e6f 6d69 7428 7061 7261 6d73 2c20 5b27  .omit(params, ['
+000489d0: 656e 6454 696d 6527 2c20 2774 696c 6c27  endTime', 'till'
+000489e0: 2c20 2775 6e74 696c 275d 290a 2020 2020  , 'until']).    
+000489f0: 2020 2020 6966 2065 6e64 5469 6d65 2069      if endTime i
+00048a00: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00048a10: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00048a20: 2765 6e64 5469 6d65 275d 203d 2065 6e64  'endTime'] = end
+00048a30: 5469 6d65 0a20 2020 2020 2020 2069 6620  Time.        if 
+00048a40: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
+00048a50: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00048a60: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
+00048a70: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
+00048a80: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00048a90: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00048aa0: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
+00048ab0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00048ac0: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00048ad0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00048ae0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00048af0: 2022 7379 6d62 6f6c 223a 2022 4254 4355   "symbol": "BTCU
+00048b00: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+00048b10: 2020 2020 2020 2020 2266 756e 6469 6e67          "funding
+00048b20: 5261 7465 223a 2022 302e 3030 3036 3335  Rate": "0.000635
+00048b30: 3231 222c 0a20 2020 2020 2020 2023 2020  21",.        #  
+00048b40: 2020 2020 2020 2022 6675 6e64 696e 6754         "fundingT
+00048b50: 696d 6522 3a20 2231 3632 3132 3637 3230  ime": "162126720
+00048b60: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00048b70: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00048b80: 0a20 2020 2020 2020 2072 6174 6573 203d  .        rates =
+00048b90: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
+00048ba0: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+00048bb0: 6e28 7265 7370 6f6e 7365 2929 3a0a 2020  n(response)):.  
+00048bc0: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
+00048bd0: 3d20 7265 7370 6f6e 7365 5b69 5d0a 2020  = response[i].  
+00048be0: 2020 2020 2020 2020 2020 7469 6d65 7374            timest
+00048bf0: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
+00048c00: 696e 7465 6765 7228 656e 7472 792c 2027  integer(entry, '
+00048c10: 6675 6e64 696e 6754 696d 6527 290a 2020  fundingTime').  
+00048c20: 2020 2020 2020 2020 2020 7261 7465 732e            rates.
+00048c30: 6170 7065 6e64 287b 0a20 2020 2020 2020  append({.       
+00048c40: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+00048c50: 2065 6e74 7279 2c0a 2020 2020 2020 2020   entry,.        
+00048c60: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00048c70: 3a20 7365 6c66 2e73 6166 655f 7379 6d62  : self.safe_symb
+00048c80: 6f6c 2873 656c 662e 7361 6665 5f73 7472  ol(self.safe_str
+00048c90: 696e 6728 656e 7472 792c 2027 7379 6d62  ing(entry, 'symb
+00048ca0: 6f6c 2729 2c20 4e6f 6e65 2c20 4e6f 6e65  ol'), None, None
+00048cb0: 2c20 2773 7761 7027 292c 0a20 2020 2020  , 'swap'),.     
+00048cc0: 2020 2020 2020 2020 2020 2027 6675 6e64             'fund
+00048cd0: 696e 6752 6174 6527 3a20 7365 6c66 2e73  ingRate': self.s
+00048ce0: 6166 655f 6e75 6d62 6572 2865 6e74 7279  afe_number(entry
+00048cf0: 2c20 2766 756e 6469 6e67 5261 7465 2729  , 'fundingRate')
+00048d00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00048d10: 2020 2774 696d 6573 7461 6d70 273a 2074    'timestamp': t
+00048d20: 696d 6573 7461 6d70 2c0a 2020 2020 2020  imestamp,.      
+00048d30: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
+00048d40: 696d 6527 3a20 7365 6c66 2e69 736f 3836  ime': self.iso86
+00048d50: 3031 2874 696d 6573 7461 6d70 292c 0a20  01(timestamp),. 
+00048d60: 2020 2020 2020 2020 2020 207d 290a 2020             }).  
+00048d70: 2020 2020 2020 736f 7274 6564 203d 2073        sorted = s
+00048d80: 656c 662e 736f 7274 5f62 7928 7261 7465  elf.sort_by(rate
+00048d90: 732c 2027 7469 6d65 7374 616d 7027 290a  s, 'timestamp').
+00048da0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00048db0: 656c 662e 6669 6c74 6572 5f62 795f 7379  elf.filter_by_sy
+00048dc0: 6d62 6f6c 5f73 696e 6365 5f6c 696d 6974  mbol_since_limit
+00048dd0: 2873 6f72 7465 642c 2073 796d 626f 6c2c  (sorted, symbol,
+00048de0: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
+00048df0: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+00048e00: 7463 685f 6675 6e64 696e 675f 7261 7465  tch_funding_rate
+00048e10: 7328 7365 6c66 2c20 7379 6d62 6f6c 733a  s(self, symbols:
+00048e20: 204f 7074 696f 6e61 6c5b 4c69 7374 5b73   Optional[List[s
+00048e30: 7472 5d5d 203d 204e 6f6e 652c 2070 6172  tr]] = None, par
+00048e40: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00048e50: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00048e60: 6368 2074 6865 2066 756e 6469 6e67 2072  ch the funding r
+00048e70: 6174 6520 666f 7220 6d75 6c74 6970 6c65  ate for multiple
+00048e80: 206d 6172 6b65 7473 0a20 2020 2020 2020   markets.       
+00048e90: 203a 7061 7261 6d20 5b73 7472 5d7c 4e6f   :param [str]|No
+00048ea0: 6e65 2073 796d 626f 6c73 3a20 6c69 7374  ne symbols: list
+00048eb0: 206f 6620 756e 6966 6965 6420 6d61 726b   of unified mark
+00048ec0: 6574 2073 796d 626f 6c73 0a20 2020 2020  et symbols.     
+00048ed0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+00048ee0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+00048ef0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+00048f00: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
+00048f10: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+00048f20: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+00048f30: 6374 3a20 6120 6469 6374 696f 6e61 7279  ct: a dictionary
+00048f40: 206f 6620 6066 756e 6469 6e67 2072 6174   of `funding rat
+00048f50: 6573 2073 7472 7563 7475 7265 7320 3c68  es structures <h
+00048f60: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00048f70: 2e63 6f6d 2f23 2f3f 6964 3d66 756e 6469  .com/#/?id=fundi
+00048f80: 6e67 2d72 6174 6573 2d73 7472 7563 7475  ng-rates-structu
+00048f90: 7265 3e60 2c20 696e 6465 7865 2062 7920  re>`, indexe by 
+00048fa0: 6d61 726b 6574 2073 796d 626f 6c73 0a20  market symbols. 
+00048fb0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00048fc0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+00048fd0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00048fe0: 2020 2020 2073 796d 626f 6c73 203d 2073       symbols = s
+00048ff0: 656c 662e 6d61 726b 6574 5f73 796d 626f  elf.market_symbo
+00049000: 6c73 2873 796d 626f 6c73 290a 2020 2020  ls(symbols).    
+00049010: 2020 2020 6d65 7468 6f64 203d 204e 6f6e      method = Non
+00049020: 650a 2020 2020 2020 2020 6465 6661 756c  e.        defaul
+00049030: 7454 7970 6520 3d20 7365 6c66 2e73 6166  tType = self.saf
+00049040: 655f 7374 7269 6e67 5f32 2873 656c 662e  e_string_2(self.
+00049050: 6f70 7469 6f6e 732c 2027 6665 7463 6846  options, 'fetchF
+00049060: 756e 6469 6e67 5261 7465 7327 2c20 2764  undingRates', 'd
+00049070: 6566 6175 6c74 5479 7065 272c 2027 6675  efaultType', 'fu
+00049080: 7475 7265 2729 0a20 2020 2020 2020 2074  ture').        t
+00049090: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
+000490a0: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
+000490b0: 7479 7065 272c 2064 6566 6175 6c74 5479  type', defaultTy
+000490c0: 7065 290a 2020 2020 2020 2020 7375 6254  pe).        subT
+000490d0: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
+000490e0: 2020 2073 7562 5479 7065 2c20 7061 7261     subType, para
+000490f0: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+00049100: 5f73 7562 5f74 7970 655f 616e 645f 7061  _sub_type_and_pa
+00049110: 7261 6d73 2827 6665 7463 6846 756e 6469  rams('fetchFundi
+00049120: 6e67 5261 7465 7327 2c20 4e6f 6e65 2c20  ngRates', None, 
+00049130: 7061 7261 6d73 2c20 276c 696e 6561 7227  params, 'linear'
+00049140: 290a 2020 2020 2020 2020 7175 6572 7920  ).        query 
+00049150: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+00049160: 6d73 2c20 2774 7970 6527 290a 2020 2020  ms, 'type').    
+00049170: 2020 2020 6966 2073 656c 662e 6973 5f6c      if self.is_l
+00049180: 696e 6561 7228 7479 7065 2c20 7375 6254  inear(type, subT
+00049190: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
+000491a0: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
+000491b0: 5075 626c 6963 4765 7450 7265 6d69 756d  PublicGetPremium
+000491c0: 496e 6465 7827 0a20 2020 2020 2020 2065  Index'.        e
+000491d0: 6c69 6620 7365 6c66 2e69 735f 696e 7665  lif self.is_inve
+000491e0: 7273 6528 7479 7065 2c20 7375 6254 7970  rse(type, subTyp
+000491f0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00049200: 6d65 7468 6f64 203d 2027 6461 7069 5075  method = 'dapiPu
+00049210: 626c 6963 4765 7450 7265 6d69 756d 496e  blicGetPremiumIn
+00049220: 6465 7827 0a20 2020 2020 2020 2065 6c73  dex'.        els
+00049230: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00049240: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
+00049250: 6428 7365 6c66 2e69 6420 2b20 2720 6665  d(self.id + ' fe
+00049260: 7463 6846 756e 6469 6e67 5261 7465 7328  tchFundingRates(
+00049270: 2920 7375 7070 6f72 7473 206c 696e 6561  ) supports linea
+00049280: 7220 616e 6420 696e 7665 7273 6520 636f  r and inverse co
+00049290: 6e74 7261 6374 7320 6f6e 6c79 2729 0a20  ntracts only'). 
+000492a0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+000492b0: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
+000492c0: 7365 6c66 2c20 6d65 7468 6f64 2928 7175  self, method)(qu
+000492d0: 6572 7929 0a20 2020 2020 2020 2072 6573  ery).        res
+000492e0: 756c 7420 3d20 5b5d 0a20 2020 2020 2020  ult = [].       
+000492f0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00049300: 302c 206c 656e 2872 6573 706f 6e73 6529  0, len(response)
+00049310: 293a 0a20 2020 2020 2020 2020 2020 2065  ):.            e
+00049320: 6e74 7279 203d 2072 6573 706f 6e73 655b  ntry = response[
+00049330: 695d 0a20 2020 2020 2020 2020 2020 2070  i].            p
+00049340: 6172 7365 6420 3d20 7365 6c66 2e70 6172  arsed = self.par
+00049350: 7365 5f66 756e 6469 6e67 5f72 6174 6528  se_funding_rate(
+00049360: 656e 7472 7929 0a20 2020 2020 2020 2020  entry).         
+00049370: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
+00049380: 2870 6172 7365 6429 0a20 2020 2020 2020  (parsed).       
+00049390: 2072 6574 7572 6e20 7365 6c66 2e66 696c   return self.fil
+000493a0: 7465 725f 6279 5f61 7272 6179 2872 6573  ter_by_array(res
+000493b0: 756c 742c 2027 7379 6d62 6f6c 272c 2073  ult, 'symbol', s
+000493c0: 796d 626f 6c73 290a 0a20 2020 2064 6566  ymbols)..    def
+000493d0: 2070 6172 7365 5f66 756e 6469 6e67 5f72   parse_funding_r
+000493e0: 6174 6528 7365 6c66 2c20 636f 6e74 7261  ate(self, contra
+000493f0: 6374 2c20 6d61 726b 6574 3d4e 6f6e 6529  ct, market=None)
+00049400: 3a0a 2020 2020 2020 2020 2320 656e 7375  :.        # ensu
+00049410: 7265 2069 7420 6d61 7463 6865 7320 7769  re it matches wi
+00049420: 7468 2068 7474 7073 3a2f 2f77 7777 2e62  th https://www.b
+00049430: 696e 616e 6365 2e63 6f6d 2f65 6e2f 6675  inance.com/en/fu
+00049440: 7475 7265 732f 6675 6e64 696e 672d 6869  tures/funding-hi
+00049450: 7374 6f72 792f 300a 2020 2020 2020 2020  story/0.        
+00049460: 230a 2020 2020 2020 2020 2320 2020 7b0a  #.        #   {.
+00049470: 2020 2020 2020 2020 2320 2020 2020 2273          #     "s
+00049480: 796d 626f 6c22 3a20 2242 5443 5553 4454  ymbol": "BTCUSDT
+00049490: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000494a0: 2022 6d61 726b 5072 6963 6522 3a20 2234   "markPrice": "4
+000494b0: 3538 3032 2e38 3131 3239 3839 3222 2c0a  5802.81129892",.
+000494c0: 2020 2020 2020 2020 2320 2020 2020 2269          #     "i
+000494d0: 6e64 6578 5072 6963 6522 3a20 2234 3537  ndexPrice": "457
+000494e0: 3435 2e34 3737 3031 3931 3522 2c0a 2020  45.47701915",.  
+000494f0: 2020 2020 2020 2320 2020 2020 2265 7374        #     "est
+00049500: 696d 6174 6564 5365 7474 6c65 5072 6963  imatedSettlePric
+00049510: 6522 3a20 2234 3531 3333 2e39 3137 3533  e": "45133.91753
+00049520: 3637 3122 2c0a 2020 2020 2020 2020 2320  671",.        # 
+00049530: 2020 2020 226c 6173 7446 756e 6469 6e67      "lastFunding
+00049540: 5261 7465 223a 2022 302e 3030 3036 3335  Rate": "0.000635
+00049550: 3231 222c 0a20 2020 2020 2020 2023 2020  21",.        #  
+00049560: 2020 2022 696e 7465 7265 7374 5261 7465     "interestRate
+00049570: 223a 2022 302e 3030 3031 3030 3030 222c  ": "0.00010000",
+00049580: 0a20 2020 2020 2020 2023 2020 2020 2022  .        #     "
+00049590: 6e65 7874 4675 6e64 696e 6754 696d 6522  nextFundingTime"
+000495a0: 3a20 2231 3632 3132 3637 3230 3030 3030  : "1621267200000
+000495b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000495c0: 2022 7469 6d65 223a 2022 3136 3231 3235   "time": "162125
+000495d0: 3233 3434 3030 3122 0a20 2020 2020 2020  2344001".       
+000495e0: 2023 2020 7d0a 2020 2020 2020 2020 230a   #  }.        #.
+000495f0: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
+00049600: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
+00049610: 7465 6765 7228 636f 6e74 7261 6374 2c20  teger(contract, 
+00049620: 2774 696d 6527 290a 2020 2020 2020 2020  'time').        
+00049630: 6d61 726b 6574 4964 203d 2073 656c 662e  marketId = self.
+00049640: 7361 6665 5f73 7472 696e 6728 636f 6e74  safe_string(cont
+00049650: 7261 6374 2c20 2773 796d 626f 6c27 290a  ract, 'symbol').
+00049660: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
+00049670: 2073 656c 662e 7361 6665 5f73 796d 626f   self.safe_symbo
+00049680: 6c28 6d61 726b 6574 4964 2c20 6d61 726b  l(marketId, mark
+00049690: 6574 2c20 4e6f 6e65 2c20 2763 6f6e 7472  et, None, 'contr
+000496a0: 6163 7427 290a 2020 2020 2020 2020 6d61  act').        ma
+000496b0: 726b 5072 6963 6520 3d20 7365 6c66 2e73  rkPrice = self.s
+000496c0: 6166 655f 6e75 6d62 6572 2863 6f6e 7472  afe_number(contr
+000496d0: 6163 742c 2027 6d61 726b 5072 6963 6527  act, 'markPrice'
+000496e0: 290a 2020 2020 2020 2020 696e 6465 7850  ).        indexP
+000496f0: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+00049700: 5f6e 756d 6265 7228 636f 6e74 7261 6374  _number(contract
+00049710: 2c20 2769 6e64 6578 5072 6963 6527 290a  , 'indexPrice').
+00049720: 2020 2020 2020 2020 696e 7465 7265 7374          interest
+00049730: 5261 7465 203d 2073 656c 662e 7361 6665  Rate = self.safe
+00049740: 5f6e 756d 6265 7228 636f 6e74 7261 6374  _number(contract
+00049750: 2c20 2769 6e74 6572 6573 7452 6174 6527  , 'interestRate'
+00049760: 290a 2020 2020 2020 2020 6573 7469 6d61  ).        estima
+00049770: 7465 6453 6574 746c 6550 7269 6365 203d  tedSettlePrice =
+00049780: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+00049790: 7228 636f 6e74 7261 6374 2c20 2765 7374  r(contract, 'est
+000497a0: 696d 6174 6564 5365 7474 6c65 5072 6963  imatedSettlePric
+000497b0: 6527 290a 2020 2020 2020 2020 6675 6e64  e').        fund
+000497c0: 696e 6752 6174 6520 3d20 7365 6c66 2e73  ingRate = self.s
+000497d0: 6166 655f 6e75 6d62 6572 2863 6f6e 7472  afe_number(contr
+000497e0: 6163 742c 2027 6c61 7374 4675 6e64 696e  act, 'lastFundin
+000497f0: 6752 6174 6527 290a 2020 2020 2020 2020  gRate').        
+00049800: 6675 6e64 696e 6754 696d 6520 3d20 7365  fundingTime = se
+00049810: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
+00049820: 636f 6e74 7261 6374 2c20 276e 6578 7446  contract, 'nextF
+00049830: 756e 6469 6e67 5469 6d65 2729 0a20 2020  undingTime').   
+00049840: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
+00049850: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+00049860: 3a20 636f 6e74 7261 6374 2c0a 2020 2020  : contract,.    
+00049870: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00049880: 3a20 7379 6d62 6f6c 2c0a 2020 2020 2020  : symbol,.      
+00049890: 2020 2020 2020 276d 6172 6b50 7269 6365        'markPrice
+000498a0: 273a 206d 6172 6b50 7269 6365 2c0a 2020  ': markPrice,.  
+000498b0: 2020 2020 2020 2020 2020 2769 6e64 6578            'index
+000498c0: 5072 6963 6527 3a20 696e 6465 7850 7269  Price': indexPri
+000498d0: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
+000498e0: 2769 6e74 6572 6573 7452 6174 6527 3a20  'interestRate': 
+000498f0: 696e 7465 7265 7374 5261 7465 2c0a 2020  interestRate,.  
+00049900: 2020 2020 2020 2020 2020 2765 7374 696d            'estim
+00049910: 6174 6564 5365 7474 6c65 5072 6963 6527  atedSettlePrice'
+00049920: 3a20 6573 7469 6d61 7465 6453 6574 746c  : estimatedSettl
+00049930: 6550 7269 6365 2c0a 2020 2020 2020 2020  ePrice,.        
+00049940: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
+00049950: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
+00049960: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
+00049970: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
+00049980: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
+00049990: 2020 2020 2020 2020 2027 6675 6e64 696e           'fundin
+000499a0: 6752 6174 6527 3a20 6675 6e64 696e 6752  gRate': fundingR
+000499b0: 6174 652c 0a20 2020 2020 2020 2020 2020  ate,.           
+000499c0: 2027 6675 6e64 696e 6754 696d 6573 7461   'fundingTimesta
+000499d0: 6d70 273a 2066 756e 6469 6e67 5469 6d65  mp': fundingTime
+000499e0: 2c0a 2020 2020 2020 2020 2020 2020 2766  ,.            'f
+000499f0: 756e 6469 6e67 4461 7465 7469 6d65 273a  undingDatetime':
+00049a00: 2073 656c 662e 6973 6f38 3630 3128 6675   self.iso8601(fu
+00049a10: 6e64 696e 6754 696d 6529 2c0a 2020 2020  ndingTime),.    
+00049a20: 2020 2020 2020 2020 276e 6578 7446 756e          'nextFun
+00049a30: 6469 6e67 5261 7465 273a 204e 6f6e 652c  dingRate': None,
+00049a40: 0a20 2020 2020 2020 2020 2020 2027 6e65  .            'ne
+00049a50: 7874 4675 6e64 696e 6754 696d 6573 7461  xtFundingTimesta
+00049a60: 6d70 273a 204e 6f6e 652c 0a20 2020 2020  mp': None,.     
+00049a70: 2020 2020 2020 2027 6e65 7874 4675 6e64         'nextFund
+00049a80: 696e 6744 6174 6574 696d 6527 3a20 4e6f  ingDatetime': No
+00049a90: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00049aa0: 2770 7265 7669 6f75 7346 756e 6469 6e67  'previousFunding
+00049ab0: 5261 7465 273a 204e 6f6e 652c 0a20 2020  Rate': None,.   
+00049ac0: 2020 2020 2020 2020 2027 7072 6576 696f           'previo
+00049ad0: 7573 4675 6e64 696e 6754 696d 6573 7461  usFundingTimesta
+00049ae0: 6d70 273a 204e 6f6e 652c 0a20 2020 2020  mp': None,.     
+00049af0: 2020 2020 2020 2027 7072 6576 696f 7573         'previous
+00049b00: 4675 6e64 696e 6744 6174 6574 696d 6527  FundingDatetime'
+00049b10: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00049b20: 7d0a 0a20 2020 2064 6566 2070 6172 7365  }..    def parse
+00049b30: 5f61 6363 6f75 6e74 5f70 6f73 6974 696f  _account_positio
+00049b40: 6e73 2873 656c 662c 2061 6363 6f75 6e74  ns(self, account
+00049b50: 293a 0a20 2020 2020 2020 2070 6f73 6974  ):.        posit
+00049b60: 696f 6e73 203d 2073 656c 662e 7361 6665  ions = self.safe
+00049b70: 5f76 616c 7565 2861 6363 6f75 6e74 2c20  _value(account, 
+00049b80: 2770 6f73 6974 696f 6e73 2729 0a20 2020  'positions').   
+00049b90: 2020 2020 2061 7373 6574 7320 3d20 7365       assets = se
+00049ba0: 6c66 2e73 6166 655f 7661 6c75 6528 6163  lf.safe_value(ac
+00049bb0: 636f 756e 742c 2027 6173 7365 7473 272c  count, 'assets',
+00049bc0: 205b 5d29 0a20 2020 2020 2020 2062 616c   []).        bal
+00049bd0: 616e 6365 7320 3d20 7b7d 0a20 2020 2020  ances = {}.     
+00049be0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+00049bf0: 6528 302c 206c 656e 2861 7373 6574 7329  e(0, len(assets)
+00049c00: 293a 0a20 2020 2020 2020 2020 2020 2065  ):.            e
+00049c10: 6e74 7279 203d 2061 7373 6574 735b 695d  ntry = assets[i]
+00049c20: 0a20 2020 2020 2020 2020 2020 2063 7572  .            cur
+00049c30: 7265 6e63 7949 6420 3d20 7365 6c66 2e73  rencyId = self.s
+00049c40: 6166 655f 7374 7269 6e67 2865 6e74 7279  afe_string(entry
+00049c50: 2c20 2761 7373 6574 2729 0a20 2020 2020  , 'asset').     
+00049c60: 2020 2020 2020 2063 6f64 6520 3d20 7365         code = se
+00049c70: 6c66 2e73 6166 655f 6375 7272 656e 6379  lf.safe_currency
+00049c80: 5f63 6f64 6528 6375 7272 656e 6379 4964  _code(currencyId
+00049c90: 290a 2020 2020 2020 2020 2020 2020 6372  ).            cr
+00049ca0: 6f73 7357 616c 6c65 7442 616c 616e 6365  ossWalletBalance
+00049cb0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00049cc0: 696e 6728 656e 7472 792c 2027 6372 6f73  ing(entry, 'cros
+00049cd0: 7357 616c 6c65 7442 616c 616e 6365 2729  sWalletBalance')
+00049ce0: 0a20 2020 2020 2020 2020 2020 2063 726f  .            cro
+00049cf0: 7373 556e 506e 6c20 3d20 7365 6c66 2e73  ssUnPnl = self.s
+00049d00: 6166 655f 7374 7269 6e67 2865 6e74 7279  afe_string(entry
+00049d10: 2c20 2763 726f 7373 556e 506e 6c27 290a  , 'crossUnPnl').
+00049d20: 2020 2020 2020 2020 2020 2020 6261 6c61              bala
+00049d30: 6e63 6573 5b63 6f64 655d 203d 207b 0a20  nces[code] = {. 
+00049d40: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00049d50: 6372 6f73 734d 6172 6769 6e27 3a20 5072  crossMargin': Pr
+00049d60: 6563 6973 652e 7374 7269 6e67 5f61 6464  ecise.string_add
+00049d70: 2863 726f 7373 5761 6c6c 6574 4261 6c61  (crossWalletBala
+00049d80: 6e63 652c 2063 726f 7373 556e 506e 6c29  nce, crossUnPnl)
+00049d90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00049da0: 2020 2763 726f 7373 5761 6c6c 6574 4261    'crossWalletBa
+00049db0: 6c61 6e63 6527 3a20 6372 6f73 7357 616c  lance': crossWal
+00049dc0: 6c65 7442 616c 616e 6365 2c0a 2020 2020  letBalance,.    
+00049dd0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00049de0: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
+00049df0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+00049e00: 616e 6765 2830 2c20 6c65 6e28 706f 7369  ange(0, len(posi
+00049e10: 7469 6f6e 7329 293a 0a20 2020 2020 2020  tions)):.       
+00049e20: 2020 2020 2070 6f73 6974 696f 6e20 3d20       position = 
+00049e30: 706f 7369 7469 6f6e 735b 695d 0a20 2020  positions[i].   
+00049e40: 2020 2020 2020 2020 206d 6172 6b65 7449           marketI
+00049e50: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+00049e60: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
+00049e70: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+00049e80: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00049e90: 6c66 2e73 6166 655f 6d61 726b 6574 286d  lf.safe_market(m
+00049ea0: 6172 6b65 7449 642c 204e 6f6e 652c 204e  arketId, None, N
+00049eb0: 6f6e 652c 2027 636f 6e74 7261 6374 2729  one, 'contract')
+00049ec0: 0a20 2020 2020 2020 2020 2020 2063 6f64  .            cod
+00049ed0: 6520 3d20 6d61 726b 6574 5b27 7175 6f74  e = market['quot
+00049ee0: 6527 5d20 6966 206d 6172 6b65 745b 276c  e'] if market['l
+00049ef0: 696e 6561 7227 5d20 656c 7365 206d 6172  inear'] else mar
+00049f00: 6b65 745b 2762 6173 6527 5d0a 2020 2020  ket['base'].    
+00049f10: 2020 2020 2020 2020 2320 736f 6d65 7469          # someti
+00049f20: 6d65 7320 6e6f 7420 616c 6c20 7468 6520  mes not all the 
+00049f30: 636f 6465 7320 6172 6520 636f 7272 6563  codes are correc
+00049f40: 746c 7920 7265 7475 726e 6564 2e2e 2e0a  tly returned....
+00049f50: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+00049f60: 6f64 6520 696e 2062 616c 616e 6365 733a  ode in balances:
+00049f70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00049f80: 2070 6172 7365 6420 3d20 7365 6c66 2e70   parsed = self.p
+00049f90: 6172 7365 5f61 6363 6f75 6e74 5f70 6f73  arse_account_pos
+00049fa0: 6974 696f 6e28 7365 6c66 2e65 7874 656e  ition(self.exten
+00049fb0: 6428 706f 7369 7469 6f6e 2c20 7b0a 2020  d(position, {.  
+00049fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049fd0: 2020 2763 726f 7373 4d61 7267 696e 273a    'crossMargin':
+00049fe0: 2062 616c 616e 6365 735b 636f 6465 5d5b   balances[code][
+00049ff0: 2763 726f 7373 4d61 7267 696e 275d 2c0a  'crossMargin'],.
+0004a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a010: 2020 2020 2763 726f 7373 5761 6c6c 6574      'crossWallet
+0004a020: 4261 6c61 6e63 6527 3a20 6261 6c61 6e63  Balance': balanc
+0004a030: 6573 5b63 6f64 655d 5b27 6372 6f73 7357  es[code]['crossW
+0004a040: 616c 6c65 7442 616c 616e 6365 275d 2c0a  alletBalance'],.
+0004a050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a060: 7d29 2c20 6d61 726b 6574 290a 2020 2020  }), market).    
+0004a070: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0004a080: 6c74 2e61 7070 656e 6428 7061 7273 6564  lt.append(parsed
+0004a090: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0004a0a0: 2072 6573 756c 740a 0a20 2020 2064 6566   result..    def
+0004a0b0: 2070 6172 7365 5f61 6363 6f75 6e74 5f70   parse_account_p
+0004a0c0: 6f73 6974 696f 6e28 7365 6c66 2c20 706f  osition(self, po
+0004a0d0: 7369 7469 6f6e 2c20 6d61 726b 6574 3d4e  sition, market=N
+0004a0e0: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+0004a0f0: 2020 2020 2020 2020 2320 7573 646d 0a20          # usdm. 
+0004a100: 2020 2020 2020 2023 2020 2020 7b0a 2020         #    {.  
+0004a110: 2020 2020 2020 2320 2020 2020 2020 2273        #       "s
+0004a120: 796d 626f 6c22 3a20 2242 5443 4255 5344  ymbol": "BTCBUSD
+0004a130: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a140: 2020 2022 696e 6974 6961 6c4d 6172 6769     "initialMargi
+0004a150: 6e22 3a20 2230 222c 0a20 2020 2020 2020  n": "0",.       
+0004a160: 2023 2020 2020 2020 2022 6d61 696e 744d   #       "maintM
+0004a170: 6172 6769 6e22 3a20 2230 222c 0a20 2020  argin": "0",.   
+0004a180: 2020 2020 2023 2020 2020 2020 2022 756e       #       "un
+0004a190: 7265 616c 697a 6564 5072 6f66 6974 223a  realizedProfit":
+0004a1a0: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
+0004a1b0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0004a1c0: 706f 7369 7469 6f6e 496e 6974 6961 6c4d  positionInitialM
+0004a1d0: 6172 6769 6e22 3a20 2230 222c 0a20 2020  argin": "0",.   
+0004a1e0: 2020 2020 2023 2020 2020 2020 2022 6f70       #       "op
+0004a1f0: 656e 4f72 6465 7249 6e69 7469 616c 4d61  enOrderInitialMa
+0004a200: 7267 696e 223a 2022 3022 2c0a 2020 2020  rgin": "0",.    
+0004a210: 2020 2020 2320 2020 2020 2020 226c 6576      #       "lev
+0004a220: 6572 6167 6522 3a20 2232 3022 2c0a 2020  erage": "20",.  
+0004a230: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
+0004a240: 736f 6c61 7465 6422 3a20 4661 6c73 652c  solated": False,
+0004a250: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004a260: 2022 656e 7472 7950 7269 6365 223a 2022   "entryPrice": "
+0004a270: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
+0004a280: 2023 2020 2020 2020 2022 6d61 784e 6f74   #       "maxNot
+0004a290: 696f 6e61 6c22 3a20 2231 3030 3030 3022  ional": "100000"
+0004a2a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004a2b0: 2020 2270 6f73 6974 696f 6e53 6964 6522    "positionSide"
+0004a2c0: 3a20 2242 4f54 4822 2c0a 2020 2020 2020  : "BOTH",.      
+0004a2d0: 2020 2320 2020 2020 2020 2270 6f73 6974    #       "posit
+0004a2e0: 696f 6e41 6d74 223a 2022 302e 3030 3022  ionAmt": "0.000"
+0004a2f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004a300: 2020 226e 6f74 696f 6e61 6c22 3a20 2230    "notional": "0
+0004a310: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a320: 2020 2022 6973 6f6c 6174 6564 5761 6c6c     "isolatedWall
+0004a330: 6574 223a 2022 3022 2c0a 2020 2020 2020  et": "0",.      
+0004a340: 2020 2320 2020 2020 2020 2275 7064 6174    #       "updat
+0004a350: 6554 696d 6522 3a20 2230 222c 0a20 2020  eTime": "0",.   
+0004a360: 2020 2020 2023 2020 2020 2020 2022 6372       #       "cr
+0004a370: 6f73 734d 6172 6769 6e22 3a20 2231 3030  ossMargin": "100
+0004a380: 2e39 3336 3334 3830 3922 2c0a 2020 2020  .93634809",.    
+0004a390: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0004a3a0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0004a3b0: 636f 696e 6d0a 2020 2020 2020 2020 2320  coinm.        # 
+0004a3c0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0004a3d0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+0004a3e0: 2242 5443 5553 445f 3231 3036 3235 222c  "BTCUSD_210625",
+0004a3f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004a400: 2022 696e 6974 6961 6c4d 6172 6769 6e22   "initialMargin"
+0004a410: 3a20 2230 2e30 3030 3234 3339 3322 2c0a  : "0.00024393",.
+0004a420: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a430: 226d 6169 6e74 4d61 7267 696e 223a 2022  "maintMargin": "
+0004a440: 302e 3030 3030 3234 3339 222c 0a20 2020  0.00002439",.   
+0004a450: 2020 2020 2023 2020 2020 2020 2022 756e       #       "un
+0004a460: 7265 616c 697a 6564 5072 6f66 6974 223a  realizedProfit":
+0004a470: 2022 2d30 2e30 3030 3030 3136 3322 2c0a   "-0.00000163",.
+0004a480: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a490: 2270 6f73 6974 696f 6e49 6e69 7469 616c  "positionInitial
+0004a4a0: 4d61 7267 696e 223a 2022 302e 3030 3032  Margin": "0.0002
+0004a4b0: 3433 3933 222c 0a20 2020 2020 2020 2023  4393",.        #
+0004a4c0: 2020 2020 2020 2022 6f70 656e 4f72 6465         "openOrde
+0004a4d0: 7249 6e69 7469 616c 4d61 7267 696e 223a  rInitialMargin":
+0004a4e0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0004a4f0: 2020 2020 2020 226c 6576 6572 6167 6522        "leverage"
+0004a500: 3a20 2231 3022 2c0a 2020 2020 2020 2020  : "10",.        
+0004a510: 2320 2020 2020 2020 2269 736f 6c61 7465  #       "isolate
+0004a520: 6422 3a20 4661 6c73 652c 0a20 2020 2020  d": False,.     
+0004a530: 2020 2023 2020 2020 2020 2022 706f 7369     #       "posi
+0004a540: 7469 6f6e 5369 6465 223a 2022 424f 5448  tionSide": "BOTH
+0004a550: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a560: 2020 2022 656e 7472 7950 7269 6365 223a     "entryPrice":
+0004a570: 2022 3431 3032 312e 3230 3030 3030 3639   "41021.20000069
+0004a580: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a590: 2020 2022 6d61 7851 7479 223a 2022 3130     "maxQty": "10
+0004a5a0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0004a5b0: 2020 2020 226e 6f74 696f 6e61 6c56 616c      "notionalVal
+0004a5c0: 7565 223a 2022 302e 3030 3234 3339 3339  ue": "0.00243939
+0004a5d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a5e0: 2020 2022 6973 6f6c 6174 6564 5761 6c6c     "isolatedWall
+0004a5f0: 6574 223a 2022 3022 2c0a 2020 2020 2020  et": "0",.      
+0004a600: 2020 2320 2020 2020 2020 2263 726f 7373    #       "cross
+0004a610: 4d61 7267 696e 223a 2022 302e 3331 3422  Margin": "0.314"
+0004a620: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004a630: 2022 6372 6f73 7357 616c 6c65 7442 616c   "crossWalletBal
+0004a640: 616e 6365 223a 2022 3334 222c 0a20 2020  ance": "34",.   
+0004a650: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0004a660: 2020 2020 2023 0a20 2020 2020 2020 206d       #.        m
+0004a670: 6172 6b65 7449 6420 3d20 7365 6c66 2e73  arketId = self.s
+0004a680: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
+0004a690: 696f 6e2c 2027 7379 6d62 6f6c 2729 0a20  ion, 'symbol'). 
+0004a6a0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+0004a6b0: 7365 6c66 2e73 6166 655f 6d61 726b 6574  self.safe_market
+0004a6c0: 286d 6172 6b65 7449 642c 206d 6172 6b65  (marketId, marke
+0004a6d0: 742c 204e 6f6e 652c 2027 636f 6e74 7261  t, None, 'contra
+0004a6e0: 6374 2729 0a20 2020 2020 2020 2073 796d  ct').        sym
+0004a6f0: 626f 6c20 3d20 7365 6c66 2e73 6166 655f  bol = self.safe_
+0004a700: 7374 7269 6e67 286d 6172 6b65 742c 2027  string(market, '
+0004a710: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+0004a720: 206c 6576 6572 6167 6553 7472 696e 6720   leverageString 
+0004a730: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0004a740: 6e67 2870 6f73 6974 696f 6e2c 2027 6c65  ng(position, 'le
+0004a750: 7665 7261 6765 2729 0a20 2020 2020 2020  verage').       
+0004a760: 206c 6576 6572 6167 6520 3d20 696e 7428   leverage = int(
+0004a770: 6c65 7665 7261 6765 5374 7269 6e67 290a  leverageString).
+0004a780: 2020 2020 2020 2020 696e 6974 6961 6c4d          initialM
+0004a790: 6172 6769 6e53 7472 696e 6720 3d20 7365  arginString = se
+0004a7a0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+0004a7b0: 6f73 6974 696f 6e2c 2027 696e 6974 6961  osition, 'initia
+0004a7c0: 6c4d 6172 6769 6e27 290a 2020 2020 2020  lMargin').      
+0004a7d0: 2020 696e 6974 6961 6c4d 6172 6769 6e20    initialMargin 
+0004a7e0: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0004a7f0: 6265 7228 696e 6974 6961 6c4d 6172 6769  ber(initialMargi
+0004a800: 6e53 7472 696e 6729 0a20 2020 2020 2020  nString).       
+0004a810: 2069 6e69 7469 616c 4d61 7267 696e 5065   initialMarginPe
+0004a820: 7263 656e 7461 6765 5374 7269 6e67 203d  rcentageString =
+0004a830: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004a840: 6469 7628 2731 272c 206c 6576 6572 6167  div('1', leverag
+0004a850: 6553 7472 696e 672c 2038 290a 2020 2020  eString, 8).    
+0004a860: 2020 2020 7261 7469 6f6e 616c 203d 2028      rational = (
+0004a870: 3130 3030 2025 206c 6576 6572 6167 6529  1000 % leverage)
+0004a880: 203d 3d20 300a 2020 2020 2020 2020 6966   == 0.        if
+0004a890: 206e 6f74 2072 6174 696f 6e61 6c3a 0a20   not rational:. 
+0004a8a0: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
+0004a8b0: 616c 4d61 7267 696e 5065 7263 656e 7461  alMarginPercenta
+0004a8c0: 6765 5374 7269 6e67 203d 2050 7265 6369  geString = Preci
+0004a8d0: 7365 2e73 7472 696e 675f 6469 7628 5072  se.string_div(Pr
+0004a8e0: 6563 6973 652e 7374 7269 6e67 5f61 6464  ecise.string_add
+0004a8f0: 2869 6e69 7469 616c 4d61 7267 696e 5065  (initialMarginPe
+0004a900: 7263 656e 7461 6765 5374 7269 6e67 2c20  rcentageString, 
+0004a910: 2731 652d 3827 292c 2027 3127 2c20 3829  '1e-8'), '1', 8)
+0004a920: 0a20 2020 2020 2020 2023 2074 6f20 6e6f  .        # to no
+0004a930: 7469 6f6e 616c 5661 6c75 650a 2020 2020  tionalValue.    
+0004a940: 2020 2020 7573 646d 203d 2028 276e 6f74      usdm = ('not
+0004a950: 696f 6e61 6c27 2069 6e20 706f 7369 7469  ional' in positi
+0004a960: 6f6e 290a 2020 2020 2020 2020 6d61 696e  on).        main
+0004a970: 7465 6e61 6e63 654d 6172 6769 6e53 7472  tenanceMarginStr
+0004a980: 696e 6720 3d20 7365 6c66 2e73 6166 655f  ing = self.safe_
+0004a990: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
+0004a9a0: 2027 6d61 696e 744d 6172 6769 6e27 290a   'maintMargin').
+0004a9b0: 2020 2020 2020 2020 6d61 696e 7465 6e61          maintena
+0004a9c0: 6e63 654d 6172 6769 6e20 3d20 7365 6c66  nceMargin = self
+0004a9d0: 2e70 6172 7365 5f6e 756d 6265 7228 6d61  .parse_number(ma
+0004a9e0: 696e 7465 6e61 6e63 654d 6172 6769 6e53  intenanceMarginS
+0004a9f0: 7472 696e 6729 0a20 2020 2020 2020 2065  tring).        e
+0004aa00: 6e74 7279 5072 6963 6553 7472 696e 6720  ntryPriceString 
+0004aa10: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0004aa20: 6e67 2870 6f73 6974 696f 6e2c 2027 656e  ng(position, 'en
+0004aa30: 7472 7950 7269 6365 2729 0a20 2020 2020  tryPrice').     
+0004aa40: 2020 2065 6e74 7279 5072 6963 6520 3d20     entryPrice = 
+0004aa50: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
+0004aa60: 7228 656e 7472 7950 7269 6365 5374 7269  r(entryPriceStri
+0004aa70: 6e67 290a 2020 2020 2020 2020 6e6f 7469  ng).        noti
+0004aa80: 6f6e 616c 5374 7269 6e67 203d 2073 656c  onalString = sel
+0004aa90: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
+0004aaa0: 706f 7369 7469 6f6e 2c20 276e 6f74 696f  position, 'notio
+0004aab0: 6e61 6c27 2c20 276e 6f74 696f 6e61 6c56  nal', 'notionalV
+0004aac0: 616c 7565 2729 0a20 2020 2020 2020 206e  alue').        n
+0004aad0: 6f74 696f 6e61 6c53 7472 696e 6741 6273  otionalStringAbs
+0004aae0: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
+0004aaf0: 675f 6162 7328 6e6f 7469 6f6e 616c 5374  g_abs(notionalSt
+0004ab00: 7269 6e67 290a 2020 2020 2020 2020 6e6f  ring).        no
+0004ab10: 7469 6f6e 616c 203d 2073 656c 662e 7061  tional = self.pa
+0004ab20: 7273 655f 6e75 6d62 6572 286e 6f74 696f  rse_number(notio
+0004ab30: 6e61 6c53 7472 696e 6741 6273 290a 2020  nalStringAbs).  
+0004ab40: 2020 2020 2020 636f 6e74 7261 6374 7353        contractsS
+0004ab50: 7472 696e 6720 3d20 7365 6c66 2e73 6166  tring = self.saf
+0004ab60: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
+0004ab70: 6e2c 2027 706f 7369 7469 6f6e 416d 7427  n, 'positionAmt'
+0004ab80: 290a 2020 2020 2020 2020 636f 6e74 7261  ).        contra
+0004ab90: 6374 7353 7472 696e 6741 6273 203d 2050  ctsStringAbs = P
+0004aba0: 7265 6369 7365 2e73 7472 696e 675f 6162  recise.string_ab
+0004abb0: 7328 636f 6e74 7261 6374 7353 7472 696e  s(contractsStrin
+0004abc0: 6729 0a20 2020 2020 2020 2069 6620 636f  g).        if co
+0004abd0: 6e74 7261 6374 7353 7472 696e 6720 6973  ntractsString is
+0004abe0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0004abf0: 2020 2065 6e74 7279 4e6f 7469 6f6e 616c     entryNotional
+0004ac00: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
+0004ac10: 675f 6d75 6c28 5072 6563 6973 652e 7374  g_mul(Precise.st
+0004ac20: 7269 6e67 5f6d 756c 286c 6576 6572 6167  ring_mul(leverag
+0004ac30: 6553 7472 696e 672c 2069 6e69 7469 616c  eString, initial
+0004ac40: 4d61 7267 696e 5374 7269 6e67 292c 2065  MarginString), e
+0004ac50: 6e74 7279 5072 6963 6553 7472 696e 6729  ntryPriceString)
+0004ac60: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+0004ac70: 7472 6163 7453 697a 654e 6577 203d 2073  tractSizeNew = s
+0004ac80: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0004ac90: 6d61 726b 6574 2c20 2763 6f6e 7472 6163  market, 'contrac
+0004aca0: 7453 697a 6527 290a 2020 2020 2020 2020  tSize').        
+0004acb0: 2020 2020 636f 6e74 7261 6374 7353 7472      contractsStr
+0004acc0: 696e 6720 3d20 5072 6563 6973 652e 7374  ing = Precise.st
+0004acd0: 7269 6e67 5f64 6976 2865 6e74 7279 4e6f  ring_div(entryNo
+0004ace0: 7469 6f6e 616c 2c20 636f 6e74 7261 6374  tional, contract
+0004acf0: 5369 7a65 4e65 7729 0a20 2020 2020 2020  SizeNew).       
+0004ad00: 2020 2020 2063 6f6e 7472 6163 7473 5374       contractsSt
+0004ad10: 7269 6e67 4162 7320 3d20 5072 6563 6973  ringAbs = Precis
+0004ad20: 652e 7374 7269 6e67 5f64 6976 2850 7265  e.string_div(Pre
+0004ad30: 6369 7365 2e73 7472 696e 675f 6164 6428  cise.string_add(
+0004ad40: 636f 6e74 7261 6374 7353 7472 696e 672c  contractsString,
+0004ad50: 2027 302e 3527 292c 2027 3127 2c20 3029   '0.5'), '1', 0)
+0004ad60: 0a20 2020 2020 2020 2063 6f6e 7472 6163  .        contrac
+0004ad70: 7473 203d 2073 656c 662e 7061 7273 655f  ts = self.parse_
+0004ad80: 6e75 6d62 6572 2863 6f6e 7472 6163 7473  number(contracts
+0004ad90: 5374 7269 6e67 4162 7329 0a20 2020 2020  StringAbs).     
+0004ada0: 2020 206c 6576 6572 6167 6542 7261 636b     leverageBrack
+0004adb0: 6574 7320 3d20 7365 6c66 2e73 6166 655f  ets = self.safe_
+0004adc0: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
+0004add0: 6e73 2c20 276c 6576 6572 6167 6542 7261  ns, 'leverageBra
+0004ade0: 636b 6574 7327 2c20 7b7d 290a 2020 2020  ckets', {}).    
+0004adf0: 2020 2020 6c65 7665 7261 6765 4272 6163      leverageBrac
+0004ae00: 6b65 7420 3d20 7365 6c66 2e73 6166 655f  ket = self.safe_
+0004ae10: 7661 6c75 6528 6c65 7665 7261 6765 4272  value(leverageBr
+0004ae20: 6163 6b65 7473 2c20 7379 6d62 6f6c 2c20  ackets, symbol, 
+0004ae30: 5b5d 290a 2020 2020 2020 2020 6d61 696e  []).        main
+0004ae40: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004ae50: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
+0004ae60: 4e6f 6e65 0a20 2020 2020 2020 2066 6f72  None.        for
+0004ae70: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
+0004ae80: 656e 286c 6576 6572 6167 6542 7261 636b  en(leverageBrack
+0004ae90: 6574 2929 3a0a 2020 2020 2020 2020 2020  et)):.          
+0004aea0: 2020 6272 6163 6b65 7420 3d20 6c65 7665    bracket = leve
+0004aeb0: 7261 6765 4272 6163 6b65 745b 695d 0a20  rageBracket[i]. 
+0004aec0: 2020 2020 2020 2020 2020 2069 6620 5072             if Pr
+0004aed0: 6563 6973 652e 7374 7269 6e67 5f6c 7428  ecise.string_lt(
+0004aee0: 6e6f 7469 6f6e 616c 5374 7269 6e67 4162  notionalStringAb
+0004aef0: 732c 2062 7261 636b 6574 5b30 5d29 3a0a  s, bracket[0]):.
+0004af00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004af10: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+0004af20: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
+0004af30: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004af40: 696e 6720 3d20 6272 6163 6b65 745b 315d  ing = bracket[1]
+0004af50: 0a20 2020 2020 2020 206d 6169 6e74 656e  .        mainten
+0004af60: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
+0004af70: 7461 6765 203d 2073 656c 662e 7061 7273  tage = self.pars
+0004af80: 655f 6e75 6d62 6572 286d 6169 6e74 656e  e_number(mainten
+0004af90: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
+0004afa0: 7461 6765 5374 7269 6e67 290a 2020 2020  tageString).    
+0004afb0: 2020 2020 756e 7265 616c 697a 6564 506e      unrealizedPn
+0004afc0: 6c53 7472 696e 6720 3d20 7365 6c66 2e73  lString = self.s
+0004afd0: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
+0004afe0: 696f 6e2c 2027 756e 7265 616c 697a 6564  ion, 'unrealized
+0004aff0: 5072 6f66 6974 2729 0a20 2020 2020 2020  Profit').       
+0004b000: 2075 6e72 6561 6c69 7a65 6450 6e6c 203d   unrealizedPnl =
+0004b010: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
+0004b020: 6572 2875 6e72 6561 6c69 7a65 6450 6e6c  er(unrealizedPnl
+0004b030: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
+0004b040: 7469 6d65 7374 616d 7020 3d20 7365 6c66  timestamp = self
+0004b050: 2e73 6166 655f 696e 7465 6765 7228 706f  .safe_integer(po
+0004b060: 7369 7469 6f6e 2c20 2775 7064 6174 6554  sition, 'updateT
+0004b070: 696d 6527 290a 2020 2020 2020 2020 6966  ime').        if
+0004b080: 2074 696d 6573 7461 6d70 203d 3d20 303a   timestamp == 0:
+0004b090: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
+0004b0a0: 6573 7461 6d70 203d 204e 6f6e 650a 2020  estamp = None.  
+0004b0b0: 2020 2020 2020 6973 6f6c 6174 6564 203d        isolated =
+0004b0c0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0004b0d0: 2870 6f73 6974 696f 6e2c 2027 6973 6f6c  (position, 'isol
+0004b0e0: 6174 6564 2729 0a20 2020 2020 2020 206d  ated').        m
+0004b0f0: 6172 6769 6e4d 6f64 6520 3d20 4e6f 6e65  arginMode = None
+0004b100: 0a20 2020 2020 2020 2063 6f6c 6c61 7465  .        collate
+0004b110: 7261 6c53 7472 696e 6720 3d20 4e6f 6e65  ralString = None
+0004b120: 0a20 2020 2020 2020 2077 616c 6c65 7442  .        walletB
+0004b130: 616c 616e 6365 203d 204e 6f6e 650a 2020  alance = None.  
+0004b140: 2020 2020 2020 6966 2069 736f 6c61 7465        if isolate
+0004b150: 643a 0a20 2020 2020 2020 2020 2020 206d  d:.            m
+0004b160: 6172 6769 6e4d 6f64 6520 3d20 2769 736f  arginMode = 'iso
+0004b170: 6c61 7465 6427 0a20 2020 2020 2020 2020  lated'.         
+0004b180: 2020 2077 616c 6c65 7442 616c 616e 6365     walletBalance
+0004b190: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0004b1a0: 696e 6728 706f 7369 7469 6f6e 2c20 2769  ing(position, 'i
+0004b1b0: 736f 6c61 7465 6457 616c 6c65 7427 290a  solatedWallet').
+0004b1c0: 2020 2020 2020 2020 2020 2020 636f 6c6c              coll
+0004b1d0: 6174 6572 616c 5374 7269 6e67 203d 2050  ateralString = P
+0004b1e0: 7265 6369 7365 2e73 7472 696e 675f 6164  recise.string_ad
+0004b1f0: 6428 7761 6c6c 6574 4261 6c61 6e63 652c  d(walletBalance,
+0004b200: 2075 6e72 6561 6c69 7a65 6450 6e6c 5374   unrealizedPnlSt
+0004b210: 7269 6e67 290a 2020 2020 2020 2020 656c  ring).        el
+0004b220: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0004b230: 6d61 7267 696e 4d6f 6465 203d 2027 6372  marginMode = 'cr
+0004b240: 6f73 7327 0a20 2020 2020 2020 2020 2020  oss'.           
+0004b250: 2077 616c 6c65 7442 616c 616e 6365 203d   walletBalance =
+0004b260: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0004b270: 6728 706f 7369 7469 6f6e 2c20 2763 726f  g(position, 'cro
+0004b280: 7373 5761 6c6c 6574 4261 6c61 6e63 6527  ssWalletBalance'
+0004b290: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
+0004b2a0: 6c6c 6174 6572 616c 5374 7269 6e67 203d  llateralString =
+0004b2b0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0004b2c0: 6728 706f 7369 7469 6f6e 2c20 2763 726f  g(position, 'cro
+0004b2d0: 7373 4d61 7267 696e 2729 0a20 2020 2020  ssMargin').     
+0004b2e0: 2020 2063 6f6c 6c61 7465 7261 6c20 3d20     collateral = 
+0004b2f0: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
+0004b300: 7228 636f 6c6c 6174 6572 616c 5374 7269  r(collateralStri
+0004b310: 6e67 290a 2020 2020 2020 2020 6d61 7267  ng).        marg
+0004b320: 696e 5261 7469 6f20 3d20 4e6f 6e65 0a20  inRatio = None. 
+0004b330: 2020 2020 2020 2073 6964 6520 3d20 4e6f         side = No
+0004b340: 6e65 0a20 2020 2020 2020 2070 6572 6365  ne.        perce
+0004b350: 6e74 6167 6520 3d20 4e6f 6e65 0a20 2020  ntage = None.   
+0004b360: 2020 2020 206c 6971 7569 6461 7469 6f6e       liquidation
+0004b370: 5072 6963 6553 7472 696e 6752 6177 203d  PriceStringRaw =
+0004b380: 204e 6f6e 650a 2020 2020 2020 2020 6c69   None.        li
+0004b390: 7175 6964 6174 696f 6e50 7269 6365 203d  quidationPrice =
+0004b3a0: 204e 6f6e 650a 2020 2020 2020 2020 636f   None.        co
+0004b3b0: 6e74 7261 6374 5369 7a65 203d 2073 656c  ntractSize = sel
+0004b3c0: 662e 7361 6665 5f76 616c 7565 286d 6172  f.safe_value(mar
+0004b3d0: 6b65 742c 2027 636f 6e74 7261 6374 5369  ket, 'contractSi
+0004b3e0: 7a65 2729 0a20 2020 2020 2020 2063 6f6e  ze').        con
+0004b3f0: 7472 6163 7453 697a 6553 7472 696e 6720  tractSizeString 
+0004b400: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
+0004b410: 5f73 7472 696e 6728 636f 6e74 7261 6374  _string(contract
+0004b420: 5369 7a65 290a 2020 2020 2020 2020 6966  Size).        if
+0004b430: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004b440: 6571 7561 6c73 286e 6f74 696f 6e61 6c53  equals(notionalS
+0004b450: 7472 696e 672c 2027 3027 293a 0a20 2020  tring, '0'):.   
+0004b460: 2020 2020 2020 2020 2065 6e74 7279 5072           entryPr
+0004b470: 6963 6520 3d20 4e6f 6e65 0a20 2020 2020  ice = None.     
+0004b480: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0004b490: 2020 2020 2073 6964 6520 3d20 2773 686f       side = 'sho
+0004b4a0: 7274 2720 6966 2050 7265 6369 7365 2e73  rt' if Precise.s
+0004b4b0: 7472 696e 675f 6c74 286e 6f74 696f 6e61  tring_lt(notiona
+0004b4c0: 6c53 7472 696e 672c 2027 3027 2920 656c  lString, '0') el
+0004b4d0: 7365 2027 6c6f 6e67 270a 2020 2020 2020  se 'long'.      
+0004b4e0: 2020 2020 2020 6d61 7267 696e 5261 7469        marginRati
+0004b4f0: 6f20 3d20 7365 6c66 2e70 6172 7365 5f6e  o = self.parse_n
+0004b500: 756d 6265 7228 5072 6563 6973 652e 7374  umber(Precise.st
+0004b510: 7269 6e67 5f64 6976 2850 7265 6369 7365  ring_div(Precise
+0004b520: 2e73 7472 696e 675f 6164 6428 5072 6563  .string_add(Prec
+0004b530: 6973 652e 7374 7269 6e67 5f64 6976 286d  ise.string_div(m
+0004b540: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+0004b550: 5374 7269 6e67 2c20 636f 6c6c 6174 6572  String, collater
+0004b560: 616c 5374 7269 6e67 292c 2027 3565 2d35  alString), '5e-5
+0004b570: 2729 2c20 2731 272c 2034 2929 0a20 2020  '), '1', 4)).   
+0004b580: 2020 2020 2020 2020 2070 6572 6365 6e74           percent
+0004b590: 6167 6520 3d20 7365 6c66 2e70 6172 7365  age = self.parse
+0004b5a0: 5f6e 756d 6265 7228 5072 6563 6973 652e  _number(Precise.
+0004b5b0: 7374 7269 6e67 5f6d 756c 2850 7265 6369  string_mul(Preci
+0004b5c0: 7365 2e73 7472 696e 675f 6469 7628 756e  se.string_div(un
+0004b5d0: 7265 616c 697a 6564 506e 6c53 7472 696e  realizedPnlStrin
+0004b5e0: 672c 2069 6e69 7469 616c 4d61 7267 696e  g, initialMargin
+0004b5f0: 5374 7269 6e67 2c20 3429 2c20 2731 3030  String, 4), '100
+0004b600: 2729 290a 2020 2020 2020 2020 2020 2020  ')).            
+0004b610: 6966 2075 7364 6d3a 0a20 2020 2020 2020  if usdm:.       
+0004b620: 2020 2020 2020 2020 2023 2063 616c 6375           # calcu
+0004b630: 6c61 7465 206c 6971 7569 6461 7469 6f6e  late liquidation
+0004b640: 2070 7269 6365 0a20 2020 2020 2020 2020   price.         
+0004b650: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0004b660: 2020 2020 2020 2020 2023 206c 6971 7569           # liqui
+0004b670: 6461 7469 6f6e 5072 6963 6520 3d20 2877  dationPrice = (w
+0004b680: 616c 6c65 7442 616c 616e 6365 202f 2028  alletBalance / (
+0004b690: 636f 6e74 7261 6374 7320 2a20 28c2 b131  contracts * (..1
+0004b6a0: 202b 206d 6d70 2929 2920 2b20 28c2 b165   + mmp))) + (..e
+0004b6b0: 6e74 7279 5072 6963 6520 2f20 28c2 b131  ntryPrice / (..1
+0004b6c0: 202b 206d 6d70 2929 0a20 2020 2020 2020   + mmp)).       
+0004b6d0: 2020 2020 2020 2020 2023 0a20 2020 2020           #.     
+0004b6e0: 2020 2020 2020 2020 2020 2023 206d 6d70             # mmp
+0004b6f0: 203d 206d 6169 6e74 656e 616e 6365 4d61   = maintenanceMa
+0004b700: 7267 696e 5065 7263 656e 7461 6765 0a20  rginPercentage. 
+0004b710: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0004b720: 2077 6865 7265 20c2 b120 6973 206e 6567   where .. is neg
+0004b730: 6174 6976 6520 666f 7220 6c6f 6e67 2061  ative for long a
+0004b740: 6e64 2070 6f73 6974 6976 6520 666f 7220  nd positive for 
+0004b750: 7368 6f72 740a 2020 2020 2020 2020 2020  short.          
+0004b760: 2020 2020 2020 2320 544f 444f 3a20 6361        # TODO: ca
+0004b770: 6c63 756c 6174 6520 6c69 7175 6964 6174  lculate liquidat
+0004b780: 696f 6e20 7072 6963 6520 666f 7220 636f  ion price for co
+0004b790: 696e 6d20 636f 6e74 7261 6374 730a 2020  inm contracts.  
+0004b7a0: 2020 2020 2020 2020 2020 2020 2020 6f6e                on
+0004b7b0: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
+0004b7c0: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004b7d0: 5374 7269 6e67 203d 204e 6f6e 650a 2020  String = None.  
+0004b7e0: 2020 2020 2020 2020 2020 2020 2020 656e                en
+0004b7f0: 7472 7950 7269 6365 5369 676e 5374 7269  tryPriceSignStri
+0004b800: 6e67 203d 2065 6e74 7279 5072 6963 6553  ng = entryPriceS
+0004b810: 7472 696e 670a 2020 2020 2020 2020 2020  tring.          
+0004b820: 2020 2020 2020 6966 2073 6964 6520 3d3d        if side ==
+0004b830: 2027 7368 6f72 7427 3a0a 2020 2020 2020   'short':.      
+0004b840: 2020 2020 2020 2020 2020 2020 2020 6f6e                on
+0004b850: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
+0004b860: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004b870: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
+0004b880: 2e73 7472 696e 675f 6164 6428 2731 272c  .string_add('1',
+0004b890: 206d 6169 6e74 656e 616e 6365 4d61 7267   maintenanceMarg
+0004b8a0: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
+0004b8b0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0004b8c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0004b8d0: 2020 2020 2020 2020 2020 2020 2020 6f6e                on
+0004b8e0: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
+0004b8f0: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004b900: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
+0004b910: 2e73 7472 696e 675f 6164 6428 272d 3127  .string_add('-1'
+0004b920: 2c20 6d61 696e 7465 6e61 6e63 654d 6172  , maintenanceMar
+0004b930: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004b940: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004b950: 2020 2020 2020 2020 2065 6e74 7279 5072           entryPr
+0004b960: 6963 6553 6967 6e53 7472 696e 6720 3d20  iceSignString = 
+0004b970: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
+0004b980: 756c 2827 2d31 272c 2065 6e74 7279 5072  ul('-1', entryPr
+0004b990: 6963 6553 6967 6e53 7472 696e 6729 0a20  iceSignString). 
+0004b9a0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0004b9b0: 6566 7453 6964 6520 3d20 5072 6563 6973  eftSide = Precis
+0004b9c0: 652e 7374 7269 6e67 5f64 6976 2877 616c  e.string_div(wal
+0004b9d0: 6c65 7442 616c 616e 6365 2c20 5072 6563  letBalance, Prec
+0004b9e0: 6973 652e 7374 7269 6e67 5f6d 756c 2863  ise.string_mul(c
+0004b9f0: 6f6e 7472 6163 7473 5374 7269 6e67 4162  ontractsStringAb
+0004ba00: 732c 206f 6e65 506c 7573 4d61 696e 7465  s, onePlusMainte
+0004ba10: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004ba20: 6e74 6167 6553 7472 696e 6729 290a 2020  ntageString)).  
+0004ba30: 2020 2020 2020 2020 2020 2020 2020 7269                ri
+0004ba40: 6768 7453 6964 6520 3d20 5072 6563 6973  ghtSide = Precis
+0004ba50: 652e 7374 7269 6e67 5f64 6976 2865 6e74  e.string_div(ent
+0004ba60: 7279 5072 6963 6553 6967 6e53 7472 696e  ryPriceSignStrin
+0004ba70: 672c 206f 6e65 506c 7573 4d61 696e 7465  g, onePlusMainte
+0004ba80: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004ba90: 6e74 6167 6553 7472 696e 6729 0a20 2020  ntageString).   
+0004baa0: 2020 2020 2020 2020 2020 2020 206c 6971               liq
+0004bab0: 7569 6461 7469 6f6e 5072 6963 6553 7472  uidationPriceStr
+0004bac0: 696e 6752 6177 203d 2050 7265 6369 7365  ingRaw = Precise
+0004bad0: 2e73 7472 696e 675f 6164 6428 6c65 6674  .string_add(left
+0004bae0: 5369 6465 2c20 7269 6768 7453 6964 6529  Side, rightSide)
+0004baf0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0004bb00: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0004bb10: 2020 2023 2063 616c 6375 6c61 7465 206c     # calculate l
+0004bb20: 6971 7569 6461 7469 6f6e 2070 7269 6365  iquidation price
+0004bb30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004bb40: 2023 0a20 2020 2020 2020 2020 2020 2020   #.             
+0004bb50: 2020 2023 206c 6971 7569 6461 7469 6f6e     # liquidation
+0004bb60: 5072 6963 6520 3d20 2863 6f6e 7472 6163  Price = (contrac
+0004bb70: 7473 202a 2063 6f6e 7472 6163 7453 697a  ts * contractSiz
+0004bb80: 6528 c2b1 3120 2d20 6d6d 7029 2920 2f20  e(..1 - mmp)) / 
+0004bb90: 28c2 b131 2f65 6e74 7279 5072 6963 6520  (..1/entryPrice 
+0004bba0: 2a20 636f 6e74 7261 6374 7320 2a20 636f  * contracts * co
+0004bbb0: 6e74 7261 6374 5369 7a65 202d 2077 616c  ntractSize - wal
+0004bbc0: 6c65 7442 616c 616e 6365 290a 2020 2020  letBalance).    
+0004bbd0: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
+0004bbe0: 2020 2020 2020 2020 2020 2020 2020 6f6e                on
+0004bbf0: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
+0004bc00: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004bc10: 5374 7269 6e67 203d 204e 6f6e 650a 2020  String = None.  
+0004bc20: 2020 2020 2020 2020 2020 2020 2020 656e                en
+0004bc30: 7472 7950 7269 6365 5369 676e 5374 7269  tryPriceSignStri
+0004bc40: 6e67 203d 2065 6e74 7279 5072 6963 6553  ng = entryPriceS
+0004bc50: 7472 696e 670a 2020 2020 2020 2020 2020  tring.          
+0004bc60: 2020 2020 2020 6966 2073 6964 6520 3d3d        if side ==
+0004bc70: 2027 7368 6f72 7427 3a0a 2020 2020 2020   'short':.      
+0004bc80: 2020 2020 2020 2020 2020 2020 2020 6f6e                on
+0004bc90: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
+0004bca0: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004bcb0: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
+0004bcc0: 2e73 7472 696e 675f 7375 6228 2731 272c  .string_sub('1',
+0004bcd0: 206d 6169 6e74 656e 616e 6365 4d61 7267   maintenanceMarg
+0004bce0: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
+0004bcf0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0004bd00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0004bd10: 2020 2020 2020 2020 2020 2020 2020 6f6e                on
+0004bd20: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
+0004bd30: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004bd40: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
+0004bd50: 2e73 7472 696e 675f 7375 6228 272d 3127  .string_sub('-1'
+0004bd60: 2c20 6d61 696e 7465 6e61 6e63 654d 6172  , maintenanceMar
+0004bd70: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004bd80: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004bd90: 2020 2020 2020 2020 2065 6e74 7279 5072           entryPr
+0004bda0: 6963 6553 6967 6e53 7472 696e 6720 3d20  iceSignString = 
+0004bdb0: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
+0004bdc0: 756c 2827 2d31 272c 2065 6e74 7279 5072  ul('-1', entryPr
+0004bdd0: 6963 6553 6967 6e53 7472 696e 6729 0a20  iceSignString). 
+0004bde0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0004bdf0: 697a 6520 3d20 5072 6563 6973 652e 7374  ize = Precise.st
+0004be00: 7269 6e67 5f6d 756c 2863 6f6e 7472 6163  ring_mul(contrac
+0004be10: 7473 5374 7269 6e67 4162 732c 2063 6f6e  tsStringAbs, con
+0004be20: 7472 6163 7453 697a 6553 7472 696e 6729  tractSizeString)
+0004be30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004be40: 206c 6566 7453 6964 6520 3d20 5072 6563   leftSide = Prec
+0004be50: 6973 652e 7374 7269 6e67 5f6d 756c 2873  ise.string_mul(s
+0004be60: 697a 652c 206f 6e65 506c 7573 4d61 696e  ize, onePlusMain
+0004be70: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004be80: 6365 6e74 6167 6553 7472 696e 6729 0a20  centageString). 
+0004be90: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0004bea0: 6967 6874 5369 6465 203d 2050 7265 6369  ightSide = Preci
+0004beb0: 7365 2e73 7472 696e 675f 7375 6228 5072  se.string_sub(Pr
+0004bec0: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
+0004bed0: 2850 7265 6369 7365 2e73 7472 696e 675f  (Precise.string_
+0004bee0: 6469 7628 2731 272c 2065 6e74 7279 5072  div('1', entryPr
+0004bef0: 6963 6553 6967 6e53 7472 696e 6729 2c20  iceSignString), 
+0004bf00: 7369 7a65 292c 2077 616c 6c65 7442 616c  size), walletBal
+0004bf10: 616e 6365 290a 2020 2020 2020 2020 2020  ance).          
+0004bf20: 2020 2020 2020 6c69 7175 6964 6174 696f        liquidatio
+0004bf30: 6e50 7269 6365 5374 7269 6e67 5261 7720  nPriceStringRaw 
+0004bf40: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0004bf50: 5f64 6976 286c 6566 7453 6964 652c 2072  _div(leftSide, r
+0004bf60: 6967 6874 5369 6465 290a 2020 2020 2020  ightSide).      
+0004bf70: 2020 2020 2020 7072 6963 6550 7265 6369        pricePreci
+0004bf80: 7369 6f6e 203d 206d 6172 6b65 745b 2770  sion = market['p
+0004bf90: 7265 6369 7369 6f6e 275d 5b27 7072 6963  recision']['pric
+0004bfa0: 6527 5d0a 2020 2020 2020 2020 2020 2020  e'].            
+0004bfb0: 7072 6963 6550 7265 6369 7369 6f6e 506c  pricePrecisionPl
+0004bfc0: 7573 4f6e 6520 3d20 7072 6963 6550 7265  usOne = pricePre
+0004bfd0: 6369 7369 6f6e 202b 2031 0a20 2020 2020  cision + 1.     
+0004bfe0: 2020 2020 2020 2070 7269 6365 5072 6563         pricePrec
+0004bff0: 6973 696f 6e50 6c75 734f 6e65 5374 7269  isionPlusOneStri
+0004c000: 6e67 203d 2073 7472 2870 7269 6365 5072  ng = str(pricePr
+0004c010: 6563 6973 696f 6e50 6c75 734f 6e65 290a  ecisionPlusOne).
+0004c020: 2020 2020 2020 2020 2020 2020 2320 726f              # ro
+0004c030: 756e 6420 6861 6c66 2075 700a 2020 2020  und half up.    
+0004c040: 2020 2020 2020 2020 726f 756e 6465 7220          rounder 
+0004c050: 3d20 5072 6563 6973 6528 2735 652d 2720  = Precise('5e-' 
+0004c060: 2b20 7072 6963 6550 7265 6369 7369 6f6e  + pricePrecision
+0004c070: 506c 7573 4f6e 6553 7472 696e 6729 0a20  PlusOneString). 
+0004c080: 2020 2020 2020 2020 2020 2072 6f75 6e64             round
+0004c090: 6572 5374 7269 6e67 203d 2073 7472 2872  erString = str(r
+0004c0a0: 6f75 6e64 6572 290a 2020 2020 2020 2020  ounder).        
+0004c0b0: 2020 2020 6c69 7175 6964 6174 696f 6e50      liquidationP
+0004c0c0: 7269 6365 526f 756e 6465 6453 7472 696e  riceRoundedStrin
+0004c0d0: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+0004c0e0: 6e67 5f61 6464 2872 6f75 6e64 6572 5374  ng_add(rounderSt
+0004c0f0: 7269 6e67 2c20 6c69 7175 6964 6174 696f  ring, liquidatio
+0004c100: 6e50 7269 6365 5374 7269 6e67 5261 7729  nPriceStringRaw)
+0004c110: 0a20 2020 2020 2020 2020 2020 2074 7275  .            tru
+0004c120: 6e63 6174 6564 4c69 7175 6964 6174 696f  ncatedLiquidatio
+0004c130: 6e50 7269 6365 203d 2050 7265 6369 7365  nPrice = Precise
+0004c140: 2e73 7472 696e 675f 6469 7628 6c69 7175  .string_div(liqu
+0004c150: 6964 6174 696f 6e50 7269 6365 526f 756e  idationPriceRoun
+0004c160: 6465 6453 7472 696e 672c 2027 3127 2c20  dedString, '1', 
+0004c170: 7072 6963 6550 7265 6369 7369 6f6e 290a  pricePrecision).
+0004c180: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+0004c190: 7275 6e63 6174 6564 4c69 7175 6964 6174  runcatedLiquidat
+0004c1a0: 696f 6e50 7269 6365 5b30 5d20 3d3d 2027  ionPrice[0] == '
+0004c1b0: 2d27 3a0a 2020 2020 2020 2020 2020 2020  -':.            
+0004c1c0: 2020 2020 2320 7573 6572 2063 616e 6e6f      # user canno
+0004c1d0: 7420 6265 206c 6971 7569 6461 7465 640a  t be liquidated.
+0004c1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c1f0: 2320 7369 6e63 6520 6865 2068 6173 206d  # since he has m
+0004c200: 6f72 6520 636f 6c6c 6174 6572 616c 2074  ore collateral t
+0004c210: 6861 6e20 7468 6520 7369 7a65 206f 6620  han the size of 
+0004c220: 7468 6520 706f 7369 7469 6f6e 0a20 2020  the position.   
+0004c230: 2020 2020 2020 2020 2020 2020 2074 7275               tru
+0004c240: 6e63 6174 6564 4c69 7175 6964 6174 696f  ncatedLiquidatio
+0004c250: 6e50 7269 6365 203d 204e 6f6e 650a 2020  nPrice = None.  
+0004c260: 2020 2020 2020 2020 2020 6c69 7175 6964            liquid
+0004c270: 6174 696f 6e50 7269 6365 203d 2073 656c  ationPrice = sel
+0004c280: 662e 7061 7273 655f 6e75 6d62 6572 2874  f.parse_number(t
+0004c290: 7275 6e63 6174 6564 4c69 7175 6964 6174  runcatedLiquidat
+0004c2a0: 696f 6e50 7269 6365 290a 2020 2020 2020  ionPrice).      
+0004c2b0: 2020 706f 7369 7469 6f6e 5369 6465 203d    positionSide =
+0004c2c0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0004c2d0: 6728 706f 7369 7469 6f6e 2c20 2770 6f73  g(position, 'pos
+0004c2e0: 6974 696f 6e53 6964 6527 290a 2020 2020  itionSide').    
+0004c2f0: 2020 2020 6865 6467 6564 203d 2070 6f73      hedged = pos
+0004c300: 6974 696f 6e53 6964 6520 213d 2027 424f  itionSide != 'BO
+0004c310: 5448 270a 2020 2020 2020 2020 7265 7475  TH'.        retu
+0004c320: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
+0004c330: 2027 696e 666f 273a 2070 6f73 6974 696f   'info': positio
+0004c340: 6e2c 0a20 2020 2020 2020 2020 2020 2027  n,.            '
+0004c350: 6964 273a 204e 6f6e 652c 0a20 2020 2020  id': None,.     
+0004c360: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
+0004c370: 2073 796d 626f 6c2c 0a20 2020 2020 2020   symbol,.       
+0004c380: 2020 2020 2027 7469 6d65 7374 616d 7027       'timestamp'
+0004c390: 3a20 7469 6d65 7374 616d 702c 0a20 2020  : timestamp,.   
+0004c3a0: 2020 2020 2020 2020 2027 6461 7465 7469           'dateti
+0004c3b0: 6d65 273a 2073 656c 662e 6973 6f38 3630  me': self.iso860
+0004c3c0: 3128 7469 6d65 7374 616d 7029 2c0a 2020  1(timestamp),.  
+0004c3d0: 2020 2020 2020 2020 2020 2769 6e69 7469            'initi
+0004c3e0: 616c 4d61 7267 696e 273a 2069 6e69 7469  alMargin': initi
+0004c3f0: 616c 4d61 7267 696e 2c0a 2020 2020 2020  alMargin,.      
+0004c400: 2020 2020 2020 2769 6e69 7469 616c 4d61        'initialMa
+0004c410: 7267 696e 5065 7263 656e 7461 6765 273a  rginPercentage':
+0004c420: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
+0004c430: 6572 2869 6e69 7469 616c 4d61 7267 696e  er(initialMargin
+0004c440: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
+0004c450: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0004c460: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+0004c470: 6e27 3a20 6d61 696e 7465 6e61 6e63 654d  n': maintenanceM
+0004c480: 6172 6769 6e2c 0a20 2020 2020 2020 2020  argin,.         
+0004c490: 2020 2027 6d61 696e 7465 6e61 6e63 654d     'maintenanceM
+0004c4a0: 6172 6769 6e50 6572 6365 6e74 6167 6527  arginPercentage'
+0004c4b0: 3a20 6d61 696e 7465 6e61 6e63 654d 6172  : maintenanceMar
+0004c4c0: 6769 6e50 6572 6365 6e74 6167 652c 0a20  ginPercentage,. 
+0004c4d0: 2020 2020 2020 2020 2020 2027 656e 7472             'entr
+0004c4e0: 7950 7269 6365 273a 2065 6e74 7279 5072  yPrice': entryPr
+0004c4f0: 6963 652c 0a20 2020 2020 2020 2020 2020  ice,.           
+0004c500: 2027 6e6f 7469 6f6e 616c 273a 206e 6f74   'notional': not
+0004c510: 696f 6e61 6c2c 0a20 2020 2020 2020 2020  ional,.         
+0004c520: 2020 2027 6c65 7665 7261 6765 273a 2073     'leverage': s
+0004c530: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
+0004c540: 286c 6576 6572 6167 6553 7472 696e 6729  (leverageString)
+0004c550: 2c0a 2020 2020 2020 2020 2020 2020 2775  ,.            'u
+0004c560: 6e72 6561 6c69 7a65 6450 6e6c 273a 2075  nrealizedPnl': u
+0004c570: 6e72 6561 6c69 7a65 6450 6e6c 2c0a 2020  nrealizedPnl,.  
+0004c580: 2020 2020 2020 2020 2020 2763 6f6e 7472            'contr
+0004c590: 6163 7473 273a 2063 6f6e 7472 6163 7473  acts': contracts
+0004c5a0: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
+0004c5b0: 6f6e 7472 6163 7453 697a 6527 3a20 636f  ontractSize': co
+0004c5c0: 6e74 7261 6374 5369 7a65 2c0a 2020 2020  ntractSize,.    
+0004c5d0: 2020 2020 2020 2020 276d 6172 6769 6e52          'marginR
+0004c5e0: 6174 696f 273a 206d 6172 6769 6e52 6174  atio': marginRat
+0004c5f0: 696f 2c0a 2020 2020 2020 2020 2020 2020  io,.            
+0004c600: 276c 6971 7569 6461 7469 6f6e 5072 6963  'liquidationPric
+0004c610: 6527 3a20 6c69 7175 6964 6174 696f 6e50  e': liquidationP
+0004c620: 7269 6365 2c0a 2020 2020 2020 2020 2020  rice,.          
+0004c630: 2020 276d 6172 6b50 7269 6365 273a 204e    'markPrice': N
+0004c640: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0004c650: 2027 636f 6c6c 6174 6572 616c 273a 2063   'collateral': c
+0004c660: 6f6c 6c61 7465 7261 6c2c 0a20 2020 2020  ollateral,.     
+0004c670: 2020 2020 2020 2027 6d61 7267 696e 4d6f         'marginMo
+0004c680: 6465 273a 206d 6172 6769 6e4d 6f64 652c  de': marginMode,
+0004c690: 0a20 2020 2020 2020 2020 2020 2027 7369  .            'si
+0004c6a0: 6465 273a 2073 6964 652c 0a20 2020 2020  de': side,.     
+0004c6b0: 2020 2020 2020 2027 6865 6467 6564 273a         'hedged':
+0004c6c0: 2068 6564 6765 642c 0a20 2020 2020 2020   hedged,.       
+0004c6d0: 2020 2020 2027 7065 7263 656e 7461 6765       'percentage
+0004c6e0: 273a 2070 6572 6365 6e74 6167 652c 0a20  ': percentage,. 
+0004c6f0: 2020 2020 2020 207d 0a0a 2020 2020 6465         }..    de
+0004c700: 6620 7061 7273 655f 706f 7369 7469 6f6e  f parse_position
+0004c710: 5f72 6973 6b28 7365 6c66 2c20 706f 7369  _risk(self, posi
+0004c720: 7469 6f6e 2c20 6d61 726b 6574 3d4e 6f6e  tion, market=Non
+0004c730: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+0004c740: 2020 2020 2020 2320 7573 646d 0a20 2020        # usdm.   
+0004c750: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0004c760: 2020 2020 2023 2020 2020 2020 2022 7379       #       "sy
+0004c770: 6d62 6f6c 223a 2022 4254 4355 5344 5422  mbol": "BTCUSDT"
+0004c780: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004c790: 2020 2270 6f73 6974 696f 6e41 6d74 223a    "positionAmt":
+0004c7a0: 2022 302e 3030 3122 2c0a 2020 2020 2020   "0.001",.      
+0004c7b0: 2020 2320 2020 2020 2020 2265 6e74 7279    #       "entry
+0004c7c0: 5072 6963 6522 3a20 2234 3335 3738 2e30  Price": "43578.0
+0004c7d0: 3730 3030 222c 0a20 2020 2020 2020 2023  7000",.        #
+0004c7e0: 2020 2020 2020 2022 6d61 726b 5072 6963         "markPric
+0004c7f0: 6522 3a20 2234 3335 3332 2e33 3030 3030  e": "43532.30000
+0004c800: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0004c810: 2020 2020 2020 2275 6e52 6561 6c69 7a65        "unRealize
+0004c820: 6450 726f 6669 7422 3a20 222d 302e 3034  dProfit": "-0.04
+0004c830: 3537 3730 3030 222c 0a20 2020 2020 2020  577000",.       
+0004c840: 2023 2020 2020 2020 2022 6c69 7175 6964   #       "liquid
+0004c850: 6174 696f 6e50 7269 6365 223a 2022 3231  ationPrice": "21
+0004c860: 3834 312e 3234 3939 3339 3736 222c 0a20  841.24993976",. 
+0004c870: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0004c880: 6c65 7665 7261 6765 223a 2022 3222 2c0a  leverage": "2",.
+0004c890: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004c8a0: 226d 6178 4e6f 7469 6f6e 616c 5661 6c75  "maxNotionalValu
+0004c8b0: 6522 3a20 2233 3030 3030 3030 3030 222c  e": "300000000",
+0004c8c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004c8d0: 2022 6d61 7267 696e 5479 7065 223a 2022   "marginType": "
+0004c8e0: 6973 6f6c 6174 6564 222c 0a20 2020 2020  isolated",.     
+0004c8f0: 2020 2023 2020 2020 2020 2022 6973 6f6c     #       "isol
+0004c900: 6174 6564 4d61 7267 696e 223a 2022 3231  atedMargin": "21
+0004c910: 2e37 3738 3431 3530 3622 2c0a 2020 2020  .77841506",.    
+0004c920: 2020 2020 2320 2020 2020 2020 2269 7341      #       "isA
+0004c930: 7574 6f41 6464 4d61 7267 696e 223a 2022  utoAddMargin": "
+0004c940: 6661 6c73 6522 2c0a 2020 2020 2020 2020  false",.        
+0004c950: 2320 2020 2020 2020 2270 6f73 6974 696f  #       "positio
+0004c960: 6e53 6964 6522 3a20 2242 4f54 4822 2c0a  nSide": "BOTH",.
+0004c970: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004c980: 226e 6f74 696f 6e61 6c22 3a20 2234 332e  "notional": "43.
+0004c990: 3533 3233 3030 3030 222c 0a20 2020 2020  53230000",.     
+0004c9a0: 2020 2023 2020 2020 2020 2022 6973 6f6c     #       "isol
+0004c9b0: 6174 6564 5761 6c6c 6574 223a 2022 3231  atedWallet": "21
+0004c9c0: 2e38 3234 3138 3530 3622 2c0a 2020 2020  .82418506",.    
+0004c9d0: 2020 2020 2320 2020 2020 2020 2275 7064      #       "upd
+0004c9e0: 6174 6554 696d 6522 3a20 2231 3632 3133  ateTime": "16213
+0004c9f0: 3538 3032 3338 3836 220a 2020 2020 2020  58023886".      
+0004ca00: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0004ca10: 2020 230a 2020 2020 2020 2020 2320 636f    #.        # co
+0004ca20: 696e 6d0a 2020 2020 2020 2020 2320 2020  inm.        #   
+0004ca30: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0004ca40: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+0004ca50: 5443 5553 445f 5045 5250 222c 0a20 2020  TCUSD_PERP",.   
+0004ca60: 2020 2020 2023 2020 2020 2020 2022 706f       #       "po
+0004ca70: 7369 7469 6f6e 416d 7422 3a20 2232 222c  sitionAmt": "2",
+0004ca80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004ca90: 2022 656e 7472 7950 7269 6365 223a 2022   "entryPrice": "
+0004caa0: 3337 3634 332e 3130 3030 3030 3231 222c  37643.10000021",
+0004cab0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004cac0: 2022 6d61 726b 5072 6963 6522 3a20 2233   "markPrice": "3
+0004cad0: 3831 3033 2e30 3535 3130 3435 3522 2c0a  8103.05510455",.
+0004cae0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004caf0: 2275 6e52 6561 6c69 7a65 6450 726f 6669  "unRealizedProfi
+0004cb00: 7422 3a20 2230 2e30 3030 3036 3431 3322  t": "0.00006413"
+0004cb10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004cb20: 2020 226c 6971 7569 6461 7469 6f6e 5072    "liquidationPr
+0004cb30: 6963 6522 3a20 2232 3531 3139 2e39 3734  ice": "25119.974
+0004cb40: 3435 3736 3022 2c0a 2020 2020 2020 2020  45760",.        
+0004cb50: 2320 2020 2020 2020 226c 6576 6572 6167  #       "leverag
+0004cb60: 6522 3a20 2232 222c 0a20 2020 2020 2020  e": "2",.       
+0004cb70: 2023 2020 2020 2020 2022 6d61 7851 7479   #       "maxQty
+0004cb80: 223a 2022 3135 3030 222c 0a20 2020 2020  ": "1500",.     
+0004cb90: 2020 2023 2020 2020 2020 2022 6d61 7267     #       "marg
+0004cba0: 696e 5479 7065 223a 2022 6973 6f6c 6174  inType": "isolat
+0004cbb0: 6564 222c 0a20 2020 2020 2020 2023 2020  ed",.        #  
+0004cbc0: 2020 2020 2022 6973 6f6c 6174 6564 4d61       "isolatedMa
+0004cbd0: 7267 696e 223a 2022 302e 3030 3237 3434  rgin": "0.002744
+0004cbe0: 3731 222c 0a20 2020 2020 2020 2023 2020  71",.        #  
+0004cbf0: 2020 2020 2022 6973 4175 746f 4164 644d       "isAutoAddM
+0004cc00: 6172 6769 6e22 3a20 2266 616c 7365 222c  argin": "false",
+0004cc10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004cc20: 2022 706f 7369 7469 6f6e 5369 6465 223a   "positionSide":
+0004cc30: 2022 424f 5448 222c 0a20 2020 2020 2020   "BOTH",.       
+0004cc40: 2023 2020 2020 2020 2022 6e6f 7469 6f6e   #       "notion
+0004cc50: 616c 5661 6c75 6522 3a20 2230 2e30 3035  alValue": "0.005
+0004cc60: 3234 3839 3222 2c0a 2020 2020 2020 2020  24892",.        
+0004cc70: 2320 2020 2020 2020 2269 736f 6c61 7465  #       "isolate
+0004cc80: 6457 616c 6c65 7422 3a20 2230 2e30 3032  dWallet": "0.002
+0004cc90: 3638 3035 3822 0a20 2020 2020 2020 2023  68058".        #
+0004cca0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0004ccb0: 0a20 2020 2020 2020 206d 6172 6b65 7449  .        marketI
+0004ccc0: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+0004ccd0: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
+0004cce0: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+0004ccf0: 206d 6172 6b65 7420 3d20 7365 6c66 2e73   market = self.s
+0004cd00: 6166 655f 6d61 726b 6574 286d 6172 6b65  afe_market(marke
+0004cd10: 7449 642c 206d 6172 6b65 742c 204e 6f6e  tId, market, Non
+0004cd20: 652c 2027 636f 6e74 7261 6374 2729 0a20  e, 'contract'). 
+0004cd30: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
+0004cd40: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0004cd50: 286d 6172 6b65 742c 2027 7379 6d62 6f6c  (market, 'symbol
+0004cd60: 2729 0a20 2020 2020 2020 206c 6576 6572  ').        lever
+0004cd70: 6167 6542 7261 636b 6574 7320 3d20 7365  ageBrackets = se
+0004cd80: 6c66 2e73 6166 655f 7661 6c75 6528 7365  lf.safe_value(se
+0004cd90: 6c66 2e6f 7074 696f 6e73 2c20 276c 6576  lf.options, 'lev
+0004cda0: 6572 6167 6542 7261 636b 6574 7327 2c20  erageBrackets', 
+0004cdb0: 7b7d 290a 2020 2020 2020 2020 6c65 7665  {}).        leve
+0004cdc0: 7261 6765 4272 6163 6b65 7420 3d20 7365  rageBracket = se
+0004cdd0: 6c66 2e73 6166 655f 7661 6c75 6528 6c65  lf.safe_value(le
+0004cde0: 7665 7261 6765 4272 6163 6b65 7473 2c20  verageBrackets, 
+0004cdf0: 7379 6d62 6f6c 2c20 5b5d 290a 2020 2020  symbol, []).    
+0004ce00: 2020 2020 6e6f 7469 6f6e 616c 5374 7269      notionalStri
+0004ce10: 6e67 203d 2073 656c 662e 7361 6665 5f73  ng = self.safe_s
+0004ce20: 7472 696e 675f 3228 706f 7369 7469 6f6e  tring_2(position
+0004ce30: 2c20 276e 6f74 696f 6e61 6c27 2c20 276e  , 'notional', 'n
+0004ce40: 6f74 696f 6e61 6c56 616c 7565 2729 0a20  otionalValue'). 
+0004ce50: 2020 2020 2020 206e 6f74 696f 6e61 6c53         notionalS
+0004ce60: 7472 696e 6741 6273 203d 2050 7265 6369  tringAbs = Preci
+0004ce70: 7365 2e73 7472 696e 675f 6162 7328 6e6f  se.string_abs(no
+0004ce80: 7469 6f6e 616c 5374 7269 6e67 290a 2020  tionalString).  
+0004ce90: 2020 2020 2020 6d61 696e 7465 6e61 6e63        maintenanc
+0004cea0: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+0004ceb0: 6553 7472 696e 6720 3d20 4e6f 6e65 0a20  eString = None. 
+0004cec0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0004ced0: 7261 6e67 6528 302c 206c 656e 286c 6576  range(0, len(lev
+0004cee0: 6572 6167 6542 7261 636b 6574 2929 3a0a  erageBracket)):.
+0004cef0: 2020 2020 2020 2020 2020 2020 6272 6163              brac
+0004cf00: 6b65 7420 3d20 6c65 7665 7261 6765 4272  ket = leverageBr
+0004cf10: 6163 6b65 745b 695d 0a20 2020 2020 2020  acket[i].       
+0004cf20: 2020 2020 2069 6620 5072 6563 6973 652e       if Precise.
+0004cf30: 7374 7269 6e67 5f6c 7428 6e6f 7469 6f6e  string_lt(notion
+0004cf40: 616c 5374 7269 6e67 4162 732c 2062 7261  alStringAbs, bra
+0004cf50: 636b 6574 5b30 5d29 3a0a 2020 2020 2020  cket[0]):.      
+0004cf60: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+0004cf70: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+0004cf80: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004cf90: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
+0004cfa0: 6272 6163 6b65 745b 315d 0a20 2020 2020  bracket[1].     
+0004cfb0: 2020 206e 6f74 696f 6e61 6c20 3d20 7365     notional = se
+0004cfc0: 6c66 2e70 6172 7365 5f6e 756d 6265 7228  lf.parse_number(
+0004cfd0: 6e6f 7469 6f6e 616c 5374 7269 6e67 4162  notionalStringAb
+0004cfe0: 7329 0a20 2020 2020 2020 2063 6f6e 7472  s).        contr
+0004cff0: 6163 7473 4162 7320 3d20 5072 6563 6973  actsAbs = Precis
+0004d000: 652e 7374 7269 6e67 5f61 6273 2873 656c  e.string_abs(sel
+0004d010: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
+0004d020: 7369 7469 6f6e 2c20 2770 6f73 6974 696f  sition, 'positio
+0004d030: 6e41 6d74 2729 290a 2020 2020 2020 2020  nAmt')).        
+0004d040: 636f 6e74 7261 6374 7320 3d20 7365 6c66  contracts = self
+0004d050: 2e70 6172 7365 5f6e 756d 6265 7228 636f  .parse_number(co
+0004d060: 6e74 7261 6374 7341 6273 290a 2020 2020  ntractsAbs).    
+0004d070: 2020 2020 756e 7265 616c 697a 6564 506e      unrealizedPn
+0004d080: 6c53 7472 696e 6720 3d20 7365 6c66 2e73  lString = self.s
+0004d090: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
+0004d0a0: 696f 6e2c 2027 756e 5265 616c 697a 6564  ion, 'unRealized
+0004d0b0: 5072 6f66 6974 2729 0a20 2020 2020 2020  Profit').       
+0004d0c0: 2075 6e72 6561 6c69 7a65 6450 6e6c 203d   unrealizedPnl =
+0004d0d0: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
+0004d0e0: 6572 2875 6e72 6561 6c69 7a65 6450 6e6c  er(unrealizedPnl
+0004d0f0: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
+0004d100: 6c65 7665 7261 6765 5374 7269 6e67 203d  leverageString =
+0004d110: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0004d120: 6728 706f 7369 7469 6f6e 2c20 276c 6576  g(position, 'lev
+0004d130: 6572 6167 6527 290a 2020 2020 2020 2020  erage').        
+0004d140: 6c65 7665 7261 6765 203d 2069 6e74 286c  leverage = int(l
+0004d150: 6576 6572 6167 6553 7472 696e 6729 0a20  everageString). 
+0004d160: 2020 2020 2020 206c 6971 7569 6461 7469         liquidati
+0004d170: 6f6e 5072 6963 6553 7472 696e 6720 3d20  onPriceString = 
+0004d180: 7365 6c66 2e6f 6d69 745f 7a65 726f 2873  self.omit_zero(s
+0004d190: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0004d1a0: 706f 7369 7469 6f6e 2c20 276c 6971 7569  position, 'liqui
+0004d1b0: 6461 7469 6f6e 5072 6963 6527 2929 0a20  dationPrice')). 
+0004d1c0: 2020 2020 2020 206c 6971 7569 6461 7469         liquidati
+0004d1d0: 6f6e 5072 6963 6520 3d20 7365 6c66 2e70  onPrice = self.p
+0004d1e0: 6172 7365 5f6e 756d 6265 7228 6c69 7175  arse_number(liqu
+0004d1f0: 6964 6174 696f 6e50 7269 6365 5374 7269  idationPriceStri
+0004d200: 6e67 290a 2020 2020 2020 2020 636f 6c6c  ng).        coll
+0004d210: 6174 6572 616c 5374 7269 6e67 203d 204e  ateralString = N
+0004d220: 6f6e 650a 2020 2020 2020 2020 6d61 7267  one.        marg
+0004d230: 696e 4d6f 6465 203d 2073 656c 662e 7361  inMode = self.sa
+0004d240: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
+0004d250: 6f6e 2c20 276d 6172 6769 6e54 7970 6527  on, 'marginType'
+0004d260: 290a 2020 2020 2020 2020 7369 6465 203d  ).        side =
+0004d270: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0004d280: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004d290: 6774 286e 6f74 696f 6e61 6c53 7472 696e  gt(notionalStrin
+0004d2a0: 672c 2027 3027 293a 0a20 2020 2020 2020  g, '0'):.       
+0004d2b0: 2020 2020 2073 6964 6520 3d20 276c 6f6e       side = 'lon
+0004d2c0: 6727 0a20 2020 2020 2020 2065 6c69 6620  g'.        elif 
+0004d2d0: 5072 6563 6973 652e 7374 7269 6e67 5f6c  Precise.string_l
+0004d2e0: 7428 6e6f 7469 6f6e 616c 5374 7269 6e67  t(notionalString
+0004d2f0: 2c20 2730 2729 3a0a 2020 2020 2020 2020  , '0'):.        
+0004d300: 2020 2020 7369 6465 203d 2027 7368 6f72      side = 'shor
+0004d310: 7427 0a20 2020 2020 2020 2065 6e74 7279  t'.        entry
+0004d320: 5072 6963 6553 7472 696e 6720 3d20 7365  PriceString = se
+0004d330: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+0004d340: 6f73 6974 696f 6e2c 2027 656e 7472 7950  osition, 'entryP
+0004d350: 7269 6365 2729 0a20 2020 2020 2020 2065  rice').        e
+0004d360: 6e74 7279 5072 6963 6520 3d20 7365 6c66  ntryPrice = self
+0004d370: 2e70 6172 7365 5f6e 756d 6265 7228 656e  .parse_number(en
+0004d380: 7472 7950 7269 6365 5374 7269 6e67 290a  tryPriceString).
+0004d390: 2020 2020 2020 2020 636f 6e74 7261 6374          contract
+0004d3a0: 5369 7a65 203d 2073 656c 662e 7361 6665  Size = self.safe
+0004d3b0: 5f76 616c 7565 286d 6172 6b65 742c 2027  _value(market, '
+0004d3c0: 636f 6e74 7261 6374 5369 7a65 2729 0a20  contractSize'). 
+0004d3d0: 2020 2020 2020 2063 6f6e 7472 6163 7453         contractS
+0004d3e0: 697a 6553 7472 696e 6720 3d20 7365 6c66  izeString = self
+0004d3f0: 2e6e 756d 6265 725f 746f 5f73 7472 696e  .number_to_strin
+0004d400: 6728 636f 6e74 7261 6374 5369 7a65 290a  g(contractSize).
+0004d410: 2020 2020 2020 2020 2320 746f 206e 6f74          # to not
+0004d420: 696f 6e61 6c56 616c 7565 0a20 2020 2020  ionalValue.     
+0004d430: 2020 206c 696e 6561 7220 3d20 2827 6e6f     linear = ('no
+0004d440: 7469 6f6e 616c 2720 696e 2070 6f73 6974  tional' in posit
+0004d450: 696f 6e29 0a20 2020 2020 2020 2069 6620  ion).        if 
+0004d460: 6d61 7267 696e 4d6f 6465 203d 3d20 2763  marginMode == 'c
+0004d470: 726f 7373 273a 0a20 2020 2020 2020 2020  ross':.         
+0004d480: 2020 2023 2063 616c 6375 6c61 7465 2063     # calculate c
+0004d490: 6f6c 6c61 7465 7261 6c0a 2020 2020 2020  ollateral.      
+0004d4a0: 2020 2020 2020 7072 6563 6973 696f 6e20        precision 
+0004d4b0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0004d4c0: 6528 6d61 726b 6574 2c20 2770 7265 6369  e(market, 'preci
+0004d4d0: 7369 6f6e 272c 207b 7d29 0a20 2020 2020  sion', {}).     
+0004d4e0: 2020 2020 2020 2069 6620 6c69 6e65 6172         if linear
+0004d4f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0004d500: 2020 2320 7761 6c6c 6574 4261 6c61 6e63    # walletBalanc
+0004d510: 6520 3d20 286c 6971 7569 6461 7469 6f6e  e = (liquidation
+0004d520: 5072 6963 6520 2a20 28c2 b131 202b 206d  Price * (..1 + m
+0004d530: 6d70 2920 c2b1 2065 6e74 7279 5072 6963  mp) .. entryPric
+0004d540: 6529 202a 2063 6f6e 7472 6163 7473 0a20  e) * contracts. 
+0004d550: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0004d560: 6e65 506c 7573 4d61 696e 7465 6e61 6e63  nePlusMaintenanc
+0004d570: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+0004d580: 6553 7472 696e 6720 3d20 4e6f 6e65 0a20  eString = None. 
+0004d590: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0004d5a0: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004d5b0: 696e 6720 3d20 656e 7472 7950 7269 6365  ing = entryPrice
+0004d5c0: 5374 7269 6e67 0a20 2020 2020 2020 2020  String.         
+0004d5d0: 2020 2020 2020 2069 6620 7369 6465 203d         if side =
+0004d5e0: 3d20 2773 686f 7274 273a 0a20 2020 2020  = 'short':.     
+0004d5f0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0004d600: 6e65 506c 7573 4d61 696e 7465 6e61 6e63  nePlusMaintenanc
+0004d610: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+0004d620: 6553 7472 696e 6720 3d20 5072 6563 6973  eString = Precis
+0004d630: 652e 7374 7269 6e67 5f61 6464 2827 3127  e.string_add('1'
+0004d640: 2c20 6d61 696e 7465 6e61 6e63 654d 6172  , maintenanceMar
+0004d650: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004d660: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004d670: 2020 2020 2020 2020 2065 6e74 7279 5072           entryPr
+0004d680: 6963 6553 6967 6e53 7472 696e 6720 3d20  iceSignString = 
+0004d690: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
+0004d6a0: 756c 2827 2d31 272c 2065 6e74 7279 5072  ul('-1', entryPr
+0004d6b0: 6963 6553 6967 6e53 7472 696e 6729 0a20  iceSignString). 
+0004d6c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0004d6d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0004d6e0: 2020 2020 2020 2020 206f 6e65 506c 7573           onePlus
+0004d6f0: 4d61 696e 7465 6e61 6e63 654d 6172 6769  MaintenanceMargi
+0004d700: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
+0004d710: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+0004d720: 6e67 5f61 6464 2827 2d31 272c 206d 6169  ng_add('-1', mai
+0004d730: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
+0004d740: 7263 656e 7461 6765 5374 7269 6e67 290a  rcentageString).
+0004d750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d760: 696e 6e65 7220 3d20 5072 6563 6973 652e  inner = Precise.
+0004d770: 7374 7269 6e67 5f6d 756c 286c 6971 7569  string_mul(liqui
+0004d780: 6461 7469 6f6e 5072 6963 6553 7472 696e  dationPriceStrin
+0004d790: 672c 206f 6e65 506c 7573 4d61 696e 7465  g, onePlusMainte
+0004d7a0: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004d7b0: 6e74 6167 6553 7472 696e 6729 0a20 2020  ntageString).   
+0004d7c0: 2020 2020 2020 2020 2020 2020 206c 6566               lef
+0004d7d0: 7453 6964 6520 3d20 5072 6563 6973 652e  tSide = Precise.
+0004d7e0: 7374 7269 6e67 5f61 6464 2869 6e6e 6572  string_add(inner
+0004d7f0: 2c20 656e 7472 7950 7269 6365 5369 676e  , entryPriceSign
+0004d800: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
+0004d810: 2020 2020 2020 2020 7072 6963 6550 7265          pricePre
+0004d820: 6369 7369 6f6e 203d 2073 656c 662e 7361  cision = self.sa
+0004d830: 6665 5f69 6e74 6567 6572 2870 7265 6369  fe_integer(preci
+0004d840: 7369 6f6e 2c20 2770 7269 6365 2729 0a20  sion, 'price'). 
+0004d850: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0004d860: 756f 7465 5072 6563 6973 696f 6e20 3d20  uotePrecision = 
+0004d870: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+0004d880: 7228 7072 6563 6973 696f 6e2c 2027 7175  r(precision, 'qu
+0004d890: 6f74 6527 2c20 7072 6963 6550 7265 6369  ote', pricePreci
+0004d8a0: 7369 6f6e 290a 2020 2020 2020 2020 2020  sion).          
+0004d8b0: 2020 2020 2020 6966 2071 756f 7465 5072        if quotePr
+0004d8c0: 6563 6973 696f 6e20 6973 206e 6f74 204e  ecision is not N
+0004d8d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0004d8e0: 2020 2020 2020 2020 2063 6f6c 6c61 7465           collate
+0004d8f0: 7261 6c53 7472 696e 6720 3d20 5072 6563  ralString = Prec
+0004d900: 6973 652e 7374 7269 6e67 5f64 6976 2850  ise.string_div(P
+0004d910: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
+0004d920: 6c28 6c65 6674 5369 6465 2c20 636f 6e74  l(leftSide, cont
+0004d930: 7261 6374 7341 6273 292c 2027 3127 2c20  ractsAbs), '1', 
+0004d940: 7175 6f74 6550 7265 6369 7369 6f6e 290a  quotePrecision).
+0004d950: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0004d960: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0004d970: 2020 2320 7761 6c6c 6574 4261 6c61 6e63    # walletBalanc
+0004d980: 6520 3d20 2863 6f6e 7472 6163 7473 202a  e = (contracts *
+0004d990: 2063 6f6e 7472 6163 7453 697a 6529 202a   contractSize) *
+0004d9a0: 2028 c2b1 312f 656e 7472 7950 7269 6365   (..1/entryPrice
+0004d9b0: 202d 2028 c2b1 3120 2d20 6d6d 7029 202f   - (..1 - mmp) /
+0004d9c0: 206c 6971 7569 6461 7469 6f6e 5072 6963   liquidationPric
+0004d9d0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+0004d9e0: 2020 206f 6e65 506c 7573 4d61 696e 7465     onePlusMainte
+0004d9f0: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004da00: 6e74 6167 6553 7472 696e 6720 3d20 4e6f  ntageString = No
+0004da10: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+0004da20: 2020 2065 6e74 7279 5072 6963 6553 6967     entryPriceSig
+0004da30: 6e53 7472 696e 6720 3d20 656e 7472 7950  nString = entryP
+0004da40: 7269 6365 5374 7269 6e67 0a20 2020 2020  riceString.     
+0004da50: 2020 2020 2020 2020 2020 2069 6620 7369             if si
+0004da60: 6465 203d 3d20 2773 686f 7274 273a 0a20  de == 'short':. 
+0004da70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004da80: 2020 206f 6e65 506c 7573 4d61 696e 7465     onePlusMainte
+0004da90: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004daa0: 6e74 6167 6553 7472 696e 6720 3d20 5072  ntageString = Pr
+0004dab0: 6563 6973 652e 7374 7269 6e67 5f73 7562  ecise.string_sub
+0004dac0: 2827 3127 2c20 6d61 696e 7465 6e61 6e63  ('1', maintenanc
+0004dad0: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+0004dae0: 6553 7472 696e 6729 0a20 2020 2020 2020  eString).       
+0004daf0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0004db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004db10: 2020 206f 6e65 506c 7573 4d61 696e 7465     onePlusMainte
+0004db20: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004db30: 6e74 6167 6553 7472 696e 6720 3d20 5072  ntageString = Pr
+0004db40: 6563 6973 652e 7374 7269 6e67 5f73 7562  ecise.string_sub
+0004db50: 2827 2d31 272c 206d 6169 6e74 656e 616e  ('-1', maintenan
+0004db60: 6365 4d61 7267 696e 5065 7263 656e 7461  ceMarginPercenta
+0004db70: 6765 5374 7269 6e67 290a 2020 2020 2020  geString).      
+0004db80: 2020 2020 2020 2020 2020 2020 2020 656e                en
+0004db90: 7472 7950 7269 6365 5369 676e 5374 7269  tryPriceSignStri
+0004dba0: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
+0004dbb0: 696e 675f 6d75 6c28 272d 3127 2c20 656e  ing_mul('-1', en
+0004dbc0: 7472 7950 7269 6365 5369 676e 5374 7269  tryPriceSignStri
+0004dbd0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0004dbe0: 2020 2020 6c65 6674 5369 6465 203d 2050      leftSide = P
+0004dbf0: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
+0004dc00: 6c28 636f 6e74 7261 6374 7341 6273 2c20  l(contractsAbs, 
+0004dc10: 636f 6e74 7261 6374 5369 7a65 5374 7269  contractSizeStri
+0004dc20: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0004dc30: 2020 2020 7269 6768 7453 6964 6520 3d20      rightSide = 
+0004dc40: 5072 6563 6973 652e 7374 7269 6e67 5f73  Precise.string_s
+0004dc50: 7562 2850 7265 6369 7365 2e73 7472 696e  ub(Precise.strin
+0004dc60: 675f 6469 7628 2731 272c 2065 6e74 7279  g_div('1', entry
+0004dc70: 5072 6963 6553 6967 6e53 7472 696e 6729  PriceSignString)
+0004dc80: 2c20 5072 6563 6973 652e 7374 7269 6e67  , Precise.string
+0004dc90: 5f64 6976 286f 6e65 506c 7573 4d61 696e  _div(onePlusMain
+0004dca0: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004dcb0: 6365 6e74 6167 6553 7472 696e 672c 206c  centageString, l
+0004dcc0: 6971 7569 6461 7469 6f6e 5072 6963 6553  iquidationPriceS
+0004dcd0: 7472 696e 6729 290a 2020 2020 2020 2020  tring)).        
+0004dce0: 2020 2020 2020 2020 6261 7365 5072 6563          basePrec
+0004dcf0: 6973 696f 6e20 3d20 7365 6c66 2e73 6166  ision = self.saf
+0004dd00: 655f 696e 7465 6765 7228 7072 6563 6973  e_integer(precis
+0004dd10: 696f 6e2c 2027 6261 7365 2729 0a20 2020  ion, 'base').   
+0004dd20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0004dd30: 6261 7365 5072 6563 6973 696f 6e20 6973  basePrecision is
+0004dd40: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0004dd50: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0004dd60: 6f6c 6c61 7465 7261 6c53 7472 696e 6720  ollateralString 
+0004dd70: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0004dd80: 5f64 6976 2850 7265 6369 7365 2e73 7472  _div(Precise.str
+0004dd90: 696e 675f 6d75 6c28 6c65 6674 5369 6465  ing_mul(leftSide
+0004dda0: 2c20 7269 6768 7453 6964 6529 2c20 2731  , rightSide), '1
+0004ddb0: 272c 2062 6173 6550 7265 6369 7369 6f6e  ', basePrecision
+0004ddc0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0004ddd0: 2020 2020 2020 2020 2020 2020 636f 6c6c              coll
+0004dde0: 6174 6572 616c 5374 7269 6e67 203d 2073  ateralString = s
+0004ddf0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0004de00: 706f 7369 7469 6f6e 2c20 2769 736f 6c61  position, 'isola
+0004de10: 7465 644d 6172 6769 6e27 290a 2020 2020  tedMargin').    
+0004de20: 2020 2020 636f 6c6c 6174 6572 616c 5374      collateralSt
+0004de30: 7269 6e67 203d 2027 3027 2069 6620 2863  ring = '0' if (c
+0004de40: 6f6c 6c61 7465 7261 6c53 7472 696e 6720  ollateralString 
+0004de50: 6973 204e 6f6e 6529 2065 6c73 6520 636f  is None) else co
+0004de60: 6c6c 6174 6572 616c 5374 7269 6e67 0a20  llateralString. 
+0004de70: 2020 2020 2020 2063 6f6c 6c61 7465 7261         collatera
+0004de80: 6c20 3d20 7365 6c66 2e70 6172 7365 5f6e  l = self.parse_n
+0004de90: 756d 6265 7228 636f 6c6c 6174 6572 616c  umber(collateral
+0004dea0: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
+0004deb0: 6d61 726b 5072 6963 6520 3d20 7365 6c66  markPrice = self
+0004dec0: 2e70 6172 7365 5f6e 756d 6265 7228 7365  .parse_number(se
+0004ded0: 6c66 2e6f 6d69 745f 7a65 726f 2873 656c  lf.omit_zero(sel
+0004dee0: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
+0004def0: 7369 7469 6f6e 2c20 276d 6172 6b50 7269  sition, 'markPri
+0004df00: 6365 2729 2929 0a20 2020 2020 2020 2074  ce'))).        t
+0004df10: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
+0004df20: 7361 6665 5f69 6e74 6567 6572 2870 6f73  safe_integer(pos
+0004df30: 6974 696f 6e2c 2027 7570 6461 7465 5469  ition, 'updateTi
+0004df40: 6d65 2729 0a20 2020 2020 2020 2069 6620  me').        if 
+0004df50: 7469 6d65 7374 616d 7020 3d3d 2030 3a0a  timestamp == 0:.
+0004df60: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+0004df70: 7374 616d 7020 3d20 4e6f 6e65 0a20 2020  stamp = None.   
+0004df80: 2020 2020 206d 6169 6e74 656e 616e 6365       maintenance
+0004df90: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004dfa0: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
+0004dfb0: 6d62 6572 286d 6169 6e74 656e 616e 6365  mber(maintenance
+0004dfc0: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004dfd0: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
+0004dfe0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+0004dff0: 6e53 7472 696e 6720 3d20 5072 6563 6973  nString = Precis
+0004e000: 652e 7374 7269 6e67 5f6d 756c 286d 6169  e.string_mul(mai
+0004e010: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
+0004e020: 7263 656e 7461 6765 5374 7269 6e67 2c20  rcentageString, 
+0004e030: 6e6f 7469 6f6e 616c 5374 7269 6e67 4162  notionalStringAb
+0004e040: 7329 0a20 2020 2020 2020 206d 6169 6e74  s).        maint
+0004e050: 656e 616e 6365 4d61 7267 696e 203d 2073  enanceMargin = s
+0004e060: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
+0004e070: 286d 6169 6e74 656e 616e 6365 4d61 7267  (maintenanceMarg
+0004e080: 696e 5374 7269 6e67 290a 2020 2020 2020  inString).      
+0004e090: 2020 696e 6974 6961 6c4d 6172 6769 6e50    initialMarginP
+0004e0a0: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
+0004e0b0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0004e0c0: 5f64 6976 2827 3127 2c20 6c65 7665 7261  _div('1', levera
+0004e0d0: 6765 5374 7269 6e67 2c20 3829 0a20 2020  geString, 8).   
+0004e0e0: 2020 2020 2072 6174 696f 6e61 6c20 3d20       rational = 
+0004e0f0: 2831 3030 3020 2520 6c65 7665 7261 6765  (1000 % leverage
+0004e100: 2920 3d3d 2030 0a20 2020 2020 2020 2069  ) == 0.        i
+0004e110: 6620 6e6f 7420 7261 7469 6f6e 616c 3a0a  f not rational:.
+0004e120: 2020 2020 2020 2020 2020 2020 696e 6974              init
+0004e130: 6961 6c4d 6172 6769 6e50 6572 6365 6e74  ialMarginPercent
+0004e140: 6167 6553 7472 696e 6720 3d20 5072 6563  ageString = Prec
+0004e150: 6973 652e 7374 7269 6e67 5f61 6464 2869  ise.string_add(i
+0004e160: 6e69 7469 616c 4d61 7267 696e 5065 7263  nitialMarginPerc
+0004e170: 656e 7461 6765 5374 7269 6e67 2c20 2731  entageString, '1
+0004e180: 652d 3827 290a 2020 2020 2020 2020 696e  e-8').        in
+0004e190: 6974 6961 6c4d 6172 6769 6e53 7472 696e  itialMarginStrin
+0004e1a0: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+0004e1b0: 6e67 5f64 6976 2850 7265 6369 7365 2e73  ng_div(Precise.s
+0004e1c0: 7472 696e 675f 6d75 6c28 6e6f 7469 6f6e  tring_mul(notion
+0004e1d0: 616c 5374 7269 6e67 4162 732c 2069 6e69  alStringAbs, ini
+0004e1e0: 7469 616c 4d61 7267 696e 5065 7263 656e  tialMarginPercen
+0004e1f0: 7461 6765 5374 7269 6e67 292c 2027 3127  tageString), '1'
+0004e200: 2c20 3829 0a20 2020 2020 2020 2069 6e69  , 8).        ini
+0004e210: 7469 616c 4d61 7267 696e 203d 2073 656c  tialMargin = sel
+0004e220: 662e 7061 7273 655f 6e75 6d62 6572 2869  f.parse_number(i
+0004e230: 6e69 7469 616c 4d61 7267 696e 5374 7269  nitialMarginStri
+0004e240: 6e67 290a 2020 2020 2020 2020 6d61 7267  ng).        marg
+0004e250: 696e 5261 7469 6f20 3d20 4e6f 6e65 0a20  inRatio = None. 
+0004e260: 2020 2020 2020 2070 6572 6365 6e74 6167         percentag
+0004e270: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
+0004e280: 2069 6620 6e6f 7420 5072 6563 6973 652e   if not Precise.
+0004e290: 7374 7269 6e67 5f65 7175 616c 7328 636f  string_equals(co
+0004e2a0: 6c6c 6174 6572 616c 5374 7269 6e67 2c20  llateralString, 
+0004e2b0: 2730 2729 3a0a 2020 2020 2020 2020 2020  '0'):.          
+0004e2c0: 2020 6d61 7267 696e 5261 7469 6f20 3d20    marginRatio = 
+0004e2d0: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
+0004e2e0: 7228 5072 6563 6973 652e 7374 7269 6e67  r(Precise.string
+0004e2f0: 5f64 6976 2850 7265 6369 7365 2e73 7472  _div(Precise.str
+0004e300: 696e 675f 6164 6428 5072 6563 6973 652e  ing_add(Precise.
+0004e310: 7374 7269 6e67 5f64 6976 286d 6169 6e74  string_div(maint
+0004e320: 656e 616e 6365 4d61 7267 696e 5374 7269  enanceMarginStri
+0004e330: 6e67 2c20 636f 6c6c 6174 6572 616c 5374  ng, collateralSt
+0004e340: 7269 6e67 292c 2027 3565 2d35 2729 2c20  ring), '5e-5'), 
+0004e350: 2731 272c 2034 2929 0a20 2020 2020 2020  '1', 4)).       
+0004e360: 2020 2020 2070 6572 6365 6e74 6167 6520       percentage 
+0004e370: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0004e380: 6265 7228 5072 6563 6973 652e 7374 7269  ber(Precise.stri
+0004e390: 6e67 5f6d 756c 2850 7265 6369 7365 2e73  ng_mul(Precise.s
+0004e3a0: 7472 696e 675f 6469 7628 756e 7265 616c  tring_div(unreal
+0004e3b0: 697a 6564 506e 6c53 7472 696e 672c 2069  izedPnlString, i
+0004e3c0: 6e69 7469 616c 4d61 7267 696e 5374 7269  nitialMarginStri
+0004e3d0: 6e67 2c20 3429 2c20 2731 3030 2729 290a  ng, 4), '100')).
+0004e3e0: 2020 2020 2020 2020 706f 7369 7469 6f6e          position
+0004e3f0: 5369 6465 203d 2073 656c 662e 7361 6665  Side = self.safe
+0004e400: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
+0004e410: 2c20 2770 6f73 6974 696f 6e53 6964 6527  , 'positionSide'
+0004e420: 290a 2020 2020 2020 2020 6865 6467 6564  ).        hedged
+0004e430: 203d 2070 6f73 6974 696f 6e53 6964 6520   = positionSide 
+0004e440: 213d 2027 424f 5448 270a 2020 2020 2020  != 'BOTH'.      
+0004e450: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0004e460: 2020 2020 2020 2027 696e 666f 273a 2070         'info': p
+0004e470: 6f73 6974 696f 6e2c 0a20 2020 2020 2020  osition,.       
+0004e480: 2020 2020 2027 6964 273a 204e 6f6e 652c       'id': None,
+0004e490: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
+0004e4a0: 6d62 6f6c 273a 2073 796d 626f 6c2c 0a20  mbol': symbol,. 
+0004e4b0: 2020 2020 2020 2020 2020 2027 636f 6e74             'cont
+0004e4c0: 7261 6374 7327 3a20 636f 6e74 7261 6374  racts': contract
+0004e4d0: 732c 0a20 2020 2020 2020 2020 2020 2027  s,.            '
+0004e4e0: 636f 6e74 7261 6374 5369 7a65 273a 2063  contractSize': c
+0004e4f0: 6f6e 7472 6163 7453 697a 652c 0a20 2020  ontractSize,.   
+0004e500: 2020 2020 2020 2020 2027 756e 7265 616c           'unreal
+0004e510: 697a 6564 506e 6c27 3a20 756e 7265 616c  izedPnl': unreal
+0004e520: 697a 6564 506e 6c2c 0a20 2020 2020 2020  izedPnl,.       
+0004e530: 2020 2020 2027 6c65 7665 7261 6765 273a       'leverage':
+0004e540: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
+0004e550: 6572 286c 6576 6572 6167 6553 7472 696e  er(leverageStrin
+0004e560: 6729 2c0a 2020 2020 2020 2020 2020 2020  g),.            
+0004e570: 276c 6971 7569 6461 7469 6f6e 5072 6963  'liquidationPric
+0004e580: 6527 3a20 6c69 7175 6964 6174 696f 6e50  e': liquidationP
+0004e590: 7269 6365 2c0a 2020 2020 2020 2020 2020  rice,.          
+0004e5a0: 2020 2763 6f6c 6c61 7465 7261 6c27 3a20    'collateral': 
+0004e5b0: 636f 6c6c 6174 6572 616c 2c0a 2020 2020  collateral,.    
+0004e5c0: 2020 2020 2020 2020 276e 6f74 696f 6e61          'notiona
+0004e5d0: 6c27 3a20 6e6f 7469 6f6e 616c 2c0a 2020  l': notional,.  
+0004e5e0: 2020 2020 2020 2020 2020 276d 6172 6b50            'markP
+0004e5f0: 7269 6365 273a 206d 6172 6b50 7269 6365  rice': markPrice
+0004e600: 2c0a 2020 2020 2020 2020 2020 2020 2765  ,.            'e
+0004e610: 6e74 7279 5072 6963 6527 3a20 656e 7472  ntryPrice': entr
+0004e620: 7950 7269 6365 2c0a 2020 2020 2020 2020  yPrice,.        
+0004e630: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
+0004e640: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
+0004e650: 2020 2020 2020 2020 2769 6e69 7469 616c          'initial
+0004e660: 4d61 7267 696e 273a 2069 6e69 7469 616c  Margin': initial
+0004e670: 4d61 7267 696e 2c0a 2020 2020 2020 2020  Margin,.        
+0004e680: 2020 2020 2769 6e69 7469 616c 4d61 7267      'initialMarg
+0004e690: 696e 5065 7263 656e 7461 6765 273a 2073  inPercentage': s
+0004e6a0: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
+0004e6b0: 2869 6e69 7469 616c 4d61 7267 696e 5065  (initialMarginPe
+0004e6c0: 7263 656e 7461 6765 5374 7269 6e67 292c  rcentageString),
+0004e6d0: 0a20 2020 2020 2020 2020 2020 2027 6d61  .            'ma
+0004e6e0: 696e 7465 6e61 6e63 654d 6172 6769 6e27  intenanceMargin'
+0004e6f0: 3a20 6d61 696e 7465 6e61 6e63 654d 6172  : maintenanceMar
+0004e700: 6769 6e2c 0a20 2020 2020 2020 2020 2020  gin,.           
+0004e710: 2027 6d61 696e 7465 6e61 6e63 654d 6172   'maintenanceMar
+0004e720: 6769 6e50 6572 6365 6e74 6167 6527 3a20  ginPercentage': 
+0004e730: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+0004e740: 6e50 6572 6365 6e74 6167 652c 0a20 2020  nPercentage,.   
+0004e750: 2020 2020 2020 2020 2027 6d61 7267 696e           'margin
+0004e760: 5261 7469 6f27 3a20 6d61 7267 696e 5261  Ratio': marginRa
+0004e770: 7469 6f2c 0a20 2020 2020 2020 2020 2020  tio,.           
+0004e780: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
+0004e790: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
+0004e7a0: 616d 7029 2c0a 2020 2020 2020 2020 2020  amp),.          
+0004e7b0: 2020 276d 6172 6769 6e4d 6f64 6527 3a20    'marginMode': 
+0004e7c0: 6d61 7267 696e 4d6f 6465 2c0a 2020 2020  marginMode,.    
+0004e7d0: 2020 2020 2020 2020 276d 6172 6769 6e54          'marginT
+0004e7e0: 7970 6527 3a20 6d61 7267 696e 4d6f 6465  ype': marginMode
+0004e7f0: 2c20 2023 2064 6570 7265 6361 7465 640a  ,  # deprecated.
+0004e800: 2020 2020 2020 2020 2020 2020 2773 6964              'sid
+0004e810: 6527 3a20 7369 6465 2c0a 2020 2020 2020  e': side,.      
+0004e820: 2020 2020 2020 2768 6564 6765 6427 3a20        'hedged': 
+0004e830: 6865 6467 6564 2c0a 2020 2020 2020 2020  hedged,.        
+0004e840: 2020 2020 2770 6572 6365 6e74 6167 6527      'percentage'
+0004e850: 3a20 7065 7263 656e 7461 6765 2c0a 2020  : percentage,.  
+0004e860: 2020 2020 2020 7d0a 0a20 2020 2061 7379        }..    asy
+0004e870: 6e63 2064 6566 206c 6f61 645f 6c65 7665  nc def load_leve
+0004e880: 7261 6765 5f62 7261 636b 6574 7328 7365  rage_brackets(se
+0004e890: 6c66 2c20 7265 6c6f 6164 3d46 616c 7365  lf, reload=False
+0004e8a0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+0004e8b0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+0004e8c0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0004e8d0: 2020 2020 2020 2020 2320 6279 2064 6566          # by def
+0004e8e0: 6175 6c74 2063 6163 6865 2074 6865 206c  ault cache the l
+0004e8f0: 6576 6572 6167 6520 6272 6163 6b65 740a  everage bracket.
+0004e900: 2020 2020 2020 2020 2320 6974 2063 6f6e          # it con
+0004e910: 7461 696e 7320 7573 6566 756c 2073 7475  tains useful stu
+0004e920: 6666 206c 696b 6520 7468 6520 6d61 696e  ff like the main
+0004e930: 7465 6e61 6e63 6520 6d61 7267 696e 2061  tenance margin a
+0004e940: 6e64 2069 6e69 7469 616c 206d 6172 6769  nd initial margi
+0004e950: 6e20 666f 7220 706f 7369 7469 6f6e 730a  n for positions.
+0004e960: 2020 2020 2020 2020 6c65 7665 7261 6765          leverage
+0004e970: 4272 6163 6b65 7473 203d 2073 656c 662e  Brackets = self.
+0004e980: 7361 6665 5f76 616c 7565 2873 656c 662e  safe_value(self.
+0004e990: 6f70 7469 6f6e 732c 2027 6c65 7665 7261  options, 'levera
+0004e9a0: 6765 4272 6163 6b65 7473 2729 0a20 2020  geBrackets').   
+0004e9b0: 2020 2020 2069 6620 286c 6576 6572 6167       if (leverag
+0004e9c0: 6542 7261 636b 6574 7320 6973 204e 6f6e  eBrackets is Non
+0004e9d0: 6529 206f 7220 2872 656c 6f61 6429 3a0a  e) or (reload):.
+0004e9e0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+0004e9f0: 6f64 203d 204e 6f6e 650a 2020 2020 2020  od = None.      
+0004ea00: 2020 2020 2020 6465 6661 756c 7454 7970        defaultTyp
+0004ea10: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+0004ea20: 7269 6e67 2873 656c 662e 6f70 7469 6f6e  ring(self.option
+0004ea30: 732c 2027 6465 6661 756c 7454 7970 6527  s, 'defaultType'
+0004ea40: 2c20 2766 7574 7572 6527 290a 2020 2020  , 'future').    
+0004ea50: 2020 2020 2020 2020 7479 7065 203d 2073          type = s
+0004ea60: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0004ea70: 7061 7261 6d73 2c20 2774 7970 6527 2c20  params, 'type', 
+0004ea80: 6465 6661 756c 7454 7970 6529 0a20 2020  defaultType).   
+0004ea90: 2020 2020 2020 2020 2071 7565 7279 203d           query =
+0004eaa0: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+0004eab0: 732c 2027 7479 7065 2729 0a20 2020 2020  s, 'type').     
+0004eac0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
+0004ead0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+0004eae0: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
+0004eaf0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0004eb00: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
+0004eb10: 616d 7328 276c 6f61 644c 6576 6572 6167  ams('loadLeverag
+0004eb20: 6542 7261 636b 6574 7327 2c20 4e6f 6e65  eBrackets', None
+0004eb30: 2c20 7061 7261 6d73 2c20 276c 696e 6561  , params, 'linea
+0004eb40: 7227 290a 2020 2020 2020 2020 2020 2020  r').            
+0004eb50: 6966 2073 656c 662e 6973 5f6c 696e 6561  if self.is_linea
+0004eb60: 7228 7479 7065 2c20 7375 6254 7970 6529  r(type, subType)
+0004eb70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0004eb80: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
+0004eb90: 5072 6976 6174 6547 6574 4c65 7665 7261  PrivateGetLevera
+0004eba0: 6765 4272 6163 6b65 7427 0a20 2020 2020  geBracket'.     
+0004ebb0: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
+0004ebc0: 2e69 735f 696e 7665 7273 6528 7479 7065  .is_inverse(type
+0004ebd0: 2c20 7375 6254 7970 6529 3a0a 2020 2020  , subType):.    
+0004ebe0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+0004ebf0: 6f64 203d 2027 6461 7069 5072 6976 6174  od = 'dapiPrivat
+0004ec00: 6556 3247 6574 4c65 7665 7261 6765 4272  eV2GetLeverageBr
+0004ec10: 6163 6b65 7427 0a20 2020 2020 2020 2020  acket'.         
+0004ec20: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0004ec30: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+0004ec40: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+0004ec50: 2e69 6420 2b20 2720 6c6f 6164 4c65 7665  .id + ' loadLeve
+0004ec60: 7261 6765 4272 6163 6b65 7473 2829 2073  rageBrackets() s
+0004ec70: 7570 706f 7274 7320 6c69 6e65 6172 2061  upports linear a
+0004ec80: 6e64 2069 6e76 6572 7365 2063 6f6e 7472  nd inverse contr
+0004ec90: 6163 7473 206f 6e6c 7927 290a 2020 2020  acts only').    
+0004eca0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+0004ecb0: 203d 2061 7761 6974 2067 6574 6174 7472   = await getattr
+0004ecc0: 2873 656c 662c 206d 6574 686f 6429 2871  (self, method)(q
+0004ecd0: 7565 7279 290a 2020 2020 2020 2020 2020  uery).          
+0004ece0: 2020 7365 6c66 2e6f 7074 696f 6e73 5b27    self.options['
+0004ecf0: 6c65 7665 7261 6765 4272 6163 6b65 7473  leverageBrackets
+0004ed00: 275d 203d 207b 7d0a 2020 2020 2020 2020  '] = {}.        
+0004ed10: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+0004ed20: 6765 2830 2c20 6c65 6e28 7265 7370 6f6e  ge(0, len(respon
+0004ed30: 7365 2929 3a0a 2020 2020 2020 2020 2020  se)):.          
+0004ed40: 2020 2020 2020 656e 7472 7920 3d20 7265        entry = re
+0004ed50: 7370 6f6e 7365 5b69 5d0a 2020 2020 2020  sponse[i].      
+0004ed60: 2020 2020 2020 2020 2020 6d61 726b 6574            market
+0004ed70: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
+0004ed80: 7472 696e 6728 656e 7472 792c 2027 7379  tring(entry, 'sy
+0004ed90: 6d62 6f6c 2729 0a20 2020 2020 2020 2020  mbol').         
+0004eda0: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
+0004edb0: 7365 6c66 2e73 6166 655f 7379 6d62 6f6c  self.safe_symbol
+0004edc0: 286d 6172 6b65 7449 642c 204e 6f6e 652c  (marketId, None,
+0004edd0: 204e 6f6e 652c 2027 636f 6e74 7261 6374   None, 'contract
+0004ede0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0004edf0: 2020 2062 7261 636b 6574 7320 3d20 7365     brackets = se
+0004ee00: 6c66 2e73 6166 655f 7661 6c75 6528 656e  lf.safe_value(en
+0004ee10: 7472 792c 2027 6272 6163 6b65 7473 272c  try, 'brackets',
+0004ee20: 205b 5d29 0a20 2020 2020 2020 2020 2020   []).           
+0004ee30: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
+0004ee40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004ee50: 2066 6f72 206a 2069 6e20 7261 6e67 6528   for j in range(
+0004ee60: 302c 206c 656e 2862 7261 636b 6574 7329  0, len(brackets)
+0004ee70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0004ee80: 2020 2020 2020 2062 7261 636b 6574 203d         bracket =
+0004ee90: 2062 7261 636b 6574 735b 6a5d 0a20 2020   brackets[j].   
+0004eea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004eeb0: 2066 6c6f 6f72 5661 6c75 6520 3d20 7365   floorValue = se
+0004eec0: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
+0004eed0: 2862 7261 636b 6574 2c20 276e 6f74 696f  (bracket, 'notio
+0004eee0: 6e61 6c46 6c6f 6f72 272c 2027 7174 7946  nalFloor', 'qtyF
+0004eef0: 6c6f 6f72 2729 0a20 2020 2020 2020 2020  loor').         
+0004ef00: 2020 2020 2020 2020 2020 206d 6169 6e74             maint
+0004ef10: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004ef20: 656e 7461 6765 203d 2073 656c 662e 7361  entage = self.sa
+0004ef30: 6665 5f73 7472 696e 6728 6272 6163 6b65  fe_string(bracke
+0004ef40: 742c 2027 6d61 696e 744d 6172 6769 6e52  t, 'maintMarginR
+0004ef50: 6174 696f 2729 0a20 2020 2020 2020 2020  atio').         
+0004ef60: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0004ef70: 742e 6170 7065 6e64 285b 666c 6f6f 7256  t.append([floorV
+0004ef80: 616c 7565 2c20 6d61 696e 7465 6e61 6e63  alue, maintenanc
+0004ef90: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+0004efa0: 655d 290a 2020 2020 2020 2020 2020 2020  e]).            
+0004efb0: 2020 2020 7365 6c66 2e6f 7074 696f 6e73      self.options
+0004efc0: 5b27 6c65 7665 7261 6765 4272 6163 6b65  ['leverageBracke
+0004efd0: 7473 275d 5b73 796d 626f 6c5d 203d 2072  ts'][symbol] = r
+0004efe0: 6573 756c 740a 2020 2020 2020 2020 7265  esult.        re
+0004eff0: 7475 726e 2073 656c 662e 6f70 7469 6f6e  turn self.option
+0004f000: 735b 276c 6576 6572 6167 6542 7261 636b  s['leverageBrack
+0004f010: 6574 7327 5d0a 0a20 2020 2061 7379 6e63  ets']..    async
+0004f020: 2064 6566 2066 6574 6368 5f6c 6576 6572   def fetch_lever
+0004f030: 6167 655f 7469 6572 7328 7365 6c66 2c20  age_tiers(self, 
+0004f040: 7379 6d62 6f6c 733a 204f 7074 696f 6e61  symbols: Optiona
+0004f050: 6c5b 4c69 7374 5b73 7472 5d5d 203d 204e  l[List[str]] = N
+0004f060: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+0004f070: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0004f080: 2020 2020 2072 6574 7269 6576 6520 696e       retrieve in
+0004f090: 666f 726d 6174 696f 6e20 6f6e 2074 6865  formation on the
+0004f0a0: 206d 6178 696d 756d 206c 6576 6572 6167   maximum leverag
+0004f0b0: 652c 2061 6e64 206d 6169 6e74 656e 616e  e, and maintenan
+0004f0c0: 6365 206d 6172 6769 6e20 666f 7220 7472  ce margin for tr
+0004f0d0: 6164 6573 206f 6620 7661 7279 696e 6720  ades of varying 
+0004f0e0: 7472 6164 6520 7369 7a65 730a 2020 2020  trade sizes.    
+0004f0f0: 2020 2020 3a70 6172 616d 205b 7374 725d      :param [str]
+0004f100: 7c4e 6f6e 6520 7379 6d62 6f6c 733a 206c  |None symbols: l
+0004f110: 6973 7420 6f66 2075 6e69 6669 6564 206d  ist of unified m
+0004f120: 6172 6b65 7420 7379 6d62 6f6c 730a 2020  arket symbols.  
+0004f130: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+0004f140: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+0004f150: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+0004f160: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
+0004f170: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
+0004f180: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0004f190: 2064 6963 743a 2061 2064 6963 7469 6f6e   dict: a diction
+0004f1a0: 6172 7920 6f66 2060 6c65 7665 7261 6765  ary of `leverage
+0004f1b0: 2074 6965 7273 2073 7472 7563 7475 7265   tiers structure
+0004f1c0: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+0004f1d0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6c  ccxt.com/#/?id=l
+0004f1e0: 6576 6572 6167 652d 7469 6572 732d 7374  everage-tiers-st
+0004f1f0: 7275 6374 7572 653e 602c 2069 6e64 6578  ructure>`, index
+0004f200: 6564 2062 7920 6d61 726b 6574 2073 796d  ed by market sym
+0004f210: 626f 6c73 0a20 2020 2020 2020 2022 2222  bols.        """
+0004f220: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0004f230: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0004f240: 2829 0a20 2020 2020 2020 2074 7970 652c  ().        type,
+0004f250: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
+0004f260: 6e64 6c65 5f6d 6172 6b65 745f 7479 7065  ndle_market_type
+0004f270: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+0004f280: 6368 4c65 7665 7261 6765 5469 6572 7327  chLeverageTiers'
+0004f290: 2c20 4e6f 6e65 2c20 7061 7261 6d73 290a  , None, params).
+0004f2a0: 2020 2020 2020 2020 7375 6254 7970 6520          subType 
+0004f2b0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
+0004f2c0: 7562 5479 7065 2c20 7061 7261 6d73 203d  ubType, params =
+0004f2d0: 2073 656c 662e 6861 6e64 6c65 5f73 7562   self.handle_sub
+0004f2e0: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
+0004f2f0: 2827 6665 7463 684c 6576 6572 6167 6554  ('fetchLeverageT
+0004f300: 6965 7273 272c 204e 6f6e 652c 2071 7565  iers', None, que
+0004f310: 7279 2c20 276c 696e 6561 7227 290a 2020  ry, 'linear').  
+0004f320: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
+0004f330: 6f6e 650a 2020 2020 2020 2020 6966 2073  one.        if s
+0004f340: 656c 662e 6973 5f6c 696e 6561 7228 7479  elf.is_linear(ty
+0004f350: 7065 2c20 7375 6254 7970 6529 3a0a 2020  pe, subType):.  
+0004f360: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+0004f370: 203d 2027 6661 7069 5072 6976 6174 6547   = 'fapiPrivateG
+0004f380: 6574 4c65 7665 7261 6765 4272 6163 6b65  etLeverageBracke
+0004f390: 7427 0a20 2020 2020 2020 2065 6c69 6620  t'.        elif 
+0004f3a0: 7365 6c66 2e69 735f 696e 7665 7273 6528  self.is_inverse(
+0004f3b0: 7479 7065 2c20 7375 6254 7970 6529 3a0a  type, subType):.
+0004f3c0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+0004f3d0: 6f64 203d 2027 6461 7069 5072 6976 6174  od = 'dapiPrivat
+0004f3e0: 6556 3247 6574 4c65 7665 7261 6765 4272  eV2GetLeverageBr
+0004f3f0: 6163 6b65 7427 0a20 2020 2020 2020 2065  acket'.        e
+0004f400: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0004f410: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+0004f420: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+0004f430: 6665 7463 684c 6576 6572 6167 6554 6965  fetchLeverageTie
+0004f440: 7273 2829 2073 7570 706f 7274 7320 6c69  rs() supports li
+0004f450: 6e65 6172 2061 6e64 2069 6e76 6572 7365  near and inverse
+0004f460: 2063 6f6e 7472 6163 7473 206f 6e6c 7927   contracts only'
+0004f470: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
+0004f480: 7365 203d 2061 7761 6974 2067 6574 6174  se = await getat
+0004f490: 7472 2873 656c 662c 206d 6574 686f 6429  tr(self, method)
+0004f4a0: 2871 7565 7279 290a 2020 2020 2020 2020  (query).        
+0004f4b0: 230a 2020 2020 2020 2020 2320 7573 646d  #.        # usdm
+0004f4c0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0004f4d0: 2020 2023 2020 2020 5b0a 2020 2020 2020     #    [.      
+0004f4e0: 2020 2320 2020 2020 2020 207b 0a20 2020    #        {.   
+0004f4f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004f500: 2020 2273 796d 626f 6c22 3a20 2253 5553    "symbol": "SUS
+0004f510: 4849 5553 4454 222c 0a20 2020 2020 2020  HIUSDT",.       
+0004f520: 2023 2020 2020 2020 2020 2020 2020 2262   #            "b
+0004f530: 7261 636b 6574 7322 3a20 5b0a 2020 2020  rackets": [.    
+0004f540: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f550: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0004f560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f570: 2020 2020 2262 7261 636b 6574 223a 2031      "bracket": 1
+0004f580: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004f590: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004f5a0: 696e 6974 6961 6c4c 6576 6572 6167 6522  initialLeverage"
+0004f5b0: 3a20 3530 2c0a 2020 2020 2020 2020 2320  : 50,.        # 
+0004f5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f5d0: 2020 2022 6e6f 7469 6f6e 616c 4361 7022     "notionalCap"
+0004f5e0: 3a20 3530 3030 302c 0a20 2020 2020 2020  : 50000,.       
+0004f5f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f600: 2020 2020 2020 226e 6f74 696f 6e61 6c46        "notionalF
+0004f610: 6c6f 6f72 223a 2030 2c0a 2020 2020 2020  loor": 0,.      
+0004f620: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004f630: 2020 2020 2020 2022 6d61 696e 744d 6172         "maintMar
+0004f640: 6769 6e52 6174 696f 223a 2030 2e30 312c  ginRatio": 0.01,
+0004f650: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f660: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0004f670: 756d 223a 2030 2e30 0a20 2020 2020 2020  um": 0.0.       
+0004f680: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f690: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+0004f6a0: 2020 2020 2020 2020 2020 2020 2020 2e2e                ..
+0004f6b0: 2e0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
+0004f6c0: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+0004f6d0: 2023 2020 2020 2020 2020 7d0a 2020 2020   #        }.    
+0004f6e0: 2020 2020 2320 2020 205d 0a20 2020 2020      #    ].     
+0004f6f0: 2020 2023 0a20 2020 2020 2020 2023 2063     #.        # c
+0004f700: 6f69 6e6d 0a20 2020 2020 2020 2023 0a20  oinm.        #. 
+0004f710: 2020 2020 2020 2023 2020 2020 205b 0a20         #     [. 
+0004f720: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f730: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0004f740: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+0004f750: 223a 2258 5250 5553 445f 3231 3033 3236  ":"XRPUSD_210326
+0004f760: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004f770: 2020 2020 2020 2020 2022 6272 6163 6b65           "bracke
+0004f780: 7473 223a 5b0a 2020 2020 2020 2020 2320  ts":[.        # 
+0004f790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f7a0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0004f7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f7c0: 2262 7261 636b 6574 223a 312c 0a20 2020  "bracket":1,.   
+0004f7d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004f7e0: 2020 2020 2020 2020 2020 2022 696e 6974             "init
+0004f7f0: 6961 6c4c 6576 6572 6167 6522 3a32 302c  ialLeverage":20,
+0004f800: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f810: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004f820: 7174 7943 6170 223a 3530 3030 3030 2c0a  qtyCap":500000,.
+0004f830: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004f840: 2020 2020 2020 2020 2020 2020 2020 2271                "q
+0004f850: 7479 466c 6f6f 7222 3a30 2c0a 2020 2020  tyFloor":0,.    
+0004f860: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f870: 2020 2020 2020 2020 2020 226d 6169 6e74            "maint
+0004f880: 4d61 7267 696e 5261 7469 6f22 3a30 2e30  MarginRatio":0.0
+0004f890: 3138 352c 0a20 2020 2020 2020 2023 2020  185,.        #  
+0004f8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f8b0: 2020 2022 6375 6d22 3a30 2e30 0a20 2020     "cum":0.0.   
+0004f8c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004f8d0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0004f8e0: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
+0004f8f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f900: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+0004f910: 2020 205d 0a20 2020 2020 2020 2023 0a20     ].        #. 
+0004f920: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0004f930: 6c66 2e70 6172 7365 5f6c 6576 6572 6167  lf.parse_leverag
+0004f940: 655f 7469 6572 7328 7265 7370 6f6e 7365  e_tiers(response
+0004f950: 2c20 7379 6d62 6f6c 732c 2027 7379 6d62  , symbols, 'symb
+0004f960: 6f6c 2729 0a0a 2020 2020 6465 6620 7061  ol')..    def pa
+0004f970: 7273 655f 6d61 726b 6574 5f6c 6576 6572  rse_market_lever
+0004f980: 6167 655f 7469 6572 7328 7365 6c66 2c20  age_tiers(self, 
+0004f990: 696e 666f 2c20 6d61 726b 6574 3d4e 6f6e  info, market=Non
+0004f9a0: 6529 3a0a 2020 2020 2020 2020 2222 220a  e):.        """.
+0004f9b0: 2020 2020 2020 2020 202a 2040 6967 6e6f           * @igno
+0004f9c0: 7265 0a20 2020 2020 2020 203a 7061 7261  re.        :para
+0004f9d0: 6d20 6469 6374 2069 6e66 6f3a 2045 7863  m dict info: Exc
+0004f9e0: 6861 6e67 6520 7265 7370 6f6e 7365 2066  hange response f
+0004f9f0: 6f72 2031 206d 6172 6b65 740a 2020 2020  or 1 market.    
+0004fa00: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0004fa10: 6d61 726b 6574 3a20 4343 5854 206d 6172  market: CCXT mar
+0004fa20: 6b65 740a 2020 2020 2020 2020 2222 220a  ket.        """.
+0004fa30: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004fa40: 2020 2320 2020 207b 0a20 2020 2020 2020    #    {.       
+0004fa50: 2023 2020 2020 2020 2020 2273 796d 626f   #        "symbo
+0004fa60: 6c22 3a20 2253 5553 4849 5553 4454 222c  l": "SUSHIUSDT",
+0004fa70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004fa80: 2020 2262 7261 636b 6574 7322 3a20 5b0a    "brackets": [.
+0004fa90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004faa0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0004fab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fac0: 2262 7261 636b 6574 223a 2031 2c0a 2020  "bracket": 1,.  
+0004fad0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004fae0: 2020 2020 2020 2022 696e 6974 6961 6c4c         "initialL
+0004faf0: 6576 6572 6167 6522 3a20 3530 2c0a 2020  everage": 50,.  
+0004fb00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004fb10: 2020 2020 2020 2022 6e6f 7469 6f6e 616c         "notional
+0004fb20: 4361 7022 3a20 3530 3030 302c 0a20 2020  Cap": 50000,.   
+0004fb30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004fb40: 2020 2020 2020 226e 6f74 696f 6e61 6c46        "notionalF
+0004fb50: 6c6f 6f72 223a 2030 2c0a 2020 2020 2020  loor": 0,.      
+0004fb60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004fb70: 2020 2022 6d61 696e 744d 6172 6769 6e52     "maintMarginR
+0004fb80: 6174 696f 223a 2030 2e30 312c 0a20 2020  atio": 0.01,.   
+0004fb90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004fba0: 2020 2020 2020 2263 756d 223a 2030 2e30        "cum": 0.0
+0004fbb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004fbc0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+0004fbd0: 2023 2020 2020 2020 2020 2020 2020 2e2e   #            ..
+0004fbe0: 2e0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
+0004fbf0: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+0004fc00: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0004fc10: 2020 2020 2020 6d61 726b 6574 4964 203d        marketId =
+0004fc20: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0004fc30: 6728 696e 666f 2c20 2773 796d 626f 6c27  g(info, 'symbol'
+0004fc40: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+0004fc50: 203d 2073 656c 662e 7361 6665 5f6d 6172   = self.safe_mar
+0004fc60: 6b65 7428 6d61 726b 6574 4964 2c20 6d61  ket(marketId, ma
+0004fc70: 726b 6574 2c20 4e6f 6e65 2c20 2763 6f6e  rket, None, 'con
+0004fc80: 7472 6163 7427 290a 2020 2020 2020 2020  tract').        
+0004fc90: 6272 6163 6b65 7473 203d 2073 656c 662e  brackets = self.
+0004fca0: 7361 6665 5f76 616c 7565 2869 6e66 6f2c  safe_value(info,
+0004fcb0: 2027 6272 6163 6b65 7473 272c 205b 5d29   'brackets', [])
+0004fcc0: 0a20 2020 2020 2020 2074 6965 7273 203d  .        tiers =
+0004fcd0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
+0004fce0: 6a20 696e 2072 616e 6765 2830 2c20 6c65  j in range(0, le
+0004fcf0: 6e28 6272 6163 6b65 7473 2929 3a0a 2020  n(brackets)):.  
+0004fd00: 2020 2020 2020 2020 2020 6272 6163 6b65            bracke
+0004fd10: 7420 3d20 6272 6163 6b65 7473 5b6a 5d0a  t = brackets[j].
+0004fd20: 2020 2020 2020 2020 2020 2020 7469 6572              tier
+0004fd30: 732e 6170 7065 6e64 287b 0a20 2020 2020  s.append({.     
+0004fd40: 2020 2020 2020 2020 2020 2027 7469 6572             'tier
+0004fd50: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
+0004fd60: 6265 7228 6272 6163 6b65 742c 2027 6272  ber(bracket, 'br
+0004fd70: 6163 6b65 7427 292c 0a20 2020 2020 2020  acket'),.       
+0004fd80: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
+0004fd90: 6379 273a 206d 6172 6b65 745b 2771 756f  cy': market['quo
+0004fda0: 7465 275d 2c0a 2020 2020 2020 2020 2020  te'],.          
+0004fdb0: 2020 2020 2020 276d 696e 4e6f 7469 6f6e        'minNotion
+0004fdc0: 616c 273a 2073 656c 662e 7361 6665 5f6e  al': self.safe_n
+0004fdd0: 756d 6265 725f 3228 6272 6163 6b65 742c  umber_2(bracket,
+0004fde0: 2027 6e6f 7469 6f6e 616c 466c 6f6f 7227   'notionalFloor'
+0004fdf0: 2c20 2771 7479 466c 6f6f 7227 292c 0a20  , 'qtyFloor'),. 
+0004fe00: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0004fe10: 6d61 784e 6f74 696f 6e61 6c27 3a20 7365  maxNotional': se
+0004fe20: 6c66 2e73 6166 655f 6e75 6d62 6572 5f32  lf.safe_number_2
+0004fe30: 2862 7261 636b 6574 2c20 276e 6f74 696f  (bracket, 'notio
+0004fe40: 6e61 6c43 6170 272c 2027 7174 7943 6170  nalCap', 'qtyCap
+0004fe50: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
+0004fe60: 2020 2020 276d 6169 6e74 656e 616e 6365      'maintenance
+0004fe70: 4d61 7267 696e 5261 7465 273a 2073 656c  MarginRate': sel
+0004fe80: 662e 7361 6665 5f6e 756d 6265 7228 6272  f.safe_number(br
+0004fe90: 6163 6b65 742c 2027 6d61 696e 744d 6172  acket, 'maintMar
+0004fea0: 6769 6e52 6174 696f 2729 2c0a 2020 2020  ginRatio'),.    
+0004feb0: 2020 2020 2020 2020 2020 2020 276d 6178              'max
+0004fec0: 4c65 7665 7261 6765 273a 2073 656c 662e  Leverage': self.
+0004fed0: 7361 6665 5f6e 756d 6265 7228 6272 6163  safe_number(brac
+0004fee0: 6b65 742c 2027 696e 6974 6961 6c4c 6576  ket, 'initialLev
+0004fef0: 6572 6167 6527 292c 0a20 2020 2020 2020  erage'),.       
+0004ff00: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+0004ff10: 2062 7261 636b 6574 2c0a 2020 2020 2020   bracket,.      
+0004ff20: 2020 2020 2020 7d29 0a20 2020 2020 2020        }).       
+0004ff30: 2072 6574 7572 6e20 7469 6572 730a 0a20   return tiers.. 
+0004ff40: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
+0004ff50: 6368 5f70 6f73 6974 696f 6e28 7365 6c66  ch_position(self
+0004ff60: 2c20 7379 6d62 6f6c 3a20 7374 722c 2070  , symbol: str, p
+0004ff70: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0004ff80: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+0004ff90: 6565 2068 7474 7073 3a2f 2f62 696e 616e  ee https://binan
+0004ffa0: 6365 2d64 6f63 732e 6769 7468 7562 2e69  ce-docs.github.i
+0004ffb0: 6f2f 6170 6964 6f63 732f 766f 7074 696f  o/apidocs/voptio
+0004ffc0: 6e73 2f65 6e2f 236f 7074 696f 6e2d 706f  ns/en/#option-po
+0004ffd0: 7369 7469 6f6e 2d69 6e66 6f72 6d61 7469  sition-informati
+0004ffe0: 6f6e 2d75 7365 725f 6461 7461 0a20 2020  on-user_data.   
+0004fff0: 2020 2020 2066 6574 6368 2064 6174 6120       fetch data 
+00050000: 6f6e 2061 6e20 6f70 656e 2070 6f73 6974  on an open posit
+00050010: 696f 6e0a 2020 2020 2020 2020 3a70 6172  ion.        :par
+00050020: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
 00050030: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
-00050040: 6d62 6f6c 730a 2020 2020 2020 2020 3a70  mbols.        :p
-00050050: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
-00050060: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-00050070: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-00050080: 6865 2062 696e 616e 6365 2061 7069 2065  he binance api e
-00050090: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-000500a0: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
-000500b0: 2061 206c 6973 7420 6f66 2060 706f 7369   a list of `posi
-000500c0: 7469 6f6e 2073 7472 7563 7475 7265 203c  tion structure <
-000500d0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-000500e0: 742e 636f 6d2f 232f 3f69 643d 706f 7369  t.com/#/?id=posi
-000500f0: 7469 6f6e 2d73 7472 7563 7475 7265 3e60  tion-structure>`
-00050100: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00050110: 2020 2020 2064 6566 6175 6c74 4d65 7468       defaultMeth
-00050120: 6f64 203d 2073 656c 662e 7361 6665 5f73  od = self.safe_s
-00050130: 7472 696e 6728 7365 6c66 2e6f 7074 696f  tring(self.optio
-00050140: 6e73 2c20 2766 6574 6368 506f 7369 7469  ns, 'fetchPositi
-00050150: 6f6e 7327 2c20 2770 6f73 6974 696f 6e52  ons', 'positionR
-00050160: 6973 6b27 290a 2020 2020 2020 2020 6966  isk').        if
-00050170: 2064 6566 6175 6c74 4d65 7468 6f64 203d   defaultMethod =
-00050180: 3d20 2770 6f73 6974 696f 6e52 6973 6b27  = 'positionRisk'
-00050190: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000501a0: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
-000501b0: 6665 7463 685f 706f 7369 7469 6f6e 735f  fetch_positions_
-000501c0: 7269 736b 2873 796d 626f 6c73 2c20 7061  risk(symbols, pa
-000501d0: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
-000501e0: 6966 2064 6566 6175 6c74 4d65 7468 6f64  if defaultMethod
-000501f0: 203d 3d20 2761 6363 6f75 6e74 273a 0a20   == 'account':. 
-00050200: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00050210: 6e20 6177 6169 7420 7365 6c66 2e66 6574  n await self.fet
-00050220: 6368 5f61 6363 6f75 6e74 5f70 6f73 6974  ch_account_posit
-00050230: 696f 6e73 2873 796d 626f 6c73 2c20 7061  ions(symbols, pa
-00050240: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
-00050250: 6966 2064 6566 6175 6c74 4d65 7468 6f64  if defaultMethod
-00050260: 203d 3d20 276f 7074 696f 6e27 3a0a 2020   == 'option':.  
-00050270: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00050280: 2061 7761 6974 2073 656c 662e 6665 7463   await self.fetc
-00050290: 685f 6f70 7469 6f6e 5f70 6f73 6974 696f  h_option_positio
-000502a0: 6e73 2873 796d 626f 6c73 2c20 7061 7261  ns(symbols, para
-000502b0: 6d73 290a 2020 2020 2020 2020 656c 7365  ms).        else
-000502c0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-000502d0: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
-000502e0: 2873 656c 662e 6964 202b 2027 2e6f 7074  (self.id + '.opt
-000502f0: 696f 6e73 5b22 6665 7463 6850 6f73 6974  ions["fetchPosit
-00050300: 696f 6e73 225d 203d 2022 2720 2b20 6465  ions"] = "' + de
-00050310: 6661 756c 744d 6574 686f 6420 2b20 2722  faultMethod + '"
-00050320: 2069 7320 696e 7661 6c69 642c 2070 6c65   is invalid, ple
-00050330: 6173 6520 6368 6f6f 7365 2062 6574 7765  ase choose betwe
-00050340: 656e 2022 6163 636f 756e 7422 2c20 2270  en "account", "p
-00050350: 6f73 6974 696f 6e52 6973 6b22 2061 6e64  ositionRisk" and
-00050360: 2022 6f70 7469 6f6e 2227 290a 0a20 2020   "option"')..   
-00050370: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-00050380: 5f61 6363 6f75 6e74 5f70 6f73 6974 696f  _account_positio
-00050390: 6e73 2873 656c 662c 2073 796d 626f 6c73  ns(self, symbols
-000503a0: 3a20 4f70 7469 6f6e 616c 5b4c 6973 745b  : Optional[List[
-000503b0: 7374 725d 5d20 3d20 4e6f 6e65 2c20 7061  str]] = None, pa
-000503c0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-000503d0: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-000503e0: 7463 6820 6163 636f 756e 7420 706f 7369  tch account posi
-000503f0: 7469 6f6e 730a 2020 2020 2020 2020 3a70  tions.        :p
-00050400: 6172 616d 205b 7374 725d 7c4e 6f6e 6520  aram [str]|None 
-00050410: 7379 6d62 6f6c 733a 206c 6973 7420 6f66  symbols: list of
-00050420: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-00050430: 7379 6d62 6f6c 730a 2020 2020 2020 2020  symbols.        
-00050440: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-00050450: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-00050460: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00050470: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
-00050480: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-00050490: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
-000504a0: 2064 6174 6120 6f6e 2061 6363 6f75 6e74   data on account
-000504b0: 2070 6f73 6974 696f 6e73 0a20 2020 2020   positions.     
-000504c0: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-000504d0: 6620 7379 6d62 6f6c 7320 6973 206e 6f74  f symbols is not
-000504e0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000504f0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00050500: 616e 6365 2873 796d 626f 6c73 2c20 6c69  ance(symbols, li
-00050510: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
-00050520: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
-00050530: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
-00050540: 662e 6964 202b 2027 2066 6574 6368 506f  f.id + ' fetchPo
-00050550: 7369 7469 6f6e 7328 2920 7265 7175 6972  sitions() requir
-00050560: 6573 2061 6e20 6172 7261 7920 6172 6775  es an array argu
-00050570: 6d65 6e74 2066 6f72 2073 796d 626f 6c73  ment for symbols
-00050580: 2729 0a20 2020 2020 2020 2061 7761 6974  ').        await
-00050590: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-000505a0: 7473 2829 0a20 2020 2020 2020 2061 7761  ts().        awa
-000505b0: 6974 2073 656c 662e 6c6f 6164 5f6c 6576  it self.load_lev
-000505c0: 6572 6167 655f 6272 6163 6b65 7473 2846  erage_brackets(F
-000505d0: 616c 7365 2c20 7061 7261 6d73 290a 2020  alse, params).  
-000505e0: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
-000505f0: 6f6e 650a 2020 2020 2020 2020 6465 6661  one.        defa
-00050600: 756c 7454 7970 6520 3d20 7365 6c66 2e73  ultType = self.s
-00050610: 6166 655f 7374 7269 6e67 2873 656c 662e  afe_string(self.
-00050620: 6f70 7469 6f6e 732c 2027 6465 6661 756c  options, 'defaul
-00050630: 7454 7970 6527 2c20 2766 7574 7572 6527  tType', 'future'
-00050640: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
-00050650: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00050660: 6728 7061 7261 6d73 2c20 2774 7970 6527  g(params, 'type'
-00050670: 2c20 6465 6661 756c 7454 7970 6529 0a20  , defaultType). 
-00050680: 2020 2020 2020 2071 7565 7279 203d 2073         query = s
-00050690: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-000506a0: 2027 7479 7065 2729 0a20 2020 2020 2020   'type').       
-000506b0: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
-000506c0: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
-000506d0: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
-000506e0: 6e64 6c65 5f73 7562 5f74 7970 655f 616e  ndle_sub_type_an
-000506f0: 645f 7061 7261 6d73 2827 6665 7463 6841  d_params('fetchA
-00050700: 6363 6f75 6e74 506f 7369 7469 6f6e 7327  ccountPositions'
-00050710: 2c20 4e6f 6e65 2c20 7061 7261 6d73 2c20  , None, params, 
-00050720: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
-00050730: 2020 6966 2073 656c 662e 6973 5f6c 696e    if self.is_lin
-00050740: 6561 7228 7479 7065 2c20 7375 6254 7970  ear(type, subTyp
-00050750: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00050760: 6d65 7468 6f64 203d 2027 6661 7069 5072  method = 'fapiPr
-00050770: 6976 6174 6547 6574 4163 636f 756e 7427  ivateGetAccount'
-00050780: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
-00050790: 6c66 2e69 735f 696e 7665 7273 6528 7479  lf.is_inverse(ty
-000507a0: 7065 2c20 7375 6254 7970 6529 3a0a 2020  pe, subType):.  
-000507b0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-000507c0: 203d 2027 6461 7069 5072 6976 6174 6547   = 'dapiPrivateG
-000507d0: 6574 4163 636f 756e 7427 0a20 2020 2020  etAccount'.     
-000507e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000507f0: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-00050800: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-00050810: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
-00050820: 6e73 2829 2073 7570 706f 7274 7320 6c69  ns() supports li
-00050830: 6e65 6172 2061 6e64 2069 6e76 6572 7365  near and inverse
-00050840: 2063 6f6e 7472 6163 7473 206f 6e6c 7927   contracts only'
-00050850: 290a 2020 2020 2020 2020 6163 636f 756e  ).        accoun
-00050860: 7420 3d20 6177 6169 7420 6765 7461 7474  t = await getatt
-00050870: 7228 7365 6c66 2c20 6d65 7468 6f64 2928  r(self, method)(
-00050880: 7175 6572 7929 0a20 2020 2020 2020 2072  query).        r
-00050890: 6573 756c 7420 3d20 7365 6c66 2e70 6172  esult = self.par
-000508a0: 7365 5f61 6363 6f75 6e74 5f70 6f73 6974  se_account_posit
-000508b0: 696f 6e73 2861 6363 6f75 6e74 290a 2020  ions(account).  
-000508c0: 2020 2020 2020 7379 6d62 6f6c 7320 3d20        symbols = 
-000508d0: 7365 6c66 2e6d 6172 6b65 745f 7379 6d62  self.market_symb
-000508e0: 6f6c 7328 7379 6d62 6f6c 7329 0a20 2020  ols(symbols).   
-000508f0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00050900: 2e66 696c 7465 725f 6279 5f61 7272 6179  .filter_by_array
-00050910: 2872 6573 756c 742c 2027 7379 6d62 6f6c  (result, 'symbol
-00050920: 272c 2073 796d 626f 6c73 2c20 4661 6c73  ', symbols, Fals
-00050930: 6529 0a0a 2020 2020 6173 796e 6320 6465  e)..    async de
-00050940: 6620 6665 7463 685f 706f 7369 7469 6f6e  f fetch_position
-00050950: 735f 7269 736b 2873 656c 662c 2073 796d  s_risk(self, sym
-00050960: 626f 6c73 3a20 4f70 7469 6f6e 616c 5b4c  bols: Optional[L
-00050970: 6973 745b 7374 725d 5d20 3d20 4e6f 6e65  ist[str]] = None
-00050980: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00050990: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000509a0: 2020 6665 7463 6820 706f 7369 7469 6f6e    fetch position
-000509b0: 7320 7269 736b 0a20 2020 2020 2020 203a  s risk.        :
-000509c0: 7061 7261 6d20 5b73 7472 5d7c 4e6f 6e65  param [str]|None
-000509d0: 2073 796d 626f 6c73 3a20 6c69 7374 206f   symbols: list o
-000509e0: 6620 756e 6966 6965 6420 6d61 726b 6574  f unified market
-000509f0: 2073 796d 626f 6c73 0a20 2020 2020 2020   symbols.       
-00050a00: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00050a10: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00050a20: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00050a30: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
-00050a40: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00050a50: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-00050a60: 3a20 6461 7461 206f 6e20 7468 6520 706f  : data on the po
-00050a70: 7369 7469 6f6e 7320 7269 736b 0a20 2020  sitions risk.   
-00050a80: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00050a90: 2069 6620 7379 6d62 6f6c 7320 6973 206e   if symbols is n
-00050aa0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00050ab0: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00050ac0: 7374 616e 6365 2873 796d 626f 6c73 2c20  stance(symbols, 
-00050ad0: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
-00050ae0: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
-00050af0: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
-00050b00: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
-00050b10: 506f 7369 7469 6f6e 7352 6973 6b28 2920  PositionsRisk() 
-00050b20: 7265 7175 6972 6573 2061 6e20 6172 7261  requires an arra
-00050b30: 7920 6172 6775 6d65 6e74 2066 6f72 2073  y argument for s
-00050b40: 796d 626f 6c73 2729 0a20 2020 2020 2020  ymbols').       
-00050b50: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-00050b60: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00050b70: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-00050b80: 6164 5f6c 6576 6572 6167 655f 6272 6163  ad_leverage_brac
-00050b90: 6b65 7473 2846 616c 7365 2c20 7061 7261  kets(False, para
-00050ba0: 6d73 290a 2020 2020 2020 2020 7265 7175  ms).        requ
-00050bb0: 6573 7420 3d20 7b7d 0a20 2020 2020 2020  est = {}.       
-00050bc0: 206d 6574 686f 6420 3d20 4e6f 6e65 0a20   method = None. 
-00050bd0: 2020 2020 2020 2064 6566 6175 6c74 5479         defaultTy
-00050be0: 7065 203d 2027 6675 7475 7265 270a 2020  pe = 'future'.  
-00050bf0: 2020 2020 2020 6465 6661 756c 7454 7970        defaultTyp
-00050c00: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00050c10: 7269 6e67 2873 656c 662e 6f70 7469 6f6e  ring(self.option
-00050c20: 732c 2027 6465 6661 756c 7454 7970 6527  s, 'defaultType'
-00050c30: 2c20 6465 6661 756c 7454 7970 6529 0a20  , defaultType). 
-00050c40: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
-00050c50: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-00050c60: 6172 616d 732c 2027 7479 7065 272c 2064  arams, 'type', d
-00050c70: 6566 6175 6c74 5479 7065 290a 2020 2020  efaultType).    
-00050c80: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
-00050c90: 6e65 0a20 2020 2020 2020 2073 7562 5479  ne.        subTy
-00050ca0: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
-00050cb0: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
-00050cc0: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
-00050cd0: 7463 6850 6f73 6974 696f 6e73 5269 736b  tchPositionsRisk
-00050ce0: 272c 204e 6f6e 652c 2070 6172 616d 732c  ', None, params,
-00050cf0: 2027 6c69 6e65 6172 2729 0a20 2020 2020   'linear').     
-00050d00: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
-00050d10: 2e6f 6d69 7428 7061 7261 6d73 2c20 2774  .omit(params, 't
-00050d20: 7970 6527 290a 2020 2020 2020 2020 6966  ype').        if
-00050d30: 2073 656c 662e 6973 5f6c 696e 6561 7228   self.is_linear(
-00050d40: 7479 7065 2c20 7375 6254 7970 6529 3a0a  type, subType):.
-00050d50: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-00050d60: 6f64 203d 2027 6661 7069 5072 6976 6174  od = 'fapiPrivat
-00050d70: 6547 6574 506f 7369 7469 6f6e 5269 736b  eGetPositionRisk
-00050d80: 270a 2020 2020 2020 2020 2020 2020 2320  '.            # 
-00050d90: 2023 2323 2052 6573 706f 6e73 6520 6578   ### Response ex
-00050da0: 616d 706c 6573 2020 2323 230a 2020 2020  amples  ###.    
-00050db0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00050dc0: 2020 2020 2020 2320 466f 7220 4f6e 652d        # For One-
-00050dd0: 7761 7920 706f 7369 7469 6f6e 206d 6f64  way position mod
-00050de0: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
-00050df0: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
-00050e00: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
-00050e10: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00050e20: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
-00050e30: 7269 6365 223a 2022 302e 3030 3030 3022  rice": "0.00000"
-00050e40: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-00050e50: 2020 2020 2020 2020 2020 2020 226d 6172              "mar
-00050e60: 6769 6e54 7970 6522 3a20 2269 736f 6c61  ginType": "isola
-00050e70: 7465 6422 2c0a 2020 2020 2020 2020 2020  ted",.          
-00050e80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00050e90: 2269 7341 7574 6f41 6464 4d61 7267 696e  "isAutoAddMargin
-00050ea0: 223a 2022 6661 6c73 6522 2c0a 2020 2020  ": "false",.    
-00050eb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050ec0: 2020 2020 2020 2269 736f 6c61 7465 644d        "isolatedM
-00050ed0: 6172 6769 6e22 3a20 2230 2e30 3030 3030  argin": "0.00000
-00050ee0: 3030 3022 2c0a 2020 2020 2020 2020 2020  000",.          
-00050ef0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00050f00: 226c 6576 6572 6167 6522 3a20 2231 3022  "leverage": "10"
-00050f10: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-00050f20: 2020 2020 2020 2020 2020 2020 226c 6971              "liq
-00050f30: 7569 6461 7469 6f6e 5072 6963 6522 3a20  uidationPrice": 
-00050f40: 2230 222c 0a20 2020 2020 2020 2020 2020  "0",.           
-00050f50: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00050f60: 6d61 726b 5072 6963 6522 3a20 2236 3637  markPrice": "667
-00050f70: 392e 3530 3637 3131 3738 222c 0a20 2020  9.50671178",.   
-00050f80: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00050f90: 2020 2020 2020 2022 6d61 784e 6f74 696f         "maxNotio
-00050fa0: 6e61 6c56 616c 7565 223a 2022 3230 3030  nalValue": "2000
-00050fb0: 3030 3030 222c 0a20 2020 2020 2020 2020  0000",.         
-00050fc0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050fd0: 2022 706f 7369 7469 6f6e 416d 7422 3a20   "positionAmt": 
-00050fe0: 2230 2e30 3030 222c 0a20 2020 2020 2020  "0.000",.       
-00050ff0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051000: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
-00051010: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
-00051020: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00051030: 2020 2275 6e52 6561 6c69 7a65 6450 726f    "unRealizedPro
-00051040: 6669 7422 3a20 2230 2e30 3030 3030 3030  fit": "0.0000000
-00051050: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
-00051060: 2320 2020 2020 2020 2020 2020 2020 2270  #             "p
-00051070: 6f73 6974 696f 6e53 6964 6522 3a20 2242  ositionSide": "B
-00051080: 4f54 4822 2c0a 2020 2020 2020 2020 2020  OTH",.          
-00051090: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000510a0: 2275 7064 6174 6554 696d 6522 3a20 300a  "updateTime": 0.
-000510b0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-000510c0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-000510d0: 2020 2023 2020 2020 205d 0a20 2020 2020     #     ].     
-000510e0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-000510f0: 2020 2020 2023 2046 6f72 2048 6564 6765       # For Hedge
-00051100: 2070 6f73 6974 696f 6e20 6d6f 6465 3a0a   position mode:.
-00051110: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00051120: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
-00051130: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
-00051140: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00051150: 2020 2020 2020 2265 6e74 7279 5072 6963        "entryPric
-00051160: 6522 3a20 2236 3536 332e 3636 3530 3022  e": "6563.66500"
-00051170: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-00051180: 2020 2020 2020 2020 2020 2020 226d 6172              "mar
-00051190: 6769 6e54 7970 6522 3a20 2269 736f 6c61  ginType": "isola
-000511a0: 7465 6422 2c0a 2020 2020 2020 2020 2020  ted",.          
-000511b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000511c0: 2269 7341 7574 6f41 6464 4d61 7267 696e  "isAutoAddMargin
-000511d0: 223a 2022 6661 6c73 6522 2c0a 2020 2020  ": "false",.    
-000511e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000511f0: 2020 2020 2020 2269 736f 6c61 7465 644d        "isolatedM
-00051200: 6172 6769 6e22 3a20 2231 3535 3137 2e35  argin": "15517.5
-00051210: 3431 3530 3436 3822 2c0a 2020 2020 2020  4150468",.      
-00051220: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00051230: 2020 2020 226c 6576 6572 6167 6522 3a20      "leverage": 
-00051240: 2231 3022 2c0a 2020 2020 2020 2020 2020  "10",.          
-00051250: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00051260: 226c 6971 7569 6461 7469 6f6e 5072 6963  "liquidationPric
-00051270: 6522 3a20 2235 3933 302e 3738 222c 0a20  e": "5930.78",. 
-00051280: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00051290: 2020 2020 2020 2020 2022 6d61 726b 5072           "markPr
-000512a0: 6963 6522 3a20 2236 3637 392e 3530 3637  ice": "6679.5067
-000512b0: 3131 3738 222c 0a20 2020 2020 2020 2020  1178",.         
-000512c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000512d0: 2022 6d61 784e 6f74 696f 6e61 6c56 616c   "maxNotionalVal
-000512e0: 7565 223a 2022 3230 3030 3030 3030 222c  ue": "20000000",
-000512f0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00051300: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
-00051310: 7469 6f6e 416d 7422 3a20 2232 302e 3030  tionAmt": "20.00
-00051320: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
-00051330: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
-00051340: 796d 626f 6c22 3a20 2242 5443 5553 4454  ymbol": "BTCUSDT
-00051350: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-00051360: 2020 2020 2020 2020 2020 2020 2022 756e               "un
-00051370: 5265 616c 697a 6564 5072 6f66 6974 223a  RealizedProfit":
-00051380: 2022 3233 3136 2e38 3334 3233 3536 3022   "2316.83423560"
-00051390: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000513a0: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
-000513b0: 7469 6f6e 5369 6465 223a 2022 4c4f 4e47  tionSide": "LONG
-000513c0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-000513d0: 2020 2020 2020 2020 2020 2020 2022 7570               "up
-000513e0: 6461 7465 5469 6d65 223a 2031 3632 3534  dateTime": 16254
-000513f0: 3734 3330 3437 3635 0a20 2020 2020 2020  74304765.       
-00051400: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-00051410: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-00051420: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00051430: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00051440: 2020 2020 2265 6e74 7279 5072 6963 6522      "entryPrice"
-00051450: 3a20 2230 2e30 3030 3030 222c 0a20 2020  : "0.00000",.   
-00051460: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00051470: 2020 2020 2020 2022 6d61 7267 696e 5479         "marginTy
-00051480: 7065 223a 2022 6973 6f6c 6174 6564 222c  pe": "isolated",
-00051490: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000514a0: 2020 2020 2020 2020 2020 2022 6973 4175             "isAu
-000514b0: 746f 4164 644d 6172 6769 6e22 3a20 2266  toAddMargin": "f
-000514c0: 616c 7365 222c 0a20 2020 2020 2020 2020  alse",.         
-000514d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000514e0: 2022 6973 6f6c 6174 6564 4d61 7267 696e   "isolatedMargin
-000514f0: 223a 2022 3534 3133 2e39 3537 3939 3939  ": "5413.9579999
-00051500: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
-00051510: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
-00051520: 6576 6572 6167 6522 3a20 2231 3022 2c0a  everage": "10",.
-00051530: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00051540: 2020 2020 2020 2020 2020 226c 6971 7569            "liqui
-00051550: 6461 7469 6f6e 5072 6963 6522 3a20 2237  dationPrice": "7
-00051560: 3138 392e 3935 222c 0a20 2020 2020 2020  189.95",.       
-00051570: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051580: 2020 2022 6d61 726b 5072 6963 6522 3a20     "markPrice": 
-00051590: 2236 3637 392e 3530 3637 3131 3738 222c  "6679.50671178",
-000515a0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000515b0: 2020 2020 2020 2020 2020 2022 6d61 784e             "maxN
-000515c0: 6f74 696f 6e61 6c56 616c 7565 223a 2022  otionalValue": "
-000515d0: 3230 3030 3030 3030 222c 0a20 2020 2020  20000000",.     
-000515e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000515f0: 2020 2020 2022 706f 7369 7469 6f6e 416d       "positionAm
-00051600: 7422 3a20 222d 3130 2e30 3030 222c 0a20  t": "-10.000",. 
-00051610: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00051620: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-00051630: 223a 2022 4254 4355 5344 5422 2c0a 2020  ": "BTCUSDT",.  
-00051640: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00051650: 2020 2020 2020 2020 2275 6e52 6561 6c69          "unReali
-00051660: 7a65 6450 726f 6669 7422 3a20 222d 3131  zedProfit": "-11
-00051670: 3536 2e34 3637 3131 3738 3022 2c0a 2020  56.46711780",.  
-00051680: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00051690: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-000516a0: 6e53 6964 6522 3a20 2253 484f 5254 222c  nSide": "SHORT",
-000516b0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000516c0: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
-000516d0: 7465 5469 6d65 223a 2030 0a20 2020 2020  teTime": 0.     
-000516e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000516f0: 207d 0a20 2020 2020 2020 2020 2020 2023   }.            #
-00051700: 2020 2020 205d 0a20 2020 2020 2020 2065       ].        e
-00051710: 6c69 6620 7365 6c66 2e69 735f 696e 7665  lif self.is_inve
-00051720: 7273 6528 7479 7065 2c20 7375 6254 7970  rse(type, subTyp
-00051730: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00051740: 6d65 7468 6f64 203d 2027 6461 7069 5072  method = 'dapiPr
-00051750: 6976 6174 6547 6574 506f 7369 7469 6f6e  ivateGetPosition
-00051760: 5269 736b 270a 2020 2020 2020 2020 656c  Risk'.        el
-00051770: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00051780: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-00051790: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
-000517a0: 6574 6368 506f 7369 7469 6f6e 7352 6973  etchPositionsRis
-000517b0: 6b28 2920 7375 7070 6f72 7473 206c 696e  k() supports lin
-000517c0: 6561 7220 616e 6420 696e 7665 7273 6520  ear and inverse 
-000517d0: 636f 6e74 7261 6374 7320 6f6e 6c79 2729  contracts only')
-000517e0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-000517f0: 6520 3d20 6177 6169 7420 6765 7461 7474  e = await getatt
-00051800: 7228 7365 6c66 2c20 6d65 7468 6f64 2928  r(self, method)(
-00051810: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00051820: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00051830: 2020 2020 2020 7265 7375 6c74 203d 205b        result = [
-00051840: 5d0a 2020 2020 2020 2020 666f 7220 6920  ].        for i 
-00051850: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-00051860: 7265 7370 6f6e 7365 2929 3a0a 2020 2020  response)):.    
-00051870: 2020 2020 2020 2020 7061 7273 6564 203d          parsed =
-00051880: 2073 656c 662e 7061 7273 655f 706f 7369   self.parse_posi
-00051890: 7469 6f6e 5f72 6973 6b28 7265 7370 6f6e  tion_risk(respon
-000518a0: 7365 5b69 5d29 0a20 2020 2020 2020 2020  se[i]).         
-000518b0: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
-000518c0: 2870 6172 7365 6429 0a20 2020 2020 2020  (parsed).       
-000518d0: 2073 796d 626f 6c73 203d 2073 656c 662e   symbols = self.
-000518e0: 6d61 726b 6574 5f73 796d 626f 6c73 2873  market_symbols(s
-000518f0: 796d 626f 6c73 290a 2020 2020 2020 2020  ymbols).        
-00051900: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
-00051910: 6572 5f62 795f 6172 7261 7928 7265 7375  er_by_array(resu
-00051920: 6c74 2c20 2773 796d 626f 6c27 2c20 7379  lt, 'symbol', sy
-00051930: 6d62 6f6c 732c 2046 616c 7365 290a 0a20  mbols, False).. 
-00051940: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
-00051950: 6368 5f66 756e 6469 6e67 5f68 6973 746f  ch_funding_histo
-00051960: 7279 2873 656c 662c 2073 796d 626f 6c3a  ry(self, symbol:
-00051970: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00051980: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
-00051990: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-000519a0: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
-000519b0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
-000519c0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-000519d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000519e0: 2066 6574 6368 2074 6865 2068 6973 746f   fetch the histo
-000519f0: 7279 206f 6620 6675 6e64 696e 6720 7061  ry of funding pa
-00051a00: 796d 656e 7473 2070 6169 6420 616e 6420  yments paid and 
-00051a10: 7265 6365 6976 6564 206f 6e20 7365 6c66  received on self
-00051a20: 2061 6363 6f75 6e74 0a20 2020 2020 2020   account.       
-00051a30: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-00051a40: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
-00051a50: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
-00051a60: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00051a70: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
-00051a80: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
-00051a90: 696e 206d 7320 746f 2066 6574 6368 2066  in ms to fetch f
-00051aa0: 756e 6469 6e67 2068 6973 746f 7279 2066  unding history f
-00051ab0: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
-00051ac0: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-00051ad0: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
-00051ae0: 6d62 6572 206f 6620 6675 6e64 696e 6720  mber of funding 
-00051af0: 6869 7374 6f72 7920 7374 7275 6374 7572  history structur
-00051b00: 6573 2074 6f20 7265 7472 6965 7665 0a20  es to retrieve. 
-00051b10: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-00051b20: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-00051b30: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-00051b40: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
-00051b50: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
-00051b60: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00051b70: 7320 6469 6374 3a20 6120 6066 756e 6469  s dict: a `fundi
-00051b80: 6e67 2068 6973 746f 7279 2073 7472 7563  ng history struc
-00051b90: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-00051ba0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-00051bb0: 643d 6675 6e64 696e 672d 6869 7374 6f72  d=funding-histor
-00051bc0: 792d 7374 7275 6374 7572 653e 600a 2020  y-structure>`.  
-00051bd0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00051be0: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
-00051bf0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-00051c00: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
-00051c10: 650a 2020 2020 2020 2020 6d65 7468 6f64  e.        method
-00051c20: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00051c30: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00051c40: 2020 2020 2020 2020 2769 6e63 6f6d 6554          'incomeT
-00051c50: 7970 6527 3a20 2746 554e 4449 4e47 5f46  ype': 'FUNDING_F
-00051c60: 4545 272c 2020 2320 2254 5241 4e53 4645  EE',  # "TRANSFE
-00051c70: 5222 efbc 8c22 5745 4c43 4f4d 455f 424f  R"..."WELCOME_BO
-00051c80: 4e55 5322 2c20 2252 4541 4c49 5a45 445f  NUS", "REALIZED_
-00051c90: 504e 4c22 efbc 8c22 4655 4e44 494e 475f  PNL"..."FUNDING_
-00051ca0: 4645 4522 2c20 2243 4f4d 4d49 5353 494f  FEE", "COMMISSIO
-00051cb0: 4e22 2061 6e64 2022 494e 5355 5241 4e43  N" and "INSURANC
-00051cc0: 455f 434c 4541 5222 0a20 2020 2020 2020  E_CLEAR".       
-00051cd0: 207d 0a20 2020 2020 2020 2069 6620 7379   }.        if sy
-00051ce0: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
-00051cf0: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
-00051d00: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00051d10: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00051d20: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00051d30: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
-00051d40: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
-00051d50: 2020 2020 6966 206e 6f74 206d 6172 6b65      if not marke
-00051d60: 745b 2773 7761 7027 5d3a 0a20 2020 2020  t['swap']:.     
-00051d70: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00051d80: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
-00051d90: 6c66 2e69 6420 2b20 2720 6665 7463 6846  lf.id + ' fetchF
-00051da0: 756e 6469 6e67 4869 7374 6f72 7928 2920  undingHistory() 
-00051db0: 7375 7070 6f72 7473 2073 7761 7020 636f  supports swap co
-00051dc0: 6e74 7261 6374 7320 6f6e 6c79 2729 0a20  ntracts only'). 
-00051dd0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
-00051de0: 204e 6f6e 650a 2020 2020 2020 2020 7375   None.        su
-00051df0: 6254 7970 652c 2070 6172 616d 7320 3d20  bType, params = 
-00051e00: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
-00051e10: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-00051e20: 2766 6574 6368 4675 6e64 696e 6748 6973  'fetchFundingHis
-00051e30: 746f 7279 272c 206d 6172 6b65 742c 2070  tory', market, p
-00051e40: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
-00051e50: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
-00051e60: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00051e70: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00051e80: 7374 5b27 7374 6172 7454 696d 6527 5d20  st['startTime'] 
-00051e90: 3d20 7369 6e63 650a 2020 2020 2020 2020  = since.        
-00051ea0: 6966 206c 696d 6974 2069 7320 6e6f 7420  if limit is not 
-00051eb0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00051ec0: 2020 7265 7175 6573 745b 276c 696d 6974    request['limit
-00051ed0: 275d 203d 206c 696d 6974 0a20 2020 2020  '] = limit.     
-00051ee0: 2020 2064 6566 6175 6c74 5479 7065 203d     defaultType =
-00051ef0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00051f00: 675f 3228 7365 6c66 2e6f 7074 696f 6e73  g_2(self.options
-00051f10: 2c20 2766 6574 6368 4675 6e64 696e 6748  , 'fetchFundingH
-00051f20: 6973 746f 7279 272c 2027 6465 6661 756c  istory', 'defaul
-00051f30: 7454 7970 6527 2c20 2766 7574 7572 6527  tType', 'future'
-00051f40: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
-00051f50: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00051f60: 6728 7061 7261 6d73 2c20 2774 7970 6527  g(params, 'type'
-00051f70: 2c20 6465 6661 756c 7454 7970 6529 0a20  , defaultType). 
-00051f80: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-00051f90: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-00051fa0: 2c20 2774 7970 6527 290a 2020 2020 2020  , 'type').      
-00051fb0: 2020 6966 2073 656c 662e 6973 5f6c 696e    if self.is_lin
-00051fc0: 6561 7228 7479 7065 2c20 7375 6254 7970  ear(type, subTyp
-00051fd0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00051fe0: 6d65 7468 6f64 203d 2027 6661 7069 5072  method = 'fapiPr
-00051ff0: 6976 6174 6547 6574 496e 636f 6d65 270a  ivateGetIncome'.
-00052000: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
-00052010: 662e 6973 5f69 6e76 6572 7365 2874 7970  f.is_inverse(typ
-00052020: 652c 2073 7562 5479 7065 293a 0a20 2020  e, subType):.   
-00052030: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-00052040: 3d20 2764 6170 6950 7269 7661 7465 4765  = 'dapiPrivateGe
-00052050: 7449 6e63 6f6d 6527 0a20 2020 2020 2020  tIncome'.       
-00052060: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00052070: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-00052080: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-00052090: 2720 6665 7463 6846 756e 6469 6e67 4869  ' fetchFundingHi
-000520a0: 7374 6f72 7928 2920 7375 7070 6f72 7473  story() supports
-000520b0: 206c 696e 6561 7220 616e 6420 696e 7665   linear and inve
-000520c0: 7273 6520 636f 6e74 7261 6374 7320 6f6e  rse contracts on
-000520d0: 6c79 2729 0a20 2020 2020 2020 2072 6573  ly').        res
-000520e0: 706f 6e73 6520 3d20 6177 6169 7420 6765  ponse = await ge
-000520f0: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
-00052100: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
-00052110: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00052120: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00052130: 2073 656c 662e 7061 7273 655f 696e 636f   self.parse_inco
-00052140: 6d65 7328 7265 7370 6f6e 7365 2c20 6d61  mes(response, ma
-00052150: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
-00052160: 6974 290a 0a20 2020 2061 7379 6e63 2064  it)..    async d
-00052170: 6566 2073 6574 5f6c 6576 6572 6167 6528  ef set_leverage(
-00052180: 7365 6c66 2c20 6c65 7665 7261 6765 2c20  self, leverage, 
-00052190: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
-000521a0: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
-000521b0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-000521c0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-000521d0: 7420 7468 6520 6c65 7665 6c20 6f66 206c  t the level of l
-000521e0: 6576 6572 6167 6520 666f 7220 6120 6d61  everage for a ma
-000521f0: 726b 6574 0a20 2020 2020 2020 203a 7061  rket.        :pa
-00052200: 7261 6d20 666c 6f61 7420 6c65 7665 7261  ram float levera
-00052210: 6765 3a20 7468 6520 7261 7465 206f 6620  ge: the rate of 
-00052220: 6c65 7665 7261 6765 0a20 2020 2020 2020  leverage.       
-00052230: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00052240: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
-00052250: 6574 2073 796d 626f 6c0a 2020 2020 2020  et symbol.      
-00052260: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-00052270: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-00052280: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-00052290: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
-000522a0: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-000522b0: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-000522c0: 743a 2072 6573 706f 6e73 6520 6672 6f6d  t: response from
-000522d0: 2074 6865 2065 7863 6861 6e67 650a 2020   the exchange.  
-000522e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000522f0: 2020 6966 2073 796d 626f 6c20 6973 204e    if symbol is N
-00052300: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00052310: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-00052320: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-00052330: 202b 2027 2073 6574 4c65 7665 7261 6765   + ' setLeverage
-00052340: 2829 2072 6571 7569 7265 7320 6120 7379  () requires a sy
-00052350: 6d62 6f6c 2061 7267 756d 656e 7427 290a  mbol argument').
-00052360: 2020 2020 2020 2020 2320 5741 524e 494e          # WARNIN
-00052370: 473a 2054 4849 5320 5749 4c4c 2049 4e43  G: THIS WILL INC
-00052380: 5245 4153 4520 4c49 5155 4944 4154 494f  REASE LIQUIDATIO
-00052390: 4e20 5052 4943 4520 464f 5220 4f50 454e  N PRICE FOR OPEN
-000523a0: 2049 534f 4c41 5445 4420 4c4f 4e47 2050   ISOLATED LONG P
-000523b0: 4f53 4954 494f 4e53 0a20 2020 2020 2020  OSITIONS.       
-000523c0: 2023 2041 4e44 2044 4543 5245 4153 4520   # AND DECREASE 
-000523d0: 4c49 5155 4944 4154 494f 4e20 5052 4943  LIQUIDATION PRIC
-000523e0: 4520 464f 5220 4f50 454e 2049 534f 4c41  E FOR OPEN ISOLA
-000523f0: 5445 4420 5348 4f52 5420 504f 5349 5449  TED SHORT POSITI
-00052400: 4f4e 530a 2020 2020 2020 2020 6966 2028  ONS.        if (
-00052410: 6c65 7665 7261 6765 203c 2031 2920 6f72  leverage < 1) or
-00052420: 2028 6c65 7665 7261 6765 203e 2031 3235   (leverage > 125
-00052430: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00052440: 6169 7365 2042 6164 5265 7175 6573 7428  aise BadRequest(
-00052450: 7365 6c66 2e69 6420 2b20 2720 6c65 7665  self.id + ' leve
-00052460: 7261 6765 2073 686f 756c 6420 6265 2062  rage should be b
-00052470: 6574 7765 656e 2031 2061 6e64 2031 3235  etween 1 and 125
-00052480: 2729 0a20 2020 2020 2020 2061 7761 6974  ').        await
-00052490: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-000524a0: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
-000524b0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-000524c0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
-000524d0: 2020 6d65 7468 6f64 203d 204e 6f6e 650a    method = None.
-000524e0: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-000524f0: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
-00052500: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-00052510: 3d20 2766 6170 6950 7269 7661 7465 506f  = 'fapiPrivatePo
-00052520: 7374 4c65 7665 7261 6765 270a 2020 2020  stLeverage'.    
-00052530: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-00052540: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
-00052550: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00052560: 2027 6461 7069 5072 6976 6174 6550 6f73   'dapiPrivatePos
-00052570: 744c 6576 6572 6167 6527 0a20 2020 2020  tLeverage'.     
-00052580: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00052590: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-000525a0: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-000525b0: 2b20 2720 7365 744c 6576 6572 6167 6528  + ' setLeverage(
-000525c0: 2920 7375 7070 6f72 7473 206c 696e 6561  ) supports linea
-000525d0: 7220 616e 6420 696e 7665 7273 6520 636f  r and inverse co
-000525e0: 6e74 7261 6374 7320 6f6e 6c79 2729 0a20  ntracts only'). 
-000525f0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-00052600: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00052610: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
-00052620: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-00052630: 2020 2027 6c65 7665 7261 6765 273a 206c     'leverage': l
-00052640: 6576 6572 6167 652c 0a20 2020 2020 2020  everage,.       
-00052650: 207d 0a20 2020 2020 2020 2072 6574 7572   }.        retur
-00052660: 6e20 6177 6169 7420 6765 7461 7474 7228  n await getattr(
-00052670: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
-00052680: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00052690: 742c 2070 6172 616d 7329 290a 0a20 2020  t, params))..   
-000526a0: 2061 7379 6e63 2064 6566 2073 6574 5f6d   async def set_m
-000526b0: 6172 6769 6e5f 6d6f 6465 2873 656c 662c  argin_mode(self,
-000526c0: 206d 6172 6769 6e4d 6f64 653a 2073 7472   marginMode: str
-000526d0: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-000526e0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-000526f0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00052700: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00052710: 7365 7420 6d61 7267 696e 206d 6f64 6520  set margin mode 
-00052720: 746f 2027 6372 6f73 7327 206f 7220 2769  to 'cross' or 'i
-00052730: 736f 6c61 7465 6427 0a20 2020 2020 2020  solated'.       
-00052740: 203a 7061 7261 6d20 7374 7220 6d61 7267   :param str marg
-00052750: 696e 4d6f 6465 3a20 2763 726f 7373 2720  inMode: 'cross' 
-00052760: 6f72 2027 6973 6f6c 6174 6564 270a 2020  or 'isolated'.  
-00052770: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00052780: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
-00052790: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
-000527a0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-000527b0: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-000527c0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-000527d0: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
-000527e0: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
-000527f0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00052800: 7320 6469 6374 3a20 7265 7370 6f6e 7365  s dict: response
-00052810: 2066 726f 6d20 7468 6520 6578 6368 616e   from the exchan
-00052820: 6765 0a20 2020 2020 2020 2022 2222 0a20  ge.        """. 
-00052830: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00052840: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00052850: 2020 2020 2020 7261 6973 6520 4172 6775        raise Argu
-00052860: 6d65 6e74 7352 6571 7569 7265 6428 7365  mentsRequired(se
-00052870: 6c66 2e69 6420 2b20 2720 7365 744d 6172  lf.id + ' setMar
-00052880: 6769 6e4d 6f64 6528 2920 7265 7175 6972  ginMode() requir
-00052890: 6573 2061 2073 796d 626f 6c20 6172 6775  es a symbol argu
-000528a0: 6d65 6e74 2729 0a20 2020 2020 2020 2023  ment').        #
-000528b0: 0a20 2020 2020 2020 2023 207b 2263 6f64  .        # {"cod
-000528c0: 6522 3a20 2d34 3034 3820 2c20 226d 7367  e": -4048 , "msg
-000528d0: 223a 2022 4d61 7267 696e 2074 7970 6520  ": "Margin type 
-000528e0: 6361 6e6e 6f74 2062 6520 6368 616e 6765  cannot be change
-000528f0: 6420 6966 2074 6865 7265 2065 7869 7374  d if there exist
-00052900: 7320 706f 7369 7469 6f6e 2e22 7d0a 2020  s position."}.  
-00052910: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00052920: 2320 6f72 0a20 2020 2020 2020 2023 0a20  # or.        #. 
-00052930: 2020 2020 2020 2023 207b 2263 6f64 6522         # {"code"
-00052940: 3a20 3230 302c 2022 6d73 6722 3a20 2273  : 200, "msg": "s
-00052950: 7563 6365 7373 227d 0a20 2020 2020 2020  uccess"}.       
-00052960: 2023 0a20 2020 2020 2020 206d 6172 6769   #.        margi
-00052970: 6e4d 6f64 6520 3d20 6d61 7267 696e 4d6f  nMode = marginMo
-00052980: 6465 2e75 7070 6572 2829 0a20 2020 2020  de.upper().     
-00052990: 2020 2069 6620 6d61 7267 696e 4d6f 6465     if marginMode
-000529a0: 203d 3d20 2743 524f 5353 273a 0a20 2020   == 'CROSS':.   
-000529b0: 2020 2020 2020 2020 206d 6172 6769 6e4d           marginM
-000529c0: 6f64 6520 3d20 2743 524f 5353 4544 270a  ode = 'CROSSED'.
-000529d0: 2020 2020 2020 2020 6966 2028 6d61 7267          if (marg
-000529e0: 696e 4d6f 6465 2021 3d20 2749 534f 4c41  inMode != 'ISOLA
-000529f0: 5445 4427 2920 616e 6420 286d 6172 6769  TED') and (margi
-00052a00: 6e4d 6f64 6520 213d 2027 4352 4f53 5345  nMode != 'CROSSE
-00052a10: 4427 293a 0a20 2020 2020 2020 2020 2020  D'):.           
-00052a20: 2072 6169 7365 2042 6164 5265 7175 6573   raise BadReques
-00052a30: 7428 7365 6c66 2e69 6420 2b20 2720 6d61  t(self.id + ' ma
-00052a40: 7267 696e 4d6f 6465 206d 7573 7420 6265  rginMode must be
-00052a50: 2065 6974 6865 7220 6973 6f6c 6174 6564   either isolated
-00052a60: 206f 7220 6372 6f73 7327 290a 2020 2020   or cross').    
-00052a70: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
-00052a80: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00052a90: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00052aa0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00052ab0: 6c29 0a20 2020 2020 2020 206d 6574 686f  l).        metho
-00052ac0: 6420 3d20 4e6f 6e65 0a20 2020 2020 2020  d = None.       
-00052ad0: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
-00052ae0: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
-00052af0: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
-00052b00: 5072 6976 6174 6550 6f73 744d 6172 6769  PrivatePostMargi
-00052b10: 6e54 7970 6527 0a20 2020 2020 2020 2065  nType'.        e
-00052b20: 6c69 6620 6d61 726b 6574 5b27 696e 7665  lif market['inve
-00052b30: 7273 6527 5d3a 0a20 2020 2020 2020 2020  rse']:.         
-00052b40: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
-00052b50: 6950 7269 7661 7465 506f 7374 4d61 7267  iPrivatePostMarg
-00052b60: 696e 5479 7065 270a 2020 2020 2020 2020  inType'.        
-00052b70: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00052b80: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
-00052b90: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
-00052ba0: 2073 6574 4d61 7267 696e 4d6f 6465 2829   setMarginMode()
-00052bb0: 2073 7570 706f 7274 7320 6c69 6e65 6172   supports linear
-00052bc0: 2061 6e64 2069 6e76 6572 7365 2063 6f6e   and inverse con
-00052bd0: 7472 6163 7473 206f 6e6c 7927 290a 2020  tracts only').  
-00052be0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00052bf0: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-00052c00: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00052c10: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-00052c20: 2020 276d 6172 6769 6e54 7970 6527 3a20    'marginType': 
-00052c30: 6d61 7267 696e 4d6f 6465 2c0a 2020 2020  marginMode,.    
-00052c40: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-00052c50: 7370 6f6e 7365 203d 204e 6f6e 650a 2020  sponse = None.  
-00052c60: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00052c70: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00052c80: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
-00052c90: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
-00052ca0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00052cb0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00052cc0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00052cd0: 7469 6f6e 2061 7320 653a 0a20 2020 2020  tion as e:.     
-00052ce0: 2020 2020 2020 2023 206e 6f74 2061 6e20         # not an 
-00052cf0: 6572 726f 720a 2020 2020 2020 2020 2020  error.          
-00052d00: 2020 2320 6874 7470 733a 2f2f 6769 7468    # https://gith
-00052d10: 7562 2e63 6f6d 2f63 6378 742f 6363 7874  ub.com/ccxt/ccxt
-00052d20: 2f69 7373 7565 732f 3131 3236 380a 2020  /issues/11268.  
-00052d30: 2020 2020 2020 2020 2020 2320 6874 7470            # http
-00052d40: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f63  s://github.com/c
-00052d50: 6378 742f 6363 7874 2f70 756c 6c2f 3131  cxt/ccxt/pull/11
-00052d60: 3632 340a 2020 2020 2020 2020 2020 2020  624.            
-00052d70: 2320 504f 5354 2068 7474 7073 3a2f 2f66  # POST https://f
-00052d80: 6170 692e 6269 6e61 6e63 652e 636f 6d2f  api.binance.com/
-00052d90: 6661 7069 2f76 312f 6d61 7267 696e 5479  fapi/v1/marginTy
-00052da0: 7065 2034 3030 2042 6164 2052 6571 7565  pe 400 Bad Reque
-00052db0: 7374 0a20 2020 2020 2020 2020 2020 2023  st.            #
-00052dc0: 2062 696e 616e 6365 7573 646d 0a20 2020   binanceusdm.   
-00052dd0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00052de0: 7374 616e 6365 2865 2c20 4d61 7267 696e  stance(e, Margin
-00052df0: 4d6f 6465 416c 7265 6164 7953 6574 293a  ModeAlreadySet):
-00052e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00052e10: 2074 6872 6f77 4d61 7267 696e 4d6f 6465   throwMarginMode
-00052e20: 416c 7265 6164 7953 6574 203d 2073 656c  AlreadySet = sel
-00052e30: 662e 7361 6665 5f76 616c 7565 2873 656c  f.safe_value(sel
-00052e40: 662e 6f70 7469 6f6e 732c 2027 7468 726f  f.options, 'thro
-00052e50: 774d 6172 6769 6e4d 6f64 6541 6c72 6561  wMarginModeAlrea
-00052e60: 6479 5365 7427 2c20 4661 6c73 6529 0a20  dySet', False). 
-00052e70: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00052e80: 6620 7468 726f 774d 6172 6769 6e4d 6f64  f throwMarginMod
-00052e90: 6541 6c72 6561 6479 5365 743a 0a20 2020  eAlreadySet:.   
-00052ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052eb0: 2072 6169 7365 2065 0a20 2020 2020 2020   raise e.       
-00052ec0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00052ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052ee0: 2020 2072 6573 706f 6e73 6520 3d20 7b27     response = {'
-00052ef0: 636f 6465 273a 202d 3430 3436 2c20 276d  code': -4046, 'm
-00052f00: 7367 273a 2027 4e6f 206e 6565 6420 746f  sg': 'No need to
-00052f10: 2063 6861 6e67 6520 6d61 7267 696e 2074   change margin t
-00052f20: 7970 652e 277d 0a20 2020 2020 2020 2020  ype.'}.         
-00052f30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00052f40: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
-00052f50: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00052f60: 7265 7370 6f6e 7365 0a0a 2020 2020 6173  response..    as
-00052f70: 796e 6320 6465 6620 7365 745f 706f 7369  ync def set_posi
-00052f80: 7469 6f6e 5f6d 6f64 6528 7365 6c66 2c20  tion_mode(self, 
-00052f90: 6865 6467 6564 2c20 7379 6d62 6f6c 3a20  hedged, symbol: 
-00052fa0: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-00052fb0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-00052fc0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00052fd0: 2020 2020 2020 7365 7420 6865 6467 6564        set hedged
-00052fe0: 2074 6f20 5472 7565 206f 7220 4661 6c73   to True or Fals
-00052ff0: 6520 666f 7220 6120 6d61 726b 6574 0a20  e for a market. 
-00053000: 2020 2020 2020 203a 7061 7261 6d20 626f         :param bo
-00053010: 6f6c 2068 6564 6765 643a 2073 6574 2074  ol hedged: set t
-00053020: 6f20 5472 7565 2074 6f20 7573 6520 6475  o True to use du
-00053030: 616c 5369 6465 506f 7369 7469 6f6e 0a20  alSidePosition. 
-00053040: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00053050: 727c 4e6f 6e65 2073 796d 626f 6c3a 206e  r|None symbol: n
-00053060: 6f74 2075 7365 6420 6279 2062 696e 616e  ot used by binan
-00053070: 6365 2073 6574 506f 7369 7469 6f6e 4d6f  ce setPositionMo
-00053080: 6465 2829 0a20 2020 2020 2020 203a 7061  de().        :pa
-00053090: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-000530a0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-000530b0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-000530c0: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-000530d0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-000530e0: 7265 7475 726e 7320 6469 6374 3a20 7265  returns dict: re
-000530f0: 7370 6f6e 7365 2066 726f 6d20 7468 6520  sponse from the 
-00053100: 6578 6368 616e 6765 0a20 2020 2020 2020  exchange.       
-00053110: 2022 2222 0a20 2020 2020 2020 2064 6566   """.        def
-00053120: 6175 6c74 5479 7065 203d 2073 656c 662e  aultType = self.
-00053130: 7361 6665 5f73 7472 696e 6728 7365 6c66  safe_string(self
-00053140: 2e6f 7074 696f 6e73 2c20 2764 6566 6175  .options, 'defau
-00053150: 6c74 5479 7065 272c 2027 6675 7475 7265  ltType', 'future
-00053160: 2729 0a20 2020 2020 2020 2074 7970 6520  ').        type 
-00053170: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00053180: 6e67 2870 6172 616d 732c 2027 7479 7065  ng(params, 'type
-00053190: 272c 2064 6566 6175 6c74 5479 7065 290a  ', defaultType).
-000531a0: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
-000531b0: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
-000531c0: 732c 205b 2774 7970 6527 5d29 0a20 2020  s, ['type']).   
-000531d0: 2020 2020 2064 7561 6c53 6964 6550 6f73       dualSidePos
-000531e0: 6974 696f 6e20 3d20 4e6f 6e65 0a20 2020  ition = None.   
-000531f0: 2020 2020 2069 6620 6865 6467 6564 3a0a       if hedged:.
-00053200: 2020 2020 2020 2020 2020 2020 6475 616c              dual
-00053210: 5369 6465 506f 7369 7469 6f6e 203d 2027  SidePosition = '
-00053220: 7472 7565 270a 2020 2020 2020 2020 656c  true'.        el
-00053230: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00053240: 6475 616c 5369 6465 506f 7369 7469 6f6e  dualSidePosition
-00053250: 203d 2027 6661 6c73 6527 0a20 2020 2020   = 'false'.     
-00053260: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00053270: 2020 2020 2020 2020 2020 2027 6475 616c             'dual
-00053280: 5369 6465 506f 7369 7469 6f6e 273a 2064  SidePosition': d
-00053290: 7561 6c53 6964 6550 6f73 6974 696f 6e2c  ualSidePosition,
-000532a0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-000532b0: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
-000532c0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-000532d0: 2e69 735f 696e 7665 7273 6528 7479 7065  .is_inverse(type
-000532e0: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
-000532f0: 6574 686f 6420 3d20 2764 6170 6950 7269  ethod = 'dapiPri
-00053300: 7661 7465 506f 7374 506f 7369 7469 6f6e  vatePostPosition
-00053310: 5369 6465 4475 616c 270a 2020 2020 2020  SideDual'.      
-00053320: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00053330: 2020 2020 2320 6465 6661 756c 7420 746f      # default to
-00053340: 2066 7574 7572 650a 2020 2020 2020 2020   future.        
-00053350: 2020 2020 6d65 7468 6f64 203d 2027 6661      method = 'fa
-00053360: 7069 5072 6976 6174 6550 6f73 7450 6f73  piPrivatePostPos
-00053370: 6974 696f 6e53 6964 6544 7561 6c27 0a20  itionSideDual'. 
-00053380: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00053390: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-000533a0: 2023 2020 2020 2020 2022 636f 6465 223a   #       "code":
-000533b0: 2032 3030 2c0a 2020 2020 2020 2020 2320   200,.        # 
-000533c0: 2020 2020 2020 226d 7367 223a 2022 7375        "msg": "su
-000533d0: 6363 6573 7322 0a20 2020 2020 2020 2023  ccess".        #
-000533e0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-000533f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00053400: 6177 6169 7420 6765 7461 7474 7228 7365  await getattr(se
-00053410: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
-00053420: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-00053430: 2070 6172 616d 7329 290a 0a20 2020 2061   params))..    a
-00053440: 7379 6e63 2064 6566 2066 6574 6368 5f73  sync def fetch_s
-00053450: 6574 746c 656d 656e 745f 6869 7374 6f72  ettlement_histor
-00053460: 7928 7365 6c66 2c20 7379 6d62 6f6c 3a20  y(self, symbol: 
-00053470: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-00053480: 4e6f 6e65 2c20 7369 6e63 653a 204f 7074  None, since: Opt
-00053490: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-000534a0: 652c 206c 696d 6974 3a20 4f70 7469 6f6e  e, limit: Option
-000534b0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-000534c0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-000534d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000534e0: 6665 7463 6865 7320 6869 7374 6f72 6963  fetches historic
-000534f0: 616c 2073 6574 746c 656d 656e 7420 7265  al settlement re
-00053500: 636f 7264 730a 2020 2020 2020 2020 7365  cords.        se
-00053510: 6520 6874 7470 733a 2f2f 6269 6e61 6e63  e https://binanc
-00053520: 652d 646f 6373 2e67 6974 6875 622e 696f  e-docs.github.io
-00053530: 2f61 7069 646f 6373 2f76 6f70 7469 6f6e  /apidocs/voption
-00053540: 732f 656e 2f23 6869 7374 6f72 6963 616c  s/en/#historical
-00053550: 2d65 7865 7263 6973 652d 7265 636f 7264  -exercise-record
-00053560: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-00053570: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
-00053580: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
-00053590: 6f6c 206f 6620 7468 6520 7365 7474 6c65  ol of the settle
-000535a0: 6d65 6e74 2068 6973 746f 7279 0a20 2020  ment history.   
-000535b0: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
-000535c0: 7369 6e63 653a 2074 696d 6573 7461 6d70  since: timestamp
-000535d0: 2069 6e20 6d73 0a20 2020 2020 2020 203a   in ms.        :
-000535e0: 7061 7261 6d20 696e 7420 6c69 6d69 743a  param int limit:
-000535f0: 206e 756d 6265 7220 6f66 2072 6563 6f72   number of recor
-00053600: 6473 2c20 6465 6661 756c 7420 3130 302c  ds, default 100,
-00053610: 206d 6178 2031 3030 0a20 2020 2020 2020   max 100.       
-00053620: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00053630: 616d 733a 2065 7863 6861 6e67 6520 7370  ams: exchange sp
-00053640: 6563 6966 6963 2070 6172 616d 730a 2020  ecific params.  
-00053650: 2020 2020 2020 3a72 6574 7572 6e73 205b        :returns [
-00053660: 6469 6374 5d3a 2061 206c 6973 7420 6f66  dict]: a list of
-00053670: 205b 7365 7474 6c65 6d65 6e74 2068 6973   [settlement his
-00053680: 746f 7279 206f 626a 6563 7473 5d0a 2020  tory objects].  
-00053690: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000536a0: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
-000536b0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-000536c0: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
-000536d0: 6520 6966 2028 7379 6d62 6f6c 2069 7320  e if (symbol is 
-000536e0: 4e6f 6e65 2920 656c 7365 2073 656c 662e  None) else self.
-000536f0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-00053700: 2020 2020 2020 2074 7970 6520 3d20 4e6f         type = No
-00053710: 6e65 0a20 2020 2020 2020 2074 7970 652c  ne.        type,
-00053720: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-00053730: 616e 646c 655f 6d61 726b 6574 5f74 7970  andle_market_typ
-00053740: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
-00053750: 7463 6853 6574 746c 656d 656e 7448 6973  tchSettlementHis
-00053760: 746f 7279 272c 206d 6172 6b65 742c 2070  tory', market, p
-00053770: 6172 616d 7329 0a20 2020 2020 2020 2069  arams).        i
-00053780: 6620 7479 7065 2021 3d20 276f 7074 696f  f type != 'optio
-00053790: 6e27 3a0a 2020 2020 2020 2020 2020 2020  n':.            
-000537a0: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-000537b0: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
-000537c0: 6574 6368 5365 7474 6c65 6d65 6e74 4869  etchSettlementHi
-000537d0: 7374 6f72 7928 2920 7375 7070 6f72 7473  story() supports
-000537e0: 206f 7074 696f 6e20 6d61 726b 6574 7320   option markets 
-000537f0: 6f6e 6c79 2729 0a20 2020 2020 2020 2072  only').        r
-00053800: 6571 7565 7374 203d 207b 7d0a 2020 2020  equest = {}.    
-00053810: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
-00053820: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00053830: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
-00053840: 6d61 726b 6574 5b27 7379 6d62 6f6c 275d  market['symbol']
-00053850: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00053860: 7565 7374 5b27 756e 6465 726c 7969 6e67  uest['underlying
-00053870: 275d 203d 206d 6172 6b65 745b 2762 6173  '] = market['bas
-00053880: 6549 6427 5d20 2b20 6d61 726b 6574 5b27  eId'] + market['
-00053890: 7175 6f74 6549 6427 5d0a 2020 2020 2020  quoteId'].      
-000538a0: 2020 6966 2073 696e 6365 2069 7320 6e6f    if since is no
-000538b0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000538c0: 2020 2020 7265 7175 6573 745b 2773 7461      request['sta
-000538d0: 7274 5469 6d65 275d 203d 2073 696e 6365  rtTime'] = since
-000538e0: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
-000538f0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-00053900: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00053910: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
-00053920: 6d69 740a 2020 2020 2020 2020 7265 7370  mit.        resp
-00053930: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
-00053940: 662e 6561 7069 5075 626c 6963 4765 7445  f.eapiPublicGetE
-00053950: 7865 7263 6973 6548 6973 746f 7279 2873  xerciseHistory(s
-00053960: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-00053970: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-00053980: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00053990: 2020 2020 205b 0a20 2020 2020 2020 2023       [.        #
-000539a0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-000539b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000539c0: 2022 7379 6d62 6f6c 223a 2022 4554 482d   "symbol": "ETH-
-000539d0: 3233 3032 3233 2d31 3930 302d 5022 2c0a  230223-1900-P",.
-000539e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000539f0: 2020 2020 2020 2273 7472 696b 6550 7269        "strikePri
-00053a00: 6365 223a 2022 3139 3030 222c 0a20 2020  ce": "1900",.   
-00053a10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00053a20: 2020 2022 7265 616c 5374 7269 6b65 5072     "realStrikePr
-00053a30: 6963 6522 3a20 2231 3636 352e 3538 3937  ice": "1665.5897
-00053a40: 3333 3422 2c0a 2020 2020 2020 2020 2320  334",.        # 
-00053a50: 2020 2020 2020 2020 2020 2020 2265 7870              "exp
-00053a60: 6972 7944 6174 6522 3a20 3136 3737 3133  iryDate": 167713
-00053a70: 3932 3030 3030 302c 0a20 2020 2020 2020  9200000,.       
-00053a80: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00053a90: 7374 7269 6b65 5265 7375 6c74 223a 2022  strikeResult": "
-00053aa0: 5245 414c 4953 5449 435f 5641 4c55 455f  REALISTIC_VALUE_
-00053ab0: 5354 5249 434b 454e 220a 2020 2020 2020  STRICKEN".      
-00053ac0: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
-00053ad0: 2020 2020 2020 2320 2020 2020 5d0a 2020        #     ].  
-00053ae0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00053af0: 7365 7474 6c65 6d65 6e74 7320 3d20 7365  settlements = se
-00053b00: 6c66 2e70 6172 7365 5f73 6574 746c 656d  lf.parse_settlem
-00053b10: 656e 7473 2872 6573 706f 6e73 652c 206d  ents(response, m
-00053b20: 6172 6b65 7429 0a20 2020 2020 2020 2073  arket).        s
-00053b30: 6f72 7465 6420 3d20 7365 6c66 2e73 6f72  orted = self.sor
-00053b40: 745f 6279 2873 6574 746c 656d 656e 7473  t_by(settlements
-00053b50: 2c20 2774 696d 6573 7461 6d70 2729 0a20  , 'timestamp'). 
-00053b60: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00053b70: 6c66 2e66 696c 7465 725f 6279 5f73 796d  lf.filter_by_sym
-00053b80: 626f 6c5f 7369 6e63 655f 6c69 6d69 7428  bol_since_limit(
-00053b90: 736f 7274 6564 2c20 7379 6d62 6f6c 2c20  sorted, symbol, 
-00053ba0: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
-00053bb0: 2020 2064 6566 2070 6172 7365 5f73 6574     def parse_set
-00053bc0: 746c 656d 656e 7428 7365 6c66 2c20 7365  tlement(self, se
-00053bd0: 7474 6c65 6d65 6e74 2c20 6d61 726b 6574  ttlement, market
-00053be0: 293a 0a20 2020 2020 2020 2023 0a20 2020  ):.        #.   
-00053bf0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00053c00: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00053c10: 7379 6d62 6f6c 223a 2022 4554 482d 3233  symbol": "ETH-23
-00053c20: 3032 3233 2d31 3930 302d 5022 2c0a 2020  0223-1900-P",.  
-00053c30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00053c40: 2273 7472 696b 6550 7269 6365 223a 2022  "strikePrice": "
-00053c50: 3139 3030 222c 0a20 2020 2020 2020 2023  1900",.        #
-00053c60: 2020 2020 2020 2020 2022 7265 616c 5374           "realSt
-00053c70: 7269 6b65 5072 6963 6522 3a20 2231 3636  rikePrice": "166
-00053c80: 352e 3538 3937 3333 3422 2c0a 2020 2020  5.5897334",.    
-00053c90: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-00053ca0: 7870 6972 7944 6174 6522 3a20 3136 3737  xpiryDate": 1677
-00053cb0: 3133 3932 3030 3030 302c 0a20 2020 2020  139200000,.     
-00053cc0: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
-00053cd0: 7269 6b65 5265 7375 6c74 223a 2022 5245  rikeResult": "RE
-00053ce0: 414c 4953 5449 435f 5641 4c55 455f 5354  ALISTIC_VALUE_ST
-00053cf0: 5249 434b 454e 220a 2020 2020 2020 2020  RICKEN".        
-00053d00: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-00053d10: 230a 2020 2020 2020 2020 7469 6d65 7374  #.        timest
-00053d20: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-00053d30: 696e 7465 6765 7228 7365 7474 6c65 6d65  integer(settleme
-00053d40: 6e74 2c20 2765 7870 6972 7944 6174 6527  nt, 'expiryDate'
-00053d50: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-00053d60: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
-00053d70: 7472 696e 6728 7365 7474 6c65 6d65 6e74  tring(settlement
-00053d80: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
-00053d90: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
-00053da0: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-00053db0: 2073 6574 746c 656d 656e 742c 0a20 2020   settlement,.   
-00053dc0: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-00053dd0: 273a 2073 656c 662e 7361 6665 5f73 796d  ': self.safe_sym
-00053de0: 626f 6c28 6d61 726b 6574 4964 2c20 6d61  bol(marketId, ma
-00053df0: 726b 6574 292c 0a20 2020 2020 2020 2020  rket),.         
-00053e00: 2020 2027 7072 6963 6527 3a20 7365 6c66     'price': self
-00053e10: 2e73 6166 655f 6e75 6d62 6572 2873 6574  .safe_number(set
-00053e20: 746c 656d 656e 742c 2027 7265 616c 5374  tlement, 'realSt
-00053e30: 7269 6b65 5072 6963 6527 292c 0a20 2020  rikePrice'),.   
-00053e40: 2020 2020 2020 2020 2027 7469 6d65 7374           'timest
-00053e50: 616d 7027 3a20 7469 6d65 7374 616d 702c  amp': timestamp,
-00053e60: 0a20 2020 2020 2020 2020 2020 2027 6461  .            'da
-00053e70: 7465 7469 6d65 273a 2073 656c 662e 6973  tetime': self.is
-00053e80: 6f38 3630 3128 7469 6d65 7374 616d 7029  o8601(timestamp)
-00053e90: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
-00053ea0: 2064 6566 2070 6172 7365 5f73 6574 746c   def parse_settl
-00053eb0: 656d 656e 7473 2873 656c 662c 2073 6574  ements(self, set
-00053ec0: 746c 656d 656e 7473 2c20 6d61 726b 6574  tlements, market
-00053ed0: 293a 0a20 2020 2020 2020 2023 0a20 2020  ):.        #.   
-00053ee0: 2020 2020 2023 2020 2020 205b 0a20 2020       #     [.   
-00053ef0: 2020 2020 2023 2020 2020 2020 2020 207b       #         {
-00053f00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053f10: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-00053f20: 2022 4554 482d 3233 3032 3233 2d31 3930   "ETH-230223-190
-00053f30: 302d 5022 2c0a 2020 2020 2020 2020 2320  0-P",.        # 
-00053f40: 2020 2020 2020 2020 2020 2020 2273 7472              "str
-00053f50: 696b 6550 7269 6365 223a 2022 3139 3030  ikePrice": "1900
-00053f60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00053f70: 2020 2020 2020 2020 2022 7265 616c 5374           "realSt
-00053f80: 7269 6b65 5072 6963 6522 3a20 2231 3636  rikePrice": "166
-00053f90: 352e 3538 3937 3333 3422 2c0a 2020 2020  5.5897334",.    
-00053fa0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00053fb0: 2020 2265 7870 6972 7944 6174 6522 3a20    "expiryDate": 
-00053fc0: 3136 3737 3133 3932 3030 3030 302c 0a20  1677139200000,. 
-00053fd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00053fe0: 2020 2020 2022 7374 7269 6b65 5265 7375       "strikeResu
-00053ff0: 6c74 223a 2022 4558 5452 494e 5349 435f  lt": "EXTRINSIC_
-00054000: 5641 4c55 455f 4558 5049 5245 4422 0a20  VALUE_EXPIRED". 
-00054010: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054020: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-00054030: 205d 0a20 2020 2020 2020 2023 0a20 2020   ].        #.   
-00054040: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
-00054050: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
-00054060: 6e20 7261 6e67 6528 302c 206c 656e 2873  n range(0, len(s
-00054070: 6574 746c 656d 656e 7473 2929 3a0a 2020  ettlements)):.  
-00054080: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00054090: 2e61 7070 656e 6428 7365 6c66 2e70 6172  .append(self.par
-000540a0: 7365 5f73 6574 746c 656d 656e 7428 7365  se_settlement(se
-000540b0: 7474 6c65 6d65 6e74 735b 695d 2c20 6d61  ttlements[i], ma
-000540c0: 726b 6574 2929 0a20 2020 2020 2020 2072  rket)).        r
-000540d0: 6574 7572 6e20 7265 7375 6c74 0a0a 2020  eturn result..  
-000540e0: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-000540f0: 685f 6c65 6467 6572 2873 656c 662c 2063  h_ledger(self, c
-00054100: 6f64 653a 204f 7074 696f 6e61 6c5b 7374  ode: Optional[st
-00054110: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
-00054120: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00054130: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
-00054140: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00054150: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00054160: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00054170: 2020 2020 2066 6574 6368 2074 6865 2068       fetch the h
-00054180: 6973 746f 7279 206f 6620 6368 616e 6765  istory of change
-00054190: 732c 2061 6374 696f 6e73 2064 6f6e 6520  s, actions done 
-000541a0: 6279 2074 6865 2075 7365 7220 6f72 206f  by the user or o
-000541b0: 7065 7261 7469 6f6e 7320 7468 6174 2061  perations that a
-000541c0: 6c74 6572 6564 2074 6865 2062 616c 616e  ltered the balan
-000541d0: 6365 206f 6620 7468 6520 7573 6572 0a20  ce of the user. 
-000541e0: 2020 2020 2020 2073 6565 2068 7474 7073         see https
-000541f0: 3a2f 2f62 696e 616e 6365 2d64 6f63 732e  ://binance-docs.
-00054200: 6769 7468 7562 2e69 6f2f 6170 6964 6f63  github.io/apidoc
-00054210: 732f 766f 7074 696f 6e73 2f65 6e2f 2361  s/voptions/en/#a
-00054220: 6363 6f75 6e74 2d66 756e 6469 6e67 2d66  ccount-funding-f
-00054230: 6c6f 772d 7573 6572 5f64 6174 610a 2020  low-user_data.  
-00054240: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
-00054250: 2f2f 6269 6e61 6e63 652d 646f 6373 2e67  //binance-docs.g
-00054260: 6974 6875 622e 696f 2f61 7069 646f 6373  ithub.io/apidocs
-00054270: 2f66 7574 7572 6573 2f65 6e2f 2367 6574  /futures/en/#get
-00054280: 2d69 6e63 6f6d 652d 6869 7374 6f72 792d  -income-history-
-00054290: 7573 6572 5f64 6174 610a 2020 2020 2020  user_data.      
-000542a0: 2020 7365 6520 6874 7470 733a 2f2f 6269    see https://bi
-000542b0: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
-000542c0: 622e 696f 2f61 7069 646f 6373 2f64 656c  b.io/apidocs/del
-000542d0: 6976 6572 792f 656e 2f23 6765 742d 696e  ivery/en/#get-in
-000542e0: 636f 6d65 2d68 6973 746f 7279 2d75 7365  come-history-use
-000542f0: 725f 6461 7461 0a20 2020 2020 2020 203a  r_data.        :
-00054300: 7061 7261 6d20 7374 727c 4e6f 6e65 2063  param str|None c
-00054310: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-00054320: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-00054330: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00054340: 6e65 2073 696e 6365 3a20 7469 6d65 7374  ne since: timest
-00054350: 616d 7020 696e 206d 7320 6f66 2074 6865  amp in ms of the
-00054360: 2065 6172 6c69 6573 7420 6c65 6467 6572   earliest ledger
-00054370: 2065 6e74 7279 0a20 2020 2020 2020 203a   entry.        :
-00054380: 7061 7261 6d20 696e 747c 4e6f 6e65 206c  param int|None l
-00054390: 696d 6974 3a20 6d61 7820 6e75 6d62 6572  imit: max number
-000543a0: 206f 6620 6c65 6467 6572 2065 6e74 7279   of ledger entry
-000543b0: 7320 746f 2072 6574 7572 6e0a 2020 2020  s to return.    
-000543c0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-000543d0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
-000543e0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-000543f0: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
-00054400: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-00054410: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00054420: 6963 743a 2061 2060 6c65 6467 6572 2073  ict: a `ledger s
-00054430: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-00054440: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00054450: 232f 3f69 643d 6c65 6467 6572 2d73 7472  #/?id=ledger-str
-00054460: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00054470: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
-00054480: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
-00054490: 6b65 7473 2829 0a20 2020 2020 2020 2074  kets().        t
-000544a0: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
-000544b0: 2020 2073 7562 5479 7065 203d 204e 6f6e     subType = Non
-000544c0: 650a 2020 2020 2020 2020 6375 7272 656e  e.        curren
-000544d0: 6379 203d 204e 6f6e 650a 2020 2020 2020  cy = None.      
-000544e0: 2020 6d65 7468 6f64 203d 204e 6f6e 650a    method = None.
-000544f0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00054500: 3d20 7b7d 0a20 2020 2020 2020 2074 7970  = {}.        typ
-00054510: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
-00054520: 2e68 616e 646c 655f 6d61 726b 6574 5f74  .handle_market_t
-00054530: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
-00054540: 6665 7463 684c 6564 6765 7227 2c20 4e6f  fetchLedger', No
-00054550: 6e65 2c20 7061 7261 6d73 290a 2020 2020  ne, params).    
-00054560: 2020 2020 7375 6254 7970 652c 2070 6172      subType, par
-00054570: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-00054580: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
-00054590: 6172 616d 7328 2766 6574 6368 4c65 6467  arams('fetchLedg
-000545a0: 6572 272c 204e 6f6e 652c 2070 6172 616d  er', None, param
-000545b0: 7329 0a20 2020 2020 2020 2069 6620 7479  s).        if ty
-000545c0: 7065 203d 3d20 276f 7074 696f 6e27 3a0a  pe == 'option':.
-000545d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000545e0: 2e63 6865 636b 5f72 6571 7569 7265 645f  .check_required_
-000545f0: 6172 6775 6d65 6e74 2827 6665 7463 684c  argument('fetchL
-00054600: 6564 6765 7227 2c20 636f 6465 2c20 2763  edger', code, 'c
-00054610: 6f64 6527 290a 2020 2020 2020 2020 2020  ode').          
-00054620: 2020 6375 7272 656e 6379 203d 2073 656c    currency = sel
-00054630: 662e 6375 7272 656e 6379 2863 6f64 6529  f.currency(code)
-00054640: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00054650: 7565 7374 5b27 6375 7272 656e 6379 275d  uest['currency']
-00054660: 203d 2063 7572 7265 6e63 795b 2769 6427   = currency['id'
-00054670: 5d0a 2020 2020 2020 2020 2020 2020 6d65  ].            me
-00054680: 7468 6f64 203d 2027 6561 7069 5072 6976  thod = 'eapiPriv
-00054690: 6174 6547 6574 4269 6c6c 270a 2020 2020  ateGetBill'.    
-000546a0: 2020 2020 656c 6966 2073 656c 662e 6973      elif self.is
-000546b0: 5f6c 696e 6561 7228 7479 7065 2c20 7375  _linear(type, su
-000546c0: 6254 7970 6529 3a0a 2020 2020 2020 2020  bType):.        
-000546d0: 2020 2020 6d65 7468 6f64 203d 2027 6661      method = 'fa
-000546e0: 7069 5072 6976 6174 6547 6574 496e 636f  piPrivateGetInco
-000546f0: 6d65 270a 2020 2020 2020 2020 656c 6966  me'.        elif
-00054700: 2073 656c 662e 6973 5f69 6e76 6572 7365   self.is_inverse
-00054710: 2874 7970 652c 2073 7562 5479 7065 293a  (type, subType):
-00054720: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00054730: 686f 6420 3d20 2764 6170 6950 7269 7661  hod = 'dapiPriva
-00054740: 7465 4765 7449 6e63 6f6d 6527 0a20 2020  teGetIncome'.   
-00054750: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00054760: 2020 2020 2020 2072 6169 7365 204e 6f74         raise Not
-00054770: 5375 7070 6f72 7465 6428 7365 6c66 2e69  Supported(self.i
-00054780: 6420 2b20 2720 6665 7463 684c 6564 6765  d + ' fetchLedge
-00054790: 7228 2920 7375 7070 6f72 7473 2063 6f6e  r() supports con
-000547a0: 7472 6163 7420 7761 6c6c 6574 7320 6f6e  tract wallets on
-000547b0: 6c79 2729 0a20 2020 2020 2020 2069 6620  ly').        if 
-000547c0: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
-000547d0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-000547e0: 6571 7565 7374 5b27 7374 6172 7454 696d  equest['startTim
-000547f0: 6527 5d20 3d20 7369 6e63 650a 2020 2020  e'] = since.    
-00054800: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
-00054810: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00054820: 2020 2020 2020 7265 7175 6573 745b 276c        request['l
-00054830: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
-00054840: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00054850: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
-00054860: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
-00054870: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00054880: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00054890: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-000548a0: 6f70 7469 6f6e 7328 6561 7069 290a 2020  options(eapi).  
-000548b0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000548c0: 2320 2020 2020 5b0a 2020 2020 2020 2020  #     [.        
-000548d0: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
-000548e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000548f0: 2020 2269 6422 3a20 2231 3132 3538 3939    "id": "1125899
-00054900: 3930 3638 3435 3730 3138 3730 222c 0a20  906845701870",. 
-00054910: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054920: 2020 2020 2022 6173 7365 7422 3a20 2255       "asset": "U
-00054930: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-00054940: 2020 2020 2020 2020 2020 2020 2261 6d6f              "amo
-00054950: 756e 7422 3a20 222d 302e 3136 3531 3832  unt": "-0.165182
-00054960: 3033 222c 0a20 2020 2020 2020 2023 2020  03",.        #  
-00054970: 2020 2020 2020 2020 2020 2022 7479 7065             "type
-00054980: 223a 2022 4645 4522 2c0a 2020 2020 2020  ": "FEE",.      
-00054990: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000549a0: 2263 7265 6174 6544 6174 6522 3a20 3136  "createDate": 16
-000549b0: 3736 3632 3130 3432 3438 390a 2020 2020  76621042489.    
-000549c0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-000549d0: 2020 2020 2020 2020 2320 2020 2020 5d0a          #     ].
-000549e0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000549f0: 2020 2320 6675 7475 7265 7328 6661 7069    # futures(fapi
-00054a00: 2c20 6461 7069 290a 2020 2020 2020 2020  , dapi).        
-00054a10: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00054a20: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-00054a30: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00054a40: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
-00054a50: 626f 6c22 3a20 2222 2c0a 2020 2020 2020  bol": "",.      
-00054a60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00054a70: 2269 6e63 6f6d 6554 7970 6522 3a20 2254  "incomeType": "T
-00054a80: 5241 4e53 4645 5222 2c0a 2020 2020 2020  RANSFER",.      
-00054a90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00054aa0: 2269 6e63 6f6d 6522 3a20 2231 302e 3030  "income": "10.00
-00054ab0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-00054ac0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00054ad0: 6173 7365 7422 3a20 2255 5344 5422 2c0a  asset": "USDT",.
-00054ae0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00054af0: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-00054b00: 3737 3634 3532 3530 3030 302c 0a20 2020  77645250000,.   
-00054b10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00054b20: 2020 2022 696e 666f 223a 2022 5452 414e     "info": "TRAN
-00054b30: 5346 4552 222c 0a20 2020 2020 2020 2023  SFER",.        #
-00054b40: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
-00054b50: 616e 4964 223a 2031 3331 3030 3135 3733  anId": 131001573
-00054b60: 3038 322c 0a20 2020 2020 2020 2023 2020  082,.        #  
-00054b70: 2020 2020 2020 2020 2020 2022 7472 6164             "trad
-00054b80: 6549 6422 3a20 2222 0a20 2020 2020 2020  eId": "".       
-00054b90: 2023 2020 2020 2020 2020 207d 0a20 2020   #         }.   
-00054ba0: 2020 2020 2023 2020 2020 205d 0a20 2020       #     ].   
-00054bb0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00054bc0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-00054bd0: 5f6c 6564 6765 7228 7265 7370 6f6e 7365  _ledger(response
-00054be0: 2c20 6375 7272 656e 6379 2c20 7369 6e63  , currency, sinc
-00054bf0: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
-00054c00: 6566 2070 6172 7365 5f6c 6564 6765 725f  ef parse_ledger_
-00054c10: 656e 7472 7928 7365 6c66 2c20 6974 656d  entry(self, item
-00054c20: 2c20 6375 7272 656e 6379 3d4e 6f6e 6529  , currency=None)
-00054c30: 3a0a 2020 2020 2020 2020 230a 2020 2020  :.        #.    
-00054c40: 2020 2020 2320 6f70 7469 6f6e 7328 6561      # options(ea
-00054c50: 7069 290a 2020 2020 2020 2020 230a 2020  pi).        #.  
-00054c60: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00054c70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00054c80: 2269 6422 3a20 2231 3132 3538 3939 3930  "id": "112589990
-00054c90: 3638 3435 3730 3138 3730 222c 0a20 2020  6845701870",.   
-00054ca0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00054cb0: 6173 7365 7422 3a20 2255 5344 5422 2c0a  asset": "USDT",.
-00054cc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00054cd0: 2020 2261 6d6f 756e 7422 3a20 222d 302e    "amount": "-0.
-00054ce0: 3136 3531 3832 3033 222c 0a20 2020 2020  16518203",.     
-00054cf0: 2020 2023 2020 2020 2020 2020 2022 7479     #         "ty
-00054d00: 7065 223a 2022 4645 4522 2c0a 2020 2020  pe": "FEE",.    
-00054d10: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-00054d20: 7265 6174 6544 6174 6522 3a20 3136 3736  reateDate": 1676
-00054d30: 3632 3130 3432 3438 390a 2020 2020 2020  621042489.      
-00054d40: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00054d50: 2020 230a 2020 2020 2020 2020 2320 6675    #.        # fu
-00054d60: 7475 7265 7328 6661 7069 2c20 6461 7069  tures(fapi, dapi
-00054d70: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00054d80: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00054d90: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-00054da0: 796d 626f 6c22 3a20 2222 2c0a 2020 2020  ymbol": "",.    
-00054db0: 2020 2020 2320 2020 2020 2020 2020 2269      #         "i
-00054dc0: 6e63 6f6d 6554 7970 6522 3a20 2254 5241  ncomeType": "TRA
-00054dd0: 4e53 4645 5222 2c0a 2020 2020 2020 2020  NSFER",.        
-00054de0: 2320 2020 2020 2020 2020 2269 6e63 6f6d  #         "incom
-00054df0: 6522 3a20 2231 302e 3030 3030 3030 3030  e": "10.00000000
-00054e00: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00054e10: 2020 2020 2022 6173 7365 7422 3a20 2255       "asset": "U
-00054e20: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-00054e30: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00054e40: 3136 3737 3634 3532 3530 3030 302c 0a20  1677645250000,. 
-00054e50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054e60: 2022 696e 666f 223a 2022 5452 414e 5346   "info": "TRANSF
-00054e70: 4552 222c 0a20 2020 2020 2020 2023 2020  ER",.        #  
-00054e80: 2020 2020 2020 2022 7472 616e 4964 223a         "tranId":
-00054e90: 2031 3331 3030 3135 3733 3038 322c 0a20   131001573082,. 
-00054ea0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054eb0: 2022 7472 6164 6549 6422 3a20 2222 0a20   "tradeId": "". 
-00054ec0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00054ed0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00054ee0: 2061 6d6f 756e 7420 3d20 7365 6c66 2e73   amount = self.s
-00054ef0: 6166 655f 7374 7269 6e67 5f32 2869 7465  afe_string_2(ite
-00054f00: 6d2c 2027 616d 6f75 6e74 272c 2027 696e  m, 'amount', 'in
-00054f10: 636f 6d65 2729 0a20 2020 2020 2020 2064  come').        d
-00054f20: 6972 6563 7469 6f6e 203d 204e 6f6e 650a  irection = None.
-00054f30: 2020 2020 2020 2020 6966 2050 7265 6369          if Preci
-00054f40: 7365 2e73 7472 696e 675f 6c65 2861 6d6f  se.string_le(amo
-00054f50: 756e 742c 2027 3027 293a 0a20 2020 2020  unt, '0'):.     
-00054f60: 2020 2020 2020 2064 6972 6563 7469 6f6e         direction
-00054f70: 203d 2027 6f75 7427 0a20 2020 2020 2020   = 'out'.       
-00054f80: 2020 2020 2061 6d6f 756e 7420 3d20 5072       amount = Pr
-00054f90: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
-00054fa0: 2827 2d31 272c 2061 6d6f 756e 7429 0a20  ('-1', amount). 
-00054fb0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00054fc0: 2020 2020 2020 2020 2064 6972 6563 7469           directi
-00054fd0: 6f6e 203d 2027 696e 270a 2020 2020 2020  on = 'in'.      
-00054fe0: 2020 6375 7272 656e 6379 4964 203d 2073    currencyId = s
-00054ff0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00055000: 6974 656d 2c20 2761 7373 6574 2729 0a20  item, 'asset'). 
-00055010: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-00055020: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
-00055030: 6567 6572 5f32 2869 7465 6d2c 2027 6372  eger_2(item, 'cr
-00055040: 6561 7465 4461 7465 272c 2027 7469 6d65  eateDate', 'time
-00055050: 2729 0a20 2020 2020 2020 2074 7970 6520  ').        type 
-00055060: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00055070: 6e67 5f32 2869 7465 6d2c 2027 7479 7065  ng_2(item, 'type
-00055080: 272c 2027 696e 636f 6d65 5479 7065 2729  ', 'incomeType')
-00055090: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000550a0: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
-000550b0: 6427 3a20 7365 6c66 2e73 6166 655f 7374  d': self.safe_st
-000550c0: 7269 6e67 5f32 2869 7465 6d2c 2027 6964  ring_2(item, 'id
-000550d0: 272c 2027 7472 616e 4964 2729 2c0a 2020  ', 'tranId'),.  
-000550e0: 2020 2020 2020 2020 2020 2764 6972 6563            'direc
-000550f0: 7469 6f6e 273a 2064 6972 6563 7469 6f6e  tion': direction
-00055100: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-00055110: 6363 6f75 6e74 273a 204e 6f6e 652c 0a20  ccount': None,. 
-00055120: 2020 2020 2020 2020 2020 2027 7265 6665             'refe
-00055130: 7265 6e63 6541 6363 6f75 6e74 273a 204e  renceAccount': N
-00055140: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00055150: 2027 7265 6665 7265 6e63 6549 6427 3a20   'referenceId': 
-00055160: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00055170: 2869 7465 6d2c 2027 7472 6164 6549 6427  (item, 'tradeId'
-00055180: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00055190: 7479 7065 273a 2073 656c 662e 7061 7273  type': self.pars
-000551a0: 655f 6c65 6467 6572 5f65 6e74 7279 5f74  e_ledger_entry_t
-000551b0: 7970 6528 7479 7065 292c 0a20 2020 2020  ype(type),.     
-000551c0: 2020 2020 2020 2027 6375 7272 656e 6379         'currency
-000551d0: 273a 2073 656c 662e 7361 6665 5f63 7572  ': self.safe_cur
-000551e0: 7265 6e63 795f 636f 6465 2863 7572 7265  rency_code(curre
-000551f0: 6e63 7949 642c 2063 7572 7265 6e63 7929  ncyId, currency)
-00055200: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-00055210: 6d6f 756e 7427 3a20 7365 6c66 2e70 6172  mount': self.par
-00055220: 7365 5f6e 756d 6265 7228 616d 6f75 6e74  se_number(amount
-00055230: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00055240: 7469 6d65 7374 616d 7027 3a20 7469 6d65  timestamp': time
-00055250: 7374 616d 702c 0a20 2020 2020 2020 2020  stamp,.         
-00055260: 2020 2027 6461 7465 7469 6d65 273a 2073     'datetime': s
-00055270: 656c 662e 6973 6f38 3630 3128 7469 6d65  elf.iso8601(time
-00055280: 7374 616d 7029 2c0a 2020 2020 2020 2020  stamp),.        
-00055290: 2020 2020 2762 6566 6f72 6527 3a20 4e6f      'before': No
-000552a0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-000552b0: 2761 6674 6572 273a 204e 6f6e 652c 0a20  'after': None,. 
-000552c0: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
-000552d0: 7573 273a 204e 6f6e 652c 0a20 2020 2020  us': None,.     
-000552e0: 2020 2020 2020 2027 6665 6527 3a20 4e6f         'fee': No
-000552f0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00055300: 2769 6e66 6f27 3a20 6974 656d 2c0a 2020  'info': item,.  
-00055310: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
-00055320: 2070 6172 7365 5f6c 6564 6765 725f 656e   parse_ledger_en
-00055330: 7472 795f 7479 7065 2873 656c 662c 2074  try_type(self, t
-00055340: 7970 6529 3a0a 2020 2020 2020 2020 6c65  ype):.        le
-00055350: 6467 6572 5479 7065 203d 207b 0a20 2020  dgerType = {.   
-00055360: 2020 2020 2020 2020 2027 4645 4527 3a20           'FEE': 
-00055370: 2766 6565 272c 0a20 2020 2020 2020 2020  'fee',.         
-00055380: 2020 2027 4655 4e44 494e 475f 4645 4527     'FUNDING_FEE'
-00055390: 3a20 2766 6565 272c 0a20 2020 2020 2020  : 'fee',.       
-000553a0: 2020 2020 2027 4f50 5449 4f4e 535f 5052       'OPTIONS_PR
-000553b0: 454d 4955 4d5f 4645 4527 3a20 2766 6565  EMIUM_FEE': 'fee
-000553c0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-000553d0: 504f 5349 5449 4f4e 5f4c 494d 4954 5f49  POSITION_LIMIT_I
-000553e0: 4e43 5245 4153 455f 4645 4527 3a20 2766  NCREASE_FEE': 'f
-000553f0: 6565 272c 0a20 2020 2020 2020 2020 2020  ee',.           
-00055400: 2027 434f 4e54 5241 4354 273a 2027 7472   'CONTRACT': 'tr
-00055410: 6164 6527 2c0a 2020 2020 2020 2020 2020  ade',.          
-00055420: 2020 2752 4541 4c49 5a45 445f 504e 4c27    'REALIZED_PNL'
-00055430: 3a20 2774 7261 6465 272c 0a20 2020 2020  : 'trade',.     
-00055440: 2020 2020 2020 2027 5452 414e 5346 4552         'TRANSFER
-00055450: 273a 2027 7472 616e 7366 6572 272c 0a20  ': 'transfer',. 
-00055460: 2020 2020 2020 2020 2020 2027 4352 4f53             'CROS
-00055470: 535f 434f 4c4c 4154 4552 414c 5f54 5241  S_COLLATERAL_TRA
-00055480: 4e53 4645 5227 3a20 2774 7261 6e73 6665  NSFER': 'transfe
-00055490: 7227 2c0a 2020 2020 2020 2020 2020 2020  r',.            
-000554a0: 2749 4e54 4552 4e41 4c5f 5452 414e 5346  'INTERNAL_TRANSF
-000554b0: 4552 273a 2027 7472 616e 7366 6572 272c  ER': 'transfer',
-000554c0: 0a20 2020 2020 2020 2020 2020 2027 434f  .            'CO
-000554d0: 494e 5f53 5741 505f 4445 504f 5349 5427  IN_SWAP_DEPOSIT'
-000554e0: 3a20 2764 6570 6f73 6974 272c 0a20 2020  : 'deposit',.   
-000554f0: 2020 2020 2020 2020 2027 434f 494e 5f53           'COIN_S
-00055500: 5741 505f 5749 5448 4452 4157 273a 2027  WAP_WITHDRAW': '
-00055510: 7769 7468 6472 6177 616c 272c 0a20 2020  withdrawal',.   
-00055520: 2020 2020 2020 2020 2027 4f50 5449 4f4e           'OPTION
-00055530: 535f 5345 5454 4c45 5f50 524f 4649 5427  S_SETTLE_PROFIT'
-00055540: 3a20 2773 6574 746c 656d 656e 7427 2c0a  : 'settlement',.
-00055550: 2020 2020 2020 2020 2020 2020 2744 454c              'DEL
-00055560: 4956 4552 4544 5f53 4554 5445 4c4d 454e  IVERED_SETTELMEN
-00055570: 5427 3a20 2773 6574 746c 656d 656e 7427  T': 'settlement'
-00055580: 2c0a 2020 2020 2020 2020 2020 2020 2757  ,.            'W
-00055590: 454c 434f 4d45 5f42 4f4e 5553 273a 2027  ELCOME_BONUS': '
-000555a0: 6361 7368 6261 636b 272c 0a20 2020 2020  cashback',.     
-000555b0: 2020 2020 2020 2027 434f 4e54 4553 545f         'CONTEST_
-000555c0: 5245 5741 5244 273a 2027 6361 7368 6261  REWARD': 'cashba
-000555d0: 636b 272c 0a20 2020 2020 2020 2020 2020  ck',.           
-000555e0: 2027 434f 4d4d 4953 5349 4f4e 5f52 4542   'COMMISSION_REB
-000555f0: 4154 4527 3a20 2772 6562 6174 6527 2c0a  ATE': 'rebate',.
-00055600: 2020 2020 2020 2020 2020 2020 2741 5049              'API
-00055610: 5f52 4542 4154 4527 3a20 2772 6562 6174  _REBATE': 'rebat
-00055620: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
-00055630: 2752 4546 4552 5241 4c5f 4b49 434b 4241  'REFERRAL_KICKBA
-00055640: 434b 273a 2027 7265 6665 7272 616c 272c  CK': 'referral',
-00055650: 0a20 2020 2020 2020 2020 2020 2027 434f  .            'CO
-00055660: 4d4d 4953 5349 4f4e 273a 2027 636f 6d6d  MMISSION': 'comm
-00055670: 6973 7369 6f6e 272c 0a20 2020 2020 2020  ission',.       
-00055680: 207d 0a20 2020 2020 2020 2072 6574 7572   }.        retur
-00055690: 6e20 7365 6c66 2e73 6166 655f 7374 7269  n self.safe_stri
-000556a0: 6e67 286c 6564 6765 7254 7970 652c 2074  ng(ledgerType, t
-000556b0: 7970 652c 2074 7970 6529 0a0a 2020 2020  ype, type)..    
-000556c0: 6465 6620 7369 676e 2873 656c 662c 2070  def sign(self, p
-000556d0: 6174 682c 2061 7069 3d27 7075 626c 6963  ath, api='public
-000556e0: 272c 206d 6574 686f 643d 2747 4554 272c  ', method='GET',
-000556f0: 2070 6172 616d 733d 7b7d 2c20 6865 6164   params={}, head
-00055700: 6572 733d 4e6f 6e65 2c20 626f 6479 3d4e  ers=None, body=N
-00055710: 6f6e 6529 3a0a 2020 2020 2020 2020 7572  one):.        ur
-00055720: 6c73 203d 2073 656c 662e 7572 6c73 0a20  ls = self.urls. 
-00055730: 2020 2020 2020 2069 6620 6e6f 7420 2861         if not (a
-00055740: 7069 2069 6e20 7572 6c73 5b27 6170 6927  pi in urls['api'
-00055750: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
-00055760: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-00055770: 6564 2873 656c 662e 6964 202b 2027 2064  ed(self.id + ' d
-00055780: 6f65 7320 6e6f 7420 6861 7665 2061 2074  oes not have a t
-00055790: 6573 746e 6574 2f73 616e 6462 6f78 2055  estnet/sandbox U
-000557a0: 524c 2066 6f72 2027 202b 2061 7069 202b  RL for ' + api +
-000557b0: 2027 2065 6e64 706f 696e 7473 2729 0a20   ' endpoints'). 
-000557c0: 2020 2020 2020 2075 726c 203d 2073 656c         url = sel
-000557d0: 662e 7572 6c73 5b27 6170 6927 5d5b 6170  f.urls['api'][ap
-000557e0: 695d 0a20 2020 2020 2020 2075 726c 202b  i].        url +
-000557f0: 3d20 272f 2720 2b20 7061 7468 0a20 2020  = '/' + path.   
-00055800: 2020 2020 2069 6620 6170 6920 3d3d 2027       if api == '
-00055810: 7761 7069 273a 0a20 2020 2020 2020 2020  wapi':.         
-00055820: 2020 2075 726c 202b 3d20 272e 6874 6d6c     url += '.html
-00055830: 270a 2020 2020 2020 2020 6966 2070 6174  '.        if pat
-00055840: 6820 3d3d 2027 6869 7374 6f72 6963 616c  h == 'historical
-00055850: 5472 6164 6573 273a 0a20 2020 2020 2020  Trades':.       
-00055860: 2020 2020 2069 6620 7365 6c66 2e61 7069       if self.api
-00055870: 4b65 793a 0a20 2020 2020 2020 2020 2020  Key:.           
-00055880: 2020 2020 2068 6561 6465 7273 203d 207b       headers = {
-00055890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000558a0: 2020 2020 2027 582d 4d42 582d 4150 494b       'X-MBX-APIK
-000558b0: 4559 273a 2073 656c 662e 6170 694b 6579  EY': self.apiKey
-000558c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000558d0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-000558e0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000558f0: 2020 2020 2020 7261 6973 6520 4175 7468        raise Auth
-00055900: 656e 7469 6361 7469 6f6e 4572 726f 7228  enticationError(
-00055910: 7365 6c66 2e69 6420 2b20 2720 6869 7374  self.id + ' hist
-00055920: 6f72 6963 616c 5472 6164 6573 2065 6e64  oricalTrades end
-00055930: 706f 696e 7420 7265 7175 6972 6573 2060  point requires `
-00055940: 6170 694b 6579 6020 6372 6564 656e 7469  apiKey` credenti
-00055950: 616c 2729 0a20 2020 2020 2020 2075 7365  al').        use
-00055960: 7244 6174 6153 7472 6561 6d20 3d20 2870  rDataStream = (p
-00055970: 6174 6820 3d3d 2027 7573 6572 4461 7461  ath == 'userData
-00055980: 5374 7265 616d 2729 206f 7220 2870 6174  Stream') or (pat
-00055990: 6820 3d3d 2027 6c69 7374 656e 4b65 7927  h == 'listenKey'
-000559a0: 290a 2020 2020 2020 2020 6966 2075 7365  ).        if use
-000559b0: 7244 6174 6153 7472 6561 6d3a 0a20 2020  rDataStream:.   
-000559c0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-000559d0: 2e61 7069 4b65 793a 0a20 2020 2020 2020  .apiKey:.       
-000559e0: 2020 2020 2020 2020 2023 2076 3120 7370           # v1 sp
-000559f0: 6563 6961 6c20 6361 7365 2066 6f72 2075  ecial case for u
-00055a00: 7365 7244 6174 6153 7472 6561 6d0a 2020  serDataStream.  
-00055a10: 2020 2020 2020 2020 2020 2020 2020 6865                he
-00055a20: 6164 6572 7320 3d20 7b0a 2020 2020 2020  aders = {.      
-00055a30: 2020 2020 2020 2020 2020 2020 2020 2758                'X
-00055a40: 2d4d 4258 2d41 5049 4b45 5927 3a20 7365  -MBX-APIKEY': se
-00055a50: 6c66 2e61 7069 4b65 792c 0a20 2020 2020  lf.apiKey,.     
-00055a60: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00055a70: 436f 6e74 656e 742d 5479 7065 273a 2027  Content-Type': '
-00055a80: 6170 706c 6963 6174 696f 6e2f 782d 7777  application/x-ww
-00055a90: 772d 666f 726d 2d75 726c 656e 636f 6465  w-form-urlencode
-00055aa0: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-00055ab0: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-00055ac0: 2020 2020 2020 6966 206d 6574 686f 6420        if method 
-00055ad0: 213d 2027 4745 5427 3a0a 2020 2020 2020  != 'GET':.      
-00055ae0: 2020 2020 2020 2020 2020 2020 2020 626f                bo
-00055af0: 6479 203d 2073 656c 662e 7572 6c65 6e63  dy = self.urlenc
-00055b00: 6f64 6528 7061 7261 6d73 290a 2020 2020  ode(params).    
-00055b10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00055b20: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00055b30: 6973 6520 4175 7468 656e 7469 6361 7469  ise Authenticati
-00055b40: 6f6e 4572 726f 7228 7365 6c66 2e69 6420  onError(self.id 
-00055b50: 2b20 2720 7573 6572 4461 7461 5374 7265  + ' userDataStre
-00055b60: 616d 2065 6e64 706f 696e 7420 7265 7175  am endpoint requ
-00055b70: 6972 6573 2060 6170 694b 6579 6020 6372  ires `apiKey` cr
-00055b80: 6564 656e 7469 616c 2729 0a20 2020 2020  edential').     
-00055b90: 2020 2065 6c69 6620 2861 7069 203d 3d20     elif (api == 
-00055ba0: 2770 7269 7661 7465 2729 206f 7220 2861  'private') or (a
-00055bb0: 7069 203d 3d20 2765 6170 6950 7269 7661  pi == 'eapiPriva
-00055bc0: 7465 2729 206f 7220 2861 7069 203d 3d20  te') or (api == 
-00055bd0: 2773 6170 6927 2061 6e64 2070 6174 6820  'sapi' and path 
-00055be0: 213d 2027 7379 7374 656d 2f73 7461 7475  != 'system/statu
-00055bf0: 7327 2920 6f72 2028 6170 6920 3d3d 2027  s') or (api == '
-00055c00: 7361 7069 5632 2729 206f 7220 2861 7069  sapiV2') or (api
-00055c10: 203d 3d20 2773 6170 6956 3327 2920 6f72   == 'sapiV3') or
-00055c20: 2028 6170 6920 3d3d 2027 7361 7069 5634   (api == 'sapiV4
-00055c30: 2729 206f 7220 2861 7069 203d 3d20 2777  ') or (api == 'w
-00055c40: 6170 6927 2061 6e64 2070 6174 6820 213d  api' and path !=
-00055c50: 2027 7379 7374 656d 5374 6174 7573 2729   'systemStatus')
-00055c60: 206f 7220 2861 7069 203d 3d20 2764 6170   or (api == 'dap
-00055c70: 6950 7269 7661 7465 2729 206f 7220 2861  iPrivate') or (a
-00055c80: 7069 203d 3d20 2764 6170 6950 7269 7661  pi == 'dapiPriva
-00055c90: 7465 5632 2729 206f 7220 2861 7069 203d  teV2') or (api =
-00055ca0: 3d20 2766 6170 6950 7269 7661 7465 2729  = 'fapiPrivate')
-00055cb0: 206f 7220 2861 7069 203d 3d20 2766 6170   or (api == 'fap
-00055cc0: 6950 7269 7661 7465 5632 2729 3a0a 2020  iPrivateV2'):.  
-00055cd0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00055ce0: 6865 636b 5f72 6571 7569 7265 645f 6372  heck_required_cr
-00055cf0: 6564 656e 7469 616c 7328 290a 2020 2020  edentials().    
-00055d00: 2020 2020 2020 2020 7175 6572 7920 3d20          query = 
-00055d10: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-00055d20: 2064 6566 6175 6c74 5265 6376 5769 6e64   defaultRecvWind
-00055d30: 6f77 203d 2073 656c 662e 7361 6665 5f69  ow = self.safe_i
-00055d40: 6e74 6567 6572 2873 656c 662e 6f70 7469  nteger(self.opti
-00055d50: 6f6e 732c 2027 7265 6376 5769 6e64 6f77  ons, 'recvWindow
-00055d60: 2729 0a20 2020 2020 2020 2020 2020 2065  ').            e
-00055d70: 7874 656e 6465 6450 6172 616d 7320 3d20  xtendedParams = 
-00055d80: 7365 6c66 2e65 7874 656e 6428 7b0a 2020  self.extend({.  
-00055d90: 2020 2020 2020 2020 2020 2020 2020 2774                't
-00055da0: 696d 6573 7461 6d70 273a 2073 656c 662e  imestamp': self.
-00055db0: 6e6f 6e63 6528 292c 0a20 2020 2020 2020  nonce(),.       
-00055dc0: 2020 2020 207d 2c20 7061 7261 6d73 290a       }, params).
-00055dd0: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-00055de0: 6566 6175 6c74 5265 6376 5769 6e64 6f77  efaultRecvWindow
-00055df0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00055e00: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00055e10: 7465 6e64 6564 5061 7261 6d73 5b27 7265  tendedParams['re
-00055e20: 6376 5769 6e64 6f77 275d 203d 2064 6566  cvWindow'] = def
-00055e30: 6175 6c74 5265 6376 5769 6e64 6f77 0a20  aultRecvWindow. 
-00055e40: 2020 2020 2020 2020 2020 2072 6563 7657             recvW
-00055e50: 696e 646f 7720 3d20 7365 6c66 2e73 6166  indow = self.saf
-00055e60: 655f 696e 7465 6765 7228 7061 7261 6d73  e_integer(params
-00055e70: 2c20 2772 6563 7657 696e 646f 7727 290a  , 'recvWindow').
-00055e80: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-00055e90: 6563 7657 696e 646f 7720 6973 206e 6f74  ecvWindow is not
-00055ea0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00055eb0: 2020 2020 2020 2065 7874 656e 6465 6450         extendedP
-00055ec0: 6172 616d 735b 2772 6563 7657 696e 646f  arams['recvWindo
-00055ed0: 7727 5d20 3d20 7265 6376 5769 6e64 6f77  w'] = recvWindow
-00055ee0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00055ef0: 2861 7069 203d 3d20 2773 6170 6927 2920  (api == 'sapi') 
-00055f00: 616e 6420 2870 6174 6820 3d3d 2027 6173  and (path == 'as
-00055f10: 7365 742f 6475 7374 2729 3a0a 2020 2020  set/dust'):.    
-00055f20: 2020 2020 2020 2020 2020 2020 7175 6572              quer
-00055f30: 7920 3d20 7365 6c66 2e75 726c 656e 636f  y = self.urlenco
-00055f40: 6465 5f77 6974 685f 6172 7261 795f 7265  de_with_array_re
-00055f50: 7065 6174 2865 7874 656e 6465 6450 6172  peat(extendedPar
-00055f60: 616d 7329 0a20 2020 2020 2020 2020 2020  ams).           
-00055f70: 2065 6c69 6620 2870 6174 6820 3d3d 2027   elif (path == '
-00055f80: 6261 7463 684f 7264 6572 7327 2920 6f72  batchOrders') or
-00055f90: 2028 7061 7468 2e66 696e 6428 2773 7562   (path.find('sub
-00055fa0: 2d61 6363 6f75 6e74 2729 203e 3d20 3029  -account') >= 0)
-00055fb0: 206f 7220 2870 6174 6820 3d3d 2027 6361   or (path == 'ca
-00055fc0: 7069 7461 6c2f 7769 7468 6472 6177 2f61  pital/withdraw/a
-00055fd0: 7070 6c79 2729 206f 7220 2870 6174 682e  pply') or (path.
-00055fe0: 6669 6e64 2827 7374 616b 696e 6727 2920  find('staking') 
-00055ff0: 3e3d 2030 293a 0a20 2020 2020 2020 2020  >= 0):.         
-00056000: 2020 2020 2020 2071 7565 7279 203d 2073         query = s
-00056010: 656c 662e 7261 7765 6e63 6f64 6528 6578  elf.rawencode(ex
-00056020: 7465 6e64 6564 5061 7261 6d73 290a 2020  tendedParams).  
-00056030: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00056040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056050: 7175 6572 7920 3d20 7365 6c66 2e75 726c  query = self.url
-00056060: 656e 636f 6465 2865 7874 656e 6465 6450  encode(extendedP
-00056070: 6172 616d 7329 0a20 2020 2020 2020 2020  arams).         
-00056080: 2020 2073 6967 6e61 7475 7265 203d 204e     signature = N
-00056090: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-000560a0: 6966 2073 656c 662e 7365 6372 6574 2e66  if self.secret.f
-000560b0: 696e 6428 2750 5249 5641 5445 204b 4559  ind('PRIVATE KEY
-000560c0: 2729 203e 202d 313a 0a20 2020 2020 2020  ') > -1:.       
-000560d0: 2020 2020 2020 2020 2073 6967 6e61 7475           signatu
-000560e0: 7265 203d 2073 656c 662e 656e 636f 6465  re = self.encode
-000560f0: 5f75 7269 5f63 6f6d 706f 6e65 6e74 2873  _uri_component(s
-00056100: 656c 662e 7273 6128 7175 6572 792c 2073  elf.rsa(query, s
-00056110: 656c 662e 7365 6372 6574 2c20 2773 6861  elf.secret, 'sha
-00056120: 3235 3627 2929 0a20 2020 2020 2020 2020  256')).         
-00056130: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00056140: 2020 2020 2020 2020 2073 6967 6e61 7475           signatu
-00056150: 7265 203d 2073 656c 662e 686d 6163 2873  re = self.hmac(s
-00056160: 656c 662e 656e 636f 6465 2871 7565 7279  elf.encode(query
-00056170: 292c 2073 656c 662e 656e 636f 6465 2873  ), self.encode(s
-00056180: 656c 662e 7365 6372 6574 292c 2068 6173  elf.secret), has
-00056190: 686c 6962 2e73 6861 3235 3629 0a20 2020  hlib.sha256).   
-000561a0: 2020 2020 2020 2020 2071 7565 7279 202b           query +
-000561b0: 3d20 2726 2720 2b20 2773 6967 6e61 7475  = '&' + 'signatu
-000561c0: 7265 3d27 202b 2073 6967 6e61 7475 7265  re=' + signature
-000561d0: 0a20 2020 2020 2020 2020 2020 2068 6561  .            hea
-000561e0: 6465 7273 203d 207b 0a20 2020 2020 2020  ders = {.       
-000561f0: 2020 2020 2020 2020 2027 582d 4d42 582d           'X-MBX-
-00056200: 4150 494b 4559 273a 2073 656c 662e 6170  APIKEY': self.ap
-00056210: 694b 6579 2c0a 2020 2020 2020 2020 2020  iKey,.          
-00056220: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-00056230: 6966 2028 6d65 7468 6f64 203d 3d20 2747  if (method == 'G
-00056240: 4554 2729 206f 7220 286d 6574 686f 6420  ET') or (method 
-00056250: 3d3d 2027 4445 4c45 5445 2729 206f 7220  == 'DELETE') or 
-00056260: 2861 7069 203d 3d20 2777 6170 6927 293a  (api == 'wapi'):
-00056270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00056280: 2075 726c 202b 3d20 273f 2720 2b20 7175   url += '?' + qu
-00056290: 6572 790a 2020 2020 2020 2020 2020 2020  ery.            
-000562a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000562b0: 2020 2020 2020 626f 6479 203d 2071 7565        body = que
-000562c0: 7279 0a20 2020 2020 2020 2020 2020 2020  ry.             
-000562d0: 2020 2068 6561 6465 7273 5b27 436f 6e74     headers['Cont
-000562e0: 656e 742d 5479 7065 275d 203d 2027 6170  ent-Type'] = 'ap
-000562f0: 706c 6963 6174 696f 6e2f 782d 7777 772d  plication/x-www-
-00056300: 666f 726d 2d75 726c 656e 636f 6465 6427  form-urlencoded'
-00056310: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00056320: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
-00056330: 7261 6d73 3a0a 2020 2020 2020 2020 2020  rams:.          
-00056340: 2020 2020 2020 7572 6c20 2b3d 2027 3f27        url += '?'
-00056350: 202b 2073 656c 662e 7572 6c65 6e63 6f64   + self.urlencod
-00056360: 6528 7061 7261 6d73 290a 2020 2020 2020  e(params).      
-00056370: 2020 7265 7475 726e 207b 2775 726c 273a    return {'url':
-00056380: 2075 726c 2c20 276d 6574 686f 6427 3a20   url, 'method': 
-00056390: 6d65 7468 6f64 2c20 2762 6f64 7927 3a20  method, 'body': 
-000563a0: 626f 6479 2c20 2768 6561 6465 7273 273a  body, 'headers':
-000563b0: 2068 6561 6465 7273 7d0a 0a20 2020 2064   headers}..    d
-000563c0: 6566 2068 616e 646c 655f 6572 726f 7273  ef handle_errors
-000563d0: 2873 656c 662c 2063 6f64 652c 2072 6561  (self, code, rea
-000563e0: 736f 6e2c 2075 726c 2c20 6d65 7468 6f64  son, url, method
-000563f0: 2c20 6865 6164 6572 732c 2062 6f64 792c  , headers, body,
-00056400: 2072 6573 706f 6e73 652c 2072 6571 7565   response, reque
-00056410: 7374 4865 6164 6572 732c 2072 6571 7565  stHeaders, reque
-00056420: 7374 426f 6479 293a 0a20 2020 2020 2020  stBody):.       
-00056430: 2069 6620 2863 6f64 6520 3d3d 2034 3138   if (code == 418
-00056440: 2920 6f72 2028 636f 6465 203d 3d20 3432  ) or (code == 42
-00056450: 3929 3a0a 2020 2020 2020 2020 2020 2020  9):.            
-00056460: 7261 6973 6520 4444 6f53 5072 6f74 6563  raise DDoSProtec
-00056470: 7469 6f6e 2873 656c 662e 6964 202b 2027  tion(self.id + '
-00056480: 2027 202b 2073 7472 2863 6f64 6529 202b   ' + str(code) +
-00056490: 2027 2027 202b 2072 6561 736f 6e20 2b20   ' ' + reason + 
-000564a0: 2720 2720 2b20 626f 6479 290a 2020 2020  ' ' + body).    
-000564b0: 2020 2020 2320 6572 726f 7220 7265 7370      # error resp
-000564c0: 6f6e 7365 2069 6e20 6120 666f 726d 3a20  onse in a form: 
-000564d0: 7b22 636f 6465 223a 202d 3130 3133 2c20  {"code": -1013, 
-000564e0: 226d 7367 223a 2022 496e 7661 6c69 6420  "msg": "Invalid 
-000564f0: 7175 616e 7469 7479 2e22 7d0a 2020 2020  quantity."}.    
-00056500: 2020 2020 2320 666f 6c6c 6f77 696e 6720      # following 
-00056510: 626c 6f63 6b20 636f 696e 7461 696e 7320  block cointains 
-00056520: 6c65 6761 6379 2063 6865 636b 7320 6167  legacy checks ag
-00056530: 6169 6e73 7420 6d65 7373 6167 6520 7061  ainst message pa
-00056540: 7474 6572 6e73 2069 6e20 226d 7367 2220  tterns in "msg" 
-00056550: 7072 6f70 6572 7479 0a20 2020 2020 2020  property.       
-00056560: 2023 2077 696c 6c20 7377 6974 6368 2022   # will switch "
-00056570: 636f 6465 2220 6368 6563 6b73 2065 7665  code" checks eve
-00056580: 6e74 7561 6c6c 792c 2077 6865 6e20 7765  ntually, when we
-00056590: 206b 6e6f 7720 616c 6c20 6f66 2074 6865   know all of the
-000565a0: 6d0a 2020 2020 2020 2020 6966 2063 6f64  m.        if cod
-000565b0: 6520 3e3d 2034 3030 3a0a 2020 2020 2020  e >= 400:.      
-000565c0: 2020 2020 2020 6966 2062 6f64 792e 6669        if body.fi
-000565d0: 6e64 2827 5072 6963 6520 2a20 5154 5920  nd('Price * QTY 
-000565e0: 6973 207a 6572 6f20 6f72 206c 6573 7327  is zero or less'
-000565f0: 2920 3e3d 2030 3a0a 2020 2020 2020 2020  ) >= 0:.        
-00056600: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
-00056610: 7661 6c69 644f 7264 6572 2873 656c 662e  validOrder(self.
-00056620: 6964 202b 2027 206f 7264 6572 2063 6f73  id + ' order cos
-00056630: 7420 3d20 616d 6f75 6e74 202a 2070 7269  t = amount * pri
-00056640: 6365 2069 7320 7a65 726f 206f 7220 6c65  ce is zero or le
-00056650: 7373 2027 202b 2062 6f64 7929 0a20 2020  ss ' + body).   
-00056660: 2020 2020 2020 2020 2069 6620 626f 6479           if body
-00056670: 2e66 696e 6428 274c 4f54 5f53 495a 4527  .find('LOT_SIZE'
-00056680: 2920 3e3d 2030 3a0a 2020 2020 2020 2020  ) >= 0:.        
-00056690: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
-000566a0: 7661 6c69 644f 7264 6572 2873 656c 662e  validOrder(self.
-000566b0: 6964 202b 2027 206f 7264 6572 2061 6d6f  id + ' order amo
-000566c0: 756e 7420 7368 6f75 6c64 2062 6520 6576  unt should be ev
-000566d0: 656e 6c79 2064 6976 6973 6962 6c65 2062  enly divisible b
-000566e0: 7920 6c6f 7420 7369 7a65 2027 202b 2062  y lot size ' + b
-000566f0: 6f64 7929 0a20 2020 2020 2020 2020 2020  ody).           
-00056700: 2069 6620 626f 6479 2e66 696e 6428 2750   if body.find('P
-00056710: 5249 4345 5f46 494c 5445 5227 2920 3e3d  RICE_FILTER') >=
-00056720: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00056730: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-00056740: 644f 7264 6572 2873 656c 662e 6964 202b  dOrder(self.id +
-00056750: 2027 206f 7264 6572 2070 7269 6365 2069   ' order price i
-00056760: 7320 696e 7661 6c69 642c 2069 2e65 2e20  s invalid, i.e. 
-00056770: 6578 6365 6564 7320 616c 6c6f 7765 6420  exceeds allowed 
-00056780: 7072 6963 6520 7072 6563 6973 696f 6e2c  price precision,
-00056790: 2065 7863 6565 6473 206d 696e 2070 7269   exceeds min pri
-000567a0: 6365 206f 7220 6d61 7820 7072 6963 6520  ce or max price 
-000567b0: 6c69 6d69 7473 206f 7220 6973 2069 6e76  limits or is inv
-000567c0: 616c 6964 2076 616c 7565 2069 6e20 6765  alid value in ge
-000567d0: 6e65 7261 6c2c 2075 7365 2073 656c 662e  neral, use self.
-000567e0: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
-000567f0: 6f6e 2873 796d 626f 6c2c 2061 6d6f 756e  on(symbol, amoun
-00056800: 7429 2027 202b 2062 6f64 7929 0a20 2020  t) ' + body).   
-00056810: 2020 2020 2069 6620 7265 7370 6f6e 7365       if response
-00056820: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00056830: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-00056840: 6520 2023 2066 616c 6c62 6163 6b20 746f  e  # fallback to
-00056850: 2064 6566 6175 6c74 2065 7272 6f72 2068   default error h
-00056860: 616e 646c 6572 0a20 2020 2020 2020 2023  andler.        #
-00056870: 2063 6865 636b 2073 7563 6365 7373 2076   check success v
-00056880: 616c 7565 2066 6f72 2077 6170 6920 656e  alue for wapi en
-00056890: 6470 6f69 6e74 730a 2020 2020 2020 2020  dpoints.        
-000568a0: 2320 7265 7370 6f6e 7365 2069 6e20 666f  # response in fo
-000568b0: 726d 6174 207b 276d 7367 273a 2027 5468  rmat {'msg': 'Th
-000568c0: 6520 636f 696e 2064 6f65 7320 6e6f 7420  e coin does not 
-000568d0: 6578 6973 742e 272c 2027 7375 6363 6573  exist.', 'succes
-000568e0: 7327 3a20 5472 7565 2f66 616c 7365 7d0a  s': True/false}.
-000568f0: 2020 2020 2020 2020 7375 6363 6573 7320          success 
-00056900: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00056910: 6528 7265 7370 6f6e 7365 2c20 2773 7563  e(response, 'suc
-00056920: 6365 7373 272c 2054 7275 6529 0a20 2020  cess', True).   
-00056930: 2020 2020 2069 6620 6e6f 7420 7375 6363       if not succ
-00056940: 6573 733a 0a20 2020 2020 2020 2020 2020  ess:.           
-00056950: 206d 6573 7361 6765 4e65 7720 3d20 7365   messageNew = se
-00056960: 6c66 2e73 6166 655f 7374 7269 6e67 2872  lf.safe_string(r
-00056970: 6573 706f 6e73 652c 2027 6d73 6727 290a  esponse, 'msg').
-00056980: 2020 2020 2020 2020 2020 2020 7061 7273              pars
-00056990: 6564 4d65 7373 6167 6520 3d20 4e6f 6e65  edMessage = None
-000569a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000569b0: 6d65 7373 6167 654e 6577 2069 7320 6e6f  messageNew is no
-000569c0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000569d0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-000569e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000569f0: 2070 6172 7365 644d 6573 7361 6765 203d   parsedMessage =
-00056a00: 206a 736f 6e2e 6c6f 6164 7328 6d65 7373   json.loads(mess
-00056a10: 6167 654e 6577 290a 2020 2020 2020 2020  ageNew).        
-00056a20: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-00056a30: 7863 6570 7469 6f6e 2061 7320 653a 0a20  xception as e:. 
-00056a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056a50: 2020 2023 2064 6f20 6e6f 7468 696e 670a     # do nothing.
-00056a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056a70: 2020 2020 7061 7273 6564 4d65 7373 6167      parsedMessag
-00056a80: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-00056a90: 2020 2020 2020 2020 2069 6620 7061 7273           if pars
-00056aa0: 6564 4d65 7373 6167 6520 6973 206e 6f74  edMessage is not
-00056ab0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00056ac0: 2020 2020 2020 2020 2020 2072 6573 706f             respo
-00056ad0: 6e73 6520 3d20 7061 7273 6564 4d65 7373  nse = parsedMess
-00056ae0: 6167 650a 2020 2020 2020 2020 6d65 7373  age.        mess
-00056af0: 6167 6520 3d20 7365 6c66 2e73 6166 655f  age = self.safe_
-00056b00: 7374 7269 6e67 2872 6573 706f 6e73 652c  string(response,
-00056b10: 2027 6d73 6727 290a 2020 2020 2020 2020   'msg').        
-00056b20: 6966 206d 6573 7361 6765 2069 7320 6e6f  if message is no
-00056b30: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00056b40: 2020 2020 7365 6c66 2e74 6872 6f77 5f65      self.throw_e
-00056b50: 7861 6374 6c79 5f6d 6174 6368 6564 5f65  xactly_matched_e
-00056b60: 7863 6570 7469 6f6e 2873 656c 662e 6578  xception(self.ex
-00056b70: 6365 7074 696f 6e73 5b27 6578 6163 7427  ceptions['exact'
-00056b80: 5d2c 206d 6573 7361 6765 2c20 7365 6c66  ], message, self
-00056b90: 2e69 6420 2b20 2720 2720 2b20 6d65 7373  .id + ' ' + mess
-00056ba0: 6167 6529 0a20 2020 2020 2020 2020 2020  age).           
-00056bb0: 2073 656c 662e 7468 726f 775f 6272 6f61   self.throw_broa
-00056bc0: 646c 795f 6d61 7463 6865 645f 6578 6365  dly_matched_exce
-00056bd0: 7074 696f 6e28 7365 6c66 2e65 7863 6570  ption(self.excep
-00056be0: 7469 6f6e 735b 2762 726f 6164 275d 2c20  tions['broad'], 
-00056bf0: 6d65 7373 6167 652c 2073 656c 662e 6964  message, self.id
-00056c00: 202b 2027 2027 202b 206d 6573 7361 6765   + ' ' + message
-00056c10: 290a 2020 2020 2020 2020 2320 6368 6563  ).        # chec
-00056c20: 6b73 2061 6761 696e 7374 2065 7272 6f72  ks against error
-00056c30: 2063 6f64 6573 0a20 2020 2020 2020 2065   codes.        e
-00056c40: 7272 6f72 203d 2073 656c 662e 7361 6665  rror = self.safe
-00056c50: 5f73 7472 696e 6728 7265 7370 6f6e 7365  _string(response
-00056c60: 2c20 2763 6f64 6527 290a 2020 2020 2020  , 'code').      
-00056c70: 2020 6966 2065 7272 6f72 2069 7320 6e6f    if error is no
-00056c80: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00056c90: 2020 2020 2320 6874 7470 733a 2f2f 6769      # https://gi
-00056ca0: 7468 7562 2e63 6f6d 2f63 6378 742f 6363  thub.com/ccxt/cc
-00056cb0: 7874 2f69 7373 7565 732f 3635 3031 0a20  xt/issues/6501. 
-00056cc0: 2020 2020 2020 2020 2020 2023 2068 7474             # htt
-00056cd0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00056ce0: 6363 7874 2f63 6378 742f 6973 7375 6573  ccxt/ccxt/issues
-00056cf0: 2f37 3734 320a 2020 2020 2020 2020 2020  /7742.          
-00056d00: 2020 6966 2028 6572 726f 7220 3d3d 2027    if (error == '
-00056d10: 3230 3027 2920 6f72 2050 7265 6369 7365  200') or Precise
-00056d20: 2e73 7472 696e 675f 6571 7561 6c73 2865  .string_equals(e
-00056d30: 7272 6f72 2c20 2730 2729 3a0a 2020 2020  rror, '0'):.    
-00056d40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00056d50: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
-00056d60: 2020 2020 2320 6120 776f 726b 6172 6f75      # a workarou
-00056d70: 6e64 2066 6f72 207b 2263 6f64 6522 3a2d  nd for {"code":-
-00056d80: 3230 3135 2c22 6d73 6722 3a22 496e 7661  2015,"msg":"Inva
-00056d90: 6c69 6420 4150 492d 6b65 792c 2049 502c  lid API-key, IP,
-00056da0: 206f 7220 7065 726d 6973 7369 6f6e 7320   or permissions 
-00056db0: 666f 7220 6163 7469 6f6e 2e22 7d0a 2020  for action."}.  
-00056dc0: 2020 2020 2020 2020 2020 2320 6465 7370            # desp
-00056dd0: 6974 6520 7468 6174 2074 6865 6972 206d  ite that their m
-00056de0: 6573 7361 6765 2069 7320 7665 7279 2063  essage is very c
-00056df0: 6f6e 6675 7369 6e67 2c20 6974 2069 7320  onfusing, it is 
-00056e00: 7261 6973 6564 2062 7920 4269 6e61 6e63  raised by Binanc
-00056e10: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
-00056e20: 6f6e 2061 2074 656d 706f 7261 7279 2062  on a temporary b
-00056e30: 616e 2c20 7468 6520 4150 4920 6b65 7920  an, the API key 
-00056e40: 6973 2076 616c 6964 2c20 6275 7420 6469  is valid, but di
-00056e50: 7361 626c 6564 2066 6f72 2061 2077 6869  sabled for a whi
-00056e60: 6c65 0a20 2020 2020 2020 2020 2020 2069  le.            i
-00056e70: 6620 2865 7272 6f72 203d 3d20 272d 3230  f (error == '-20
-00056e80: 3135 2729 2061 6e64 2073 656c 662e 6f70  15') and self.op
-00056e90: 7469 6f6e 735b 2768 6173 416c 7265 6164  tions['hasAlread
-00056ea0: 7941 7574 6865 6e74 6963 6174 6564 5375  yAuthenticatedSu
-00056eb0: 6363 6573 7366 756c 6c79 275d 3a0a 2020  ccessfully']:.  
-00056ec0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00056ed0: 6973 6520 4444 6f53 5072 6f74 6563 7469  ise DDoSProtecti
-00056ee0: 6f6e 2873 656c 662e 6964 202b 2027 2027  on(self.id + ' '
-00056ef0: 202b 2062 6f64 7929 0a20 2020 2020 2020   + body).       
-00056f00: 2020 2020 2066 6565 6462 6163 6b20 3d20       feedback = 
-00056f10: 7365 6c66 2e69 6420 2b20 2720 2720 2b20  self.id + ' ' + 
-00056f20: 626f 6479 0a20 2020 2020 2020 2020 2020  body.           
-00056f30: 2069 6620 6d65 7373 6167 6520 3d3d 2027   if message == '
-00056f40: 4e6f 206e 6565 6420 746f 2063 6861 6e67  No need to chang
-00056f50: 6520 6d61 7267 696e 2074 7970 652e 273a  e margin type.':
-00056f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00056f70: 2023 206e 6f74 2061 6e20 6572 726f 720a   # not an error.
-00056f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056f90: 2320 6874 7470 733a 2f2f 6769 7468 7562  # https://github
-00056fa0: 2e63 6f6d 2f63 6378 742f 6363 7874 2f69  .com/ccxt/ccxt/i
-00056fb0: 7373 7565 732f 3131 3236 380a 2020 2020  ssues/11268.    
-00056fc0: 2020 2020 2020 2020 2020 2020 2320 6874              # ht
-00056fd0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00056fe0: 2f63 6378 742f 6363 7874 2f70 756c 6c2f  /ccxt/ccxt/pull/
-00056ff0: 3131 3632 340a 2020 2020 2020 2020 2020  11624.          
-00057000: 2020 2020 2020 2320 504f 5354 2068 7474        # POST htt
-00057010: 7073 3a2f 2f66 6170 692e 6269 6e61 6e63  ps://fapi.binanc
-00057020: 652e 636f 6d2f 6661 7069 2f76 312f 6d61  e.com/fapi/v1/ma
-00057030: 7267 696e 5479 7065 2034 3030 2042 6164  rginType 400 Bad
-00057040: 2052 6571 7565 7374 0a20 2020 2020 2020   Request.       
-00057050: 2020 2020 2020 2020 2023 2062 696e 616e           # binan
-00057060: 6365 7573 646d 207b 2263 6f64 6522 3a2d  ceusdm {"code":-
-00057070: 3430 3436 2c22 6d73 6722 3a22 4e6f 206e  4046,"msg":"No n
-00057080: 6565 6420 746f 2063 6861 6e67 6520 6d61  eed to change ma
-00057090: 7267 696e 2074 7970 652e 227d 0a20 2020  rgin type."}.   
-000570a0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-000570b0: 7365 204d 6172 6769 6e4d 6f64 6541 6c72  se MarginModeAlr
-000570c0: 6561 6479 5365 7428 6665 6564 6261 636b  eadySet(feedback
-000570d0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-000570e0: 6c66 2e74 6872 6f77 5f65 7861 6374 6c79  lf.throw_exactly
-000570f0: 5f6d 6174 6368 6564 5f65 7863 6570 7469  _matched_excepti
-00057100: 6f6e 2873 656c 662e 6578 6365 7074 696f  on(self.exceptio
-00057110: 6e73 5b27 6578 6163 7427 5d2c 2065 7272  ns['exact'], err
-00057120: 6f72 2c20 6665 6564 6261 636b 290a 2020  or, feedback).  
-00057130: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00057140: 4578 6368 616e 6765 4572 726f 7228 6665  ExchangeError(fe
-00057150: 6564 6261 636b 290a 2020 2020 2020 2020  edback).        
-00057160: 6966 206e 6f74 2073 7563 6365 7373 3a0a  if not success:.
-00057170: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00057180: 6520 4578 6368 616e 6765 4572 726f 7228  e ExchangeError(
-00057190: 7365 6c66 2e69 6420 2b20 2720 2720 2b20  self.id + ' ' + 
-000571a0: 626f 6479 290a 2020 2020 2020 2020 7265  body).        re
-000571b0: 7475 726e 204e 6f6e 650a 0a20 2020 2064  turn None..    d
-000571c0: 6566 2063 616c 6375 6c61 7465 5f72 6174  ef calculate_rat
-000571d0: 655f 6c69 6d69 7465 725f 636f 7374 2873  e_limiter_cost(s
-000571e0: 656c 662c 2061 7069 2c20 6d65 7468 6f64  elf, api, method
-000571f0: 2c20 7061 7468 2c20 7061 7261 6d73 2c20  , path, params, 
-00057200: 636f 6e66 6967 3d7b 7d29 3a0a 2020 2020  config={}):.    
-00057210: 2020 2020 6966 2028 276e 6f43 6f69 6e27      if ('noCoin'
-00057220: 2069 6e20 636f 6e66 6967 2920 616e 6420   in config) and 
-00057230: 6e6f 7420 2827 636f 696e 2720 696e 2070  not ('coin' in p
-00057240: 6172 616d 7329 3a0a 2020 2020 2020 2020  arams):.        
-00057250: 2020 2020 7265 7475 726e 2063 6f6e 6669      return confi
-00057260: 675b 276e 6f43 6f69 6e27 5d0a 2020 2020  g['noCoin'].    
-00057270: 2020 2020 656c 6966 2028 276e 6f53 796d      elif ('noSym
-00057280: 626f 6c27 2069 6e20 636f 6e66 6967 2920  bol' in config) 
-00057290: 616e 6420 6e6f 7420 2827 7379 6d62 6f6c  and not ('symbol
-000572a0: 2720 696e 2070 6172 616d 7329 3a0a 2020  ' in params):.  
-000572b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000572c0: 2063 6f6e 6669 675b 276e 6f53 796d 626f   config['noSymbo
-000572d0: 6c27 5d0a 2020 2020 2020 2020 656c 6966  l'].        elif
-000572e0: 2028 276e 6f50 6f6f 6c49 6427 2069 6e20   ('noPoolId' in 
-000572f0: 636f 6e66 6967 2920 616e 6420 6e6f 7420  config) and not 
-00057300: 2827 706f 6f6c 4964 2720 696e 2070 6172  ('poolId' in par
-00057310: 616d 7329 3a0a 2020 2020 2020 2020 2020  ams):.          
-00057320: 2020 7265 7475 726e 2063 6f6e 6669 675b    return config[
-00057330: 276e 6f50 6f6f 6c49 6427 5d0a 2020 2020  'noPoolId'].    
-00057340: 2020 2020 656c 6966 2028 2762 794c 696d      elif ('byLim
-00057350: 6974 2720 696e 2063 6f6e 6669 6729 2061  it' in config) a
-00057360: 6e64 2028 276c 696d 6974 2720 696e 2070  nd ('limit' in p
-00057370: 6172 616d 7329 3a0a 2020 2020 2020 2020  arams):.        
-00057380: 2020 2020 6c69 6d69 7420 3d20 7061 7261      limit = para
-00057390: 6d73 5b27 6c69 6d69 7427 5d0a 2020 2020  ms['limit'].    
-000573a0: 2020 2020 2020 2020 6279 4c69 6d69 7420          byLimit 
-000573b0: 3d20 636f 6e66 6967 5b27 6279 4c69 6d69  = config['byLimi
-000573c0: 7427 5d0a 2020 2020 2020 2020 2020 2020  t'].            
-000573d0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-000573e0: 2c20 6c65 6e28 6279 4c69 6d69 7429 293a  , len(byLimit)):
-000573f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00057400: 2065 6e74 7279 203d 2062 794c 696d 6974   entry = byLimit
-00057410: 5b69 5d0a 2020 2020 2020 2020 2020 2020  [i].            
-00057420: 2020 2020 6966 206c 696d 6974 203c 3d20      if limit <= 
-00057430: 656e 7472 795b 305d 3a0a 2020 2020 2020  entry[0]:.      
-00057440: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00057450: 7475 726e 2065 6e74 7279 5b31 5d0a 2020  turn entry[1].  
-00057460: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00057470: 662e 7361 6665 5f76 616c 7565 2863 6f6e  f.safe_value(con
-00057480: 6669 672c 2027 636f 7374 272c 2031 290a  fig, 'cost', 1).
-00057490: 0a20 2020 2061 7379 6e63 2064 6566 2072  .    async def r
-000574a0: 6571 7565 7374 2873 656c 662c 2070 6174  equest(self, pat
-000574b0: 682c 2061 7069 3d27 7075 626c 6963 272c  h, api='public',
-000574c0: 206d 6574 686f 643d 2747 4554 272c 2070   method='GET', p
-000574d0: 6172 616d 733d 7b7d 2c20 6865 6164 6572  arams={}, header
-000574e0: 733d 4e6f 6e65 2c20 626f 6479 3d4e 6f6e  s=None, body=Non
-000574f0: 652c 2063 6f6e 6669 673d 7b7d 2c20 636f  e, config={}, co
-00057500: 6e74 6578 743d 7b7d 293a 0a20 2020 2020  ntext={}):.     
-00057510: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-00057520: 6169 7420 7365 6c66 2e66 6574 6368 3228  ait self.fetch2(
-00057530: 7061 7468 2c20 6170 692c 206d 6574 686f  path, api, metho
-00057540: 642c 2070 6172 616d 732c 2068 6561 6465  d, params, heade
-00057550: 7273 2c20 626f 6479 2c20 636f 6e66 6967  rs, body, config
-00057560: 290a 2020 2020 2020 2020 2320 6120 776f  ).        # a wo
-00057570: 726b 6172 6f75 6e64 2066 6f72 207b 2263  rkaround for {"c
-00057580: 6f64 6522 3a2d 3230 3135 2c22 6d73 6722  ode":-2015,"msg"
-00057590: 3a22 496e 7661 6c69 6420 4150 492d 6b65  :"Invalid API-ke
-000575a0: 792c 2049 502c 206f 7220 7065 726d 6973  y, IP, or permis
-000575b0: 7369 6f6e 7320 666f 7220 6163 7469 6f6e  sions for action
-000575c0: 2e22 7d0a 2020 2020 2020 2020 6966 2028  ."}.        if (
-000575d0: 6170 6920 3d3d 2027 7072 6976 6174 6527  api == 'private'
-000575e0: 2920 6f72 2028 6170 6920 3d3d 2027 7761  ) or (api == 'wa
-000575f0: 7069 2729 3a0a 2020 2020 2020 2020 2020  pi'):.          
-00057600: 2020 7365 6c66 2e6f 7074 696f 6e73 5b27    self.options['
-00057610: 6861 7341 6c72 6561 6479 4175 7468 656e  hasAlreadyAuthen
-00057620: 7469 6361 7465 6453 7563 6365 7373 6675  ticatedSuccessfu
-00057630: 6c6c 7927 5d20 3d20 5472 7565 0a20 2020  lly'] = True.   
-00057640: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
-00057650: 6f6e 7365 0a0a 2020 2020 6173 796e 6320  onse..    async 
-00057660: 6465 6620 6d6f 6469 6679 5f6d 6172 6769  def modify_margi
-00057670: 6e5f 6865 6c70 6572 2873 656c 662c 2073  n_helper(self, s
-00057680: 796d 626f 6c3a 2073 7472 2c20 616d 6f75  ymbol: str, amou
-00057690: 6e74 2c20 6164 644f 7252 6564 7563 652c  nt, addOrReduce,
-000576a0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-000576b0: 2020 2020 2023 2075 7365 6420 746f 206d       # used to m
-000576c0: 6f64 6966 7920 6973 6f6c 6174 6564 2070  odify isolated p
-000576d0: 6f73 6974 696f 6e73 0a20 2020 2020 2020  ositions.       
-000576e0: 2064 6566 6175 6c74 5479 7065 203d 2073   defaultType = s
-000576f0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00057700: 7365 6c66 2e6f 7074 696f 6e73 2c20 2764  self.options, 'd
-00057710: 6566 6175 6c74 5479 7065 272c 2027 6675  efaultType', 'fu
-00057720: 7475 7265 2729 0a20 2020 2020 2020 2069  ture').        i
-00057730: 6620 6465 6661 756c 7454 7970 6520 3d3d  f defaultType ==
-00057740: 2027 7370 6f74 273a 0a20 2020 2020 2020   'spot':.       
-00057750: 2020 2020 2064 6566 6175 6c74 5479 7065       defaultType
-00057760: 203d 2027 6675 7475 7265 270a 2020 2020   = 'future'.    
-00057770: 2020 2020 7479 7065 203d 2073 656c 662e      type = self.
-00057780: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
-00057790: 6d73 2c20 2774 7970 6527 2c20 6465 6661  ms, 'type', defa
-000577a0: 756c 7454 7970 6529 0a20 2020 2020 2020  ultType).       
-000577b0: 2069 6620 2874 7970 6520 3d3d 2027 6d61   if (type == 'ma
-000577c0: 7267 696e 2729 206f 7220 2874 7970 6520  rgin') or (type 
-000577d0: 3d3d 2027 7370 6f74 2729 3a0a 2020 2020  == 'spot'):.    
-000577e0: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
-000577f0: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
-00057800: 6964 202b 2027 2061 6464 202f 2072 6564  id + ' add / red
-00057810: 7563 6520 6d61 7267 696e 206f 6e6c 7920  uce margin only 
-00057820: 7375 7070 6f72 7465 6420 7769 7468 2074  supported with t
-00057830: 7970 6520 6675 7475 7265 206f 7220 6465  ype future or de
-00057840: 6c69 7665 7279 2729 0a20 2020 2020 2020  livery').       
-00057850: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-00057860: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00057870: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00057880: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00057890: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
-000578a0: 2073 656c 662e 616d 6f75 6e74 5f74 6f5f   self.amount_to_
-000578b0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-000578c0: 2c20 616d 6f75 6e74 290a 2020 2020 2020  , amount).      
-000578d0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-000578e0: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
-000578f0: 3a20 6164 644f 7252 6564 7563 652c 0a20  : addOrReduce,. 
-00057900: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00057910: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00057920: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-00057930: 616d 6f75 6e74 273a 2061 6d6f 756e 742c  amount': amount,
-00057940: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00057950: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
-00057960: 0a20 2020 2020 2020 2063 6f64 6520 3d20  .        code = 
-00057970: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-00057980: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-00057990: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-000579a0: 7468 6f64 203d 2027 6661 7069 5072 6976  thod = 'fapiPriv
-000579b0: 6174 6550 6f73 7450 6f73 6974 696f 6e4d  atePostPositionM
-000579c0: 6172 6769 6e27 0a20 2020 2020 2020 2020  argin'.         
-000579d0: 2020 2063 6f64 6520 3d20 6d61 726b 6574     code = market
-000579e0: 5b27 7175 6f74 6527 5d0a 2020 2020 2020  ['quote'].      
-000579f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00057a00: 2020 2020 6d65 7468 6f64 203d 2027 6461      method = 'da
-00057a10: 7069 5072 6976 6174 6550 6f73 7450 6f73  piPrivatePostPos
-00057a20: 6974 696f 6e4d 6172 6769 6e27 0a20 2020  itionMargin'.   
-00057a30: 2020 2020 2020 2020 2063 6f64 6520 3d20           code = 
-00057a40: 6d61 726b 6574 5b27 6261 7365 275d 0a20  market['base']. 
-00057a50: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00057a60: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
-00057a70: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
-00057a80: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00057a90: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00057aa0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00057ab0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00057ac0: 2020 2020 2020 2020 2263 6f64 6522 3a20          "code": 
-00057ad0: 3230 302c 0a20 2020 2020 2020 2023 2020  200,.        #  
-00057ae0: 2020 2020 2020 2022 6d73 6722 3a20 2253         "msg": "S
-00057af0: 7563 6365 7373 6675 6c6c 7920 6d6f 6469  uccessfully modi
-00057b00: 6679 2070 6f73 6974 696f 6e20 6d61 7267  fy position marg
-00057b10: 696e 2e22 2c0a 2020 2020 2020 2020 2320  in.",.        # 
-00057b20: 2020 2020 2020 2020 2261 6d6f 756e 7422          "amount"
-00057b30: 3a20 302e 3030 312c 0a20 2020 2020 2020  : 0.001,.       
-00057b40: 2023 2020 2020 2020 2020 2022 7479 7065   #         "type
-00057b50: 223a 2031 0a20 2020 2020 2020 2023 2020  ": 1.        #  
-00057b60: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00057b70: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00057b80: 6c66 2e65 7874 656e 6428 7365 6c66 2e70  lf.extend(self.p
-00057b90: 6172 7365 5f6d 6172 6769 6e5f 6d6f 6469  arse_margin_modi
-00057ba0: 6669 6361 7469 6f6e 2872 6573 706f 6e73  fication(respons
-00057bb0: 652c 206d 6172 6b65 7429 2c20 7b0a 2020  e, market), {.  
-00057bc0: 2020 2020 2020 2020 2020 2763 6f64 6527            'code'
-00057bd0: 3a20 636f 6465 2c0a 2020 2020 2020 2020  : code,.        
-00057be0: 7d29 0a0a 2020 2020 6465 6620 7061 7273  })..    def pars
-00057bf0: 655f 6d61 7267 696e 5f6d 6f64 6966 6963  e_margin_modific
-00057c00: 6174 696f 6e28 7365 6c66 2c20 6461 7461  ation(self, data
-00057c10: 2c20 6d61 726b 6574 3d4e 6f6e 6529 3a0a  , market=None):.
-00057c20: 2020 2020 2020 2020 7261 7754 7970 6520          rawType 
-00057c30: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-00057c40: 6765 7228 6461 7461 2c20 2774 7970 6527  ger(data, 'type'
-00057c50: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
-00057c60: 5479 7065 203d 2027 6164 6427 2069 6620  Type = 'add' if 
-00057c70: 2872 6177 5479 7065 203d 3d20 3129 2065  (rawType == 1) e
-00057c80: 6c73 6520 2772 6564 7563 6527 0a20 2020  lse 'reduce'.   
-00057c90: 2020 2020 2072 6573 756c 7441 6d6f 756e       resultAmoun
-00057ca0: 7420 3d20 7365 6c66 2e73 6166 655f 6e75  t = self.safe_nu
-00057cb0: 6d62 6572 2864 6174 612c 2027 616d 6f75  mber(data, 'amou
-00057cc0: 6e74 2729 0a20 2020 2020 2020 2065 7272  nt').        err
-00057cd0: 6f72 436f 6465 203d 2073 656c 662e 7361  orCode = self.sa
-00057ce0: 6665 5f73 7472 696e 6728 6461 7461 2c20  fe_string(data, 
-00057cf0: 2763 6f64 6527 290a 2020 2020 2020 2020  'code').        
-00057d00: 7374 6174 7573 203d 2027 6f6b 2720 6966  status = 'ok' if
-00057d10: 2028 6572 726f 7243 6f64 6520 3d3d 2027   (errorCode == '
-00057d20: 3230 3027 2920 656c 7365 2027 6661 696c  200') else 'fail
-00057d30: 6564 270a 2020 2020 2020 2020 7265 7475  ed'.        retu
-00057d40: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
-00057d50: 2027 696e 666f 273a 2064 6174 612c 0a20   'info': data,. 
-00057d60: 2020 2020 2020 2020 2020 2027 7479 7065             'type
-00057d70: 273a 2072 6573 756c 7454 7970 652c 0a20  ': resultType,. 
-00057d80: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
-00057d90: 6e74 273a 2072 6573 756c 7441 6d6f 756e  nt': resultAmoun
-00057da0: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
-00057db0: 636f 6465 273a 204e 6f6e 652c 0a20 2020  code': None,.   
-00057dc0: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-00057dd0: 273a 206d 6172 6b65 745b 2773 796d 626f  ': market['symbo
-00057de0: 6c27 5d2c 0a20 2020 2020 2020 2020 2020  l'],.           
-00057df0: 2027 7374 6174 7573 273a 2073 7461 7475   'status': statu
-00057e00: 732c 0a20 2020 2020 2020 207d 0a0a 2020  s,.        }..  
-00057e10: 2020 6173 796e 6320 6465 6620 7265 6475    async def redu
-00057e20: 6365 5f6d 6172 6769 6e28 7365 6c66 2c20  ce_margin(self, 
-00057e30: 7379 6d62 6f6c 3a20 7374 722c 2061 6d6f  symbol: str, amo
-00057e40: 756e 742c 2070 6172 616d 733d 7b7d 293a  unt, params={}):
-00057e50: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00057e60: 2020 2020 2072 656d 6f76 6520 6d61 7267       remove marg
-00057e70: 696e 2066 726f 6d20 6120 706f 7369 7469  in from a positi
-00057e80: 6f6e 0a20 2020 2020 2020 203a 7061 7261  on.        :para
-00057e90: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-00057ea0: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-00057eb0: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
-00057ec0: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
-00057ed0: 2074 6865 2061 6d6f 756e 7420 6f66 206d   the amount of m
-00057ee0: 6172 6769 6e20 746f 2072 656d 6f76 650a  argin to remove.
-00057ef0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-00057f00: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-00057f10: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-00057f20: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
-00057f30: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
-00057f40: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-00057f50: 6e73 2064 6963 743a 2061 2060 6d61 7267  ns dict: a `marg
-00057f60: 696e 2073 7472 7563 7475 7265 203c 6874  in structure <ht
-00057f70: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00057f80: 636f 6d2f 232f 3f69 643d 7265 6475 6365  com/#/?id=reduce
-00057f90: 2d6d 6172 6769 6e2d 7374 7275 6374 7572  -margin-structur
-00057fa0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-00057fb0: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-00057fc0: 7761 6974 2073 656c 662e 6d6f 6469 6679  wait self.modify
-00057fd0: 5f6d 6172 6769 6e5f 6865 6c70 6572 2873  _margin_helper(s
-00057fe0: 796d 626f 6c2c 2061 6d6f 756e 742c 2032  ymbol, amount, 2
-00057ff0: 2c20 7061 7261 6d73 290a 0a20 2020 2061  , params)..    a
-00058000: 7379 6e63 2064 6566 2061 6464 5f6d 6172  sync def add_mar
-00058010: 6769 6e28 7365 6c66 2c20 7379 6d62 6f6c  gin(self, symbol
-00058020: 3a20 7374 722c 2061 6d6f 756e 742c 2070  : str, amount, p
-00058030: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-00058040: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-00058050: 6464 206d 6172 6769 6e0a 2020 2020 2020  dd margin.      
-00058060: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
-00058070: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
-00058080: 6b65 7420 7379 6d62 6f6c 0a20 2020 2020  ket symbol.     
-00058090: 2020 203a 7061 7261 6d20 666c 6f61 7420     :param float 
-000580a0: 616d 6f75 6e74 3a20 616d 6f75 6e74 206f  amount: amount o
-000580b0: 6620 6d61 7267 696e 2074 6f20 6164 640a  f margin to add.
-000580c0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-000580d0: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-000580e0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-000580f0: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
-00058100: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
-00058110: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-00058120: 6e73 2064 6963 743a 2061 2060 6d61 7267  ns dict: a `marg
-00058130: 696e 2073 7472 7563 7475 7265 203c 6874  in structure <ht
-00058140: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00058150: 636f 6d2f 232f 3f69 643d 6164 642d 6d61  com/#/?id=add-ma
-00058160: 7267 696e 2d73 7472 7563 7475 7265 3e60  rgin-structure>`
-00058170: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00058180: 2020 2020 2072 6574 7572 6e20 6177 6169       return awai
-00058190: 7420 7365 6c66 2e6d 6f64 6966 795f 6d61  t self.modify_ma
-000581a0: 7267 696e 5f68 656c 7065 7228 7379 6d62  rgin_helper(symb
-000581b0: 6f6c 2c20 616d 6f75 6e74 2c20 312c 2070  ol, amount, 1, p
-000581c0: 6172 616d 7329 0a0a 2020 2020 6173 796e  arams)..    asyn
-000581d0: 6320 6465 6620 6665 7463 685f 626f 7272  c def fetch_borr
-000581e0: 6f77 5f72 6174 6528 7365 6c66 2c20 636f  ow_rate(self, co
-000581f0: 6465 3a20 7374 722c 2070 6172 616d 733d  de: str, params=
-00058200: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-00058210: 0a20 2020 2020 2020 2066 6574 6368 2074  .        fetch t
-00058220: 6865 2072 6174 6520 6f66 2069 6e74 6572  he rate of inter
-00058230: 6573 7420 746f 2062 6f72 726f 7720 6120  est to borrow a 
-00058240: 6375 7272 656e 6379 2066 6f72 206d 6172  currency for mar
-00058250: 6769 6e20 7472 6164 696e 670a 2020 2020  gin trading.    
-00058260: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-00058270: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-00058280: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-00058290: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-000582a0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-000582b0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-000582c0: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-000582d0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-000582e0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-000582f0: 6374 3a20 6120 6062 6f72 726f 7720 7261  ct: a `borrow ra
-00058300: 7465 2073 7472 7563 7475 7265 203c 6874  te structure <ht
-00058310: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00058320: 636f 6d2f 232f 3f69 643d 626f 7272 6f77  com/#/?id=borrow
-00058330: 2d72 6174 652d 7374 7275 6374 7572 653e  -rate-structure>
-00058340: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
-00058350: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-00058360: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00058370: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-00058380: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
-00058390: 2863 6f64 6529 0a20 2020 2020 2020 2072  (code).        r
-000583a0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-000583b0: 2020 2020 2020 2027 6173 7365 7427 3a20         'asset': 
-000583c0: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
-000583d0: 2020 2020 2020 2020 2020 2020 2320 2776              # 'v
-000583e0: 6970 4c65 7665 6c27 3a20 7365 6c66 2e73  ipLevel': self.s
-000583f0: 6166 655f 696e 7465 6765 7228 7061 7261  afe_integer(para
-00058400: 6d73 2c20 2776 6970 4c65 7665 6c27 292c  ms, 'vipLevel'),
-00058410: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00058420: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-00058430: 6169 7420 7365 6c66 2e73 6170 6947 6574  ait self.sapiGet
-00058440: 4d61 7267 696e 496e 7465 7265 7374 5261  MarginInterestRa
-00058450: 7465 4869 7374 6f72 7928 7365 6c66 2e65  teHistory(self.e
-00058460: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00058470: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00058480: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00058490: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-000584a0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-000584b0: 2020 2020 2020 2020 2020 2020 2261 7373              "ass
-000584c0: 6574 223a 2022 5553 4454 222c 0a20 2020  et": "USDT",.   
-000584d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000584e0: 2020 2022 7469 6d65 7374 616d 7022 3a20     "timestamp": 
-000584f0: 3136 3338 3233 3034 3030 3030 302c 0a20  1638230400000,. 
-00058500: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058510: 2020 2020 2022 6461 696c 7949 6e74 6572       "dailyInter
-00058520: 6573 7452 6174 6522 3a20 2230 2e30 3030  estRate": "0.000
-00058530: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
-00058540: 2020 2020 2020 2020 2020 2276 6970 4c65            "vipLe
-00058550: 7665 6c22 3a20 300a 2020 2020 2020 2020  vel": 0.        
-00058560: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-00058570: 2020 2020 2023 2020 2020 205d 0a20 2020       #     ].   
-00058580: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00058590: 6174 6520 3d20 7365 6c66 2e73 6166 655f  ate = self.safe_
-000585a0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-000585b0: 3029 0a20 2020 2020 2020 2072 6574 7572  0).        retur
-000585c0: 6e20 7365 6c66 2e70 6172 7365 5f62 6f72  n self.parse_bor
-000585d0: 726f 775f 7261 7465 2872 6174 6529 0a0a  row_rate(rate)..
-000585e0: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
-000585f0: 7463 685f 626f 7272 6f77 5f72 6174 655f  tch_borrow_rate_
-00058600: 6869 7374 6f72 7928 7365 6c66 2c20 636f  history(self, co
-00058610: 6465 3a20 7374 722c 2073 696e 6365 3a20  de: str, since: 
-00058620: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-00058630: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-00058640: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-00058650: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00058660: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00058670: 2020 2072 6574 7269 6576 6573 2061 2068     retrieves a h
-00058680: 6973 746f 7279 206f 6620 6120 6375 7272  istory of a curr
-00058690: 656e 6369 6573 2062 6f72 726f 7720 696e  encies borrow in
-000586a0: 7465 7265 7374 2072 6174 6520 6174 2073  terest rate at s
-000586b0: 7065 6369 6669 6320 7469 6d65 2073 6c6f  pecific time slo
-000586c0: 7473 0a20 2020 2020 2020 203a 7061 7261  ts.        :para
-000586d0: 6d20 7374 7220 636f 6465 3a20 756e 6966  m str code: unif
-000586e0: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
-000586f0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00058700: 2069 6e74 7c4e 6f6e 6520 7369 6e63 653a   int|None since:
-00058710: 2074 696d 6573 7461 6d70 2066 6f72 2074   timestamp for t
-00058720: 6865 2065 6172 6c69 6573 7420 626f 7272  he earliest borr
-00058730: 6f77 2072 6174 650a 2020 2020 2020 2020  ow rate.        
-00058740: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
-00058750: 6c69 6d69 743a 2074 6865 206d 6178 696d  limit: the maxim
-00058760: 756d 206e 756d 6265 7220 6f66 2060 626f  um number of `bo
-00058770: 7272 6f77 2072 6174 6520 7374 7275 6374  rrow rate struct
-00058780: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
-00058790: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-000587a0: 643d 626f 7272 6f77 2d72 6174 652d 7374  d=borrow-rate-st
-000587b0: 7275 6374 7572 653e 6020 746f 2072 6574  ructure>` to ret
-000587c0: 7269 6576 650a 2020 2020 2020 2020 3a70  rieve.        :p
-000587d0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
-000587e0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-000587f0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-00058800: 6865 2065 7863 6861 6e67 6520 6170 6920  he exchange api 
-00058810: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00058820: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
-00058830: 3a20 616e 2061 7272 6179 206f 6620 6062  : an array of `b
-00058840: 6f72 726f 7720 7261 7465 2073 7472 7563  orrow rate struc
-00058850: 7475 7265 7320 3c68 7474 7073 3a2f 2f64  tures <https://d
-00058860: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
-00058870: 6964 3d62 6f72 726f 772d 7261 7465 2d73  id=borrow-rate-s
-00058880: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00058890: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-000588a0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-000588b0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-000588c0: 2069 6620 6c69 6d69 7420 6973 204e 6f6e   if limit is Non
-000588d0: 653a 0a20 2020 2020 2020 2020 2020 206c  e:.            l
-000588e0: 696d 6974 203d 2039 330a 2020 2020 2020  imit = 93.      
-000588f0: 2020 656c 6966 206c 696d 6974 203e 2039    elif limit > 9
-00058900: 333a 0a20 2020 2020 2020 2020 2020 2023  3:.            #
-00058910: 2042 696e 616e 6365 2041 5049 2073 6179   Binance API say
-00058920: 7320 7468 6520 6c69 6d69 7420 6973 2031  s the limit is 1
-00058930: 3030 2c20 6275 7420 2249 6c6c 6567 616c  00, but "Illegal
-00058940: 2063 6861 7261 6374 6572 7320 666f 756e   characters foun
-00058950: 6420 696e 2061 2070 6172 616d 6574 6572  d in a parameter
-00058960: 2e22 2069 7320 7265 7475 726e 6564 2077  ." is returned w
-00058970: 6865 6e20 6c69 6d69 7420 6973 203e 2039  hen limit is > 9
-00058980: 330a 2020 2020 2020 2020 2020 2020 7261  3.            ra
-00058990: 6973 6520 4261 6452 6571 7565 7374 2873  ise BadRequest(s
-000589a0: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
-000589b0: 426f 7272 6f77 5261 7465 4869 7374 6f72  BorrowRateHistor
-000589c0: 7928 2920 6c69 6d69 7420 7061 7261 6d65  y() limit parame
-000589d0: 7465 7220 6361 6e6e 6f74 2065 7863 6565  ter cannot excee
-000589e0: 6420 3932 2729 0a20 2020 2020 2020 2063  d 92').        c
-000589f0: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
-00058a00: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
-00058a10: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00058a20: 7b0a 2020 2020 2020 2020 2020 2020 2761  {.            'a
-00058a30: 7373 6574 273a 2063 7572 7265 6e63 795b  sset': currency[
-00058a40: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-00058a50: 2020 2027 6c69 6d69 7427 3a20 6c69 6d69     'limit': limi
-00058a60: 742c 0a20 2020 2020 2020 207d 0a20 2020  t,.        }.   
-00058a70: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
-00058a80: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00058a90: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00058aa0: 7374 6172 7454 696d 6527 5d20 3d20 7369  startTime'] = si
-00058ab0: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
-00058ac0: 656e 6454 696d 6520 3d20 7365 6c66 2e73  endTime = self.s
-00058ad0: 756d 2873 696e 6365 2c20 6c69 6d69 7420  um(since, limit 
-00058ae0: 2a20 3836 3430 3030 3030 2920 2d20 3120  * 86400000) - 1 
-00058af0: 2023 2072 6571 7569 7265 6420 7768 656e   # required when
-00058b00: 2073 7461 7274 5469 6d65 2069 7320 6675   startTime is fu
-00058b10: 7274 6865 7220 7468 616e 2039 3320 6461  rther than 93 da
-00058b20: 7973 2069 6e20 7468 6520 7061 7374 0a20  ys in the past. 
-00058b30: 2020 2020 2020 2020 2020 206e 6f77 203d             now =
-00058b40: 2073 656c 662e 6d69 6c6c 6973 6563 6f6e   self.millisecon
-00058b50: 6473 2829 0a20 2020 2020 2020 2020 2020  ds().           
-00058b60: 2072 6571 7565 7374 5b27 656e 6454 696d   request['endTim
-00058b70: 6527 5d20 3d20 6d69 6e28 656e 6454 696d  e'] = min(endTim
-00058b80: 652c 206e 6f77 2920 2023 2063 616e 6e6f  e, now)  # canno
-00058b90: 7420 6861 7665 2061 6e20 656e 6454 696d  t have an endTim
-00058ba0: 6520 6c61 7465 7220 7468 616e 2063 7572  e later than cur
-00058bb0: 7265 6e74 2074 696d 650a 2020 2020 2020  rent time.      
-00058bc0: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-00058bd0: 6974 2073 656c 662e 7361 7069 4765 744d  it self.sapiGetM
-00058be0: 6172 6769 6e49 6e74 6572 6573 7452 6174  arginInterestRat
-00058bf0: 6548 6973 746f 7279 2873 656c 662e 6578  eHistory(self.ex
-00058c00: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-00058c10: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
-00058c20: 0a20 2020 2020 2020 2023 2020 2020 205b  .        #     [
-00058c30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00058c40: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00058c50: 2020 2020 2020 2020 2020 2022 6173 7365             "asse
-00058c60: 7422 3a20 2255 5344 5422 2c0a 2020 2020  t": "USDT",.    
-00058c70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00058c80: 2020 2274 696d 6573 7461 6d70 223a 2031    "timestamp": 1
-00058c90: 3633 3832 3330 3430 3030 3030 2c0a 2020  638230400000,.  
-00058ca0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00058cb0: 2020 2020 2264 6169 6c79 496e 7465 7265      "dailyIntere
-00058cc0: 7374 5261 7465 223a 2022 302e 3030 3036  stRate": "0.0006
-00058cd0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00058ce0: 2020 2020 2020 2020 2022 7669 704c 6576           "vipLev
-00058cf0: 656c 223a 2030 0a20 2020 2020 2020 2023  el": 0.        #
-00058d00: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-00058d10: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
-00058d20: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-00058d30: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-00058d40: 626f 7272 6f77 5f72 6174 655f 6869 7374  borrow_rate_hist
-00058d50: 6f72 7928 7265 7370 6f6e 7365 2c20 636f  ory(response, co
-00058d60: 6465 2c20 7369 6e63 652c 206c 696d 6974  de, since, limit
-00058d70: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
-00058d80: 5f62 6f72 726f 775f 7261 7465 5f68 6973  _borrow_rate_his
-00058d90: 746f 7279 2873 656c 662c 2072 6573 706f  tory(self, respo
-00058da0: 6e73 652c 2063 6f64 652c 2073 696e 6365  nse, code, since
-00058db0: 2c20 6c69 6d69 7429 3a0a 2020 2020 2020  , limit):.      
-00058dc0: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
-00058dd0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-00058de0: 616e 6765 2830 2c20 6c65 6e28 7265 7370  ange(0, len(resp
-00058df0: 6f6e 7365 2929 3a0a 2020 2020 2020 2020  onse)):.        
-00058e00: 2020 2020 6974 656d 203d 2072 6573 706f      item = respo
-00058e10: 6e73 655b 695d 0a20 2020 2020 2020 2020  nse[i].         
-00058e20: 2020 2062 6f72 726f 7752 6174 6520 3d20     borrowRate = 
-00058e30: 7365 6c66 2e70 6172 7365 5f62 6f72 726f  self.parse_borro
-00058e40: 775f 7261 7465 2869 7465 6d29 0a20 2020  w_rate(item).   
-00058e50: 2020 2020 2020 2020 2072 6573 756c 742e           result.
-00058e60: 6170 7065 6e64 2862 6f72 726f 7752 6174  append(borrowRat
-00058e70: 6529 0a20 2020 2020 2020 2073 6f72 7465  e).        sorte
-00058e80: 6420 3d20 7365 6c66 2e73 6f72 745f 6279  d = self.sort_by
-00058e90: 2872 6573 756c 742c 2027 7469 6d65 7374  (result, 'timest
-00058ea0: 616d 7027 290a 2020 2020 2020 2020 7265  amp').        re
-00058eb0: 7475 726e 2073 656c 662e 6669 6c74 6572  turn self.filter
-00058ec0: 5f62 795f 6375 7272 656e 6379 5f73 696e  _by_currency_sin
-00058ed0: 6365 5f6c 696d 6974 2873 6f72 7465 642c  ce_limit(sorted,
-00058ee0: 2063 6f64 652c 2073 696e 6365 2c20 6c69   code, since, li
-00058ef0: 6d69 7429 0a0a 2020 2020 6465 6620 7061  mit)..    def pa
-00058f00: 7273 655f 626f 7272 6f77 5f72 6174 6528  rse_borrow_rate(
-00058f10: 7365 6c66 2c20 696e 666f 2c20 6375 7272  self, info, curr
-00058f20: 656e 6379 3d4e 6f6e 6529 3a0a 2020 2020  ency=None):.    
-00058f30: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00058f40: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00058f50: 2020 2020 2020 2261 7373 6574 223a 2022        "asset": "
-00058f60: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
-00058f70: 2020 2020 2020 2020 2274 696d 6573 7461          "timesta
-00058f80: 6d70 223a 2031 3633 3832 3330 3430 3030  mp": 16382304000
-00058f90: 3030 2c0a 2020 2020 2020 2020 2320 2020  00,.        #   
-00058fa0: 2020 2020 2022 6461 696c 7949 6e74 6572       "dailyInter
-00058fb0: 6573 7452 6174 6522 3a20 2230 2e30 3030  estRate": "0.000
-00058fc0: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
-00058fd0: 2020 2020 2022 7669 704c 6576 656c 223a       "vipLevel":
-00058fe0: 2030 0a20 2020 2020 2020 2023 2020 2020   0.        #    
-00058ff0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00059000: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
-00059010: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00059020: 2869 6e66 6f2c 2027 7469 6d65 7374 616d  (info, 'timestam
-00059030: 7027 290a 2020 2020 2020 2020 6375 7272  p').        curr
-00059040: 656e 6379 203d 2073 656c 662e 7361 6665  ency = self.safe
-00059050: 5f73 7472 696e 6728 696e 666f 2c20 2761  _string(info, 'a
-00059060: 7373 6574 2729 0a20 2020 2020 2020 2072  sset').        r
-00059070: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
-00059080: 2020 2020 2763 7572 7265 6e63 7927 3a20      'currency': 
-00059090: 7365 6c66 2e73 6166 655f 6375 7272 656e  self.safe_curren
-000590a0: 6379 5f63 6f64 6528 6375 7272 656e 6379  cy_code(currency
-000590b0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-000590c0: 7261 7465 273a 2073 656c 662e 7361 6665  rate': self.safe
-000590d0: 5f6e 756d 6265 7228 696e 666f 2c20 2764  _number(info, 'd
-000590e0: 6169 6c79 496e 7465 7265 7374 5261 7465  ailyInterestRate
-000590f0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-00059100: 2770 6572 696f 6427 3a20 3836 3430 3030  'period': 864000
-00059110: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
-00059120: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
-00059130: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
-00059140: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
-00059150: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
-00059160: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
-00059170: 2020 2020 2027 696e 666f 273a 2069 6e66       'info': inf
-00059180: 6f2c 0a20 2020 2020 2020 207d 0a0a 2020  o,.        }..  
-00059190: 2020 6173 796e 6320 6465 6620 6372 6561    async def crea
-000591a0: 7465 5f67 6966 745f 636f 6465 2873 656c  te_gift_code(sel
-000591b0: 662c 2063 6f64 653a 2073 7472 2c20 616d  f, code: str, am
-000591c0: 6f75 6e74 2c20 7061 7261 6d73 3d7b 7d29  ount, params={})
-000591d0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-000591e0: 2020 2020 2020 6372 6561 7465 2067 6966        create gif
-000591f0: 7420 636f 6465 0a20 2020 2020 2020 203a  t code.        :
-00059200: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
-00059210: 6769 6674 2063 6f64 650a 2020 2020 2020  gift code.      
-00059220: 2020 3a70 6172 616d 2066 6c6f 6174 2061    :param float a
-00059230: 6d6f 756e 743a 2061 6d6f 756e 7420 6f66  mount: amount of
-00059240: 2063 7572 7265 6e63 7920 666f 7220 7468   currency for th
-00059250: 6520 6769 6674 0a20 2020 2020 2020 203a  e gift.        :
-00059260: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-00059270: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-00059280: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00059290: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
-000592a0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-000592b0: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-000592c0: 5468 6520 6769 6674 2063 6f64 6520 6964  The gift code id
-000592d0: 2c20 636f 6465 2c20 6375 7272 656e 6379  , code, currency
-000592e0: 2061 6e64 2061 6d6f 756e 740a 2020 2020   and amount.    
-000592f0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00059300: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-00059310: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00059320: 2020 6375 7272 656e 6379 203d 2073 656c    currency = sel
-00059330: 662e 6375 7272 656e 6379 2863 6f64 6529  f.currency(code)
-00059340: 0a20 2020 2020 2020 2023 2065 6e73 7572  .        # ensur
-00059350: 6520 796f 7520 6861 7665 2065 6e6f 7567  e you have enoug
-00059360: 6820 746f 6b65 6e20 696e 2079 6f75 7220  h token in your 
-00059370: 6675 6e64 696e 6720 6163 636f 756e 7420  funding account 
-00059380: 6265 666f 7265 2063 616c 6c69 6e67 2073  before calling s
-00059390: 656c 6620 636f 6465 0a20 2020 2020 2020  elf code.       
-000593a0: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-000593b0: 2020 2020 2020 2020 2027 746f 6b65 6e27           'token'
-000593c0: 3a20 6375 7272 656e 6379 5b27 6964 275d  : currency['id']
-000593d0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-000593e0: 6d6f 756e 7427 3a20 616d 6f75 6e74 2c0a  mount': amount,.
-000593f0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00059400: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-00059410: 6974 2073 656c 662e 7361 7069 506f 7374  it self.sapiPost
-00059420: 4769 6674 6361 7264 4372 6561 7465 436f  GiftcardCreateCo
-00059430: 6465 2873 656c 662e 6578 7465 6e64 2872  de(self.extend(r
-00059440: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-00059450: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00059460: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-00059470: 2020 2023 2020 2020 2020 2020 2063 6f64     #         cod
-00059480: 653a 2027 3030 3030 3030 272c 0a20 2020  e: '000000',.   
-00059490: 2020 2020 2023 2020 2020 2020 2020 206d       #         m
-000594a0: 6573 7361 6765 3a20 2773 7563 6365 7373  essage: 'success
-000594b0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-000594c0: 2020 2020 2064 6174 613a 207b 7265 6665       data: {refe
-000594d0: 7265 6e63 654e 6f3a 2027 3030 3333 3030  renceNo: '003300
-000594e0: 3234 3034 3231 3938 3233 272c 2063 6f64  2404219823', cod
-000594f0: 653a 2027 4150 3645 5854 4c4b 4e48 4d36  e: 'AP6EXTLKNHM6
-00059500: 4345 5837 277d 2c0a 2020 2020 2020 2020  CEX7'},.        
-00059510: 2320 2020 2020 2020 2020 7375 6363 6573  #         succes
-00059520: 733a 2054 7275 650a 2020 2020 2020 2020  s: True.        
-00059530: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-00059540: 230a 2020 2020 2020 2020 6461 7461 203d  #.        data =
-00059550: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00059560: 2872 6573 706f 6e73 652c 2027 6461 7461  (response, 'data
-00059570: 2729 0a20 2020 2020 2020 2067 6966 7463  ').        giftc
-00059580: 6172 6443 6f64 6520 3d20 7365 6c66 2e73  ardCode = self.s
-00059590: 6166 655f 7374 7269 6e67 2864 6174 612c  afe_string(data,
-000595a0: 2027 636f 6465 2729 0a20 2020 2020 2020   'code').       
-000595b0: 2069 6420 3d20 7365 6c66 2e73 6166 655f   id = self.safe_
-000595c0: 7374 7269 6e67 2864 6174 612c 2027 7265  string(data, 're
-000595d0: 6665 7265 6e63 654e 6f27 290a 2020 2020  ferenceNo').    
-000595e0: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
-000595f0: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-00059600: 2072 6573 706f 6e73 652c 0a20 2020 2020   response,.     
-00059610: 2020 2020 2020 2027 6964 273a 2069 642c         'id': id,
-00059620: 0a20 2020 2020 2020 2020 2020 2027 636f  .            'co
-00059630: 6465 273a 2067 6966 7463 6172 6443 6f64  de': giftcardCod
-00059640: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00059650: 6375 7272 656e 6379 273a 2063 6f64 652c  currency': code,
-00059660: 0a20 2020 2020 2020 2020 2020 2027 616d  .            'am
-00059670: 6f75 6e74 273a 2061 6d6f 756e 742c 0a20  ount': amount,. 
-00059680: 2020 2020 2020 207d 0a0a 2020 2020 6173         }..    as
-00059690: 796e 6320 6465 6620 7265 6465 656d 5f67  ync def redeem_g
-000596a0: 6966 745f 636f 6465 2873 656c 662c 2067  ift_code(self, g
-000596b0: 6966 7463 6172 6443 6f64 652c 2070 6172  iftcardCode, par
-000596c0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-000596d0: 2022 2222 0a20 2020 2020 2020 2072 6564   """.        red
-000596e0: 6565 6d20 6769 6674 2063 6f64 650a 2020  eem gift code.  
-000596f0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00059700: 2067 6966 7463 6172 6443 6f64 653a 0a20   giftcardCode:. 
-00059710: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-00059720: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-00059730: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-00059740: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
-00059750: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
-00059760: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00059770: 7320 6469 6374 3a20 7265 7370 6f6e 7365  s dict: response
-00059780: 2066 726f 6d20 7468 6520 6578 6368 616e   from the exchan
-00059790: 6765 0a20 2020 2020 2020 2022 2222 0a20  ge.        """. 
-000597a0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-000597b0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-000597c0: 636f 6465 273a 2067 6966 7463 6172 6443  code': giftcardC
-000597d0: 6f64 652c 0a20 2020 2020 2020 207d 0a20  ode,.        }. 
-000597e0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000597f0: 3d20 6177 6169 7420 7365 6c66 2e73 6170  = await self.sap
-00059800: 6950 6f73 7447 6966 7463 6172 6452 6564  iPostGiftcardRed
-00059810: 6565 6d43 6f64 6528 7365 6c66 2e65 7874  eemCode(self.ext
-00059820: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00059830: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00059840: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00059850: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00059860: 2020 636f 6465 3a20 2730 3030 3030 3027    code: '000000'
-00059870: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00059880: 2020 2020 6d65 7373 6167 653a 2027 7375      message: 'su
-00059890: 6363 6573 7327 2c0a 2020 2020 2020 2020  ccess',.        
-000598a0: 2320 2020 2020 2020 2020 6461 7461 3a20  #         data: 
-000598b0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000598c0: 2020 2020 2020 2020 7265 6665 7265 6e63          referenc
-000598d0: 654e 6f3a 2027 3030 3333 3030 3234 3034  eNo: '0033002404
-000598e0: 3231 3938 3233 272c 0a20 2020 2020 2020  219823',.       
-000598f0: 2023 2020 2020 2020 2020 2020 2020 2069   #             i
-00059900: 6465 6e74 6974 794e 6f3a 2027 3130 3331  dentityNo: '1031
-00059910: 3634 3331 3733 3238 3031 3437 3435 3630  6431732801474560
-00059920: 270a 2020 2020 2020 2020 2320 2020 2020  '.        #     
-00059930: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-00059940: 2020 2020 2020 2020 2073 7563 6365 7373           success
-00059950: 3a20 5472 7565 0a20 2020 2020 2020 2023  : True.        #
-00059960: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-00059970: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00059980: 7265 7370 6f6e 7365 0a0a 2020 2020 6173  response..    as
-00059990: 796e 6320 6465 6620 7665 7269 6679 5f67  ync def verify_g
-000599a0: 6966 745f 636f 6465 2873 656c 662c 2069  ift_code(self, i
-000599b0: 643a 2073 7472 2c20 7061 7261 6d73 3d7b  d: str, params={
-000599c0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-000599d0: 2020 2020 2020 2020 7665 7269 6679 2067          verify g
-000599e0: 6966 7420 636f 6465 0a20 2020 2020 2020  ift code.       
-000599f0: 203a 7061 7261 6d20 7374 7220 6964 3a20   :param str id: 
-00059a00: 7265 6665 7265 6e63 6520 6e75 6d62 6572  reference number
-00059a10: 2069 640a 2020 2020 2020 2020 3a70 6172   id.        :par
-00059a20: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-00059a30: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-00059a40: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-00059a50: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
-00059a60: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-00059a70: 6574 7572 6e73 2064 6963 743a 2072 6573  eturns dict: res
-00059a80: 706f 6e73 6520 6672 6f6d 2074 6865 2065  ponse from the e
-00059a90: 7863 6861 6e67 650a 2020 2020 2020 2020  xchange.        
-00059aa0: 2222 220a 2020 2020 2020 2020 7265 7175  """.        requ
-00059ab0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00059ac0: 2020 2020 2772 6566 6572 656e 6365 4e6f      'referenceNo
-00059ad0: 273a 2069 642c 0a20 2020 2020 2020 207d  ': id,.        }
-00059ae0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00059af0: 6520 3d20 6177 6169 7420 7365 6c66 2e73  e = await self.s
-00059b00: 6170 6947 6574 4769 6674 6361 7264 5665  apiGetGiftcardVe
-00059b10: 7269 6679 2873 656c 662e 6578 7465 6e64  rify(self.extend
-00059b20: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00059b30: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-00059b40: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00059b50: 2020 2020 2023 2020 2020 2020 2020 2063       #         c
-00059b60: 6f64 653a 2027 3030 3030 3030 272c 0a20  ode: '000000',. 
-00059b70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00059b80: 206d 6573 7361 6765 3a20 2773 7563 6365   message: 'succe
-00059b90: 7373 272c 0a20 2020 2020 2020 2023 2020  ss',.        #  
-00059ba0: 2020 2020 2020 2064 6174 613a 207b 7661         data: {va
-00059bb0: 6c69 643a 2054 7275 657d 2c0a 2020 2020  lid: True},.    
-00059bc0: 2020 2020 2320 2020 2020 2020 2020 7375      #         su
-00059bd0: 6363 6573 733a 2054 7275 650a 2020 2020  ccess: True.    
-00059be0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-00059bf0: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-00059c00: 7475 726e 2072 6573 706f 6e73 650a 0a20  turn response.. 
-00059c10: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
-00059c20: 6368 5f62 6f72 726f 775f 696e 7465 7265  ch_borrow_intere
-00059c30: 7374 2873 656c 662c 2063 6f64 653a 204f  st(self, code: O
-00059c40: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00059c50: 6f6e 652c 2073 796d 626f 6c3a 204f 7074  one, symbol: Opt
-00059c60: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00059c70: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
-00059c80: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-00059c90: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
-00059ca0: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
-00059cb0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-00059cc0: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-00059cd0: 6368 2074 6865 2069 6e74 6572 6573 7420  ch the interest 
-00059ce0: 6f77 6564 2062 7920 7468 6520 7573 6572  owed by the user
-00059cf0: 2066 6f72 2062 6f72 726f 7769 6e67 2063   for borrowing c
-00059d00: 7572 7265 6e63 7920 666f 7220 6d61 7267  urrency for marg
-00059d10: 696e 2074 7261 6469 6e67 0a20 2020 2020  in trading.     
-00059d20: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-00059d30: 6e65 2063 6f64 653a 2075 6e69 6669 6564  ne code: unified
-00059d40: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
-00059d50: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00059d60: 727c 4e6f 6e65 2073 796d 626f 6c3a 2075  r|None symbol: u
-00059d70: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
-00059d80: 6d62 6f6c 2077 6865 6e20 6665 7463 6820  mbol when fetch 
-00059d90: 696e 7465 7265 7374 2069 6e20 6973 6f6c  interest in isol
-00059da0: 6174 6564 206d 6172 6b65 7473 0a20 2020  ated markets.   
-00059db0: 2020 2020 203a 7061 7261 6d20 696e 747c       :param int|
-00059dc0: 4e6f 6e65 2073 696e 6365 3a20 7468 6520  None since: the 
-00059dd0: 6561 726c 6965 7374 2074 696d 6520 696e  earliest time in
-00059de0: 206d 7320 746f 2066 6574 6368 2062 6f72   ms to fetch bor
-00059df0: 7272 6f77 2069 6e74 6572 6573 7420 666f  rrow interest fo
-00059e00: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-00059e10: 2069 6e74 7c4e 6f6e 6520 6c69 6d69 743a   int|None limit:
-00059e20: 2074 6865 206d 6178 696d 756d 206e 756d   the maximum num
-00059e30: 6265 7220 6f66 2073 7472 7563 7475 7265  ber of structure
-00059e40: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
-00059e50: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-00059e60: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
-00059e70: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-00059e80: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
-00059e90: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
-00059ea0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-00059eb0: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
-00059ec0: 6f66 2060 626f 7272 6f77 2069 6e74 6572  of `borrow inter
-00059ed0: 6573 7420 7374 7275 6374 7572 6573 203c  est structures <
-00059ee0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00059ef0: 742e 636f 6d2f 232f 3f69 643d 626f 7272  t.com/#/?id=borr
-00059f00: 6f77 2d69 6e74 6572 6573 742d 7374 7275  ow-interest-stru
-00059f10: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00059f20: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
-00059f30: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-00059f40: 6574 7328 290a 2020 2020 2020 2020 7265  ets().        re
-00059f50: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
-00059f60: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
-00059f70: 0a20 2020 2020 2020 2069 6620 636f 6465  .        if code
-00059f80: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00059f90: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00059fa0: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
-00059fb0: 6379 2863 6f64 6529 0a20 2020 2020 2020  cy(code).       
-00059fc0: 2020 2020 2072 6571 7565 7374 5b27 6173       request['as
-00059fd0: 7365 7427 5d20 3d20 6375 7272 656e 6379  set'] = currency
-00059fe0: 5b27 6964 275d 0a20 2020 2020 2020 2069  ['id'].        i
-00059ff0: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
-0005a000: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0005a010: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
-0005a020: 696d 6527 5d20 3d20 7369 6e63 650a 2020  ime'] = since.  
-0005a030: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
-0005a040: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0005a050: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0005a060: 2773 697a 6527 5d20 3d20 6c69 6d69 740a  'size'] = limit.
-0005a070: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-0005a080: 6c20 6973 206e 6f74 204e 6f6e 653a 2020  l is not None:  
-0005a090: 2320 4973 6f6c 6174 6564 0a20 2020 2020  # Isolated.     
-0005a0a0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-0005a0b0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-0005a0c0: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
-0005a0d0: 7265 7175 6573 745b 2769 736f 6c61 7465  request['isolate
-0005a0e0: 6453 796d 626f 6c27 5d20 3d20 6d61 726b  dSymbol'] = mark
-0005a0f0: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-0005a100: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-0005a110: 7420 7365 6c66 2e73 6170 6947 6574 4d61  t self.sapiGetMa
-0005a120: 7267 696e 496e 7465 7265 7374 4869 7374  rginInterestHist
-0005a130: 6f72 7928 7365 6c66 2e65 7874 656e 6428  ory(self.extend(
-0005a140: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0005a150: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0005a160: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0005a170: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005a180: 6f77 7322 3a5b 0a20 2020 2020 2020 2023  ows":[.        #
-0005a190: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0005a1a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005a1b0: 2020 2020 2020 2020 2022 6973 6f6c 6174           "isolat
-0005a1c0: 6564 5379 6d62 6f6c 223a 2022 424e 4255  edSymbol": "BNBU
-0005a1d0: 5344 5422 2c20 2023 2069 736f 6c61 7465  SDT",  # isolate
-0005a1e0: 6420 7379 6d62 6f6c 2c20 7769 6c6c 206e  d symbol, will n
-0005a1f0: 6f74 2062 6520 7265 7475 726e 6564 2066  ot be returned f
-0005a200: 6f72 2063 726f 7373 6564 206d 6172 6769  or crossed margi
-0005a210: 6e0a 2020 2020 2020 2020 2320 2020 2020  n.        #     
-0005a220: 2020 2020 2020 2020 2020 2020 2261 7373              "ass
-0005a230: 6574 223a 2022 424e 4222 2c0a 2020 2020  et": "BNB",.    
-0005a240: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0005a250: 2020 2020 2020 2269 6e74 6572 6573 7422        "interest"
-0005a260: 3a20 2230 2e30 3234 3134 3636 3722 2c0a  : "0.02414667",.
-0005a270: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005a280: 2020 2020 2020 2020 2020 2269 6e74 6572            "inter
-0005a290: 6573 7441 6363 7572 6564 5469 6d65 223a  estAccuredTime":
-0005a2a0: 2031 3536 3638 3133 3630 3030 3030 2c0a   1566813600000,.
-0005a2b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005a2c0: 2020 2020 2020 2020 2020 2269 6e74 6572            "inter
-0005a2d0: 6573 7452 6174 6522 3a20 2230 2e30 3136  estRate": "0.016
-0005a2e0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0005a2f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0005a300: 2020 2270 7269 6e63 6970 616c 223a 2022    "principal": "
-0005a310: 3336 2e32 3230 3030 3030 3022 2c0a 2020  36.22000000",.  
-0005a320: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005a330: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
-0005a340: 224f 4e5f 424f 5252 4f57 220a 2020 2020  "ON_BORROW".    
-0005a350: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0005a360: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-0005a370: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
-0005a380: 2023 2020 2020 2020 2020 2022 746f 7461   #         "tota
-0005a390: 6c22 3a20 310a 2020 2020 2020 2020 2320  l": 1.        # 
-0005a3a0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-0005a3b0: 2020 2020 2020 2020 726f 7773 203d 2073          rows = s
-0005a3c0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-0005a3d0: 6573 706f 6e73 652c 2027 726f 7773 2729  esponse, 'rows')
-0005a3e0: 0a20 2020 2020 2020 2069 6e74 6572 6573  .        interes
-0005a3f0: 7420 3d20 7365 6c66 2e70 6172 7365 5f62  t = self.parse_b
-0005a400: 6f72 726f 775f 696e 7465 7265 7374 7328  orrow_interests(
-0005a410: 726f 7773 2c20 6d61 726b 6574 290a 2020  rows, market).  
-0005a420: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0005a430: 662e 6669 6c74 6572 5f62 795f 6375 7272  f.filter_by_curr
-0005a440: 656e 6379 5f73 696e 6365 5f6c 696d 6974  ency_since_limit
-0005a450: 2869 6e74 6572 6573 742c 2063 6f64 652c  (interest, code,
-0005a460: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
-0005a470: 2020 2020 6465 6620 7061 7273 655f 626f      def parse_bo
-0005a480: 7272 6f77 5f69 6e74 6572 6573 7428 7365  rrow_interest(se
-0005a490: 6c66 2c20 696e 666f 2c20 6d61 726b 6574  lf, info, market
-0005a4a0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0005a4b0: 7379 6d62 6f6c 203d 2073 656c 662e 7361  symbol = self.sa
-0005a4c0: 6665 5f73 7472 696e 6728 696e 666f 2c20  fe_string(info, 
-0005a4d0: 2769 736f 6c61 7465 6453 796d 626f 6c27  'isolatedSymbol'
-0005a4e0: 290a 2020 2020 2020 2020 7469 6d65 7374  ).        timest
-0005a4f0: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-0005a500: 6e75 6d62 6572 2869 6e66 6f2c 2027 696e  number(info, 'in
-0005a510: 7465 7265 7374 4163 6375 7265 6454 696d  terestAccuredTim
-0005a520: 6527 290a 2020 2020 2020 2020 6d61 7267  e').        marg
-0005a530: 696e 4d6f 6465 203d 2027 6372 6f73 7327  inMode = 'cross'
-0005a540: 2069 6620 2873 796d 626f 6c20 6973 204e   if (symbol is N
-0005a550: 6f6e 6529 2065 6c73 6520 2769 736f 6c61  one) else 'isola
-0005a560: 7465 6427 0a20 2020 2020 2020 2072 6574  ted'.        ret
-0005a570: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
-0005a580: 2020 2761 6363 6f75 6e74 273a 2027 6372    'account': 'cr
-0005a590: 6f73 7327 2069 6620 2873 796d 626f 6c20  oss' if (symbol 
-0005a5a0: 6973 204e 6f6e 6529 2065 6c73 6520 7379  is None) else sy
-0005a5b0: 6d62 6f6c 2c0a 2020 2020 2020 2020 2020  mbol,.          
-0005a5c0: 2020 2773 796d 626f 6c27 3a20 7379 6d62    'symbol': symb
-0005a5d0: 6f6c 2c0a 2020 2020 2020 2020 2020 2020  ol,.            
-0005a5e0: 276d 6172 6769 6e4d 6f64 6527 3a20 6d61  'marginMode': ma
-0005a5f0: 7267 696e 4d6f 6465 2c0a 2020 2020 2020  rginMode,.      
-0005a600: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
-0005a610: 3a20 7365 6c66 2e73 6166 655f 6375 7272  : self.safe_curr
-0005a620: 656e 6379 5f63 6f64 6528 7365 6c66 2e73  ency_code(self.s
-0005a630: 6166 655f 7374 7269 6e67 2869 6e66 6f2c  afe_string(info,
-0005a640: 2027 6173 7365 7427 2929 2c0a 2020 2020   'asset')),.    
-0005a650: 2020 2020 2020 2020 2769 6e74 6572 6573          'interes
-0005a660: 7427 3a20 7365 6c66 2e73 6166 655f 6e75  t': self.safe_nu
-0005a670: 6d62 6572 2869 6e66 6f2c 2027 696e 7465  mber(info, 'inte
-0005a680: 7265 7374 2729 2c0a 2020 2020 2020 2020  rest'),.        
-0005a690: 2020 2020 2769 6e74 6572 6573 7452 6174      'interestRat
-0005a6a0: 6527 3a20 7365 6c66 2e73 6166 655f 6e75  e': self.safe_nu
-0005a6b0: 6d62 6572 2869 6e66 6f2c 2027 696e 7465  mber(info, 'inte
-0005a6c0: 7265 7374 5261 7465 2729 2c0a 2020 2020  restRate'),.    
-0005a6d0: 2020 2020 2020 2020 2761 6d6f 756e 7442          'amountB
-0005a6e0: 6f72 726f 7765 6427 3a20 7365 6c66 2e73  orrowed': self.s
-0005a6f0: 6166 655f 6e75 6d62 6572 2869 6e66 6f2c  afe_number(info,
-0005a700: 2027 7072 696e 6369 7061 6c27 292c 0a20   'principal'),. 
-0005a710: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-0005a720: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
-0005a730: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
-0005a740: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
-0005a750: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
-0005a760: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
-0005a770: 2769 6e66 6f27 3a20 696e 666f 2c0a 2020  'info': info,.  
-0005a780: 2020 2020 2020 7d0a 0a20 2020 2061 7379        }..    asy
-0005a790: 6e63 2064 6566 2072 6570 6179 5f6d 6172  nc def repay_mar
-0005a7a0: 6769 6e28 7365 6c66 2c20 636f 6465 3a20  gin(self, code: 
-0005a7b0: 7374 722c 2061 6d6f 756e 742c 2073 796d  str, amount, sym
-0005a7c0: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-0005a7d0: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
-0005a7e0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0005a7f0: 2222 0a20 2020 2020 2020 2072 6570 6179  "".        repay
-0005a800: 2062 6f72 726f 7765 6420 6d61 7267 696e   borrowed margin
-0005a810: 2061 6e64 2069 6e74 6572 6573 740a 2020   and interest.  
-0005a820: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
-0005a830: 2f2f 6269 6e61 6e63 652d 646f 6373 2e67  //binance-docs.g
-0005a840: 6974 6875 622e 696f 2f61 7069 646f 6373  ithub.io/apidocs
-0005a850: 2f73 706f 742f 656e 2f23 6d61 7267 696e  /spot/en/#margin
-0005a860: 2d61 6363 6f75 6e74 2d72 6570 6179 2d6d  -account-repay-m
-0005a870: 6172 6769 6e0a 2020 2020 2020 2020 3a70  argin.        :p
-0005a880: 6172 616d 2073 7472 2063 6f64 653a 2075  aram str code: u
-0005a890: 6e69 6669 6564 2063 7572 7265 6e63 7920  nified currency 
-0005a8a0: 636f 6465 206f 6620 7468 6520 6375 7272  code of the curr
-0005a8b0: 656e 6379 2074 6f20 7265 7061 790a 2020  ency to repay.  
-0005a8c0: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
-0005a8d0: 6174 2061 6d6f 756e 743a 2074 6865 2061  at amount: the a
-0005a8e0: 6d6f 756e 7420 746f 2072 6570 6179 0a20  mount to repay. 
-0005a8f0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0005a900: 727c 4e6f 6e65 2073 796d 626f 6c3a 2075  r|None symbol: u
-0005a910: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
-0005a920: 6d62 6f6c 2c20 7265 7175 6972 6564 2066  mbol, required f
-0005a930: 6f72 2069 736f 6c61 7465 6420 6d61 7267  or isolated marg
-0005a940: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-0005a950: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-0005a960: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-0005a970: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-0005a980: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
-0005a990: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-0005a9a0: 7475 726e 7320 6469 6374 3a20 6120 606d  turns dict: a `m
-0005a9b0: 6172 6769 6e20 6c6f 616e 2073 7472 7563  argin loan struc
-0005a9c0: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-0005a9d0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-0005a9e0: 643d 6d61 7267 696e 2d6c 6f61 6e2d 7374  d=margin-loan-st
-0005a9f0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-0005aa00: 2020 2222 220a 2020 2020 2020 2020 6d61    """.        ma
-0005aa10: 7267 696e 4d6f 6465 2c20 7175 6572 7920  rginMode, query 
-0005aa20: 3d20 7365 6c66 2e68 616e 646c 655f 6d61  = self.handle_ma
-0005aa30: 7267 696e 5f6d 6f64 655f 616e 645f 7061  rgin_mode_and_pa
-0005aa40: 7261 6d73 2827 7265 7061 794d 6172 6769  rams('repayMargi
-0005aa50: 6e27 2c20 7061 7261 6d73 2920 2023 2063  n', params)  # c
-0005aa60: 726f 7373 206f 7220 6973 6f6c 6174 6564  ross or isolated
-0005aa70: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
-0005aa80: 6563 6b5f 7265 7175 6972 6564 5f6d 6172  eck_required_mar
-0005aa90: 6769 6e5f 6172 6775 6d65 6e74 2827 7265  gin_argument('re
-0005aaa0: 7061 794d 6172 6769 6e27 2c20 7379 6d62  payMargin', symb
-0005aab0: 6f6c 2c20 6d61 7267 696e 4d6f 6465 290a  ol, marginMode).
-0005aac0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-0005aad0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-0005aae0: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
-0005aaf0: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
-0005ab00: 6379 2863 6f64 6529 0a20 2020 2020 2020  cy(code).       
-0005ab10: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-0005ab20: 2020 2020 2020 2020 2027 6173 7365 7427           'asset'
-0005ab30: 3a20 6375 7272 656e 6379 5b27 6964 275d  : currency['id']
-0005ab40: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-0005ab50: 6d6f 756e 7427 3a20 7365 6c66 2e63 7572  mount': self.cur
-0005ab60: 7265 6e63 795f 746f 5f70 7265 6369 7369  rency_to_precisi
-0005ab70: 6f6e 2863 6f64 652c 2061 6d6f 756e 7429  on(code, amount)
-0005ab80: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-0005ab90: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
-0005aba0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0005abb0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-0005abc0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-0005abd0: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
-0005abe0: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
-0005abf0: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
-0005ac00: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0005ac10: 7565 7374 5b27 6973 4973 6f6c 6174 6564  uest['isIsolated
-0005ac20: 275d 203d 2027 5452 5545 270a 2020 2020  '] = 'TRUE'.    
-0005ac30: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-0005ac40: 7761 6974 2073 656c 662e 7361 7069 506f  wait self.sapiPo
-0005ac50: 7374 4d61 7267 696e 5265 7061 7928 7365  stMarginRepay(se
-0005ac60: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-0005ac70: 742c 2071 7565 7279 2929 0a20 2020 2020  t, query)).     
-0005ac80: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0005ac90: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0005aca0: 2020 2020 2020 2022 7472 616e 4964 223a         "tranId":
-0005acb0: 2031 3038 3938 3832 3530 3236 352c 0a20   108988250265,. 
-0005acc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005acd0: 2022 636c 6965 6e74 5461 6722 3a22 220a   "clientTag":"".
-0005ace0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0005acf0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0005ad00: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-0005ad10: 7273 655f 6d61 7267 696e 5f6c 6f61 6e28  rse_margin_loan(
-0005ad20: 7265 7370 6f6e 7365 2c20 6375 7272 656e  response, curren
-0005ad30: 6379 290a 0a20 2020 2061 7379 6e63 2064  cy)..    async d
-0005ad40: 6566 2062 6f72 726f 775f 6d61 7267 696e  ef borrow_margin
-0005ad50: 2873 656c 662c 2063 6f64 653a 2073 7472  (self, code: str
-0005ad60: 2c20 616d 6f75 6e74 2c20 7379 6d62 6f6c  , amount, symbol
-0005ad70: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-0005ad80: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-0005ad90: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0005ada0: 2020 2020 2020 2020 6372 6561 7465 2061          create a
-0005adb0: 206c 6f61 6e20 746f 2062 6f72 726f 7720   loan to borrow 
-0005adc0: 6d61 7267 696e 0a20 2020 2020 2020 2073  margin.        s
-0005add0: 6565 2068 7474 7073 3a2f 2f62 696e 616e  ee https://binan
-0005ade0: 6365 2d64 6f63 732e 6769 7468 7562 2e69  ce-docs.github.i
-0005adf0: 6f2f 6170 6964 6f63 732f 7370 6f74 2f65  o/apidocs/spot/e
-0005ae00: 6e2f 236d 6172 6769 6e2d 6163 636f 756e  n/#margin-accoun
-0005ae10: 742d 626f 7272 6f77 2d6d 6172 6769 6e0a  t-borrow-margin.
-0005ae20: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0005ae30: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
-0005ae40: 2063 7572 7265 6e63 7920 636f 6465 206f   currency code o
-0005ae50: 6620 7468 6520 6375 7272 656e 6379 2074  f the currency t
-0005ae60: 6f20 626f 7272 6f77 0a20 2020 2020 2020  o borrow.       
-0005ae70: 203a 7061 7261 6d20 666c 6f61 7420 616d   :param float am
-0005ae80: 6f75 6e74 3a20 7468 6520 616d 6f75 6e74  ount: the amount
-0005ae90: 2074 6f20 626f 7272 6f77 0a20 2020 2020   to borrow.     
-0005aea0: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-0005aeb0: 6e65 2073 796d 626f 6c3a 2075 6e69 6669  ne symbol: unifi
-0005aec0: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
-0005aed0: 2c20 7265 7175 6972 6564 2066 6f72 2069  , required for i
-0005aee0: 736f 6c61 7465 6420 6d61 7267 696e 0a20  solated margin. 
-0005aef0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-0005af00: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-0005af10: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-0005af20: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
-0005af30: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
-0005af40: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-0005af50: 7320 6469 6374 3a20 6120 606d 6172 6769  s dict: a `margi
-0005af60: 6e20 6c6f 616e 2073 7472 7563 7475 7265  n loan structure
-0005af70: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0005af80: 6378 742e 636f 6d2f 232f 3f69 643d 6d61  cxt.com/#/?id=ma
-0005af90: 7267 696e 2d6c 6f61 6e2d 7374 7275 6374  rgin-loan-struct
-0005afa0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-0005afb0: 220a 2020 2020 2020 2020 6d61 7267 696e  ".        margin
-0005afc0: 4d6f 6465 2c20 7175 6572 7920 3d20 7365  Mode, query = se
-0005afd0: 6c66 2e68 616e 646c 655f 6d61 7267 696e  lf.handle_margin
-0005afe0: 5f6d 6f64 655f 616e 645f 7061 7261 6d73  _mode_and_params
-0005aff0: 2827 626f 7272 6f77 4d61 7267 696e 272c  ('borrowMargin',
-0005b000: 2070 6172 616d 7329 2020 2320 6372 6f73   params)  # cros
-0005b010: 7320 6f72 2069 736f 6c61 7465 640a 2020  s or isolated.  
-0005b020: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
-0005b030: 5f72 6571 7569 7265 645f 6d61 7267 696e  _required_margin
-0005b040: 5f61 7267 756d 656e 7428 2762 6f72 726f  _argument('borro
-0005b050: 774d 6172 6769 6e27 2c20 7379 6d62 6f6c  wMargin', symbol
-0005b060: 2c20 6d61 7267 696e 4d6f 6465 290a 2020  , marginMode).  
-0005b070: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-0005b080: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-0005b090: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-0005b0a0: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
-0005b0b0: 2863 6f64 6529 0a20 2020 2020 2020 2072  (code).        r
-0005b0c0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-0005b0d0: 2020 2020 2020 2027 6173 7365 7427 3a20         'asset': 
-0005b0e0: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
-0005b0f0: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
-0005b100: 756e 7427 3a20 7365 6c66 2e63 7572 7265  unt': self.curre
-0005b110: 6e63 795f 746f 5f70 7265 6369 7369 6f6e  ncy_to_precision
-0005b120: 2863 6f64 652c 2061 6d6f 756e 7429 2c0a  (code, amount),.
-0005b130: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0005b140: 2020 6966 2073 796d 626f 6c20 6973 206e    if symbol is n
-0005b150: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0005b160: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-0005b170: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-0005b180: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-0005b190: 7175 6573 745b 2773 796d 626f 6c27 5d20  quest['symbol'] 
-0005b1a0: 3d20 6d61 726b 6574 5b27 6964 275d 0a20  = market['id']. 
-0005b1b0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0005b1c0: 7374 5b27 6973 4973 6f6c 6174 6564 275d  st['isIsolated']
-0005b1d0: 203d 2027 5452 5545 270a 2020 2020 2020   = 'TRUE'.      
-0005b1e0: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-0005b1f0: 6974 2073 656c 662e 7361 7069 506f 7374  it self.sapiPost
-0005b200: 4d61 7267 696e 4c6f 616e 2873 656c 662e  MarginLoan(self.
-0005b210: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-0005b220: 7175 6572 7929 290a 2020 2020 2020 2020  query)).        
-0005b230: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-0005b240: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0005b250: 2020 2020 2274 7261 6e49 6422 3a20 3130      "tranId": 10
-0005b260: 3839 3838 3235 3032 3635 2c0a 2020 2020  8988250265,.    
-0005b270: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-0005b280: 6c69 656e 7454 6167 223a 2222 0a20 2020  lientTag":"".   
-0005b290: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0005b2a0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-0005b2b0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-0005b2c0: 5f6d 6172 6769 6e5f 6c6f 616e 2872 6573  _margin_loan(res
-0005b2d0: 706f 6e73 652c 2063 7572 7265 6e63 7929  ponse, currency)
-0005b2e0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-0005b2f0: 6d61 7267 696e 5f6c 6f61 6e28 7365 6c66  margin_loan(self
-0005b300: 2c20 696e 666f 2c20 6375 7272 656e 6379  , info, currency
-0005b310: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0005b320: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-0005b330: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0005b340: 2020 2020 2274 7261 6e49 6422 3a20 3130      "tranId": 10
-0005b350: 3839 3838 3235 3032 3635 2c0a 2020 2020  8988250265,.    
-0005b360: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-0005b370: 6c69 656e 7454 6167 223a 2222 0a20 2020  lientTag":"".   
-0005b380: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0005b390: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-0005b3a0: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
-0005b3b0: 2020 2020 2769 6427 3a20 7365 6c66 2e73      'id': self.s
-0005b3c0: 6166 655f 696e 7465 6765 7228 696e 666f  afe_integer(info
-0005b3d0: 2c20 2774 7261 6e49 6427 292c 0a20 2020  , 'tranId'),.   
-0005b3e0: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
-0005b3f0: 6379 273a 2073 656c 662e 7361 6665 5f63  cy': self.safe_c
-0005b400: 7572 7265 6e63 795f 636f 6465 284e 6f6e  urrency_code(Non
-0005b410: 652c 2063 7572 7265 6e63 7929 2c0a 2020  e, currency),.  
-0005b420: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
-0005b430: 7427 3a20 4e6f 6e65 2c0a 2020 2020 2020  t': None,.      
-0005b440: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-0005b450: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-0005b460: 2020 2774 696d 6573 7461 6d70 273a 204e    'timestamp': N
-0005b470: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-0005b480: 2027 6461 7465 7469 6d65 273a 204e 6f6e   'datetime': Non
-0005b490: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0005b4a0: 696e 666f 273a 2069 6e66 6f2c 0a20 2020  info': info,.   
-0005b4b0: 2020 2020 207d 0a0a 2020 2020 6173 796e       }..    asyn
-0005b4c0: 6320 6465 6620 6665 7463 685f 6f70 656e  c def fetch_open
-0005b4d0: 5f69 6e74 6572 6573 745f 6869 7374 6f72  _interest_histor
-0005b4e0: 7928 7365 6c66 2c20 7379 6d62 6f6c 3a20  y(self, symbol: 
-0005b4f0: 7374 722c 2074 696d 6566 7261 6d65 3d27  str, timeframe='
-0005b500: 356d 272c 2073 696e 6365 3a20 4f70 7469  5m', since: Opti
-0005b510: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-0005b520: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
-0005b530: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
-0005b540: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-0005b550: 2020 2022 2222 0a20 2020 2020 2020 2052     """.        R
-0005b560: 6574 7269 6576 6573 2074 6865 206f 7065  etrieves the ope
-0005b570: 6e20 696e 7465 7265 7374 2068 6973 746f  n interest histo
-0005b580: 7279 206f 6620 6120 6375 7272 656e 6379  ry of a currency
-0005b590: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0005b5a0: 7374 7220 7379 6d62 6f6c 3a20 556e 6966  str symbol: Unif
-0005b5b0: 6965 6420 4343 5854 206d 6172 6b65 7420  ied CCXT market 
-0005b5c0: 7379 6d62 6f6c 0a20 2020 2020 2020 203a  symbol.        :
-0005b5d0: 7061 7261 6d20 7374 7220 7469 6d65 6672  param str timefr
-0005b5e0: 616d 653a 2022 356d 222c 2231 356d 222c  ame: "5m","15m",
-0005b5f0: 2233 306d 222c 2231 6822 2c22 3268 222c  "30m","1h","2h",
-0005b600: 2234 6822 2c22 3668 222c 2231 3268 222c  "4h","6h","12h",
-0005b610: 206f 7220 2231 6422 0a20 2020 2020 2020   or "1d".       
-0005b620: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-0005b630: 2073 696e 6365 3a20 7468 6520 7469 6d65   since: the time
-0005b640: 286d 7329 206f 6620 7468 6520 6561 726c  (ms) of the earl
-0005b650: 6965 7374 2072 6563 6f72 6420 746f 2072  iest record to r
-0005b660: 6574 7269 6576 6520 756e 6978 2074 696d  etrieve unix tim
-0005b670: 6573 7461 6d70 0a20 2020 2020 2020 203a  estamp.        :
-0005b680: 7061 7261 6d20 696e 747c 4e6f 6e65 206c  param int|None l
-0005b690: 696d 6974 3a20 6465 6661 756c 7420 3330  imit: default 30
-0005b6a0: 2c20 6d61 7820 3530 300a 2020 2020 2020  , max 500.      
-0005b6b0: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-0005b6c0: 7261 6d73 3a20 6578 6368 616e 6765 2073  rams: exchange s
-0005b6d0: 7065 6369 6669 6320 7061 7261 6d65 7465  pecific paramete
-0005b6e0: 7273 0a20 2020 2020 2020 203a 7061 7261  rs.        :para
-0005b6f0: 6d20 696e 747c 4e6f 6e65 2070 6172 616d  m int|None param
-0005b700: 735b 2775 6e74 696c 275d 3a20 7468 6520  s['until']: the 
-0005b710: 7469 6d65 286d 7329 206f 6620 7468 6520  time(ms) of the 
-0005b720: 6c61 7465 7374 2072 6563 6f72 6420 746f  latest record to
-0005b730: 2072 6574 7269 6576 6520 756e 6978 2074   retrieve unix t
-0005b740: 696d 6573 7461 6d70 0a20 2020 2020 2020  imestamp.       
-0005b750: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-0005b760: 616e 2061 7272 6179 206f 6620 606f 7065  an array of `ope
-0005b770: 6e20 696e 7465 7265 7374 2068 6973 746f  n interest histo
-0005b780: 7279 2073 7472 7563 7475 7265 203c 6874  ry structure <ht
-0005b790: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-0005b7a0: 636f 6d2f 232f 3f69 643d 696e 7465 7265  com/#/?id=intere
-0005b7b0: 7374 2d68 6973 746f 7279 2d73 7472 7563  st-history-struc
-0005b7c0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-0005b7d0: 2222 0a20 2020 2020 2020 2069 6620 7469  "".        if ti
-0005b7e0: 6d65 6672 616d 6520 3d3d 2027 316d 273a  meframe == '1m':
-0005b7f0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0005b800: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
-0005b810: 6c66 2e69 6420 2b20 2766 6574 6368 4f70  lf.id + 'fetchOp
-0005b820: 656e 496e 7465 7265 7374 4869 7374 6f72  enInterestHistor
-0005b830: 7920 6361 6e6e 6f74 2075 7365 2074 6865  y cannot use the
-0005b840: 2031 6d20 7469 6d65 6672 616d 6527 290a   1m timeframe').
-0005b850: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-0005b860: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-0005b870: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-0005b880: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-0005b890: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
-0005b8a0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-0005b8b0: 2020 2020 2020 2027 7065 7269 6f64 273a         'period':
-0005b8c0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0005b8d0: 6728 7365 6c66 2e74 696d 6566 7261 6d65  g(self.timeframe
-0005b8e0: 732c 2074 696d 6566 7261 6d65 2c20 7469  s, timeframe, ti
-0005b8f0: 6d65 6672 616d 6529 2c0a 2020 2020 2020  meframe),.      
-0005b900: 2020 7d0a 2020 2020 2020 2020 6966 206c    }.        if l
-0005b910: 696d 6974 2069 7320 6e6f 7420 4e6f 6e65  imit is not None
-0005b920: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0005b930: 7175 6573 745b 276c 696d 6974 275d 203d  quest['limit'] =
-0005b940: 206c 696d 6974 0a20 2020 2020 2020 2073   limit.        s
-0005b950: 796d 626f 6c4b 6579 203d 2027 7379 6d62  ymbolKey = 'symb
-0005b960: 6f6c 2720 6966 206d 6172 6b65 745b 276c  ol' if market['l
-0005b970: 696e 6561 7227 5d20 656c 7365 2027 7061  inear'] else 'pa
-0005b980: 6972 270a 2020 2020 2020 2020 7265 7175  ir'.        requ
-0005b990: 6573 745b 7379 6d62 6f6c 4b65 795d 203d  est[symbolKey] =
-0005b9a0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-0005b9b0: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-0005b9c0: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
-0005b9d0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0005b9e0: 2763 6f6e 7472 6163 7454 7970 6527 5d20  'contractType'] 
-0005b9f0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0005ba00: 6e67 2870 6172 616d 732c 2027 636f 6e74  ng(params, 'cont
-0005ba10: 7261 6374 5479 7065 272c 2027 4355 5252  ractType', 'CURR
-0005ba20: 454e 545f 5155 4152 5445 5227 290a 2020  ENT_QUARTER').  
-0005ba30: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-0005ba40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0005ba50: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0005ba60: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-0005ba70: 696e 6365 0a20 2020 2020 2020 2075 6e74  ince.        unt
-0005ba80: 696c 203d 2073 656c 662e 7361 6665 5f69  il = self.safe_i
-0005ba90: 6e74 6567 6572 5f32 2870 6172 616d 732c  nteger_2(params,
-0005baa0: 2027 756e 7469 6c27 2c20 2774 696c 6c27   'until', 'till'
-0005bab0: 2920 2023 2075 6e69 6669 6564 2069 6e20  )  # unified in 
-0005bac0: 6d69 6c6c 6973 6563 6f6e 6473 0a20 2020  milliseconds.   
-0005bad0: 2020 2020 2065 6e64 5469 6d65 203d 2073       endTime = s
-0005bae0: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
-0005baf0: 2870 6172 616d 732c 2027 656e 6454 696d  (params, 'endTim
-0005bb00: 6527 2c20 756e 7469 6c29 2020 2320 6578  e', until)  # ex
-0005bb10: 6368 616e 6765 2d73 7065 6369 6669 6320  change-specific 
-0005bb20: 696e 206d 696c 6c69 7365 636f 6e64 730a  in milliseconds.
-0005bb30: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
-0005bb40: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
-0005bb50: 732c 205b 2765 6e64 5469 6d65 272c 2027  s, ['endTime', '
-0005bb60: 756e 7469 6c27 2c20 2774 696c 6c27 5d29  until', 'till'])
-0005bb70: 0a20 2020 2020 2020 2069 6620 656e 6454  .        if endT
-0005bb80: 696d 653a 0a20 2020 2020 2020 2020 2020  ime:.           
-0005bb90: 2072 6571 7565 7374 5b27 656e 6454 696d   request['endTim
-0005bba0: 6527 5d20 3d20 656e 6454 696d 650a 2020  e'] = endTime.  
-0005bbb0: 2020 2020 2020 656c 6966 2073 696e 6365        elif since
-0005bbc0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0005bbd0: 206c 696d 6974 2069 7320 4e6f 6e65 3a0a   limit is None:.
-0005bbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005bbf0: 6c69 6d69 7420 3d20 3330 2020 2320 4578  limit = 30  # Ex
-0005bc00: 6368 616e 6765 2064 6566 6175 6c74 0a20  change default. 
-0005bc10: 2020 2020 2020 2020 2020 2064 7572 6174             durat
-0005bc20: 696f 6e20 3d20 7365 6c66 2e70 6172 7365  ion = self.parse
-0005bc30: 5f74 696d 6566 7261 6d65 2874 696d 6566  _timeframe(timef
-0005bc40: 7261 6d65 290a 2020 2020 2020 2020 2020  rame).          
-0005bc50: 2020 7265 7175 6573 745b 2765 6e64 5469    request['endTi
-0005bc60: 6d65 275d 203d 2073 656c 662e 7375 6d28  me'] = self.sum(
-0005bc70: 7369 6e63 652c 2064 7572 6174 696f 6e20  since, duration 
-0005bc80: 2a20 6c69 6d69 7420 2a20 3130 3030 290a  * limit * 1000).
-0005bc90: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-0005bca0: 2027 6661 7069 4461 7461 4765 744f 7065   'fapiDataGetOpe
-0005bcb0: 6e49 6e74 6572 6573 7448 6973 7427 0a20  nInterestHist'. 
-0005bcc0: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-0005bcd0: 5b27 696e 7665 7273 6527 5d3a 0a20 2020  ['inverse']:.   
-0005bce0: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-0005bcf0: 3d20 2764 6170 6944 6174 6147 6574 4f70  = 'dapiDataGetOp
-0005bd00: 656e 496e 7465 7265 7374 4869 7374 270a  enInterestHist'.
-0005bd10: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-0005bd20: 203d 2061 7761 6974 2067 6574 6174 7472   = await getattr
-0005bd30: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
-0005bd40: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-0005bd50: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-0005bd60: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0005bd70: 2020 5b0a 2020 2020 2020 2020 2320 2020    [.        #   
-0005bd80: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0005bd90: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-0005bda0: 3a22 4254 4355 5344 5422 2c0a 2020 2020  :"BTCUSDT",.    
-0005bdb0: 2020 2020 2320 2020 2020 2020 2020 2022      #          "
-0005bdc0: 7375 6d4f 7065 6e49 6e74 6572 6573 7422  sumOpenInterest"
-0005bdd0: 3a22 3735 3337 352e 3631 3730 3030 3030  :"75375.61700000
-0005bde0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0005bdf0: 2020 2020 2020 2273 756d 4f70 656e 496e        "sumOpenIn
-0005be00: 7465 7265 7374 5661 6c75 6522 3a22 3332  terestValue":"32
-0005be10: 3438 3832 3838 3833 2e37 3132 3531 3434  48828883.7125144
-0005be20: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0005be30: 2020 2020 2020 2022 7469 6d65 7374 616d         "timestam
-0005be40: 7022 3a31 3634 3231 3739 3930 3030 3030  p":1642179900000
-0005be50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005be60: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-0005be70: 2020 2e2e 2e0a 2020 2020 2020 2020 2320    ....        # 
-0005be80: 205d 0a20 2020 2020 2020 2023 0a20 2020   ].        #.   
-0005be90: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0005bea0: 2e70 6172 7365 5f6f 7065 6e5f 696e 7465  .parse_open_inte
-0005beb0: 7265 7374 7328 7265 7370 6f6e 7365 2c20  rests(response, 
-0005bec0: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
-0005bed0: 696d 6974 290a 0a20 2020 2061 7379 6e63  imit)..    async
-0005bee0: 2064 6566 2066 6574 6368 5f6f 7065 6e5f   def fetch_open_
-0005bef0: 696e 7465 7265 7374 2873 656c 662c 2073  interest(self, s
-0005bf00: 796d 626f 6c3a 2073 7472 2c20 7061 7261  ymbol: str, para
-0005bf10: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-0005bf20: 2222 220a 2020 2020 2020 2020 7265 7472  """.        retr
-0005bf30: 6965 7665 7320 7468 6520 6f70 656e 2069  ieves the open i
-0005bf40: 6e74 6572 6573 7420 6f66 2061 2063 6f6e  nterest of a con
-0005bf50: 7472 6163 7420 7472 6164 696e 6720 7061  tract trading pa
-0005bf60: 6972 0a20 2020 2020 2020 2073 6565 2068  ir.        see h
-0005bf70: 7474 7073 3a2f 2f62 696e 616e 6365 2d64  ttps://binance-d
-0005bf80: 6f63 732e 6769 7468 7562 2e69 6f2f 6170  ocs.github.io/ap
-0005bf90: 6964 6f63 732f 6675 7475 7265 732f 656e  idocs/futures/en
-0005bfa0: 2f23 6f70 656e 2d69 6e74 6572 6573 740a  /#open-interest.
-0005bfb0: 2020 2020 2020 2020 7365 6520 6874 7470          see http
-0005bfc0: 733a 2f2f 6269 6e61 6e63 652d 646f 6373  s://binance-docs
-0005bfd0: 2e67 6974 6875 622e 696f 2f61 7069 646f  .github.io/apido
-0005bfe0: 6373 2f64 656c 6976 6572 792f 656e 2f23  cs/delivery/en/#
-0005bff0: 6f70 656e 2d69 6e74 6572 6573 740a 2020  open-interest.  
-0005c000: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
-0005c010: 2f2f 6269 6e61 6e63 652d 646f 6373 2e67  //binance-docs.g
-0005c020: 6974 6875 622e 696f 2f61 7069 646f 6373  ithub.io/apidocs
-0005c030: 2f76 6f70 7469 6f6e 732f 656e 2f23 6f70  /voptions/en/#op
-0005c040: 656e 2d69 6e74 6572 6573 740a 2020 2020  en-interest.    
-0005c050: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
-0005c060: 796d 626f 6c3a 2075 6e69 6669 6564 2043  ymbol: unified C
-0005c070: 4358 5420 6d61 726b 6574 2073 796d 626f  CXT market symbo
-0005c080: 6c0a 2020 2020 2020 2020 3a70 6172 616d  l.        :param
-0005c090: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-0005c0a0: 6368 616e 6765 2073 7065 6369 6669 6320  change specific 
-0005c0b0: 7061 7261 6d65 7465 7273 0a20 2020 2020  parameters.     
-0005c0c0: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-0005c0d0: 7d20 616e 206f 7065 6e20 696e 7465 7265  } an open intere
-0005c0e0: 7374 2073 7472 7563 7475 7265 7b40 6c69  st structure{@li
-0005c0f0: 6e6b 2068 7474 7073 3a2f 2f64 6f63 732e  nk https://docs.
-0005c100: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d69  ccxt.com/#/?id=i
-0005c110: 6e74 6572 6573 742d 6869 7374 6f72 792d  nterest-history-
-0005c120: 7374 7275 6374 7572 653a 0a20 2020 2020  structure:.     
-0005c130: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-0005c140: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-0005c150: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-0005c160: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-0005c170: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-0005c180: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0005c190: 7b7d 0a20 2020 2020 2020 2069 6620 6d61  {}.        if ma
-0005c1a0: 726b 6574 5b27 6f70 7469 6f6e 275d 3a0a  rket['option']:.
-0005c1b0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0005c1c0: 6573 745b 2775 6e64 6572 6c79 696e 6741  est['underlyingA
-0005c1d0: 7373 6574 275d 203d 206d 6172 6b65 745b  sset'] = market[
-0005c1e0: 2762 6173 6549 6427 5d0a 2020 2020 2020  'baseId'].      
-0005c1f0: 2020 2020 2020 7265 7175 6573 745b 2765        request['e
-0005c200: 7870 6972 6174 696f 6e27 5d20 3d20 7365  xpiration'] = se
-0005c210: 6c66 2e79 796d 6d64 6428 6d61 726b 6574  lf.yymmdd(market
-0005c220: 5b27 6578 7069 7279 275d 290a 2020 2020  ['expiry']).    
-0005c230: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0005c240: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-0005c250: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
-0005c260: 5b27 6964 275d 0a20 2020 2020 2020 206d  ['id'].        m
-0005c270: 6574 686f 6420 3d20 2766 6170 6950 7562  ethod = 'fapiPub
-0005c280: 6c69 6347 6574 4f70 656e 496e 7465 7265  licGetOpenIntere
-0005c290: 7374 270a 2020 2020 2020 2020 6966 206d  st'.        if m
-0005c2a0: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
-0005c2b0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-0005c2c0: 686f 6420 3d20 2765 6170 6950 7562 6c69  hod = 'eapiPubli
-0005c2d0: 6347 6574 4f70 656e 496e 7465 7265 7374  cGetOpenInterest
-0005c2e0: 270a 2020 2020 2020 2020 656c 6966 206d  '.        elif m
-0005c2f0: 6172 6b65 745b 2769 6e76 6572 7365 275d  arket['inverse']
-0005c300: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-0005c310: 7468 6f64 203d 2027 6461 7069 5075 626c  thod = 'dapiPubl
-0005c320: 6963 4765 744f 7065 6e49 6e74 6572 6573  icGetOpenInteres
-0005c330: 7427 0a20 2020 2020 2020 2072 6573 706f  t'.        respo
-0005c340: 6e73 6520 3d20 6177 6169 7420 6765 7461  nse = await geta
-0005c350: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
-0005c360: 2928 7365 6c66 2e65 7874 656e 6428 7265  )(self.extend(re
-0005c370: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0005c380: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0005c390: 2020 2320 6675 7475 7265 7328 6661 7069    # futures(fapi
-0005c3a0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0005c3b0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0005c3c0: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-0005c3d0: 796d 626f 6c22 3a20 2245 5448 5553 4454  ymbol": "ETHUSDT
-0005c3e0: 5f32 3330 3333 3122 2c0a 2020 2020 2020  _230331",.      
-0005c3f0: 2020 2320 2020 2020 2020 2020 226f 7065    #         "ope
-0005c400: 6e49 6e74 6572 6573 7422 3a20 2232 3335  nInterest": "235
-0005c410: 3831 2e36 3737 222c 0a20 2020 2020 2020  81.677",.       
-0005c420: 2023 2020 2020 2020 2020 2022 7469 6d65   #         "time
-0005c430: 223a 2031 3637 3733 3536 3837 3232 3635  ": 1677356872265
-0005c440: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0005c450: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0005c460: 2020 2023 2066 7574 7572 6573 2864 6170     # futures(dap
-0005c470: 6929 0a20 2020 2020 2020 2023 0a20 2020  i).        #.   
-0005c480: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-0005c490: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0005c4a0: 7379 6d62 6f6c 223a 2022 4554 4855 5344  symbol": "ETHUSD
-0005c4b0: 5f50 4552 5022 2c0a 2020 2020 2020 2020  _PERP",.        
-0005c4c0: 2320 2020 2020 2020 2020 2270 6169 7222  #         "pair"
-0005c4d0: 3a20 2245 5448 5553 4422 2c0a 2020 2020  : "ETHUSD",.    
-0005c4e0: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
-0005c4f0: 7065 6e49 6e74 6572 6573 7422 3a20 2232  penInterest": "2
-0005c500: 3635 3432 3433 3622 2c0a 2020 2020 2020  6542436",.      
-0005c510: 2020 2320 2020 2020 2020 2020 2263 6f6e    #         "con
-0005c520: 7472 6163 7454 7970 6522 3a20 2250 4552  tractType": "PER
-0005c530: 5045 5455 414c 222c 0a20 2020 2020 2020  PETUAL",.       
-0005c540: 2023 2020 2020 2020 2020 2022 7469 6d65   #         "time
-0005c550: 223a 2031 3637 3733 3630 3237 3232 3234  ": 1677360272224
-0005c560: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0005c570: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0005c580: 2020 2023 206f 7074 696f 6e73 2865 6170     # options(eap
-0005c590: 6929 0a20 2020 2020 2020 2023 0a20 2020  i).        #.   
-0005c5a0: 2020 2020 2023 2020 2020 205b 0a20 2020       #     [.   
-0005c5b0: 2020 2020 2023 2020 2020 2020 2020 207b       #         {
-0005c5c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005c5d0: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-0005c5e0: 2022 4554 482d 3233 3032 3235 2d31 3632   "ETH-230225-162
-0005c5f0: 352d 4322 2c0a 2020 2020 2020 2020 2320  5-C",.        # 
-0005c600: 2020 2020 2020 2020 2020 2020 2273 756d              "sum
-0005c610: 4f70 656e 496e 7465 7265 7374 223a 2022  OpenInterest": "
-0005c620: 3436 302e 3530 222c 0a20 2020 2020 2020  460.50",.       
-0005c630: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0005c640: 7375 6d4f 7065 6e49 6e74 6572 6573 7455  sumOpenInterestU
-0005c650: 7364 223a 2022 3733 3439 3537 2e34 3335  sd": "734957.435
-0005c660: 3830 3932 3135 3022 2c0a 2020 2020 2020  8092150",.      
-0005c670: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0005c680: 2274 696d 6573 7461 6d70 223a 2022 3136  "timestamp": "16
-0005c690: 3737 3330 3438 3630 3030 3022 0a20 2020  77304860000".   
-0005c6a0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0005c6b0: 0a20 2020 2020 2020 2023 2020 2020 205d  .        #     ]
-0005c6c0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0005c6d0: 2020 2069 6620 6d61 726b 6574 5b27 6f70     if market['op
-0005c6e0: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
-0005c6f0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0005c700: 7061 7273 655f 6f70 656e 5f69 6e74 6572  parse_open_inter
-0005c710: 6573 7473 2872 6573 706f 6e73 652c 206d  ests(response, m
-0005c720: 6172 6b65 7429 0a20 2020 2020 2020 2065  arket).        e
-0005c730: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0005c740: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0005c750: 7365 5f6f 7065 6e5f 696e 7465 7265 7374  se_open_interest
-0005c760: 2872 6573 706f 6e73 652c 206d 6172 6b65  (response, marke
-0005c770: 7429 0a0a 2020 2020 6465 6620 7061 7273  t)..    def pars
-0005c780: 655f 6f70 656e 5f69 6e74 6572 6573 7428  e_open_interest(
-0005c790: 7365 6c66 2c20 696e 7465 7265 7374 2c20  self, interest, 
-0005c7a0: 6d61 726b 6574 3d4e 6f6e 6529 3a0a 2020  market=None):.  
-0005c7b0: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-0005c7c0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-0005c7d0: 6765 725f 3228 696e 7465 7265 7374 2c20  ger_2(interest, 
-0005c7e0: 2774 696d 6573 7461 6d70 272c 2027 7469  'timestamp', 'ti
-0005c7f0: 6d65 2729 0a20 2020 2020 2020 2069 6420  me').        id 
-0005c800: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0005c810: 6e67 2869 6e74 6572 6573 742c 2027 7379  ng(interest, 'sy
-0005c820: 6d62 6f6c 2729 0a20 2020 2020 2020 2061  mbol').        a
-0005c830: 6d6f 756e 7420 3d20 7365 6c66 2e73 6166  mount = self.saf
-0005c840: 655f 6e75 6d62 6572 5f32 2869 6e74 6572  e_number_2(inter
-0005c850: 6573 742c 2027 7375 6d4f 7065 6e49 6e74  est, 'sumOpenInt
-0005c860: 6572 6573 7427 2c20 276f 7065 6e49 6e74  erest', 'openInt
-0005c870: 6572 6573 7427 290a 2020 2020 2020 2020  erest').        
-0005c880: 7661 6c75 6520 3d20 7365 6c66 2e73 6166  value = self.saf
-0005c890: 655f 6e75 6d62 6572 5f32 2869 6e74 6572  e_number_2(inter
-0005c8a0: 6573 742c 2027 7375 6d4f 7065 6e49 6e74  est, 'sumOpenInt
-0005c8b0: 6572 6573 7456 616c 7565 272c 2027 7375  erestValue', 'su
-0005c8c0: 6d4f 7065 6e49 6e74 6572 6573 7455 7364  mOpenInterestUsd
-0005c8d0: 2729 0a20 2020 2020 2020 2023 2049 6e76  ').        # Inv
-0005c8e0: 6572 7365 2072 6574 7572 6e73 2074 6865  erse returns the
-0005c8f0: 206e 756d 6265 7220 6f66 2063 6f6e 7472   number of contr
-0005c900: 6163 7473 2064 6966 6665 7265 6e74 2066  acts different f
-0005c910: 726f 6d20 7468 6520 6261 7365 206f 7220  rom the base or 
-0005c920: 7175 6f74 6520 766f 6c75 6d65 2069 6e20  quote volume in 
-0005c930: 7365 6c66 2063 6173 650a 2020 2020 2020  self case.      
-0005c940: 2020 2320 636f 6d70 6172 6564 2077 6974    # compared wit
-0005c950: 6820 6874 7470 733a 2f2f 7777 772e 6269  h https://www.bi
-0005c960: 6e61 6e63 652e 636f 6d2f 656e 2f66 7574  nance.com/en/fut
-0005c970: 7572 6573 2f66 756e 6469 6e67 2d68 6973  ures/funding-his
-0005c980: 746f 7279 2f71 7561 7274 6572 6c79 2f34  tory/quarterly/4
-0005c990: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0005c9a0: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-0005c9b0: 796d 626f 6c27 3a20 7365 6c66 2e73 6166  ymbol': self.saf
-0005c9c0: 655f 7379 6d62 6f6c 2869 642c 206d 6172  e_symbol(id, mar
-0005c9d0: 6b65 742c 204e 6f6e 652c 2027 636f 6e74  ket, None, 'cont
-0005c9e0: 7261 6374 2729 2c0a 2020 2020 2020 2020  ract'),.        
-0005c9f0: 2020 2020 2762 6173 6556 6f6c 756d 6527      'baseVolume'
-0005ca00: 3a20 4e6f 6e65 2069 6620 6d61 726b 6574  : None if market
-0005ca10: 5b27 696e 7665 7273 6527 5d20 656c 7365  ['inverse'] else
-0005ca20: 2061 6d6f 756e 742c 2020 2320 6465 7072   amount,  # depr
-0005ca30: 6563 6174 6564 0a20 2020 2020 2020 2020  ecated.         
-0005ca40: 2020 2027 7175 6f74 6556 6f6c 756d 6527     'quoteVolume'
-0005ca50: 3a20 7661 6c75 652c 2020 2320 6465 7072  : value,  # depr
-0005ca60: 6563 6174 6564 0a20 2020 2020 2020 2020  ecated.         
-0005ca70: 2020 2027 6f70 656e 496e 7465 7265 7374     'openInterest
-0005ca80: 416d 6f75 6e74 273a 2061 6d6f 756e 742c  Amount': amount,
-0005ca90: 0a20 2020 2020 2020 2020 2020 2027 6f70  .            'op
-0005caa0: 656e 496e 7465 7265 7374 5661 6c75 6527  enInterestValue'
-0005cab0: 3a20 7661 6c75 652c 0a20 2020 2020 2020  : value,.       
-0005cac0: 2020 2020 2027 7469 6d65 7374 616d 7027       'timestamp'
-0005cad0: 3a20 7469 6d65 7374 616d 702c 0a20 2020  : timestamp,.   
-0005cae0: 2020 2020 2020 2020 2027 6461 7465 7469           'dateti
-0005caf0: 6d65 273a 2073 656c 662e 6973 6f38 3630  me': self.iso860
-0005cb00: 3128 7469 6d65 7374 616d 7029 2c0a 2020  1(timestamp),.  
-0005cb10: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
-0005cb20: 3a20 696e 7465 7265 7374 2c0a 2020 2020  : interest,.    
-0005cb30: 2020 2020 7d0a                               }.
+00050040: 6d62 6f6c 206f 6620 7468 6520 6d61 726b  mbol of the mark
+00050050: 6574 2074 6865 2070 6f73 6974 696f 6e20  et the position 
+00050060: 6973 2068 656c 6420 696e 0a20 2020 2020  is held in.     
+00050070: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+00050080: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+00050090: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+000500a0: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
+000500b0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+000500c0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+000500d0: 6374 3a20 6120 6070 6f73 6974 696f 6e20  ct: a `position 
+000500e0: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+000500f0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+00050100: 2f65 6e2f 6c61 7465 7374 2f6d 616e 7561  /en/latest/manua
+00050110: 6c2e 6874 6d6c 2370 6f73 6974 696f 6e2d  l.html#position-
+00050120: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+00050130: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00050140: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
+00050150: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00050160: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+00050170: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+00050180: 2020 2020 2020 2069 6620 6e6f 7420 6d61         if not ma
+00050190: 726b 6574 5b27 6f70 7469 6f6e 275d 3a0a  rket['option']:.
+000501a0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000501b0: 6520 4e6f 7453 7570 706f 7274 6564 2873  e NotSupported(s
+000501c0: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+000501d0: 506f 7369 7469 6f6e 2829 2073 7570 706f  Position() suppo
+000501e0: 7274 7320 6f70 7469 6f6e 206d 6172 6b65  rts option marke
+000501f0: 7473 206f 6e6c 7927 290a 2020 2020 2020  ts only').      
+00050200: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+00050210: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+00050220: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
+00050230: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00050240: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00050250: 7761 6974 2073 656c 662e 6561 7069 5072  wait self.eapiPr
+00050260: 6976 6174 6547 6574 506f 7369 7469 6f6e  ivateGetPosition
+00050270: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+00050280: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+00050290: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000502a0: 2023 2020 2020 205b 0a20 2020 2020 2020   #     [.       
+000502b0: 2023 2020 2020 2020 2020 207b 0a20 2020   #         {.   
+000502c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000502d0: 2020 2022 656e 7472 7950 7269 6365 223a     "entryPrice":
+000502e0: 2022 3237 2e37 3030 3030 3030 3022 2c0a   "27.70000000",.
+000502f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050300: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+00050310: 2245 5448 2d32 3330 3432 362d 3138 3530  "ETH-230426-1850
+00050320: 2d43 222c 0a20 2020 2020 2020 2023 2020  -C",.        #  
+00050330: 2020 2020 2020 2020 2020 2022 7369 6465             "side
+00050340: 223a 2022 4c4f 4e47 222c 0a20 2020 2020  ": "LONG",.     
+00050350: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050360: 2022 7175 616e 7469 7479 223a 2022 302e   "quantity": "0.
+00050370: 3530 3030 3030 3030 222c 0a20 2020 2020  50000000",.     
+00050380: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050390: 2022 7265 6475 6369 626c 6551 7479 223a   "reducibleQty":
+000503a0: 2022 302e 3530 3030 3030 3030 222c 0a20   "0.50000000",. 
+000503b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000503c0: 2020 2020 2022 6d61 726b 5661 6c75 6522       "markValue"
+000503d0: 3a20 2231 302e 3235 3030 3030 3030 3022  : "10.250000000"
+000503e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000503f0: 2020 2020 2020 2020 2272 6f72 223a 2022          "ror": "
+00050400: 2d30 2e32 3539 3922 2c0a 2020 2020 2020  -0.2599",.      
+00050410: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050420: 2275 6e72 6561 6c69 7a65 6450 4e4c 223a  "unrealizedPNL":
+00050430: 2022 2d33 2e36 3030 3030 3030 3030 222c   "-3.600000000",
+00050440: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050450: 2020 2020 2020 2022 6d61 726b 5072 6963         "markPric
+00050460: 6522 3a20 2232 302e 3522 2c0a 2020 2020  e": "20.5",.    
+00050470: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050480: 2020 2273 7472 696b 6550 7269 6365 223a    "strikePrice":
+00050490: 2022 3138 3530 2e30 3030 3030 3030 3022   "1850.00000000"
+000504a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000504b0: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
+000504c0: 6e43 6f73 7422 3a20 2231 332e 3835 3030  nCost": "13.8500
+000504d0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000504e0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+000504f0: 7069 7279 4461 7465 223a 2031 3638 3234  piryDate": 16824
+00050500: 3936 3030 3030 3030 2c0a 2020 2020 2020  96000000,.      
+00050510: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050520: 2270 7269 6365 5363 616c 6522 3a20 312c  "priceScale": 1,
+00050530: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050540: 2020 2020 2020 2022 7175 616e 7469 7479         "quantity
+00050550: 5363 616c 6522 3a20 322c 0a20 2020 2020  Scale": 2,.     
+00050560: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050570: 2022 6f70 7469 6f6e 5369 6465 223a 2022   "optionSide": "
+00050580: 4341 4c4c 222c 0a20 2020 2020 2020 2023  CALL",.        #
+00050590: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
+000505a0: 6f74 6541 7373 6574 223a 2022 5553 4454  oteAsset": "USDT
+000505b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000505c0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+000505d0: 2031 3638 3234 3932 3432 3731 3036 0a20   1682492427106. 
+000505e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000505f0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+00050600: 205d 0a20 2020 2020 2020 2023 0a20 2020   ].        #.   
+00050610: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00050620: 2e70 6172 7365 5f70 6f73 6974 696f 6e28  .parse_position(
+00050630: 7265 7370 6f6e 7365 5b30 5d2c 206d 6172  response[0], mar
+00050640: 6b65 7429 0a0a 2020 2020 6173 796e 6320  ket)..    async 
+00050650: 6465 6620 6665 7463 685f 6f70 7469 6f6e  def fetch_option
+00050660: 5f70 6f73 6974 696f 6e73 2873 656c 662c  _positions(self,
+00050670: 2073 796d 626f 6c73 3a20 4f70 7469 6f6e   symbols: Option
+00050680: 616c 5b4c 6973 745b 7374 725d 5d20 3d20  al[List[str]] = 
+00050690: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+000506a0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+000506b0: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
+000506c0: 2f2f 6269 6e61 6e63 652d 646f 6373 2e67  //binance-docs.g
+000506d0: 6974 6875 622e 696f 2f61 7069 646f 6373  ithub.io/apidocs
+000506e0: 2f76 6f70 7469 6f6e 732f 656e 2f23 6f70  /voptions/en/#op
+000506f0: 7469 6f6e 2d70 6f73 6974 696f 6e2d 696e  tion-position-in
+00050700: 666f 726d 6174 696f 6e2d 7573 6572 5f64  formation-user_d
+00050710: 6174 610a 2020 2020 2020 2020 6665 7463  ata.        fetc
+00050720: 6820 6461 7461 206f 6e20 6f70 656e 206f  h data on open o
+00050730: 7074 696f 6e73 2070 6f73 6974 696f 6e73  ptions positions
+00050740: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00050750: 5b73 7472 5d7c 4e6f 6e65 2073 796d 626f  [str]|None symbo
+00050760: 6c73 3a20 6c69 7374 206f 6620 756e 6966  ls: list of unif
+00050770: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
+00050780: 6c73 0a20 2020 2020 2020 203a 7061 7261  ls.        :para
+00050790: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+000507a0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+000507b0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+000507c0: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
+000507d0: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+000507e0: 7475 726e 7320 5b64 6963 745d 3a20 6120  turns [dict]: a 
+000507f0: 6c69 7374 206f 6620 6070 6f73 6974 696f  list of `positio
+00050800: 6e20 7374 7275 6374 7572 6573 203c 6874  n structures <ht
+00050810: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+00050820: 636f 6d2f 232f 3f69 643d 706f 7369 7469  com/#/?id=positi
+00050830: 6f6e 2d73 7472 7563 7475 7265 3e60 0a20  on-structure>`. 
+00050840: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00050850: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+00050860: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00050870: 2020 2020 2073 796d 626f 6c73 203d 2073       symbols = s
+00050880: 656c 662e 6d61 726b 6574 5f73 796d 626f  elf.market_symbo
+00050890: 6c73 2873 796d 626f 6c73 290a 2020 2020  ls(symbols).    
+000508a0: 2020 2020 7265 7175 6573 7420 3d20 7b7d      request = {}
+000508b0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+000508c0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
+000508d0: 6620 7379 6d62 6f6c 7320 6973 206e 6f74  f symbols is not
+000508e0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000508f0: 2020 2073 796d 626f 6c20 3d20 4e6f 6e65     symbol = None
+00050900: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00050910: 6973 696e 7374 616e 6365 2873 796d 626f  isinstance(symbo
+00050920: 6c73 2c20 6c69 7374 293a 0a20 2020 2020  ls, list):.     
+00050930: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
+00050940: 6c73 4c65 6e67 7468 203d 206c 656e 2873  lsLength = len(s
+00050950: 796d 626f 6c73 290a 2020 2020 2020 2020  ymbols).        
+00050960: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+00050970: 6c73 4c65 6e67 7468 203e 2031 3a0a 2020  lsLength > 1:.  
+00050980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050990: 2020 7261 6973 6520 4261 6452 6571 7565    raise BadReque
+000509a0: 7374 2873 656c 662e 6964 202b 2027 2066  st(self.id + ' f
+000509b0: 6574 6368 506f 7369 7469 6f6e 7328 2920  etchPositions() 
+000509c0: 7379 6d62 6f6c 7320 6172 6775 6d65 6e74  symbols argument
+000509d0: 2063 616e 6e6f 7420 636f 6e74 6169 6e20   cannot contain 
+000509e0: 6d6f 7265 2074 6861 6e20 3120 7379 6d62  more than 1 symb
+000509f0: 6f6c 2729 0a20 2020 2020 2020 2020 2020  ol').           
+00050a00: 2020 2020 2073 796d 626f 6c20 3d20 7379       symbol = sy
+00050a10: 6d62 6f6c 735b 305d 0a20 2020 2020 2020  mbols[0].       
+00050a20: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00050a30: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
+00050a40: 6c20 3d20 7379 6d62 6f6c 730a 2020 2020  l = symbols.    
+00050a50: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00050a60: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00050a70: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+00050a80: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
+00050a90: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
+00050aa0: 5d0a 2020 2020 2020 2020 7265 7370 6f6e  ].        respon
+00050ab0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+00050ac0: 6561 7069 5072 6976 6174 6547 6574 506f  eapiPrivateGetPo
+00050ad0: 7369 7469 6f6e 2873 656c 662e 6578 7465  sition(self.exte
+00050ae0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00050af0: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00050b00: 2020 2020 2020 2023 2020 2020 205b 0a20         #     [. 
+00050b10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050b20: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00050b30: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
+00050b40: 7269 6365 223a 2022 3237 2e37 3030 3030  rice": "27.70000
+00050b50: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00050b60: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
+00050b70: 626f 6c22 3a20 2245 5448 2d32 3330 3432  bol": "ETH-23042
+00050b80: 362d 3138 3530 2d43 222c 0a20 2020 2020  6-1850-C",.     
+00050b90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050ba0: 2022 7369 6465 223a 2022 4c4f 4e47 222c   "side": "LONG",
+00050bb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050bc0: 2020 2020 2020 2022 7175 616e 7469 7479         "quantity
+00050bd0: 223a 2022 302e 3530 3030 3030 3030 222c  ": "0.50000000",
+00050be0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050bf0: 2020 2020 2020 2022 7265 6475 6369 626c         "reducibl
+00050c00: 6551 7479 223a 2022 302e 3530 3030 3030  eQty": "0.500000
+00050c10: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00050c20: 2020 2020 2020 2020 2020 2022 6d61 726b             "mark
+00050c30: 5661 6c75 6522 3a20 2231 302e 3235 3030  Value": "10.2500
+00050c40: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00050c50: 2320 2020 2020 2020 2020 2020 2020 2272  #             "r
+00050c60: 6f72 223a 2022 2d30 2e32 3539 3922 2c0a  or": "-0.2599",.
+00050c70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050c80: 2020 2020 2020 2275 6e72 6561 6c69 7a65        "unrealize
+00050c90: 6450 4e4c 223a 2022 2d33 2e36 3030 3030  dPNL": "-3.60000
+00050ca0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00050cb0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
+00050cc0: 726b 5072 6963 6522 3a20 2232 302e 3522  rkPrice": "20.5"
+00050cd0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050ce0: 2020 2020 2020 2020 2273 7472 696b 6550          "strikeP
+00050cf0: 7269 6365 223a 2022 3138 3530 2e30 3030  rice": "1850.000
+00050d00: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00050d10: 2320 2020 2020 2020 2020 2020 2020 2270  #             "p
+00050d20: 6f73 6974 696f 6e43 6f73 7422 3a20 2231  ositionCost": "1
+00050d30: 332e 3835 3030 3030 3030 222c 0a20 2020  3.85000000",.   
+00050d40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050d50: 2020 2022 6578 7069 7279 4461 7465 223a     "expiryDate":
+00050d60: 2031 3638 3234 3936 3030 3030 3030 2c0a   1682496000000,.
+00050d70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050d80: 2020 2020 2020 2270 7269 6365 5363 616c        "priceScal
+00050d90: 6522 3a20 312c 0a20 2020 2020 2020 2023  e": 1,.        #
+00050da0: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
+00050db0: 616e 7469 7479 5363 616c 6522 3a20 322c  antityScale": 2,
+00050dc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050dd0: 2020 2020 2020 2022 6f70 7469 6f6e 5369         "optionSi
+00050de0: 6465 223a 2022 4341 4c4c 222c 0a20 2020  de": "CALL",.   
+00050df0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050e00: 2020 2022 7175 6f74 6541 7373 6574 223a     "quoteAsset":
+00050e10: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+00050e20: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00050e30: 7469 6d65 223a 2031 3638 3234 3932 3432  time": 168249242
+00050e40: 3731 3036 0a20 2020 2020 2020 2023 2020  7106.        #  
+00050e50: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00050e60: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
+00050e70: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
+00050e80: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
+00050e90: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+00050ea0: 206c 656e 2872 6573 706f 6e73 6529 293a   len(response)):
+00050eb0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00050ec0: 756c 742e 6170 7065 6e64 2873 656c 662e  ult.append(self.
+00050ed0: 7061 7273 655f 706f 7369 7469 6f6e 2872  parse_position(r
+00050ee0: 6573 706f 6e73 655b 695d 2c20 6d61 726b  esponse[i], mark
+00050ef0: 6574 2929 0a20 2020 2020 2020 2072 6574  et)).        ret
+00050f00: 7572 6e20 7365 6c66 2e66 696c 7465 725f  urn self.filter_
+00050f10: 6279 5f61 7272 6179 2872 6573 756c 742c  by_array(result,
+00050f20: 2027 7379 6d62 6f6c 272c 2073 796d 626f   'symbol', symbo
+00050f30: 6c73 2c20 4661 6c73 6529 0a0a 2020 2020  ls, False)..    
+00050f40: 6465 6620 7061 7273 655f 706f 7369 7469  def parse_positi
+00050f50: 6f6e 2873 656c 662c 2070 6f73 6974 696f  on(self, positio
+00050f60: 6e2c 206d 6172 6b65 743d 4e6f 6e65 293a  n, market=None):
+00050f70: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00050f80: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00050f90: 2020 2023 2020 2020 2020 2020 2022 656e     #         "en
+00050fa0: 7472 7950 7269 6365 223a 2022 3237 2e37  tryPrice": "27.7
+00050fb0: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+00050fc0: 2020 2320 2020 2020 2020 2020 2273 796d    #         "sym
+00050fd0: 626f 6c22 3a20 2245 5448 2d32 3330 3432  bol": "ETH-23042
+00050fe0: 362d 3138 3530 2d43 222c 0a20 2020 2020  6-1850-C",.     
+00050ff0: 2020 2023 2020 2020 2020 2020 2022 7369     #         "si
+00051000: 6465 223a 2022 4c4f 4e47 222c 0a20 2020  de": "LONG",.   
+00051010: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00051020: 7175 616e 7469 7479 223a 2022 302e 3530  quantity": "0.50
+00051030: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00051040: 2023 2020 2020 2020 2020 2022 7265 6475   #         "redu
+00051050: 6369 626c 6551 7479 223a 2022 302e 3530  cibleQty": "0.50
+00051060: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00051070: 2023 2020 2020 2020 2020 2022 6d61 726b   #         "mark
+00051080: 5661 6c75 6522 3a20 2231 302e 3235 3030  Value": "10.2500
+00051090: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+000510a0: 2320 2020 2020 2020 2020 2272 6f72 223a  #         "ror":
+000510b0: 2022 2d30 2e32 3539 3922 2c0a 2020 2020   "-0.2599",.    
+000510c0: 2020 2020 2320 2020 2020 2020 2020 2275      #         "u
+000510d0: 6e72 6561 6c69 7a65 6450 4e4c 223a 2022  nrealizedPNL": "
+000510e0: 2d33 2e36 3030 3030 3030 3030 222c 0a20  -3.600000000",. 
+000510f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00051100: 2022 6d61 726b 5072 6963 6522 3a20 2232   "markPrice": "2
+00051110: 302e 3522 2c0a 2020 2020 2020 2020 2320  0.5",.        # 
+00051120: 2020 2020 2020 2020 2273 7472 696b 6550          "strikeP
+00051130: 7269 6365 223a 2022 3138 3530 2e30 3030  rice": "1850.000
+00051140: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00051150: 2320 2020 2020 2020 2020 2270 6f73 6974  #         "posit
+00051160: 696f 6e43 6f73 7422 3a20 2231 332e 3835  ionCost": "13.85
+00051170: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00051180: 2023 2020 2020 2020 2020 2022 6578 7069   #         "expi
+00051190: 7279 4461 7465 223a 2031 3638 3234 3936  ryDate": 1682496
+000511a0: 3030 3030 3030 2c0a 2020 2020 2020 2020  000000,.        
+000511b0: 2320 2020 2020 2020 2020 2270 7269 6365  #         "price
+000511c0: 5363 616c 6522 3a20 312c 0a20 2020 2020  Scale": 1,.     
+000511d0: 2020 2023 2020 2020 2020 2020 2022 7175     #         "qu
+000511e0: 616e 7469 7479 5363 616c 6522 3a20 322c  antityScale": 2,
+000511f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051200: 2020 2022 6f70 7469 6f6e 5369 6465 223a     "optionSide":
+00051210: 2022 4341 4c4c 222c 0a20 2020 2020 2020   "CALL",.       
+00051220: 2023 2020 2020 2020 2020 2022 7175 6f74   #         "quot
+00051230: 6541 7373 6574 223a 2022 5553 4454 222c  eAsset": "USDT",
+00051240: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051250: 2020 2022 7469 6d65 223a 2031 3638 3234     "time": 16824
+00051260: 3932 3432 3731 3036 0a20 2020 2020 2020  92427106.       
+00051270: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+00051280: 2023 0a20 2020 2020 2020 206d 6172 6b65   #.        marke
+00051290: 7449 6420 3d20 7365 6c66 2e73 6166 655f  tId = self.safe_
+000512a0: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
+000512b0: 2027 7379 6d62 6f6c 2729 0a20 2020 2020   'symbol').     
+000512c0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+000512d0: 2e73 6166 655f 6d61 726b 6574 286d 6172  .safe_market(mar
+000512e0: 6b65 7449 642c 206d 6172 6b65 7429 0a20  ketId, market). 
+000512f0: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
+00051300: 6d61 726b 6574 5b27 7379 6d62 6f6c 275d  market['symbol']
+00051310: 0a20 2020 2020 2020 2073 6964 6520 3d20  .        side = 
+00051320: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00051330: 5f6c 6f77 6572 2870 6f73 6974 696f 6e2c  _lower(position,
+00051340: 2027 7369 6465 2729 0a20 2020 2020 2020   'side').       
+00051350: 2071 7561 6e74 6974 7920 3d20 7365 6c66   quantity = self
+00051360: 2e73 6166 655f 7374 7269 6e67 2870 6f73  .safe_string(pos
+00051370: 6974 696f 6e2c 2027 7175 616e 7469 7479  ition, 'quantity
+00051380: 2729 0a20 2020 2020 2020 2069 6620 7369  ').        if si
+00051390: 6465 2021 3d20 276c 6f6e 6727 3a0a 2020  de != 'long':.  
+000513a0: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
+000513b0: 7479 203d 2050 7265 6369 7365 2e73 7472  ty = Precise.str
+000513c0: 696e 675f 6d75 6c28 272d 3127 2c20 7175  ing_mul('-1', qu
+000513d0: 616e 7469 7479 290a 2020 2020 2020 2020  antity).        
+000513e0: 7469 6d65 7374 616d 7020 3d20 7365 6c66  timestamp = self
+000513f0: 2e73 6166 655f 696e 7465 6765 7228 706f  .safe_integer(po
+00051400: 7369 7469 6f6e 2c20 2774 696d 6527 290a  sition, 'time').
+00051410: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00051420: 656c 662e 7361 6665 5f70 6f73 6974 696f  elf.safe_positio
+00051430: 6e28 7b0a 2020 2020 2020 2020 2020 2020  n({.            
+00051440: 2769 6e66 6f27 3a20 706f 7369 7469 6f6e  'info': position
+00051450: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+00051460: 6427 3a20 4e6f 6e65 2c0a 2020 2020 2020  d': None,.      
+00051470: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+00051480: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
+00051490: 2020 2020 2765 6e74 7279 5072 6963 6527      'entryPrice'
+000514a0: 3a20 7365 6c66 2e73 6166 655f 6e75 6d62  : self.safe_numb
+000514b0: 6572 2870 6f73 6974 696f 6e2c 2027 656e  er(position, 'en
+000514c0: 7472 7950 7269 6365 2729 2c0a 2020 2020  tryPrice'),.    
+000514d0: 2020 2020 2020 2020 276d 6172 6b50 7269          'markPri
+000514e0: 6365 273a 2073 656c 662e 7361 6665 5f6e  ce': self.safe_n
+000514f0: 756d 6265 7228 706f 7369 7469 6f6e 2c20  umber(position, 
+00051500: 276d 6172 6b50 7269 6365 2729 2c0a 2020  'markPrice'),.  
+00051510: 2020 2020 2020 2020 2020 276e 6f74 696f            'notio
+00051520: 6e61 6c27 3a20 7365 6c66 2e73 6166 655f  nal': self.safe_
+00051530: 6e75 6d62 6572 2870 6f73 6974 696f 6e2c  number(position,
+00051540: 2027 6d61 726b 5661 6c75 6527 292c 0a20   'markValue'),. 
+00051550: 2020 2020 2020 2020 2020 2027 636f 6c6c             'coll
+00051560: 6174 6572 616c 273a 2073 656c 662e 7361  ateral': self.sa
+00051570: 6665 5f6e 756d 6265 7228 706f 7369 7469  fe_number(positi
+00051580: 6f6e 2c20 2770 6f73 6974 696f 6e43 6f73  on, 'positionCos
+00051590: 7427 292c 0a20 2020 2020 2020 2020 2020  t'),.           
+000515a0: 2027 756e 7265 616c 697a 6564 506e 6c27   'unrealizedPnl'
+000515b0: 3a20 7365 6c66 2e73 6166 655f 6e75 6d62  : self.safe_numb
+000515c0: 6572 2870 6f73 6974 696f 6e2c 2027 756e  er(position, 'un
+000515d0: 7265 616c 697a 6564 504e 4c27 292c 0a20  realizedPNL'),. 
+000515e0: 2020 2020 2020 2020 2020 2027 7369 6465             'side
+000515f0: 273a 2073 6964 652c 0a20 2020 2020 2020  ': side,.       
+00051600: 2020 2020 2027 636f 6e74 7261 6374 7327       'contracts'
+00051610: 3a20 7365 6c66 2e70 6172 7365 5f6e 756d  : self.parse_num
+00051620: 6265 7228 7175 616e 7469 7479 292c 0a20  ber(quantity),. 
+00051630: 2020 2020 2020 2020 2020 2027 636f 6e74             'cont
+00051640: 7261 6374 5369 7a65 273a 204e 6f6e 652c  ractSize': None,
+00051650: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
+00051660: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
+00051670: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
+00051680: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
+00051690: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
+000516a0: 616d 7029 2c0a 2020 2020 2020 2020 2020  amp),.          
+000516b0: 2020 2768 6564 6765 6427 3a20 4e6f 6e65    'hedged': None
+000516c0: 2c0a 2020 2020 2020 2020 2020 2020 276d  ,.            'm
+000516d0: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+000516e0: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+000516f0: 2020 2020 2027 6d61 696e 7465 6e61 6e63       'maintenanc
+00051700: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+00051710: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
+00051720: 2020 2020 2020 2769 6e69 7469 616c 4d61        'initialMa
+00051730: 7267 696e 273a 204e 6f6e 652c 0a20 2020  rgin': None,.   
+00051740: 2020 2020 2020 2020 2027 696e 6974 6961           'initia
+00051750: 6c4d 6172 6769 6e50 6572 6365 6e74 6167  lMarginPercentag
+00051760: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
+00051770: 2020 2020 2020 276c 6576 6572 6167 6527        'leverage'
+00051780: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00051790: 2020 2020 276c 6971 7569 6461 7469 6f6e      'liquidation
+000517a0: 5072 6963 6527 3a20 4e6f 6e65 2c0a 2020  Price': None,.  
+000517b0: 2020 2020 2020 2020 2020 276d 6172 6769            'margi
+000517c0: 6e52 6174 696f 273a 204e 6f6e 652c 0a20  nRatio': None,. 
+000517d0: 2020 2020 2020 2020 2020 2027 6d61 7267             'marg
+000517e0: 696e 4d6f 6465 273a 204e 6f6e 652c 0a20  inMode': None,. 
+000517f0: 2020 2020 2020 2020 2020 2027 7065 7263             'perc
+00051800: 656e 7461 6765 273a 204e 6f6e 652c 0a20  entage': None,. 
+00051810: 2020 2020 2020 207d 290a 0a20 2020 2061         })..    a
+00051820: 7379 6e63 2064 6566 2066 6574 6368 5f70  sync def fetch_p
+00051830: 6f73 6974 696f 6e73 2873 656c 662c 2073  ositions(self, s
+00051840: 796d 626f 6c73 3a20 4f70 7469 6f6e 616c  ymbols: Optional
+00051850: 5b4c 6973 745b 7374 725d 5d20 3d20 4e6f  [List[str]] = No
+00051860: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+00051870: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00051880: 2020 2020 6665 7463 6820 616c 6c20 6f70      fetch all op
+00051890: 656e 2070 6f73 6974 696f 6e73 0a20 2020  en positions.   
+000518a0: 2020 2020 203a 7061 7261 6d20 5b73 7472       :param [str
+000518b0: 5d7c 4e6f 6e65 2073 796d 626f 6c73 3a20  ]|None symbols: 
+000518c0: 6c69 7374 206f 6620 756e 6966 6965 6420  list of unified 
+000518d0: 6d61 726b 6574 2073 796d 626f 6c73 0a20  market symbols. 
+000518e0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+000518f0: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+00051900: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+00051910: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
+00051920: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
+00051930: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00051940: 7320 5b64 6963 745d 3a20 6120 6c69 7374  s [dict]: a list
+00051950: 206f 6620 6070 6f73 6974 696f 6e20 7374   of `position st
+00051960: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+00051970: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+00051980: 2f3f 6964 3d70 6f73 6974 696f 6e2d 7374  /?id=position-st
+00051990: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+000519a0: 2020 2222 220a 2020 2020 2020 2020 6465    """.        de
+000519b0: 6661 756c 744d 6574 686f 6420 3d20 7365  faultMethod = se
+000519c0: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
+000519d0: 656c 662e 6f70 7469 6f6e 732c 2027 6665  elf.options, 'fe
+000519e0: 7463 6850 6f73 6974 696f 6e73 272c 2027  tchPositions', '
+000519f0: 706f 7369 7469 6f6e 5269 736b 2729 0a20  positionRisk'). 
+00051a00: 2020 2020 2020 2069 6620 6465 6661 756c         if defaul
+00051a10: 744d 6574 686f 6420 3d3d 2027 706f 7369  tMethod == 'posi
+00051a20: 7469 6f6e 5269 736b 273a 0a20 2020 2020  tionRisk':.     
+00051a30: 2020 2020 2020 2072 6574 7572 6e20 6177         return aw
+00051a40: 6169 7420 7365 6c66 2e66 6574 6368 5f70  ait self.fetch_p
+00051a50: 6f73 6974 696f 6e73 5f72 6973 6b28 7379  ositions_risk(sy
+00051a60: 6d62 6f6c 732c 2070 6172 616d 7329 0a20  mbols, params). 
+00051a70: 2020 2020 2020 2065 6c69 6620 6465 6661         elif defa
+00051a80: 756c 744d 6574 686f 6420 3d3d 2027 6163  ultMethod == 'ac
+00051a90: 636f 756e 7427 3a0a 2020 2020 2020 2020  count':.        
+00051aa0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00051ab0: 2073 656c 662e 6665 7463 685f 6163 636f   self.fetch_acco
+00051ac0: 756e 745f 706f 7369 7469 6f6e 7328 7379  unt_positions(sy
+00051ad0: 6d62 6f6c 732c 2070 6172 616d 7329 0a20  mbols, params). 
+00051ae0: 2020 2020 2020 2065 6c69 6620 6465 6661         elif defa
+00051af0: 756c 744d 6574 686f 6420 3d3d 2027 6f70  ultMethod == 'op
+00051b00: 7469 6f6e 273a 0a20 2020 2020 2020 2020  tion':.         
+00051b10: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00051b20: 7365 6c66 2e66 6574 6368 5f6f 7074 696f  self.fetch_optio
+00051b30: 6e5f 706f 7369 7469 6f6e 7328 7379 6d62  n_positions(symb
+00051b40: 6f6c 732c 2070 6172 616d 7329 0a20 2020  ols, params).   
+00051b50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00051b60: 2020 2020 2020 2072 6169 7365 204e 6f74         raise Not
+00051b70: 5375 7070 6f72 7465 6428 7365 6c66 2e69  Supported(self.i
+00051b80: 6420 2b20 272e 6f70 7469 6f6e 735b 2266  d + '.options["f
+00051b90: 6574 6368 506f 7369 7469 6f6e 7322 5d20  etchPositions"] 
+00051ba0: 3d20 2227 202b 2064 6566 6175 6c74 4d65  = "' + defaultMe
+00051bb0: 7468 6f64 202b 2027 2220 6973 2069 6e76  thod + '" is inv
+00051bc0: 616c 6964 2c20 706c 6561 7365 2063 686f  alid, please cho
+00051bd0: 6f73 6520 6265 7477 6565 6e20 2261 6363  ose between "acc
+00051be0: 6f75 6e74 222c 2022 706f 7369 7469 6f6e  ount", "position
+00051bf0: 5269 736b 2220 616e 6420 226f 7074 696f  Risk" and "optio
+00051c00: 6e22 2729 0a0a 2020 2020 6173 796e 6320  n"')..    async 
+00051c10: 6465 6620 6665 7463 685f 6163 636f 756e  def fetch_accoun
+00051c20: 745f 706f 7369 7469 6f6e 7328 7365 6c66  t_positions(self
+00051c30: 2c20 7379 6d62 6f6c 733a 204f 7074 696f  , symbols: Optio
+00051c40: 6e61 6c5b 4c69 7374 5b73 7472 5d5d 203d  nal[List[str]] =
+00051c50: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00051c60: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00051c70: 2020 2020 2020 2066 6574 6368 2061 6363         fetch acc
+00051c80: 6f75 6e74 2070 6f73 6974 696f 6e73 0a20  ount positions. 
+00051c90: 2020 2020 2020 203a 7061 7261 6d20 5b73         :param [s
+00051ca0: 7472 5d7c 4e6f 6e65 2073 796d 626f 6c73  tr]|None symbols
+00051cb0: 3a20 6c69 7374 206f 6620 756e 6966 6965  : list of unifie
+00051cc0: 6420 6d61 726b 6574 2073 796d 626f 6c73  d market symbols
+00051cd0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00051ce0: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+00051cf0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00051d00: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
+00051d10: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
+00051d20: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+00051d30: 726e 7320 6469 6374 3a20 6461 7461 206f  rns dict: data o
+00051d40: 6e20 6163 636f 756e 7420 706f 7369 7469  n account positi
+00051d50: 6f6e 730a 2020 2020 2020 2020 2222 220a  ons.        """.
+00051d60: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+00051d70: 6c73 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ls is not None:.
+00051d80: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00051d90: 6f74 2069 7369 6e73 7461 6e63 6528 7379  ot isinstance(sy
+00051da0: 6d62 6f6c 732c 206c 6973 7429 3a0a 2020  mbols, list):.  
+00051db0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00051dc0: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
+00051dd0: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
+00051de0: 2720 6665 7463 6850 6f73 6974 696f 6e73  ' fetchPositions
+00051df0: 2829 2072 6571 7569 7265 7320 616e 2061  () requires an a
+00051e00: 7272 6179 2061 7267 756d 656e 7420 666f  rray argument fo
+00051e10: 7220 7379 6d62 6f6c 7327 290a 2020 2020  r symbols').    
+00051e20: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+00051e30: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00051e40: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00051e50: 2e6c 6f61 645f 6c65 7665 7261 6765 5f62  .load_leverage_b
+00051e60: 7261 636b 6574 7328 4661 6c73 652c 2070  rackets(False, p
+00051e70: 6172 616d 7329 0a20 2020 2020 2020 206d  arams).        m
+00051e80: 6574 686f 6420 3d20 4e6f 6e65 0a20 2020  ethod = None.   
+00051e90: 2020 2020 2064 6566 6175 6c74 5479 7065       defaultType
+00051ea0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00051eb0: 696e 6728 7365 6c66 2e6f 7074 696f 6e73  ing(self.options
+00051ec0: 2c20 2764 6566 6175 6c74 5479 7065 272c  , 'defaultType',
+00051ed0: 2027 6675 7475 7265 2729 0a20 2020 2020   'future').     
+00051ee0: 2020 2074 7970 6520 3d20 7365 6c66 2e73     type = self.s
+00051ef0: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
+00051f00: 732c 2027 7479 7065 272c 2064 6566 6175  s, 'type', defau
+00051f10: 6c74 5479 7065 290a 2020 2020 2020 2020  ltType).        
+00051f20: 7175 6572 7920 3d20 7365 6c66 2e6f 6d69  query = self.omi
+00051f30: 7428 7061 7261 6d73 2c20 2774 7970 6527  t(params, 'type'
+00051f40: 290a 2020 2020 2020 2020 7375 6254 7970  ).        subTyp
+00051f50: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
+00051f60: 2073 7562 5479 7065 2c20 7175 6572 7920   subType, query 
+00051f70: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
+00051f80: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
+00051f90: 7328 2766 6574 6368 4163 636f 756e 7450  s('fetchAccountP
+00051fa0: 6f73 6974 696f 6e73 272c 204e 6f6e 652c  ositions', None,
+00051fb0: 2070 6172 616d 732c 2027 6c69 6e65 6172   params, 'linear
+00051fc0: 2729 0a20 2020 2020 2020 2069 6620 7365  ').        if se
+00051fd0: 6c66 2e69 735f 6c69 6e65 6172 2874 7970  lf.is_linear(typ
+00051fe0: 652c 2073 7562 5479 7065 293a 0a20 2020  e, subType):.   
+00051ff0: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00052000: 3d20 2766 6170 6950 7269 7661 7465 4765  = 'fapiPrivateGe
+00052010: 7441 6363 6f75 6e74 270a 2020 2020 2020  tAccount'.      
+00052020: 2020 656c 6966 2073 656c 662e 6973 5f69    elif self.is_i
+00052030: 6e76 6572 7365 2874 7970 652c 2073 7562  nverse(type, sub
+00052040: 5479 7065 293a 0a20 2020 2020 2020 2020  Type):.         
+00052050: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
+00052060: 6950 7269 7661 7465 4765 7441 6363 6f75  iPrivateGetAccou
+00052070: 6e74 270a 2020 2020 2020 2020 656c 7365  nt'.        else
+00052080: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00052090: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
+000520a0: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
+000520b0: 6368 506f 7369 7469 6f6e 7328 2920 7375  chPositions() su
+000520c0: 7070 6f72 7473 206c 696e 6561 7220 616e  pports linear an
+000520d0: 6420 696e 7665 7273 6520 636f 6e74 7261  d inverse contra
+000520e0: 6374 7320 6f6e 6c79 2729 0a20 2020 2020  cts only').     
+000520f0: 2020 2061 6363 6f75 6e74 203d 2061 7761     account = awa
+00052100: 6974 2067 6574 6174 7472 2873 656c 662c  it getattr(self,
+00052110: 206d 6574 686f 6429 2871 7565 7279 290a   method)(query).
+00052120: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00052130: 2073 656c 662e 7061 7273 655f 6163 636f   self.parse_acco
+00052140: 756e 745f 706f 7369 7469 6f6e 7328 6163  unt_positions(ac
+00052150: 636f 756e 7429 0a20 2020 2020 2020 2073  count).        s
+00052160: 796d 626f 6c73 203d 2073 656c 662e 6d61  ymbols = self.ma
+00052170: 726b 6574 5f73 796d 626f 6c73 2873 796d  rket_symbols(sym
+00052180: 626f 6c73 290a 2020 2020 2020 2020 7265  bols).        re
+00052190: 7475 726e 2073 656c 662e 6669 6c74 6572  turn self.filter
+000521a0: 5f62 795f 6172 7261 7928 7265 7375 6c74  _by_array(result
+000521b0: 2c20 2773 796d 626f 6c27 2c20 7379 6d62  , 'symbol', symb
+000521c0: 6f6c 732c 2046 616c 7365 290a 0a20 2020  ols, False)..   
+000521d0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
+000521e0: 5f70 6f73 6974 696f 6e73 5f72 6973 6b28  _positions_risk(
+000521f0: 7365 6c66 2c20 7379 6d62 6f6c 733a 204f  self, symbols: O
+00052200: 7074 696f 6e61 6c5b 4c69 7374 5b73 7472  ptional[List[str
+00052210: 5d5d 203d 204e 6f6e 652c 2070 6172 616d  ]] = None, param
+00052220: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00052230: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+00052240: 2070 6f73 6974 696f 6e73 2072 6973 6b0a   positions risk.
+00052250: 2020 2020 2020 2020 3a70 6172 616d 205b          :param [
+00052260: 7374 725d 7c4e 6f6e 6520 7379 6d62 6f6c  str]|None symbol
+00052270: 733a 206c 6973 7420 6f66 2075 6e69 6669  s: list of unifi
+00052280: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
+00052290: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
+000522a0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+000522b0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+000522c0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+000522d0: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
+000522e0: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+000522f0: 7572 6e73 2064 6963 743a 2064 6174 6120  urns dict: data 
+00052300: 6f6e 2074 6865 2070 6f73 6974 696f 6e73  on the positions
+00052310: 2072 6973 6b0a 2020 2020 2020 2020 2222   risk.        ""
+00052320: 220a 2020 2020 2020 2020 6966 2073 796d  ".        if sym
+00052330: 626f 6c73 2069 7320 6e6f 7420 4e6f 6e65  bols is not None
+00052340: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00052350: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00052360: 7379 6d62 6f6c 732c 206c 6973 7429 3a0a  symbols, list):.
+00052370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052380: 7261 6973 6520 4172 6775 6d65 6e74 7352  raise ArgumentsR
+00052390: 6571 7569 7265 6428 7365 6c66 2e69 6420  equired(self.id 
+000523a0: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
+000523b0: 6e73 5269 736b 2829 2072 6571 7569 7265  nsRisk() require
+000523c0: 7320 616e 2061 7272 6179 2061 7267 756d  s an array argum
+000523d0: 656e 7420 666f 7220 7379 6d62 6f6c 7327  ent for symbols'
+000523e0: 290a 2020 2020 2020 2020 6177 6169 7420  ).        await 
+000523f0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00052400: 7328 290a 2020 2020 2020 2020 6177 6169  s().        awai
+00052410: 7420 7365 6c66 2e6c 6f61 645f 6c65 7665  t self.load_leve
+00052420: 7261 6765 5f62 7261 636b 6574 7328 4661  rage_brackets(Fa
+00052430: 6c73 652c 2070 6172 616d 7329 0a20 2020  lse, params).   
+00052440: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00052450: 7d0a 2020 2020 2020 2020 6d65 7468 6f64  }.        method
+00052460: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00052470: 6465 6661 756c 7454 7970 6520 3d20 2766  defaultType = 'f
+00052480: 7574 7572 6527 0a20 2020 2020 2020 2064  uture'.        d
+00052490: 6566 6175 6c74 5479 7065 203d 2073 656c  efaultType = sel
+000524a0: 662e 7361 6665 5f73 7472 696e 6728 7365  f.safe_string(se
+000524b0: 6c66 2e6f 7074 696f 6e73 2c20 2764 6566  lf.options, 'def
+000524c0: 6175 6c74 5479 7065 272c 2064 6566 6175  aultType', defau
+000524d0: 6c74 5479 7065 290a 2020 2020 2020 2020  ltType).        
+000524e0: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
+000524f0: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
+00052500: 2774 7970 6527 2c20 6465 6661 756c 7454  'type', defaultT
+00052510: 7970 6529 0a20 2020 2020 2020 2073 7562  ype).        sub
+00052520: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
+00052530: 2020 2020 7375 6254 7970 652c 2070 6172      subType, par
+00052540: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
+00052550: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
+00052560: 6172 616d 7328 2766 6574 6368 506f 7369  arams('fetchPosi
+00052570: 7469 6f6e 7352 6973 6b27 2c20 4e6f 6e65  tionsRisk', None
+00052580: 2c20 7061 7261 6d73 2c20 276c 696e 6561  , params, 'linea
+00052590: 7227 290a 2020 2020 2020 2020 7061 7261  r').        para
+000525a0: 6d73 203d 2073 656c 662e 6f6d 6974 2870  ms = self.omit(p
+000525b0: 6172 616d 732c 2027 7479 7065 2729 0a20  arams, 'type'). 
+000525c0: 2020 2020 2020 2069 6620 7365 6c66 2e69         if self.i
+000525d0: 735f 6c69 6e65 6172 2874 7970 652c 2073  s_linear(type, s
+000525e0: 7562 5479 7065 293a 0a20 2020 2020 2020  ubType):.       
+000525f0: 2020 2020 206d 6574 686f 6420 3d20 2766       method = 'f
+00052600: 6170 6950 7269 7661 7465 4765 7450 6f73  apiPrivateGetPos
+00052610: 6974 696f 6e52 6973 6b27 0a20 2020 2020  itionRisk'.     
+00052620: 2020 2020 2020 2023 2020 2323 2320 5265         #  ### Re
+00052630: 7370 6f6e 7365 2065 7861 6d70 6c65 7320  sponse examples 
+00052640: 2023 2323 0a20 2020 2020 2020 2020 2020   ###.           
+00052650: 2023 0a20 2020 2020 2020 2020 2020 2023   #.            #
+00052660: 2046 6f72 204f 6e65 2d77 6179 2070 6f73   For One-way pos
+00052670: 6974 696f 6e20 6d6f 6465 3a0a 2020 2020  ition mode:.    
+00052680: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
+00052690: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+000526a0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+000526b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000526c0: 2020 2265 6e74 7279 5072 6963 6522 3a20    "entryPrice": 
+000526d0: 2230 2e30 3030 3030 222c 0a20 2020 2020  "0.00000",.     
+000526e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000526f0: 2020 2020 2022 6d61 7267 696e 5479 7065       "marginType
+00052700: 223a 2022 6973 6f6c 6174 6564 222c 0a20  ": "isolated",. 
+00052710: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00052720: 2020 2020 2020 2020 2022 6973 4175 746f           "isAuto
+00052730: 4164 644d 6172 6769 6e22 3a20 2266 616c  AddMargin": "fal
+00052740: 7365 222c 0a20 2020 2020 2020 2020 2020  se",.           
+00052750: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00052760: 6973 6f6c 6174 6564 4d61 7267 696e 223a  isolatedMargin":
+00052770: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
+00052780: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00052790: 2020 2020 2020 2020 2022 6c65 7665 7261           "levera
+000527a0: 6765 223a 2022 3130 222c 0a20 2020 2020  ge": "10",.     
+000527b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000527c0: 2020 2020 2022 6c69 7175 6964 6174 696f       "liquidatio
+000527d0: 6e50 7269 6365 223a 2022 3022 2c0a 2020  nPrice": "0",.  
+000527e0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+000527f0: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
+00052800: 6365 223a 2022 3636 3739 2e35 3036 3731  ce": "6679.50671
+00052810: 3137 3822 2c0a 2020 2020 2020 2020 2020  178",.          
+00052820: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052830: 226d 6178 4e6f 7469 6f6e 616c 5661 6c75  "maxNotionalValu
+00052840: 6522 3a20 2232 3030 3030 3030 3022 2c0a  e": "20000000",.
+00052850: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00052860: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
+00052870: 696f 6e41 6d74 223a 2022 302e 3030 3022  ionAmt": "0.000"
+00052880: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00052890: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
+000528a0: 626f 6c22 3a20 2242 5443 5553 4454 222c  bol": "BTCUSDT",
+000528b0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000528c0: 2020 2020 2020 2020 2020 2022 756e 5265             "unRe
+000528d0: 616c 697a 6564 5072 6f66 6974 223a 2022  alizedProfit": "
+000528e0: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
+000528f0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00052900: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
+00052910: 5369 6465 223a 2022 424f 5448 222c 0a20  Side": "BOTH",. 
+00052920: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00052930: 2020 2020 2020 2020 2022 7570 6461 7465           "update
+00052940: 5469 6d65 223a 2030 0a20 2020 2020 2020  Time": 0.       
+00052950: 2020 2020 2023 2020 2020 2020 2020 7d0a       #        }.
+00052960: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00052970: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
+00052980: 230a 2020 2020 2020 2020 2020 2020 2320  #.            # 
+00052990: 466f 7220 4865 6467 6520 706f 7369 7469  For Hedge positi
+000529a0: 6f6e 206d 6f64 653a 0a20 2020 2020 2020  on mode:.       
+000529b0: 2020 2020 2023 2020 2020 205b 0a20 2020       #     [.   
+000529c0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+000529d0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000529e0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000529f0: 656e 7472 7950 7269 6365 223a 2022 3635  entryPrice": "65
+00052a00: 3633 2e36 3635 3030 222c 0a20 2020 2020  63.66500",.     
+00052a10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052a20: 2020 2020 2022 6d61 7267 696e 5479 7065       "marginType
+00052a30: 223a 2022 6973 6f6c 6174 6564 222c 0a20  ": "isolated",. 
+00052a40: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00052a50: 2020 2020 2020 2020 2022 6973 4175 746f           "isAuto
+00052a60: 4164 644d 6172 6769 6e22 3a20 2266 616c  AddMargin": "fal
+00052a70: 7365 222c 0a20 2020 2020 2020 2020 2020  se",.           
+00052a80: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00052a90: 6973 6f6c 6174 6564 4d61 7267 696e 223a  isolatedMargin":
+00052aa0: 2022 3135 3531 372e 3534 3135 3034 3638   "15517.54150468
+00052ab0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+00052ac0: 2020 2020 2020 2020 2020 2020 2022 6c65               "le
+00052ad0: 7665 7261 6765 223a 2022 3130 222c 0a20  verage": "10",. 
+00052ae0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00052af0: 2020 2020 2020 2020 2022 6c69 7175 6964           "liquid
+00052b00: 6174 696f 6e50 7269 6365 223a 2022 3539  ationPrice": "59
+00052b10: 3330 2e37 3822 2c0a 2020 2020 2020 2020  30.78",.        
+00052b20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00052b30: 2020 226d 6172 6b50 7269 6365 223a 2022    "markPrice": "
+00052b40: 3636 3739 2e35 3036 3731 3137 3822 2c0a  6679.50671178",.
+00052b50: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00052b60: 2020 2020 2020 2020 2020 226d 6178 4e6f            "maxNo
+00052b70: 7469 6f6e 616c 5661 6c75 6522 3a20 2232  tionalValue": "2
+00052b80: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+00052b90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052ba0: 2020 2020 2270 6f73 6974 696f 6e41 6d74      "positionAmt
+00052bb0: 223a 2022 3230 2e30 3030 222c 0a20 2020  ": "20.000",.   
+00052bc0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00052bd0: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+00052be0: 2022 4254 4355 5344 5422 2c0a 2020 2020   "BTCUSDT",.    
+00052bf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052c00: 2020 2020 2020 2275 6e52 6561 6c69 7a65        "unRealize
+00052c10: 6450 726f 6669 7422 3a20 2232 3331 362e  dProfit": "2316.
+00052c20: 3833 3432 3335 3630 220a 2020 2020 2020  83423560".      
+00052c30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052c40: 2020 2020 2270 6f73 6974 696f 6e53 6964      "positionSid
+00052c50: 6522 3a20 224c 4f4e 4722 2c0a 2020 2020  e": "LONG",.    
+00052c60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052c70: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
+00052c80: 6522 3a20 3136 3235 3437 3433 3034 3736  e": 162547430476
+00052c90: 350a 2020 2020 2020 2020 2020 2020 2320  5.            # 
+00052ca0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00052cb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052cc0: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+00052cd0: 2020 2020 2020 2020 2020 2020 2022 656e               "en
+00052ce0: 7472 7950 7269 6365 223a 2022 302e 3030  tryPrice": "0.00
+00052cf0: 3030 3022 2c0a 2020 2020 2020 2020 2020  000",.          
+00052d00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052d10: 226d 6172 6769 6e54 7970 6522 3a20 2269  "marginType": "i
+00052d20: 736f 6c61 7465 6422 2c0a 2020 2020 2020  solated",.      
+00052d30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052d40: 2020 2020 2269 7341 7574 6f41 6464 4d61      "isAutoAddMa
+00052d50: 7267 696e 223a 2022 6661 6c73 6522 2c0a  rgin": "false",.
+00052d60: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00052d70: 2020 2020 2020 2020 2020 2269 736f 6c61            "isola
+00052d80: 7465 644d 6172 6769 6e22 3a20 2235 3431  tedMargin": "541
+00052d90: 332e 3935 3739 3939 3931 222c 0a20 2020  3.95799991",.   
+00052da0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00052db0: 2020 2020 2020 2022 6c65 7665 7261 6765         "leverage
+00052dc0: 223a 2022 3130 222c 0a20 2020 2020 2020  ": "10",.       
+00052dd0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052de0: 2020 2022 6c69 7175 6964 6174 696f 6e50     "liquidationP
+00052df0: 7269 6365 223a 2022 3731 3839 2e39 3522  rice": "7189.95"
+00052e00: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00052e10: 2020 2020 2020 2020 2020 2020 226d 6172              "mar
+00052e20: 6b50 7269 6365 223a 2022 3636 3739 2e35  kPrice": "6679.5
+00052e30: 3036 3731 3137 3822 2c0a 2020 2020 2020  0671178",.      
+00052e40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052e50: 2020 2020 226d 6178 4e6f 7469 6f6e 616c      "maxNotional
+00052e60: 5661 6c75 6522 3a20 2232 3030 3030 3030  Value": "2000000
+00052e70: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
+00052e80: 2320 2020 2020 2020 2020 2020 2020 2270  #             "p
+00052e90: 6f73 6974 696f 6e41 6d74 223a 2022 2d31  ositionAmt": "-1
+00052ea0: 302e 3030 3022 2c0a 2020 2020 2020 2020  0.000",.        
+00052eb0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00052ec0: 2020 2273 796d 626f 6c22 3a20 2242 5443    "symbol": "BTC
+00052ed0: 5553 4454 222c 0a20 2020 2020 2020 2020  USDT",.         
+00052ee0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052ef0: 2022 756e 5265 616c 697a 6564 5072 6f66   "unRealizedProf
+00052f00: 6974 223a 2022 2d31 3135 362e 3436 3731  it": "-1156.4671
+00052f10: 3137 3830 222c 0a20 2020 2020 2020 2020  1780",.         
+00052f20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052f30: 2022 706f 7369 7469 6f6e 5369 6465 223a   "positionSide":
+00052f40: 2022 5348 4f52 5422 2c0a 2020 2020 2020   "SHORT",.      
+00052f50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052f60: 2020 2020 2275 7064 6174 6554 696d 6522      "updateTime"
+00052f70: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
+00052f80: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+00052f90: 2020 2020 2020 2020 2320 2020 2020 5d0a          #     ].
+00052fa0: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+00052fb0: 662e 6973 5f69 6e76 6572 7365 2874 7970  f.is_inverse(typ
+00052fc0: 652c 2073 7562 5479 7065 293a 0a20 2020  e, subType):.   
+00052fd0: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00052fe0: 3d20 2764 6170 6950 7269 7661 7465 4765  = 'dapiPrivateGe
+00052ff0: 7450 6f73 6974 696f 6e52 6973 6b27 0a20  tPositionRisk'. 
+00053000: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00053010: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+00053020: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+00053030: 2e69 6420 2b20 2720 6665 7463 6850 6f73  .id + ' fetchPos
+00053040: 6974 696f 6e73 5269 736b 2829 2073 7570  itionsRisk() sup
+00053050: 706f 7274 7320 6c69 6e65 6172 2061 6e64  ports linear and
+00053060: 2069 6e76 6572 7365 2063 6f6e 7472 6163   inverse contrac
+00053070: 7473 206f 6e6c 7927 290a 2020 2020 2020  ts only').      
+00053080: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
+00053090: 6974 2067 6574 6174 7472 2873 656c 662c  it getattr(self,
+000530a0: 206d 6574 686f 6429 2873 656c 662e 6578   method)(self.ex
+000530b0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+000530c0: 7261 6d73 2929 0a20 2020 2020 2020 2072  rams)).        r
+000530d0: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
+000530e0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+000530f0: 6528 302c 206c 656e 2872 6573 706f 6e73  e(0, len(respons
+00053100: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
+00053110: 2070 6172 7365 6420 3d20 7365 6c66 2e70   parsed = self.p
+00053120: 6172 7365 5f70 6f73 6974 696f 6e5f 7269  arse_position_ri
+00053130: 736b 2872 6573 706f 6e73 655b 695d 290a  sk(response[i]).
+00053140: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00053150: 6c74 2e61 7070 656e 6428 7061 7273 6564  lt.append(parsed
+00053160: 290a 2020 2020 2020 2020 7379 6d62 6f6c  ).        symbol
+00053170: 7320 3d20 7365 6c66 2e6d 6172 6b65 745f  s = self.market_
+00053180: 7379 6d62 6f6c 7328 7379 6d62 6f6c 7329  symbols(symbols)
+00053190: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000531a0: 7365 6c66 2e66 696c 7465 725f 6279 5f61  self.filter_by_a
+000531b0: 7272 6179 2872 6573 756c 742c 2027 7379  rray(result, 'sy
+000531c0: 6d62 6f6c 272c 2073 796d 626f 6c73 2c20  mbol', symbols, 
+000531d0: 4661 6c73 6529 0a0a 2020 2020 6173 796e  False)..    asyn
+000531e0: 6320 6465 6620 6665 7463 685f 6675 6e64  c def fetch_fund
+000531f0: 696e 675f 6869 7374 6f72 7928 7365 6c66  ing_history(self
+00053200: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
+00053210: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
+00053220: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
+00053230: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
+00053240: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
+00053250: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
+00053260: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00053270: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00053280: 7468 6520 6869 7374 6f72 7920 6f66 2066  the history of f
+00053290: 756e 6469 6e67 2070 6179 6d65 6e74 7320  unding payments 
+000532a0: 7061 6964 2061 6e64 2072 6563 6569 7665  paid and receive
+000532b0: 6420 6f6e 2073 656c 6620 6163 636f 756e  d on self accoun
+000532c0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
+000532d0: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
+000532e0: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+000532f0: 2073 796d 626f 6c0a 2020 2020 2020 2020   symbol.        
+00053300: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+00053310: 7369 6e63 653a 2074 6865 2065 6172 6c69  since: the earli
+00053320: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
+00053330: 6f20 6665 7463 6820 6675 6e64 696e 6720  o fetch funding 
+00053340: 6869 7374 6f72 7920 666f 720a 2020 2020  history for.    
+00053350: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00053360: 6f6e 6520 6c69 6d69 743a 2074 6865 206d  one limit: the m
+00053370: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
+00053380: 2066 756e 6469 6e67 2068 6973 746f 7279   funding history
+00053390: 2073 7472 7563 7475 7265 7320 746f 2072   structures to r
+000533a0: 6574 7269 6576 650a 2020 2020 2020 2020  etrieve.        
+000533b0: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+000533c0: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+000533d0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+000533e0: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+000533f0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+00053400: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+00053410: 2061 2060 6675 6e64 696e 6720 6869 7374   a `funding hist
+00053420: 6f72 7920 7374 7275 6374 7572 6520 3c68  ory structure <h
+00053430: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00053440: 2e63 6f6d 2f23 2f3f 6964 3d66 756e 6469  .com/#/?id=fundi
+00053450: 6e67 2d68 6973 746f 7279 2d73 7472 7563  ng-history-struc
+00053460: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00053470: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
+00053480: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00053490: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+000534a0: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+000534b0: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
+000534c0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+000534d0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+000534e0: 2027 696e 636f 6d65 5479 7065 273a 2027   'incomeType': '
+000534f0: 4655 4e44 494e 475f 4645 4527 2c20 2023  FUNDING_FEE',  #
+00053500: 2022 5452 414e 5346 4552 22ef bc8c 2257   "TRANSFER"..."W
+00053510: 454c 434f 4d45 5f42 4f4e 5553 222c 2022  ELCOME_BONUS", "
+00053520: 5245 414c 495a 4544 5f50 4e4c 22ef bc8c  REALIZED_PNL"...
+00053530: 2246 554e 4449 4e47 5f46 4545 222c 2022  "FUNDING_FEE", "
+00053540: 434f 4d4d 4953 5349 4f4e 2220 616e 6420  COMMISSION" and 
+00053550: 2249 4e53 5552 414e 4345 5f43 4c45 4152  "INSURANCE_CLEAR
+00053560: 220a 2020 2020 2020 2020 7d0a 2020 2020  ".        }.    
+00053570: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
+00053580: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00053590: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+000535a0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+000535b0: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+000535c0: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
+000535d0: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+000535e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000535f0: 6e6f 7420 6d61 726b 6574 5b27 7377 6170  not market['swap
+00053600: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00053610: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
+00053620: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
+00053630: 2027 2066 6574 6368 4675 6e64 696e 6748   ' fetchFundingH
+00053640: 6973 746f 7279 2829 2073 7570 706f 7274  istory() support
+00053650: 7320 7377 6170 2063 6f6e 7472 6163 7473  s swap contracts
+00053660: 206f 6e6c 7927 290a 2020 2020 2020 2020   only').        
+00053670: 7375 6254 7970 6520 3d20 4e6f 6e65 0a20  subType = None. 
+00053680: 2020 2020 2020 2073 7562 5479 7065 2c20         subType, 
+00053690: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+000536a0: 6e64 6c65 5f73 7562 5f74 7970 655f 616e  ndle_sub_type_an
+000536b0: 645f 7061 7261 6d73 2827 6665 7463 6846  d_params('fetchF
+000536c0: 756e 6469 6e67 4869 7374 6f72 7927 2c20  undingHistory', 
+000536d0: 6d61 726b 6574 2c20 7061 7261 6d73 2c20  market, params, 
+000536e0: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
+000536f0: 2020 6966 2073 696e 6365 2069 7320 6e6f    if since is no
+00053700: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00053710: 2020 2020 7265 7175 6573 745b 2773 7461      request['sta
+00053720: 7274 5469 6d65 275d 203d 2073 696e 6365  rtTime'] = since
+00053730: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
+00053740: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+00053750: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00053760: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
+00053770: 6d69 740a 2020 2020 2020 2020 6465 6661  mit.        defa
+00053780: 756c 7454 7970 6520 3d20 7365 6c66 2e73  ultType = self.s
+00053790: 6166 655f 7374 7269 6e67 5f32 2873 656c  afe_string_2(sel
+000537a0: 662e 6f70 7469 6f6e 732c 2027 6665 7463  f.options, 'fetc
+000537b0: 6846 756e 6469 6e67 4869 7374 6f72 7927  hFundingHistory'
+000537c0: 2c20 2764 6566 6175 6c74 5479 7065 272c  , 'defaultType',
+000537d0: 2027 6675 7475 7265 2729 0a20 2020 2020   'future').     
+000537e0: 2020 2074 7970 6520 3d20 7365 6c66 2e73     type = self.s
+000537f0: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
+00053800: 732c 2027 7479 7065 272c 2064 6566 6175  s, 'type', defau
+00053810: 6c74 5479 7065 290a 2020 2020 2020 2020  ltType).        
+00053820: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+00053830: 6974 2870 6172 616d 732c 2027 7479 7065  it(params, 'type
+00053840: 2729 0a20 2020 2020 2020 2069 6620 7365  ').        if se
+00053850: 6c66 2e69 735f 6c69 6e65 6172 2874 7970  lf.is_linear(typ
+00053860: 652c 2073 7562 5479 7065 293a 0a20 2020  e, subType):.   
+00053870: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00053880: 3d20 2766 6170 6950 7269 7661 7465 4765  = 'fapiPrivateGe
+00053890: 7449 6e63 6f6d 6527 0a20 2020 2020 2020  tIncome'.       
+000538a0: 2065 6c69 6620 7365 6c66 2e69 735f 696e   elif self.is_in
+000538b0: 7665 7273 6528 7479 7065 2c20 7375 6254  verse(type, subT
+000538c0: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
+000538d0: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
+000538e0: 5072 6976 6174 6547 6574 496e 636f 6d65  PrivateGetIncome
+000538f0: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
+00053900: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00053910: 6520 4e6f 7453 7570 706f 7274 6564 2873  e NotSupported(s
+00053920: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+00053930: 4675 6e64 696e 6748 6973 746f 7279 2829  FundingHistory()
+00053940: 2073 7570 706f 7274 7320 6c69 6e65 6172   supports linear
+00053950: 2061 6e64 2069 6e76 6572 7365 2063 6f6e   and inverse con
+00053960: 7472 6163 7473 206f 6e6c 7927 290a 2020  tracts only').  
+00053970: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00053980: 2061 7761 6974 2067 6574 6174 7472 2873   await getattr(s
+00053990: 656c 662c 206d 6574 686f 6429 2873 656c  elf, method)(sel
+000539a0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+000539b0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+000539c0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+000539d0: 6172 7365 5f69 6e63 6f6d 6573 2872 6573  arse_incomes(res
+000539e0: 706f 6e73 652c 206d 6172 6b65 742c 2073  ponse, market, s
+000539f0: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
+00053a00: 2020 6173 796e 6320 6465 6620 7365 745f    async def set_
+00053a10: 6c65 7665 7261 6765 2873 656c 662c 206c  leverage(self, l
+00053a20: 6576 6572 6167 652c 2073 796d 626f 6c3a  everage, symbol:
+00053a30: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+00053a40: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00053a50: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00053a60: 2020 2020 2020 2073 6574 2074 6865 206c         set the l
+00053a70: 6576 656c 206f 6620 6c65 7665 7261 6765  evel of leverage
+00053a80: 2066 6f72 2061 206d 6172 6b65 740a 2020   for a market.  
+00053a90: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
+00053aa0: 6174 206c 6576 6572 6167 653a 2074 6865  at leverage: the
+00053ab0: 2072 6174 6520 6f66 206c 6576 6572 6167   rate of leverag
+00053ac0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+00053ad0: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
+00053ae0: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
+00053af0: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
+00053b00: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+00053b10: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+00053b20: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+00053b30: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
+00053b40: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+00053b50: 7475 726e 7320 6469 6374 3a20 7265 7370  turns dict: resp
+00053b60: 6f6e 7365 2066 726f 6d20 7468 6520 6578  onse from the ex
+00053b70: 6368 616e 6765 0a20 2020 2020 2020 2022  change.        "
+00053b80: 2222 0a20 2020 2020 2020 2069 6620 7379  "".        if sy
+00053b90: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
+00053ba0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00053bb0: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
+00053bc0: 6428 7365 6c66 2e69 6420 2b20 2720 7365  d(self.id + ' se
+00053bd0: 744c 6576 6572 6167 6528 2920 7265 7175  tLeverage() requ
+00053be0: 6972 6573 2061 2073 796d 626f 6c20 6172  ires a symbol ar
+00053bf0: 6775 6d65 6e74 2729 0a20 2020 2020 2020  gument').       
+00053c00: 2023 2057 4152 4e49 4e47 3a20 5448 4953   # WARNING: THIS
+00053c10: 2057 494c 4c20 494e 4352 4541 5345 204c   WILL INCREASE L
+00053c20: 4951 5549 4441 5449 4f4e 2050 5249 4345  IQUIDATION PRICE
+00053c30: 2046 4f52 204f 5045 4e20 4953 4f4c 4154   FOR OPEN ISOLAT
+00053c40: 4544 204c 4f4e 4720 504f 5349 5449 4f4e  ED LONG POSITION
+00053c50: 530a 2020 2020 2020 2020 2320 414e 4420  S.        # AND 
+00053c60: 4445 4352 4541 5345 204c 4951 5549 4441  DECREASE LIQUIDA
+00053c70: 5449 4f4e 2050 5249 4345 2046 4f52 204f  TION PRICE FOR O
+00053c80: 5045 4e20 4953 4f4c 4154 4544 2053 484f  PEN ISOLATED SHO
+00053c90: 5254 2050 4f53 4954 494f 4e53 0a20 2020  RT POSITIONS.   
+00053ca0: 2020 2020 2069 6620 286c 6576 6572 6167       if (leverag
+00053cb0: 6520 3c20 3129 206f 7220 286c 6576 6572  e < 1) or (lever
+00053cc0: 6167 6520 3e20 3132 3529 3a0a 2020 2020  age > 125):.    
+00053cd0: 2020 2020 2020 2020 7261 6973 6520 4261          raise Ba
+00053ce0: 6452 6571 7565 7374 2873 656c 662e 6964  dRequest(self.id
+00053cf0: 202b 2027 206c 6576 6572 6167 6520 7368   + ' leverage sh
+00053d00: 6f75 6c64 2062 6520 6265 7477 6565 6e20  ould be between 
+00053d10: 3120 616e 6420 3132 3527 290a 2020 2020  1 and 125').    
+00053d20: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+00053d30: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00053d40: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00053d50: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+00053d60: 6c29 0a20 2020 2020 2020 206d 6574 686f  l).        metho
+00053d70: 6420 3d20 4e6f 6e65 0a20 2020 2020 2020  d = None.       
+00053d80: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
+00053d90: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
+00053da0: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
+00053db0: 5072 6976 6174 6550 6f73 744c 6576 6572  PrivatePostLever
+00053dc0: 6167 6527 0a20 2020 2020 2020 2065 6c69  age'.        eli
+00053dd0: 6620 6d61 726b 6574 5b27 696e 7665 7273  f market['invers
+00053de0: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+00053df0: 206d 6574 686f 6420 3d20 2764 6170 6950   method = 'dapiP
+00053e00: 7269 7661 7465 506f 7374 4c65 7665 7261  rivatePostLevera
+00053e10: 6765 270a 2020 2020 2020 2020 656c 7365  ge'.        else
+00053e20: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00053e30: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
+00053e40: 2873 656c 662e 6964 202b 2027 2073 6574  (self.id + ' set
+00053e50: 4c65 7665 7261 6765 2829 2073 7570 706f  Leverage() suppo
+00053e60: 7274 7320 6c69 6e65 6172 2061 6e64 2069  rts linear and i
+00053e70: 6e76 6572 7365 2063 6f6e 7472 6163 7473  nverse contracts
+00053e80: 206f 6e6c 7927 290a 2020 2020 2020 2020   only').        
+00053e90: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+00053ea0: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00053eb0: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+00053ec0: 2020 2020 2020 2020 2020 2020 276c 6576              'lev
+00053ed0: 6572 6167 6527 3a20 6c65 7665 7261 6765  erage': leverage
+00053ee0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00053ef0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00053f00: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00053f10: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
+00053f20: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00053f30: 6d73 2929 0a0a 2020 2020 6173 796e 6320  ms))..    async 
+00053f40: 6465 6620 7365 745f 6d61 7267 696e 5f6d  def set_margin_m
+00053f50: 6f64 6528 7365 6c66 2c20 6d61 7267 696e  ode(self, margin
+00053f60: 4d6f 6465 3a20 7374 722c 2073 796d 626f  Mode: str, symbo
+00053f70: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
+00053f80: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+00053f90: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00053fa0: 0a20 2020 2020 2020 2073 6574 206d 6172  .        set mar
+00053fb0: 6769 6e20 6d6f 6465 2074 6f20 2763 726f  gin mode to 'cro
+00053fc0: 7373 2720 6f72 2027 6973 6f6c 6174 6564  ss' or 'isolated
+00053fd0: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
+00053fe0: 2073 7472 206d 6172 6769 6e4d 6f64 653a   str marginMode:
+00053ff0: 2027 6372 6f73 7327 206f 7220 2769 736f   'cross' or 'iso
+00054000: 6c61 7465 6427 0a20 2020 2020 2020 203a  lated'.        :
+00054010: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
+00054020: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+00054030: 2073 796d 626f 6c0a 2020 2020 2020 2020   symbol.        
+00054040: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+00054050: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+00054060: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+00054070: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+00054080: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+00054090: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+000540a0: 2072 6573 706f 6e73 6520 6672 6f6d 2074   response from t
+000540b0: 6865 2065 7863 6861 6e67 650a 2020 2020  he exchange.    
+000540c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000540d0: 6966 2073 796d 626f 6c20 6973 204e 6f6e  if symbol is Non
+000540e0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000540f0: 6169 7365 2041 7267 756d 656e 7473 5265  aise ArgumentsRe
+00054100: 7175 6972 6564 2873 656c 662e 6964 202b  quired(self.id +
+00054110: 2027 2073 6574 4d61 7267 696e 4d6f 6465   ' setMarginMode
+00054120: 2829 2072 6571 7569 7265 7320 6120 7379  () requires a sy
+00054130: 6d62 6f6c 2061 7267 756d 656e 7427 290a  mbol argument').
+00054140: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00054150: 2020 2320 7b22 636f 6465 223a 202d 3430    # {"code": -40
+00054160: 3438 202c 2022 6d73 6722 3a20 224d 6172  48 , "msg": "Mar
+00054170: 6769 6e20 7479 7065 2063 616e 6e6f 7420  gin type cannot 
+00054180: 6265 2063 6861 6e67 6564 2069 6620 7468  be changed if th
+00054190: 6572 6520 6578 6973 7473 2070 6f73 6974  ere exists posit
+000541a0: 696f 6e2e 227d 0a20 2020 2020 2020 2023  ion."}.        #
+000541b0: 0a20 2020 2020 2020 2023 206f 720a 2020  .        # or.  
+000541c0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000541d0: 2320 7b22 636f 6465 223a 2032 3030 2c20  # {"code": 200, 
+000541e0: 226d 7367 223a 2022 7375 6363 6573 7322  "msg": "success"
+000541f0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+00054200: 2020 2020 6d61 7267 696e 4d6f 6465 203d      marginMode =
+00054210: 206d 6172 6769 6e4d 6f64 652e 7570 7065   marginMode.uppe
+00054220: 7228 290a 2020 2020 2020 2020 6966 206d  r().        if m
+00054230: 6172 6769 6e4d 6f64 6520 3d3d 2027 4352  arginMode == 'CR
+00054240: 4f53 5327 3a0a 2020 2020 2020 2020 2020  OSS':.          
+00054250: 2020 6d61 7267 696e 4d6f 6465 203d 2027    marginMode = '
+00054260: 4352 4f53 5345 4427 0a20 2020 2020 2020  CROSSED'.       
+00054270: 2069 6620 286d 6172 6769 6e4d 6f64 6520   if (marginMode 
+00054280: 213d 2027 4953 4f4c 4154 4544 2729 2061  != 'ISOLATED') a
+00054290: 6e64 2028 6d61 7267 696e 4d6f 6465 2021  nd (marginMode !
+000542a0: 3d20 2743 524f 5353 4544 2729 3a0a 2020  = 'CROSSED'):.  
+000542b0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000542c0: 4261 6452 6571 7565 7374 2873 656c 662e  BadRequest(self.
+000542d0: 6964 202b 2027 206d 6172 6769 6e4d 6f64  id + ' marginMod
+000542e0: 6520 6d75 7374 2062 6520 6569 7468 6572  e must be either
+000542f0: 2069 736f 6c61 7465 6420 6f72 2063 726f   isolated or cro
+00054300: 7373 2729 0a20 2020 2020 2020 2061 7761  ss').        awa
+00054310: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+00054320: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
+00054330: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+00054340: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+00054350: 2020 2020 6d65 7468 6f64 203d 204e 6f6e      method = Non
+00054360: 650a 2020 2020 2020 2020 6966 206d 6172  e.        if mar
+00054370: 6b65 745b 276c 696e 6561 7227 5d3a 0a20  ket['linear']:. 
+00054380: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+00054390: 6420 3d20 2766 6170 6950 7269 7661 7465  d = 'fapiPrivate
+000543a0: 506f 7374 4d61 7267 696e 5479 7065 270a  PostMarginType'.
+000543b0: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
+000543c0: 6b65 745b 2769 6e76 6572 7365 275d 3a0a  ket['inverse']:.
+000543d0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+000543e0: 6f64 203d 2027 6461 7069 5072 6976 6174  od = 'dapiPrivat
+000543f0: 6550 6f73 744d 6172 6769 6e54 7970 6527  ePostMarginType'
+00054400: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00054410: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00054420: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
+00054430: 6c66 2e69 6420 2b20 2720 7365 744d 6172  lf.id + ' setMar
+00054440: 6769 6e4d 6f64 6528 2920 7375 7070 6f72  ginMode() suppor
+00054450: 7473 206c 696e 6561 7220 616e 6420 696e  ts linear and in
+00054460: 7665 7273 6520 636f 6e74 7261 6374 7320  verse contracts 
+00054470: 6f6e 6c79 2729 0a20 2020 2020 2020 2072  only').        r
+00054480: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+00054490: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
+000544a0: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
+000544b0: 2020 2020 2020 2020 2020 2027 6d61 7267             'marg
+000544c0: 696e 5479 7065 273a 206d 6172 6769 6e4d  inType': marginM
+000544d0: 6f64 652c 0a20 2020 2020 2020 207d 0a20  ode,.        }. 
+000544e0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+000544f0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
+00054500: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00054510: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00054520: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00054530: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
+00054540: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00054550: 6d73 2929 0a20 2020 2020 2020 2065 7863  ms)).        exc
+00054560: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+00054570: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+00054580: 2320 6e6f 7420 616e 2065 7272 6f72 0a20  # not an error. 
+00054590: 2020 2020 2020 2020 2020 2023 2068 7474             # htt
+000545a0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+000545b0: 6363 7874 2f63 6378 742f 6973 7375 6573  ccxt/ccxt/issues
+000545c0: 2f31 3132 3638 0a20 2020 2020 2020 2020  /11268.         
+000545d0: 2020 2023 2068 7474 7073 3a2f 2f67 6974     # https://git
+000545e0: 6875 622e 636f 6d2f 6363 7874 2f63 6378  hub.com/ccxt/ccx
+000545f0: 742f 7075 6c6c 2f31 3136 3234 0a20 2020  t/pull/11624.   
+00054600: 2020 2020 2020 2020 2023 2050 4f53 5420           # POST 
+00054610: 6874 7470 733a 2f2f 6661 7069 2e62 696e  https://fapi.bin
+00054620: 616e 6365 2e63 6f6d 2f66 6170 692f 7631  ance.com/fapi/v1
+00054630: 2f6d 6172 6769 6e54 7970 6520 3430 3020  /marginType 400 
+00054640: 4261 6420 5265 7175 6573 740a 2020 2020  Bad Request.    
+00054650: 2020 2020 2020 2020 2320 6269 6e61 6e63          # binanc
+00054660: 6575 7364 6d0a 2020 2020 2020 2020 2020  eusdm.          
+00054670: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00054680: 652c 204d 6172 6769 6e4d 6f64 6541 6c72  e, MarginModeAlr
+00054690: 6561 6479 5365 7429 3a0a 2020 2020 2020  eadySet):.      
+000546a0: 2020 2020 2020 2020 2020 7468 726f 774d            throwM
+000546b0: 6172 6769 6e4d 6f64 6541 6c72 6561 6479  arginModeAlready
+000546c0: 5365 7420 3d20 7365 6c66 2e73 6166 655f  Set = self.safe_
+000546d0: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
+000546e0: 6e73 2c20 2774 6872 6f77 4d61 7267 696e  ns, 'throwMargin
+000546f0: 4d6f 6465 416c 7265 6164 7953 6574 272c  ModeAlreadySet',
+00054700: 2046 616c 7365 290a 2020 2020 2020 2020   False).        
+00054710: 2020 2020 2020 2020 6966 2074 6872 6f77          if throw
+00054720: 4d61 7267 696e 4d6f 6465 416c 7265 6164  MarginModeAlread
+00054730: 7953 6574 3a0a 2020 2020 2020 2020 2020  ySet:.          
+00054740: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00054750: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00054760: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00054770: 2020 2020 2020 2020 2020 2020 7265 7370              resp
+00054780: 6f6e 7365 203d 207b 2763 6f64 6527 3a20  onse = {'code': 
+00054790: 2d34 3034 362c 2027 6d73 6727 3a20 274e  -4046, 'msg': 'N
+000547a0: 6f20 6e65 6564 2074 6f20 6368 616e 6765  o need to change
+000547b0: 206d 6172 6769 6e20 7479 7065 2e27 7d0a   margin type.'}.
+000547c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000547d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000547e0: 2020 7261 6973 6520 650a 2020 2020 2020    raise e.      
+000547f0: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+00054800: 650a 0a20 2020 2061 7379 6e63 2064 6566  e..    async def
+00054810: 2073 6574 5f70 6f73 6974 696f 6e5f 6d6f   set_position_mo
+00054820: 6465 2873 656c 662c 2068 6564 6765 642c  de(self, hedged,
+00054830: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+00054840: 6c5b 7374 725d 203d 204e 6f6e 652c 2070  l[str] = None, p
+00054850: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00054860: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+00054870: 6574 2068 6564 6765 6420 746f 2054 7275  et hedged to Tru
+00054880: 6520 6f72 2046 616c 7365 2066 6f72 2061  e or False for a
+00054890: 206d 6172 6b65 740a 2020 2020 2020 2020   market.        
+000548a0: 3a70 6172 616d 2062 6f6f 6c20 6865 6467  :param bool hedg
+000548b0: 6564 3a20 7365 7420 746f 2054 7275 6520  ed: set to True 
+000548c0: 746f 2075 7365 2064 7561 6c53 6964 6550  to use dualSideP
+000548d0: 6f73 6974 696f 6e0a 2020 2020 2020 2020  osition.        
+000548e0: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+000548f0: 7379 6d62 6f6c 3a20 6e6f 7420 7573 6564  symbol: not used
+00054900: 2062 7920 6269 6e61 6e63 6520 7365 7450   by binance setP
+00054910: 6f73 6974 696f 6e4d 6f64 6528 290a 2020  ositionMode().  
+00054920: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00054930: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+00054940: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00054950: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
+00054960: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
+00054970: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+00054980: 2064 6963 743a 2072 6573 706f 6e73 6520   dict: response 
+00054990: 6672 6f6d 2074 6865 2065 7863 6861 6e67  from the exchang
+000549a0: 650a 2020 2020 2020 2020 2222 220a 2020  e.        """.  
+000549b0: 2020 2020 2020 6465 6661 756c 7454 7970        defaultTyp
+000549c0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+000549d0: 7269 6e67 2873 656c 662e 6f70 7469 6f6e  ring(self.option
+000549e0: 732c 2027 6465 6661 756c 7454 7970 6527  s, 'defaultType'
+000549f0: 2c20 2766 7574 7572 6527 290a 2020 2020  , 'future').    
+00054a00: 2020 2020 7479 7065 203d 2073 656c 662e      type = self.
+00054a10: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
+00054a20: 6d73 2c20 2774 7970 6527 2c20 6465 6661  ms, 'type', defa
+00054a30: 756c 7454 7970 6529 0a20 2020 2020 2020  ultType).       
+00054a40: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+00054a50: 6d69 7428 7061 7261 6d73 2c20 5b27 7479  mit(params, ['ty
+00054a60: 7065 275d 290a 2020 2020 2020 2020 6475  pe']).        du
+00054a70: 616c 5369 6465 506f 7369 7469 6f6e 203d  alSidePosition =
+00054a80: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+00054a90: 2068 6564 6765 643a 0a20 2020 2020 2020   hedged:.       
+00054aa0: 2020 2020 2064 7561 6c53 6964 6550 6f73       dualSidePos
+00054ab0: 6974 696f 6e20 3d20 2774 7275 6527 0a20  ition = 'true'. 
+00054ac0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00054ad0: 2020 2020 2020 2020 2064 7561 6c53 6964           dualSid
+00054ae0: 6550 6f73 6974 696f 6e20 3d20 2766 616c  ePosition = 'fal
+00054af0: 7365 270a 2020 2020 2020 2020 7265 7175  se'.        requ
+00054b00: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+00054b10: 2020 2020 2764 7561 6c53 6964 6550 6f73      'dualSidePos
+00054b20: 6974 696f 6e27 3a20 6475 616c 5369 6465  ition': dualSide
+00054b30: 506f 7369 7469 6f6e 2c0a 2020 2020 2020  Position,.      
+00054b40: 2020 7d0a 2020 2020 2020 2020 6d65 7468    }.        meth
+00054b50: 6f64 203d 204e 6f6e 650a 2020 2020 2020  od = None.      
+00054b60: 2020 6966 2073 656c 662e 6973 5f69 6e76    if self.is_inv
+00054b70: 6572 7365 2874 7970 6529 3a0a 2020 2020  erse(type):.    
+00054b80: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
+00054b90: 2027 6461 7069 5072 6976 6174 6550 6f73   'dapiPrivatePos
+00054ba0: 7450 6f73 6974 696f 6e53 6964 6544 7561  tPositionSideDua
+00054bb0: 6c27 0a20 2020 2020 2020 2065 6c73 653a  l'.        else:
+00054bc0: 0a20 2020 2020 2020 2020 2020 2023 2064  .            # d
+00054bd0: 6566 6175 6c74 2074 6f20 6675 7475 7265  efault to future
+00054be0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00054bf0: 686f 6420 3d20 2766 6170 6950 7269 7661  hod = 'fapiPriva
+00054c00: 7465 506f 7374 506f 7369 7469 6f6e 5369  tePostPositionSi
+00054c10: 6465 4475 616c 270a 2020 2020 2020 2020  deDual'.        
+00054c20: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00054c30: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00054c40: 2020 2263 6f64 6522 3a20 3230 302c 0a20    "code": 200,. 
+00054c50: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00054c60: 6d73 6722 3a20 2273 7563 6365 7373 220a  msg": "success".
+00054c70: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+00054c80: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00054c90: 2020 7265 7475 726e 2061 7761 6974 2067    return await g
+00054ca0: 6574 6174 7472 2873 656c 662c 206d 6574  etattr(self, met
+00054cb0: 686f 6429 2873 656c 662e 6578 7465 6e64  hod)(self.extend
+00054cc0: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+00054cd0: 2929 0a0a 2020 2020 6173 796e 6320 6465  ))..    async de
+00054ce0: 6620 6665 7463 685f 7365 7474 6c65 6d65  f fetch_settleme
+00054cf0: 6e74 5f68 6973 746f 7279 2873 656c 662c  nt_history(self,
+00054d00: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+00054d10: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
+00054d20: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
+00054d30: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
+00054d40: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
+00054d50: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+00054d60: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00054d70: 0a20 2020 2020 2020 2066 6574 6368 6573  .        fetches
+00054d80: 2068 6973 746f 7269 6361 6c20 7365 7474   historical sett
+00054d90: 6c65 6d65 6e74 2072 6563 6f72 6473 0a20  lement records. 
+00054da0: 2020 2020 2020 2073 6565 2068 7474 7073         see https
+00054db0: 3a2f 2f62 696e 616e 6365 2d64 6f63 732e  ://binance-docs.
+00054dc0: 6769 7468 7562 2e69 6f2f 6170 6964 6f63  github.io/apidoc
+00054dd0: 732f 766f 7074 696f 6e73 2f65 6e2f 2368  s/voptions/en/#h
+00054de0: 6973 746f 7269 6361 6c2d 6578 6572 6369  istorical-exerci
+00054df0: 7365 2d72 6563 6f72 6473 0a20 2020 2020  se-records.     
+00054e00: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
+00054e10: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
+00054e20: 726b 6574 2073 796d 626f 6c20 6f66 2074  rket symbol of t
+00054e30: 6865 2073 6574 746c 656d 656e 7420 6869  he settlement hi
+00054e40: 7374 6f72 790a 2020 2020 2020 2020 3a70  story.        :p
+00054e50: 6172 616d 2069 6e74 2073 696e 6365 3a20  aram int since: 
+00054e60: 7469 6d65 7374 616d 7020 696e 206d 730a  timestamp in ms.
+00054e70: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00054e80: 6e74 206c 696d 6974 3a20 6e75 6d62 6572  nt limit: number
+00054e90: 206f 6620 7265 636f 7264 732c 2064 6566   of records, def
+00054ea0: 6175 6c74 2031 3030 2c20 6d61 7820 3130  ault 100, max 10
+00054eb0: 300a 2020 2020 2020 2020 3a70 6172 616d  0.        :param
+00054ec0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+00054ed0: 6368 616e 6765 2073 7065 6369 6669 6320  change specific 
+00054ee0: 7061 7261 6d73 0a20 2020 2020 2020 203a  params.        :
+00054ef0: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
+00054f00: 6120 6c69 7374 206f 6620 5b73 6574 746c  a list of [settl
+00054f10: 656d 656e 7420 6869 7374 6f72 7920 6f62  ement history ob
+00054f20: 6a65 6374 735d 0a20 2020 2020 2020 2022  jects].        "
+00054f30: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
+00054f40: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00054f50: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+00054f60: 6b65 7420 3d20 4e6f 6e65 2069 6620 2873  ket = None if (s
+00054f70: 796d 626f 6c20 6973 204e 6f6e 6529 2065  ymbol is None) e
+00054f80: 6c73 6520 7365 6c66 2e6d 6172 6b65 7428  lse self.market(
+00054f90: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+00054fa0: 7479 7065 203d 204e 6f6e 650a 2020 2020  type = None.    
+00054fb0: 2020 2020 7479 7065 2c20 7061 7261 6d73      type, params
+00054fc0: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+00054fd0: 6172 6b65 745f 7479 7065 5f61 6e64 5f70  arket_type_and_p
+00054fe0: 6172 616d 7328 2766 6574 6368 5365 7474  arams('fetchSett
+00054ff0: 6c65 6d65 6e74 4869 7374 6f72 7927 2c20  lementHistory', 
+00055000: 6d61 726b 6574 2c20 7061 7261 6d73 290a  market, params).
+00055010: 2020 2020 2020 2020 6966 2074 7970 6520          if type 
+00055020: 213d 2027 6f70 7469 6f6e 273a 0a20 2020  != 'option':.   
+00055030: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+00055040: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+00055050: 2e69 6420 2b20 2720 6665 7463 6853 6574  .id + ' fetchSet
+00055060: 746c 656d 656e 7448 6973 746f 7279 2829  tlementHistory()
+00055070: 2073 7570 706f 7274 7320 6f70 7469 6f6e   supports option
+00055080: 206d 6172 6b65 7473 206f 6e6c 7927 290a   markets only').
+00055090: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+000550a0: 3d20 7b7d 0a20 2020 2020 2020 2069 6620  = {}.        if 
+000550b0: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
+000550c0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000550d0: 7379 6d62 6f6c 203d 206d 6172 6b65 745b  symbol = market[
+000550e0: 2773 796d 626f 6c27 5d0a 2020 2020 2020  'symbol'].      
+000550f0: 2020 2020 2020 7265 7175 6573 745b 2775        request['u
+00055100: 6e64 6572 6c79 696e 6727 5d20 3d20 6d61  nderlying'] = ma
+00055110: 726b 6574 5b27 6261 7365 4964 275d 202b  rket['baseId'] +
+00055120: 206d 6172 6b65 745b 2771 756f 7465 4964   market['quoteId
+00055130: 275d 0a20 2020 2020 2020 2069 6620 7369  '].        if si
+00055140: 6e63 6520 6973 206e 6f74 204e 6f6e 653a  nce is not None:
+00055150: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00055160: 7565 7374 5b27 7374 6172 7454 696d 6527  uest['startTime'
+00055170: 5d20 3d20 7369 6e63 650a 2020 2020 2020  ] = since.      
+00055180: 2020 6966 206c 696d 6974 2069 7320 6e6f    if limit is no
+00055190: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000551a0: 2020 2020 7265 7175 6573 745b 276c 696d      request['lim
+000551b0: 6974 275d 203d 206c 696d 6974 0a20 2020  it'] = limit.   
+000551c0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+000551d0: 6177 6169 7420 7365 6c66 2e65 6170 6950  await self.eapiP
+000551e0: 7562 6c69 6347 6574 4578 6572 6369 7365  ublicGetExercise
+000551f0: 4869 7374 6f72 7928 7365 6c66 2e65 7874  History(self.ext
+00055200: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00055210: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+00055220: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
+00055230: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00055240: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00055250: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00055260: 6c22 3a20 2245 5448 2d32 3330 3232 332d  l": "ETH-230223-
+00055270: 3139 3030 2d50 222c 0a20 2020 2020 2020  1900-P",.       
+00055280: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00055290: 7374 7269 6b65 5072 6963 6522 3a20 2231  strikePrice": "1
+000552a0: 3930 3022 2c0a 2020 2020 2020 2020 2320  900",.        # 
+000552b0: 2020 2020 2020 2020 2020 2020 2272 6561              "rea
+000552c0: 6c53 7472 696b 6550 7269 6365 223a 2022  lStrikePrice": "
+000552d0: 3136 3635 2e35 3839 3733 3334 222c 0a20  1665.5897334",. 
+000552e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000552f0: 2020 2020 2022 6578 7069 7279 4461 7465       "expiryDate
+00055300: 223a 2031 3637 3731 3339 3230 3030 3030  ": 1677139200000
+00055310: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00055320: 2020 2020 2020 2020 2273 7472 696b 6552          "strikeR
+00055330: 6573 756c 7422 3a20 2252 4541 4c49 5354  esult": "REALIST
+00055340: 4943 5f56 414c 5545 5f53 5452 4943 4b45  IC_VALUE_STRICKE
+00055350: 4e22 0a20 2020 2020 2020 2023 2020 2020  N".        #    
+00055360: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00055370: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+00055380: 0a20 2020 2020 2020 2073 6574 746c 656d  .        settlem
+00055390: 656e 7473 203d 2073 656c 662e 7061 7273  ents = self.pars
+000553a0: 655f 7365 7474 6c65 6d65 6e74 7328 7265  e_settlements(re
+000553b0: 7370 6f6e 7365 2c20 6d61 726b 6574 290a  sponse, market).
+000553c0: 2020 2020 2020 2020 736f 7274 6564 203d          sorted =
+000553d0: 2073 656c 662e 736f 7274 5f62 7928 7365   self.sort_by(se
+000553e0: 7474 6c65 6d65 6e74 732c 2027 7469 6d65  ttlements, 'time
+000553f0: 7374 616d 7027 290a 2020 2020 2020 2020  stamp').        
+00055400: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
+00055410: 6572 5f62 795f 7379 6d62 6f6c 5f73 696e  er_by_symbol_sin
+00055420: 6365 5f6c 696d 6974 2873 6f72 7465 642c  ce_limit(sorted,
+00055430: 2073 796d 626f 6c2c 2073 696e 6365 2c20   symbol, since, 
+00055440: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
+00055450: 7061 7273 655f 7365 7474 6c65 6d65 6e74  parse_settlement
+00055460: 2873 656c 662c 2073 6574 746c 656d 656e  (self, settlemen
+00055470: 742c 206d 6172 6b65 7429 3a0a 2020 2020  t, market):.    
+00055480: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00055490: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+000554a0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+000554b0: 3a20 2245 5448 2d32 3330 3232 332d 3139  : "ETH-230223-19
+000554c0: 3030 2d50 222c 0a20 2020 2020 2020 2023  00-P",.        #
+000554d0: 2020 2020 2020 2020 2022 7374 7269 6b65           "strike
+000554e0: 5072 6963 6522 3a20 2231 3930 3022 2c0a  Price": "1900",.
+000554f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00055500: 2020 2272 6561 6c53 7472 696b 6550 7269    "realStrikePri
+00055510: 6365 223a 2022 3136 3635 2e35 3839 3733  ce": "1665.58973
+00055520: 3334 222c 0a20 2020 2020 2020 2023 2020  34",.        #  
+00055530: 2020 2020 2020 2022 6578 7069 7279 4461         "expiryDa
+00055540: 7465 223a 2031 3637 3731 3339 3230 3030  te": 16771392000
+00055550: 3030 2c0a 2020 2020 2020 2020 2320 2020  00,.        #   
+00055560: 2020 2020 2020 2273 7472 696b 6552 6573        "strikeRes
+00055570: 756c 7422 3a20 2252 4541 4c49 5354 4943  ult": "REALISTIC
+00055580: 5f56 414c 5545 5f53 5452 4943 4b45 4e22  _VALUE_STRICKEN"
+00055590: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+000555a0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+000555b0: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
+000555c0: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+000555d0: 2873 6574 746c 656d 656e 742c 2027 6578  (settlement, 'ex
+000555e0: 7069 7279 4461 7465 2729 0a20 2020 2020  piryDate').     
+000555f0: 2020 206d 6172 6b65 7449 6420 3d20 7365     marketId = se
+00055600: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
+00055610: 6574 746c 656d 656e 742c 2027 7379 6d62  ettlement, 'symb
+00055620: 6f6c 2729 0a20 2020 2020 2020 2072 6574  ol').        ret
+00055630: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
+00055640: 2020 2769 6e66 6f27 3a20 7365 7474 6c65    'info': settle
+00055650: 6d65 6e74 2c0a 2020 2020 2020 2020 2020  ment,.          
+00055660: 2020 2773 796d 626f 6c27 3a20 7365 6c66    'symbol': self
+00055670: 2e73 6166 655f 7379 6d62 6f6c 286d 6172  .safe_symbol(mar
+00055680: 6b65 7449 642c 206d 6172 6b65 7429 2c0a  ketId, market),.
+00055690: 2020 2020 2020 2020 2020 2020 2770 7269              'pri
+000556a0: 6365 273a 2073 656c 662e 7361 6665 5f6e  ce': self.safe_n
+000556b0: 756d 6265 7228 7365 7474 6c65 6d65 6e74  umber(settlement
+000556c0: 2c20 2772 6561 6c53 7472 696b 6550 7269  , 'realStrikePri
+000556d0: 6365 2729 2c0a 2020 2020 2020 2020 2020  ce'),.          
+000556e0: 2020 2774 696d 6573 7461 6d70 273a 2074    'timestamp': t
+000556f0: 696d 6573 7461 6d70 2c0a 2020 2020 2020  imestamp,.      
+00055700: 2020 2020 2020 2764 6174 6574 696d 6527        'datetime'
+00055710: 3a20 7365 6c66 2e69 736f 3836 3031 2874  : self.iso8601(t
+00055720: 696d 6573 7461 6d70 292c 0a20 2020 2020  imestamp),.     
+00055730: 2020 207d 0a0a 2020 2020 6465 6620 7061     }..    def pa
+00055740: 7273 655f 7365 7474 6c65 6d65 6e74 7328  rse_settlements(
+00055750: 7365 6c66 2c20 7365 7474 6c65 6d65 6e74  self, settlement
+00055760: 732c 206d 6172 6b65 7429 3a0a 2020 2020  s, market):.    
+00055770: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00055780: 2020 2020 5b0a 2020 2020 2020 2020 2320      [.        # 
+00055790: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+000557a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000557b0: 2273 796d 626f 6c22 3a20 2245 5448 2d32  "symbol": "ETH-2
+000557c0: 3330 3232 332d 3139 3030 2d50 222c 0a20  30223-1900-P",. 
+000557d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000557e0: 2020 2020 2022 7374 7269 6b65 5072 6963       "strikePric
+000557f0: 6522 3a20 2231 3930 3022 2c0a 2020 2020  e": "1900",.    
+00055800: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00055810: 2020 2272 6561 6c53 7472 696b 6550 7269    "realStrikePri
+00055820: 6365 223a 2022 3136 3635 2e35 3839 3733  ce": "1665.58973
+00055830: 3334 222c 0a20 2020 2020 2020 2023 2020  34",.        #  
+00055840: 2020 2020 2020 2020 2020 2022 6578 7069             "expi
+00055850: 7279 4461 7465 223a 2031 3637 3731 3339  ryDate": 1677139
+00055860: 3230 3030 3030 2c0a 2020 2020 2020 2020  200000,.        
+00055870: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
+00055880: 7472 696b 6552 6573 756c 7422 3a20 2245  trikeResult": "E
+00055890: 5854 5249 4e53 4943 5f56 414c 5545 5f45  XTRINSIC_VALUE_E
+000558a0: 5850 4952 4544 220a 2020 2020 2020 2020  XPIRED".        
+000558b0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+000558c0: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
+000558d0: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+000558e0: 7375 6c74 203d 205b 5d0a 2020 2020 2020  sult = [].      
+000558f0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+00055900: 2830 2c20 6c65 6e28 7365 7474 6c65 6d65  (0, len(settleme
+00055910: 6e74 7329 293a 0a20 2020 2020 2020 2020  nts)):.         
+00055920: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
+00055930: 2873 656c 662e 7061 7273 655f 7365 7474  (self.parse_sett
+00055940: 6c65 6d65 6e74 2873 6574 746c 656d 656e  lement(settlemen
+00055950: 7473 5b69 5d2c 206d 6172 6b65 7429 290a  ts[i], market)).
+00055960: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00055970: 6573 756c 740a 0a20 2020 2061 7379 6e63  esult..    async
+00055980: 2064 6566 2066 6574 6368 5f6c 6564 6765   def fetch_ledge
+00055990: 7228 7365 6c66 2c20 636f 6465 3a20 4f70  r(self, code: Op
+000559a0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+000559b0: 6e65 2c20 7369 6e63 653a 204f 7074 696f  ne, since: Optio
+000559c0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+000559d0: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
+000559e0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
+000559f0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00055a00: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
+00055a10: 7463 6820 7468 6520 6869 7374 6f72 7920  tch the history 
+00055a20: 6f66 2063 6861 6e67 6573 2c20 6163 7469  of changes, acti
+00055a30: 6f6e 7320 646f 6e65 2062 7920 7468 6520  ons done by the 
+00055a40: 7573 6572 206f 7220 6f70 6572 6174 696f  user or operatio
+00055a50: 6e73 2074 6861 7420 616c 7465 7265 6420  ns that altered 
+00055a60: 7468 6520 6261 6c61 6e63 6520 6f66 2074  the balance of t
+00055a70: 6865 2075 7365 720a 2020 2020 2020 2020  he user.        
+00055a80: 7365 6520 6874 7470 733a 2f2f 6269 6e61  see https://bina
+00055a90: 6e63 652d 646f 6373 2e67 6974 6875 622e  nce-docs.github.
+00055aa0: 696f 2f61 7069 646f 6373 2f76 6f70 7469  io/apidocs/vopti
+00055ab0: 6f6e 732f 656e 2f23 6163 636f 756e 742d  ons/en/#account-
+00055ac0: 6675 6e64 696e 672d 666c 6f77 2d75 7365  funding-flow-use
+00055ad0: 725f 6461 7461 0a20 2020 2020 2020 2073  r_data.        s
+00055ae0: 6565 2068 7474 7073 3a2f 2f62 696e 616e  ee https://binan
+00055af0: 6365 2d64 6f63 732e 6769 7468 7562 2e69  ce-docs.github.i
+00055b00: 6f2f 6170 6964 6f63 732f 6675 7475 7265  o/apidocs/future
+00055b10: 732f 656e 2f23 6765 742d 696e 636f 6d65  s/en/#get-income
+00055b20: 2d68 6973 746f 7279 2d75 7365 725f 6461  -history-user_da
+00055b30: 7461 0a20 2020 2020 2020 2073 6565 2068  ta.        see h
+00055b40: 7474 7073 3a2f 2f62 696e 616e 6365 2d64  ttps://binance-d
+00055b50: 6f63 732e 6769 7468 7562 2e69 6f2f 6170  ocs.github.io/ap
+00055b60: 6964 6f63 732f 6465 6c69 7665 7279 2f65  idocs/delivery/e
+00055b70: 6e2f 2367 6574 2d69 6e63 6f6d 652d 6869  n/#get-income-hi
+00055b80: 7374 6f72 792d 7573 6572 5f64 6174 610a  story-user_data.
+00055b90: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00055ba0: 7472 7c4e 6f6e 6520 636f 6465 3a20 756e  tr|None code: un
+00055bb0: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+00055bc0: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+00055bd0: 616d 2069 6e74 7c4e 6f6e 6520 7369 6e63  am int|None sinc
+00055be0: 653a 2074 696d 6573 7461 6d70 2069 6e20  e: timestamp in 
+00055bf0: 6d73 206f 6620 7468 6520 6561 726c 6965  ms of the earlie
+00055c00: 7374 206c 6564 6765 7220 656e 7472 790a  st ledger entry.
+00055c10: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00055c20: 6e74 7c4e 6f6e 6520 6c69 6d69 743a 206d  nt|None limit: m
+00055c30: 6178 206e 756d 6265 7220 6f66 206c 6564  ax number of led
+00055c40: 6765 7220 656e 7472 7973 2074 6f20 7265  ger entrys to re
+00055c50: 7475 726e 0a20 2020 2020 2020 203a 7061  turn.        :pa
+00055c60: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+00055c70: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00055c80: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+00055c90: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
+00055ca0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+00055cb0: 7265 7475 726e 7320 6469 6374 3a20 6120  returns dict: a 
+00055cc0: 606c 6564 6765 7220 7374 7275 6374 7572  `ledger structur
+00055cd0: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+00055ce0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6c  ccxt.com/#/?id=l
+00055cf0: 6564 6765 722d 7374 7275 6374 7572 653e  edger-structure>
+00055d00: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+00055d10: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00055d20: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00055d30: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
+00055d40: 6f6e 650a 2020 2020 2020 2020 7375 6254  one.        subT
+00055d50: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
+00055d60: 2020 2063 7572 7265 6e63 7920 3d20 4e6f     currency = No
+00055d70: 6e65 0a20 2020 2020 2020 206d 6574 686f  ne.        metho
+00055d80: 6420 3d20 4e6f 6e65 0a20 2020 2020 2020  d = None.       
+00055d90: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
+00055da0: 2020 2020 2020 7479 7065 2c20 7061 7261        type, para
+00055db0: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+00055dc0: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
+00055dd0: 5f70 6172 616d 7328 2766 6574 6368 4c65  _params('fetchLe
+00055de0: 6467 6572 272c 204e 6f6e 652c 2070 6172  dger', None, par
+00055df0: 616d 7329 0a20 2020 2020 2020 2073 7562  ams).        sub
+00055e00: 5479 7065 2c20 7061 7261 6d73 203d 2073  Type, params = s
+00055e10: 656c 662e 6861 6e64 6c65 5f73 7562 5f74  elf.handle_sub_t
+00055e20: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
+00055e30: 6665 7463 684c 6564 6765 7227 2c20 4e6f  fetchLedger', No
+00055e40: 6e65 2c20 7061 7261 6d73 290a 2020 2020  ne, params).    
+00055e50: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
+00055e60: 6f70 7469 6f6e 273a 0a20 2020 2020 2020  option':.       
+00055e70: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
+00055e80: 7265 7175 6972 6564 5f61 7267 756d 656e  required_argumen
+00055e90: 7428 2766 6574 6368 4c65 6467 6572 272c  t('fetchLedger',
+00055ea0: 2063 6f64 652c 2027 636f 6465 2729 0a20   code, 'code'). 
+00055eb0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
+00055ec0: 6e63 7920 3d20 7365 6c66 2e63 7572 7265  ncy = self.curre
+00055ed0: 6e63 7928 636f 6465 290a 2020 2020 2020  ncy(code).      
+00055ee0: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00055ef0: 7572 7265 6e63 7927 5d20 3d20 6375 7272  urrency'] = curr
+00055f00: 656e 6379 5b27 6964 275d 0a20 2020 2020  ency['id'].     
+00055f10: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00055f20: 2765 6170 6950 7269 7661 7465 4765 7442  'eapiPrivateGetB
+00055f30: 696c 6c27 0a20 2020 2020 2020 2065 6c69  ill'.        eli
+00055f40: 6620 7365 6c66 2e69 735f 6c69 6e65 6172  f self.is_linear
+00055f50: 2874 7970 652c 2073 7562 5479 7065 293a  (type, subType):
+00055f60: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00055f70: 686f 6420 3d20 2766 6170 6950 7269 7661  hod = 'fapiPriva
+00055f80: 7465 4765 7449 6e63 6f6d 6527 0a20 2020  teGetIncome'.   
+00055f90: 2020 2020 2065 6c69 6620 7365 6c66 2e69       elif self.i
+00055fa0: 735f 696e 7665 7273 6528 7479 7065 2c20  s_inverse(type, 
+00055fb0: 7375 6254 7970 6529 3a0a 2020 2020 2020  subType):.      
+00055fc0: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+00055fd0: 6461 7069 5072 6976 6174 6547 6574 496e  dapiPrivateGetIn
+00055fe0: 636f 6d65 270a 2020 2020 2020 2020 656c  come'.        el
+00055ff0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00056000: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
+00056010: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
+00056020: 6574 6368 4c65 6467 6572 2829 2073 7570  etchLedger() sup
+00056030: 706f 7274 7320 636f 6e74 7261 6374 2077  ports contract w
+00056040: 616c 6c65 7473 206f 6e6c 7927 290a 2020  allets only').  
+00056050: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
+00056060: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00056070: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00056080: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
+00056090: 696e 6365 0a20 2020 2020 2020 2069 6620  ince.        if 
+000560a0: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
+000560b0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000560c0: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
+000560d0: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
+000560e0: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+000560f0: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00056100: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
+00056110: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00056120: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00056130: 2020 2020 2020 2023 206f 7074 696f 6e73         # options
+00056140: 2865 6170 6929 0a20 2020 2020 2020 2023  (eapi).        #
+00056150: 0a20 2020 2020 2020 2023 2020 2020 205b  .        #     [
+00056160: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00056170: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00056180: 2020 2020 2020 2020 2020 2022 6964 223a             "id":
+00056190: 2022 3131 3235 3839 3939 3036 3834 3537   "11258999068457
+000561a0: 3031 3837 3022 2c0a 2020 2020 2020 2020  01870",.        
+000561b0: 2320 2020 2020 2020 2020 2020 2020 2261  #             "a
+000561c0: 7373 6574 223a 2022 5553 4454 222c 0a20  sset": "USDT",. 
+000561d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000561e0: 2020 2020 2022 616d 6f75 6e74 223a 2022       "amount": "
+000561f0: 2d30 2e31 3635 3138 3230 3322 2c0a 2020  -0.16518203",.  
+00056200: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00056210: 2020 2020 2274 7970 6522 3a20 2246 4545      "type": "FEE
+00056220: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00056230: 2020 2020 2020 2020 2022 6372 6561 7465           "create
+00056240: 4461 7465 223a 2031 3637 3636 3231 3034  Date": 167662104
+00056250: 3234 3839 0a20 2020 2020 2020 2023 2020  2489.        #  
+00056260: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00056270: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
+00056280: 2023 0a20 2020 2020 2020 2023 2066 7574   #.        # fut
+00056290: 7572 6573 2866 6170 692c 2064 6170 6929  ures(fapi, dapi)
+000562a0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+000562b0: 2020 2023 2020 2020 205b 0a20 2020 2020     #     [.     
+000562c0: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
+000562d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000562e0: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+000562f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00056300: 2020 2020 2020 2020 2022 696e 636f 6d65           "income
+00056310: 5479 7065 223a 2022 5452 414e 5346 4552  Type": "TRANSFER
+00056320: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00056330: 2020 2020 2020 2020 2022 696e 636f 6d65           "income
+00056340: 223a 2022 3130 2e30 3030 3030 3030 3022  ": "10.00000000"
+00056350: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00056360: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
+00056370: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+00056380: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00056390: 7469 6d65 223a 2031 3637 3736 3435 3235  time": 167764525
+000563a0: 3030 3030 2c0a 2020 2020 2020 2020 2320  0000,.        # 
+000563b0: 2020 2020 2020 2020 2020 2020 2269 6e66              "inf
+000563c0: 6f22 3a20 2254 5241 4e53 4645 5222 2c0a  o": "TRANSFER",.
+000563d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000563e0: 2020 2020 2020 2274 7261 6e49 6422 3a20        "tranId": 
+000563f0: 3133 3130 3031 3537 3330 3832 2c0a 2020  131001573082,.  
+00056400: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00056410: 2020 2020 2274 7261 6465 4964 223a 2022      "tradeId": "
+00056420: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00056430: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+00056440: 2020 2020 5d0a 2020 2020 2020 2020 230a      ].        #.
+00056450: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00056460: 656c 662e 7061 7273 655f 6c65 6467 6572  elf.parse_ledger
+00056470: 2872 6573 706f 6e73 652c 2063 7572 7265  (response, curre
+00056480: 6e63 792c 2073 696e 6365 2c20 6c69 6d69  ncy, since, limi
+00056490: 7429 0a0a 2020 2020 6465 6620 7061 7273  t)..    def pars
+000564a0: 655f 6c65 6467 6572 5f65 6e74 7279 2873  e_ledger_entry(s
+000564b0: 656c 662c 2069 7465 6d2c 2063 7572 7265  elf, item, curre
+000564c0: 6e63 793d 4e6f 6e65 293a 0a20 2020 2020  ncy=None):.     
+000564d0: 2020 2023 0a20 2020 2020 2020 2023 206f     #.        # o
+000564e0: 7074 696f 6e73 2865 6170 6929 0a20 2020  ptions(eapi).   
+000564f0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00056500: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00056510: 2020 2020 2020 2020 2022 6964 223a 2022           "id": "
+00056520: 3131 3235 3839 3939 3036 3834 3537 3031  1125899906845701
+00056530: 3837 3022 2c0a 2020 2020 2020 2020 2320  870",.        # 
+00056540: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
+00056550: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+00056560: 2023 2020 2020 2020 2020 2022 616d 6f75   #         "amou
+00056570: 6e74 223a 2022 2d30 2e31 3635 3138 3230  nt": "-0.1651820
+00056580: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
+00056590: 2020 2020 2020 2274 7970 6522 3a20 2246        "type": "F
+000565a0: 4545 222c 0a20 2020 2020 2020 2023 2020  EE",.        #  
+000565b0: 2020 2020 2020 2022 6372 6561 7465 4461         "createDa
+000565c0: 7465 223a 2031 3637 3636 3231 3034 3234  te": 16766210424
+000565d0: 3839 0a20 2020 2020 2020 2023 2020 2020  89.        #    
+000565e0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+000565f0: 2020 2020 2023 2066 7574 7572 6573 2866       # futures(f
+00056600: 6170 692c 2064 6170 6929 0a20 2020 2020  api, dapi).     
+00056610: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00056620: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00056630: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+00056640: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+00056650: 2020 2020 2020 2022 696e 636f 6d65 5479         "incomeTy
+00056660: 7065 223a 2022 5452 414e 5346 4552 222c  pe": "TRANSFER",
+00056670: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00056680: 2020 2022 696e 636f 6d65 223a 2022 3130     "income": "10
+00056690: 2e30 3030 3030 3030 3022 2c0a 2020 2020  .00000000",.    
+000566a0: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
+000566b0: 7373 6574 223a 2022 5553 4454 222c 0a20  sset": "USDT",. 
+000566c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000566d0: 2022 7469 6d65 223a 2031 3637 3736 3435   "time": 1677645
+000566e0: 3235 3030 3030 2c0a 2020 2020 2020 2020  250000,.        
+000566f0: 2320 2020 2020 2020 2020 2269 6e66 6f22  #         "info"
+00056700: 3a20 2254 5241 4e53 4645 5222 2c0a 2020  : "TRANSFER",.  
+00056710: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00056720: 2274 7261 6e49 6422 3a20 3133 3130 3031  "tranId": 131001
+00056730: 3537 3330 3832 2c0a 2020 2020 2020 2020  573082,.        
+00056740: 2320 2020 2020 2020 2020 2274 7261 6465  #         "trade
+00056750: 4964 223a 2022 220a 2020 2020 2020 2020  Id": "".        
+00056760: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00056770: 230a 2020 2020 2020 2020 616d 6f75 6e74  #.        amount
+00056780: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00056790: 696e 675f 3228 6974 656d 2c20 2761 6d6f  ing_2(item, 'amo
+000567a0: 756e 7427 2c20 2769 6e63 6f6d 6527 290a  unt', 'income').
+000567b0: 2020 2020 2020 2020 6469 7265 6374 696f          directio
+000567c0: 6e20 3d20 4e6f 6e65 0a20 2020 2020 2020  n = None.       
+000567d0: 2069 6620 5072 6563 6973 652e 7374 7269   if Precise.stri
+000567e0: 6e67 5f6c 6528 616d 6f75 6e74 2c20 2730  ng_le(amount, '0
+000567f0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00056800: 6469 7265 6374 696f 6e20 3d20 276f 7574  direction = 'out
+00056810: 270a 2020 2020 2020 2020 2020 2020 616d  '.            am
+00056820: 6f75 6e74 203d 2050 7265 6369 7365 2e73  ount = Precise.s
+00056830: 7472 696e 675f 6d75 6c28 272d 3127 2c20  tring_mul('-1', 
+00056840: 616d 6f75 6e74 290a 2020 2020 2020 2020  amount).        
+00056850: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00056860: 2020 6469 7265 6374 696f 6e20 3d20 2769    direction = 'i
+00056870: 6e27 0a20 2020 2020 2020 2063 7572 7265  n'.        curre
+00056880: 6e63 7949 6420 3d20 7365 6c66 2e73 6166  ncyId = self.saf
+00056890: 655f 7374 7269 6e67 2869 7465 6d2c 2027  e_string(item, '
+000568a0: 6173 7365 7427 290a 2020 2020 2020 2020  asset').        
+000568b0: 7469 6d65 7374 616d 7020 3d20 7365 6c66  timestamp = self
+000568c0: 2e73 6166 655f 696e 7465 6765 725f 3228  .safe_integer_2(
+000568d0: 6974 656d 2c20 2763 7265 6174 6544 6174  item, 'createDat
+000568e0: 6527 2c20 2774 696d 6527 290a 2020 2020  e', 'time').    
+000568f0: 2020 2020 7479 7065 203d 2073 656c 662e      type = self.
+00056900: 7361 6665 5f73 7472 696e 675f 3228 6974  safe_string_2(it
+00056910: 656d 2c20 2774 7970 6527 2c20 2769 6e63  em, 'type', 'inc
+00056920: 6f6d 6554 7970 6527 290a 2020 2020 2020  omeType').      
+00056930: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+00056940: 2020 2020 2020 2027 6964 273a 2073 656c         'id': sel
+00056950: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
+00056960: 6974 656d 2c20 2769 6427 2c20 2774 7261  item, 'id', 'tra
+00056970: 6e49 6427 292c 0a20 2020 2020 2020 2020  nId'),.         
+00056980: 2020 2027 6469 7265 6374 696f 6e27 3a20     'direction': 
+00056990: 6469 7265 6374 696f 6e2c 0a20 2020 2020  direction,.     
+000569a0: 2020 2020 2020 2027 6163 636f 756e 7427         'account'
+000569b0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+000569c0: 2020 2020 2772 6566 6572 656e 6365 4163      'referenceAc
+000569d0: 636f 756e 7427 3a20 4e6f 6e65 2c0a 2020  count': None,.  
+000569e0: 2020 2020 2020 2020 2020 2772 6566 6572            'refer
+000569f0: 656e 6365 4964 273a 2073 656c 662e 7361  enceId': self.sa
+00056a00: 6665 5f73 7472 696e 6728 6974 656d 2c20  fe_string(item, 
+00056a10: 2774 7261 6465 4964 2729 2c0a 2020 2020  'tradeId'),.    
+00056a20: 2020 2020 2020 2020 2774 7970 6527 3a20          'type': 
+00056a30: 7365 6c66 2e70 6172 7365 5f6c 6564 6765  self.parse_ledge
+00056a40: 725f 656e 7472 795f 7479 7065 2874 7970  r_entry_type(typ
+00056a50: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+00056a60: 2763 7572 7265 6e63 7927 3a20 7365 6c66  'currency': self
+00056a70: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
+00056a80: 6f64 6528 6375 7272 656e 6379 4964 2c20  ode(currencyId, 
+00056a90: 6375 7272 656e 6379 292c 0a20 2020 2020  currency),.     
+00056aa0: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+00056ab0: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
+00056ac0: 6572 2861 6d6f 756e 7429 2c0a 2020 2020  er(amount),.    
+00056ad0: 2020 2020 2020 2020 2774 696d 6573 7461          'timesta
+00056ae0: 6d70 273a 2074 696d 6573 7461 6d70 2c0a  mp': timestamp,.
+00056af0: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
+00056b00: 6574 696d 6527 3a20 7365 6c66 2e69 736f  etime': self.iso
+00056b10: 3836 3031 2874 696d 6573 7461 6d70 292c  8601(timestamp),
+00056b20: 0a20 2020 2020 2020 2020 2020 2027 6265  .            'be
+00056b30: 666f 7265 273a 204e 6f6e 652c 0a20 2020  fore': None,.   
+00056b40: 2020 2020 2020 2020 2027 6166 7465 7227           'after'
+00056b50: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00056b60: 2020 2020 2773 7461 7475 7327 3a20 4e6f      'status': No
+00056b70: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00056b80: 2766 6565 273a 204e 6f6e 652c 0a20 2020  'fee': None,.   
+00056b90: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+00056ba0: 2069 7465 6d2c 0a20 2020 2020 2020 207d   item,.        }
+00056bb0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+00056bc0: 6c65 6467 6572 5f65 6e74 7279 5f74 7970  ledger_entry_typ
+00056bd0: 6528 7365 6c66 2c20 7479 7065 293a 0a20  e(self, type):. 
+00056be0: 2020 2020 2020 206c 6564 6765 7254 7970         ledgerTyp
+00056bf0: 6520 3d20 7b0a 2020 2020 2020 2020 2020  e = {.          
+00056c00: 2020 2746 4545 273a 2027 6665 6527 2c0a    'FEE': 'fee',.
+00056c10: 2020 2020 2020 2020 2020 2020 2746 554e              'FUN
+00056c20: 4449 4e47 5f46 4545 273a 2027 6665 6527  DING_FEE': 'fee'
+00056c30: 2c0a 2020 2020 2020 2020 2020 2020 274f  ,.            'O
+00056c40: 5054 494f 4e53 5f50 5245 4d49 554d 5f46  PTIONS_PREMIUM_F
+00056c50: 4545 273a 2027 6665 6527 2c0a 2020 2020  EE': 'fee',.    
+00056c60: 2020 2020 2020 2020 2750 4f53 4954 494f          'POSITIO
+00056c70: 4e5f 4c49 4d49 545f 494e 4352 4541 5345  N_LIMIT_INCREASE
+00056c80: 5f46 4545 273a 2027 6665 6527 2c0a 2020  _FEE': 'fee',.  
+00056c90: 2020 2020 2020 2020 2020 2743 4f4e 5452            'CONTR
+00056ca0: 4143 5427 3a20 2774 7261 6465 272c 0a20  ACT': 'trade',. 
+00056cb0: 2020 2020 2020 2020 2020 2027 5245 414c             'REAL
+00056cc0: 495a 4544 5f50 4e4c 273a 2027 7472 6164  IZED_PNL': 'trad
+00056cd0: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
+00056ce0: 2754 5241 4e53 4645 5227 3a20 2774 7261  'TRANSFER': 'tra
+00056cf0: 6e73 6665 7227 2c0a 2020 2020 2020 2020  nsfer',.        
+00056d00: 2020 2020 2743 524f 5353 5f43 4f4c 4c41      'CROSS_COLLA
+00056d10: 5445 5241 4c5f 5452 414e 5346 4552 273a  TERAL_TRANSFER':
+00056d20: 2027 7472 616e 7366 6572 272c 0a20 2020   'transfer',.   
+00056d30: 2020 2020 2020 2020 2027 494e 5445 524e           'INTERN
+00056d40: 414c 5f54 5241 4e53 4645 5227 3a20 2774  AL_TRANSFER': 't
+00056d50: 7261 6e73 6665 7227 2c0a 2020 2020 2020  ransfer',.      
+00056d60: 2020 2020 2020 2743 4f49 4e5f 5357 4150        'COIN_SWAP
+00056d70: 5f44 4550 4f53 4954 273a 2027 6465 706f  _DEPOSIT': 'depo
+00056d80: 7369 7427 2c0a 2020 2020 2020 2020 2020  sit',.          
+00056d90: 2020 2743 4f49 4e5f 5357 4150 5f57 4954    'COIN_SWAP_WIT
+00056da0: 4844 5241 5727 3a20 2777 6974 6864 7261  HDRAW': 'withdra
+00056db0: 7761 6c27 2c0a 2020 2020 2020 2020 2020  wal',.          
+00056dc0: 2020 274f 5054 494f 4e53 5f53 4554 544c    'OPTIONS_SETTL
+00056dd0: 455f 5052 4f46 4954 273a 2027 7365 7474  E_PROFIT': 'sett
+00056de0: 6c65 6d65 6e74 272c 0a20 2020 2020 2020  lement',.       
+00056df0: 2020 2020 2027 4445 4c49 5645 5245 445f       'DELIVERED_
+00056e00: 5345 5454 454c 4d45 4e54 273a 2027 7365  SETTELMENT': 'se
+00056e10: 7474 6c65 6d65 6e74 272c 0a20 2020 2020  ttlement',.     
+00056e20: 2020 2020 2020 2027 5745 4c43 4f4d 455f         'WELCOME_
+00056e30: 424f 4e55 5327 3a20 2763 6173 6862 6163  BONUS': 'cashbac
+00056e40: 6b27 2c0a 2020 2020 2020 2020 2020 2020  k',.            
+00056e50: 2743 4f4e 5445 5354 5f52 4557 4152 4427  'CONTEST_REWARD'
+00056e60: 3a20 2763 6173 6862 6163 6b27 2c0a 2020  : 'cashback',.  
+00056e70: 2020 2020 2020 2020 2020 2743 4f4d 4d49            'COMMI
+00056e80: 5353 494f 4e5f 5245 4241 5445 273a 2027  SSION_REBATE': '
+00056e90: 7265 6261 7465 272c 0a20 2020 2020 2020  rebate',.       
+00056ea0: 2020 2020 2027 4150 495f 5245 4241 5445       'API_REBATE
+00056eb0: 273a 2027 7265 6261 7465 272c 0a20 2020  ': 'rebate',.   
+00056ec0: 2020 2020 2020 2020 2027 5245 4645 5252           'REFERR
+00056ed0: 414c 5f4b 4943 4b42 4143 4b27 3a20 2772  AL_KICKBACK': 'r
+00056ee0: 6566 6572 7261 6c27 2c0a 2020 2020 2020  eferral',.      
+00056ef0: 2020 2020 2020 2743 4f4d 4d49 5353 494f        'COMMISSIO
+00056f00: 4e27 3a20 2763 6f6d 6d69 7373 696f 6e27  N': 'commission'
+00056f10: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00056f20: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00056f30: 7361 6665 5f73 7472 696e 6728 6c65 6467  safe_string(ledg
+00056f40: 6572 5479 7065 2c20 7479 7065 2c20 7479  erType, type, ty
+00056f50: 7065 290a 0a20 2020 2064 6566 2073 6967  pe)..    def sig
+00056f60: 6e28 7365 6c66 2c20 7061 7468 2c20 6170  n(self, path, ap
+00056f70: 693d 2770 7562 6c69 6327 2c20 6d65 7468  i='public', meth
+00056f80: 6f64 3d27 4745 5427 2c20 7061 7261 6d73  od='GET', params
+00056f90: 3d7b 7d2c 2068 6561 6465 7273 3d4e 6f6e  ={}, headers=Non
+00056fa0: 652c 2062 6f64 793d 4e6f 6e65 293a 0a20  e, body=None):. 
+00056fb0: 2020 2020 2020 2075 726c 7320 3d20 7365         urls = se
+00056fc0: 6c66 2e75 726c 730a 2020 2020 2020 2020  lf.urls.        
+00056fd0: 6966 206e 6f74 2028 6170 6920 696e 2075  if not (api in u
+00056fe0: 726c 735b 2761 7069 275d 293a 0a20 2020  rls['api']):.   
+00056ff0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+00057000: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+00057010: 2e69 6420 2b20 2720 646f 6573 206e 6f74  .id + ' does not
+00057020: 2068 6176 6520 6120 7465 7374 6e65 742f   have a testnet/
+00057030: 7361 6e64 626f 7820 5552 4c20 666f 7220  sandbox URL for 
+00057040: 2720 2b20 6170 6920 2b20 2720 656e 6470  ' + api + ' endp
+00057050: 6f69 6e74 7327 290a 2020 2020 2020 2020  oints').        
+00057060: 7572 6c20 3d20 7365 6c66 2e75 726c 735b  url = self.urls[
+00057070: 2761 7069 275d 5b61 7069 5d0a 2020 2020  'api'][api].    
+00057080: 2020 2020 7572 6c20 2b3d 2027 2f27 202b      url += '/' +
+00057090: 2070 6174 680a 2020 2020 2020 2020 6966   path.        if
+000570a0: 2061 7069 203d 3d20 2777 6170 6927 3a0a   api == 'wapi':.
+000570b0: 2020 2020 2020 2020 2020 2020 7572 6c20              url 
+000570c0: 2b3d 2027 2e68 746d 6c27 0a20 2020 2020  += '.html'.     
+000570d0: 2020 2069 6620 7061 7468 203d 3d20 2768     if path == 'h
+000570e0: 6973 746f 7269 6361 6c54 7261 6465 7327  istoricalTrades'
+000570f0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00057100: 2073 656c 662e 6170 694b 6579 3a0a 2020   self.apiKey:.  
+00057110: 2020 2020 2020 2020 2020 2020 2020 6865                he
+00057120: 6164 6572 7320 3d20 7b0a 2020 2020 2020  aders = {.      
+00057130: 2020 2020 2020 2020 2020 2020 2020 2758                'X
+00057140: 2d4d 4258 2d41 5049 4b45 5927 3a20 7365  -MBX-APIKEY': se
+00057150: 6c66 2e61 7069 4b65 792c 0a20 2020 2020  lf.apiKey,.     
+00057160: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00057170: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00057180: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00057190: 6169 7365 2041 7574 6865 6e74 6963 6174  aise Authenticat
+000571a0: 696f 6e45 7272 6f72 2873 656c 662e 6964  ionError(self.id
+000571b0: 202b 2027 2068 6973 746f 7269 6361 6c54   + ' historicalT
+000571c0: 7261 6465 7320 656e 6470 6f69 6e74 2072  rades endpoint r
+000571d0: 6571 7569 7265 7320 6061 7069 4b65 7960  equires `apiKey`
+000571e0: 2063 7265 6465 6e74 6961 6c27 290a 2020   credential').  
+000571f0: 2020 2020 2020 7573 6572 4461 7461 5374        userDataSt
+00057200: 7265 616d 203d 2028 7061 7468 203d 3d20  ream = (path == 
+00057210: 2775 7365 7244 6174 6153 7472 6561 6d27  'userDataStream'
+00057220: 2920 6f72 2028 7061 7468 203d 3d20 276c  ) or (path == 'l
+00057230: 6973 7465 6e4b 6579 2729 0a20 2020 2020  istenKey').     
+00057240: 2020 2069 6620 7573 6572 4461 7461 5374     if userDataSt
+00057250: 7265 616d 3a0a 2020 2020 2020 2020 2020  ream:.          
+00057260: 2020 6966 2073 656c 662e 6170 694b 6579    if self.apiKey
+00057270: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00057280: 2020 2320 7631 2073 7065 6369 616c 2063    # v1 special c
+00057290: 6173 6520 666f 7220 7573 6572 4461 7461  ase for userData
+000572a0: 5374 7265 616d 0a20 2020 2020 2020 2020  Stream.         
+000572b0: 2020 2020 2020 2068 6561 6465 7273 203d         headers =
+000572c0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000572d0: 2020 2020 2020 2027 582d 4d42 582d 4150         'X-MBX-AP
+000572e0: 494b 4559 273a 2073 656c 662e 6170 694b  IKEY': self.apiK
+000572f0: 6579 2c0a 2020 2020 2020 2020 2020 2020  ey,.            
+00057300: 2020 2020 2020 2020 2743 6f6e 7465 6e74          'Content
+00057310: 2d54 7970 6527 3a20 2761 7070 6c69 6361  -Type': 'applica
+00057320: 7469 6f6e 2f78 2d77 7777 2d66 6f72 6d2d  tion/x-www-form-
+00057330: 7572 6c65 6e63 6f64 6564 272c 0a20 2020  urlencoded',.   
+00057340: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00057350: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00057360: 6620 6d65 7468 6f64 2021 3d20 2747 4554  f method != 'GET
+00057370: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00057380: 2020 2020 2020 2062 6f64 7920 3d20 7365         body = se
+00057390: 6c66 2e75 726c 656e 636f 6465 2870 6172  lf.urlencode(par
+000573a0: 616d 7329 0a20 2020 2020 2020 2020 2020  ams).           
+000573b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000573c0: 2020 2020 2020 2072 6169 7365 2041 7574         raise Aut
+000573d0: 6865 6e74 6963 6174 696f 6e45 7272 6f72  henticationError
+000573e0: 2873 656c 662e 6964 202b 2027 2075 7365  (self.id + ' use
+000573f0: 7244 6174 6153 7472 6561 6d20 656e 6470  rDataStream endp
+00057400: 6f69 6e74 2072 6571 7569 7265 7320 6061  oint requires `a
+00057410: 7069 4b65 7960 2063 7265 6465 6e74 6961  piKey` credentia
+00057420: 6c27 290a 2020 2020 2020 2020 656c 6966  l').        elif
+00057430: 2028 6170 6920 3d3d 2027 7072 6976 6174   (api == 'privat
+00057440: 6527 2920 6f72 2028 6170 6920 3d3d 2027  e') or (api == '
+00057450: 6561 7069 5072 6976 6174 6527 2920 6f72  eapiPrivate') or
+00057460: 2028 6170 6920 3d3d 2027 7361 7069 2720   (api == 'sapi' 
+00057470: 616e 6420 7061 7468 2021 3d20 2773 7973  and path != 'sys
+00057480: 7465 6d2f 7374 6174 7573 2729 206f 7220  tem/status') or 
+00057490: 2861 7069 203d 3d20 2773 6170 6956 3227  (api == 'sapiV2'
+000574a0: 2920 6f72 2028 6170 6920 3d3d 2027 7361  ) or (api == 'sa
+000574b0: 7069 5633 2729 206f 7220 2861 7069 203d  piV3') or (api =
+000574c0: 3d20 2773 6170 6956 3427 2920 6f72 2028  = 'sapiV4') or (
+000574d0: 6170 6920 3d3d 2027 7761 7069 2720 616e  api == 'wapi' an
+000574e0: 6420 7061 7468 2021 3d20 2773 7973 7465  d path != 'syste
+000574f0: 6d53 7461 7475 7327 2920 6f72 2028 6170  mStatus') or (ap
+00057500: 6920 3d3d 2027 6461 7069 5072 6976 6174  i == 'dapiPrivat
+00057510: 6527 2920 6f72 2028 6170 6920 3d3d 2027  e') or (api == '
+00057520: 6461 7069 5072 6976 6174 6556 3227 2920  dapiPrivateV2') 
+00057530: 6f72 2028 6170 6920 3d3d 2027 6661 7069  or (api == 'fapi
+00057540: 5072 6976 6174 6527 2920 6f72 2028 6170  Private') or (ap
+00057550: 6920 3d3d 2027 6661 7069 5072 6976 6174  i == 'fapiPrivat
+00057560: 6556 3227 293a 0a20 2020 2020 2020 2020  eV2'):.         
+00057570: 2020 2073 656c 662e 6368 6563 6b5f 7265     self.check_re
+00057580: 7175 6972 6564 5f63 7265 6465 6e74 6961  quired_credentia
+00057590: 6c73 2829 0a20 2020 2020 2020 2020 2020  ls().           
+000575a0: 2071 7565 7279 203d 204e 6f6e 650a 2020   query = None.  
+000575b0: 2020 2020 2020 2020 2020 6465 6661 756c            defaul
+000575c0: 7452 6563 7657 696e 646f 7720 3d20 7365  tRecvWindow = se
+000575d0: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
+000575e0: 7365 6c66 2e6f 7074 696f 6e73 2c20 2772  self.options, 'r
+000575f0: 6563 7657 696e 646f 7727 290a 2020 2020  ecvWindow').    
+00057600: 2020 2020 2020 2020 6578 7465 6e64 6564          extended
+00057610: 5061 7261 6d73 203d 2073 656c 662e 6578  Params = self.ex
+00057620: 7465 6e64 287b 0a20 2020 2020 2020 2020  tend({.         
+00057630: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
+00057640: 7027 3a20 7365 6c66 2e6e 6f6e 6365 2829  p': self.nonce()
+00057650: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+00057660: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+00057670: 2020 2020 2069 6620 6465 6661 756c 7452       if defaultR
+00057680: 6563 7657 696e 646f 7720 6973 206e 6f74  ecvWindow is not
+00057690: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000576a0: 2020 2020 2020 2065 7874 656e 6465 6450         extendedP
+000576b0: 6172 616d 735b 2772 6563 7657 696e 646f  arams['recvWindo
+000576c0: 7727 5d20 3d20 6465 6661 756c 7452 6563  w'] = defaultRec
+000576d0: 7657 696e 646f 770a 2020 2020 2020 2020  vWindow.        
+000576e0: 2020 2020 7265 6376 5769 6e64 6f77 203d      recvWindow =
+000576f0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+00057700: 6572 2870 6172 616d 732c 2027 7265 6376  er(params, 'recv
+00057710: 5769 6e64 6f77 2729 0a20 2020 2020 2020  Window').       
+00057720: 2020 2020 2069 6620 7265 6376 5769 6e64       if recvWind
+00057730: 6f77 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ow is not None:.
+00057740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057750: 6578 7465 6e64 6564 5061 7261 6d73 5b27  extendedParams['
+00057760: 7265 6376 5769 6e64 6f77 275d 203d 2072  recvWindow'] = r
+00057770: 6563 7657 696e 646f 770a 2020 2020 2020  ecvWindow.      
+00057780: 2020 2020 2020 6966 2028 6170 6920 3d3d        if (api ==
+00057790: 2027 7361 7069 2729 2061 6e64 2028 7061   'sapi') and (pa
+000577a0: 7468 203d 3d20 2761 7373 6574 2f64 7573  th == 'asset/dus
+000577b0: 7427 293a 0a20 2020 2020 2020 2020 2020  t'):.           
+000577c0: 2020 2020 2071 7565 7279 203d 2073 656c       query = sel
+000577d0: 662e 7572 6c65 6e63 6f64 655f 7769 7468  f.urlencode_with
+000577e0: 5f61 7272 6179 5f72 6570 6561 7428 6578  _array_repeat(ex
+000577f0: 7465 6e64 6564 5061 7261 6d73 290a 2020  tendedParams).  
+00057800: 2020 2020 2020 2020 2020 656c 6966 2028            elif (
+00057810: 7061 7468 203d 3d20 2762 6174 6368 4f72  path == 'batchOr
+00057820: 6465 7273 2729 206f 7220 2870 6174 682e  ders') or (path.
+00057830: 6669 6e64 2827 7375 622d 6163 636f 756e  find('sub-accoun
+00057840: 7427 2920 3e3d 2030 2920 6f72 2028 7061  t') >= 0) or (pa
+00057850: 7468 203d 3d20 2763 6170 6974 616c 2f77  th == 'capital/w
+00057860: 6974 6864 7261 772f 6170 706c 7927 2920  ithdraw/apply') 
+00057870: 6f72 2028 7061 7468 2e66 696e 6428 2773  or (path.find('s
+00057880: 7461 6b69 6e67 2729 203e 3d20 3029 3a0a  taking') >= 0):.
+00057890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000578a0: 7175 6572 7920 3d20 7365 6c66 2e72 6177  query = self.raw
+000578b0: 656e 636f 6465 2865 7874 656e 6465 6450  encode(extendedP
+000578c0: 6172 616d 7329 0a20 2020 2020 2020 2020  arams).         
+000578d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000578e0: 2020 2020 2020 2020 2071 7565 7279 203d           query =
+000578f0: 2073 656c 662e 7572 6c65 6e63 6f64 6528   self.urlencode(
+00057900: 6578 7465 6e64 6564 5061 7261 6d73 290a  extendedParams).
+00057910: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00057920: 6174 7572 6520 3d20 4e6f 6e65 0a20 2020  ature = None.   
+00057930: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00057940: 2e73 6563 7265 742e 6669 6e64 2827 5052  .secret.find('PR
+00057950: 4956 4154 4520 4b45 5927 2920 3e20 2d31  IVATE KEY') > -1
+00057960: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00057970: 2020 7369 676e 6174 7572 6520 3d20 7365    signature = se
+00057980: 6c66 2e65 6e63 6f64 655f 7572 695f 636f  lf.encode_uri_co
+00057990: 6d70 6f6e 656e 7428 7365 6c66 2e72 7361  mponent(self.rsa
+000579a0: 2871 7565 7279 2c20 7365 6c66 2e73 6563  (query, self.sec
+000579b0: 7265 742c 2027 7368 6132 3536 2729 290a  ret, 'sha256')).
+000579c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000579d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000579e0: 2020 7369 676e 6174 7572 6520 3d20 7365    signature = se
+000579f0: 6c66 2e68 6d61 6328 7365 6c66 2e65 6e63  lf.hmac(self.enc
+00057a00: 6f64 6528 7175 6572 7929 2c20 7365 6c66  ode(query), self
+00057a10: 2e65 6e63 6f64 6528 7365 6c66 2e73 6563  .encode(self.sec
+00057a20: 7265 7429 2c20 6861 7368 6c69 622e 7368  ret), hashlib.sh
+00057a30: 6132 3536 290a 2020 2020 2020 2020 2020  a256).          
+00057a40: 2020 7175 6572 7920 2b3d 2027 2627 202b    query += '&' +
+00057a50: 2027 7369 676e 6174 7572 653d 2720 2b20   'signature=' + 
+00057a60: 7369 676e 6174 7572 650a 2020 2020 2020  signature.      
+00057a70: 2020 2020 2020 6865 6164 6572 7320 3d20        headers = 
+00057a80: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00057a90: 2020 2758 2d4d 4258 2d41 5049 4b45 5927    'X-MBX-APIKEY'
+00057aa0: 3a20 7365 6c66 2e61 7069 4b65 792c 0a20  : self.apiKey,. 
+00057ab0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00057ac0: 2020 2020 2020 2020 2069 6620 286d 6574           if (met
+00057ad0: 686f 6420 3d3d 2027 4745 5427 2920 6f72  hod == 'GET') or
+00057ae0: 2028 6d65 7468 6f64 203d 3d20 2744 454c   (method == 'DEL
+00057af0: 4554 4527 2920 6f72 2028 6170 6920 3d3d  ETE') or (api ==
+00057b00: 2027 7761 7069 2729 3a0a 2020 2020 2020   'wapi'):.      
+00057b10: 2020 2020 2020 2020 2020 7572 6c20 2b3d            url +=
+00057b20: 2027 3f27 202b 2071 7565 7279 0a20 2020   '?' + query.   
+00057b30: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00057b40: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00057b50: 6f64 7920 3d20 7175 6572 790a 2020 2020  ody = query.    
+00057b60: 2020 2020 2020 2020 2020 2020 6865 6164              head
+00057b70: 6572 735b 2743 6f6e 7465 6e74 2d54 7970  ers['Content-Typ
+00057b80: 6527 5d20 3d20 2761 7070 6c69 6361 7469  e'] = 'applicati
+00057b90: 6f6e 2f78 2d77 7777 2d66 6f72 6d2d 7572  on/x-www-form-ur
+00057ba0: 6c65 6e63 6f64 6564 270a 2020 2020 2020  lencoded'.      
+00057bb0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00057bc0: 2020 2020 6966 2070 6172 616d 733a 0a20      if params:. 
+00057bd0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+00057be0: 726c 202b 3d20 273f 2720 2b20 7365 6c66  rl += '?' + self
+00057bf0: 2e75 726c 656e 636f 6465 2870 6172 616d  .urlencode(param
+00057c00: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
+00057c10: 6e20 7b27 7572 6c27 3a20 7572 6c2c 2027  n {'url': url, '
+00057c20: 6d65 7468 6f64 273a 206d 6574 686f 642c  method': method,
+00057c30: 2027 626f 6479 273a 2062 6f64 792c 2027   'body': body, '
+00057c40: 6865 6164 6572 7327 3a20 6865 6164 6572  headers': header
+00057c50: 737d 0a0a 2020 2020 6465 6620 6861 6e64  s}..    def hand
+00057c60: 6c65 5f65 7272 6f72 7328 7365 6c66 2c20  le_errors(self, 
+00057c70: 636f 6465 2c20 7265 6173 6f6e 2c20 7572  code, reason, ur
+00057c80: 6c2c 206d 6574 686f 642c 2068 6561 6465  l, method, heade
+00057c90: 7273 2c20 626f 6479 2c20 7265 7370 6f6e  rs, body, respon
+00057ca0: 7365 2c20 7265 7175 6573 7448 6561 6465  se, requestHeade
+00057cb0: 7273 2c20 7265 7175 6573 7442 6f64 7929  rs, requestBody)
+00057cc0: 3a0a 2020 2020 2020 2020 6966 2028 636f  :.        if (co
+00057cd0: 6465 203d 3d20 3431 3829 206f 7220 2863  de == 418) or (c
+00057ce0: 6f64 6520 3d3d 2034 3239 293a 0a20 2020  ode == 429):.   
+00057cf0: 2020 2020 2020 2020 2072 6169 7365 2044           raise D
+00057d00: 446f 5350 726f 7465 6374 696f 6e28 7365  DoSProtection(se
+00057d10: 6c66 2e69 6420 2b20 2720 2720 2b20 7374  lf.id + ' ' + st
+00057d20: 7228 636f 6465 2920 2b20 2720 2720 2b20  r(code) + ' ' + 
+00057d30: 7265 6173 6f6e 202b 2027 2027 202b 2062  reason + ' ' + b
+00057d40: 6f64 7929 0a20 2020 2020 2020 2023 2065  ody).        # e
+00057d50: 7272 6f72 2072 6573 706f 6e73 6520 696e  rror response in
+00057d60: 2061 2066 6f72 6d3a 207b 2263 6f64 6522   a form: {"code"
+00057d70: 3a20 2d31 3031 332c 2022 6d73 6722 3a20  : -1013, "msg": 
+00057d80: 2249 6e76 616c 6964 2071 7561 6e74 6974  "Invalid quantit
+00057d90: 792e 227d 0a20 2020 2020 2020 2023 2066  y."}.        # f
+00057da0: 6f6c 6c6f 7769 6e67 2062 6c6f 636b 2063  ollowing block c
+00057db0: 6f69 6e74 6169 6e73 206c 6567 6163 7920  ointains legacy 
+00057dc0: 6368 6563 6b73 2061 6761 696e 7374 206d  checks against m
+00057dd0: 6573 7361 6765 2070 6174 7465 726e 7320  essage patterns 
+00057de0: 696e 2022 6d73 6722 2070 726f 7065 7274  in "msg" propert
+00057df0: 790a 2020 2020 2020 2020 2320 7769 6c6c  y.        # will
+00057e00: 2073 7769 7463 6820 2263 6f64 6522 2063   switch "code" c
+00057e10: 6865 636b 7320 6576 656e 7475 616c 6c79  hecks eventually
+00057e20: 2c20 7768 656e 2077 6520 6b6e 6f77 2061  , when we know a
+00057e30: 6c6c 206f 6620 7468 656d 0a20 2020 2020  ll of them.     
+00057e40: 2020 2069 6620 636f 6465 203e 3d20 3430     if code >= 40
+00057e50: 303a 0a20 2020 2020 2020 2020 2020 2069  0:.            i
+00057e60: 6620 626f 6479 2e66 696e 6428 2750 7269  f body.find('Pri
+00057e70: 6365 202a 2051 5459 2069 7320 7a65 726f  ce * QTY is zero
+00057e80: 206f 7220 6c65 7373 2729 203e 3d20 303a   or less') >= 0:
+00057e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00057ea0: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
+00057eb0: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
+00057ec0: 6f72 6465 7220 636f 7374 203d 2061 6d6f  order cost = amo
+00057ed0: 756e 7420 2a20 7072 6963 6520 6973 207a  unt * price is z
+00057ee0: 6572 6f20 6f72 206c 6573 7320 2720 2b20  ero or less ' + 
+00057ef0: 626f 6479 290a 2020 2020 2020 2020 2020  body).          
+00057f00: 2020 6966 2062 6f64 792e 6669 6e64 2827    if body.find('
+00057f10: 4c4f 545f 5349 5a45 2729 203e 3d20 303a  LOT_SIZE') >= 0:
+00057f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00057f30: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
+00057f40: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
+00057f50: 6f72 6465 7220 616d 6f75 6e74 2073 686f  order amount sho
+00057f60: 756c 6420 6265 2065 7665 6e6c 7920 6469  uld be evenly di
+00057f70: 7669 7369 626c 6520 6279 206c 6f74 2073  visible by lot s
+00057f80: 697a 6520 2720 2b20 626f 6479 290a 2020  ize ' + body).  
+00057f90: 2020 2020 2020 2020 2020 6966 2062 6f64            if bod
+00057fa0: 792e 6669 6e64 2827 5052 4943 455f 4649  y.find('PRICE_FI
+00057fb0: 4c54 4552 2729 203e 3d20 303a 0a20 2020  LTER') >= 0:.   
+00057fc0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00057fd0: 7365 2049 6e76 616c 6964 4f72 6465 7228  se InvalidOrder(
+00057fe0: 7365 6c66 2e69 6420 2b20 2720 6f72 6465  self.id + ' orde
+00057ff0: 7220 7072 6963 6520 6973 2069 6e76 616c  r price is inval
+00058000: 6964 2c20 692e 652e 2065 7863 6565 6473  id, i.e. exceeds
+00058010: 2061 6c6c 6f77 6564 2070 7269 6365 2070   allowed price p
+00058020: 7265 6369 7369 6f6e 2c20 6578 6365 6564  recision, exceed
+00058030: 7320 6d69 6e20 7072 6963 6520 6f72 206d  s min price or m
+00058040: 6178 2070 7269 6365 206c 696d 6974 7320  ax price limits 
+00058050: 6f72 2069 7320 696e 7661 6c69 6420 7661  or is invalid va
+00058060: 6c75 6520 696e 2067 656e 6572 616c 2c20  lue in general, 
+00058070: 7573 6520 7365 6c66 2e70 7269 6365 5f74  use self.price_t
+00058080: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+00058090: 6f6c 2c20 616d 6f75 6e74 2920 2720 2b20  ol, amount) ' + 
+000580a0: 626f 6479 290a 2020 2020 2020 2020 6966  body).        if
+000580b0: 2072 6573 706f 6e73 6520 6973 204e 6f6e   response is Non
+000580c0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000580d0: 6574 7572 6e20 4e6f 6e65 2020 2320 6661  eturn None  # fa
+000580e0: 6c6c 6261 636b 2074 6f20 6465 6661 756c  llback to defaul
+000580f0: 7420 6572 726f 7220 6861 6e64 6c65 720a  t error handler.
+00058100: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+00058110: 7375 6363 6573 7320 7661 6c75 6520 666f  success value fo
+00058120: 7220 7761 7069 2065 6e64 706f 696e 7473  r wapi endpoints
+00058130: 0a20 2020 2020 2020 2023 2072 6573 706f  .        # respo
+00058140: 6e73 6520 696e 2066 6f72 6d61 7420 7b27  nse in format {'
+00058150: 6d73 6727 3a20 2754 6865 2063 6f69 6e20  msg': 'The coin 
+00058160: 646f 6573 206e 6f74 2065 7869 7374 2e27  does not exist.'
+00058170: 2c20 2773 7563 6365 7373 273a 2054 7275  , 'success': Tru
+00058180: 652f 6661 6c73 657d 0a20 2020 2020 2020  e/false}.       
+00058190: 2073 7563 6365 7373 203d 2073 656c 662e   success = self.
+000581a0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
+000581b0: 6e73 652c 2027 7375 6363 6573 7327 2c20  nse, 'success', 
+000581c0: 5472 7565 290a 2020 2020 2020 2020 6966  True).        if
+000581d0: 206e 6f74 2073 7563 6365 7373 3a0a 2020   not success:.  
+000581e0: 2020 2020 2020 2020 2020 6d65 7373 6167            messag
+000581f0: 654e 6577 203d 2073 656c 662e 7361 6665  eNew = self.safe
+00058200: 5f73 7472 696e 6728 7265 7370 6f6e 7365  _string(response
+00058210: 2c20 276d 7367 2729 0a20 2020 2020 2020  , 'msg').       
+00058220: 2020 2020 2070 6172 7365 644d 6573 7361       parsedMessa
+00058230: 6765 203d 204e 6f6e 650a 2020 2020 2020  ge = None.      
+00058240: 2020 2020 2020 6966 206d 6573 7361 6765        if message
+00058250: 4e65 7720 6973 206e 6f74 204e 6f6e 653a  New is not None:
+00058260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00058270: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00058280: 2020 2020 2020 2020 2020 7061 7273 6564            parsed
+00058290: 4d65 7373 6167 6520 3d20 6a73 6f6e 2e6c  Message = json.l
+000582a0: 6f61 6473 286d 6573 7361 6765 4e65 7729  oads(messageNew)
+000582b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000582c0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+000582d0: 6e20 6173 2065 3a0a 2020 2020 2020 2020  n as e:.        
+000582e0: 2020 2020 2020 2020 2020 2020 2320 646f              # do
+000582f0: 206e 6f74 6869 6e67 0a20 2020 2020 2020   nothing.       
+00058300: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00058310: 7365 644d 6573 7361 6765 203d 204e 6f6e  sedMessage = Non
+00058320: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00058330: 2020 6966 2070 6172 7365 644d 6573 7361    if parsedMessa
+00058340: 6765 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ge is not None:.
+00058350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058360: 2020 2020 7265 7370 6f6e 7365 203d 2070      response = p
+00058370: 6172 7365 644d 6573 7361 6765 0a20 2020  arsedMessage.   
+00058380: 2020 2020 206d 6573 7361 6765 203d 2073       message = s
+00058390: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000583a0: 7265 7370 6f6e 7365 2c20 276d 7367 2729  response, 'msg')
+000583b0: 0a20 2020 2020 2020 2069 6620 6d65 7373  .        if mess
+000583c0: 6167 6520 6973 206e 6f74 204e 6f6e 653a  age is not None:
+000583d0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000583e0: 662e 7468 726f 775f 6578 6163 746c 795f  f.throw_exactly_
+000583f0: 6d61 7463 6865 645f 6578 6365 7074 696f  matched_exceptio
+00058400: 6e28 7365 6c66 2e65 7863 6570 7469 6f6e  n(self.exception
+00058410: 735b 2765 7861 6374 275d 2c20 6d65 7373  s['exact'], mess
+00058420: 6167 652c 2073 656c 662e 6964 202b 2027  age, self.id + '
+00058430: 2027 202b 206d 6573 7361 6765 290a 2020   ' + message).  
+00058440: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+00058450: 6872 6f77 5f62 726f 6164 6c79 5f6d 6174  hrow_broadly_mat
+00058460: 6368 6564 5f65 7863 6570 7469 6f6e 2873  ched_exception(s
+00058470: 656c 662e 6578 6365 7074 696f 6e73 5b27  elf.exceptions['
+00058480: 6272 6f61 6427 5d2c 206d 6573 7361 6765  broad'], message
+00058490: 2c20 7365 6c66 2e69 6420 2b20 2720 2720  , self.id + ' ' 
+000584a0: 2b20 6d65 7373 6167 6529 0a20 2020 2020  + message).     
+000584b0: 2020 2023 2063 6865 636b 7320 6167 6169     # checks agai
+000584c0: 6e73 7420 6572 726f 7220 636f 6465 730a  nst error codes.
+000584d0: 2020 2020 2020 2020 6572 726f 7220 3d20          error = 
+000584e0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000584f0: 2872 6573 706f 6e73 652c 2027 636f 6465  (response, 'code
+00058500: 2729 0a20 2020 2020 2020 2069 6620 6572  ').        if er
+00058510: 726f 7220 6973 206e 6f74 204e 6f6e 653a  ror is not None:
+00058520: 0a20 2020 2020 2020 2020 2020 2023 2068  .            # h
+00058530: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00058540: 6d2f 6363 7874 2f63 6378 742f 6973 7375  m/ccxt/ccxt/issu
+00058550: 6573 2f36 3530 310a 2020 2020 2020 2020  es/6501.        
+00058560: 2020 2020 2320 6874 7470 733a 2f2f 6769      # https://gi
+00058570: 7468 7562 2e63 6f6d 2f63 6378 742f 6363  thub.com/ccxt/cc
+00058580: 7874 2f69 7373 7565 732f 3737 3432 0a20  xt/issues/7742. 
+00058590: 2020 2020 2020 2020 2020 2069 6620 2865             if (e
+000585a0: 7272 6f72 203d 3d20 2732 3030 2729 206f  rror == '200') o
+000585b0: 7220 5072 6563 6973 652e 7374 7269 6e67  r Precise.string
+000585c0: 5f65 7175 616c 7328 6572 726f 722c 2027  _equals(error, '
+000585d0: 3027 293a 0a20 2020 2020 2020 2020 2020  0'):.           
+000585e0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+000585f0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
+00058600: 2077 6f72 6b61 726f 756e 6420 666f 7220   workaround for 
+00058610: 7b22 636f 6465 223a 2d32 3031 352c 226d  {"code":-2015,"m
+00058620: 7367 223a 2249 6e76 616c 6964 2041 5049  sg":"Invalid API
+00058630: 2d6b 6579 2c20 4950 2c20 6f72 2070 6572  -key, IP, or per
+00058640: 6d69 7373 696f 6e73 2066 6f72 2061 6374  missions for act
+00058650: 696f 6e2e 227d 0a20 2020 2020 2020 2020  ion."}.         
+00058660: 2020 2023 2064 6573 7069 7465 2074 6861     # despite tha
+00058670: 7420 7468 6569 7220 6d65 7373 6167 6520  t their message 
+00058680: 6973 2076 6572 7920 636f 6e66 7573 696e  is very confusin
+00058690: 672c 2069 7420 6973 2072 6169 7365 6420  g, it is raised 
+000586a0: 6279 2042 696e 616e 6365 0a20 2020 2020  by Binance.     
+000586b0: 2020 2020 2020 2023 206f 6e20 6120 7465         # on a te
+000586c0: 6d70 6f72 6172 7920 6261 6e2c 2074 6865  mporary ban, the
+000586d0: 2041 5049 206b 6579 2069 7320 7661 6c69   API key is vali
+000586e0: 642c 2062 7574 2064 6973 6162 6c65 6420  d, but disabled 
+000586f0: 666f 7220 6120 7768 696c 650a 2020 2020  for a while.    
+00058700: 2020 2020 2020 2020 6966 2028 6572 726f          if (erro
+00058710: 7220 3d3d 2027 2d32 3031 3527 2920 616e  r == '-2015') an
+00058720: 6420 7365 6c66 2e6f 7074 696f 6e73 5b27  d self.options['
+00058730: 6861 7341 6c72 6561 6479 4175 7468 656e  hasAlreadyAuthen
+00058740: 7469 6361 7465 6453 7563 6365 7373 6675  ticatedSuccessfu
+00058750: 6c6c 7927 5d3a 0a20 2020 2020 2020 2020  lly']:.         
+00058760: 2020 2020 2020 2072 6169 7365 2044 446f         raise DDo
+00058770: 5350 726f 7465 6374 696f 6e28 7365 6c66  SProtection(self
+00058780: 2e69 6420 2b20 2720 2720 2b20 626f 6479  .id + ' ' + body
+00058790: 290a 2020 2020 2020 2020 2020 2020 6665  ).            fe
+000587a0: 6564 6261 636b 203d 2073 656c 662e 6964  edback = self.id
+000587b0: 202b 2027 2027 202b 2062 6f64 790a 2020   + ' ' + body.  
+000587c0: 2020 2020 2020 2020 2020 6966 206d 6573            if mes
+000587d0: 7361 6765 203d 3d20 274e 6f20 6e65 6564  sage == 'No need
+000587e0: 2074 6f20 6368 616e 6765 206d 6172 6769   to change margi
+000587f0: 6e20 7479 7065 2e27 3a0a 2020 2020 2020  n type.':.      
+00058800: 2020 2020 2020 2020 2020 2320 6e6f 7420            # not 
+00058810: 616e 2065 7272 6f72 0a20 2020 2020 2020  an error.       
+00058820: 2020 2020 2020 2020 2023 2068 7474 7073           # https
+00058830: 3a2f 2f67 6974 6875 622e 636f 6d2f 6363  ://github.com/cc
+00058840: 7874 2f63 6378 742f 6973 7375 6573 2f31  xt/ccxt/issues/1
+00058850: 3132 3638 0a20 2020 2020 2020 2020 2020  1268.           
+00058860: 2020 2020 2023 2068 7474 7073 3a2f 2f67       # https://g
+00058870: 6974 6875 622e 636f 6d2f 6363 7874 2f63  ithub.com/ccxt/c
+00058880: 6378 742f 7075 6c6c 2f31 3136 3234 0a20  cxt/pull/11624. 
+00058890: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000588a0: 2050 4f53 5420 6874 7470 733a 2f2f 6661   POST https://fa
+000588b0: 7069 2e62 696e 616e 6365 2e63 6f6d 2f66  pi.binance.com/f
+000588c0: 6170 692f 7631 2f6d 6172 6769 6e54 7970  api/v1/marginTyp
+000588d0: 6520 3430 3020 4261 6420 5265 7175 6573  e 400 Bad Reques
+000588e0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+000588f0: 2020 2320 6269 6e61 6e63 6575 7364 6d20    # binanceusdm 
+00058900: 7b22 636f 6465 223a 2d34 3034 362c 226d  {"code":-4046,"m
+00058910: 7367 223a 224e 6f20 6e65 6564 2074 6f20  sg":"No need to 
+00058920: 6368 616e 6765 206d 6172 6769 6e20 7479  change margin ty
+00058930: 7065 2e22 7d0a 2020 2020 2020 2020 2020  pe."}.          
+00058940: 2020 2020 2020 7261 6973 6520 4d61 7267        raise Marg
+00058950: 696e 4d6f 6465 416c 7265 6164 7953 6574  inModeAlreadySet
+00058960: 2866 6565 6462 6163 6b29 0a20 2020 2020  (feedback).     
+00058970: 2020 2020 2020 2073 656c 662e 7468 726f         self.thro
+00058980: 775f 6578 6163 746c 795f 6d61 7463 6865  w_exactly_matche
+00058990: 645f 6578 6365 7074 696f 6e28 7365 6c66  d_exception(self
+000589a0: 2e65 7863 6570 7469 6f6e 735b 2765 7861  .exceptions['exa
+000589b0: 6374 275d 2c20 6572 726f 722c 2066 6565  ct'], error, fee
+000589c0: 6462 6163 6b29 0a20 2020 2020 2020 2020  dback).         
+000589d0: 2020 2072 6169 7365 2045 7863 6861 6e67     raise Exchang
+000589e0: 6545 7272 6f72 2866 6565 6462 6163 6b29  eError(feedback)
+000589f0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00058a00: 7375 6363 6573 733a 0a20 2020 2020 2020  success:.       
+00058a10: 2020 2020 2072 6169 7365 2045 7863 6861       raise Excha
+00058a20: 6e67 6545 7272 6f72 2873 656c 662e 6964  ngeError(self.id
+00058a30: 202b 2027 2027 202b 2062 6f64 7929 0a20   + ' ' + body). 
+00058a40: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+00058a50: 6e65 0a0a 2020 2020 6465 6620 6361 6c63  ne..    def calc
+00058a60: 756c 6174 655f 7261 7465 5f6c 696d 6974  ulate_rate_limit
+00058a70: 6572 5f63 6f73 7428 7365 6c66 2c20 6170  er_cost(self, ap
+00058a80: 692c 206d 6574 686f 642c 2070 6174 682c  i, method, path,
+00058a90: 2070 6172 616d 732c 2063 6f6e 6669 673d   params, config=
+00058aa0: 7b7d 293a 0a20 2020 2020 2020 2069 6620  {}):.        if 
+00058ab0: 2827 6e6f 436f 696e 2720 696e 2063 6f6e  ('noCoin' in con
+00058ac0: 6669 6729 2061 6e64 206e 6f74 2028 2763  fig) and not ('c
+00058ad0: 6f69 6e27 2069 6e20 7061 7261 6d73 293a  oin' in params):
+00058ae0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00058af0: 7572 6e20 636f 6e66 6967 5b27 6e6f 436f  urn config['noCo
+00058b00: 696e 275d 0a20 2020 2020 2020 2065 6c69  in'].        eli
+00058b10: 6620 2827 6e6f 5379 6d62 6f6c 2720 696e  f ('noSymbol' in
+00058b20: 2063 6f6e 6669 6729 2061 6e64 206e 6f74   config) and not
+00058b30: 2028 2773 796d 626f 6c27 2069 6e20 7061   ('symbol' in pa
+00058b40: 7261 6d73 293a 0a20 2020 2020 2020 2020  rams):.         
+00058b50: 2020 2072 6574 7572 6e20 636f 6e66 6967     return config
+00058b60: 5b27 6e6f 5379 6d62 6f6c 275d 0a20 2020  ['noSymbol'].   
+00058b70: 2020 2020 2065 6c69 6620 2827 6e6f 506f       elif ('noPo
+00058b80: 6f6c 4964 2720 696e 2063 6f6e 6669 6729  olId' in config)
+00058b90: 2061 6e64 206e 6f74 2028 2770 6f6f 6c49   and not ('poolI
+00058ba0: 6427 2069 6e20 7061 7261 6d73 293a 0a20  d' in params):. 
+00058bb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00058bc0: 6e20 636f 6e66 6967 5b27 6e6f 506f 6f6c  n config['noPool
+00058bd0: 4964 275d 0a20 2020 2020 2020 2065 6c69  Id'].        eli
+00058be0: 6620 2827 6279 4c69 6d69 7427 2069 6e20  f ('byLimit' in 
+00058bf0: 636f 6e66 6967 2920 616e 6420 2827 6c69  config) and ('li
+00058c00: 6d69 7427 2069 6e20 7061 7261 6d73 293a  mit' in params):
+00058c10: 0a20 2020 2020 2020 2020 2020 206c 696d  .            lim
+00058c20: 6974 203d 2070 6172 616d 735b 276c 696d  it = params['lim
+00058c30: 6974 275d 0a20 2020 2020 2020 2020 2020  it'].           
+00058c40: 2062 794c 696d 6974 203d 2063 6f6e 6669   byLimit = confi
+00058c50: 675b 2762 794c 696d 6974 275d 0a20 2020  g['byLimit'].   
+00058c60: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00058c70: 6e20 7261 6e67 6528 302c 206c 656e 2862  n range(0, len(b
+00058c80: 794c 696d 6974 2929 3a0a 2020 2020 2020  yLimit)):.      
+00058c90: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
+00058ca0: 3d20 6279 4c69 6d69 745b 695d 0a20 2020  = byLimit[i].   
+00058cb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00058cc0: 6c69 6d69 7420 3c3d 2065 6e74 7279 5b30  limit <= entry[0
+00058cd0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00058ce0: 2020 2020 2020 2072 6574 7572 6e20 656e         return en
+00058cf0: 7472 795b 315d 0a20 2020 2020 2020 2072  try[1].        r
+00058d00: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
+00058d10: 7661 6c75 6528 636f 6e66 6967 2c20 2763  value(config, 'c
+00058d20: 6f73 7427 2c20 3129 0a0a 2020 2020 6173  ost', 1)..    as
+00058d30: 796e 6320 6465 6620 7265 7175 6573 7428  ync def request(
+00058d40: 7365 6c66 2c20 7061 7468 2c20 6170 693d  self, path, api=
+00058d50: 2770 7562 6c69 6327 2c20 6d65 7468 6f64  'public', method
+00058d60: 3d27 4745 5427 2c20 7061 7261 6d73 3d7b  ='GET', params={
+00058d70: 7d2c 2068 6561 6465 7273 3d4e 6f6e 652c  }, headers=None,
+00058d80: 2062 6f64 793d 4e6f 6e65 2c20 636f 6e66   body=None, conf
+00058d90: 6967 3d7b 7d2c 2063 6f6e 7465 7874 3d7b  ig={}, context={
+00058da0: 7d29 3a0a 2020 2020 2020 2020 7265 7370  }):.        resp
+00058db0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+00058dc0: 662e 6665 7463 6832 2870 6174 682c 2061  f.fetch2(path, a
+00058dd0: 7069 2c20 6d65 7468 6f64 2c20 7061 7261  pi, method, para
+00058de0: 6d73 2c20 6865 6164 6572 732c 2062 6f64  ms, headers, bod
+00058df0: 792c 2063 6f6e 6669 6729 0a20 2020 2020  y, config).     
+00058e00: 2020 2023 2061 2077 6f72 6b61 726f 756e     # a workaroun
+00058e10: 6420 666f 7220 7b22 636f 6465 223a 2d32  d for {"code":-2
+00058e20: 3031 352c 226d 7367 223a 2249 6e76 616c  015,"msg":"Inval
+00058e30: 6964 2041 5049 2d6b 6579 2c20 4950 2c20  id API-key, IP, 
+00058e40: 6f72 2070 6572 6d69 7373 696f 6e73 2066  or permissions f
+00058e50: 6f72 2061 6374 696f 6e2e 227d 0a20 2020  or action."}.   
+00058e60: 2020 2020 2069 6620 2861 7069 203d 3d20       if (api == 
+00058e70: 2770 7269 7661 7465 2729 206f 7220 2861  'private') or (a
+00058e80: 7069 203d 3d20 2777 6170 6927 293a 0a20  pi == 'wapi'):. 
+00058e90: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00058ea0: 6f70 7469 6f6e 735b 2768 6173 416c 7265  options['hasAlre
+00058eb0: 6164 7941 7574 6865 6e74 6963 6174 6564  adyAuthenticated
+00058ec0: 5375 6363 6573 7366 756c 6c79 275d 203d  Successfully'] =
+00058ed0: 2054 7275 650a 2020 2020 2020 2020 7265   True.        re
+00058ee0: 7475 726e 2072 6573 706f 6e73 650a 0a20  turn response.. 
+00058ef0: 2020 2061 7379 6e63 2064 6566 206d 6f64     async def mod
+00058f00: 6966 795f 6d61 7267 696e 5f68 656c 7065  ify_margin_helpe
+00058f10: 7228 7365 6c66 2c20 7379 6d62 6f6c 3a20  r(self, symbol: 
+00058f20: 7374 722c 2061 6d6f 756e 742c 2061 6464  str, amount, add
+00058f30: 4f72 5265 6475 6365 2c20 7061 7261 6d73  OrReduce, params
+00058f40: 3d7b 7d29 3a0a 2020 2020 2020 2020 2320  ={}):.        # 
+00058f50: 7573 6564 2074 6f20 6d6f 6469 6679 2069  used to modify i
+00058f60: 736f 6c61 7465 6420 706f 7369 7469 6f6e  solated position
+00058f70: 730a 2020 2020 2020 2020 6465 6661 756c  s.        defaul
+00058f80: 7454 7970 6520 3d20 7365 6c66 2e73 6166  tType = self.saf
+00058f90: 655f 7374 7269 6e67 2873 656c 662e 6f70  e_string(self.op
+00058fa0: 7469 6f6e 732c 2027 6465 6661 756c 7454  tions, 'defaultT
+00058fb0: 7970 6527 2c20 2766 7574 7572 6527 290a  ype', 'future').
+00058fc0: 2020 2020 2020 2020 6966 2064 6566 6175          if defau
+00058fd0: 6c74 5479 7065 203d 3d20 2773 706f 7427  ltType == 'spot'
+00058fe0: 3a0a 2020 2020 2020 2020 2020 2020 6465  :.            de
+00058ff0: 6661 756c 7454 7970 6520 3d20 2766 7574  faultType = 'fut
+00059000: 7572 6527 0a20 2020 2020 2020 2074 7970  ure'.        typ
+00059010: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+00059020: 7269 6e67 2870 6172 616d 732c 2027 7479  ring(params, 'ty
+00059030: 7065 272c 2064 6566 6175 6c74 5479 7065  pe', defaultType
+00059040: 290a 2020 2020 2020 2020 6966 2028 7479  ).        if (ty
+00059050: 7065 203d 3d20 276d 6172 6769 6e27 2920  pe == 'margin') 
+00059060: 6f72 2028 7479 7065 203d 3d20 2773 706f  or (type == 'spo
+00059070: 7427 293a 0a20 2020 2020 2020 2020 2020  t'):.           
+00059080: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+00059090: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+000590a0: 6164 6420 2f20 7265 6475 6365 206d 6172  add / reduce mar
+000590b0: 6769 6e20 6f6e 6c79 2073 7570 706f 7274  gin only support
+000590c0: 6564 2077 6974 6820 7479 7065 2066 7574  ed with type fut
+000590d0: 7572 6520 6f72 2064 656c 6976 6572 7927  ure or delivery'
+000590e0: 290a 2020 2020 2020 2020 6177 6169 7420  ).        await 
+000590f0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00059100: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
+00059110: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+00059120: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+00059130: 2061 6d6f 756e 7420 3d20 7365 6c66 2e61   amount = self.a
+00059140: 6d6f 756e 745f 746f 5f70 7265 6369 7369  mount_to_precisi
+00059150: 6f6e 2873 796d 626f 6c2c 2061 6d6f 756e  on(symbol, amoun
+00059160: 7429 0a20 2020 2020 2020 2072 6571 7565  t).        reque
+00059170: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
+00059180: 2020 2027 7479 7065 273a 2061 6464 4f72     'type': addOr
+00059190: 5265 6475 6365 2c0a 2020 2020 2020 2020  Reduce,.        
+000591a0: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
+000591b0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
+000591c0: 2020 2020 2020 2020 2761 6d6f 756e 7427          'amount'
+000591d0: 3a20 616d 6f75 6e74 2c0a 2020 2020 2020  : amount,.      
+000591e0: 2020 7d0a 2020 2020 2020 2020 6d65 7468    }.        meth
+000591f0: 6f64 203d 204e 6f6e 650a 2020 2020 2020  od = None.      
+00059200: 2020 636f 6465 203d 204e 6f6e 650a 2020    code = None.  
+00059210: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+00059220: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+00059230: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00059240: 2766 6170 6950 7269 7661 7465 506f 7374  'fapiPrivatePost
+00059250: 506f 7369 7469 6f6e 4d61 7267 696e 270a  PositionMargin'.
+00059260: 2020 2020 2020 2020 2020 2020 636f 6465              code
+00059270: 203d 206d 6172 6b65 745b 2771 756f 7465   = market['quote
+00059280: 275d 0a20 2020 2020 2020 2065 6c73 653a  '].        else:
+00059290: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+000592a0: 686f 6420 3d20 2764 6170 6950 7269 7661  hod = 'dapiPriva
+000592b0: 7465 506f 7374 506f 7369 7469 6f6e 4d61  tePostPositionMa
+000592c0: 7267 696e 270a 2020 2020 2020 2020 2020  rgin'.          
+000592d0: 2020 636f 6465 203d 206d 6172 6b65 745b    code = market[
+000592e0: 2762 6173 6527 5d0a 2020 2020 2020 2020  'base'].        
+000592f0: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00059300: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00059310: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
+00059320: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00059330: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00059340: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00059350: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00059360: 2022 636f 6465 223a 2032 3030 2c0a 2020   "code": 200,.  
+00059370: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00059380: 226d 7367 223a 2022 5375 6363 6573 7366  "msg": "Successf
+00059390: 756c 6c79 206d 6f64 6966 7920 706f 7369  ully modify posi
+000593a0: 7469 6f6e 206d 6172 6769 6e2e 222c 0a20  tion margin.",. 
+000593b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000593c0: 2022 616d 6f75 6e74 223a 2030 2e30 3031   "amount": 0.001
+000593d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000593e0: 2020 2020 2274 7970 6522 3a20 310a 2020      "type": 1.  
+000593f0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+00059400: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00059410: 7265 7475 726e 2073 656c 662e 6578 7465  return self.exte
+00059420: 6e64 2873 656c 662e 7061 7273 655f 6d61  nd(self.parse_ma
+00059430: 7267 696e 5f6d 6f64 6966 6963 6174 696f  rgin_modificatio
+00059440: 6e28 7265 7370 6f6e 7365 2c20 6d61 726b  n(response, mark
+00059450: 6574 292c 207b 0a20 2020 2020 2020 2020  et), {.         
+00059460: 2020 2027 636f 6465 273a 2063 6f64 652c     'code': code,
+00059470: 0a20 2020 2020 2020 207d 290a 0a20 2020  .        })..   
+00059480: 2064 6566 2070 6172 7365 5f6d 6172 6769   def parse_margi
+00059490: 6e5f 6d6f 6469 6669 6361 7469 6f6e 2873  n_modification(s
+000594a0: 656c 662c 2064 6174 612c 206d 6172 6b65  elf, data, marke
+000594b0: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
+000594c0: 2072 6177 5479 7065 203d 2073 656c 662e   rawType = self.
+000594d0: 7361 6665 5f69 6e74 6567 6572 2864 6174  safe_integer(dat
+000594e0: 612c 2027 7479 7065 2729 0a20 2020 2020  a, 'type').     
+000594f0: 2020 2072 6573 756c 7454 7970 6520 3d20     resultType = 
+00059500: 2761 6464 2720 6966 2028 7261 7754 7970  'add' if (rawTyp
+00059510: 6520 3d3d 2031 2920 656c 7365 2027 7265  e == 1) else 're
+00059520: 6475 6365 270a 2020 2020 2020 2020 7265  duce'.        re
+00059530: 7375 6c74 416d 6f75 6e74 203d 2073 656c  sultAmount = sel
+00059540: 662e 7361 6665 5f6e 756d 6265 7228 6461  f.safe_number(da
+00059550: 7461 2c20 2761 6d6f 756e 7427 290a 2020  ta, 'amount').  
+00059560: 2020 2020 2020 6572 726f 7243 6f64 6520        errorCode 
+00059570: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00059580: 6e67 2864 6174 612c 2027 636f 6465 2729  ng(data, 'code')
+00059590: 0a20 2020 2020 2020 2073 7461 7475 7320  .        status 
+000595a0: 3d20 276f 6b27 2069 6620 2865 7272 6f72  = 'ok' if (error
+000595b0: 436f 6465 203d 3d20 2732 3030 2729 2065  Code == '200') e
+000595c0: 6c73 6520 2766 6169 6c65 6427 0a20 2020  lse 'failed'.   
+000595d0: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
+000595e0: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+000595f0: 3a20 6461 7461 2c0a 2020 2020 2020 2020  : data,.        
+00059600: 2020 2020 2774 7970 6527 3a20 7265 7375      'type': resu
+00059610: 6c74 5479 7065 2c0a 2020 2020 2020 2020  ltType,.        
+00059620: 2020 2020 2761 6d6f 756e 7427 3a20 7265      'amount': re
+00059630: 7375 6c74 416d 6f75 6e74 2c0a 2020 2020  sultAmount,.    
+00059640: 2020 2020 2020 2020 2763 6f64 6527 3a20          'code': 
+00059650: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00059660: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+00059670: 6574 5b27 7379 6d62 6f6c 275d 2c0a 2020  et['symbol'],.  
+00059680: 2020 2020 2020 2020 2020 2773 7461 7475            'statu
+00059690: 7327 3a20 7374 6174 7573 2c0a 2020 2020  s': status,.    
+000596a0: 2020 2020 7d0a 0a20 2020 2061 7379 6e63      }..    async
+000596b0: 2064 6566 2072 6564 7563 655f 6d61 7267   def reduce_marg
+000596c0: 696e 2873 656c 662c 2073 796d 626f 6c3a  in(self, symbol:
+000596d0: 2073 7472 2c20 616d 6f75 6e74 2c20 7061   str, amount, pa
+000596e0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+000596f0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00059700: 6d6f 7665 206d 6172 6769 6e20 6672 6f6d  move margin from
+00059710: 2061 2070 6f73 6974 696f 6e0a 2020 2020   a position.    
+00059720: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
+00059730: 796d 626f 6c3a 2075 6e69 6669 6564 206d  ymbol: unified m
+00059740: 6172 6b65 7420 7379 6d62 6f6c 0a20 2020  arket symbol.   
+00059750: 2020 2020 203a 7061 7261 6d20 666c 6f61       :param floa
+00059760: 7420 616d 6f75 6e74 3a20 7468 6520 616d  t amount: the am
+00059770: 6f75 6e74 206f 6620 6d61 7267 696e 2074  ount of margin t
+00059780: 6f20 7265 6d6f 7665 0a20 2020 2020 2020  o remove.       
+00059790: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
+000597a0: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
+000597b0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+000597c0: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
+000597d0: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
+000597e0: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+000597f0: 3a20 6120 606d 6172 6769 6e20 7374 7275  : a `margin stru
+00059800: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+00059810: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+00059820: 6964 3d72 6564 7563 652d 6d61 7267 696e  id=reduce-margin
+00059830: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+00059840: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00059850: 2072 6574 7572 6e20 6177 6169 7420 7365   return await se
+00059860: 6c66 2e6d 6f64 6966 795f 6d61 7267 696e  lf.modify_margin
+00059870: 5f68 656c 7065 7228 7379 6d62 6f6c 2c20  _helper(symbol, 
+00059880: 616d 6f75 6e74 2c20 322c 2070 6172 616d  amount, 2, param
+00059890: 7329 0a0a 2020 2020 6173 796e 6320 6465  s)..    async de
+000598a0: 6620 6164 645f 6d61 7267 696e 2873 656c  f add_margin(sel
+000598b0: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
+000598c0: 616d 6f75 6e74 2c20 7061 7261 6d73 3d7b  amount, params={
+000598d0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+000598e0: 2020 2020 2020 2020 6164 6420 6d61 7267          add marg
+000598f0: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
+00059900: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
+00059910: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
+00059920: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
+00059930: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+00059940: 2061 6d6f 756e 7420 6f66 206d 6172 6769   amount of margi
+00059950: 6e20 746f 2061 6464 0a20 2020 2020 2020  n to add.       
+00059960: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
+00059970: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
+00059980: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+00059990: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
+000599a0: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
+000599b0: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+000599c0: 3a20 6120 606d 6172 6769 6e20 7374 7275  : a `margin stru
+000599d0: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+000599e0: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+000599f0: 6964 3d61 6464 2d6d 6172 6769 6e2d 7374  id=add-margin-st
+00059a00: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+00059a10: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00059a20: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
+00059a30: 6d6f 6469 6679 5f6d 6172 6769 6e5f 6865  modify_margin_he
+00059a40: 6c70 6572 2873 796d 626f 6c2c 2061 6d6f  lper(symbol, amo
+00059a50: 756e 742c 2031 2c20 7061 7261 6d73 290a  unt, 1, params).
+00059a60: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
+00059a70: 6574 6368 5f62 6f72 726f 775f 7261 7465  etch_borrow_rate
+00059a80: 2873 656c 662c 2063 6f64 653a 2073 7472  (self, code: str
+00059a90: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00059aa0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00059ab0: 2020 6665 7463 6820 7468 6520 7261 7465    fetch the rate
+00059ac0: 206f 6620 696e 7465 7265 7374 2074 6f20   of interest to 
+00059ad0: 626f 7272 6f77 2061 2063 7572 7265 6e63  borrow a currenc
+00059ae0: 7920 666f 7220 6d61 7267 696e 2074 7261  y for margin tra
+00059af0: 6469 6e67 0a20 2020 2020 2020 203a 7061  ding.        :pa
+00059b00: 7261 6d20 7374 7220 636f 6465 3a20 756e  ram str code: un
+00059b10: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+00059b20: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+00059b30: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+00059b40: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00059b50: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00059b60: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00059b70: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+00059b80: 6574 7572 6e73 2064 6963 743a 2061 2060  eturns dict: a `
+00059b90: 626f 7272 6f77 2072 6174 6520 7374 7275  borrow rate stru
+00059ba0: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+00059bb0: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+00059bc0: 6964 3d62 6f72 726f 772d 7261 7465 2d73  id=borrow-rate-s
+00059bd0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+00059be0: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
+00059bf0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
+00059c00: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+00059c10: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+00059c20: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+00059c30: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00059c40: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00059c50: 2761 7373 6574 273a 2063 7572 7265 6e63  'asset': currenc
+00059c60: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
+00059c70: 2020 2020 2023 2027 7669 704c 6576 656c       # 'vipLevel
+00059c80: 273a 2073 656c 662e 7361 6665 5f69 6e74  ': self.safe_int
+00059c90: 6567 6572 2870 6172 616d 732c 2027 7669  eger(params, 'vi
+00059ca0: 704c 6576 656c 2729 2c0a 2020 2020 2020  pLevel'),.      
+00059cb0: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
+00059cc0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+00059cd0: 662e 7361 7069 4765 744d 6172 6769 6e49  f.sapiGetMarginI
+00059ce0: 6e74 6572 6573 7452 6174 6548 6973 746f  nterestRateHisto
+00059cf0: 7279 2873 656c 662e 6578 7465 6e64 2872  ry(self.extend(r
+00059d00: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+00059d10: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00059d20: 2020 2023 2020 2020 205b 0a20 2020 2020     #     [.     
+00059d30: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
+00059d40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00059d50: 2020 2020 2022 6173 7365 7422 3a20 2255       "asset": "U
+00059d60: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+00059d70: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
+00059d80: 6573 7461 6d70 223a 2031 3633 3832 3330  estamp": 1638230
+00059d90: 3430 3030 3030 2c0a 2020 2020 2020 2020  400000,.        
+00059da0: 2320 2020 2020 2020 2020 2020 2020 2264  #             "d
+00059db0: 6169 6c79 496e 7465 7265 7374 5261 7465  ailyInterestRate
+00059dc0: 223a 2022 302e 3030 3036 222c 0a20 2020  ": "0.0006",.   
+00059dd0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00059de0: 2020 2022 7669 704c 6576 656c 223a 2030     "vipLevel": 0
+00059df0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00059e00: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+00059e10: 2020 2020 5d0a 2020 2020 2020 2020 230a      ].        #.
+00059e20: 2020 2020 2020 2020 7261 7465 203d 2073          rate = s
+00059e30: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00059e40: 6573 706f 6e73 652c 2030 290a 2020 2020  esponse, 0).    
+00059e50: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00059e60: 7061 7273 655f 626f 7272 6f77 5f72 6174  parse_borrow_rat
+00059e70: 6528 7261 7465 290a 0a20 2020 2061 7379  e(rate)..    asy
+00059e80: 6e63 2064 6566 2066 6574 6368 5f62 6f72  nc def fetch_bor
+00059e90: 726f 775f 7261 7465 5f68 6973 746f 7279  row_rate_history
+00059ea0: 2873 656c 662c 2063 6f64 653a 2073 7472  (self, code: str
+00059eb0: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
+00059ec0: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
+00059ed0: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
+00059ee0: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
+00059ef0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00059f00: 2222 220a 2020 2020 2020 2020 7265 7472  """.        retr
+00059f10: 6965 7665 7320 6120 6869 7374 6f72 7920  ieves a history 
+00059f20: 6f66 2061 2063 7572 7265 6e63 6965 7320  of a currencies 
+00059f30: 626f 7272 6f77 2069 6e74 6572 6573 7420  borrow interest 
+00059f40: 7261 7465 2061 7420 7370 6563 6966 6963  rate at specific
+00059f50: 2074 696d 6520 736c 6f74 730a 2020 2020   time slots.    
+00059f60: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
+00059f70: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
+00059f80: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
+00059f90: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+00059fa0: 6e65 2073 696e 6365 3a20 7469 6d65 7374  ne since: timest
+00059fb0: 616d 7020 666f 7220 7468 6520 6561 726c  amp for the earl
+00059fc0: 6965 7374 2062 6f72 726f 7720 7261 7465  iest borrow rate
+00059fd0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00059fe0: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
+00059ff0: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
+0005a000: 6572 206f 6620 6062 6f72 726f 7720 7261  er of `borrow ra
+0005a010: 7465 2073 7472 7563 7475 7265 7320 3c68  te structures <h
+0005a020: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+0005a030: 2e63 6f6d 2f23 2f3f 6964 3d62 6f72 726f  .com/#/?id=borro
+0005a040: 772d 7261 7465 2d73 7472 7563 7475 7265  w-rate-structure
+0005a050: 3e60 2074 6f20 7265 7472 6965 7665 0a20  >` to retrieve. 
+0005a060: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+0005a070: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+0005a080: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+0005a090: 6966 6963 2074 6f20 7468 6520 6578 6368  ific to the exch
+0005a0a0: 616e 6765 2061 7069 2065 6e64 706f 696e  ange api endpoin
+0005a0b0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+0005a0c0: 6e73 205b 6469 6374 5d3a 2061 6e20 6172  ns [dict]: an ar
+0005a0d0: 7261 7920 6f66 2060 626f 7272 6f77 2072  ray of `borrow r
+0005a0e0: 6174 6520 7374 7275 6374 7572 6573 203c  ate structures <
+0005a0f0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
+0005a100: 742e 636f 6d2f 232f 3f69 643d 626f 7272  t.com/#/?id=borr
+0005a110: 6f77 2d72 6174 652d 7374 7275 6374 7572  ow-rate-structur
+0005a120: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+0005a130: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0005a140: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+0005a150: 290a 2020 2020 2020 2020 6966 206c 696d  ).        if lim
+0005a160: 6974 2069 7320 4e6f 6e65 3a0a 2020 2020  it is None:.    
+0005a170: 2020 2020 2020 2020 6c69 6d69 7420 3d20          limit = 
+0005a180: 3933 0a20 2020 2020 2020 2065 6c69 6620  93.        elif 
+0005a190: 6c69 6d69 7420 3e20 3933 3a0a 2020 2020  limit > 93:.    
+0005a1a0: 2020 2020 2020 2020 2320 4269 6e61 6e63          # Binanc
+0005a1b0: 6520 4150 4920 7361 7973 2074 6865 206c  e API says the l
+0005a1c0: 696d 6974 2069 7320 3130 302c 2062 7574  imit is 100, but
+0005a1d0: 2022 496c 6c65 6761 6c20 6368 6172 6163   "Illegal charac
+0005a1e0: 7465 7273 2066 6f75 6e64 2069 6e20 6120  ters found in a 
+0005a1f0: 7061 7261 6d65 7465 722e 2220 6973 2072  parameter." is r
+0005a200: 6574 7572 6e65 6420 7768 656e 206c 696d  eturned when lim
+0005a210: 6974 2069 7320 3e20 3933 0a20 2020 2020  it is > 93.     
+0005a220: 2020 2020 2020 2072 6169 7365 2042 6164         raise Bad
+0005a230: 5265 7175 6573 7428 7365 6c66 2e69 6420  Request(self.id 
+0005a240: 2b20 2720 6665 7463 6842 6f72 726f 7752  + ' fetchBorrowR
+0005a250: 6174 6548 6973 746f 7279 2829 206c 696d  ateHistory() lim
+0005a260: 6974 2070 6172 616d 6574 6572 2063 616e  it parameter can
+0005a270: 6e6f 7420 6578 6365 6564 2039 3227 290a  not exceed 92').
+0005a280: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0005a290: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
+0005a2a0: 2863 6f64 6529 0a20 2020 2020 2020 2072  (code).        r
+0005a2b0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+0005a2c0: 2020 2020 2020 2027 6173 7365 7427 3a20         'asset': 
+0005a2d0: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
+0005a2e0: 2020 2020 2020 2020 2020 2020 276c 696d              'lim
+0005a2f0: 6974 273a 206c 696d 6974 2c0a 2020 2020  it': limit,.    
+0005a300: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
+0005a310: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
+0005a320: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0005a330: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
+0005a340: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
+0005a350: 2020 2020 2020 2020 2065 6e64 5469 6d65           endTime
+0005a360: 203d 2073 656c 662e 7375 6d28 7369 6e63   = self.sum(sinc
+0005a370: 652c 206c 696d 6974 202a 2038 3634 3030  e, limit * 86400
+0005a380: 3030 3029 202d 2031 2020 2320 7265 7175  000) - 1  # requ
+0005a390: 6972 6564 2077 6865 6e20 7374 6172 7454  ired when startT
+0005a3a0: 696d 6520 6973 2066 7572 7468 6572 2074  ime is further t
+0005a3b0: 6861 6e20 3933 2064 6179 7320 696e 2074  han 93 days in t
+0005a3c0: 6865 2070 6173 740a 2020 2020 2020 2020  he past.        
+0005a3d0: 2020 2020 6e6f 7720 3d20 7365 6c66 2e6d      now = self.m
+0005a3e0: 696c 6c69 7365 636f 6e64 7328 290a 2020  illiseconds().  
+0005a3f0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0005a400: 745b 2765 6e64 5469 6d65 275d 203d 206d  t['endTime'] = m
+0005a410: 696e 2865 6e64 5469 6d65 2c20 6e6f 7729  in(endTime, now)
+0005a420: 2020 2320 6361 6e6e 6f74 2068 6176 6520    # cannot have 
+0005a430: 616e 2065 6e64 5469 6d65 206c 6174 6572  an endTime later
+0005a440: 2074 6861 6e20 6375 7272 656e 7420 7469   than current ti
+0005a450: 6d65 0a20 2020 2020 2020 2072 6573 706f  me.        respo
+0005a460: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+0005a470: 2e73 6170 6947 6574 4d61 7267 696e 496e  .sapiGetMarginIn
+0005a480: 7465 7265 7374 5261 7465 4869 7374 6f72  terestRateHistor
+0005a490: 7928 7365 6c66 2e65 7874 656e 6428 7265  y(self.extend(re
+0005a4a0: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+0005a4b0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0005a4c0: 2020 2320 2020 2020 5b0a 2020 2020 2020    #     [.      
+0005a4d0: 2020 2320 2020 2020 2020 2020 7b0a 2020    #         {.  
+0005a4e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005a4f0: 2020 2020 2261 7373 6574 223a 2022 5553      "asset": "US
+0005a500: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0005a510: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
+0005a520: 7374 616d 7022 3a20 3136 3338 3233 3034  stamp": 16382304
+0005a530: 3030 3030 302c 0a20 2020 2020 2020 2023  00000,.        #
+0005a540: 2020 2020 2020 2020 2020 2020 2022 6461               "da
+0005a550: 696c 7949 6e74 6572 6573 7452 6174 6522  ilyInterestRate"
+0005a560: 3a20 2230 2e30 3030 3622 2c0a 2020 2020  : "0.0006",.    
+0005a570: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0005a580: 2020 2276 6970 4c65 7665 6c22 3a20 300a    "vipLevel": 0.
+0005a590: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a5a0: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+0005a5b0: 2020 205d 0a20 2020 2020 2020 2023 0a20     ].        #. 
+0005a5c0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0005a5d0: 6c66 2e70 6172 7365 5f62 6f72 726f 775f  lf.parse_borrow_
+0005a5e0: 7261 7465 5f68 6973 746f 7279 2872 6573  rate_history(res
+0005a5f0: 706f 6e73 652c 2063 6f64 652c 2073 696e  ponse, code, sin
+0005a600: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
+0005a610: 6465 6620 7061 7273 655f 626f 7272 6f77  def parse_borrow
+0005a620: 5f72 6174 655f 6869 7374 6f72 7928 7365  _rate_history(se
+0005a630: 6c66 2c20 7265 7370 6f6e 7365 2c20 636f  lf, response, co
+0005a640: 6465 2c20 7369 6e63 652c 206c 696d 6974  de, since, limit
+0005a650: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
+0005a660: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
+0005a670: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+0005a680: 206c 656e 2872 6573 706f 6e73 6529 293a   len(response)):
+0005a690: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
+0005a6a0: 6d20 3d20 7265 7370 6f6e 7365 5b69 5d0a  m = response[i].
+0005a6b0: 2020 2020 2020 2020 2020 2020 626f 7272              borr
+0005a6c0: 6f77 5261 7465 203d 2073 656c 662e 7061  owRate = self.pa
+0005a6d0: 7273 655f 626f 7272 6f77 5f72 6174 6528  rse_borrow_rate(
+0005a6e0: 6974 656d 290a 2020 2020 2020 2020 2020  item).          
+0005a6f0: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
+0005a700: 626f 7272 6f77 5261 7465 290a 2020 2020  borrowRate).    
+0005a710: 2020 2020 736f 7274 6564 203d 2073 656c      sorted = sel
+0005a720: 662e 736f 7274 5f62 7928 7265 7375 6c74  f.sort_by(result
+0005a730: 2c20 2774 696d 6573 7461 6d70 2729 0a20  , 'timestamp'). 
+0005a740: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0005a750: 6c66 2e66 696c 7465 725f 6279 5f63 7572  lf.filter_by_cur
+0005a760: 7265 6e63 795f 7369 6e63 655f 6c69 6d69  rency_since_limi
+0005a770: 7428 736f 7274 6564 2c20 636f 6465 2c20  t(sorted, code, 
+0005a780: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+0005a790: 2020 2064 6566 2070 6172 7365 5f62 6f72     def parse_bor
+0005a7a0: 726f 775f 7261 7465 2873 656c 662c 2069  row_rate(self, i
+0005a7b0: 6e66 6f2c 2063 7572 7265 6e63 793d 4e6f  nfo, currency=No
+0005a7c0: 6e65 293a 0a20 2020 2020 2020 2023 0a20  ne):.        #. 
+0005a7d0: 2020 2020 2020 2023 2020 2020 7b0a 2020         #    {.  
+0005a7e0: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
+0005a7f0: 6173 7365 7422 3a20 2255 5344 5422 2c0a  asset": "USDT",.
+0005a800: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a810: 2022 7469 6d65 7374 616d 7022 3a20 3136   "timestamp": 16
+0005a820: 3338 3233 3034 3030 3030 302c 0a20 2020  38230400000,.   
+0005a830: 2020 2020 2023 2020 2020 2020 2020 2264       #        "d
+0005a840: 6169 6c79 496e 7465 7265 7374 5261 7465  ailyInterestRate
+0005a850: 223a 2022 302e 3030 3036 222c 0a20 2020  ": "0.0006",.   
+0005a860: 2020 2020 2023 2020 2020 2020 2020 2276       #        "v
+0005a870: 6970 4c65 7665 6c22 3a20 300a 2020 2020  ipLevel": 0.    
+0005a880: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
+0005a890: 2020 2023 0a20 2020 2020 2020 2074 696d     #.        tim
+0005a8a0: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
+0005a8b0: 6665 5f6e 756d 6265 7228 696e 666f 2c20  fe_number(info, 
+0005a8c0: 2774 696d 6573 7461 6d70 2729 0a20 2020  'timestamp').   
+0005a8d0: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
+0005a8e0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0005a8f0: 2869 6e66 6f2c 2027 6173 7365 7427 290a  (info, 'asset').
+0005a900: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0005a910: 0a20 2020 2020 2020 2020 2020 2027 6375  .            'cu
+0005a920: 7272 656e 6379 273a 2073 656c 662e 7361  rrency': self.sa
+0005a930: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
+0005a940: 2863 7572 7265 6e63 7929 2c0a 2020 2020  (currency),.    
+0005a950: 2020 2020 2020 2020 2772 6174 6527 3a20          'rate': 
+0005a960: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0005a970: 2869 6e66 6f2c 2027 6461 696c 7949 6e74  (info, 'dailyInt
+0005a980: 6572 6573 7452 6174 6527 292c 0a20 2020  erestRate'),.   
+0005a990: 2020 2020 2020 2020 2027 7065 7269 6f64           'period
+0005a9a0: 273a 2038 3634 3030 3030 302c 0a20 2020  ': 86400000,.   
+0005a9b0: 2020 2020 2020 2020 2027 7469 6d65 7374           'timest
+0005a9c0: 616d 7027 3a20 7469 6d65 7374 616d 702c  amp': timestamp,
+0005a9d0: 0a20 2020 2020 2020 2020 2020 2027 6461  .            'da
+0005a9e0: 7465 7469 6d65 273a 2073 656c 662e 6973  tetime': self.is
+0005a9f0: 6f38 3630 3128 7469 6d65 7374 616d 7029  o8601(timestamp)
+0005aa00: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+0005aa10: 6e66 6f27 3a20 696e 666f 2c0a 2020 2020  nfo': info,.    
+0005aa20: 2020 2020 7d0a 0a20 2020 2061 7379 6e63      }..    async
+0005aa30: 2064 6566 2063 7265 6174 655f 6769 6674   def create_gift
+0005aa40: 5f63 6f64 6528 7365 6c66 2c20 636f 6465  _code(self, code
+0005aa50: 3a20 7374 722c 2061 6d6f 756e 742c 2070  : str, amount, p
+0005aa60: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0005aa70: 2020 2022 2222 0a20 2020 2020 2020 2063     """.        c
+0005aa80: 7265 6174 6520 6769 6674 2063 6f64 650a  reate gift code.
+0005aa90: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0005aaa0: 7472 2063 6f64 653a 2067 6966 7420 636f  tr code: gift co
+0005aab0: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+0005aac0: 6d20 666c 6f61 7420 616d 6f75 6e74 3a20  m float amount: 
+0005aad0: 616d 6f75 6e74 206f 6620 6375 7272 656e  amount of curren
+0005aae0: 6379 2066 6f72 2074 6865 2067 6966 740a  cy for the gift.
+0005aaf0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0005ab00: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+0005ab10: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0005ab20: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
+0005ab30: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
+0005ab40: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+0005ab50: 6e73 2064 6963 743a 2054 6865 2067 6966  ns dict: The gif
+0005ab60: 7420 636f 6465 2069 642c 2063 6f64 652c  t code id, code,
+0005ab70: 2063 7572 7265 6e63 7920 616e 6420 616d   currency and am
+0005ab80: 6f75 6e74 0a20 2020 2020 2020 2022 2222  ount.        """
+0005ab90: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0005aba0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0005abb0: 2829 0a20 2020 2020 2020 2063 7572 7265  ().        curre
+0005abc0: 6e63 7920 3d20 7365 6c66 2e63 7572 7265  ncy = self.curre
+0005abd0: 6e63 7928 636f 6465 290a 2020 2020 2020  ncy(code).      
+0005abe0: 2020 2320 656e 7375 7265 2079 6f75 2068    # ensure you h
+0005abf0: 6176 6520 656e 6f75 6768 2074 6f6b 656e  ave enough token
+0005ac00: 2069 6e20 796f 7572 2066 756e 6469 6e67   in your funding
+0005ac10: 2061 6363 6f75 6e74 2062 6566 6f72 6520   account before 
+0005ac20: 6361 6c6c 696e 6720 7365 6c66 2063 6f64  calling self cod
+0005ac30: 650a 2020 2020 2020 2020 7265 7175 6573  e.        reques
+0005ac40: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+0005ac50: 2020 2774 6f6b 656e 273a 2063 7572 7265    'token': curre
+0005ac60: 6e63 795b 2769 6427 5d2c 0a20 2020 2020  ncy['id'],.     
+0005ac70: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0005ac80: 2061 6d6f 756e 742c 0a20 2020 2020 2020   amount,.       
+0005ac90: 207d 0a20 2020 2020 2020 2072 6573 706f   }.        respo
+0005aca0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+0005acb0: 2e73 6170 6950 6f73 7447 6966 7463 6172  .sapiPostGiftcar
+0005acc0: 6443 7265 6174 6543 6f64 6528 7365 6c66  dCreateCode(self
+0005acd0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+0005ace0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+0005acf0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0005ad00: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0005ad10: 2020 2020 2020 636f 6465 3a20 2730 3030        code: '000
+0005ad20: 3030 3027 2c0a 2020 2020 2020 2020 2320  000',.        # 
+0005ad30: 2020 2020 2020 2020 6d65 7373 6167 653a          message:
+0005ad40: 2027 7375 6363 6573 7327 2c0a 2020 2020   'success',.    
+0005ad50: 2020 2020 2320 2020 2020 2020 2020 6461      #         da
+0005ad60: 7461 3a20 7b72 6566 6572 656e 6365 4e6f  ta: {referenceNo
+0005ad70: 3a20 2730 3033 3330 3032 3430 3432 3139  : '0033002404219
+0005ad80: 3832 3327 2c20 636f 6465 3a20 2741 5036  823', code: 'AP6
+0005ad90: 4558 544c 4b4e 484d 3643 4558 3727 7d2c  EXTLKNHM6CEX7'},
+0005ada0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005adb0: 2020 2073 7563 6365 7373 3a20 5472 7565     success: True
+0005adc0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+0005add0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0005ade0: 2020 2064 6174 6120 3d20 7365 6c66 2e73     data = self.s
+0005adf0: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+0005ae00: 7365 2c20 2764 6174 6127 290a 2020 2020  se, 'data').    
+0005ae10: 2020 2020 6769 6674 6361 7264 436f 6465      giftcardCode
+0005ae20: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0005ae30: 696e 6728 6461 7461 2c20 2763 6f64 6527  ing(data, 'code'
+0005ae40: 290a 2020 2020 2020 2020 6964 203d 2073  ).        id = s
+0005ae50: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0005ae60: 6461 7461 2c20 2772 6566 6572 656e 6365  data, 'reference
+0005ae70: 4e6f 2729 0a20 2020 2020 2020 2072 6574  No').        ret
+0005ae80: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
+0005ae90: 2020 2769 6e66 6f27 3a20 7265 7370 6f6e    'info': respon
+0005aea0: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+0005aeb0: 2769 6427 3a20 6964 2c0a 2020 2020 2020  'id': id,.      
+0005aec0: 2020 2020 2020 2763 6f64 6527 3a20 6769        'code': gi
+0005aed0: 6674 6361 7264 436f 6465 2c0a 2020 2020  ftcardCode,.    
+0005aee0: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
+0005aef0: 7927 3a20 636f 6465 2c0a 2020 2020 2020  y': code,.      
+0005af00: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
+0005af10: 616d 6f75 6e74 2c0a 2020 2020 2020 2020  amount,.        
+0005af20: 7d0a 0a20 2020 2061 7379 6e63 2064 6566  }..    async def
+0005af30: 2072 6564 6565 6d5f 6769 6674 5f63 6f64   redeem_gift_cod
+0005af40: 6528 7365 6c66 2c20 6769 6674 6361 7264  e(self, giftcard
+0005af50: 436f 6465 2c20 7061 7261 6d73 3d7b 7d29  Code, params={})
+0005af60: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0005af70: 2020 2020 2020 7265 6465 656d 2067 6966        redeem gif
+0005af80: 7420 636f 6465 0a20 2020 2020 2020 203a  t code.        :
+0005af90: 7061 7261 6d20 7374 7220 6769 6674 6361  param str giftca
+0005afa0: 7264 436f 6465 3a0a 2020 2020 2020 2020  rdCode:.        
+0005afb0: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+0005afc0: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+0005afd0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+0005afe0: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+0005aff0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+0005b000: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+0005b010: 2072 6573 706f 6e73 6520 6672 6f6d 2074   response from t
+0005b020: 6865 2065 7863 6861 6e67 650a 2020 2020  he exchange.    
+0005b030: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0005b040: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+0005b050: 2020 2020 2020 2020 2763 6f64 6527 3a20          'code': 
+0005b060: 6769 6674 6361 7264 436f 6465 2c0a 2020  giftcardCode,.  
+0005b070: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0005b080: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+0005b090: 2073 656c 662e 7361 7069 506f 7374 4769   self.sapiPostGi
+0005b0a0: 6674 6361 7264 5265 6465 656d 436f 6465  ftcardRedeemCode
+0005b0b0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+0005b0c0: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+0005b0d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0005b0e0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+0005b0f0: 2023 2020 2020 2020 2020 2063 6f64 653a   #         code:
+0005b100: 2027 3030 3030 3030 272c 0a20 2020 2020   '000000',.     
+0005b110: 2020 2023 2020 2020 2020 2020 206d 6573     #         mes
+0005b120: 7361 6765 3a20 2773 7563 6365 7373 272c  sage: 'success',
+0005b130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005b140: 2020 2064 6174 613a 207b 0a20 2020 2020     data: {.     
+0005b150: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0005b160: 2072 6566 6572 656e 6365 4e6f 3a20 2730   referenceNo: '0
+0005b170: 3033 3330 3032 3430 3432 3139 3832 3327  033002404219823'
+0005b180: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005b190: 2020 2020 2020 2020 6964 656e 7469 7479          identity
+0005b1a0: 4e6f 3a20 2731 3033 3136 3433 3137 3332  No: '10316431732
+0005b1b0: 3830 3134 3734 3536 3027 0a20 2020 2020  801474560'.     
+0005b1c0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0005b1d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005b1e0: 2020 7375 6363 6573 733a 2054 7275 650a    success: True.
+0005b1f0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0005b200: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0005b210: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+0005b220: 650a 0a20 2020 2061 7379 6e63 2064 6566  e..    async def
+0005b230: 2076 6572 6966 795f 6769 6674 5f63 6f64   verify_gift_cod
+0005b240: 6528 7365 6c66 2c20 6964 3a20 7374 722c  e(self, id: str,
+0005b250: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0005b260: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0005b270: 2076 6572 6966 7920 6769 6674 2063 6f64   verify gift cod
+0005b280: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+0005b290: 2073 7472 2069 643a 2072 6566 6572 656e   str id: referen
+0005b2a0: 6365 206e 756d 6265 7220 6964 0a20 2020  ce number id.   
+0005b2b0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0005b2c0: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0005b2d0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0005b2e0: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+0005b2f0: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+0005b300: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0005b310: 6469 6374 3a20 7265 7370 6f6e 7365 2066  dict: response f
+0005b320: 726f 6d20 7468 6520 6578 6368 616e 6765  rom the exchange
+0005b330: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0005b340: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+0005b350: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
+0005b360: 6665 7265 6e63 654e 6f27 3a20 6964 2c0a  ferenceNo': id,.
+0005b370: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0005b380: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
+0005b390: 6974 2073 656c 662e 7361 7069 4765 7447  it self.sapiGetG
+0005b3a0: 6966 7463 6172 6456 6572 6966 7928 7365  iftcardVerify(se
+0005b3b0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+0005b3c0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+0005b3d0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005b3e0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0005b3f0: 2020 2020 2020 2020 636f 6465 3a20 2730          code: '0
+0005b400: 3030 3030 3027 2c0a 2020 2020 2020 2020  00000',.        
+0005b410: 2320 2020 2020 2020 2020 6d65 7373 6167  #         messag
+0005b420: 653a 2027 7375 6363 6573 7327 2c0a 2020  e: 'success',.  
+0005b430: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005b440: 6461 7461 3a20 7b76 616c 6964 3a20 5472  data: {valid: Tr
+0005b450: 7565 7d2c 0a20 2020 2020 2020 2023 2020  ue},.        #  
+0005b460: 2020 2020 2020 2073 7563 6365 7373 3a20         success: 
+0005b470: 5472 7565 0a20 2020 2020 2020 2023 2020  True.        #  
+0005b480: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0005b490: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+0005b4a0: 7370 6f6e 7365 0a0a 2020 2020 6173 796e  sponse..    asyn
+0005b4b0: 6320 6465 6620 6665 7463 685f 626f 7272  c def fetch_borr
+0005b4c0: 6f77 5f69 6e74 6572 6573 7428 7365 6c66  ow_interest(self
+0005b4d0: 2c20 636f 6465 3a20 4f70 7469 6f6e 616c  , code: Optional
+0005b4e0: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7379  [str] = None, sy
+0005b4f0: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+0005b500: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
+0005b510: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
+0005b520: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+0005b530: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
+0005b540: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+0005b550: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0005b560: 2020 2020 2020 6665 7463 6820 7468 6520        fetch the 
+0005b570: 696e 7465 7265 7374 206f 7765 6420 6279  interest owed by
+0005b580: 2074 6865 2075 7365 7220 666f 7220 626f   the user for bo
+0005b590: 7272 6f77 696e 6720 6375 7272 656e 6379  rrowing currency
+0005b5a0: 2066 6f72 206d 6172 6769 6e20 7472 6164   for margin trad
+0005b5b0: 696e 670a 2020 2020 2020 2020 3a70 6172  ing.        :par
+0005b5c0: 616d 2073 7472 7c4e 6f6e 6520 636f 6465  am str|None code
+0005b5d0: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
+0005b5e0: 6379 2063 6f64 650a 2020 2020 2020 2020  cy code.        
+0005b5f0: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+0005b600: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+0005b610: 6d61 726b 6574 2073 796d 626f 6c20 7768  market symbol wh
+0005b620: 656e 2066 6574 6368 2069 6e74 6572 6573  en fetch interes
+0005b630: 7420 696e 2069 736f 6c61 7465 6420 6d61  t in isolated ma
+0005b640: 726b 6574 730a 2020 2020 2020 2020 3a70  rkets.        :p
+0005b650: 6172 616d 2069 6e74 7c4e 6f6e 6520 7369  aram int|None si
+0005b660: 6e63 653a 2074 6865 2065 6172 6c69 6573  nce: the earlies
+0005b670: 7420 7469 6d65 2069 6e20 6d73 2074 6f20  t time in ms to 
+0005b680: 6665 7463 6820 626f 7272 726f 7720 696e  fetch borrrow in
+0005b690: 7465 7265 7374 2066 6f72 0a20 2020 2020  terest for.     
+0005b6a0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+0005b6b0: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
+0005b6c0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
+0005b6d0: 7374 7275 6374 7572 6573 2074 6f20 7265  structures to re
+0005b6e0: 7472 6965 7665 0a20 2020 2020 2020 203a  trieve.        :
+0005b6f0: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+0005b700: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+0005b710: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+0005b720: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
+0005b730: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+0005b740: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
+0005b750: 3a20 6120 6c69 7374 206f 6620 6062 6f72  : a list of `bor
+0005b760: 726f 7720 696e 7465 7265 7374 2073 7472  row interest str
+0005b770: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+0005b780: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+0005b790: 2f3f 6964 3d62 6f72 726f 772d 696e 7465  /?id=borrow-inte
+0005b7a0: 7265 7374 2d73 7472 7563 7475 7265 3e60  rest-structure>`
+0005b7b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0005b7c0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+0005b7d0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0005b7e0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0005b7f0: 207b 7d0a 2020 2020 2020 2020 6d61 726b   {}.        mark
+0005b800: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
+0005b810: 2020 6966 2063 6f64 6520 6973 206e 6f74    if code is not
+0005b820: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0005b830: 2020 2063 7572 7265 6e63 7920 3d20 7365     currency = se
+0005b840: 6c66 2e63 7572 7265 6e63 7928 636f 6465  lf.currency(code
+0005b850: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+0005b860: 7175 6573 745b 2761 7373 6574 275d 203d  quest['asset'] =
+0005b870: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
+0005b880: 2020 2020 2020 2020 6966 2073 696e 6365          if since
+0005b890: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0005b8a0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0005b8b0: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
+0005b8c0: 2073 696e 6365 0a20 2020 2020 2020 2069   since.        i
+0005b8d0: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+0005b8e0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0005b8f0: 2072 6571 7565 7374 5b27 7369 7a65 275d   request['size']
+0005b900: 203d 206c 696d 6974 0a20 2020 2020 2020   = limit.       
+0005b910: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
+0005b920: 7420 4e6f 6e65 3a20 2023 2049 736f 6c61  t None:  # Isola
+0005b930: 7465 640a 2020 2020 2020 2020 2020 2020  ted.            
+0005b940: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+0005b950: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+0005b960: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0005b970: 5b27 6973 6f6c 6174 6564 5379 6d62 6f6c  ['isolatedSymbol
+0005b980: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
+0005b990: 5d0a 2020 2020 2020 2020 7265 7370 6f6e  ].        respon
+0005b9a0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+0005b9b0: 7361 7069 4765 744d 6172 6769 6e49 6e74  sapiGetMarginInt
+0005b9c0: 6572 6573 7448 6973 746f 7279 2873 656c  erestHistory(sel
+0005b9d0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0005b9e0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0005b9f0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0005ba00: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0005ba10: 2020 2020 2020 2022 726f 7773 223a 5b0a         "rows":[.
+0005ba20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005ba30: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0005ba40: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0005ba50: 2020 2269 736f 6c61 7465 6453 796d 626f    "isolatedSymbo
+0005ba60: 6c22 3a20 2242 4e42 5553 4454 222c 2020  l": "BNBUSDT",  
+0005ba70: 2320 6973 6f6c 6174 6564 2073 796d 626f  # isolated symbo
+0005ba80: 6c2c 2077 696c 6c20 6e6f 7420 6265 2072  l, will not be r
+0005ba90: 6574 7572 6e65 6420 666f 7220 6372 6f73  eturned for cros
+0005baa0: 7365 6420 6d61 7267 696e 0a20 2020 2020  sed margin.     
+0005bab0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0005bac0: 2020 2020 2022 6173 7365 7422 3a20 2242       "asset": "B
+0005bad0: 4e42 222c 0a20 2020 2020 2020 2023 2020  NB",.        #  
+0005bae0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0005baf0: 696e 7465 7265 7374 223a 2022 302e 3032  interest": "0.02
+0005bb00: 3431 3436 3637 222c 0a20 2020 2020 2020  414667",.       
+0005bb10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005bb20: 2020 2022 696e 7465 7265 7374 4163 6375     "interestAccu
+0005bb30: 7265 6454 696d 6522 3a20 3135 3636 3831  redTime": 156681
+0005bb40: 3336 3030 3030 302c 0a20 2020 2020 2020  3600000,.       
+0005bb50: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005bb60: 2020 2022 696e 7465 7265 7374 5261 7465     "interestRate
+0005bb70: 223a 2022 302e 3031 3630 3030 3030 222c  ": "0.01600000",
+0005bb80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005bb90: 2020 2020 2020 2020 2020 2022 7072 696e             "prin
+0005bba0: 6369 7061 6c22 3a20 2233 362e 3232 3030  cipal": "36.2200
+0005bbb0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+0005bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005bbd0: 2022 7479 7065 223a 2022 4f4e 5f42 4f52   "type": "ON_BOR
+0005bbe0: 524f 5722 0a20 2020 2020 2020 2023 2020  ROW".        #  
+0005bbf0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+0005bc00: 2020 2020 2023 2020 2020 2020 2020 205d       #         ]
+0005bc10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005bc20: 2020 2020 2274 6f74 616c 223a 2031 0a20      "total": 1. 
+0005bc30: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0005bc40: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0005bc50: 2072 6f77 7320 3d20 7365 6c66 2e73 6166   rows = self.saf
+0005bc60: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+0005bc70: 2c20 2772 6f77 7327 290a 2020 2020 2020  , 'rows').      
+0005bc80: 2020 696e 7465 7265 7374 203d 2073 656c    interest = sel
+0005bc90: 662e 7061 7273 655f 626f 7272 6f77 5f69  f.parse_borrow_i
+0005bca0: 6e74 6572 6573 7473 2872 6f77 732c 206d  nterests(rows, m
+0005bcb0: 6172 6b65 7429 0a20 2020 2020 2020 2072  arket).        r
+0005bcc0: 6574 7572 6e20 7365 6c66 2e66 696c 7465  eturn self.filte
+0005bcd0: 725f 6279 5f63 7572 7265 6e63 795f 7369  r_by_currency_si
+0005bce0: 6e63 655f 6c69 6d69 7428 696e 7465 7265  nce_limit(intere
+0005bcf0: 7374 2c20 636f 6465 2c20 7369 6e63 652c  st, code, since,
+0005bd00: 206c 696d 6974 290a 0a20 2020 2064 6566   limit)..    def
+0005bd10: 2070 6172 7365 5f62 6f72 726f 775f 696e   parse_borrow_in
+0005bd20: 7465 7265 7374 2873 656c 662c 2069 6e66  terest(self, inf
+0005bd30: 6f2c 206d 6172 6b65 743d 4e6f 6e65 293a  o, market=None):
+0005bd40: 0a20 2020 2020 2020 2073 796d 626f 6c20  .        symbol 
+0005bd50: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0005bd60: 6e67 2869 6e66 6f2c 2027 6973 6f6c 6174  ng(info, 'isolat
+0005bd70: 6564 5379 6d62 6f6c 2729 0a20 2020 2020  edSymbol').     
+0005bd80: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
+0005bd90: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0005bda0: 696e 666f 2c20 2769 6e74 6572 6573 7441  info, 'interestA
+0005bdb0: 6363 7572 6564 5469 6d65 2729 0a20 2020  ccuredTime').   
+0005bdc0: 2020 2020 206d 6172 6769 6e4d 6f64 6520       marginMode 
+0005bdd0: 3d20 2763 726f 7373 2720 6966 2028 7379  = 'cross' if (sy
+0005bde0: 6d62 6f6c 2069 7320 4e6f 6e65 2920 656c  mbol is None) el
+0005bdf0: 7365 2027 6973 6f6c 6174 6564 270a 2020  se 'isolated'.  
+0005be00: 2020 2020 2020 7265 7475 726e 207b 0a20        return {. 
+0005be10: 2020 2020 2020 2020 2020 2027 6163 636f             'acco
+0005be20: 756e 7427 3a20 2763 726f 7373 2720 6966  unt': 'cross' if
+0005be30: 2028 7379 6d62 6f6c 2069 7320 4e6f 6e65   (symbol is None
+0005be40: 2920 656c 7365 2073 796d 626f 6c2c 0a20  ) else symbol,. 
+0005be50: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+0005be60: 6f6c 273a 2073 796d 626f 6c2c 0a20 2020  ol': symbol,.   
+0005be70: 2020 2020 2020 2020 2027 6d61 7267 696e           'margin
+0005be80: 4d6f 6465 273a 206d 6172 6769 6e4d 6f64  Mode': marginMod
+0005be90: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0005bea0: 6375 7272 656e 6379 273a 2073 656c 662e  currency': self.
+0005beb0: 7361 6665 5f63 7572 7265 6e63 795f 636f  safe_currency_co
+0005bec0: 6465 2873 656c 662e 7361 6665 5f73 7472  de(self.safe_str
+0005bed0: 696e 6728 696e 666f 2c20 2761 7373 6574  ing(info, 'asset
+0005bee0: 2729 292c 0a20 2020 2020 2020 2020 2020  ')),.           
+0005bef0: 2027 696e 7465 7265 7374 273a 2073 656c   'interest': sel
+0005bf00: 662e 7361 6665 5f6e 756d 6265 7228 696e  f.safe_number(in
+0005bf10: 666f 2c20 2769 6e74 6572 6573 7427 292c  fo, 'interest'),
+0005bf20: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
+0005bf30: 7465 7265 7374 5261 7465 273a 2073 656c  terestRate': sel
+0005bf40: 662e 7361 6665 5f6e 756d 6265 7228 696e  f.safe_number(in
+0005bf50: 666f 2c20 2769 6e74 6572 6573 7452 6174  fo, 'interestRat
+0005bf60: 6527 292c 0a20 2020 2020 2020 2020 2020  e'),.           
+0005bf70: 2027 616d 6f75 6e74 426f 7272 6f77 6564   'amountBorrowed
+0005bf80: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
+0005bf90: 6265 7228 696e 666f 2c20 2770 7269 6e63  ber(info, 'princ
+0005bfa0: 6970 616c 2729 2c0a 2020 2020 2020 2020  ipal'),.        
+0005bfb0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
+0005bfc0: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
+0005bfd0: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
+0005bfe0: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
+0005bff0: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
+0005c000: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+0005c010: 2069 6e66 6f2c 0a20 2020 2020 2020 207d   info,.        }
+0005c020: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+0005c030: 7265 7061 795f 6d61 7267 696e 2873 656c  repay_margin(sel
+0005c040: 662c 2063 6f64 653a 2073 7472 2c20 616d  f, code: str, am
+0005c050: 6f75 6e74 2c20 7379 6d62 6f6c 3a20 4f70  ount, symbol: Op
+0005c060: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+0005c070: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+0005c080: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0005c090: 2020 2020 7265 7061 7920 626f 7272 6f77      repay borrow
+0005c0a0: 6564 206d 6172 6769 6e20 616e 6420 696e  ed margin and in
+0005c0b0: 7465 7265 7374 0a20 2020 2020 2020 2073  terest.        s
+0005c0c0: 6565 2068 7474 7073 3a2f 2f62 696e 616e  ee https://binan
+0005c0d0: 6365 2d64 6f63 732e 6769 7468 7562 2e69  ce-docs.github.i
+0005c0e0: 6f2f 6170 6964 6f63 732f 7370 6f74 2f65  o/apidocs/spot/e
+0005c0f0: 6e2f 236d 6172 6769 6e2d 6163 636f 756e  n/#margin-accoun
+0005c100: 742d 7265 7061 792d 6d61 7267 696e 0a20  t-repay-margin. 
+0005c110: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0005c120: 7220 636f 6465 3a20 756e 6966 6965 6420  r code: unified 
+0005c130: 6375 7272 656e 6379 2063 6f64 6520 6f66  currency code of
+0005c140: 2074 6865 2063 7572 7265 6e63 7920 746f   the currency to
+0005c150: 2072 6570 6179 0a20 2020 2020 2020 203a   repay.        :
+0005c160: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
+0005c170: 6e74 3a20 7468 6520 616d 6f75 6e74 2074  nt: the amount t
+0005c180: 6f20 7265 7061 790a 2020 2020 2020 2020  o repay.        
+0005c190: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+0005c1a0: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+0005c1b0: 6d61 726b 6574 2073 796d 626f 6c2c 2072  market symbol, r
+0005c1c0: 6571 7569 7265 6420 666f 7220 6973 6f6c  equired for isol
+0005c1d0: 6174 6564 206d 6172 6769 6e0a 2020 2020  ated margin.    
+0005c1e0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0005c1f0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0005c200: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0005c210: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
+0005c220: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+0005c230: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
+0005c240: 6963 743a 2061 2060 6d61 7267 696e 206c  ict: a `margin l
+0005c250: 6f61 6e20 7374 7275 6374 7572 6520 3c68  oan structure <h
+0005c260: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+0005c270: 2e63 6f6d 2f23 2f3f 6964 3d6d 6172 6769  .com/#/?id=margi
+0005c280: 6e2d 6c6f 616e 2d73 7472 7563 7475 7265  n-loan-structure
+0005c290: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+0005c2a0: 2020 2020 2020 206d 6172 6769 6e4d 6f64         marginMod
+0005c2b0: 652c 2071 7565 7279 203d 2073 656c 662e  e, query = self.
+0005c2c0: 6861 6e64 6c65 5f6d 6172 6769 6e5f 6d6f  handle_margin_mo
+0005c2d0: 6465 5f61 6e64 5f70 6172 616d 7328 2772  de_and_params('r
+0005c2e0: 6570 6179 4d61 7267 696e 272c 2070 6172  epayMargin', par
+0005c2f0: 616d 7329 2020 2320 6372 6f73 7320 6f72  ams)  # cross or
+0005c300: 2069 736f 6c61 7465 640a 2020 2020 2020   isolated.      
+0005c310: 2020 7365 6c66 2e63 6865 636b 5f72 6571    self.check_req
+0005c320: 7569 7265 645f 6d61 7267 696e 5f61 7267  uired_margin_arg
+0005c330: 756d 656e 7428 2772 6570 6179 4d61 7267  ument('repayMarg
+0005c340: 696e 272c 2073 796d 626f 6c2c 206d 6172  in', symbol, mar
+0005c350: 6769 6e4d 6f64 6529 0a20 2020 2020 2020  ginMode).       
+0005c360: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+0005c370: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0005c380: 2020 2063 7572 7265 6e63 7920 3d20 7365     currency = se
+0005c390: 6c66 2e63 7572 7265 6e63 7928 636f 6465  lf.currency(code
+0005c3a0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+0005c3b0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+0005c3c0: 2020 2761 7373 6574 273a 2063 7572 7265    'asset': curre
+0005c3d0: 6e63 795b 2769 6427 5d2c 0a20 2020 2020  ncy['id'],.     
+0005c3e0: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0005c3f0: 2073 656c 662e 6375 7272 656e 6379 5f74   self.currency_t
+0005c400: 6f5f 7072 6563 6973 696f 6e28 636f 6465  o_precision(code
+0005c410: 2c20 616d 6f75 6e74 292c 0a20 2020 2020  , amount),.     
+0005c420: 2020 207d 0a20 2020 2020 2020 2069 6620     }.        if 
+0005c430: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
+0005c440: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0005c450: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+0005c460: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+0005c470: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0005c480: 5b27 7379 6d62 6f6c 275d 203d 206d 6172  ['symbol'] = mar
+0005c490: 6b65 745b 2769 6427 5d0a 2020 2020 2020  ket['id'].      
+0005c4a0: 2020 2020 2020 7265 7175 6573 745b 2769        request['i
+0005c4b0: 7349 736f 6c61 7465 6427 5d20 3d20 2754  sIsolated'] = 'T
+0005c4c0: 5255 4527 0a20 2020 2020 2020 2072 6573  RUE'.        res
+0005c4d0: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+0005c4e0: 6c66 2e73 6170 6950 6f73 744d 6172 6769  lf.sapiPostMargi
+0005c4f0: 6e52 6570 6179 2873 656c 662e 6578 7465  nRepay(self.exte
+0005c500: 6e64 2872 6571 7565 7374 2c20 7175 6572  nd(request, quer
+0005c510: 7929 290a 2020 2020 2020 2020 230a 2020  y)).        #.  
+0005c520: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0005c530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005c540: 2274 7261 6e49 6422 3a20 3130 3839 3838  "tranId": 108988
+0005c550: 3235 3032 3635 2c0a 2020 2020 2020 2020  250265,.        
+0005c560: 2320 2020 2020 2020 2020 2263 6c69 656e  #         "clien
+0005c570: 7454 6167 223a 2222 0a20 2020 2020 2020  tTag":"".       
+0005c580: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+0005c590: 2023 0a20 2020 2020 2020 2072 6574 7572   #.        retur
+0005c5a0: 6e20 7365 6c66 2e70 6172 7365 5f6d 6172  n self.parse_mar
+0005c5b0: 6769 6e5f 6c6f 616e 2872 6573 706f 6e73  gin_loan(respons
+0005c5c0: 652c 2063 7572 7265 6e63 7929 0a0a 2020  e, currency)..  
+0005c5d0: 2020 6173 796e 6320 6465 6620 626f 7272    async def borr
+0005c5e0: 6f77 5f6d 6172 6769 6e28 7365 6c66 2c20  ow_margin(self, 
+0005c5f0: 636f 6465 3a20 7374 722c 2061 6d6f 756e  code: str, amoun
+0005c600: 742c 2073 796d 626f 6c3a 204f 7074 696f  t, symbol: Optio
+0005c610: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
+0005c620: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0005c630: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0005c640: 2063 7265 6174 6520 6120 6c6f 616e 2074   create a loan t
+0005c650: 6f20 626f 7272 6f77 206d 6172 6769 6e0a  o borrow margin.
+0005c660: 2020 2020 2020 2020 7365 6520 6874 7470          see http
+0005c670: 733a 2f2f 6269 6e61 6e63 652d 646f 6373  s://binance-docs
+0005c680: 2e67 6974 6875 622e 696f 2f61 7069 646f  .github.io/apido
+0005c690: 6373 2f73 706f 742f 656e 2f23 6d61 7267  cs/spot/en/#marg
+0005c6a0: 696e 2d61 6363 6f75 6e74 2d62 6f72 726f  in-account-borro
+0005c6b0: 772d 6d61 7267 696e 0a20 2020 2020 2020  w-margin.       
+0005c6c0: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
+0005c6d0: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
+0005c6e0: 6379 2063 6f64 6520 6f66 2074 6865 2063  cy code of the c
+0005c6f0: 7572 7265 6e63 7920 746f 2062 6f72 726f  urrency to borro
+0005c700: 770a 2020 2020 2020 2020 3a70 6172 616d  w.        :param
+0005c710: 2066 6c6f 6174 2061 6d6f 756e 743a 2074   float amount: t
+0005c720: 6865 2061 6d6f 756e 7420 746f 2062 6f72  he amount to bor
+0005c730: 726f 770a 2020 2020 2020 2020 3a70 6172  row.        :par
+0005c740: 616d 2073 7472 7c4e 6f6e 6520 7379 6d62  am str|None symb
+0005c750: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
+0005c760: 6574 2073 796d 626f 6c2c 2072 6571 7569  et symbol, requi
+0005c770: 7265 6420 666f 7220 6973 6f6c 6174 6564  red for isolated
+0005c780: 206d 6172 6769 6e0a 2020 2020 2020 2020   margin.        
+0005c790: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+0005c7a0: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+0005c7b0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+0005c7c0: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+0005c7d0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+0005c7e0: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+0005c7f0: 2061 2060 6d61 7267 696e 206c 6f61 6e20   a `margin loan 
+0005c800: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+0005c810: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+0005c820: 2f23 2f3f 6964 3d6d 6172 6769 6e2d 6c6f  /#/?id=margin-lo
+0005c830: 616e 2d73 7472 7563 7475 7265 3e60 0a20  an-structure>`. 
+0005c840: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0005c850: 2020 206d 6172 6769 6e4d 6f64 652c 2071     marginMode, q
+0005c860: 7565 7279 203d 2073 656c 662e 6861 6e64  uery = self.hand
+0005c870: 6c65 5f6d 6172 6769 6e5f 6d6f 6465 5f61  le_margin_mode_a
+0005c880: 6e64 5f70 6172 616d 7328 2762 6f72 726f  nd_params('borro
+0005c890: 774d 6172 6769 6e27 2c20 7061 7261 6d73  wMargin', params
+0005c8a0: 2920 2023 2063 726f 7373 206f 7220 6973  )  # cross or is
+0005c8b0: 6f6c 6174 6564 0a20 2020 2020 2020 2073  olated.        s
+0005c8c0: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
+0005c8d0: 6564 5f6d 6172 6769 6e5f 6172 6775 6d65  ed_margin_argume
+0005c8e0: 6e74 2827 626f 7272 6f77 4d61 7267 696e  nt('borrowMargin
+0005c8f0: 272c 2073 796d 626f 6c2c 206d 6172 6769  ', symbol, margi
+0005c900: 6e4d 6f64 6529 0a20 2020 2020 2020 2061  nMode).        a
+0005c910: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
+0005c920: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+0005c930: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+0005c940: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+0005c950: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0005c960: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0005c970: 2761 7373 6574 273a 2063 7572 7265 6e63  'asset': currenc
+0005c980: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
+0005c990: 2020 2020 2027 616d 6f75 6e74 273a 2073       'amount': s
+0005c9a0: 656c 662e 6375 7272 656e 6379 5f74 6f5f  elf.currency_to_
+0005c9b0: 7072 6563 6973 696f 6e28 636f 6465 2c20  precision(code, 
+0005c9c0: 616d 6f75 6e74 292c 0a20 2020 2020 2020  amount),.       
+0005c9d0: 207d 0a20 2020 2020 2020 2069 6620 7379   }.        if sy
+0005c9e0: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+0005c9f0: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+0005ca00: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+0005ca10: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+0005ca20: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0005ca30: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+0005ca40: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+0005ca50: 2020 2020 7265 7175 6573 745b 2769 7349      request['isI
+0005ca60: 736f 6c61 7465 6427 5d20 3d20 2754 5255  solated'] = 'TRU
+0005ca70: 4527 0a20 2020 2020 2020 2072 6573 706f  E'.        respo
+0005ca80: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+0005ca90: 2e73 6170 6950 6f73 744d 6172 6769 6e4c  .sapiPostMarginL
+0005caa0: 6f61 6e28 7365 6c66 2e65 7874 656e 6428  oan(self.extend(
+0005cab0: 7265 7175 6573 742c 2071 7565 7279 2929  request, query))
+0005cac0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0005cad0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0005cae0: 2020 2023 2020 2020 2020 2020 2022 7472     #         "tr
+0005caf0: 616e 4964 223a 2031 3038 3938 3832 3530  anId": 108988250
+0005cb00: 3236 352c 0a20 2020 2020 2020 2023 2020  265,.        #  
+0005cb10: 2020 2020 2020 2022 636c 6965 6e74 5461         "clientTa
+0005cb20: 6722 3a22 220a 2020 2020 2020 2020 2320  g":"".        # 
+0005cb30: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0005cb40: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0005cb50: 656c 662e 7061 7273 655f 6d61 7267 696e  elf.parse_margin
+0005cb60: 5f6c 6f61 6e28 7265 7370 6f6e 7365 2c20  _loan(response, 
+0005cb70: 6375 7272 656e 6379 290a 0a20 2020 2064  currency)..    d
+0005cb80: 6566 2070 6172 7365 5f6d 6172 6769 6e5f  ef parse_margin_
+0005cb90: 6c6f 616e 2873 656c 662c 2069 6e66 6f2c  loan(self, info,
+0005cba0: 2063 7572 7265 6e63 793d 4e6f 6e65 293a   currency=None):
+0005cbb0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0005cbc0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0005cbd0: 2020 2023 2020 2020 2020 2020 2022 7472     #         "tr
+0005cbe0: 616e 4964 223a 2031 3038 3938 3832 3530  anId": 108988250
+0005cbf0: 3236 352c 0a20 2020 2020 2020 2023 2020  265,.        #  
+0005cc00: 2020 2020 2020 2022 636c 6965 6e74 5461         "clientTa
+0005cc10: 6722 3a22 220a 2020 2020 2020 2020 2320  g":"".        # 
+0005cc20: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0005cc30: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0005cc40: 0a20 2020 2020 2020 2020 2020 2027 6964  .            'id
+0005cc50: 273a 2073 656c 662e 7361 6665 5f69 6e74  ': self.safe_int
+0005cc60: 6567 6572 2869 6e66 6f2c 2027 7472 616e  eger(info, 'tran
+0005cc70: 4964 2729 2c0a 2020 2020 2020 2020 2020  Id'),.          
+0005cc80: 2020 2763 7572 7265 6e63 7927 3a20 7365    'currency': se
+0005cc90: 6c66 2e73 6166 655f 6375 7272 656e 6379  lf.safe_currency
+0005cca0: 5f63 6f64 6528 4e6f 6e65 2c20 6375 7272  _code(None, curr
+0005ccb0: 656e 6379 292c 0a20 2020 2020 2020 2020  ency),.         
+0005ccc0: 2020 2027 616d 6f75 6e74 273a 204e 6f6e     'amount': Non
+0005ccd0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0005cce0: 7379 6d62 6f6c 273a 204e 6f6e 652c 0a20  symbol': None,. 
+0005ccf0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0005cd00: 7374 616d 7027 3a20 4e6f 6e65 2c0a 2020  stamp': None,.  
+0005cd10: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
+0005cd20: 696d 6527 3a20 4e6f 6e65 2c0a 2020 2020  ime': None,.    
+0005cd30: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
+0005cd40: 696e 666f 2c0a 2020 2020 2020 2020 7d0a  info,.        }.
+0005cd50: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
+0005cd60: 6574 6368 5f6f 7065 6e5f 696e 7465 7265  etch_open_intere
+0005cd70: 7374 5f68 6973 746f 7279 2873 656c 662c  st_history(self,
+0005cd80: 2073 796d 626f 6c3a 2073 7472 2c20 7469   symbol: str, ti
+0005cd90: 6d65 6672 616d 653d 2735 6d27 2c20 7369  meframe='5m', si
+0005cda0: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
+0005cdb0: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
+0005cdc0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+0005cdd0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+0005cde0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+0005cdf0: 2020 2020 2020 2020 5265 7472 6965 7665          Retrieve
+0005ce00: 7320 7468 6520 6f70 656e 2069 6e74 6572  s the open inter
+0005ce10: 6573 7420 6869 7374 6f72 7920 6f66 2061  est history of a
+0005ce20: 2063 7572 7265 6e63 790a 2020 2020 2020   currency.      
+0005ce30: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
+0005ce40: 626f 6c3a 2055 6e69 6669 6564 2043 4358  bol: Unified CCX
+0005ce50: 5420 6d61 726b 6574 2073 796d 626f 6c0a  T market symbol.
+0005ce60: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0005ce70: 7472 2074 696d 6566 7261 6d65 3a20 2235  tr timeframe: "5
+0005ce80: 6d22 2c22 3135 6d22 2c22 3330 6d22 2c22  m","15m","30m","
+0005ce90: 3168 222c 2232 6822 2c22 3468 222c 2236  1h","2h","4h","6
+0005cea0: 6822 2c22 3132 6822 2c20 6f72 2022 3164  h","12h", or "1d
+0005ceb0: 220a 2020 2020 2020 2020 3a70 6172 616d  ".        :param
+0005cec0: 2069 6e74 7c4e 6f6e 6520 7369 6e63 653a   int|None since:
+0005ced0: 2074 6865 2074 696d 6528 6d73 2920 6f66   the time(ms) of
+0005cee0: 2074 6865 2065 6172 6c69 6573 7420 7265   the earliest re
+0005cef0: 636f 7264 2074 6f20 7265 7472 6965 7665  cord to retrieve
+0005cf00: 2075 6e69 7820 7469 6d65 7374 616d 700a   unix timestamp.
+0005cf10: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0005cf20: 6e74 7c4e 6f6e 6520 6c69 6d69 743a 2064  nt|None limit: d
+0005cf30: 6566 6175 6c74 2033 302c 206d 6178 2035  efault 30, max 5
+0005cf40: 3030 0a20 2020 2020 2020 203a 7061 7261  00.        :para
+0005cf50: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+0005cf60: 7863 6861 6e67 6520 7370 6563 6966 6963  xchange specific
+0005cf70: 2070 6172 616d 6574 6572 730a 2020 2020   parameters.    
+0005cf80: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+0005cf90: 6f6e 6520 7061 7261 6d73 5b27 756e 7469  one params['unti
+0005cfa0: 6c27 5d3a 2074 6865 2074 696d 6528 6d73  l']: the time(ms
+0005cfb0: 2920 6f66 2074 6865 206c 6174 6573 7420  ) of the latest 
+0005cfc0: 7265 636f 7264 2074 6f20 7265 7472 6965  record to retrie
+0005cfd0: 7665 2075 6e69 7820 7469 6d65 7374 616d  ve unix timestam
+0005cfe0: 700a 2020 2020 2020 2020 3a72 6574 7572  p.        :retur
+0005cff0: 6e73 2064 6963 743a 2061 6e20 6172 7261  ns dict: an arra
+0005d000: 7920 6f66 2060 6f70 656e 2069 6e74 6572  y of `open inter
+0005d010: 6573 7420 6869 7374 6f72 7920 7374 7275  est history stru
+0005d020: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+0005d030: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+0005d040: 6964 3d69 6e74 6572 6573 742d 6869 7374  id=interest-hist
+0005d050: 6f72 792d 7374 7275 6374 7572 653e 600a  ory-structure>`.
+0005d060: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0005d070: 2020 2020 6966 2074 696d 6566 7261 6d65      if timeframe
+0005d080: 203d 3d20 2731 6d27 3a0a 2020 2020 2020   == '1m':.      
+0005d090: 2020 2020 2020 7261 6973 6520 4261 6452        raise BadR
+0005d0a0: 6571 7565 7374 2873 656c 662e 6964 202b  equest(self.id +
+0005d0b0: 2027 6665 7463 684f 7065 6e49 6e74 6572   'fetchOpenInter
+0005d0c0: 6573 7448 6973 746f 7279 2063 616e 6e6f  estHistory canno
+0005d0d0: 7420 7573 6520 7468 6520 316d 2074 696d  t use the 1m tim
+0005d0e0: 6566 7261 6d65 2729 0a20 2020 2020 2020  eframe').       
+0005d0f0: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+0005d100: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0005d110: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+0005d120: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+0005d130: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0005d140: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0005d150: 2770 6572 696f 6427 3a20 7365 6c66 2e73  'period': self.s
+0005d160: 6166 655f 7374 7269 6e67 2873 656c 662e  afe_string(self.
+0005d170: 7469 6d65 6672 616d 6573 2c20 7469 6d65  timeframes, time
+0005d180: 6672 616d 652c 2074 696d 6566 7261 6d65  frame, timeframe
+0005d190: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
+0005d1a0: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
+0005d1b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0005d1c0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0005d1d0: 6c69 6d69 7427 5d20 3d20 6c69 6d69 740a  limit'] = limit.
+0005d1e0: 2020 2020 2020 2020 7379 6d62 6f6c 4b65          symbolKe
+0005d1f0: 7920 3d20 2773 796d 626f 6c27 2069 6620  y = 'symbol' if 
+0005d200: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
+0005d210: 2065 6c73 6520 2770 6169 7227 0a20 2020   else 'pair'.   
+0005d220: 2020 2020 2072 6571 7565 7374 5b73 796d       request[sym
+0005d230: 626f 6c4b 6579 5d20 3d20 6d61 726b 6574  bolKey] = market
+0005d240: 5b27 6964 275d 0a20 2020 2020 2020 2069  ['id'].        i
+0005d250: 6620 6d61 726b 6574 5b27 696e 7665 7273  f market['invers
+0005d260: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+0005d270: 2072 6571 7565 7374 5b27 636f 6e74 7261   request['contra
+0005d280: 6374 5479 7065 275d 203d 2073 656c 662e  ctType'] = self.
+0005d290: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
+0005d2a0: 6d73 2c20 2763 6f6e 7472 6163 7454 7970  ms, 'contractTyp
+0005d2b0: 6527 2c20 2743 5552 5245 4e54 5f51 5541  e', 'CURRENT_QUA
+0005d2c0: 5254 4552 2729 0a20 2020 2020 2020 2069  RTER').        i
+0005d2d0: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
+0005d2e0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0005d2f0: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
+0005d300: 696d 6527 5d20 3d20 7369 6e63 650a 2020  ime'] = since.  
+0005d310: 2020 2020 2020 756e 7469 6c20 3d20 7365        until = se
+0005d320: 6c66 2e73 6166 655f 696e 7465 6765 725f  lf.safe_integer_
+0005d330: 3228 7061 7261 6d73 2c20 2775 6e74 696c  2(params, 'until
+0005d340: 272c 2027 7469 6c6c 2729 2020 2320 756e  ', 'till')  # un
+0005d350: 6966 6965 6420 696e 206d 696c 6c69 7365  ified in millise
+0005d360: 636f 6e64 730a 2020 2020 2020 2020 656e  conds.        en
+0005d370: 6454 696d 6520 3d20 7365 6c66 2e73 6166  dTime = self.saf
+0005d380: 655f 696e 7465 6765 7228 7061 7261 6d73  e_integer(params
+0005d390: 2c20 2765 6e64 5469 6d65 272c 2075 6e74  , 'endTime', unt
+0005d3a0: 696c 2920 2023 2065 7863 6861 6e67 652d  il)  # exchange-
+0005d3b0: 7370 6563 6966 6963 2069 6e20 6d69 6c6c  specific in mill
+0005d3c0: 6973 6563 6f6e 6473 0a20 2020 2020 2020  iseconds.       
+0005d3d0: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+0005d3e0: 6d69 7428 7061 7261 6d73 2c20 5b27 656e  mit(params, ['en
+0005d3f0: 6454 696d 6527 2c20 2775 6e74 696c 272c  dTime', 'until',
+0005d400: 2027 7469 6c6c 275d 290a 2020 2020 2020   'till']).      
+0005d410: 2020 6966 2065 6e64 5469 6d65 3a0a 2020    if endTime:.  
+0005d420: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0005d430: 745b 2765 6e64 5469 6d65 275d 203d 2065  t['endTime'] = e
+0005d440: 6e64 5469 6d65 0a20 2020 2020 2020 2065  ndTime.        e
+0005d450: 6c69 6620 7369 6e63 653a 0a20 2020 2020  lif since:.     
+0005d460: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
+0005d470: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0005d480: 2020 2020 2020 2020 206c 696d 6974 203d           limit =
+0005d490: 2033 3020 2023 2045 7863 6861 6e67 6520   30  # Exchange 
+0005d4a0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+0005d4b0: 2020 2020 6475 7261 7469 6f6e 203d 2073      duration = s
+0005d4c0: 656c 662e 7061 7273 655f 7469 6d65 6672  elf.parse_timefr
+0005d4d0: 616d 6528 7469 6d65 6672 616d 6529 0a20  ame(timeframe). 
+0005d4e0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0005d4f0: 7374 5b27 656e 6454 696d 6527 5d20 3d20  st['endTime'] = 
+0005d500: 7365 6c66 2e73 756d 2873 696e 6365 2c20  self.sum(since, 
+0005d510: 6475 7261 7469 6f6e 202a 206c 696d 6974  duration * limit
+0005d520: 202a 2031 3030 3029 0a20 2020 2020 2020   * 1000).       
+0005d530: 206d 6574 686f 6420 3d20 2766 6170 6944   method = 'fapiD
+0005d540: 6174 6147 6574 4f70 656e 496e 7465 7265  ataGetOpenIntere
+0005d550: 7374 4869 7374 270a 2020 2020 2020 2020  stHist'.        
+0005d560: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+0005d570: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+0005d580: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
+0005d590: 4461 7461 4765 744f 7065 6e49 6e74 6572  DataGetOpenInter
+0005d5a0: 6573 7448 6973 7427 0a20 2020 2020 2020  estHist'.       
+0005d5b0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+0005d5c0: 7420 6765 7461 7474 7228 7365 6c66 2c20  t getattr(self, 
+0005d5d0: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+0005d5e0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+0005d5f0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+0005d600: 2020 2020 2020 2020 2320 205b 0a20 2020          #  [.   
+0005d610: 2020 2020 2023 2020 2020 2020 7b0a 2020       #      {.  
+0005d620: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005d630: 2022 7379 6d62 6f6c 223a 2242 5443 5553   "symbol":"BTCUS
+0005d640: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0005d650: 2020 2020 2020 2020 2273 756d 4f70 656e          "sumOpen
+0005d660: 496e 7465 7265 7374 223a 2237 3533 3735  Interest":"75375
+0005d670: 2e36 3137 3030 3030 3022 2c0a 2020 2020  .61700000",.    
+0005d680: 2020 2020 2320 2020 2020 2020 2020 2022      #          "
+0005d690: 7375 6d4f 7065 6e49 6e74 6572 6573 7456  sumOpenInterestV
+0005d6a0: 616c 7565 223a 2233 3234 3838 3238 3838  alue":"324882888
+0005d6b0: 332e 3731 3235 3134 3430 222c 0a20 2020  3.71251440",.   
+0005d6c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005d6d0: 2274 696d 6573 7461 6d70 223a 3136 3432  "timestamp":1642
+0005d6e0: 3137 3939 3030 3030 300a 2020 2020 2020  179900000.      
+0005d6f0: 2020 2320 2020 2020 207d 2c0a 2020 2020    #      },.    
+0005d700: 2020 2020 2320 2020 2020 202e 2e2e 0a20      #      .... 
+0005d710: 2020 2020 2020 2023 2020 5d0a 2020 2020         #  ].    
+0005d720: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+0005d730: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+0005d740: 6f70 656e 5f69 6e74 6572 6573 7473 2872  open_interests(r
+0005d750: 6573 706f 6e73 652c 206d 6172 6b65 742c  esponse, market,
+0005d760: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
+0005d770: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+0005d780: 7463 685f 6f70 656e 5f69 6e74 6572 6573  tch_open_interes
+0005d790: 7428 7365 6c66 2c20 7379 6d62 6f6c 3a20  t(self, symbol: 
+0005d7a0: 7374 722c 2070 6172 616d 733d 7b7d 293a  str, params={}):
+0005d7b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0005d7c0: 2020 2020 2072 6574 7269 6576 6573 2074       retrieves t
+0005d7d0: 6865 206f 7065 6e20 696e 7465 7265 7374  he open interest
+0005d7e0: 206f 6620 6120 636f 6e74 7261 6374 2074   of a contract t
+0005d7f0: 7261 6469 6e67 2070 6169 720a 2020 2020  rading pair.    
+0005d800: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
+0005d810: 6269 6e61 6e63 652d 646f 6373 2e67 6974  binance-docs.git
+0005d820: 6875 622e 696f 2f61 7069 646f 6373 2f66  hub.io/apidocs/f
+0005d830: 7574 7572 6573 2f65 6e2f 236f 7065 6e2d  utures/en/#open-
+0005d840: 696e 7465 7265 7374 0a20 2020 2020 2020  interest.       
+0005d850: 2073 6565 2068 7474 7073 3a2f 2f62 696e   see https://bin
+0005d860: 616e 6365 2d64 6f63 732e 6769 7468 7562  ance-docs.github
+0005d870: 2e69 6f2f 6170 6964 6f63 732f 6465 6c69  .io/apidocs/deli
+0005d880: 7665 7279 2f65 6e2f 236f 7065 6e2d 696e  very/en/#open-in
+0005d890: 7465 7265 7374 0a20 2020 2020 2020 2073  terest.        s
+0005d8a0: 6565 2068 7474 7073 3a2f 2f62 696e 616e  ee https://binan
+0005d8b0: 6365 2d64 6f63 732e 6769 7468 7562 2e69  ce-docs.github.i
+0005d8c0: 6f2f 6170 6964 6f63 732f 766f 7074 696f  o/apidocs/voptio
+0005d8d0: 6e73 2f65 6e2f 236f 7065 6e2d 696e 7465  ns/en/#open-inte
+0005d8e0: 7265 7374 0a20 2020 2020 2020 203a 7061  rest.        :pa
+0005d8f0: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
+0005d900: 756e 6966 6965 6420 4343 5854 206d 6172  unified CCXT mar
+0005d910: 6b65 7420 7379 6d62 6f6c 0a20 2020 2020  ket symbol.     
+0005d920: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+0005d930: 6172 616d 733a 2065 7863 6861 6e67 6520  arams: exchange 
+0005d940: 7370 6563 6966 6963 2070 6172 616d 6574  specific paramet
+0005d950: 6572 730a 2020 2020 2020 2020 3a72 6574  ers.        :ret
+0005d960: 7572 6e73 2064 6963 747d 2061 6e20 6f70  urns dict} an op
+0005d970: 656e 2069 6e74 6572 6573 7420 7374 7275  en interest stru
+0005d980: 6374 7572 657b 406c 696e 6b20 6874 7470  cture{@link http
+0005d990: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+0005d9a0: 6d2f 232f 3f69 643d 696e 7465 7265 7374  m/#/?id=interest
+0005d9b0: 2d68 6973 746f 7279 2d73 7472 7563 7475  -history-structu
+0005d9c0: 7265 3a0a 2020 2020 2020 2020 2222 220a  re:.        """.
+0005d9d0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0005d9e0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+0005d9f0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+0005da00: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+0005da10: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
+0005da20: 6571 7565 7374 203d 207b 7d0a 2020 2020  equest = {}.    
+0005da30: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
+0005da40: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
+0005da50: 2020 2020 2072 6571 7565 7374 5b27 756e       request['un
+0005da60: 6465 726c 7969 6e67 4173 7365 7427 5d20  derlyingAsset'] 
+0005da70: 3d20 6d61 726b 6574 5b27 6261 7365 4964  = market['baseId
+0005da80: 275d 0a20 2020 2020 2020 2020 2020 2072  '].            r
+0005da90: 6571 7565 7374 5b27 6578 7069 7261 7469  equest['expirati
+0005daa0: 6f6e 275d 203d 2073 656c 662e 7979 6d6d  on'] = self.yymm
+0005dab0: 6464 286d 6172 6b65 745b 2765 7870 6972  dd(market['expir
+0005dac0: 7927 5d29 0a20 2020 2020 2020 2065 6c73  y']).        els
+0005dad0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0005dae0: 6571 7565 7374 5b27 7379 6d62 6f6c 275d  equest['symbol']
+0005daf0: 203d 206d 6172 6b65 745b 2769 6427 5d0a   = market['id'].
+0005db00: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
+0005db10: 2027 6661 7069 5075 626c 6963 4765 744f   'fapiPublicGetO
+0005db20: 7065 6e49 6e74 6572 6573 7427 0a20 2020  penInterest'.   
+0005db30: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+0005db40: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
+0005db50: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+0005db60: 6561 7069 5075 626c 6963 4765 744f 7065  eapiPublicGetOpe
+0005db70: 6e49 6e74 6572 6573 7427 0a20 2020 2020  nInterest'.     
+0005db80: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+0005db90: 696e 7665 7273 6527 5d3a 0a20 2020 2020  inverse']:.     
+0005dba0: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+0005dbb0: 2764 6170 6950 7562 6c69 6347 6574 4f70  'dapiPublicGetOp
+0005dbc0: 656e 496e 7465 7265 7374 270a 2020 2020  enInterest'.    
+0005dbd0: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+0005dbe0: 7761 6974 2067 6574 6174 7472 2873 656c  wait getattr(sel
+0005dbf0: 662c 206d 6574 686f 6429 2873 656c 662e  f, method)(self.
+0005dc00: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+0005dc10: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+0005dc20: 2023 0a20 2020 2020 2020 2023 2066 7574   #.        # fut
+0005dc30: 7572 6573 2866 6170 6929 0a20 2020 2020  ures(fapi).     
+0005dc40: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0005dc50: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0005dc60: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+0005dc70: 2022 4554 4855 5344 545f 3233 3033 3331   "ETHUSDT_230331
+0005dc80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005dc90: 2020 2020 2022 6f70 656e 496e 7465 7265       "openIntere
+0005dca0: 7374 223a 2022 3233 3538 312e 3637 3722  st": "23581.677"
+0005dcb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005dcc0: 2020 2020 2274 696d 6522 3a20 3136 3737      "time": 1677
+0005dcd0: 3335 3638 3732 3236 350a 2020 2020 2020  356872265.      
+0005dce0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0005dcf0: 2020 230a 2020 2020 2020 2020 2320 6675    #.        # fu
+0005dd00: 7475 7265 7328 6461 7069 290a 2020 2020  tures(dapi).    
+0005dd10: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005dd20: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0005dd30: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+0005dd40: 3a20 2245 5448 5553 445f 5045 5250 222c  : "ETHUSD_PERP",
+0005dd50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005dd60: 2020 2022 7061 6972 223a 2022 4554 4855     "pair": "ETHU
+0005dd70: 5344 222c 0a20 2020 2020 2020 2023 2020  SD",.        #  
+0005dd80: 2020 2020 2020 2022 6f70 656e 496e 7465         "openInte
+0005dd90: 7265 7374 223a 2022 3236 3534 3234 3336  rest": "26542436
+0005dda0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005ddb0: 2020 2020 2022 636f 6e74 7261 6374 5479       "contractTy
+0005ddc0: 7065 223a 2022 5045 5250 4554 5541 4c22  pe": "PERPETUAL"
+0005ddd0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005dde0: 2020 2020 2274 696d 6522 3a20 3136 3737      "time": 1677
+0005ddf0: 3336 3032 3732 3232 340a 2020 2020 2020  360272224.      
+0005de00: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0005de10: 2020 230a 2020 2020 2020 2020 2320 6f70    #.        # op
+0005de20: 7469 6f6e 7328 6561 7069 290a 2020 2020  tions(eapi).    
+0005de30: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005de40: 2020 2020 5b0a 2020 2020 2020 2020 2320      [.        # 
+0005de50: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0005de60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0005de70: 2273 796d 626f 6c22 3a20 2245 5448 2d32  "symbol": "ETH-2
+0005de80: 3330 3232 352d 3136 3235 2d43 222c 0a20  30225-1625-C",. 
+0005de90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005dea0: 2020 2020 2022 7375 6d4f 7065 6e49 6e74       "sumOpenInt
+0005deb0: 6572 6573 7422 3a20 2234 3630 2e35 3022  erest": "460.50"
+0005dec0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005ded0: 2020 2020 2020 2020 2273 756d 4f70 656e          "sumOpen
+0005dee0: 496e 7465 7265 7374 5573 6422 3a20 2237  InterestUsd": "7
+0005def0: 3334 3935 372e 3433 3538 3039 3231 3530  34957.4358092150
+0005df00: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005df10: 2020 2020 2020 2020 2022 7469 6d65 7374           "timest
+0005df20: 616d 7022 3a20 2231 3637 3733 3034 3836  amp": "167730486
+0005df30: 3030 3030 220a 2020 2020 2020 2020 2320  0000".        # 
+0005df40: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0005df50: 2020 2320 2020 2020 5d0a 2020 2020 2020    #     ].      
+0005df60: 2020 230a 2020 2020 2020 2020 6966 206d    #.        if m
+0005df70: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+0005df80: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0005df90: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+0005dfa0: 7065 6e5f 696e 7465 7265 7374 7328 7265  pen_interests(re
+0005dfb0: 7370 6f6e 7365 2c20 6d61 726b 6574 290a  sponse, market).
+0005dfc0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0005dfd0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0005dfe0: 2073 656c 662e 7061 7273 655f 6f70 656e   self.parse_open
+0005dff0: 5f69 6e74 6572 6573 7428 7265 7370 6f6e  _interest(respon
+0005e000: 7365 2c20 6d61 726b 6574 290a 0a20 2020  se, market)..   
+0005e010: 2064 6566 2070 6172 7365 5f6f 7065 6e5f   def parse_open_
+0005e020: 696e 7465 7265 7374 2873 656c 662c 2069  interest(self, i
+0005e030: 6e74 6572 6573 742c 206d 6172 6b65 743d  nterest, market=
+0005e040: 4e6f 6e65 293a 0a20 2020 2020 2020 2074  None):.        t
+0005e050: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
+0005e060: 7361 6665 5f69 6e74 6567 6572 5f32 2869  safe_integer_2(i
+0005e070: 6e74 6572 6573 742c 2027 7469 6d65 7374  nterest, 'timest
+0005e080: 616d 7027 2c20 2774 696d 6527 290a 2020  amp', 'time').  
+0005e090: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
+0005e0a0: 7361 6665 5f73 7472 696e 6728 696e 7465  safe_string(inte
+0005e0b0: 7265 7374 2c20 2773 796d 626f 6c27 290a  rest, 'symbol').
+0005e0c0: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
+0005e0d0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+0005e0e0: 725f 3228 696e 7465 7265 7374 2c20 2773  r_2(interest, 's
+0005e0f0: 756d 4f70 656e 496e 7465 7265 7374 272c  umOpenInterest',
+0005e100: 2027 6f70 656e 496e 7465 7265 7374 2729   'openInterest')
+0005e110: 0a20 2020 2020 2020 2076 616c 7565 203d  .        value =
+0005e120: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+0005e130: 725f 3228 696e 7465 7265 7374 2c20 2773  r_2(interest, 's
+0005e140: 756d 4f70 656e 496e 7465 7265 7374 5661  umOpenInterestVa
+0005e150: 6c75 6527 2c20 2773 756d 4f70 656e 496e  lue', 'sumOpenIn
+0005e160: 7465 7265 7374 5573 6427 290a 2020 2020  terestUsd').    
+0005e170: 2020 2020 2320 496e 7665 7273 6520 7265      # Inverse re
+0005e180: 7475 726e 7320 7468 6520 6e75 6d62 6572  turns the number
+0005e190: 206f 6620 636f 6e74 7261 6374 7320 6469   of contracts di
+0005e1a0: 6666 6572 656e 7420 6672 6f6d 2074 6865  fferent from the
+0005e1b0: 2062 6173 6520 6f72 2071 756f 7465 2076   base or quote v
+0005e1c0: 6f6c 756d 6520 696e 2073 656c 6620 6361  olume in self ca
+0005e1d0: 7365 0a20 2020 2020 2020 2023 2063 6f6d  se.        # com
+0005e1e0: 7061 7265 6420 7769 7468 2068 7474 7073  pared with https
+0005e1f0: 3a2f 2f77 7777 2e62 696e 616e 6365 2e63  ://www.binance.c
+0005e200: 6f6d 2f65 6e2f 6675 7475 7265 732f 6675  om/en/futures/fu
+0005e210: 6e64 696e 672d 6869 7374 6f72 792f 7175  nding-history/qu
+0005e220: 6172 7465 726c 792f 340a 2020 2020 2020  arterly/4.      
+0005e230: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0005e240: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
+0005e250: 2073 656c 662e 7361 6665 5f73 796d 626f   self.safe_symbo
+0005e260: 6c28 6964 2c20 6d61 726b 6574 2c20 4e6f  l(id, market, No
+0005e270: 6e65 2c20 2763 6f6e 7472 6163 7427 292c  ne, 'contract'),
+0005e280: 0a20 2020 2020 2020 2020 2020 2027 6261  .            'ba
+0005e290: 7365 566f 6c75 6d65 273a 204e 6f6e 6520  seVolume': None 
+0005e2a0: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+0005e2b0: 7365 275d 2065 6c73 6520 616d 6f75 6e74  se'] else amount
+0005e2c0: 2c20 2023 2064 6570 7265 6361 7465 640a  ,  # deprecated.
+0005e2d0: 2020 2020 2020 2020 2020 2020 2771 756f              'quo
+0005e2e0: 7465 566f 6c75 6d65 273a 2076 616c 7565  teVolume': value
+0005e2f0: 2c20 2023 2064 6570 7265 6361 7465 640a  ,  # deprecated.
+0005e300: 2020 2020 2020 2020 2020 2020 276f 7065              'ope
+0005e310: 6e49 6e74 6572 6573 7441 6d6f 756e 7427  nInterestAmount'
+0005e320: 3a20 616d 6f75 6e74 2c0a 2020 2020 2020  : amount,.      
+0005e330: 2020 2020 2020 276f 7065 6e49 6e74 6572        'openInter
+0005e340: 6573 7456 616c 7565 273a 2076 616c 7565  estValue': value
+0005e350: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0005e360: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
+0005e370: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
+0005e380: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
+0005e390: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
+0005e3a0: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
+0005e3b0: 2020 2027 696e 666f 273a 2069 6e74 6572     'info': inter
+0005e3c0: 6573 742c 0a20 2020 2020 2020 207d 0a    est,.        }.
```

### Comparing `ccxt-3.1.1/ccxt/async_support/binancecoinm.py` & `ccxt-3.1.2/ccxt/async_support/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/binanceus.py` & `ccxt-3.1.2/ccxt/async_support/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/binanceusdm.py` & `ccxt-3.1.2/ccxt/async_support/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bit2c.py` & `ccxt-3.1.2/ccxt/async_support/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitbank.py` & `ccxt-3.1.2/ccxt/async_support/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitbns.py` & `ccxt-3.1.2/ccxt/async_support/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitfinex.py` & `ccxt-3.1.2/ccxt/async_support/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitfinex2.py` & `ccxt-3.1.2/ccxt/async_support/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitflyer.py` & `ccxt-3.1.2/ccxt/async_support/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitforex.py` & `ccxt-3.1.2/ccxt/async_support/bitforex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitget.py` & `ccxt-3.1.2/ccxt/async_support/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bithumb.py` & `ccxt-3.1.2/ccxt/async_support/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitmart.py` & `ccxt-3.1.2/ccxt/async_support/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitmex.py` & `ccxt-3.1.2/ccxt/async_support/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitopro.py` & `ccxt-3.1.2/ccxt/async_support/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitpanda.py` & `ccxt-3.1.2/ccxt/async_support/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitrue.py` & `ccxt-3.1.2/ccxt/async_support/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitso.py` & `ccxt-3.1.2/ccxt/async_support/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitstamp.py` & `ccxt-3.1.2/ccxt/async_support/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitstamp1.py` & `ccxt-3.1.2/ccxt/async_support/bitstamp1.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bittrex.py` & `ccxt-3.1.2/ccxt/async_support/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bitvavo.py` & `ccxt-3.1.2/ccxt/async_support/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bkex.py` & `ccxt-3.1.2/ccxt/async_support/bkex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bl3p.py` & `ccxt-3.1.2/ccxt/async_support/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/blockchaincom.py` & `ccxt-3.1.2/ccxt/async_support/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/btcalpha.py` & `ccxt-3.1.2/ccxt/async_support/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/btcbox.py` & `ccxt-3.1.2/ccxt/async_support/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/btcex.py` & `ccxt-3.1.2/ccxt/async_support/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/btcmarkets.py` & `ccxt-3.1.2/ccxt/async_support/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/btctradeua.py` & `ccxt-3.1.2/ccxt/async_support/btctradeua.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/btcturk.py` & `ccxt-3.1.2/ccxt/async_support/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/buda.py` & `ccxt-3.1.2/ccxt/async_support/buda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/bybit.py` & `ccxt-3.1.2/ccxt/async_support/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/cex.py` & `ccxt-3.1.2/ccxt/async_support/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinbase.py` & `ccxt-3.1.2/ccxt/async_support/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinbaseprime.py` & `ccxt-3.1.2/ccxt/async_support/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinbasepro.py` & `ccxt-3.1.2/ccxt/async_support/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coincheck.py` & `ccxt-3.1.2/ccxt/async_support/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinex.py` & `ccxt-3.1.2/ccxt/async_support/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinfalcon.py` & `ccxt-3.1.2/ccxt/async_support/coinfalcon.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinmate.py` & `ccxt-3.1.2/ccxt/async_support/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinone.py` & `ccxt-3.1.2/ccxt/async_support/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinsph.py` & `ccxt-3.1.2/ccxt/async_support/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/coinspot.py` & `ccxt-3.1.2/ccxt/async_support/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/cryptocom.py` & `ccxt-3.1.2/ccxt/async_support/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/currencycom.py` & `ccxt-3.1.2/ccxt/async_support/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/delta.py` & `ccxt-3.1.2/ccxt/async_support/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/deribit.py` & `ccxt-3.1.2/ccxt/async_support/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/digifinex.py` & `ccxt-3.1.2/ccxt/async_support/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/exmo.py` & `ccxt-3.1.2/ccxt/async_support/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/flowbtc.py` & `ccxt-3.1.2/ccxt/async_support/flowbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/fmfwio.py` & `ccxt-3.1.2/ccxt/async_support/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/gate.py` & `ccxt-3.1.2/ccxt/async_support/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/gemini.py` & `ccxt-3.1.2/ccxt/async_support/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/hitbtc.py` & `ccxt-3.1.2/ccxt/async_support/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/hitbtc3.py` & `ccxt-3.1.2/ccxt/async_support/hitbtc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/hollaex.py` & `ccxt-3.1.2/ccxt/async_support/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/huobi.py` & `ccxt-3.1.2/ccxt/async_support/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/huobijp.py` & `ccxt-3.1.2/ccxt/async_support/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/huobipro.py` & `ccxt-3.1.2/ccxt/async_support/huobipro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/idex.py` & `ccxt-3.1.2/ccxt/async_support/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/independentreserve.py` & `ccxt-3.1.2/ccxt/async_support/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/indodax.py` & `ccxt-3.1.2/ccxt/async_support/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/itbit.py` & `ccxt-3.1.2/ccxt/async_support/itbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/kraken.py` & `ccxt-3.1.2/ccxt/async_support/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/krakenfutures.py` & `ccxt-3.1.2/ccxt/async_support/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/kucoin.py` & `ccxt-3.1.2/ccxt/async_support/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/kucoinfutures.py` & `ccxt-3.1.2/ccxt/async_support/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/kuna.py` & `ccxt-3.1.2/ccxt/async_support/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/latoken.py` & `ccxt-3.1.2/ccxt/async_support/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/lbank.py` & `ccxt-3.1.2/ccxt/async_support/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/lbank2.py` & `ccxt-3.1.2/ccxt/async_support/lbank2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/luno.py` & `ccxt-3.1.2/ccxt/async_support/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/lykke.py` & `ccxt-3.1.2/ccxt/async_support/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/mercado.py` & `ccxt-3.1.2/ccxt/async_support/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/mexc.py` & `ccxt-3.1.2/ccxt/async_support/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/ndax.py` & `ccxt-3.1.2/ccxt/async_support/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/novadax.py` & `ccxt-3.1.2/ccxt/async_support/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/oceanex.py` & `ccxt-3.1.2/ccxt/async_support/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/okcoin.py` & `ccxt-3.1.2/ccxt/async_support/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/okx.py` & `ccxt-3.1.2/ccxt/async_support/okx.py`

 * *Files 0% similar despite different names*

```diff
@@ -1536,14 +1536,31 @@
         #         "side": "sell",
         #         "sz": "0.119501",
         #         "px": "0.07065",
         #         "tradeId": "15826757",
         #         "ts": "1621446178316"
         #     }
         #
+        # option: fetchTrades
+        #
+        #     {
+        #         "fillVol": "0.46387625976562497",
+        #         "fwdPx": "26299.754935451125",
+        #         "indexPx": "26309.7",
+        #         "instFamily": "BTC-USD",
+        #         "instId": "BTC-USD-230526-26000-C",
+        #         "markPx": "0.042386283557554236",
+        #         "optType": "C",
+        #         "px": "0.0415",
+        #         "side": "sell",
+        #         "sz": "90",
+        #         "tradeId": "112",
+        #         "ts": "1683907480154"
+        #     }
+        #
         # private fetchMyTrades
         #
         #     {
         #         "side": "buy",
         #         "fillSz": "0.007533",
         #         "fillPx": "2654.98",
         #         "fee": "-0.000007533",
@@ -1599,39 +1616,68 @@
             'cost': None,
             'fee': fee,
         }, market)
 
     async def fetch_trades(self, symbol: str, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
         get the list of most recent trades for a particular symbol
+        see https://www.okx.com/docs-v5/en/#rest-api-market-data-get-trades
+        see https://www.okx.com/docs-v5/en/#rest-api-public-data-get-option-trades
         :param str symbol: unified symbol of the market to fetch trades for
         :param int|None since: timestamp in ms of the earliest trade to fetch
         :param int|None limit: the maximum amount of trades to fetch
         :param dict params: extra parameters specific to the okx api endpoint
         :returns [dict]: a list of `trade structures <https://docs.ccxt.com/en/latest/manual.html?#public-trades>`
         """
         await self.load_markets()
         market = self.market(symbol)
         request = {
             'instId': market['id'],
         }
-        if limit is not None:
-            request['limit'] = limit  # default 100
-        response = await self.publicGetMarketTrades(self.extend(request, params))
+        response = None
+        if market['option']:
+            response = await self.publicGetPublicOptionTrades(self.extend(request, params))
+        else:
+            if limit is not None:
+                request['limit'] = limit  # default 100
+            response = await self.publicGetMarketTrades(self.extend(request, params))
         #
         #     {
         #         "code": "0",
         #         "msg": "",
         #         "data": [
         #             {"instId":"ETH-BTC","side":"sell","sz":"0.119501","px":"0.07065","tradeId":"15826757","ts":"1621446178316"},
         #             {"instId":"ETH-BTC","side":"sell","sz":"0.03","px":"0.07068","tradeId":"15826756","ts":"1621446178066"},
         #             {"instId":"ETH-BTC","side":"buy","sz":"0.507","px":"0.07069","tradeId":"15826755","ts":"1621446175085"},
         #         ]
         #     }
         #
+        # option
+        #
+        #     {
+        #         "code": "0",
+        #         "data": [
+        #             {
+        #                 "fillVol": "0.46387625976562497",
+        #                 "fwdPx": "26299.754935451125",
+        #                 "indexPx": "26309.7",
+        #                 "instFamily": "BTC-USD",
+        #                 "instId": "BTC-USD-230526-26000-C",
+        #                 "markPx": "0.042386283557554236",
+        #                 "optType": "C",
+        #                 "px": "0.0415",
+        #                 "side": "sell",
+        #                 "sz": "90",
+        #                 "tradeId": "112",
+        #                 "ts": "1683907480154"
+        #             },
+        #         ],
+        #         "msg": ""
+        #     }
+        #
         data = self.safe_value(response, 'data', [])
         return self.parse_trades(data, market, since, limit)
 
     def parse_ohlcv(self, ohlcv, market=None):
         #
         #     [
         #         "1678928760000",  # timestamp
```

### Comparing `ccxt-3.1.1/ccxt/async_support/paymium.py` & `ccxt-3.1.2/ccxt/async_support/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/phemex.py` & `ccxt-3.1.2/ccxt/async_support/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/poloniex.py` & `ccxt-3.1.2/ccxt/async_support/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/poloniexfutures.py` & `ccxt-3.1.2/ccxt/async_support/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/probit.py` & `ccxt-3.1.2/ccxt/async_support/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/ripio.py` & `ccxt-3.1.2/ccxt/async_support/ripio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/stex.py` & `ccxt-3.1.2/ccxt/async_support/stex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/tidex.py` & `ccxt-3.1.2/ccxt/async_support/tidex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/timex.py` & `ccxt-3.1.2/ccxt/async_support/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/tokocrypto.py` & `ccxt-3.1.2/ccxt/async_support/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/upbit.py` & `ccxt-3.1.2/ccxt/async_support/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/wavesexchange.py` & `ccxt-3.1.2/ccxt/async_support/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/wazirx.py` & `ccxt-3.1.2/ccxt/async_support/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/whitebit.py` & `ccxt-3.1.2/ccxt/async_support/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/woo.py` & `ccxt-3.1.2/ccxt/async_support/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/xt.py` & `ccxt-3.1.2/ccxt/async_support/xt.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/yobit.py` & `ccxt-3.1.2/ccxt/async_support/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/zaif.py` & `ccxt-3.1.2/ccxt/async_support/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/zb.py` & `ccxt-3.1.2/ccxt/async_support/zb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/async_support/zonda.py` & `ccxt-3.1.2/ccxt/async_support/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/base/__init__.py` & `ccxt-3.1.2/ccxt/base/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/base/decimal_to_precision.py` & `ccxt-3.1.2/ccxt/base/decimal_to_precision.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/base/errors.py` & `ccxt-3.1.2/ccxt/base/errors.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/base/exchange.py` & `ccxt-3.1.2/ccxt/base/exchange.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """Base exchange class"""
 
 # -----------------------------------------------------------------------------
 
-__version__ = '3.1.1'
+__version__ = '3.1.2'
 
 # -----------------------------------------------------------------------------
 
 from ccxt.base.errors import ExchangeError
 from ccxt.base.errors import NetworkError
 from ccxt.base.errors import NotSupported
 from ccxt.base.errors import AuthenticationError
```

### Comparing `ccxt-3.1.1/ccxt/base/precise.py` & `ccxt-3.1.2/ccxt/base/precise.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/base/types.py` & `ccxt-3.1.2/ccxt/base/types.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bequant.py` & `ccxt-3.1.2/ccxt/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bigone.py` & `ccxt-3.1.2/ccxt/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/binance.py` & `ccxt-3.1.2/ccxt/binance.py`

 * *Files 1% similar despite different names*

```diff
@@ -11352,12307 +11352,12697 @@
 0002c570: 2020 2020 2020 2020 2320 2020 2020 2020          #       
 0002c580: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
 0002c590: 2020 205d 0a20 2020 2020 2020 2023 0a20     ].        #. 
 0002c5a0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
 0002c5b0: 6c66 2e70 6172 7365 5f74 7261 6465 7328  lf.parse_trades(
 0002c5c0: 7265 7370 6f6e 7365 2c20 6d61 726b 6574  response, market
 0002c5d0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-0002c5e0: 0a20 2020 2064 6566 2065 6469 745f 6f72  .    def edit_or
-0002c5f0: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
-0002c600: 722c 2073 796d 626f 6c2c 2074 7970 652c  r, symbol, type,
-0002c610: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-0002c620: 7269 6365 3d4e 6f6e 652c 2070 6172 616d  rice=None, param
-0002c630: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0002c640: 2222 0a20 2020 2020 2020 2065 6469 7420  "".        edit 
-0002c650: 6120 7472 6164 6520 6f72 6465 720a 2020  a trade order.  
-0002c660: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
-0002c670: 2f2f 6269 6e61 6e63 652d 646f 6373 2e67  //binance-docs.g
-0002c680: 6974 6875 622e 696f 2f61 7069 646f 6373  ithub.io/apidocs
-0002c690: 2f73 706f 742f 656e 2f23 6361 6e63 656c  /spot/en/#cancel
-0002c6a0: 2d61 6e2d 6578 6973 7469 6e67 2d6f 7264  -an-existing-ord
-0002c6b0: 6572 2d61 6e64 2d73 656e 642d 612d 6e65  er-and-send-a-ne
-0002c6c0: 772d 6f72 6465 722d 7472 6164 650a 2020  w-order-trade.  
-0002c6d0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-0002c6e0: 2069 643a 2063 616e 6365 6c20 6f72 6465   id: cancel orde
-0002c6f0: 7220 6964 0a20 2020 2020 2020 203a 7061  r id.        :pa
-0002c700: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
-0002c710: 756e 6966 6965 6420 7379 6d62 6f6c 206f  unified symbol o
-0002c720: 6620 7468 6520 6d61 726b 6574 2074 6f20  f the market to 
-0002c730: 6372 6561 7465 2061 6e20 6f72 6465 7220  create an order 
-0002c740: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-0002c750: 6d20 7374 7220 7479 7065 3a20 276d 6172  m str type: 'mar
-0002c760: 6b65 7427 206f 7220 276c 696d 6974 270a  ket' or 'limit'.
-0002c770: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0002c780: 7472 2073 6964 653a 2027 6275 7927 206f  tr side: 'buy' o
-0002c790: 7220 2773 656c 6c27 0a20 2020 2020 2020  r 'sell'.       
-0002c7a0: 203a 7061 7261 6d20 666c 6f61 7420 616d   :param float am
-0002c7b0: 6f75 6e74 3a20 686f 7720 6d75 6368 206f  ount: how much o
-0002c7c0: 6620 6375 7272 656e 6379 2079 6f75 2077  f currency you w
-0002c7d0: 616e 7420 746f 2074 7261 6465 2069 6e20  ant to trade in 
-0002c7e0: 756e 6974 7320 6f66 2062 6173 6520 6375  units of base cu
-0002c7f0: 7272 656e 6379 0a20 2020 2020 2020 203a  rrency.        :
-0002c800: 7061 7261 6d20 666c 6f61 747c 4e6f 6e65  param float|None
-0002c810: 2070 7269 6365 3a20 7468 6520 7072 6963   price: the pric
-0002c820: 6520 6174 2077 6869 6368 2074 6865 206f  e at which the o
-0002c830: 7264 6572 2069 7320 746f 2062 6520 6675  rder is to be fu
-0002c840: 6c6c 6669 6c6c 6564 2c20 696e 2075 6e69  llfilled, in uni
-0002c850: 7473 206f 6620 7468 6520 6261 7365 2063  ts of the base c
-0002c860: 7572 7265 6e63 792c 2069 676e 6f72 6564  urrency, ignored
-0002c870: 2069 6e20 6d61 726b 6574 206f 7264 6572   in market order
-0002c880: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-0002c890: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-0002c8a0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-0002c8b0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-0002c8c0: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
-0002c8d0: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-0002c8e0: 7572 6e73 2064 6963 743a 2061 6e20 606f  urns dict: an `o
-0002c8f0: 7264 6572 2073 7472 7563 7475 7265 203c  rder structure <
-0002c900: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-0002c910: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
-0002c920: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
-0002c930: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0002c940: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-0002c950: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-0002c960: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-0002c970: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-0002c980: 2020 2069 6620 6e6f 7420 6d61 726b 6574     if not market
-0002c990: 5b27 7370 6f74 275d 3a0a 2020 2020 2020  ['spot']:.      
-0002c9a0: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
-0002c9b0: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
-0002c9c0: 202b 2027 2065 6469 744f 7264 6572 2829   + ' editOrder()
-0002c9d0: 2064 6f65 7320 6e6f 7420 7375 7070 6f72   does not suppor
-0002c9e0: 7420 2720 2b20 6d61 726b 6574 5b27 7479  t ' + market['ty
-0002c9f0: 7065 275d 202b 2027 206f 7264 6572 732c  pe'] + ' orders,
-0002ca00: 206f 6e6c 7920 7370 6f74 206f 7264 6572   only spot order
-0002ca10: 7320 6172 6520 6163 6365 7074 6564 2729  s are accepted')
-0002ca20: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0002ca30: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0002ca40: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
-0002ca50: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-0002ca60: 2020 2020 2027 7369 6465 273a 2073 6964       'side': sid
-0002ca70: 652e 7570 7065 7228 292c 0a20 2020 2020  e.upper(),.     
-0002ca80: 2020 2020 2020 2027 6361 6e63 656c 5265         'cancelRe
-0002ca90: 706c 6163 654d 6f64 6527 3a20 2753 544f  placeMode': 'STO
-0002caa0: 505f 4f4e 5f46 4149 4c55 5245 272c 0a20  P_ON_FAILURE',. 
-0002cab0: 2020 2020 2020 2020 2020 2023 2053 544f             # STO
-0002cac0: 505f 4f4e 5f46 4149 4c55 5245 202d 2049  P_ON_FAILURE - I
-0002cad0: 6620 7468 6520 6361 6e63 656c 2072 6571  f the cancel req
-0002cae0: 7565 7374 2066 6169 6c73 2c20 7468 6520  uest fails, the 
-0002caf0: 6e65 7720 6f72 6465 7220 706c 6163 656d  new order placem
-0002cb00: 656e 7420 7769 6c6c 206e 6f74 2062 6520  ent will not be 
-0002cb10: 6174 7465 6d70 7465 642e 0a20 2020 2020  attempted..     
-0002cb20: 2020 2020 2020 2023 2041 4c4c 4f57 5f46         # ALLOW_F
-0002cb30: 4149 4c55 5245 202d 206e 6577 206f 7264  AILURE - new ord
-0002cb40: 6572 2070 6c61 6365 6d65 6e74 2077 696c  er placement wil
-0002cb50: 6c20 6265 2061 7474 656d 7074 6564 2065  l be attempted e
-0002cb60: 7665 6e20 6966 2063 616e 6365 6c20 7265  ven if cancel re
-0002cb70: 7175 6573 7420 6661 696c 732e 0a20 2020  quest fails..   
-0002cb80: 2020 2020 207d 0a20 2020 2020 2020 2063       }.        c
-0002cb90: 616e 6365 6c49 6420 3d20 7365 6c66 2e73  ancelId = self.s
-0002cba0: 6166 655f 7374 7269 6e67 5f32 2870 6172  afe_string_2(par
-0002cbb0: 616d 732c 2027 6361 6e63 656c 4e65 7743  ams, 'cancelNewC
-0002cbc0: 6c69 656e 744f 7264 6572 4964 272c 2027  lientOrderId', '
-0002cbd0: 6361 6e63 656c 4f72 6967 436c 6965 6e74  cancelOrigClient
-0002cbe0: 4f72 6465 7249 6427 290a 2020 2020 2020  OrderId').      
-0002cbf0: 2020 6966 2063 616e 6365 6c49 6420 6973    if cancelId is
-0002cc00: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002cc10: 2020 2072 6571 7565 7374 5b27 6361 6e63     request['canc
-0002cc20: 656c 4f72 6465 7249 6427 5d20 3d20 6964  elOrderId'] = id
-0002cc30: 2020 2320 7573 6572 2063 616e 2070 726f    # user can pro
-0002cc40: 7669 6465 2065 6974 6865 7220 6361 6e63  vide either canc
-0002cc50: 656c 4f72 6465 7249 642c 2063 616e 6365  elOrderId, cance
-0002cc60: 6c4f 7269 6743 6c69 656e 744f 7264 6572  lOrigClientOrder
-0002cc70: 4964 206f 7220 6361 6e63 656c 4f72 6967  Id or cancelOrig
-0002cc80: 436c 6965 6e74 4f72 6465 7249 640a 2020  ClientOrderId.  
-0002cc90: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
-0002cca0: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
-0002ccb0: 7374 7269 6e67 5f32 2870 6172 616d 732c  string_2(params,
-0002ccc0: 2027 6e65 7743 6c69 656e 744f 7264 6572   'newClientOrder
-0002ccd0: 4964 272c 2027 636c 6965 6e74 4f72 6465  Id', 'clientOrde
-0002cce0: 7249 6427 290a 2020 2020 2020 2020 696e  rId').        in
-0002ccf0: 6974 6961 6c55 7070 6572 6361 7365 5479  itialUppercaseTy
-0002cd00: 7065 203d 2074 7970 652e 7570 7065 7228  pe = type.upper(
-0002cd10: 290a 2020 2020 2020 2020 7570 7065 7263  ).        upperc
-0002cd20: 6173 6554 7970 6520 3d20 696e 6974 6961  aseType = initia
-0002cd30: 6c55 7070 6572 6361 7365 5479 7065 0a20  lUppercaseType. 
-0002cd40: 2020 2020 2020 2070 6f73 744f 6e6c 7920         postOnly 
-0002cd50: 3d20 7365 6c66 2e69 735f 706f 7374 5f6f  = self.is_post_o
-0002cd60: 6e6c 7928 696e 6974 6961 6c55 7070 6572  nly(initialUpper
-0002cd70: 6361 7365 5479 7065 203d 3d20 274d 4152  caseType == 'MAR
-0002cd80: 4b45 5427 2c20 696e 6974 6961 6c55 7070  KET', initialUpp
-0002cd90: 6572 6361 7365 5479 7065 203d 3d20 274c  ercaseType == 'L
-0002cda0: 494d 4954 5f4d 414b 4552 272c 2070 6172  IMIT_MAKER', par
-0002cdb0: 616d 7329 0a20 2020 2020 2020 2069 6620  ams).        if 
-0002cdc0: 706f 7374 4f6e 6c79 3a0a 2020 2020 2020  postOnly:.      
-0002cdd0: 2020 2020 2020 7570 7065 7263 6173 6554        uppercaseT
-0002cde0: 7970 6520 3d20 274c 494d 4954 5f4d 414b  ype = 'LIMIT_MAK
-0002cdf0: 4552 270a 2020 2020 2020 2020 7265 7175  ER'.        requ
-0002ce00: 6573 745b 2774 7970 6527 5d20 3d20 7570  est['type'] = up
-0002ce10: 7065 7263 6173 6554 7970 650a 2020 2020  percaseType.    
-0002ce20: 2020 2020 7374 6f70 5072 6963 6520 3d20      stopPrice = 
-0002ce30: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0002ce40: 2870 6172 616d 732c 2027 7374 6f70 5072  (params, 'stopPr
-0002ce50: 6963 6527 290a 2020 2020 2020 2020 6966  ice').        if
-0002ce60: 2073 746f 7050 7269 6365 2069 7320 6e6f   stopPrice is no
-0002ce70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0002ce80: 2020 2020 6966 2075 7070 6572 6361 7365      if uppercase
-0002ce90: 5479 7065 203d 3d20 274d 4152 4b45 5427  Type == 'MARKET'
-0002cea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002ceb0: 2020 7570 7065 7263 6173 6554 7970 6520    uppercaseType 
-0002cec0: 3d20 2753 544f 505f 4c4f 5353 270a 2020  = 'STOP_LOSS'.  
-0002ced0: 2020 2020 2020 2020 2020 656c 6966 2075            elif u
-0002cee0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
-0002cef0: 274c 494d 4954 273a 0a20 2020 2020 2020  'LIMIT':.       
-0002cf00: 2020 2020 2020 2020 2075 7070 6572 6361           upperca
-0002cf10: 7365 5479 7065 203d 2027 5354 4f50 5f4c  seType = 'STOP_L
-0002cf20: 4f53 535f 4c49 4d49 5427 0a20 2020 2020  OSS_LIMIT'.     
-0002cf30: 2020 2076 616c 6964 4f72 6465 7254 7970     validOrderTyp
-0002cf40: 6573 203d 2073 656c 662e 7361 6665 5f76  es = self.safe_v
-0002cf50: 616c 7565 286d 6172 6b65 745b 2769 6e66  alue(market['inf
-0002cf60: 6f27 5d2c 2027 6f72 6465 7254 7970 6573  o'], 'orderTypes
-0002cf70: 2729 0a20 2020 2020 2020 2069 6620 6e6f  ').        if no
-0002cf80: 7420 7365 6c66 2e69 6e5f 6172 7261 7928  t self.in_array(
-0002cf90: 7570 7065 7263 6173 6554 7970 652c 2076  uppercaseType, v
-0002cfa0: 616c 6964 4f72 6465 7254 7970 6573 293a  alidOrderTypes):
-0002cfb0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0002cfc0: 696e 6974 6961 6c55 7070 6572 6361 7365  initialUppercase
-0002cfd0: 5479 7065 2021 3d20 7570 7065 7263 6173  Type != uppercas
-0002cfe0: 6554 7970 653a 0a20 2020 2020 2020 2020  eType:.         
-0002cff0: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
-0002d000: 616c 6964 4f72 6465 7228 7365 6c66 2e69  alidOrder(self.i
-0002d010: 6420 2b20 2720 7374 6f70 5072 6963 6520  d + ' stopPrice 
-0002d020: 7061 7261 6d65 7465 7220 6973 206e 6f74  parameter is not
-0002d030: 2061 6c6c 6f77 6564 2066 6f72 2027 202b   allowed for ' +
-0002d040: 2073 796d 626f 6c20 2b20 2720 2720 2b20   symbol + ' ' + 
-0002d050: 7479 7065 202b 2027 206f 7264 6572 7327  type + ' orders'
-0002d060: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0002d070: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002d080: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-0002d090: 644f 7264 6572 2873 656c 662e 6964 202b  dOrder(self.id +
-0002d0a0: 2027 2027 202b 2074 7970 6520 2b20 2720   ' ' + type + ' 
-0002d0b0: 6973 206e 6f74 2061 2076 616c 6964 206f  is not a valid o
-0002d0c0: 7264 6572 2074 7970 6520 666f 7220 7468  rder type for th
-0002d0d0: 6520 2720 2b20 7379 6d62 6f6c 202b 2027  e ' + symbol + '
-0002d0e0: 206d 6172 6b65 7427 290a 2020 2020 2020   market').      
-0002d0f0: 2020 6966 2063 6c69 656e 744f 7264 6572    if clientOrder
-0002d100: 4964 2069 7320 4e6f 6e65 3a0a 2020 2020  Id is None:.    
-0002d110: 2020 2020 2020 2020 6272 6f6b 6572 203d          broker =
-0002d120: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0002d130: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
-0002d140: 6272 6f6b 6572 2729 0a20 2020 2020 2020  broker').       
-0002d150: 2020 2020 2069 6620 6272 6f6b 6572 2069       if broker i
-0002d160: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0002d170: 2020 2020 2020 2020 2020 2020 6272 6f6b              brok
-0002d180: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
-0002d190: 5f73 7472 696e 6728 6272 6f6b 6572 2c20  _string(broker, 
-0002d1a0: 2773 706f 7427 290a 2020 2020 2020 2020  'spot').        
-0002d1b0: 2020 2020 2020 2020 6966 2062 726f 6b65          if broke
-0002d1c0: 7249 6420 6973 206e 6f74 204e 6f6e 653a  rId is not None:
-0002d1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d1e0: 2020 2020 2072 6571 7565 7374 5b27 6e65       request['ne
-0002d1f0: 7743 6c69 656e 744f 7264 6572 4964 275d  wClientOrderId']
-0002d200: 203d 2062 726f 6b65 7249 6420 2b20 7365   = brokerId + se
-0002d210: 6c66 2e75 7569 6432 3228 290a 2020 2020  lf.uuid22().    
-0002d220: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002d230: 2020 2020 2020 7265 7175 6573 745b 276e        request['n
-0002d240: 6577 436c 6965 6e74 4f72 6465 7249 6427  ewClientOrderId'
-0002d250: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
-0002d260: 640a 2020 2020 2020 2020 7265 7175 6573  d.        reques
-0002d270: 745b 276e 6577 4f72 6465 7252 6573 7054  t['newOrderRespT
-0002d280: 7970 6527 5d20 3d20 7365 6c66 2e73 6166  ype'] = self.saf
-0002d290: 655f 7661 6c75 6528 7365 6c66 2e6f 7074  e_value(self.opt
-0002d2a0: 696f 6e73 5b27 6e65 774f 7264 6572 5265  ions['newOrderRe
-0002d2b0: 7370 5479 7065 275d 2c20 7479 7065 2c20  spType'], type, 
-0002d2c0: 2752 4553 554c 5427 2920 2023 2027 4143  'RESULT')  # 'AC
-0002d2d0: 4b27 2066 6f72 206f 7264 6572 2069 642c  K' for order id,
-0002d2e0: 2027 5245 5355 4c54 2720 666f 7220 6675   'RESULT' for fu
-0002d2f0: 6c6c 206f 7264 6572 206f 7220 2746 554c  ll order or 'FUL
-0002d300: 4c27 2066 6f72 206f 7264 6572 2077 6974  L' for order wit
-0002d310: 6820 6669 6c6c 730a 2020 2020 2020 2020  h fills.        
-0002d320: 7469 6d65 496e 466f 7263 6549 7352 6571  timeInForceIsReq
-0002d330: 7569 7265 6420 3d20 4661 6c73 650a 2020  uired = False.  
-0002d340: 2020 2020 2020 7072 6963 6549 7352 6571        priceIsReq
-0002d350: 7569 7265 6420 3d20 4661 6c73 650a 2020  uired = False.  
-0002d360: 2020 2020 2020 7374 6f70 5072 6963 6549        stopPriceI
-0002d370: 7352 6571 7569 7265 6420 3d20 4661 6c73  sRequired = Fals
-0002d380: 650a 2020 2020 2020 2020 7175 616e 7469  e.        quanti
-0002d390: 7479 4973 5265 7175 6972 6564 203d 2046  tyIsRequired = F
-0002d3a0: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
-0002d3b0: 7570 7065 7263 6173 6554 7970 6520 3d3d  uppercaseType ==
-0002d3c0: 2027 4d41 524b 4554 273a 0a20 2020 2020   'MARKET':.     
-0002d3d0: 2020 2020 2020 2071 756f 7465 4f72 6465         quoteOrde
-0002d3e0: 7251 7479 203d 2073 656c 662e 7361 6665  rQty = self.safe
-0002d3f0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
-0002d400: 6f6e 732c 2027 7175 6f74 654f 7264 6572  ons, 'quoteOrder
-0002d410: 5174 7927 2c20 5472 7565 290a 2020 2020  Qty', True).    
-0002d420: 2020 2020 2020 2020 6966 2071 756f 7465          if quote
-0002d430: 4f72 6465 7251 7479 3a0a 2020 2020 2020  OrderQty:.      
-0002d440: 2020 2020 2020 2020 2020 7175 6f74 654f            quoteO
-0002d450: 7264 6572 5174 794e 6577 203d 2073 656c  rderQtyNew = sel
-0002d460: 662e 7361 6665 5f76 616c 7565 5f32 2870  f.safe_value_2(p
-0002d470: 6172 616d 732c 2027 7175 6f74 654f 7264  arams, 'quoteOrd
-0002d480: 6572 5174 7927 2c20 2763 6f73 7427 290a  erQty', 'cost').
-0002d490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d4a0: 7072 6563 6973 696f 6e20 3d20 6d61 726b  precision = mark
-0002d4b0: 6574 5b27 7072 6563 6973 696f 6e27 5d5b  et['precision'][
-0002d4c0: 2770 7269 6365 275d 0a20 2020 2020 2020  'price'].       
-0002d4d0: 2020 2020 2020 2020 2069 6620 7175 6f74           if quot
-0002d4e0: 654f 7264 6572 5174 794e 6577 2069 7320  eOrderQtyNew is 
-0002d4f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0002d500: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002d510: 7175 6573 745b 2771 756f 7465 4f72 6465  quest['quoteOrde
-0002d520: 7251 7479 275d 203d 2073 656c 662e 6465  rQty'] = self.de
-0002d530: 6369 6d61 6c5f 746f 5f70 7265 6369 7369  cimal_to_precisi
-0002d540: 6f6e 2871 756f 7465 4f72 6465 7251 7479  on(quoteOrderQty
-0002d550: 4e65 772c 2054 5255 4e43 4154 452c 2070  New, TRUNCATE, p
-0002d560: 7265 6369 7369 6f6e 2c20 7365 6c66 2e70  recision, self.p
-0002d570: 7265 6369 7369 6f6e 4d6f 6465 290a 2020  recisionMode).  
-0002d580: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002d590: 6966 2070 7269 6365 2069 7320 6e6f 7420  if price is not 
-0002d5a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002d5b0: 2020 2020 2020 2020 2020 616d 6f75 6e74            amount
-0002d5c0: 5374 7269 6e67 203d 2073 656c 662e 6e75  String = self.nu
-0002d5d0: 6d62 6572 5f74 6f5f 7374 7269 6e67 2861  mber_to_string(a
-0002d5e0: 6d6f 756e 7429 0a20 2020 2020 2020 2020  mount).         
-0002d5f0: 2020 2020 2020 2020 2020 2070 7269 6365             price
-0002d600: 5374 7269 6e67 203d 2073 656c 662e 6e75  String = self.nu
-0002d610: 6d62 6572 5f74 6f5f 7374 7269 6e67 2870  mber_to_string(p
-0002d620: 7269 6365 290a 2020 2020 2020 2020 2020  rice).          
-0002d630: 2020 2020 2020 2020 2020 7175 6f74 654f            quoteO
-0002d640: 7264 6572 5175 616e 7469 7479 203d 2050  rderQuantity = P
-0002d650: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
-0002d660: 6c28 616d 6f75 6e74 5374 7269 6e67 2c20  l(amountString, 
-0002d670: 7072 6963 6553 7472 696e 6729 0a20 2020  priceString).   
-0002d680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d690: 2072 6571 7565 7374 5b27 7175 6f74 654f   request['quoteO
-0002d6a0: 7264 6572 5174 7927 5d20 3d20 7365 6c66  rderQty'] = self
-0002d6b0: 2e64 6563 696d 616c 5f74 6f5f 7072 6563  .decimal_to_prec
-0002d6c0: 6973 696f 6e28 7175 6f74 654f 7264 6572  ision(quoteOrder
-0002d6d0: 5175 616e 7469 7479 2c20 5452 554e 4341  Quantity, TRUNCA
-0002d6e0: 5445 2c20 7072 6563 6973 696f 6e2c 2073  TE, precision, s
-0002d6f0: 656c 662e 7072 6563 6973 696f 6e4d 6f64  elf.precisionMod
-0002d700: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-0002d710: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002d720: 2020 2020 2020 2020 2020 2020 2071 7561               qua
-0002d730: 6e74 6974 7949 7352 6571 7569 7265 6420  ntityIsRequired 
-0002d740: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-0002d750: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002d760: 2020 2020 2020 2020 2071 7561 6e74 6974           quantit
-0002d770: 7949 7352 6571 7569 7265 6420 3d20 5472  yIsRequired = Tr
-0002d780: 7565 0a20 2020 2020 2020 2065 6c69 6620  ue.        elif 
-0002d790: 7570 7065 7263 6173 6554 7970 6520 3d3d  uppercaseType ==
-0002d7a0: 2027 4c49 4d49 5427 3a0a 2020 2020 2020   'LIMIT':.      
-0002d7b0: 2020 2020 2020 7072 6963 6549 7352 6571        priceIsReq
-0002d7c0: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
-0002d7d0: 2020 2020 2020 2020 2074 696d 6549 6e46           timeInF
-0002d7e0: 6f72 6365 4973 5265 7175 6972 6564 203d  orceIsRequired =
-0002d7f0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-0002d800: 2020 7175 616e 7469 7479 4973 5265 7175    quantityIsRequ
-0002d810: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
-0002d820: 2020 2020 656c 6966 2028 7570 7065 7263      elif (upperc
-0002d830: 6173 6554 7970 6520 3d3d 2027 5354 4f50  aseType == 'STOP
-0002d840: 5f4c 4f53 5327 2920 6f72 2028 7570 7065  _LOSS') or (uppe
-0002d850: 7263 6173 6554 7970 6520 3d3d 2027 5441  rcaseType == 'TA
-0002d860: 4b45 5f50 524f 4649 5427 293a 0a20 2020  KE_PROFIT'):.   
-0002d870: 2020 2020 2020 2020 2073 746f 7050 7269           stopPri
-0002d880: 6365 4973 5265 7175 6972 6564 203d 2054  ceIsRequired = T
-0002d890: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0002d8a0: 7175 616e 7469 7479 4973 5265 7175 6972  quantityIsRequir
-0002d8b0: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
-0002d8c0: 2020 656c 6966 2028 7570 7065 7263 6173    elif (uppercas
-0002d8d0: 6554 7970 6520 3d3d 2027 5354 4f50 5f4c  eType == 'STOP_L
-0002d8e0: 4f53 535f 4c49 4d49 5427 2920 6f72 2028  OSS_LIMIT') or (
-0002d8f0: 7570 7065 7263 6173 6554 7970 6520 3d3d  uppercaseType ==
-0002d900: 2027 5441 4b45 5f50 524f 4649 545f 4c49   'TAKE_PROFIT_LI
-0002d910: 4d49 5427 293a 0a20 2020 2020 2020 2020  MIT'):.         
-0002d920: 2020 2071 7561 6e74 6974 7949 7352 6571     quantityIsReq
-0002d930: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
-0002d940: 2020 2020 2020 2020 2073 746f 7050 7269           stopPri
-0002d950: 6365 4973 5265 7175 6972 6564 203d 2054  ceIsRequired = T
-0002d960: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0002d970: 7072 6963 6549 7352 6571 7569 7265 6420  priceIsRequired 
-0002d980: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-0002d990: 2020 2074 696d 6549 6e46 6f72 6365 4973     timeInForceIs
-0002d9a0: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-0002d9b0: 2020 2020 2020 2020 656c 6966 2075 7070          elif upp
-0002d9c0: 6572 6361 7365 5479 7065 203d 3d20 274c  ercaseType == 'L
-0002d9d0: 494d 4954 5f4d 414b 4552 273a 0a20 2020  IMIT_MAKER':.   
-0002d9e0: 2020 2020 2020 2020 2070 7269 6365 4973           priceIs
-0002d9f0: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-0002da00: 2020 2020 2020 2020 2020 2020 7175 616e              quan
-0002da10: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
-0002da20: 2054 7275 650a 2020 2020 2020 2020 6966   True.        if
-0002da30: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
-0002da40: 7265 643a 0a20 2020 2020 2020 2020 2020  red:.           
-0002da50: 2072 6571 7565 7374 5b27 7175 616e 7469   request['quanti
-0002da60: 7479 275d 203d 2073 656c 662e 616d 6f75  ty'] = self.amou
-0002da70: 6e74 5f74 6f5f 7072 6563 6973 696f 6e28  nt_to_precision(
-0002da80: 7379 6d62 6f6c 2c20 616d 6f75 6e74 290a  symbol, amount).
-0002da90: 2020 2020 2020 2020 6966 2070 7269 6365          if price
-0002daa0: 4973 5265 7175 6972 6564 3a0a 2020 2020  IsRequired:.    
-0002dab0: 2020 2020 2020 2020 6966 2070 7269 6365          if price
-0002dac0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0002dad0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0002dae0: 496e 7661 6c69 644f 7264 6572 2873 656c  InvalidOrder(sel
-0002daf0: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
-0002db00: 6572 2829 2072 6571 7569 7265 7320 6120  er() requires a 
-0002db10: 7072 6963 6520 6172 6775 6d65 6e74 2066  price argument f
-0002db20: 6f72 2061 2027 202b 2074 7970 6520 2b20  or a ' + type + 
-0002db30: 2720 6f72 6465 7227 290a 2020 2020 2020  ' order').      
-0002db40: 2020 2020 2020 7265 7175 6573 745b 2770        request['p
-0002db50: 7269 6365 275d 203d 2073 656c 662e 7072  rice'] = self.pr
-0002db60: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
-0002db70: 2873 796d 626f 6c2c 2070 7269 6365 290a  (symbol, price).
-0002db80: 2020 2020 2020 2020 6966 2074 696d 6549          if timeI
-0002db90: 6e46 6f72 6365 4973 5265 7175 6972 6564  nForceIsRequired
-0002dba0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0002dbb0: 7175 6573 745b 2774 696d 6549 6e46 6f72  quest['timeInFor
-0002dbc0: 6365 275d 203d 2073 656c 662e 6f70 7469  ce'] = self.opti
-0002dbd0: 6f6e 735b 2764 6566 6175 6c74 5469 6d65  ons['defaultTime
-0002dbe0: 496e 466f 7263 6527 5d20 2023 2027 4754  InForce']  # 'GT
-0002dbf0: 4327 203d 2047 6f6f 6420 546f 2043 616e  C' = Good To Can
-0002dc00: 6365 6c28 6465 6661 756c 7429 2c20 2749  cel(default), 'I
-0002dc10: 4f43 2720 3d20 496d 6d65 6469 6174 6520  OC' = Immediate 
-0002dc20: 4f72 2043 616e 6365 6c0a 2020 2020 2020  Or Cancel.      
-0002dc30: 2020 6966 2073 746f 7050 7269 6365 4973    if stopPriceIs
-0002dc40: 5265 7175 6972 6564 3a0a 2020 2020 2020  Required:.      
-0002dc50: 2020 2020 2020 6966 2073 746f 7050 7269        if stopPri
-0002dc60: 6365 2069 7320 4e6f 6e65 3a0a 2020 2020  ce is None:.    
-0002dc70: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0002dc80: 6520 496e 7661 6c69 644f 7264 6572 2873  e InvalidOrder(s
-0002dc90: 656c 662e 6964 202b 2027 2065 6469 744f  elf.id + ' editO
-0002dca0: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
-0002dcb0: 6120 7374 6f70 5072 6963 6520 6578 7472  a stopPrice extr
-0002dcc0: 6120 7061 7261 6d20 666f 7220 6120 2720  a param for a ' 
-0002dcd0: 2b20 7479 7065 202b 2027 206f 7264 6572  + type + ' order
-0002dce0: 2729 0a20 2020 2020 2020 2020 2020 2065  ').            e
-0002dcf0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002dd00: 2020 2020 2072 6571 7565 7374 5b27 7374       request['st
-0002dd10: 6f70 5072 6963 6527 5d20 3d20 7365 6c66  opPrice'] = self
-0002dd20: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
-0002dd30: 696f 6e28 7379 6d62 6f6c 2c20 7374 6f70  ion(symbol, stop
-0002dd40: 5072 6963 6529 0a20 2020 2020 2020 2023  Price).        #
-0002dd50: 2072 656d 6f76 6520 7469 6d65 496e 466f   remove timeInFo
-0002dd60: 7263 6520 6672 6f6d 2070 6172 616d 7320  rce from params 
-0002dd70: 6265 6361 7573 6520 504f 2069 7320 6f6e  because PO is on
-0002dd80: 6c79 2075 7365 6420 6279 2073 656c 662e  ly used by self.
-0002dd90: 6973 5f70 6f73 745f 6f6e 6c79 616e 6420  is_post_onlyand 
-0002dda0: 6974 2773 206e 6f74 2061 2076 616c 6964  it's not a valid
-0002ddb0: 2076 616c 7565 2066 6f72 2042 696e 616e   value for Binan
-0002ddc0: 6365 0a20 2020 2020 2020 2069 6620 7365  ce.        if se
-0002ddd0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-0002dde0: 6172 616d 732c 2027 7469 6d65 496e 466f  arams, 'timeInFo
-0002ddf0: 7263 6527 2920 3d3d 2027 504f 273a 0a20  rce') == 'PO':. 
-0002de00: 2020 2020 2020 2020 2020 2070 6172 616d             param
-0002de10: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-0002de20: 7261 6d73 2c20 5b27 7469 6d65 496e 466f  rams, ['timeInFo
-0002de30: 7263 6527 5d29 0a20 2020 2020 2020 2072  rce']).        r
-0002de40: 6571 7565 7374 5061 7261 6d73 203d 2073  equestParams = s
-0002de50: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-0002de60: 205b 2771 756f 7465 4f72 6465 7251 7479   ['quoteOrderQty
-0002de70: 272c 2027 636f 7374 272c 2027 7374 6f70  ', 'cost', 'stop
-0002de80: 5072 6963 6527 2c20 276e 6577 436c 6965  Price', 'newClie
-0002de90: 6e74 4f72 6465 7249 6427 2c20 2763 6c69  ntOrderId', 'cli
-0002dea0: 656e 744f 7264 6572 4964 272c 2027 706f  entOrderId', 'po
-0002deb0: 7374 4f6e 6c79 275d 290a 2020 2020 2020  stOnly']).      
-0002dec0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-0002ded0: 662e 7072 6976 6174 6550 6f73 744f 7264  f.privatePostOrd
-0002dee0: 6572 4361 6e63 656c 5265 706c 6163 6528  erCancelReplace(
-0002def0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-0002df00: 6573 742c 2072 6571 7565 7374 5061 7261  est, requestPara
-0002df10: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
-0002df20: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0002df30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002df40: 2022 6361 6e63 656c 5265 7375 6c74 223a   "cancelResult":
-0002df50: 2022 5355 4343 4553 5322 2c0a 2020 2020   "SUCCESS",.    
-0002df60: 2020 2020 2320 2020 2020 2020 2020 226e      #         "n
-0002df70: 6577 4f72 6465 7252 6573 756c 7422 3a20  ewOrderResult": 
-0002df80: 2253 5543 4345 5353 222c 0a20 2020 2020  "SUCCESS",.     
-0002df90: 2020 2023 2020 2020 2020 2020 2022 6361     #         "ca
-0002dfa0: 6e63 656c 5265 7370 6f6e 7365 223a 207b  ncelResponse": {
-0002dfb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002dfc0: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-0002dfd0: 2022 4254 4355 5344 5422 2c0a 2020 2020   "BTCUSDT",.    
-0002dfe0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0002dff0: 2020 226f 7269 6743 6c69 656e 744f 7264    "origClientOrd
-0002e000: 6572 4964 223a 2022 7765 625f 3366 3632  erId": "web_3f62
-0002e010: 3836 3438 3062 3139 3462 3037 3938 3730  86480b194b079870
-0002e020: 6163 3735 6662 3639 3738 6237 222c 0a20  ac75fb6978b7",. 
-0002e030: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002e040: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
-0002e050: 3136 3338 3331 3536 3632 302c 0a20 2020  16383156620,.   
-0002e060: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002e070: 2020 2022 6f72 6465 724c 6973 7449 6422     "orderListId"
-0002e080: 3a20 2d31 2c0a 2020 2020 2020 2020 2320  : -1,.        # 
-0002e090: 2020 2020 2020 2020 2020 2020 2263 6c69              "cli
-0002e0a0: 656e 744f 7264 6572 4964 223a 2022 417a  entOrderId": "Az
-0002e0b0: 7436 666f 5654 5467 4850 4e68 7142 6634  t6foVTTgHPNhqBf4
-0002e0c0: 3154 5474 222c 0a20 2020 2020 2020 2023  1TTt",.        #
-0002e0d0: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-0002e0e0: 6963 6522 3a20 2231 3430 3030 2e30 3030  ice": "14000.000
-0002e0f0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0002e100: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
-0002e110: 7269 6751 7479 223a 2022 302e 3030 3131  rigQty": "0.0011
-0002e120: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0002e130: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
-0002e140: 6563 7574 6564 5174 7922 3a20 2230 2e30  ecutedQty": "0.0
-0002e150: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-0002e160: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0002e170: 2263 756d 6d75 6c61 7469 7665 5175 6f74  "cummulativeQuot
-0002e180: 6551 7479 223a 2022 302e 3030 3030 3030  eQty": "0.000000
-0002e190: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0002e1a0: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
-0002e1b0: 7573 223a 2022 4341 4e43 454c 4544 222c  us": "CANCELED",
-0002e1c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002e1d0: 2020 2020 2020 2022 7469 6d65 496e 466f         "timeInFo
-0002e1e0: 7263 6522 3a20 2247 5443 222c 0a20 2020  rce": "GTC",.   
-0002e1f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002e200: 2020 2022 7479 7065 223a 2022 4c49 4d49     "type": "LIMI
-0002e210: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-0002e220: 2020 2020 2020 2020 2020 2273 6964 6522            "side"
-0002e230: 3a20 2242 5559 220a 2020 2020 2020 2020  : "BUY".        
-0002e240: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-0002e250: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0002e260: 6e65 774f 7264 6572 5265 7370 6f6e 7365  newOrderResponse
-0002e270: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
-0002e280: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
-0002e290: 6f6c 223a 2022 4254 4355 5344 5422 2c0a  ol": "BTCUSDT",.
-0002e2a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002e2b0: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
-0002e2c0: 2031 3633 3833 3137 3632 3937 2c0a 2020   16383176297,.  
-0002e2d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002e2e0: 2020 2020 226f 7264 6572 4c69 7374 4964      "orderListId
-0002e2f0: 223a 202d 312c 0a20 2020 2020 2020 2023  ": -1,.        #
-0002e300: 2020 2020 2020 2020 2020 2020 2022 636c               "cl
-0002e310: 6965 6e74 4f72 6465 7249 6422 3a20 2278  ientOrderId": "x
-0002e320: 2d52 3442 4433 5338 3232 3265 6362 3538  -R4BD3S8222ecb58
-0002e330: 6562 3930 3734 6662 3162 6530 3138 6322  eb9074fb1be018c"
-0002e340: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002e350: 2020 2020 2020 2020 2274 7261 6e73 6163          "transac
-0002e360: 7454 696d 6522 3a20 3136 3730 3839 3138  tTime": 16708918
-0002e370: 3437 3933 322c 0a20 2020 2020 2020 2023  47932,.        #
-0002e380: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-0002e390: 6963 6522 3a20 2231 3335 3030 2e30 3030  ice": "13500.000
-0002e3a0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0002e3b0: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
-0002e3c0: 7269 6751 7479 223a 2022 302e 3030 3038  rigQty": "0.0008
-0002e3d0: 3530 3030 222c 0a20 2020 2020 2020 2023  5000",.        #
-0002e3e0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
-0002e3f0: 6563 7574 6564 5174 7922 3a20 2230 2e30  ecutedQty": "0.0
-0002e400: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-0002e410: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0002e420: 2263 756d 6d75 6c61 7469 7665 5175 6f74  "cummulativeQuot
-0002e430: 6551 7479 223a 2022 302e 3030 3030 3030  eQty": "0.000000
-0002e440: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0002e450: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
-0002e460: 7573 223a 2022 4e45 5722 2c0a 2020 2020  us": "NEW",.    
-0002e470: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0002e480: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
-0002e490: 2022 4754 4322 2c0a 2020 2020 2020 2020   "GTC",.        
-0002e4a0: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
-0002e4b0: 7970 6522 3a20 224c 494d 4954 222c 0a20  ype": "LIMIT",. 
-0002e4c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002e4d0: 2020 2020 2022 7369 6465 223a 2022 4255       "side": "BU
-0002e4e0: 5922 2c0a 2020 2020 2020 2020 2320 2020  Y",.        #   
-0002e4f0: 2020 2020 2020 2020 2020 2266 696c 6c73            "fills
-0002e500: 223a 205b 5d0a 2020 2020 2020 2020 2320  ": [].        # 
-0002e510: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0002e520: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0002e530: 2020 230a 2020 2020 2020 2020 6461 7461    #.        data
-0002e540: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0002e550: 7565 2872 6573 706f 6e73 652c 2027 6e65  ue(response, 'ne
-0002e560: 774f 7264 6572 5265 7370 6f6e 7365 2729  wOrderResponse')
-0002e570: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0002e580: 7365 6c66 2e70 6172 7365 5f6f 7264 6572  self.parse_order
-0002e590: 2864 6174 612c 206d 6172 6b65 7429 0a0a  (data, market)..
-0002e5a0: 2020 2020 6465 6620 7061 7273 655f 6f72      def parse_or
-0002e5b0: 6465 725f 7374 6174 7573 2873 656c 662c  der_status(self,
-0002e5c0: 2073 7461 7475 7329 3a0a 2020 2020 2020   status):.      
-0002e5d0: 2020 7374 6174 7573 6573 203d 207b 0a20    statuses = {. 
-0002e5e0: 2020 2020 2020 2020 2020 2027 4e45 5727             'NEW'
-0002e5f0: 3a20 276f 7065 6e27 2c0a 2020 2020 2020  : 'open',.      
-0002e600: 2020 2020 2020 2750 4152 5449 414c 4c59        'PARTIALLY
-0002e610: 5f46 494c 4c45 4427 3a20 276f 7065 6e27  _FILLED': 'open'
-0002e620: 2c0a 2020 2020 2020 2020 2020 2020 2741  ,.            'A
-0002e630: 4343 4550 5445 4427 3a20 276f 7065 6e27  CCEPTED': 'open'
-0002e640: 2c0a 2020 2020 2020 2020 2020 2020 2746  ,.            'F
-0002e650: 494c 4c45 4427 3a20 2763 6c6f 7365 6427  ILLED': 'closed'
-0002e660: 2c0a 2020 2020 2020 2020 2020 2020 2743  ,.            'C
-0002e670: 414e 4345 4c45 4427 3a20 2763 616e 6365  ANCELED': 'cance
-0002e680: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
-0002e690: 2020 2743 414e 4345 4c4c 4544 273a 2027    'CANCELLED': '
-0002e6a0: 6361 6e63 656c 6564 272c 0a20 2020 2020  canceled',.     
-0002e6b0: 2020 2020 2020 2027 5045 4e44 494e 475f         'PENDING_
-0002e6c0: 4341 4e43 454c 273a 2027 6361 6e63 656c  CANCEL': 'cancel
-0002e6d0: 696e 6727 2c20 2023 2063 7572 7265 6e74  ing',  # current
-0002e6e0: 6c79 2075 6e75 7365 640a 2020 2020 2020  ly unused.      
-0002e6f0: 2020 2020 2020 2752 454a 4543 5445 4427        'REJECTED'
-0002e700: 3a20 2772 656a 6563 7465 6427 2c0a 2020  : 'rejected',.  
-0002e710: 2020 2020 2020 2020 2020 2745 5850 4952            'EXPIR
-0002e720: 4544 273a 2027 6578 7069 7265 6427 2c0a  ED': 'expired',.
-0002e730: 2020 2020 2020 2020 2020 2020 2745 5850              'EXP
-0002e740: 4952 4544 5f49 4e5f 4d41 5443 4827 3a20  IRED_IN_MATCH': 
-0002e750: 2765 7870 6972 6564 272c 0a20 2020 2020  'expired',.     
-0002e760: 2020 207d 0a20 2020 2020 2020 2072 6574     }.        ret
-0002e770: 7572 6e20 7365 6c66 2e73 6166 655f 7374  urn self.safe_st
-0002e780: 7269 6e67 2873 7461 7475 7365 732c 2073  ring(statuses, s
-0002e790: 7461 7475 732c 2073 7461 7475 7329 0a0a  tatus, status)..
-0002e7a0: 2020 2020 6465 6620 7061 7273 655f 6f72      def parse_or
-0002e7b0: 6465 7228 7365 6c66 2c20 6f72 6465 722c  der(self, order,
-0002e7c0: 206d 6172 6b65 743d 4e6f 6e65 293a 0a20   market=None):. 
-0002e7d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0002e7e0: 2023 2073 706f 740a 2020 2020 2020 2020   # spot.        
-0002e7f0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-0002e800: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0002e810: 2020 2020 2273 796d 626f 6c22 3a20 224c      "symbol": "L
-0002e820: 5443 4254 4322 2c0a 2020 2020 2020 2020  TCBTC",.        
-0002e830: 2320 2020 2020 2020 2020 226f 7264 6572  #         "order
-0002e840: 4964 223a 2031 2c0a 2020 2020 2020 2020  Id": 1,.        
-0002e850: 2320 2020 2020 2020 2020 2263 6c69 656e  #         "clien
-0002e860: 744f 7264 6572 4964 223a 2022 6d79 4f72  tOrderId": "myOr
-0002e870: 6465 7231 222c 0a20 2020 2020 2020 2023  der1",.        #
-0002e880: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
-0002e890: 3a20 2230 2e31 222c 0a20 2020 2020 2020  : "0.1",.       
-0002e8a0: 2023 2020 2020 2020 2020 2022 6f72 6967   #         "orig
-0002e8b0: 5174 7922 3a20 2231 2e30 222c 0a20 2020  Qty": "1.0",.   
-0002e8c0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0002e8d0: 6578 6563 7574 6564 5174 7922 3a20 2230  executedQty": "0
-0002e8e0: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
-0002e8f0: 2020 2020 2020 2022 6375 6d6d 756c 6174         "cummulat
-0002e900: 6976 6551 756f 7465 5174 7922 3a20 2230  iveQuoteQty": "0
-0002e910: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
-0002e920: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
-0002e930: 2022 4e45 5722 2c0a 2020 2020 2020 2020   "NEW",.        
-0002e940: 2320 2020 2020 2020 2020 2274 696d 6549  #         "timeI
-0002e950: 6e46 6f72 6365 223a 2022 4754 4322 2c0a  nForce": "GTC",.
-0002e960: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002e970: 2020 2274 7970 6522 3a20 224c 494d 4954    "type": "LIMIT
-0002e980: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002e990: 2020 2020 2022 7369 6465 223a 2022 4255       "side": "BU
-0002e9a0: 5922 2c0a 2020 2020 2020 2020 2320 2020  Y",.        #   
-0002e9b0: 2020 2020 2020 2273 746f 7050 7269 6365        "stopPrice
-0002e9c0: 223a 2022 302e 3022 2c0a 2020 2020 2020  ": "0.0",.      
-0002e9d0: 2020 2320 2020 2020 2020 2020 2269 6365    #         "ice
-0002e9e0: 6265 7267 5174 7922 3a20 2230 2e30 222c  bergQty": "0.0",
-0002e9f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002ea00: 2020 2022 7469 6d65 223a 2031 3439 3938     "time": 14998
-0002ea10: 3237 3331 3935 3539 2c0a 2020 2020 2020  27319559,.      
-0002ea20: 2020 2320 2020 2020 2020 2020 2275 7064    #         "upd
-0002ea30: 6174 6554 696d 6522 3a20 3134 3939 3832  ateTime": 149982
-0002ea40: 3733 3139 3535 392c 0a20 2020 2020 2020  7319559,.       
-0002ea50: 2023 2020 2020 2020 2020 2022 6973 576f   #         "isWo
-0002ea60: 726b 696e 6722 3a20 5472 7565 0a20 2020  rking": True.   
-0002ea70: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0002ea80: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0002ea90: 2073 706f 743a 2065 6469 744f 7264 6572   spot: editOrder
-0002eaa0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0002eab0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0002eac0: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
-0002ead0: 6d62 6f6c 223a 2022 4254 4355 5344 5422  mbol": "BTCUSDT"
-0002eae0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002eaf0: 2020 2020 226f 7264 6572 4964 223a 2031      "orderId": 1
-0002eb00: 3633 3833 3137 3632 3937 2c0a 2020 2020  6383176297,.    
-0002eb10: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
-0002eb20: 7264 6572 4c69 7374 4964 223a 202d 312c  rderListId": -1,
-0002eb30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002eb40: 2020 2022 636c 6965 6e74 4f72 6465 7249     "clientOrderI
-0002eb50: 6422 3a20 2278 2d52 3442 4433 5338 3232  d": "x-R4BD3S822
-0002eb60: 3265 6362 3538 6562 3930 3734 6662 3162  2ecb58eb9074fb1b
-0002eb70: 6530 3138 6322 2c0a 2020 2020 2020 2020  e018c",.        
-0002eb80: 2320 2020 2020 2020 2020 2274 7261 6e73  #         "trans
-0002eb90: 6163 7454 696d 6522 3a20 3136 3730 3839  actTime": 167089
-0002eba0: 3138 3437 3933 322c 0a20 2020 2020 2020  1847932,.       
-0002ebb0: 2023 2020 2020 2020 2020 2022 7072 6963   #         "pric
-0002ebc0: 6522 3a20 2231 3335 3030 2e30 3030 3030  e": "13500.00000
-0002ebd0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0002ebe0: 2020 2020 2020 2020 226f 7269 6751 7479          "origQty
-0002ebf0: 223a 2022 302e 3030 3038 3530 3030 222c  ": "0.00085000",
-0002ec00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002ec10: 2020 2022 6578 6563 7574 6564 5174 7922     "executedQty"
-0002ec20: 3a20 2230 2e30 3030 3030 3030 3022 2c0a  : "0.00000000",.
-0002ec30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002ec40: 2020 2263 756d 6d75 6c61 7469 7665 5175    "cummulativeQu
-0002ec50: 6f74 6551 7479 223a 2022 302e 3030 3030  oteQty": "0.0000
-0002ec60: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0002ec70: 2020 2020 2020 2020 2022 7374 6174 7573           "status
-0002ec80: 223a 2022 4e45 5722 2c0a 2020 2020 2020  ": "NEW",.      
-0002ec90: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-0002eca0: 6549 6e46 6f72 6365 223a 2022 4754 4322  eInForce": "GTC"
-0002ecb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002ecc0: 2020 2020 2274 7970 6522 3a20 224c 494d      "type": "LIM
-0002ecd0: 4954 222c 0a20 2020 2020 2020 2023 2020  IT",.        #  
-0002ece0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
-0002ecf0: 4255 5922 2c0a 2020 2020 2020 2020 2320  BUY",.        # 
-0002ed00: 2020 2020 2020 2020 2266 696c 6c73 223a          "fills":
-0002ed10: 205b 5d0a 2020 2020 2020 2020 2320 2020   [].        #   
-0002ed20: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0002ed30: 2020 2020 2020 2320 6675 7475 7265 730a        # futures.
-0002ed40: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0002ed50: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0002ed60: 2020 2320 2020 2020 2020 2020 2273 796d    #         "sym
-0002ed70: 626f 6c22 3a20 2242 5443 5553 4454 222c  bol": "BTCUSDT",
-0002ed80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002ed90: 2020 2022 6f72 6465 7249 6422 3a20 312c     "orderId": 1,
-0002eda0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002edb0: 2020 2022 636c 6965 6e74 4f72 6465 7249     "clientOrderI
-0002edc0: 6422 3a20 226d 794f 7264 6572 3122 2c0a  d": "myOrder1",.
-0002edd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002ede0: 2020 2270 7269 6365 223a 2022 302e 3122    "price": "0.1"
-0002edf0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002ee00: 2020 2020 226f 7269 6751 7479 223a 2022      "origQty": "
-0002ee10: 312e 3022 2c0a 2020 2020 2020 2020 2320  1.0",.        # 
-0002ee20: 2020 2020 2020 2020 2265 7865 6375 7465          "execute
-0002ee30: 6451 7479 223a 2022 312e 3022 2c0a 2020  dQty": "1.0",.  
-0002ee40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002ee50: 2263 756d 5175 6f74 6522 3a20 2231 302e  "cumQuote": "10.
-0002ee60: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0002ee70: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
-0002ee80: 224e 4557 222c 0a20 2020 2020 2020 2023  "NEW",.        #
-0002ee90: 2020 2020 2020 2020 2022 7469 6d65 496e           "timeIn
-0002eea0: 466f 7263 6522 3a20 2247 5443 222c 0a20  Force": "GTC",. 
-0002eeb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002eec0: 2022 7479 7065 223a 2022 4c49 4d49 5422   "type": "LIMIT"
-0002eed0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002eee0: 2020 2020 2273 6964 6522 3a20 2242 5559      "side": "BUY
-0002eef0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002ef00: 2020 2020 2022 7374 6f70 5072 6963 6522       "stopPrice"
-0002ef10: 3a20 2230 2e30 222c 0a20 2020 2020 2020  : "0.0",.       
-0002ef20: 2023 2020 2020 2020 2020 2022 7570 6461   #         "upda
-0002ef30: 7465 5469 6d65 223a 2031 3439 3938 3237  teTime": 1499827
-0002ef40: 3331 3935 3539 0a20 2020 2020 2020 2023  319559.        #
-0002ef50: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0002ef60: 0a20 2020 2020 2020 2023 2063 7265 6174  .        # creat
-0002ef70: 654f 7264 6572 2077 6974 6820 7b22 6e65  eOrder with {"ne
-0002ef80: 774f 7264 6572 5265 7370 5479 7065 223a  wOrderRespType":
-0002ef90: 2022 4655 4c4c 227d 0a20 2020 2020 2020   "FULL"}.       
-0002efa0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0002efb0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0002efc0: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
-0002efd0: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
-0002efe0: 2320 2020 2020 2020 226f 7264 6572 4964  #       "orderId
-0002eff0: 223a 2035 3430 3332 3333 3933 392c 0a20  ": 5403233939,. 
-0002f000: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0002f010: 6f72 6465 724c 6973 7449 6422 3a20 2d31  orderListId": -1
-0002f020: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f030: 2020 2263 6c69 656e 744f 7264 6572 4964    "clientOrderId
-0002f040: 223a 2022 782d 5234 4244 3353 3832 3565  ": "x-R4BD3S825e
-0002f050: 3636 3965 3735 6236 6331 3466 3639 6132  669e75b6c14f69a2
-0002f060: 6334 3365 222c 0a20 2020 2020 2020 2023  c43e",.        #
-0002f070: 2020 2020 2020 2022 7472 616e 7361 6374         "transact
-0002f080: 5469 6d65 223a 2031 3631 3731 3531 3932  Time": 161715192
-0002f090: 3337 3432 2c0a 2020 2020 2020 2020 2320  3742,.        # 
-0002f0a0: 2020 2020 2020 2270 7269 6365 223a 2022        "price": "
-0002f0b0: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-0002f0c0: 2020 2020 2023 2020 2020 2020 2022 6f72       #       "or
-0002f0d0: 6967 5174 7922 3a20 2230 2e30 3030 3530  igQty": "0.00050
-0002f0e0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0002f0f0: 2020 2020 2020 2265 7865 6375 7465 6451        "executedQ
-0002f100: 7479 223a 2022 302e 3030 3035 3030 3030  ty": "0.00050000
-0002f110: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002f120: 2020 2022 6375 6d6d 756c 6174 6976 6551     "cummulativeQ
-0002f130: 756f 7465 5174 7922 3a20 2232 392e 3437  uoteQty": "29.47
-0002f140: 3038 3135 3030 222c 0a20 2020 2020 2020  081500",.       
-0002f150: 2023 2020 2020 2020 2022 7374 6174 7573   #       "status
-0002f160: 223a 2022 4649 4c4c 4544 222c 0a20 2020  ": "FILLED",.   
-0002f170: 2020 2020 2023 2020 2020 2020 2022 7469       #       "ti
-0002f180: 6d65 496e 466f 7263 6522 3a20 2247 5443  meInForce": "GTC
-0002f190: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002f1a0: 2020 2022 7479 7065 223a 2022 4d41 524b     "type": "MARK
-0002f1b0: 4554 222c 0a20 2020 2020 2020 2023 2020  ET",.        #  
-0002f1c0: 2020 2020 2022 7369 6465 223a 2022 4255       "side": "BU
-0002f1d0: 5922 2c0a 2020 2020 2020 2020 2320 2020  Y",.        #   
-0002f1e0: 2020 2020 2266 696c 6c73 223a 205b 0a20      "fills": [. 
-0002f1f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002f200: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0002f210: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
-0002f220: 2235 3839 3431 2e36 3330 3030 3030 3022  "58941.63000000"
-0002f230: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f240: 2020 2020 2020 2271 7479 223a 2022 302e        "qty": "0.
-0002f250: 3030 3035 3030 3030 222c 0a20 2020 2020  00050000",.     
-0002f260: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
-0002f270: 636f 6d6d 6973 7369 6f6e 223a 2022 302e  commission": "0.
-0002f280: 3030 3030 3730 3530 222c 0a20 2020 2020  00007050",.     
-0002f290: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
-0002f2a0: 636f 6d6d 6973 7369 6f6e 4173 7365 7422  commissionAsset"
-0002f2b0: 3a20 2242 4e42 222c 0a20 2020 2020 2020  : "BNB",.       
-0002f2c0: 2023 2020 2020 2020 2020 2020 2022 7472   #           "tr
-0002f2d0: 6164 6549 6422 3a20 3733 3734 3636 3633  adeId": 73746663
-0002f2e0: 310a 2020 2020 2020 2020 2320 2020 2020  1.        #     
-0002f2f0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-0002f300: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-0002f310: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-0002f320: 230a 2020 2020 2020 2020 2320 6465 6c69  #.        # deli
-0002f330: 7665 7279 0a20 2020 2020 2020 2023 0a20  very.        #. 
-0002f340: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0002f350: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0002f360: 6f72 6465 7249 6422 3a20 2231 3837 3432  orderId": "18742
-0002f370: 3732 3734 3131 222c 0a20 2020 2020 2020  727411",.       
-0002f380: 2023 2020 2020 2020 2022 7379 6d62 6f6c   #       "symbol
-0002f390: 223a 2022 4554 4855 5344 5f50 4552 5022  ": "ETHUSD_PERP"
-0002f3a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f3b0: 2020 2270 6169 7222 3a20 2245 5448 5553    "pair": "ETHUS
-0002f3c0: 4422 2c0a 2020 2020 2020 2020 2320 2020  D",.        #   
-0002f3d0: 2020 2020 2273 7461 7475 7322 3a20 2246      "status": "F
-0002f3e0: 494c 4c45 4422 2c0a 2020 2020 2020 2020  ILLED",.        
-0002f3f0: 2320 2020 2020 2020 2263 6c69 656e 744f  #       "clientO
-0002f400: 7264 6572 4964 223a 2022 782d 7863 4b74  rderId": "x-xcKt
-0002f410: 4768 6375 3365 3264 3135 3033 6664 6435  Ghcu3e2d1503fdd5
-0002f420: 3433 6233 6230 3234 3139 222c 0a20 2020  43b3b02419",.   
-0002f430: 2020 2020 2023 2020 2020 2020 2022 7072       #       "pr
-0002f440: 6963 6522 3a20 2230 222c 0a20 2020 2020  ice": "0",.     
-0002f450: 2020 2023 2020 2020 2020 2022 6176 6750     #       "avgP
-0002f460: 7269 6365 223a 2022 3435 3232 2e31 3422  rice": "4522.14"
-0002f470: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f480: 2020 226f 7269 6751 7479 223a 2022 3122    "origQty": "1"
-0002f490: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f4a0: 2020 2265 7865 6375 7465 6451 7479 223a    "executedQty":
-0002f4b0: 2022 3122 2c0a 2020 2020 2020 2020 2320   "1",.        # 
-0002f4c0: 2020 2020 2020 2263 756d 4261 7365 223a        "cumBase":
-0002f4d0: 2022 302e 3030 3232 3131 3334 222c 0a20   "0.00221134",. 
-0002f4e0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0002f4f0: 7469 6d65 496e 466f 7263 6522 3a20 2247  timeInForce": "G
-0002f500: 5443 222c 0a20 2020 2020 2020 2023 2020  TC",.        #  
-0002f510: 2020 2020 2022 7479 7065 223a 2022 4d41       "type": "MA
-0002f520: 524b 4554 222c 0a20 2020 2020 2020 2023  RKET",.        #
-0002f530: 2020 2020 2020 2022 7265 6475 6365 4f6e         "reduceOn
-0002f540: 6c79 223a 2046 616c 7365 2c0a 2020 2020  ly": False,.    
-0002f550: 2020 2020 2320 2020 2020 2020 2263 6c6f      #       "clo
-0002f560: 7365 506f 7369 7469 6f6e 223a 2046 616c  sePosition": Fal
-0002f570: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
-0002f580: 2020 2020 2273 6964 6522 3a20 2253 454c      "side": "SEL
-0002f590: 4c22 2c0a 2020 2020 2020 2020 2320 2020  L",.        #   
-0002f5a0: 2020 2020 2270 6f73 6974 696f 6e53 6964      "positionSid
-0002f5b0: 6522 3a20 2242 4f54 4822 2c0a 2020 2020  e": "BOTH",.    
-0002f5c0: 2020 2020 2320 2020 2020 2020 2273 746f      #       "sto
-0002f5d0: 7050 7269 6365 223a 2022 3022 2c0a 2020  pPrice": "0",.  
-0002f5e0: 2020 2020 2020 2320 2020 2020 2020 2277        #       "w
-0002f5f0: 6f72 6b69 6e67 5479 7065 223a 2022 434f  orkingType": "CO
-0002f600: 4e54 5241 4354 5f50 5249 4345 222c 0a20  NTRACT_PRICE",. 
-0002f610: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0002f620: 7072 6963 6550 726f 7465 6374 223a 2046  priceProtect": F
-0002f630: 616c 7365 2c0a 2020 2020 2020 2020 2320  alse,.        # 
-0002f640: 2020 2020 2020 226f 7269 6754 7970 6522        "origType"
-0002f650: 3a20 224d 4152 4b45 5422 2c0a 2020 2020  : "MARKET",.    
-0002f660: 2020 2020 2320 2020 2020 2020 2274 696d      #       "tim
-0002f670: 6522 3a20 2231 3633 3630 3631 3935 3236  e": "16360619526
-0002f680: 3630 222c 0a20 2020 2020 2020 2023 2020  60",.        #  
-0002f690: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-0002f6a0: 223a 2022 3136 3336 3036 3139 3532 3636  ": "163606195266
-0002f6b0: 3022 0a20 2020 2020 2020 2023 2020 2020  0".        #    
-0002f6c0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0002f6d0: 2020 2020 2023 206f 7074 696f 6e3a 2063       # option: c
-0002f6e0: 7265 6174 654f 7264 6572 2c20 6665 7463  reateOrder, fetc
-0002f6f0: 684f 7264 6572 2c20 6665 7463 684f 7065  hOrder, fetchOpe
-0002f700: 6e4f 7264 6572 732c 2066 6574 6368 4f72  nOrders, fetchOr
-0002f710: 6465 7273 0a20 2020 2020 2020 2023 0a20  ders.        #. 
-0002f720: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0002f730: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002f740: 2022 6f72 6465 7249 6422 3a20 3437 3238   "orderId": 4728
-0002f750: 3833 3330 3835 3433 3639 3737 3135 322c  833085436977152,
-0002f760: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002f770: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
-0002f780: 482d 3233 3032 3131 2d31 3530 302d 4322  H-230211-1500-C"
-0002f790: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f7a0: 2020 2020 2270 7269 6365 223a 2022 3130      "price": "10
-0002f7b0: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
-0002f7c0: 2020 2020 2020 2022 7175 616e 7469 7479         "quantity
-0002f7d0: 223a 2022 312e 3030 222c 0a20 2020 2020  ": "1.00",.     
-0002f7e0: 2020 2023 2020 2020 2020 2020 2022 6578     #         "ex
-0002f7f0: 6563 7574 6564 5174 7922 3a20 2230 2e30  ecutedQty": "0.0
-0002f800: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0002f810: 2020 2020 2020 2266 6565 223a 2022 3022        "fee": "0"
-0002f820: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002f830: 2020 2020 2273 6964 6522 3a20 2242 5559      "side": "BUY
-0002f840: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002f850: 2020 2020 2022 7479 7065 223a 2022 4c49       "type": "LI
-0002f860: 4d49 5422 2c0a 2020 2020 2020 2020 2320  MIT",.        # 
-0002f870: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
-0002f880: 6f72 6365 223a 2022 4754 4322 2c0a 2020  orce": "GTC",.  
-0002f890: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002f8a0: 2272 6564 7563 654f 6e6c 7922 3a20 4661  "reduceOnly": Fa
-0002f8b0: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
-0002f8c0: 2020 2020 2020 2022 706f 7374 4f6e 6c79         "postOnly
-0002f8d0: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
-0002f8e0: 2020 2320 2020 2020 2020 2020 2263 7265    #         "cre
-0002f8f0: 6174 6554 696d 6522 3a20 3136 3736 3038  ateTime": 167608
-0002f900: 3330 3334 3436 322c 0a20 2020 2020 2020  3034462,.       
-0002f910: 2023 2020 2020 2020 2020 2022 7570 6461   #         "upda
-0002f920: 7465 5469 6d65 223a 2031 3637 3630 3833  teTime": 1676083
-0002f930: 3033 3434 3632 2c0a 2020 2020 2020 2020  034462,.        
-0002f940: 2320 2020 2020 2020 2020 2273 7461 7475  #         "statu
-0002f950: 7322 3a20 2241 4343 4550 5445 4422 2c0a  s": "ACCEPTED",.
-0002f960: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002f970: 2020 2261 7667 5072 6963 6522 3a20 2230    "avgPrice": "0
-0002f980: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002f990: 2020 2020 2022 736f 7572 6365 223a 2022       "source": "
-0002f9a0: 4150 4922 2c0a 2020 2020 2020 2020 2320  API",.        # 
-0002f9b0: 2020 2020 2020 2020 2263 6c69 656e 744f          "clientO
-0002f9c0: 7264 6572 4964 223a 2022 222c 0a20 2020  rderId": "",.   
-0002f9d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0002f9e0: 7072 6963 6553 6361 6c65 223a 2031 2c0a  priceScale": 1,.
-0002f9f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002fa00: 2020 2271 7561 6e74 6974 7953 6361 6c65    "quantityScale
-0002fa10: 223a 2032 2c0a 2020 2020 2020 2020 2320  ": 2,.        # 
-0002fa20: 2020 2020 2020 2020 226f 7074 696f 6e53          "optionS
-0002fa30: 6964 6522 3a20 2243 414c 4c22 2c0a 2020  ide": "CALL",.  
-0002fa40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002fa50: 2271 756f 7465 4173 7365 7422 3a20 2255  "quoteAsset": "U
-0002fa60: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-0002fa70: 2020 2020 2020 2020 226c 6173 7454 7261          "lastTra
-0002fa80: 6465 223a 207b 2269 6422 3a22 3639 222c  de": {"id":"69",
-0002fa90: 2274 696d 6522 3a22 3136 3736 3038 3434  "time":"16760844
-0002faa0: 3330 3536 3722 2c22 7072 6963 6522 3a22  30567","price":"
-0002fab0: 3234 2e39 222c 2271 7479 223a 2231 2e30  24.9","qty":"1.0
-0002fac0: 3022 7d2c 0a20 2020 2020 2020 2023 2020  0"},.        #  
-0002fad0: 2020 2020 2020 2022 6d6d 7022 3a20 4661         "mmp": Fa
-0002fae0: 6c73 650a 2020 2020 2020 2020 2320 2020  lse.        #   
-0002faf0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0002fb00: 2020 2020 2020 7374 6174 7573 203d 2073        status = s
-0002fb10: 656c 662e 7061 7273 655f 6f72 6465 725f  elf.parse_order_
-0002fb20: 7374 6174 7573 2873 656c 662e 7361 6665  status(self.safe
-0002fb30: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
-0002fb40: 7374 6174 7573 2729 290a 2020 2020 2020  status')).      
-0002fb50: 2020 6d61 726b 6574 4964 203d 2073 656c    marketId = sel
-0002fb60: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
-0002fb70: 6465 722c 2027 7379 6d62 6f6c 2729 0a20  der, 'symbol'). 
-0002fb80: 2020 2020 2020 206d 6172 6b65 7454 7970         marketTyp
-0002fb90: 6520 3d20 2763 6f6e 7472 6163 7427 2069  e = 'contract' i
-0002fba0: 6620 2827 636c 6f73 6550 6f73 6974 696f  f ('closePositio
-0002fbb0: 6e27 2069 6e20 6f72 6465 7229 2065 6c73  n' in order) els
-0002fbc0: 6520 2773 706f 7427 0a20 2020 2020 2020  e 'spot'.       
-0002fbd0: 2073 796d 626f 6c20 3d20 7365 6c66 2e73   symbol = self.s
-0002fbe0: 6166 655f 7379 6d62 6f6c 286d 6172 6b65  afe_symbol(marke
-0002fbf0: 7449 642c 206d 6172 6b65 742c 204e 6f6e  tId, market, Non
-0002fc00: 652c 206d 6172 6b65 7454 7970 6529 0a20  e, marketType). 
-0002fc10: 2020 2020 2020 2066 696c 6c65 6420 3d20         filled = 
-0002fc20: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0002fc30: 286f 7264 6572 2c20 2765 7865 6375 7465  (order, 'execute
-0002fc40: 6451 7479 272c 2027 3027 290a 2020 2020  dQty', '0').    
-0002fc50: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
-0002fc60: 4e6f 6e65 0a20 2020 2020 2020 206c 6173  None.        las
-0002fc70: 7454 7261 6465 5469 6d65 7374 616d 7020  tTradeTimestamp 
-0002fc80: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-0002fc90: 6620 2774 696d 6527 2069 6e20 6f72 6465  f 'time' in orde
-0002fca0: 723a 0a20 2020 2020 2020 2020 2020 2074  r:.            t
-0002fcb0: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
-0002fcc0: 7361 6665 5f69 6e74 6567 6572 286f 7264  safe_integer(ord
-0002fcd0: 6572 2c20 2774 696d 6527 290a 2020 2020  er, 'time').    
-0002fce0: 2020 2020 656c 6966 2027 776f 726b 696e      elif 'workin
-0002fcf0: 6754 696d 6527 2069 6e20 6f72 6465 723a  gTime' in order:
-0002fd00: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
-0002fd10: 7454 7261 6465 5469 6d65 7374 616d 7020  tTradeTimestamp 
-0002fd20: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-0002fd30: 6765 7228 6f72 6465 722c 2027 7472 616e  ger(order, 'tran
-0002fd40: 7361 6374 5469 6d65 2729 0a20 2020 2020  sactTime').     
-0002fd50: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-0002fd60: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
-0002fd70: 6567 6572 286f 7264 6572 2c20 2777 6f72  eger(order, 'wor
-0002fd80: 6b69 6e67 5469 6d65 2729 0a20 2020 2020  kingTime').     
-0002fd90: 2020 2065 6c69 6620 2774 7261 6e73 6163     elif 'transac
-0002fda0: 7454 696d 6527 2069 6e20 6f72 6465 723a  tTime' in order:
-0002fdb0: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
-0002fdc0: 7454 7261 6465 5469 6d65 7374 616d 7020  tTradeTimestamp 
-0002fdd0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-0002fde0: 6765 7228 6f72 6465 722c 2027 7472 616e  ger(order, 'tran
-0002fdf0: 7361 6374 5469 6d65 2729 0a20 2020 2020  sactTime').     
-0002fe00: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-0002fe10: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
-0002fe20: 6567 6572 286f 7264 6572 2c20 2774 7261  eger(order, 'tra
-0002fe30: 6e73 6163 7454 696d 6527 290a 2020 2020  nsactTime').    
-0002fe40: 2020 2020 656c 6966 2027 6372 6561 7465      elif 'create
-0002fe50: 5469 6d65 2720 696e 206f 7264 6572 3a0a  Time' in order:.
-0002fe60: 2020 2020 2020 2020 2020 2020 6c61 7374              last
-0002fe70: 5472 6164 6554 696d 6573 7461 6d70 203d  TradeTimestamp =
-0002fe80: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-0002fe90: 6572 286f 7264 6572 2c20 2775 7064 6174  er(order, 'updat
-0002fea0: 6554 696d 6527 290a 2020 2020 2020 2020  eTime').        
-0002feb0: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
-0002fec0: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
-0002fed0: 7228 6f72 6465 722c 2027 6372 6561 7465  r(order, 'create
-0002fee0: 5469 6d65 2729 0a20 2020 2020 2020 2065  Time').        e
-0002fef0: 6c69 6620 2775 7064 6174 6554 696d 6527  lif 'updateTime'
-0002ff00: 2069 6e20 6f72 6465 723a 0a20 2020 2020   in order:.     
-0002ff10: 2020 2020 2020 2069 6620 7374 6174 7573         if status
-0002ff20: 203d 3d20 276f 7065 6e27 3a0a 2020 2020   == 'open':.    
-0002ff30: 2020 2020 2020 2020 2020 2020 6966 2050              if P
-0002ff40: 7265 6369 7365 2e73 7472 696e 675f 6774  recise.string_gt
-0002ff50: 2866 696c 6c65 642c 2027 3027 293a 0a20  (filled, '0'):. 
-0002ff60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ff70: 2020 206c 6173 7454 7261 6465 5469 6d65     lastTradeTime
-0002ff80: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-0002ff90: 655f 696e 7465 6765 7228 6f72 6465 722c  e_integer(order,
-0002ffa0: 2027 7570 6461 7465 5469 6d65 2729 0a20   'updateTime'). 
-0002ffb0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0002ffc0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002ffd0: 2020 2020 2020 2020 2074 696d 6573 7461           timesta
-0002ffe0: 6d70 203d 2073 656c 662e 7361 6665 5f69  mp = self.safe_i
-0002fff0: 6e74 6567 6572 286f 7264 6572 2c20 2775  nteger(order, 'u
-00030000: 7064 6174 6554 696d 6527 290a 2020 2020  pdateTime').    
-00030010: 2020 2020 6176 6572 6167 6520 3d20 7365      average = se
-00030020: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-00030030: 7264 6572 2c20 2761 7667 5072 6963 6527  rder, 'avgPrice'
-00030040: 290a 2020 2020 2020 2020 7072 6963 6520  ).        price 
-00030050: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00030060: 6e67 286f 7264 6572 2c20 2770 7269 6365  ng(order, 'price
-00030070: 2729 0a20 2020 2020 2020 2061 6d6f 756e  ').        amoun
-00030080: 7420 3d20 7365 6c66 2e73 6166 655f 7374  t = self.safe_st
-00030090: 7269 6e67 5f32 286f 7264 6572 2c20 276f  ring_2(order, 'o
-000300a0: 7269 6751 7479 272c 2027 7175 616e 7469  rigQty', 'quanti
-000300b0: 7479 2729 0a20 2020 2020 2020 2023 202d  ty').        # -
-000300c0: 2053 706f 742f 4d61 7267 696e 206d 6172   Spot/Margin mar
-000300d0: 6b65 743a 2063 756d 6d75 6c61 7469 7665  ket: cummulative
-000300e0: 5175 6f74 6551 7479 0a20 2020 2020 2020  QuoteQty.       
-000300f0: 2023 202d 2046 7574 7572 6573 206d 6172   # - Futures mar
-00030100: 6b65 743a 2063 756d 5175 6f74 652e 0a20  ket: cumQuote.. 
-00030110: 2020 2020 2020 2023 2020 204e 6f74 6520         #   Note 
-00030120: 7365 6c66 2069 7320 6e6f 7420 7468 6520  self is not the 
-00030130: 6163 7475 616c 2063 6f73 742c 2073 696e  actual cost, sin
-00030140: 6365 2042 696e 616e 6365 2066 7574 7572  ce Binance futur
-00030150: 6573 2075 7365 7320 6c65 7665 7261 6765  es uses leverage
-00030160: 2074 6f20 6361 6c63 756c 6174 6520 6d61   to calculate ma
-00030170: 7267 696e 732e 0a20 2020 2020 2020 2063  rgins..        c
-00030180: 6f73 7420 3d20 7365 6c66 2e73 6166 655f  ost = self.safe_
-00030190: 7374 7269 6e67 5f32 286f 7264 6572 2c20  string_2(order, 
-000301a0: 2763 756d 6d75 6c61 7469 7665 5175 6f74  'cummulativeQuot
-000301b0: 6551 7479 272c 2027 6375 6d51 756f 7465  eQty', 'cumQuote
-000301c0: 2729 0a20 2020 2020 2020 2063 6f73 7420  ').        cost 
-000301d0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-000301e0: 6e67 286f 7264 6572 2c20 2763 756d 4261  ng(order, 'cumBa
-000301f0: 7365 272c 2063 6f73 7429 0a20 2020 2020  se', cost).     
-00030200: 2020 2069 6420 3d20 7365 6c66 2e73 6166     id = self.saf
-00030210: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00030220: 276f 7264 6572 4964 2729 0a20 2020 2020  'orderId').     
-00030230: 2020 2074 7970 6520 3d20 7365 6c66 2e73     type = self.s
-00030240: 6166 655f 7374 7269 6e67 5f6c 6f77 6572  afe_string_lower
-00030250: 286f 7264 6572 2c20 2774 7970 6527 290a  (order, 'type').
-00030260: 2020 2020 2020 2020 7369 6465 203d 2073          side = s
-00030270: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
-00030280: 6c6f 7765 7228 6f72 6465 722c 2027 7369  lower(order, 'si
-00030290: 6465 2729 0a20 2020 2020 2020 2066 696c  de').        fil
-000302a0: 6c73 203d 2073 656c 662e 7361 6665 5f76  ls = self.safe_v
-000302b0: 616c 7565 286f 7264 6572 2c20 2766 696c  alue(order, 'fil
-000302c0: 6c73 272c 205b 5d29 0a20 2020 2020 2020  ls', []).       
-000302d0: 2063 6c69 656e 744f 7264 6572 4964 203d   clientOrderId =
-000302e0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-000302f0: 6728 6f72 6465 722c 2027 636c 6965 6e74  g(order, 'client
-00030300: 4f72 6465 7249 6427 290a 2020 2020 2020  OrderId').      
-00030310: 2020 7469 6d65 496e 466f 7263 6520 3d20    timeInForce = 
-00030320: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00030330: 286f 7264 6572 2c20 2774 696d 6549 6e46  (order, 'timeInF
-00030340: 6f72 6365 2729 0a20 2020 2020 2020 2069  orce').        i
-00030350: 6620 7469 6d65 496e 466f 7263 6520 3d3d  f timeInForce ==
-00030360: 2027 4754 5827 3a0a 2020 2020 2020 2020   'GTX':.        
-00030370: 2020 2020 2320 4754 5820 6d65 616e 7320      # GTX means 
-00030380: 2247 6f6f 6420 5469 6c6c 2043 726f 7373  "Good Till Cross
-00030390: 696e 6722 2061 6e64 2069 7320 616e 2065  ing" and is an e
-000303a0: 7175 6976 616c 656e 7420 7761 7920 6f66  quivalent way of
-000303b0: 2073 6179 696e 6720 506f 7374 204f 6e6c   saying Post Onl
-000303c0: 790a 2020 2020 2020 2020 2020 2020 7469  y.            ti
-000303d0: 6d65 496e 466f 7263 6520 3d20 2750 4f27  meInForce = 'PO'
-000303e0: 0a20 2020 2020 2020 2070 6f73 744f 6e6c  .        postOnl
-000303f0: 7920 3d20 2874 7970 6520 3d3d 2027 6c69  y = (type == 'li
-00030400: 6d69 745f 6d61 6b65 7227 2920 6f72 2028  mit_maker') or (
-00030410: 7469 6d65 496e 466f 7263 6520 3d3d 2027  timeInForce == '
-00030420: 504f 2729 0a20 2020 2020 2020 2069 6620  PO').        if 
-00030430: 7479 7065 203d 3d20 276c 696d 6974 5f6d  type == 'limit_m
-00030440: 616b 6572 273a 0a20 2020 2020 2020 2020  aker':.         
-00030450: 2020 2074 7970 6520 3d20 276c 696d 6974     type = 'limit
-00030460: 270a 2020 2020 2020 2020 7374 6f70 5072  '.        stopPr
-00030470: 6963 6553 7472 696e 6720 3d20 7365 6c66  iceString = self
-00030480: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
-00030490: 6572 2c20 2773 746f 7050 7269 6365 2729  er, 'stopPrice')
-000304a0: 0a20 2020 2020 2020 2073 746f 7050 7269  .        stopPri
-000304b0: 6365 203d 2073 656c 662e 7061 7273 655f  ce = self.parse_
-000304c0: 6e75 6d62 6572 2873 656c 662e 6f6d 6974  number(self.omit
-000304d0: 5f7a 6572 6f28 7374 6f70 5072 6963 6553  _zero(stopPriceS
-000304e0: 7472 696e 6729 290a 2020 2020 2020 2020  tring)).        
-000304f0: 7265 7475 726e 2073 656c 662e 7361 6665  return self.safe
-00030500: 5f6f 7264 6572 287b 0a20 2020 2020 2020  _order({.       
-00030510: 2020 2020 2027 696e 666f 273a 206f 7264       'info': ord
-00030520: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-00030530: 2769 6427 3a20 6964 2c0a 2020 2020 2020  'id': id,.      
-00030540: 2020 2020 2020 2763 6c69 656e 744f 7264        'clientOrd
-00030550: 6572 4964 273a 2063 6c69 656e 744f 7264  erId': clientOrd
-00030560: 6572 4964 2c0a 2020 2020 2020 2020 2020  erId,.          
-00030570: 2020 2774 696d 6573 7461 6d70 273a 2074    'timestamp': t
-00030580: 696d 6573 7461 6d70 2c0a 2020 2020 2020  imestamp,.      
-00030590: 2020 2020 2020 2764 6174 6574 696d 6527        'datetime'
-000305a0: 3a20 7365 6c66 2e69 736f 3836 3031 2874  : self.iso8601(t
-000305b0: 696d 6573 7461 6d70 292c 0a20 2020 2020  imestamp),.     
-000305c0: 2020 2020 2020 2027 6c61 7374 5472 6164         'lastTrad
-000305d0: 6554 696d 6573 7461 6d70 273a 206c 6173  eTimestamp': las
-000305e0: 7454 7261 6465 5469 6d65 7374 616d 702c  tTradeTimestamp,
-000305f0: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
-00030600: 6d62 6f6c 273a 2073 796d 626f 6c2c 0a20  mbol': symbol,. 
-00030610: 2020 2020 2020 2020 2020 2027 7479 7065             'type
-00030620: 273a 2074 7970 652c 0a20 2020 2020 2020  ': type,.       
-00030630: 2020 2020 2027 7469 6d65 496e 466f 7263       'timeInForc
-00030640: 6527 3a20 7469 6d65 496e 466f 7263 652c  e': timeInForce,
-00030650: 0a20 2020 2020 2020 2020 2020 2027 706f  .            'po
-00030660: 7374 4f6e 6c79 273a 2070 6f73 744f 6e6c  stOnly': postOnl
-00030670: 792c 0a20 2020 2020 2020 2020 2020 2027  y,.            '
-00030680: 7265 6475 6365 4f6e 6c79 273a 2073 656c  reduceOnly': sel
-00030690: 662e 7361 6665 5f76 616c 7565 286f 7264  f.safe_value(ord
-000306a0: 6572 2c20 2772 6564 7563 654f 6e6c 7927  er, 'reduceOnly'
-000306b0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-000306c0: 7369 6465 273a 2073 6964 652c 0a20 2020  side': side,.   
-000306d0: 2020 2020 2020 2020 2027 7072 6963 6527           'price'
-000306e0: 3a20 7072 6963 652c 0a20 2020 2020 2020  : price,.       
-000306f0: 2020 2020 2027 7472 6967 6765 7250 7269       'triggerPri
-00030700: 6365 273a 2073 746f 7050 7269 6365 2c0a  ce': stopPrice,.
-00030710: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
-00030720: 756e 7427 3a20 616d 6f75 6e74 2c0a 2020  unt': amount,.  
-00030730: 2020 2020 2020 2020 2020 2763 6f73 7427            'cost'
-00030740: 3a20 636f 7374 2c0a 2020 2020 2020 2020  : cost,.        
-00030750: 2020 2020 2761 7665 7261 6765 273a 2061      'average': a
-00030760: 7665 7261 6765 2c0a 2020 2020 2020 2020  verage,.        
-00030770: 2020 2020 2766 696c 6c65 6427 3a20 6669      'filled': fi
-00030780: 6c6c 6564 2c0a 2020 2020 2020 2020 2020  lled,.          
-00030790: 2020 2772 656d 6169 6e69 6e67 273a 204e    'remaining': N
-000307a0: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-000307b0: 2027 7374 6174 7573 273a 2073 7461 7475   'status': statu
-000307c0: 732c 0a20 2020 2020 2020 2020 2020 2027  s,.            '
-000307d0: 6665 6527 3a20 7b0a 2020 2020 2020 2020  fee': {.        
-000307e0: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
-000307f0: 7927 3a20 7365 6c66 2e73 6166 655f 7374  y': self.safe_st
-00030800: 7269 6e67 286f 7264 6572 2c20 2771 756f  ring(order, 'quo
-00030810: 7465 4173 7365 7427 292c 0a20 2020 2020  teAsset'),.     
-00030820: 2020 2020 2020 2020 2020 2027 636f 7374             'cost
-00030830: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
-00030840: 6265 7228 6f72 6465 722c 2027 6665 6527  ber(order, 'fee'
-00030850: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00030860: 2020 2027 7261 7465 273a 204e 6f6e 652c     'rate': None,
-00030870: 0a20 2020 2020 2020 2020 2020 207d 2c0a  .            },.
-00030880: 2020 2020 2020 2020 2020 2020 2774 7261              'tra
-00030890: 6465 7327 3a20 6669 6c6c 732c 0a20 2020  des': fills,.   
-000308a0: 2020 2020 207d 2c20 6d61 726b 6574 290a       }, market).
-000308b0: 0a20 2020 2064 6566 2063 7265 6174 655f  .    def create_
-000308c0: 6f72 6465 7228 7365 6c66 2c20 7379 6d62  order(self, symb
-000308d0: 6f6c 3a20 7374 722c 2074 7970 652c 2073  ol: str, type, s
-000308e0: 6964 653a 204f 7264 6572 5369 6465 2c20  ide: OrderSide, 
-000308f0: 616d 6f75 6e74 2c20 7072 6963 653d 4e6f  amount, price=No
-00030900: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00030910: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00030920: 2020 2020 6372 6561 7465 2061 2074 7261      create a tra
-00030930: 6465 206f 7264 6572 0a20 2020 2020 2020  de order.       
-00030940: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00030950: 6f6c 3a20 756e 6966 6965 6420 7379 6d62  ol: unified symb
-00030960: 6f6c 206f 6620 7468 6520 6d61 726b 6574  ol of the market
-00030970: 2074 6f20 6372 6561 7465 2061 6e20 6f72   to create an or
-00030980: 6465 7220 696e 0a20 2020 2020 2020 203a  der in.        :
-00030990: 7061 7261 6d20 7374 7220 7479 7065 3a20  param str type: 
-000309a0: 276d 6172 6b65 7427 206f 7220 276c 696d  'market' or 'lim
-000309b0: 6974 270a 2020 2020 2020 2020 3a70 6172  it'.        :par
-000309c0: 616d 2073 7472 2073 6964 653a 2027 6275  am str side: 'bu
-000309d0: 7927 206f 7220 2773 656c 6c27 0a20 2020  y' or 'sell'.   
-000309e0: 2020 2020 203a 7061 7261 6d20 666c 6f61       :param floa
-000309f0: 7420 616d 6f75 6e74 3a20 686f 7720 6d75  t amount: how mu
-00030a00: 6368 206f 6620 6375 7272 656e 6379 2079  ch of currency y
-00030a10: 6f75 2077 616e 7420 746f 2074 7261 6465  ou want to trade
-00030a20: 2069 6e20 756e 6974 7320 6f66 2062 6173   in units of bas
-00030a30: 6520 6375 7272 656e 6379 0a20 2020 2020  e currency.     
-00030a40: 2020 203a 7061 7261 6d20 666c 6f61 747c     :param float|
-00030a50: 4e6f 6e65 2070 7269 6365 3a20 7468 6520  None price: the 
-00030a60: 7072 6963 6520 6174 2077 6869 6368 2074  price at which t
-00030a70: 6865 206f 7264 6572 2069 7320 746f 2062  he order is to b
-00030a80: 6520 6675 6c6c 6669 6c6c 6564 2c20 696e  e fullfilled, in
-00030a90: 2075 6e69 7473 206f 6620 7468 6520 7175   units of the qu
-00030aa0: 6f74 6520 6375 7272 656e 6379 2c20 6967  ote currency, ig
-00030ab0: 6e6f 7265 6420 696e 206d 6172 6b65 7420  nored in market 
-00030ac0: 6f72 6465 7273 0a20 2020 2020 2020 203a  orders.        :
-00030ad0: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-00030ae0: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-00030af0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00030b00: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
-00030b10: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00030b20: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-00030b30: 2070 6172 616d 735b 276d 6172 6769 6e4d   params['marginM
-00030b40: 6f64 6527 5d3a 2027 6372 6f73 7327 206f  ode']: 'cross' o
-00030b50: 7220 2769 736f 6c61 7465 6427 2c20 666f  r 'isolated', fo
-00030b60: 7220 7370 6f74 206d 6172 6769 6e20 7472  r spot margin tr
-00030b70: 6164 696e 670a 2020 2020 2020 2020 3a72  ading.        :r
-00030b80: 6574 7572 6e73 2064 6963 743a 2061 6e20  eturns dict: an 
-00030b90: 606f 7264 6572 2073 7472 7563 7475 7265  `order structure
-00030ba0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00030bb0: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
-00030bc0: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
-00030bd0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00030be0: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-00030bf0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-00030c00: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-00030c10: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-00030c20: 2020 2020 206d 6172 6b65 7454 7970 6520       marketType 
-00030c30: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00030c40: 6e67 2870 6172 616d 732c 2027 7479 7065  ng(params, 'type
-00030c50: 272c 206d 6172 6b65 745b 2774 7970 6527  ', market['type'
-00030c60: 5d29 0a20 2020 2020 2020 2063 6c69 656e  ]).        clien
-00030c70: 744f 7264 6572 4964 203d 2073 656c 662e  tOrderId = self.
-00030c80: 7361 6665 5f73 7472 696e 675f 3228 7061  safe_string_2(pa
-00030c90: 7261 6d73 2c20 276e 6577 436c 6965 6e74  rams, 'newClient
-00030ca0: 4f72 6465 7249 6427 2c20 2763 6c69 656e  OrderId', 'clien
-00030cb0: 744f 7264 6572 4964 2729 0a20 2020 2020  tOrderId').     
-00030cc0: 2020 2069 6e69 7469 616c 5570 7065 7263     initialUpperc
-00030cd0: 6173 6554 7970 6520 3d20 7479 7065 2e75  aseType = type.u
-00030ce0: 7070 6572 2829 0a20 2020 2020 2020 2069  pper().        i
-00030cf0: 734d 6172 6b65 744f 7264 6572 203d 2069  sMarketOrder = i
-00030d00: 6e69 7469 616c 5570 7065 7263 6173 6554  nitialUppercaseT
-00030d10: 7970 6520 3d3d 2027 4d41 524b 4554 270a  ype == 'MARKET'.
-00030d20: 2020 2020 2020 2020 6973 4c69 6d69 744f          isLimitO
-00030d30: 7264 6572 203d 2069 6e69 7469 616c 5570  rder = initialUp
-00030d40: 7065 7263 6173 6554 7970 6520 3d3d 2027  percaseType == '
-00030d50: 4c49 4d49 5427 0a20 2020 2020 2020 2070  LIMIT'.        p
-00030d60: 6f73 744f 6e6c 7920 3d20 7365 6c66 2e69  ostOnly = self.i
-00030d70: 735f 706f 7374 5f6f 6e6c 7928 6973 4d61  s_post_only(isMa
-00030d80: 726b 6574 4f72 6465 722c 2069 6e69 7469  rketOrder, initi
-00030d90: 616c 5570 7065 7263 6173 6554 7970 6520  alUppercaseType 
-00030da0: 3d3d 2027 4c49 4d49 545f 4d41 4b45 5227  == 'LIMIT_MAKER'
-00030db0: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
-00030dc0: 2020 7472 6967 6765 7250 7269 6365 203d    triggerPrice =
-00030dd0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00030de0: 5f32 2870 6172 616d 732c 2027 7472 6967  _2(params, 'trig
-00030df0: 6765 7250 7269 6365 272c 2027 7374 6f70  gerPrice', 'stop
-00030e00: 5072 6963 6527 290a 2020 2020 2020 2020  Price').        
-00030e10: 7374 6f70 4c6f 7373 5072 6963 6520 3d20  stopLossPrice = 
-00030e20: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00030e30: 7061 7261 6d73 2c20 2773 746f 704c 6f73  params, 'stopLos
-00030e40: 7350 7269 6365 272c 2074 7269 6767 6572  sPrice', trigger
-00030e50: 5072 6963 6529 2020 2320 6661 6c6c 6261  Price)  # fallba
-00030e60: 636b 2074 6f20 7374 6f70 4c6f 7373 0a20  ck to stopLoss. 
-00030e70: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
-00030e80: 7450 7269 6365 203d 2073 656c 662e 7361  tPrice = self.sa
-00030e90: 6665 5f76 616c 7565 2870 6172 616d 732c  fe_value(params,
-00030ea0: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
-00030eb0: 6527 290a 2020 2020 2020 2020 6973 5374  e').        isSt
-00030ec0: 6f70 4c6f 7373 203d 2073 746f 704c 6f73  opLoss = stopLos
-00030ed0: 7350 7269 6365 2069 7320 6e6f 7420 4e6f  sPrice is not No
-00030ee0: 6e65 0a20 2020 2020 2020 2069 7354 616b  ne.        isTak
-00030ef0: 6550 726f 6669 7420 3d20 7461 6b65 5072  eProfit = takePr
-00030f00: 6f66 6974 5072 6963 6520 6973 206e 6f74  ofitPrice is not
-00030f10: 204e 6f6e 650a 2020 2020 2020 2020 7061   None.        pa
-00030f20: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-00030f30: 2870 6172 616d 732c 205b 2774 7970 6527  (params, ['type'
-00030f40: 2c20 276e 6577 436c 6965 6e74 4f72 6465  , 'newClientOrde
-00030f50: 7249 6427 2c20 2763 6c69 656e 744f 7264  rId', 'clientOrd
-00030f60: 6572 4964 272c 2027 706f 7374 4f6e 6c79  erId', 'postOnly
-00030f70: 272c 2027 7374 6f70 4c6f 7373 5072 6963  ', 'stopLossPric
-00030f80: 6527 2c20 2774 616b 6550 726f 6669 7450  e', 'takeProfitP
-00030f90: 7269 6365 272c 2027 7374 6f70 5072 6963  rice', 'stopPric
-00030fa0: 6527 2c20 2774 7269 6767 6572 5072 6963  e', 'triggerPric
-00030fb0: 6527 5d29 0a20 2020 2020 2020 206d 6172  e']).        mar
-00030fc0: 6769 6e4d 6f64 652c 2071 7565 7279 203d  ginMode, query =
-00030fd0: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
-00030fe0: 6769 6e5f 6d6f 6465 5f61 6e64 5f70 6172  gin_mode_and_par
-00030ff0: 616d 7328 2763 7265 6174 654f 7264 6572  ams('createOrder
-00031000: 272c 2070 6172 616d 7329 0a20 2020 2020  ', params).     
-00031010: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00031020: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00031030: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00031040: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-00031050: 7369 6465 273a 2073 6964 652e 7570 7065  side': side.uppe
-00031060: 7228 292c 0a20 2020 2020 2020 207d 0a20  r(),.        }. 
-00031070: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00031080: 2770 7269 7661 7465 506f 7374 4f72 6465  'privatePostOrde
-00031090: 7227 0a20 2020 2020 2020 2069 6620 6d61  r'.        if ma
-000310a0: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
-000310b0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-000310c0: 6f64 203d 2027 6661 7069 5072 6976 6174  od = 'fapiPrivat
-000310d0: 6550 6f73 744f 7264 6572 270a 2020 2020  ePostOrder'.    
-000310e0: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-000310f0: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
-00031100: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00031110: 2027 6461 7069 5072 6976 6174 6550 6f73   'dapiPrivatePos
-00031120: 744f 7264 6572 270a 2020 2020 2020 2020  tOrder'.        
-00031130: 656c 6966 206d 6172 6b65 7454 7970 6520  elif marketType 
-00031140: 3d3d 2027 6d61 7267 696e 2720 6f72 206d  == 'margin' or m
-00031150: 6172 6769 6e4d 6f64 6520 6973 206e 6f74  arginMode is not
-00031160: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00031170: 2020 206d 6574 686f 6420 3d20 2773 6170     method = 'sap
-00031180: 6950 6f73 744d 6172 6769 6e4f 7264 6572  iPostMarginOrder
-00031190: 270a 2020 2020 2020 2020 2020 2020 7265  '.            re
-000311a0: 6475 6365 4f6e 6c79 203d 2073 656c 662e  duceOnly = self.
-000311b0: 7361 6665 5f76 616c 7565 2870 6172 616d  safe_value(param
-000311c0: 732c 2027 7265 6475 6365 4f6e 6c79 2729  s, 'reduceOnly')
-000311d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000311e0: 7265 6475 6365 4f6e 6c79 3a0a 2020 2020  reduceOnly:.    
-000311f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00031200: 6573 745b 2773 6964 6545 6666 6563 7454  est['sideEffectT
-00031210: 7970 6527 5d20 3d20 2741 5554 4f5f 5245  ype'] = 'AUTO_RE
-00031220: 5041 5927 0a20 2020 2020 2020 2020 2020  PAY'.           
-00031230: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-00031240: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-00031250: 2772 6564 7563 654f 6e6c 7927 290a 2020  'reduceOnly').  
-00031260: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-00031270: 2773 706f 7427 5d20 6f72 206d 6172 6b65  'spot'] or marke
-00031280: 7454 7970 6520 3d3d 2027 6d61 7267 696e  tType == 'margin
-00031290: 273a 0a20 2020 2020 2020 2020 2020 2023  ':.            #
-000312a0: 2073 7570 706f 7274 2066 6f72 2074 6573   support for tes
-000312b0: 7469 6e67 206f 7264 6572 730a 2020 2020  ting orders.    
-000312c0: 2020 2020 2020 2020 7465 7374 203d 2073          test = s
-000312d0: 656c 662e 7361 6665 5f76 616c 7565 2871  elf.safe_value(q
-000312e0: 7565 7279 2c20 2774 6573 7427 2c20 4661  uery, 'test', Fa
-000312f0: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
-00031300: 2069 6620 7465 7374 3a0a 2020 2020 2020   if test:.      
-00031310: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00031320: 202b 3d20 2754 6573 7427 0a20 2020 2020   += 'Test'.     
-00031330: 2020 2020 2020 2023 206f 6e6c 7920 7375         # only su
-00031340: 7070 6f72 7465 6420 666f 7220 7370 6f74  pported for spot
-00031350: 2f6d 6172 6769 6e20 6170 6928 616c 6c20  /margin api(all 
-00031360: 6d61 7267 696e 206d 6172 6b65 7473 2061  margin markets a
-00031370: 7265 2073 706f 7420 6d61 726b 6574 7329  re spot markets)
-00031380: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00031390: 706f 7374 4f6e 6c79 3a0a 2020 2020 2020  postOnly:.      
-000313a0: 2020 2020 2020 2020 2020 7479 7065 203d            type =
-000313b0: 2027 4c49 4d49 545f 4d41 4b45 5227 0a20   'LIMIT_MAKER'. 
-000313c0: 2020 2020 2020 2075 7070 6572 6361 7365         uppercase
-000313d0: 5479 7065 203d 2074 7970 652e 7570 7065  Type = type.uppe
-000313e0: 7228 290a 2020 2020 2020 2020 7374 6f70  r().        stop
-000313f0: 5072 6963 6520 3d20 4e6f 6e65 0a20 2020  Price = None.   
-00031400: 2020 2020 2069 6620 6973 5374 6f70 4c6f       if isStopLo
-00031410: 7373 3a0a 2020 2020 2020 2020 2020 2020  ss:.            
-00031420: 7374 6f70 5072 6963 6520 3d20 7374 6f70  stopPrice = stop
-00031430: 4c6f 7373 5072 6963 650a 2020 2020 2020  LossPrice.      
-00031440: 2020 2020 2020 6966 2069 734d 6172 6b65        if isMarke
-00031450: 744f 7264 6572 3a0a 2020 2020 2020 2020  tOrder:.        
-00031460: 2020 2020 2020 2020 2320 7370 6f74 2053          # spot S
-00031470: 544f 505f 4c4f 5353 206d 6172 6b65 7420  TOP_LOSS market 
-00031480: 6f72 6465 7273 2061 7265 206e 6f74 2061  orders are not a
-00031490: 2076 616c 6964 206f 7264 6572 2074 7970   valid order typ
-000314a0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000314b0: 2020 7570 7065 7263 6173 6554 7970 6520    uppercaseType 
-000314c0: 3d20 2753 544f 505f 4d41 524b 4554 2720  = 'STOP_MARKET' 
-000314d0: 6966 206d 6172 6b65 745b 2763 6f6e 7472  if market['contr
-000314e0: 6163 7427 5d20 656c 7365 2027 5354 4f50  act'] else 'STOP
-000314f0: 5f4c 4f53 5327 0a20 2020 2020 2020 2020  _LOSS'.         
-00031500: 2020 2065 6c69 6620 6973 4c69 6d69 744f     elif isLimitO
-00031510: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
-00031520: 2020 2020 2020 7570 7065 7263 6173 6554        uppercaseT
-00031530: 7970 6520 3d20 2753 544f 5027 2069 6620  ype = 'STOP' if 
-00031540: 6d61 726b 6574 5b27 636f 6e74 7261 6374  market['contract
-00031550: 275d 2065 6c73 6520 2753 544f 505f 4c4f  '] else 'STOP_LO
-00031560: 5353 5f4c 494d 4954 270a 2020 2020 2020  SS_LIMIT'.      
-00031570: 2020 656c 6966 2069 7354 616b 6550 726f    elif isTakePro
-00031580: 6669 743a 0a20 2020 2020 2020 2020 2020  fit:.           
-00031590: 2073 746f 7050 7269 6365 203d 2074 616b   stopPrice = tak
-000315a0: 6550 726f 6669 7450 7269 6365 0a20 2020  eProfitPrice.   
-000315b0: 2020 2020 2020 2020 2069 6620 6973 4d61           if isMa
-000315c0: 726b 6574 4f72 6465 723a 0a20 2020 2020  rketOrder:.     
-000315d0: 2020 2020 2020 2020 2020 2023 2073 706f             # spo
-000315e0: 7420 5441 4b45 5f50 524f 4649 5420 6d61  t TAKE_PROFIT ma
-000315f0: 726b 6574 206f 7264 6572 7320 6172 6520  rket orders are 
-00031600: 6e6f 7420 6120 7661 6c69 6420 6f72 6465  not a valid orde
-00031610: 7220 7479 7065 0a20 2020 2020 2020 2020  r type.         
-00031620: 2020 2020 2020 2075 7070 6572 6361 7365         uppercase
-00031630: 5479 7065 203d 2027 5441 4b45 5f50 524f  Type = 'TAKE_PRO
-00031640: 4649 545f 4d41 524b 4554 2720 6966 206d  FIT_MARKET' if m
-00031650: 6172 6b65 745b 2763 6f6e 7472 6163 7427  arket['contract'
-00031660: 5d20 656c 7365 2027 5441 4b45 5f50 524f  ] else 'TAKE_PRO
-00031670: 4649 5427 0a20 2020 2020 2020 2020 2020  FIT'.           
-00031680: 2065 6c69 6620 6973 4c69 6d69 744f 7264   elif isLimitOrd
-00031690: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-000316a0: 2020 2020 7570 7065 7263 6173 6554 7970      uppercaseTyp
-000316b0: 6520 3d20 2754 414b 455f 5052 4f46 4954  e = 'TAKE_PROFIT
-000316c0: 2720 6966 206d 6172 6b65 745b 2763 6f6e  ' if market['con
-000316d0: 7472 6163 7427 5d20 656c 7365 2027 5441  tract'] else 'TA
-000316e0: 4b45 5f50 524f 4649 545f 4c49 4d49 5427  KE_PROFIT_LIMIT'
-000316f0: 0a20 2020 2020 2020 2069 6620 6d61 7267  .        if marg
-00031700: 696e 4d6f 6465 203d 3d20 2769 736f 6c61  inMode == 'isola
-00031710: 7465 6427 3a0a 2020 2020 2020 2020 2020  ted':.          
-00031720: 2020 7265 7175 6573 745b 2769 7349 736f    request['isIso
-00031730: 6c61 7465 6427 5d20 3d20 5472 7565 0a20  lated'] = True. 
-00031740: 2020 2020 2020 2069 6620 636c 6965 6e74         if client
-00031750: 4f72 6465 7249 6420 6973 204e 6f6e 653a  OrderId is None:
-00031760: 0a20 2020 2020 2020 2020 2020 2062 726f  .            bro
-00031770: 6b65 7220 3d20 7365 6c66 2e73 6166 655f  ker = self.safe_
-00031780: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
-00031790: 6e73 2c20 2762 726f 6b65 7227 290a 2020  ns, 'broker').  
-000317a0: 2020 2020 2020 2020 2020 6966 2062 726f            if bro
-000317b0: 6b65 7220 6973 206e 6f74 204e 6f6e 653a  ker is not None:
-000317c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000317d0: 2062 726f 6b65 7249 6420 3d20 7365 6c66   brokerId = self
-000317e0: 2e73 6166 655f 7374 7269 6e67 2862 726f  .safe_string(bro
-000317f0: 6b65 722c 206d 6172 6b65 7454 7970 6529  ker, marketType)
-00031800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031810: 2069 6620 6272 6f6b 6572 4964 2069 7320   if brokerId is 
-00031820: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00031830: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00031840: 7175 6573 745b 276e 6577 436c 6965 6e74  quest['newClient
-00031850: 4f72 6465 7249 6427 5d20 3d20 6272 6f6b  OrderId'] = brok
-00031860: 6572 4964 202b 2073 656c 662e 7575 6964  erId + self.uuid
-00031870: 3232 2829 0a20 2020 2020 2020 2065 6c73  22().        els
-00031880: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00031890: 6571 7565 7374 5b27 6e65 7743 6c69 656e  equest['newClien
-000318a0: 744f 7264 6572 4964 275d 203d 2063 6c69  tOrderId'] = cli
-000318b0: 656e 744f 7264 6572 4964 0a20 2020 2020  entOrderId.     
-000318c0: 2020 2069 6620 286d 6172 6b65 7454 7970     if (marketTyp
-000318d0: 6520 3d3d 2027 7370 6f74 2729 206f 7220  e == 'spot') or 
-000318e0: 286d 6172 6b65 7454 7970 6520 3d3d 2027  (marketType == '
-000318f0: 6d61 7267 696e 2729 3a0a 2020 2020 2020  margin'):.      
-00031900: 2020 2020 2020 7265 7175 6573 745b 276e        request['n
-00031910: 6577 4f72 6465 7252 6573 7054 7970 6527  ewOrderRespType'
-00031920: 5d20 3d20 7365 6c66 2e73 6166 655f 7661  ] = self.safe_va
-00031930: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
-00031940: 5b27 6e65 774f 7264 6572 5265 7370 5479  ['newOrderRespTy
-00031950: 7065 275d 2c20 7479 7065 2c20 2752 4553  pe'], type, 'RES
-00031960: 554c 5427 2920 2023 2027 4143 4b27 2066  ULT')  # 'ACK' f
-00031970: 6f72 206f 7264 6572 2069 642c 2027 5245  or order id, 'RE
-00031980: 5355 4c54 2720 666f 7220 6675 6c6c 206f  SULT' for full o
-00031990: 7264 6572 206f 7220 2746 554c 4c27 2066  rder or 'FULL' f
-000319a0: 6f72 206f 7264 6572 2077 6974 6820 6669  or order with fi
-000319b0: 6c6c 730a 2020 2020 2020 2020 656c 7365  lls.        else
-000319c0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-000319d0: 7377 6170 2c20 6675 7475 7265 7320 616e  swap, futures an
-000319e0: 6420 6f70 7469 6f6e 730a 2020 2020 2020  d options.      
-000319f0: 2020 2020 2020 7265 7175 6573 745b 276e        request['n
-00031a00: 6577 4f72 6465 7252 6573 7054 7970 6527  ewOrderRespType'
-00031a10: 5d20 3d20 2752 4553 554c 5427 2020 2320  ] = 'RESULT'  # 
-00031a20: 2241 434b 222c 2022 5245 5355 4c54 222c  "ACK", "RESULT",
-00031a30: 2064 6566 6175 6c74 2022 4143 4b22 0a20   default "ACK". 
-00031a40: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-00031a50: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
-00031a60: 2020 2020 2020 2020 6966 2074 7970 6520          if type 
-00031a70: 3d3d 2027 6d61 726b 6574 273a 0a20 2020  == 'market':.   
-00031a80: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00031a90: 7365 2049 6e76 616c 6964 4f72 6465 7228  se InvalidOrder(
-00031aa0: 7365 6c66 2e69 6420 2b20 2720 2720 2b20  self.id + ' ' + 
-00031ab0: 7479 7065 202b 2027 2069 7320 6e6f 7420  type + ' is not 
-00031ac0: 6120 7661 6c69 6420 6f72 6465 7220 7479  a valid order ty
-00031ad0: 7065 2066 6f72 2074 6865 2027 202b 2073  pe for the ' + s
-00031ae0: 796d 626f 6c20 2b20 2720 6d61 726b 6574  ymbol + ' market
-00031af0: 2729 0a20 2020 2020 2020 2020 2020 206d  ').            m
-00031b00: 6574 686f 6420 3d20 2765 6170 6950 7269  ethod = 'eapiPri
-00031b10: 7661 7465 506f 7374 4f72 6465 7227 0a20  vatePostOrder'. 
-00031b20: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00031b30: 2020 2020 2020 2020 2076 616c 6964 4f72           validOr
-00031b40: 6465 7254 7970 6573 203d 2073 656c 662e  derTypes = self.
-00031b50: 7361 6665 5f76 616c 7565 286d 6172 6b65  safe_value(marke
-00031b60: 745b 2769 6e66 6f27 5d2c 2027 6f72 6465  t['info'], 'orde
-00031b70: 7254 7970 6573 2729 0a20 2020 2020 2020  rTypes').       
-00031b80: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
-00031b90: 2e69 6e5f 6172 7261 7928 7570 7065 7263  .in_array(upperc
-00031ba0: 6173 6554 7970 652c 2076 616c 6964 4f72  aseType, validOr
-00031bb0: 6465 7254 7970 6573 293a 0a20 2020 2020  derTypes):.     
-00031bc0: 2020 2020 2020 2020 2020 2069 6620 696e             if in
-00031bd0: 6974 6961 6c55 7070 6572 6361 7365 5479  itialUppercaseTy
-00031be0: 7065 2021 3d20 7570 7065 7263 6173 6554  pe != uppercaseT
-00031bf0: 7970 653a 0a20 2020 2020 2020 2020 2020  ype:.           
-00031c00: 2020 2020 2020 2020 2072 6169 7365 2049           raise I
-00031c10: 6e76 616c 6964 4f72 6465 7228 7365 6c66  nvalidOrder(self
-00031c20: 2e69 6420 2b20 2720 7374 6f70 5072 6963  .id + ' stopPric
-00031c30: 6520 7061 7261 6d65 7465 7220 6973 206e  e parameter is n
-00031c40: 6f74 2061 6c6c 6f77 6564 2066 6f72 2027  ot allowed for '
-00031c50: 202b 2073 796d 626f 6c20 2b20 2720 2720   + symbol + ' ' 
-00031c60: 2b20 7479 7065 202b 2027 206f 7264 6572  + type + ' order
-00031c70: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
-00031c80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00031c90: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00031ca0: 6973 6520 496e 7661 6c69 644f 7264 6572  ise InvalidOrder
-00031cb0: 2873 656c 662e 6964 202b 2027 2027 202b  (self.id + ' ' +
-00031cc0: 2074 7970 6520 2b20 2720 6973 206e 6f74   type + ' is not
-00031cd0: 2061 2076 616c 6964 206f 7264 6572 2074   a valid order t
-00031ce0: 7970 6520 666f 7220 7468 6520 2720 2b20  ype for the ' + 
-00031cf0: 7379 6d62 6f6c 202b 2027 206d 6172 6b65  symbol + ' marke
-00031d00: 7427 290a 2020 2020 2020 2020 7265 7175  t').        requ
-00031d10: 6573 745b 2774 7970 6527 5d20 3d20 7570  est['type'] = up
-00031d20: 7065 7263 6173 6554 7970 650a 2020 2020  percaseType.    
-00031d30: 2020 2020 2320 6164 6469 7469 6f6e 616c      # additional
-00031d40: 2072 6571 7569 7265 6420 6669 656c 6473   required fields
-00031d50: 2064 6570 656e 6469 6e67 206f 6e20 7468   depending on th
-00031d60: 6520 6f72 6465 7220 7479 7065 0a20 2020  e order type.   
-00031d70: 2020 2020 2074 696d 6549 6e46 6f72 6365       timeInForce
-00031d80: 4973 5265 7175 6972 6564 203d 2046 616c  IsRequired = Fal
-00031d90: 7365 0a20 2020 2020 2020 2070 7269 6365  se.        price
-00031da0: 4973 5265 7175 6972 6564 203d 2046 616c  IsRequired = Fal
-00031db0: 7365 0a20 2020 2020 2020 2073 746f 7050  se.        stopP
-00031dc0: 7269 6365 4973 5265 7175 6972 6564 203d  riceIsRequired =
-00031dd0: 2046 616c 7365 0a20 2020 2020 2020 2071   False.        q
-00031de0: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
-00031df0: 6420 3d20 4661 6c73 650a 2020 2020 2020  d = False.      
-00031e00: 2020 230a 2020 2020 2020 2020 2320 7370    #.        # sp
-00031e10: 6f74 2f6d 6172 6769 6e0a 2020 2020 2020  ot/margin.      
-00031e20: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00031e30: 2020 4c49 4d49 5420 2020 2020 2020 2020    LIMIT         
-00031e40: 2020 2020 2020 2074 696d 6549 6e46 6f72         timeInFor
-00031e50: 6365 2c20 7175 616e 7469 7479 2c20 7072  ce, quantity, pr
-00031e60: 6963 650a 2020 2020 2020 2020 2320 2020  ice.        #   
-00031e70: 2020 4d41 524b 4554 2020 2020 2020 2020    MARKET        
-00031e80: 2020 2020 2020 2071 7561 6e74 6974 7920         quantity 
-00031e90: 6f72 2071 756f 7465 4f72 6465 7251 7479  or quoteOrderQty
-00031ea0: 0a20 2020 2020 2020 2023 2020 2020 2053  .        #     S
-00031eb0: 544f 505f 4c4f 5353 2020 2020 2020 2020  TOP_LOSS        
-00031ec0: 2020 2020 7175 616e 7469 7479 2c20 7374      quantity, st
-00031ed0: 6f70 5072 6963 650a 2020 2020 2020 2020  opPrice.        
-00031ee0: 2320 2020 2020 5354 4f50 5f4c 4f53 535f  #     STOP_LOSS_
-00031ef0: 4c49 4d49 5420 2020 2020 2074 696d 6549  LIMIT      timeI
-00031f00: 6e46 6f72 6365 2c20 7175 616e 7469 7479  nForce, quantity
-00031f10: 2c20 7072 6963 652c 2073 746f 7050 7269  , price, stopPri
-00031f20: 6365 0a20 2020 2020 2020 2023 2020 2020  ce.        #    
-00031f30: 2054 414b 455f 5052 4f46 4954 2020 2020   TAKE_PROFIT    
-00031f40: 2020 2020 2020 7175 616e 7469 7479 2c20        quantity, 
-00031f50: 7374 6f70 5072 6963 650a 2020 2020 2020  stopPrice.      
-00031f60: 2020 2320 2020 2020 5441 4b45 5f50 524f    #     TAKE_PRO
-00031f70: 4649 545f 4c49 4d49 5420 2020 2074 696d  FIT_LIMIT    tim
-00031f80: 6549 6e46 6f72 6365 2c20 7175 616e 7469  eInForce, quanti
-00031f90: 7479 2c20 7072 6963 652c 2073 746f 7050  ty, price, stopP
-00031fa0: 7269 6365 0a20 2020 2020 2020 2023 2020  rice.        #  
-00031fb0: 2020 204c 494d 4954 5f4d 414b 4552 2020     LIMIT_MAKER  
-00031fc0: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
-00031fd0: 2c20 7072 6963 650a 2020 2020 2020 2020  , price.        
-00031fe0: 230a 2020 2020 2020 2020 2320 6675 7475  #.        # futu
-00031ff0: 7265 730a 2020 2020 2020 2020 230a 2020  res.        #.  
-00032000: 2020 2020 2020 2320 2020 2020 4c49 4d49        #     LIMI
-00032010: 5420 2020 2020 2020 2020 2020 2020 2020  T               
-00032020: 2074 696d 6549 6e46 6f72 6365 2c20 7175   timeInForce, qu
-00032030: 616e 7469 7479 2c20 7072 6963 650a 2020  antity, price.  
-00032040: 2020 2020 2020 2320 2020 2020 4d41 524b        #     MARK
-00032050: 4554 2020 2020 2020 2020 2020 2020 2020  ET              
-00032060: 2071 7561 6e74 6974 790a 2020 2020 2020   quantity.      
-00032070: 2020 2320 2020 2020 5354 4f50 2f54 414b    #     STOP/TAK
-00032080: 455f 5052 4f46 4954 2020 2020 2071 7561  E_PROFIT     qua
-00032090: 6e74 6974 792c 2070 7269 6365 2c20 7374  ntity, price, st
-000320a0: 6f70 5072 6963 650a 2020 2020 2020 2020  opPrice.        
-000320b0: 2320 2020 2020 5354 4f50 5f4d 4152 4b45  #     STOP_MARKE
-000320c0: 5420 2020 2020 2020 2020 2073 746f 7050  T          stopP
-000320d0: 7269 6365 0a20 2020 2020 2020 2023 2020  rice.        #  
-000320e0: 2020 2054 414b 455f 5052 4f46 4954 5f4d     TAKE_PROFIT_M
-000320f0: 4152 4b45 5420 2020 7374 6f70 5072 6963  ARKET   stopPric
-00032100: 650a 2020 2020 2020 2020 2320 2020 2020  e.        #     
-00032110: 5452 4149 4c49 4e47 5f53 544f 505f 4d41  TRAILING_STOP_MA
-00032120: 524b 4554 2063 616c 6c62 6163 6b52 6174  RKET callbackRat
-00032130: 650a 2020 2020 2020 2020 230a 2020 2020  e.        #.    
-00032140: 2020 2020 6966 2075 7070 6572 6361 7365      if uppercase
-00032150: 5479 7065 203d 3d20 274d 4152 4b45 5427  Type == 'MARKET'
-00032160: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00032170: 206d 6172 6b65 745b 2773 706f 7427 5d3a   market['spot']:
-00032180: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032190: 2071 756f 7465 4f72 6465 7251 7479 203d   quoteOrderQty =
-000321a0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-000321b0: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
-000321c0: 7175 6f74 654f 7264 6572 5174 7927 2c20  quoteOrderQty', 
-000321d0: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
-000321e0: 2020 2020 2020 6966 2071 756f 7465 4f72        if quoteOr
-000321f0: 6465 7251 7479 3a0a 2020 2020 2020 2020  derQty:.        
-00032200: 2020 2020 2020 2020 2020 2020 7175 6f74              quot
-00032210: 654f 7264 6572 5174 794e 6577 203d 2073  eOrderQtyNew = s
-00032220: 656c 662e 7361 6665 5f76 616c 7565 5f32  elf.safe_value_2
-00032230: 2871 7565 7279 2c20 2771 756f 7465 4f72  (query, 'quoteOr
-00032240: 6465 7251 7479 272c 2027 636f 7374 2729  derQty', 'cost')
-00032250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032260: 2020 2020 2070 7265 6369 7369 6f6e 203d       precision =
-00032270: 206d 6172 6b65 745b 2770 7265 6369 7369   market['precisi
-00032280: 6f6e 275d 5b27 7072 6963 6527 5d0a 2020  on']['price'].  
-00032290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000322a0: 2020 6966 2071 756f 7465 4f72 6465 7251    if quoteOrderQ
-000322b0: 7479 4e65 7720 6973 206e 6f74 204e 6f6e  tyNew is not Non
-000322c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000322d0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-000322e0: 7374 5b27 7175 6f74 654f 7264 6572 5174  st['quoteOrderQt
-000322f0: 7927 5d20 3d20 7365 6c66 2e64 6563 696d  y'] = self.decim
-00032300: 616c 5f74 6f5f 7072 6563 6973 696f 6e28  al_to_precision(
-00032310: 7175 6f74 654f 7264 6572 5174 794e 6577  quoteOrderQtyNew
-00032320: 2c20 5452 554e 4341 5445 2c20 7072 6563  , TRUNCATE, prec
-00032330: 6973 696f 6e2c 2073 656c 662e 7072 6563  ision, self.prec
-00032340: 6973 696f 6e4d 6f64 6529 0a20 2020 2020  isionMode).     
-00032350: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00032360: 6c69 6620 7072 6963 6520 6973 206e 6f74  lif price is not
-00032370: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00032380: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00032390: 6d6f 756e 7453 7472 696e 6720 3d20 7365  mountString = se
-000323a0: 6c66 2e6e 756d 6265 725f 746f 5f73 7472  lf.number_to_str
-000323b0: 696e 6728 616d 6f75 6e74 290a 2020 2020  ing(amount).    
-000323c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000323d0: 2020 2020 7072 6963 6553 7472 696e 6720      priceString 
-000323e0: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
-000323f0: 5f73 7472 696e 6728 7072 6963 6529 0a20  _string(price). 
-00032400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032410: 2020 2020 2020 2071 756f 7465 4f72 6465         quoteOrde
-00032420: 7251 7561 6e74 6974 7920 3d20 5072 6563  rQuantity = Prec
-00032430: 6973 652e 7374 7269 6e67 5f6d 756c 2861  ise.string_mul(a
-00032440: 6d6f 756e 7453 7472 696e 672c 2070 7269  mountString, pri
-00032450: 6365 5374 7269 6e67 290a 2020 2020 2020  ceString).      
-00032460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032470: 2020 7265 7175 6573 745b 2771 756f 7465    request['quote
-00032480: 4f72 6465 7251 7479 275d 203d 2073 656c  OrderQty'] = sel
-00032490: 662e 6465 6369 6d61 6c5f 746f 5f70 7265  f.decimal_to_pre
-000324a0: 6369 7369 6f6e 2871 756f 7465 4f72 6465  cision(quoteOrde
-000324b0: 7251 7561 6e74 6974 792c 2054 5255 4e43  rQuantity, TRUNC
-000324c0: 4154 452c 2070 7265 6369 7369 6f6e 2c20  ATE, precision, 
-000324d0: 7365 6c66 2e70 7265 6369 7369 6f6e 4d6f  self.precisionMo
-000324e0: 6465 290a 2020 2020 2020 2020 2020 2020  de).            
-000324f0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00032500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032510: 2020 2020 2020 7175 616e 7469 7479 4973        quantityIs
-00032520: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-00032530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032540: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00032550: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
-00032560: 7479 4973 5265 7175 6972 6564 203d 2054  tyIsRequired = T
-00032570: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-00032580: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00032590: 2020 2020 2020 7175 616e 7469 7479 4973        quantityIs
-000325a0: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-000325b0: 2020 2020 2020 2020 656c 6966 2075 7070          elif upp
-000325c0: 6572 6361 7365 5479 7065 203d 3d20 274c  ercaseType == 'L
-000325d0: 494d 4954 273a 0a20 2020 2020 2020 2020  IMIT':.         
-000325e0: 2020 2070 7269 6365 4973 5265 7175 6972     priceIsRequir
-000325f0: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
-00032600: 2020 2020 2020 7469 6d65 496e 466f 7263        timeInForc
-00032610: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
-00032620: 7565 0a20 2020 2020 2020 2020 2020 2071  ue.            q
-00032630: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
-00032640: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
-00032650: 2065 6c69 6620 2875 7070 6572 6361 7365   elif (uppercase
-00032660: 5479 7065 203d 3d20 2753 544f 505f 4c4f  Type == 'STOP_LO
-00032670: 5353 2729 206f 7220 2875 7070 6572 6361  SS') or (upperca
-00032680: 7365 5479 7065 203d 3d20 2754 414b 455f  seType == 'TAKE_
-00032690: 5052 4f46 4954 2729 3a0a 2020 2020 2020  PROFIT'):.      
-000326a0: 2020 2020 2020 7374 6f70 5072 6963 6549        stopPriceI
-000326b0: 7352 6571 7569 7265 6420 3d20 5472 7565  sRequired = True
-000326c0: 0a20 2020 2020 2020 2020 2020 2071 7561  .            qua
-000326d0: 6e74 6974 7949 7352 6571 7569 7265 6420  ntityIsRequired 
-000326e0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-000326f0: 2020 2069 6620 6d61 726b 6574 5b27 6c69     if market['li
-00032700: 6e65 6172 275d 206f 7220 6d61 726b 6574  near'] or market
-00032710: 5b27 696e 7665 7273 6527 5d3a 0a20 2020  ['inverse']:.   
-00032720: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00032730: 6365 4973 5265 7175 6972 6564 203d 2054  ceIsRequired = T
-00032740: 7275 650a 2020 2020 2020 2020 656c 6966  rue.        elif
-00032750: 2028 7570 7065 7263 6173 6554 7970 6520   (uppercaseType 
-00032760: 3d3d 2027 5354 4f50 5f4c 4f53 535f 4c49  == 'STOP_LOSS_LI
-00032770: 4d49 5427 2920 6f72 2028 7570 7065 7263  MIT') or (upperc
-00032780: 6173 6554 7970 6520 3d3d 2027 5441 4b45  aseType == 'TAKE
-00032790: 5f50 524f 4649 545f 4c49 4d49 5427 293a  _PROFIT_LIMIT'):
-000327a0: 0a20 2020 2020 2020 2020 2020 2071 7561  .            qua
-000327b0: 6e74 6974 7949 7352 6571 7569 7265 6420  ntityIsRequired 
-000327c0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-000327d0: 2020 2073 746f 7050 7269 6365 4973 5265     stopPriceIsRe
-000327e0: 7175 6972 6564 203d 2054 7275 650a 2020  quired = True.  
-000327f0: 2020 2020 2020 2020 2020 7072 6963 6549            priceI
-00032800: 7352 6571 7569 7265 6420 3d20 5472 7565  sRequired = True
-00032810: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
-00032820: 6549 6e46 6f72 6365 4973 5265 7175 6972  eInForceIsRequir
-00032830: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
-00032840: 2020 656c 6966 2075 7070 6572 6361 7365    elif uppercase
-00032850: 5479 7065 203d 3d20 274c 494d 4954 5f4d  Type == 'LIMIT_M
-00032860: 414b 4552 273a 0a20 2020 2020 2020 2020  AKER':.         
-00032870: 2020 2070 7269 6365 4973 5265 7175 6972     priceIsRequir
-00032880: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
-00032890: 2020 2020 2020 7175 616e 7469 7479 4973        quantityIs
-000328a0: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
-000328b0: 2020 2020 2020 2020 656c 6966 2075 7070          elif upp
-000328c0: 6572 6361 7365 5479 7065 203d 3d20 2753  ercaseType == 'S
-000328d0: 544f 5027 3a0a 2020 2020 2020 2020 2020  TOP':.          
-000328e0: 2020 7175 616e 7469 7479 4973 5265 7175    quantityIsRequ
-000328f0: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
-00032900: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
-00032910: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
-00032920: 7565 0a20 2020 2020 2020 2020 2020 2070  ue.            p
-00032930: 7269 6365 4973 5265 7175 6972 6564 203d  riceIsRequired =
-00032940: 2054 7275 650a 2020 2020 2020 2020 656c   True.        el
-00032950: 6966 2028 7570 7065 7263 6173 6554 7970  if (uppercaseTyp
-00032960: 6520 3d3d 2027 5354 4f50 5f4d 4152 4b45  e == 'STOP_MARKE
-00032970: 5427 2920 6f72 2028 7570 7065 7263 6173  T') or (uppercas
-00032980: 6554 7970 6520 3d3d 2027 5441 4b45 5f50  eType == 'TAKE_P
-00032990: 524f 4649 545f 4d41 524b 4554 2729 3a0a  ROFIT_MARKET'):.
-000329a0: 2020 2020 2020 2020 2020 2020 636c 6f73              clos
-000329b0: 6550 6f73 6974 696f 6e20 3d20 7365 6c66  ePosition = self
-000329c0: 2e73 6166 655f 7661 6c75 6528 7175 6572  .safe_value(quer
-000329d0: 792c 2027 636c 6f73 6550 6f73 6974 696f  y, 'closePositio
-000329e0: 6e27 290a 2020 2020 2020 2020 2020 2020  n').            
-000329f0: 6966 2063 6c6f 7365 506f 7369 7469 6f6e  if closePosition
-00032a00: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00032a10: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
-00032a20: 7479 4973 5265 7175 6972 6564 203d 2054  tyIsRequired = T
-00032a30: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-00032a40: 7374 6f70 5072 6963 6549 7352 6571 7569  stopPriceIsRequi
-00032a50: 7265 6420 3d20 5472 7565 0a20 2020 2020  red = True.     
-00032a60: 2020 2065 6c69 6620 7570 7065 7263 6173     elif uppercas
-00032a70: 6554 7970 6520 3d3d 2027 5452 4149 4c49  eType == 'TRAILI
-00032a80: 4e47 5f53 544f 505f 4d41 524b 4554 273a  NG_STOP_MARKET':
-00032a90: 0a20 2020 2020 2020 2020 2020 2071 7561  .            qua
-00032aa0: 6e74 6974 7949 7352 6571 7569 7265 6420  ntityIsRequired 
-00032ab0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-00032ac0: 2020 2063 616c 6c62 6163 6b52 6174 6520     callbackRate 
-00032ad0: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-00032ae0: 6572 2871 7565 7279 2c20 2763 616c 6c62  er(query, 'callb
-00032af0: 6163 6b52 6174 6527 290a 2020 2020 2020  ackRate').      
-00032b00: 2020 2020 2020 6966 2063 616c 6c62 6163        if callbac
-00032b10: 6b52 6174 6520 6973 204e 6f6e 653a 0a20  kRate is None:. 
-00032b20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00032b30: 6169 7365 2049 6e76 616c 6964 4f72 6465  aise InvalidOrde
-00032b40: 7228 7365 6c66 2e69 6420 2b20 2720 6372  r(self.id + ' cr
-00032b50: 6561 7465 4f72 6465 7228 2920 7265 7175  eateOrder() requ
-00032b60: 6972 6573 2061 2063 616c 6c62 6163 6b52  ires a callbackR
-00032b70: 6174 6520 6578 7472 6120 7061 7261 6d20  ate extra param 
-00032b80: 666f 7220 6120 2720 2b20 7479 7065 202b  for a ' + type +
-00032b90: 2027 206f 7264 6572 2729 0a20 2020 2020   ' order').     
-00032ba0: 2020 2069 6620 7175 616e 7469 7479 4973     if quantityIs
-00032bb0: 5265 7175 6972 6564 3a0a 2020 2020 2020  Required:.      
-00032bc0: 2020 2020 2020 7265 7175 6573 745b 2771        request['q
-00032bd0: 7561 6e74 6974 7927 5d20 3d20 7365 6c66  uantity'] = self
-00032be0: 2e61 6d6f 756e 745f 746f 5f70 7265 6369  .amount_to_preci
-00032bf0: 7369 6f6e 2873 796d 626f 6c2c 2061 6d6f  sion(symbol, amo
-00032c00: 756e 7429 0a20 2020 2020 2020 2069 6620  unt).        if 
-00032c10: 7072 6963 6549 7352 6571 7569 7265 643a  priceIsRequired:
-00032c20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00032c30: 7072 6963 6520 6973 204e 6f6e 653a 0a20  price is None:. 
-00032c40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00032c50: 6169 7365 2049 6e76 616c 6964 4f72 6465  aise InvalidOrde
-00032c60: 7228 7365 6c66 2e69 6420 2b20 2720 6372  r(self.id + ' cr
-00032c70: 6561 7465 4f72 6465 7228 2920 7265 7175  eateOrder() requ
-00032c80: 6972 6573 2061 2070 7269 6365 2061 7267  ires a price arg
-00032c90: 756d 656e 7420 666f 7220 6120 2720 2b20  ument for a ' + 
-00032ca0: 7479 7065 202b 2027 206f 7264 6572 2729  type + ' order')
-00032cb0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00032cc0: 7565 7374 5b27 7072 6963 6527 5d20 3d20  uest['price'] = 
-00032cd0: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
-00032ce0: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-00032cf0: 7072 6963 6529 0a20 2020 2020 2020 2069  price).        i
-00032d00: 6620 7469 6d65 496e 466f 7263 6549 7352  f timeInForceIsR
-00032d10: 6571 7569 7265 643a 0a20 2020 2020 2020  equired:.       
-00032d20: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
-00032d30: 6d65 496e 466f 7263 6527 5d20 3d20 7365  meInForce'] = se
-00032d40: 6c66 2e6f 7074 696f 6e73 5b27 6465 6661  lf.options['defa
-00032d50: 756c 7454 696d 6549 6e46 6f72 6365 275d  ultTimeInForce']
-00032d60: 2020 2320 2747 5443 2720 3d20 476f 6f64    # 'GTC' = Good
-00032d70: 2054 6f20 4361 6e63 656c 2864 6566 6175   To Cancel(defau
-00032d80: 6c74 292c 2027 494f 4327 203d 2049 6d6d  lt), 'IOC' = Imm
-00032d90: 6564 6961 7465 204f 7220 4361 6e63 656c  ediate Or Cancel
-00032da0: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-00032db0: 6574 5b27 636f 6e74 7261 6374 275d 2061  et['contract'] a
-00032dc0: 6e64 2070 6f73 744f 6e6c 793a 0a20 2020  nd postOnly:.   
-00032dd0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00032de0: 5b27 7469 6d65 496e 466f 7263 6527 5d20  ['timeInForce'] 
-00032df0: 3d20 2747 5458 270a 2020 2020 2020 2020  = 'GTX'.        
-00032e00: 6966 2073 746f 7050 7269 6365 4973 5265  if stopPriceIsRe
-00032e10: 7175 6972 6564 3a0a 2020 2020 2020 2020  quired:.        
-00032e20: 2020 2020 6966 206d 6172 6b65 745b 2763      if market['c
-00032e30: 6f6e 7472 6163 7427 5d3a 0a20 2020 2020  ontract']:.     
-00032e40: 2020 2020 2020 2020 2020 2069 6620 7374             if st
-00032e50: 6f70 5072 6963 6520 6973 204e 6f6e 653a  opPrice is None:
-00032e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032e70: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
-00032e80: 6964 4f72 6465 7228 7365 6c66 2e69 6420  idOrder(self.id 
-00032e90: 2b20 2720 6372 6561 7465 4f72 6465 7228  + ' createOrder(
-00032ea0: 2920 7265 7175 6972 6573 2061 2073 746f  ) requires a sto
-00032eb0: 7050 7269 6365 2065 7874 7261 2070 6172  pPrice extra par
-00032ec0: 616d 2066 6f72 2061 2027 202b 2074 7970  am for a ' + typ
-00032ed0: 6520 2b20 2720 6f72 6465 7227 290a 2020  e + ' order').  
-00032ee0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00032ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032f00: 2320 6368 6563 6b20 666f 7220 6465 6c74  # check for delt
-00032f10: 6120 7072 6963 650a 2020 2020 2020 2020  a price.        
-00032f20: 2020 2020 2020 2020 7472 6169 6c69 6e67          trailing
-00032f30: 4465 6c74 6120 3d20 7365 6c66 2e73 6166  Delta = self.saf
-00032f40: 655f 7661 6c75 6528 7061 7261 6d73 2c20  e_value(params, 
-00032f50: 2774 7261 696c 696e 6744 656c 7461 2729  'trailingDelta')
-00032f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032f70: 2069 6620 7472 6169 6c69 6e67 4465 6c74   if trailingDelt
-00032f80: 6120 6973 204e 6f6e 6520 616e 6420 7374  a is None and st
-00032f90: 6f70 5072 6963 6520 6973 204e 6f6e 653a  opPrice is None:
-00032fa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032fb0: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
-00032fc0: 6964 4f72 6465 7228 7365 6c66 2e69 6420  idOrder(self.id 
-00032fd0: 2b20 2720 6372 6561 7465 4f72 6465 7228  + ' createOrder(
-00032fe0: 2920 7265 7175 6972 6573 2061 2073 746f  ) requires a sto
-00032ff0: 7050 7269 6365 206f 7220 7472 6169 6c69  pPrice or traili
-00033000: 6e67 4465 6c74 6120 7061 7261 6d20 666f  ngDelta param fo
-00033010: 7220 6120 2720 2b20 7479 7065 202b 2027  r a ' + type + '
-00033020: 206f 7264 6572 2729 0a20 2020 2020 2020   order').       
-00033030: 2020 2020 2069 6620 7374 6f70 5072 6963       if stopPric
-00033040: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00033050: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00033060: 6571 7565 7374 5b27 7374 6f70 5072 6963  equest['stopPric
-00033070: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
-00033080: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-00033090: 6d62 6f6c 2c20 7374 6f70 5072 6963 6529  mbol, stopPrice)
-000330a0: 0a20 2020 2020 2020 2023 2072 656d 6f76  .        # remov
-000330b0: 6520 7469 6d65 496e 466f 7263 6520 6672  e timeInForce fr
-000330c0: 6f6d 2070 6172 616d 7320 6265 6361 7573  om params becaus
-000330d0: 6520 504f 2069 7320 6f6e 6c79 2075 7365  e PO is only use
-000330e0: 6420 6279 2073 656c 662e 6973 5f70 6f73  d by self.is_pos
-000330f0: 745f 6f6e 6c79 616e 6420 6974 2773 206e  t_onlyand it's n
-00033100: 6f74 2061 2076 616c 6964 2076 616c 7565  ot a valid value
-00033110: 2066 6f72 2042 696e 616e 6365 0a20 2020   for Binance.   
-00033120: 2020 2020 2069 6620 7365 6c66 2e73 6166       if self.saf
-00033130: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
-00033140: 2027 7469 6d65 496e 466f 7263 6527 2920   'timeInForce') 
-00033150: 3d3d 2027 504f 273a 0a20 2020 2020 2020  == 'PO':.       
-00033160: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-00033170: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-00033180: 5b27 7469 6d65 496e 466f 7263 6527 5d29  ['timeInForce'])
-00033190: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-000331a0: 5061 7261 6d73 203d 2073 656c 662e 6f6d  Params = self.om
-000331b0: 6974 2870 6172 616d 732c 205b 2771 756f  it(params, ['quo
-000331c0: 7465 4f72 6465 7251 7479 272c 2027 636f  teOrderQty', 'co
-000331d0: 7374 272c 2027 7374 6f70 5072 6963 6527  st', 'stopPrice'
-000331e0: 2c20 2774 6573 7427 2c20 2774 7970 6527  , 'test', 'type'
-000331f0: 2c20 276e 6577 436c 6965 6e74 4f72 6465  , 'newClientOrde
-00033200: 7249 6427 2c20 2763 6c69 656e 744f 7264  rId', 'clientOrd
-00033210: 6572 4964 272c 2027 706f 7374 4f6e 6c79  erId', 'postOnly
-00033220: 275d 290a 2020 2020 2020 2020 7265 7370  ']).        resp
-00033230: 6f6e 7365 203d 2067 6574 6174 7472 2873  onse = getattr(s
-00033240: 656c 662c 206d 6574 686f 6429 2873 656c  elf, method)(sel
-00033250: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-00033260: 2c20 7265 7175 6573 7450 6172 616d 7329  , requestParams)
-00033270: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00033280: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-00033290: 7228 7265 7370 6f6e 7365 2c20 6d61 726b  r(response, mark
-000332a0: 6574 290a 0a20 2020 2064 6566 2066 6574  et)..    def fet
-000332b0: 6368 5f6f 7264 6572 2873 656c 662c 2069  ch_order(self, i
-000332c0: 643a 2073 7472 2c20 7379 6d62 6f6c 3a20  d: str, symbol: 
-000332d0: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-000332e0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-000332f0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00033300: 2020 2020 2020 6665 7463 6865 7320 696e        fetches in
-00033310: 666f 726d 6174 696f 6e20 6f6e 2061 6e20  formation on an 
-00033320: 6f72 6465 7220 6d61 6465 2062 7920 7468  order made by th
-00033330: 6520 7573 6572 0a20 2020 2020 2020 203a  e user.        :
-00033340: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
-00033350: 3a20 756e 6966 6965 6420 7379 6d62 6f6c  : unified symbol
-00033360: 206f 6620 7468 6520 6d61 726b 6574 2074   of the market t
-00033370: 6865 206f 7264 6572 2077 6173 206d 6164  he order was mad
-00033380: 6520 696e 0a20 2020 2020 2020 203a 7061  e in.        :pa
-00033390: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-000333a0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-000333b0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-000333c0: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-000333d0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-000333e0: 7061 7261 6d20 7374 727c 4e6f 6e65 2070  param str|None p
-000333f0: 6172 616d 735b 276d 6172 6769 6e4d 6f64  arams['marginMod
-00033400: 6527 5d3a 2027 6372 6f73 7327 206f 7220  e']: 'cross' or 
-00033410: 2769 736f 6c61 7465 6427 2c20 666f 7220  'isolated', for 
-00033420: 7370 6f74 206d 6172 6769 6e20 7472 6164  spot margin trad
-00033430: 696e 670a 2020 2020 2020 2020 3a72 6574  ing.        :ret
-00033440: 7572 6e73 2064 6963 743a 2041 6e20 606f  urns dict: An `o
-00033450: 7264 6572 2073 7472 7563 7475 7265 203c  rder structure <
-00033460: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00033470: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
-00033480: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
-00033490: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000334a0: 2020 7365 6c66 2e63 6865 636b 5f72 6571    self.check_req
-000334b0: 7569 7265 645f 7379 6d62 6f6c 2827 6665  uired_symbol('fe
-000334c0: 7463 684f 7264 6572 272c 2073 796d 626f  tchOrder', symbo
-000334d0: 6c29 0a20 2020 2020 2020 2073 656c 662e  l).        self.
-000334e0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-000334f0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-00033500: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-00033510: 6f6c 290a 2020 2020 2020 2020 6465 6661  ol).        defa
-00033520: 756c 7454 7970 6520 3d20 7365 6c66 2e73  ultType = self.s
-00033530: 6166 655f 7374 7269 6e67 5f32 2873 656c  afe_string_2(sel
-00033540: 662e 6f70 7469 6f6e 732c 2027 6665 7463  f.options, 'fetc
-00033550: 684f 7264 6572 272c 2027 6465 6661 756c  hOrder', 'defaul
-00033560: 7454 7970 6527 2c20 2773 706f 7427 290a  tType', 'spot').
-00033570: 2020 2020 2020 2020 7479 7065 203d 2073          type = s
-00033580: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00033590: 7061 7261 6d73 2c20 2774 7970 6527 2c20  params, 'type', 
-000335a0: 6465 6661 756c 7454 7970 6529 0a20 2020  defaultType).   
-000335b0: 2020 2020 206d 6172 6769 6e4d 6f64 652c       marginMode,
-000335c0: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
-000335d0: 6e64 6c65 5f6d 6172 6769 6e5f 6d6f 6465  ndle_margin_mode
-000335e0: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
-000335f0: 6368 4f72 6465 7227 2c20 7061 7261 6d73  chOrder', params
-00033600: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-00033610: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-00033620: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
-00033630: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
-00033640: 2020 7d0a 2020 2020 2020 2020 6d65 7468    }.        meth
-00033650: 6f64 203d 2027 7072 6976 6174 6547 6574  od = 'privateGet
-00033660: 4f72 6465 7227 0a20 2020 2020 2020 2069  Order'.        i
-00033670: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
-00033680: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00033690: 6d65 7468 6f64 203d 2027 6561 7069 5072  method = 'eapiPr
-000336a0: 6976 6174 6547 6574 4f72 6465 7227 0a20  ivateGetOrder'. 
-000336b0: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
-000336c0: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
-000336d0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-000336e0: 203d 2027 6661 7069 5072 6976 6174 6547   = 'fapiPrivateG
-000336f0: 6574 4f72 6465 7227 0a20 2020 2020 2020  etOrder'.       
-00033700: 2065 6c69 6620 6d61 726b 6574 5b27 696e   elif market['in
-00033710: 7665 7273 6527 5d3a 0a20 2020 2020 2020  verse']:.       
-00033720: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
-00033730: 6170 6950 7269 7661 7465 4765 744f 7264  apiPrivateGetOrd
-00033740: 6572 270a 2020 2020 2020 2020 656c 6966  er'.        elif
-00033750: 2074 7970 6520 3d3d 2027 6d61 7267 696e   type == 'margin
-00033760: 2720 6f72 206d 6172 6769 6e4d 6f64 6520  ' or marginMode 
-00033770: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00033780: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-00033790: 3d20 2773 6170 6947 6574 4d61 7267 696e  = 'sapiGetMargin
-000337a0: 4f72 6465 7227 0a20 2020 2020 2020 2020  Order'.         
-000337b0: 2020 2069 6620 6d61 7267 696e 4d6f 6465     if marginMode
-000337c0: 203d 3d20 2769 736f 6c61 7465 6427 3a0a   == 'isolated':.
-000337d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000337e0: 7265 7175 6573 745b 2769 7349 736f 6c61  request['isIsola
-000337f0: 7465 6427 5d20 3d20 5472 7565 0a20 2020  ted'] = True.   
-00033800: 2020 2020 2063 6c69 656e 744f 7264 6572       clientOrder
-00033810: 4964 203d 2073 656c 662e 7361 6665 5f76  Id = self.safe_v
-00033820: 616c 7565 5f32 2870 6172 616d 732c 2027  alue_2(params, '
-00033830: 6f72 6967 436c 6965 6e74 4f72 6465 7249  origClientOrderI
-00033840: 6427 2c20 2763 6c69 656e 744f 7264 6572  d', 'clientOrder
-00033850: 4964 2729 0a20 2020 2020 2020 2069 6620  Id').        if 
-00033860: 636c 6965 6e74 4f72 6465 7249 6420 6973  clientOrderId is
-00033870: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00033880: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-00033890: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
-000338a0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-000338b0: 6573 745b 2763 6c69 656e 744f 7264 6572  est['clientOrder
-000338c0: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
-000338d0: 6572 4964 0a20 2020 2020 2020 2020 2020  erId.           
-000338e0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000338f0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00033900: 6f72 6967 436c 6965 6e74 4f72 6465 7249  origClientOrderI
-00033910: 6427 5d20 3d20 636c 6965 6e74 4f72 6465  d'] = clientOrde
-00033920: 7249 640a 2020 2020 2020 2020 656c 7365  rId.        else
-00033930: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00033940: 7175 6573 745b 276f 7264 6572 4964 275d  quest['orderId']
-00033950: 203d 2069 640a 2020 2020 2020 2020 7265   = id.        re
-00033960: 7175 6573 7450 6172 616d 7320 3d20 7365  questParams = se
-00033970: 6c66 2e6f 6d69 7428 7175 6572 792c 205b  lf.omit(query, [
-00033980: 2774 7970 6527 2c20 2763 6c69 656e 744f  'type', 'clientO
-00033990: 7264 6572 4964 272c 2027 6f72 6967 436c  rderId', 'origCl
-000339a0: 6965 6e74 4f72 6465 7249 6427 5d29 0a20  ientOrderId']). 
-000339b0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000339c0: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
-000339d0: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
-000339e0: 656e 6428 7265 7175 6573 742c 2072 6571  end(request, req
-000339f0: 7565 7374 5061 7261 6d73 2929 0a20 2020  uestParams)).   
-00033a00: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00033a10: 2e70 6172 7365 5f6f 7264 6572 2872 6573  .parse_order(res
-00033a20: 706f 6e73 652c 206d 6172 6b65 7429 0a0a  ponse, market)..
-00033a30: 2020 2020 6465 6620 6665 7463 685f 6f72      def fetch_or
-00033a40: 6465 7273 2873 656c 662c 2073 796d 626f  ders(self, symbo
-00033a50: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00033a60: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-00033a70: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-00033a80: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-00033a90: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-00033aa0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00033ab0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00033ac0: 2020 2066 6574 6368 6573 2069 6e66 6f72     fetches infor
-00033ad0: 6d61 7469 6f6e 206f 6e20 6d75 6c74 6970  mation on multip
-00033ae0: 6c65 206f 7264 6572 7320 6d61 6465 2062  le orders made b
-00033af0: 7920 7468 6520 7573 6572 0a20 2020 2020  y the user.     
-00033b00: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
-00033b10: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-00033b20: 726b 6574 2073 796d 626f 6c20 6f66 2074  rket symbol of t
-00033b30: 6865 206d 6172 6b65 7420 6f72 6465 7273  he market orders
-00033b40: 2077 6572 6520 6d61 6465 2069 6e0a 2020   were made in.  
-00033b50: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-00033b60: 7c4e 6f6e 6520 7369 6e63 653a 2074 6865  |None since: the
-00033b70: 2065 6172 6c69 6573 7420 7469 6d65 2069   earliest time i
-00033b80: 6e20 6d73 2074 6f20 6665 7463 6820 6f72  n ms to fetch or
-00033b90: 6465 7273 2066 6f72 0a20 2020 2020 2020  ders for.       
-00033ba0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-00033bb0: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
-00033bc0: 6d75 6d20 6e75 6d62 6572 206f 6620 6f72  mum number of or
-00033bd0: 6465 7220 7374 7275 6374 7572 6573 2074  der structures t
-00033be0: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
-00033bf0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00033c00: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-00033c10: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00033c20: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-00033c30: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00033c40: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
-00033c50: 4e6f 6e65 2070 6172 616d 735b 276d 6172  None params['mar
-00033c60: 6769 6e4d 6f64 6527 5d3a 2027 6372 6f73  ginMode']: 'cros
-00033c70: 7327 206f 7220 2769 736f 6c61 7465 6427  s' or 'isolated'
-00033c80: 2c20 666f 7220 7370 6f74 206d 6172 6769  , for spot margi
-00033c90: 6e20 7472 6164 696e 670a 2020 2020 2020  n trading.      
-00033ca0: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
-00033cb0: 5d3a 2061 206c 6973 7420 6f66 2060 6f72  ]: a list of `or
-00033cc0: 6465 7220 7374 7275 6374 7572 6573 203c  der structures <
-00033cd0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00033ce0: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
-00033cf0: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
-00033d00: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00033d10: 2020 7365 6c66 2e63 6865 636b 5f72 6571    self.check_req
-00033d20: 7569 7265 645f 7379 6d62 6f6c 2827 6665  uired_symbol('fe
-00033d30: 7463 684f 7264 6572 7327 2c20 7379 6d62  tchOrders', symb
-00033d40: 6f6c 290a 2020 2020 2020 2020 7365 6c66  ol).        self
-00033d50: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00033d60: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00033d70: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00033d80: 626f 6c29 0a20 2020 2020 2020 2064 6566  bol).        def
-00033d90: 6175 6c74 5479 7065 203d 2073 656c 662e  aultType = self.
-00033da0: 7361 6665 5f73 7472 696e 675f 3228 7365  safe_string_2(se
-00033db0: 6c66 2e6f 7074 696f 6e73 2c20 2766 6574  lf.options, 'fet
-00033dc0: 6368 4f72 6465 7273 272c 2027 6465 6661  chOrders', 'defa
-00033dd0: 756c 7454 7970 6527 2c20 2773 706f 7427  ultType', 'spot'
-00033de0: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
-00033df0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00033e00: 6728 7061 7261 6d73 2c20 2774 7970 6527  g(params, 'type'
-00033e10: 2c20 6465 6661 756c 7454 7970 6529 0a20  , defaultType). 
-00033e20: 2020 2020 2020 206d 6172 6769 6e4d 6f64         marginMod
-00033e30: 652c 2071 7565 7279 203d 2073 656c 662e  e, query = self.
-00033e40: 6861 6e64 6c65 5f6d 6172 6769 6e5f 6d6f  handle_margin_mo
-00033e50: 6465 5f61 6e64 5f70 6172 616d 7328 2766  de_and_params('f
-00033e60: 6574 6368 4f72 6465 7273 272c 2070 6172  etchOrders', par
-00033e70: 616d 7329 0a20 2020 2020 2020 2072 6571  ams).        req
-00033e80: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-00033e90: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
-00033ea0: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-00033eb0: 2020 2020 207d 0a20 2020 2020 2020 206d       }.        m
-00033ec0: 6574 686f 6420 3d20 2770 7269 7661 7465  ethod = 'private
-00033ed0: 4765 7441 6c6c 4f72 6465 7273 270a 2020  GetAllOrders'.  
-00033ee0: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-00033ef0: 276f 7074 696f 6e27 5d3a 0a20 2020 2020  'option']:.     
-00033f00: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00033f10: 2765 6170 6950 7269 7661 7465 4765 7448  'eapiPrivateGetH
-00033f20: 6973 746f 7279 4f72 6465 7273 270a 2020  istoryOrders'.  
-00033f30: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-00033f40: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
-00033f50: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-00033f60: 3d20 2766 6170 6950 7269 7661 7465 4765  = 'fapiPrivateGe
-00033f70: 7441 6c6c 4f72 6465 7273 270a 2020 2020  tAllOrders'.    
-00033f80: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-00033f90: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
-00033fa0: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00033fb0: 2027 6461 7069 5072 6976 6174 6547 6574   'dapiPrivateGet
-00033fc0: 416c 6c4f 7264 6572 7327 0a20 2020 2020  AllOrders'.     
-00033fd0: 2020 2065 6c69 6620 7479 7065 203d 3d20     elif type == 
-00033fe0: 276d 6172 6769 6e27 206f 7220 6d61 7267  'margin' or marg
-00033ff0: 696e 4d6f 6465 2069 7320 6e6f 7420 4e6f  inMode is not No
-00034000: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00034010: 6d65 7468 6f64 203d 2027 7361 7069 4765  method = 'sapiGe
-00034020: 744d 6172 6769 6e41 6c6c 4f72 6465 7273  tMarginAllOrders
-00034030: 270a 2020 2020 2020 2020 2020 2020 6966  '.            if
-00034040: 206d 6172 6769 6e4d 6f64 6520 3d3d 2027   marginMode == '
-00034050: 6973 6f6c 6174 6564 273a 0a20 2020 2020  isolated':.     
-00034060: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00034070: 7374 5b27 6973 4973 6f6c 6174 6564 275d  st['isIsolated']
-00034080: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
-00034090: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
-000340a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000340b0: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-000340c0: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-000340d0: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
-000340e0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000340f0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00034100: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
-00034110: 740a 2020 2020 2020 2020 7265 7370 6f6e  t.        respon
-00034120: 7365 203d 2067 6574 6174 7472 2873 656c  se = getattr(sel
-00034130: 662c 206d 6574 686f 6429 2873 656c 662e  f, method)(self.
-00034140: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00034150: 7175 6572 7929 290a 2020 2020 2020 2020  query)).        
-00034160: 230a 2020 2020 2020 2020 2320 2073 706f  #.        #  spo
-00034170: 740a 2020 2020 2020 2020 230a 2020 2020  t.        #.    
-00034180: 2020 2020 2320 2020 2020 5b0a 2020 2020      #     [.    
-00034190: 2020 2020 2320 2020 2020 2020 2020 7b0a      #         {.
-000341a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000341b0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-000341c0: 224c 5443 4254 4322 2c0a 2020 2020 2020  "LTCBTC",.      
-000341d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000341e0: 226f 7264 6572 4964 223a 2031 2c0a 2020  "orderId": 1,.  
-000341f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034200: 2020 2020 2263 6c69 656e 744f 7264 6572      "clientOrder
-00034210: 4964 223a 2022 6d79 4f72 6465 7231 222c  Id": "myOrder1",
-00034220: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00034230: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
-00034240: 2230 2e31 222c 0a20 2020 2020 2020 2023  "0.1",.        #
-00034250: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00034260: 6967 5174 7922 3a20 2231 2e30 222c 0a20  igQty": "1.0",. 
-00034270: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034280: 2020 2020 2022 6578 6563 7574 6564 5174       "executedQt
-00034290: 7922 3a20 2230 2e30 222c 0a20 2020 2020  y": "0.0",.     
-000342a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000342b0: 2022 6375 6d6d 756c 6174 6976 6551 756f   "cummulativeQuo
-000342c0: 7465 5174 7922 3a20 2230 2e30 222c 0a20  teQty": "0.0",. 
-000342d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000342e0: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
-000342f0: 4e45 5722 2c0a 2020 2020 2020 2020 2320  NEW",.        # 
-00034300: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
-00034310: 6549 6e46 6f72 6365 223a 2022 4754 4322  eInForce": "GTC"
-00034320: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034330: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
-00034340: 224c 494d 4954 222c 0a20 2020 2020 2020  "LIMIT",.       
-00034350: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00034360: 7369 6465 223a 2022 4255 5922 2c0a 2020  side": "BUY",.  
-00034370: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034380: 2020 2020 2273 746f 7050 7269 6365 223a      "stopPrice":
-00034390: 2022 302e 3022 2c0a 2020 2020 2020 2020   "0.0",.        
-000343a0: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
-000343b0: 6365 6265 7267 5174 7922 3a20 2230 2e30  cebergQty": "0.0
-000343c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000343d0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
-000343e0: 2031 3439 3938 3237 3331 3935 3539 2c0a   1499827319559,.
-000343f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034400: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
-00034410: 6522 3a20 3134 3939 3832 3733 3139 3535  e": 149982731955
-00034420: 392c 0a20 2020 2020 2020 2023 2020 2020  9,.        #    
-00034430: 2020 2020 2020 2020 2022 6973 576f 726b           "isWork
-00034440: 696e 6722 3a20 5472 7565 0a20 2020 2020  ing": True.     
-00034450: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
-00034460: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
-00034470: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00034480: 2023 2020 6675 7475 7265 730a 2020 2020   #  futures.    
-00034490: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-000344a0: 2020 2020 5b0a 2020 2020 2020 2020 2320      [.        # 
-000344b0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-000344c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000344d0: 2273 796d 626f 6c22 3a20 2242 5443 5553  "symbol": "BTCUS
-000344e0: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-000344f0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-00034500: 7249 6422 3a20 312c 0a20 2020 2020 2020  rId": 1,.       
-00034510: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00034520: 636c 6965 6e74 4f72 6465 7249 6422 3a20  clientOrderId": 
-00034530: 226d 794f 7264 6572 3122 2c0a 2020 2020  "myOrder1",.    
-00034540: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034550: 2020 2270 7269 6365 223a 2022 302e 3122    "price": "0.1"
-00034560: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034570: 2020 2020 2020 2020 226f 7269 6751 7479          "origQty
-00034580: 223a 2022 312e 3022 2c0a 2020 2020 2020  ": "1.0",.      
-00034590: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000345a0: 2265 7865 6375 7465 6451 7479 223a 2022  "executedQty": "
-000345b0: 312e 3022 2c0a 2020 2020 2020 2020 2320  1.0",.        # 
-000345c0: 2020 2020 2020 2020 2020 2020 2263 756d              "cum
-000345d0: 5175 6f74 6522 3a20 2231 302e 3022 2c0a  Quote": "10.0",.
-000345e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000345f0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
-00034600: 224e 4557 222c 0a20 2020 2020 2020 2023  "NEW",.        #
-00034610: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-00034620: 6d65 496e 466f 7263 6522 3a20 2247 5443  meInForce": "GTC
-00034630: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00034640: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-00034650: 2022 4c49 4d49 5422 2c0a 2020 2020 2020   "LIMIT",.      
-00034660: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00034670: 2273 6964 6522 3a20 2242 5559 222c 0a20  "side": "BUY",. 
-00034680: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034690: 2020 2020 2022 7374 6f70 5072 6963 6522       "stopPrice"
-000346a0: 3a20 2230 2e30 222c 0a20 2020 2020 2020  : "0.0",.       
-000346b0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-000346c0: 7570 6461 7465 5469 6d65 223a 2031 3439  updateTime": 149
-000346d0: 3938 3237 3331 3935 3539 0a20 2020 2020  9827319559.     
-000346e0: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
-000346f0: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
-00034700: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00034710: 2023 206f 7074 696f 6e73 0a20 2020 2020   # options.     
-00034720: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-00034730: 2020 205b 0a20 2020 2020 2020 2023 2020     [.        #  
-00034740: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00034750: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00034760: 6f72 6465 7249 6422 3a20 3437 3238 3833  orderId": 472883
-00034770: 3330 3835 3433 3639 3737 3135 322c 0a20  3085436977152,. 
-00034780: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034790: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-000347a0: 4554 482d 3233 3032 3131 2d31 3530 302d  ETH-230211-1500-
-000347b0: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
-000347c0: 2020 2020 2020 2020 2020 2270 7269 6365            "price
-000347d0: 223a 2022 3130 2e30 222c 0a20 2020 2020  ": "10.0",.     
-000347e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000347f0: 2022 7175 616e 7469 7479 223a 2022 312e   "quantity": "1.
-00034800: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-00034810: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
-00034820: 7574 6564 5174 7922 3a20 2230 2e30 3022  utedQty": "0.00"
-00034830: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034840: 2020 2020 2020 2020 2266 6565 223a 2022          "fee": "
-00034850: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00034860: 2020 2020 2020 2020 2020 2273 6964 6522            "side"
-00034870: 3a20 2242 5559 222c 0a20 2020 2020 2020  : "BUY",.       
-00034880: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00034890: 7479 7065 223a 2022 4c49 4d49 5422 2c0a  type": "LIMIT",.
-000348a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000348b0: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
-000348c0: 6365 223a 2022 4754 4322 2c0a 2020 2020  ce": "GTC",.    
-000348d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000348e0: 2020 2272 6564 7563 654f 6e6c 7922 3a20    "reduceOnly": 
-000348f0: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
-00034900: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-00034910: 7374 4f6e 6c79 223a 2046 616c 7365 2c0a  stOnly": False,.
-00034920: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034930: 2020 2020 2020 2263 7265 6174 6554 696d        "createTim
-00034940: 6522 3a20 3136 3736 3038 3330 3334 3436  e": 167608303446
-00034950: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
-00034960: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-00034970: 5469 6d65 223a 2031 3637 3630 3833 3033  Time": 167608303
-00034980: 3434 3632 2c0a 2020 2020 2020 2020 2320  4462,.        # 
-00034990: 2020 2020 2020 2020 2020 2020 2273 7461              "sta
-000349a0: 7475 7322 3a20 2241 4343 4550 5445 4422  tus": "ACCEPTED"
-000349b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000349c0: 2020 2020 2020 2020 2261 7667 5072 6963          "avgPric
-000349d0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
-000349e0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-000349f0: 736f 7572 6365 223a 2022 4150 4922 2c0a  source": "API",.
-00034a00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034a10: 2020 2020 2020 2263 6c69 656e 744f 7264        "clientOrd
-00034a20: 6572 4964 223a 2022 222c 0a20 2020 2020  erId": "",.     
-00034a30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00034a40: 2022 7072 6963 6553 6361 6c65 223a 2031   "priceScale": 1
-00034a50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034a60: 2020 2020 2020 2020 2271 7561 6e74 6974          "quantit
-00034a70: 7953 6361 6c65 223a 2032 2c0a 2020 2020  yScale": 2,.    
-00034a80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034a90: 2020 226f 7074 696f 6e53 6964 6522 3a20    "optionSide": 
-00034aa0: 2243 414c 4c22 2c0a 2020 2020 2020 2020  "CALL",.        
-00034ab0: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
-00034ac0: 756f 7465 4173 7365 7422 3a20 2255 5344  uoteAsset": "USD
-00034ad0: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-00034ae0: 2020 2020 2020 2020 2020 226c 6173 7454            "lastT
-00034af0: 7261 6465 223a 207b 2269 6422 3a22 3639  rade": {"id":"69
-00034b00: 222c 2274 696d 6522 3a22 3136 3736 3038  ","time":"167608
-00034b10: 3434 3330 3536 3722 2c22 7072 6963 6522  4430567","price"
-00034b20: 3a22 3234 2e39 222c 2271 7479 223a 2231  :"24.9","qty":"1
-00034b30: 2e30 3022 7d2c 0a20 2020 2020 2020 2023  .00"},.        #
-00034b40: 2020 2020 2020 2020 2020 2020 2022 6d6d               "mm
-00034b50: 7022 3a20 4661 6c73 650a 2020 2020 2020  p": False.      
-00034b60: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
-00034b70: 2020 2020 2020 2320 2020 2020 5d0a 2020        #     ].  
-00034b80: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00034b90: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00034ba0: 655f 6f72 6465 7273 2872 6573 706f 6e73  e_orders(respons
-00034bb0: 652c 206d 6172 6b65 742c 2073 696e 6365  e, market, since
-00034bc0: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
-00034bd0: 6620 6665 7463 685f 6f70 656e 5f6f 7264  f fetch_open_ord
-00034be0: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
-00034bf0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00034c00: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
-00034c10: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00034c20: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
-00034c30: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-00034c40: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00034c50: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00034c60: 2020 6665 7463 6820 616c 6c20 756e 6669    fetch all unfi
-00034c70: 6c6c 6564 2063 7572 7265 6e74 6c79 206f  lled currently o
-00034c80: 7065 6e20 6f72 6465 7273 0a20 2020 2020  pen orders.     
-00034c90: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-00034ca0: 6e65 2073 796d 626f 6c3a 2075 6e69 6669  ne symbol: unifi
-00034cb0: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
-00034cc0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00034cd0: 696e 747c 4e6f 6e65 2073 696e 6365 3a20  int|None since: 
-00034ce0: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
-00034cf0: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
-00034d00: 206f 7065 6e20 6f72 6465 7273 2066 6f72   open orders for
-00034d10: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00034d20: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
-00034d30: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
-00034d40: 6572 206f 6620 6f70 656e 206f 7264 6572  er of open order
-00034d50: 7320 7374 7275 6374 7572 6573 2074 6f20  s structures to 
-00034d60: 7265 7472 6965 7665 0a20 2020 2020 2020  retrieve.       
-00034d70: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00034d80: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00034d90: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00034da0: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
-00034db0: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00034dc0: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-00034dd0: 6e65 2070 6172 616d 735b 276d 6172 6769  ne params['margi
-00034de0: 6e4d 6f64 6527 5d3a 2027 6372 6f73 7327  nMode']: 'cross'
-00034df0: 206f 7220 2769 736f 6c61 7465 6427 2c20   or 'isolated', 
-00034e00: 666f 7220 7370 6f74 206d 6172 6769 6e20  for spot margin 
-00034e10: 7472 6164 696e 670a 2020 2020 2020 2020  trading.        
-00034e20: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
-00034e30: 2061 206c 6973 7420 6f66 2060 6f72 6465   a list of `orde
-00034e40: 7220 7374 7275 6374 7572 6573 203c 6874  r structures <ht
-00034e50: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00034e60: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
-00034e70: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00034e80: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00034e90: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00034ea0: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-00034eb0: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
-00034ec0: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
-00034ed0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00034ee0: 7b7d 0a20 2020 2020 2020 206d 6172 6769  {}.        margi
-00034ef0: 6e4d 6f64 6520 3d20 4e6f 6e65 0a20 2020  nMode = None.   
-00034f00: 2020 2020 2071 7565 7279 203d 204e 6f6e       query = Non
-00034f10: 650a 2020 2020 2020 2020 6d61 7267 696e  e.        margin
-00034f20: 4d6f 6465 2c20 7175 6572 7920 3d20 7365  Mode, query = se
-00034f30: 6c66 2e68 616e 646c 655f 6d61 7267 696e  lf.handle_margin
-00034f40: 5f6d 6f64 655f 616e 645f 7061 7261 6d73  _mode_and_params
-00034f50: 2827 6665 7463 684f 7065 6e4f 7264 6572  ('fetchOpenOrder
-00034f60: 7327 2c20 7061 7261 6d73 290a 2020 2020  s', params).    
-00034f70: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
-00034f80: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00034f90: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-00034fa0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-00034fb0: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
-00034fc0: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
-00034fd0: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
-00034fe0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-00034ff0: 6175 6c74 5479 7065 203d 2073 656c 662e  aultType = self.
-00035000: 7361 6665 5f73 7472 696e 675f 3228 7365  safe_string_2(se
-00035010: 6c66 2e6f 7074 696f 6e73 2c20 2766 6574  lf.options, 'fet
-00035020: 6368 4f70 656e 4f72 6465 7273 272c 2027  chOpenOrders', '
-00035030: 6465 6661 756c 7454 7970 6527 2c20 2773  defaultType', 's
-00035040: 706f 7427 290a 2020 2020 2020 2020 2020  pot').          
-00035050: 2020 6d61 726b 6574 5479 7065 203d 206d    marketType = m
-00035060: 6172 6b65 745b 2774 7970 6527 5d20 6966  arket['type'] if
-00035070: 2028 2774 7970 6527 2069 6e20 6d61 726b   ('type' in mark
-00035080: 6574 2920 656c 7365 2064 6566 6175 6c74  et) else default
-00035090: 5479 7065 0a20 2020 2020 2020 2020 2020  Type.           
-000350a0: 2074 7970 6520 3d20 7365 6c66 2e73 6166   type = self.saf
-000350b0: 655f 7374 7269 6e67 2871 7565 7279 2c20  e_string(query, 
-000350c0: 2774 7970 6527 2c20 6d61 726b 6574 5479  'type', marketTy
-000350d0: 7065 290a 2020 2020 2020 2020 656c 6966  pe).        elif
-000350e0: 2073 656c 662e 6f70 7469 6f6e 735b 2777   self.options['w
-000350f0: 6172 6e4f 6e46 6574 6368 4f70 656e 4f72  arnOnFetchOpenOr
-00035100: 6465 7273 5769 7468 6f75 7453 796d 626f  dersWithoutSymbo
-00035110: 6c27 5d3a 0a20 2020 2020 2020 2020 2020  l']:.           
-00035120: 2073 796d 626f 6c73 203d 2073 656c 662e   symbols = self.
-00035130: 7379 6d62 6f6c 730a 2020 2020 2020 2020  symbols.        
-00035140: 2020 2020 6e75 6d53 796d 626f 6c73 203d      numSymbols =
-00035150: 206c 656e 2873 796d 626f 6c73 290a 2020   len(symbols).  
-00035160: 2020 2020 2020 2020 2020 6665 7463 684f            fetchO
-00035170: 7065 6e4f 7264 6572 7352 6174 654c 696d  penOrdersRateLim
-00035180: 6974 203d 2073 656c 662e 7061 7273 655f  it = self.parse_
-00035190: 746f 5f69 6e74 286e 756d 5379 6d62 6f6c  to_int(numSymbol
-000351a0: 7320 2f20 3229 0a20 2020 2020 2020 2020  s / 2).         
-000351b0: 2020 2072 6169 7365 2045 7863 6861 6e67     raise Exchang
-000351c0: 6545 7272 6f72 2873 656c 662e 6964 202b  eError(self.id +
-000351d0: 2027 2066 6574 6368 4f70 656e 4f72 6465   ' fetchOpenOrde
-000351e0: 7273 2829 2057 4152 4e49 4e47 3a20 6665  rs() WARNING: fe
-000351f0: 7463 6869 6e67 206f 7065 6e20 6f72 6465  tching open orde
-00035200: 7273 2077 6974 686f 7574 2073 7065 6369  rs without speci
-00035210: 6679 696e 6720 6120 7379 6d62 6f6c 2069  fying a symbol i
-00035220: 7320 7261 7465 2d6c 696d 6974 6564 2074  s rate-limited t
-00035230: 6f20 6f6e 6520 6361 6c6c 2070 6572 2027  o one call per '
-00035240: 202b 2073 7472 2866 6574 6368 4f70 656e   + str(fetchOpen
-00035250: 4f72 6465 7273 5261 7465 4c69 6d69 7429  OrdersRateLimit)
-00035260: 202b 2027 2073 6563 6f6e 6473 2e20 446f   + ' seconds. Do
-00035270: 206e 6f74 2063 616c 6c20 7365 6c66 206d   not call self m
-00035280: 6574 686f 6420 6672 6571 7565 6e74 6c79  ethod frequently
-00035290: 2074 6f20 6176 6f69 6420 6261 6e2e 2053   to avoid ban. S
-000352a0: 6574 2027 202b 2073 656c 662e 6964 202b  et ' + self.id +
-000352b0: 2027 2e6f 7074 696f 6e73 5b22 7761 726e   '.options["warn
-000352c0: 4f6e 4665 7463 684f 7065 6e4f 7264 6572  OnFetchOpenOrder
-000352d0: 7357 6974 686f 7574 5379 6d62 6f6c 225d  sWithoutSymbol"]
-000352e0: 203d 2046 616c 7365 2074 6f20 7375 7070   = False to supp
-000352f0: 7265 7373 2073 656c 6620 7761 726e 696e  ress self warnin
-00035300: 6720 6d65 7373 6167 652e 2729 0a20 2020  g message.').   
-00035310: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00035320: 2020 2020 2020 2064 6566 6175 6c74 5479         defaultTy
-00035330: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
-00035340: 7472 696e 675f 3228 7365 6c66 2e6f 7074  tring_2(self.opt
-00035350: 696f 6e73 2c20 2766 6574 6368 4f70 656e  ions, 'fetchOpen
-00035360: 4f72 6465 7273 272c 2027 6465 6661 756c  Orders', 'defaul
-00035370: 7454 7970 6527 2c20 2773 706f 7427 290a  tType', 'spot').
-00035380: 2020 2020 2020 2020 2020 2020 7479 7065              type
-00035390: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-000353a0: 696e 6728 7175 6572 792c 2027 7479 7065  ing(query, 'type
-000353b0: 272c 2064 6566 6175 6c74 5479 7065 290a  ', defaultType).
-000353c0: 2020 2020 2020 2020 7375 6254 7970 6520          subType 
-000353d0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-000353e0: 7562 5479 7065 2c20 7175 6572 7920 3d20  ubType, query = 
-000353f0: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
-00035400: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-00035410: 2766 6574 6368 4f70 656e 4f72 6465 7273  'fetchOpenOrders
-00035420: 272c 206d 6172 6b65 742c 2071 7565 7279  ', market, query
-00035430: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-00035440: 7450 6172 616d 7320 3d20 7365 6c66 2e6f  tParams = self.o
-00035450: 6d69 7428 7175 6572 792c 2027 7479 7065  mit(query, 'type
-00035460: 2729 0a20 2020 2020 2020 206d 6574 686f  ').        metho
-00035470: 6420 3d20 2770 7269 7661 7465 4765 744f  d = 'privateGetO
-00035480: 7065 6e4f 7264 6572 7327 0a20 2020 2020  penOrders'.     
-00035490: 2020 2069 6620 7479 7065 203d 3d20 276f     if type == 'o
-000354a0: 7074 696f 6e27 3a0a 2020 2020 2020 2020  ption':.        
-000354b0: 2020 2020 6d65 7468 6f64 203d 2027 6561      method = 'ea
-000354c0: 7069 5072 6976 6174 6547 6574 4f70 656e  piPrivateGetOpen
-000354d0: 4f72 6465 7273 270a 2020 2020 2020 2020  Orders'.        
-000354e0: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
-000354f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00035500: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00035510: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
-00035520: 2073 696e 6365 0a20 2020 2020 2020 2020   since.         
-00035530: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
-00035540: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00035550: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00035560: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
-00035570: 740a 2020 2020 2020 2020 656c 6966 2073  t.        elif s
-00035580: 656c 662e 6973 5f6c 696e 6561 7228 7479  elf.is_linear(ty
-00035590: 7065 2c20 7375 6254 7970 6529 3a0a 2020  pe, subType):.  
-000355a0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-000355b0: 203d 2027 6661 7069 5072 6976 6174 6547   = 'fapiPrivateG
-000355c0: 6574 4f70 656e 4f72 6465 7273 270a 2020  etOpenOrders'.  
-000355d0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-000355e0: 6973 5f69 6e76 6572 7365 2874 7970 652c  is_inverse(type,
-000355f0: 2073 7562 5479 7065 293a 0a20 2020 2020   subType):.     
-00035600: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00035610: 2764 6170 6950 7269 7661 7465 4765 744f  'dapiPrivateGetO
-00035620: 7065 6e4f 7264 6572 7327 0a20 2020 2020  penOrders'.     
-00035630: 2020 2065 6c69 6620 7479 7065 203d 3d20     elif type == 
-00035640: 276d 6172 6769 6e27 206f 7220 6d61 7267  'margin' or marg
-00035650: 696e 4d6f 6465 2069 7320 6e6f 7420 4e6f  inMode is not No
-00035660: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00035670: 6d65 7468 6f64 203d 2027 7361 7069 4765  method = 'sapiGe
-00035680: 744d 6172 6769 6e4f 7065 6e4f 7264 6572  tMarginOpenOrder
-00035690: 7327 0a20 2020 2020 2020 2020 2020 2069  s'.            i
-000356a0: 6620 6d61 7267 696e 4d6f 6465 203d 3d20  f marginMode == 
-000356b0: 2769 736f 6c61 7465 6427 3a0a 2020 2020  'isolated':.    
-000356c0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-000356d0: 6573 745b 2769 7349 736f 6c61 7465 6427  est['isIsolated'
-000356e0: 5d20 3d20 5472 7565 0a20 2020 2020 2020  ] = True.       
-000356f0: 2020 2020 2020 2020 2069 6620 7379 6d62           if symb
-00035700: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
-00035710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035720: 7261 6973 6520 4172 6775 6d65 6e74 7352  raise ArgumentsR
-00035730: 6571 7569 7265 6428 7365 6c66 2e69 6420  equired(self.id 
-00035740: 2b20 2720 6665 7463 684f 7065 6e4f 7264  + ' fetchOpenOrd
-00035750: 6572 7328 2920 7265 7175 6972 6573 2061  ers() requires a
-00035760: 2073 796d 626f 6c20 6172 6775 6d65 6e74   symbol argument
-00035770: 2066 6f72 2069 736f 6c61 7465 6420 6d61   for isolated ma
-00035780: 726b 6574 7327 290a 2020 2020 2020 2020  rkets').        
-00035790: 7265 7370 6f6e 7365 203d 2067 6574 6174  response = getat
-000357a0: 7472 2873 656c 662c 206d 6574 686f 6429  tr(self, method)
-000357b0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
-000357c0: 7565 7374 2c20 7265 7175 6573 7450 6172  uest, requestPar
-000357d0: 616d 7329 290a 2020 2020 2020 2020 7265  ams)).        re
-000357e0: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-000357f0: 6f72 6465 7273 2872 6573 706f 6e73 652c  orders(response,
-00035800: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
-00035810: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
-00035820: 6665 7463 685f 636c 6f73 6564 5f6f 7264  fetch_closed_ord
-00035830: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
-00035840: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00035850: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
-00035860: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00035870: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
-00035880: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-00035890: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-000358a0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000358b0: 2020 6665 7463 6865 7320 696e 666f 726d    fetches inform
-000358c0: 6174 696f 6e20 6f6e 206d 756c 7469 706c  ation on multipl
-000358d0: 6520 636c 6f73 6564 206f 7264 6572 7320  e closed orders 
-000358e0: 6d61 6465 2062 7920 7468 6520 7573 6572  made by the user
-000358f0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00035900: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
-00035910: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
-00035920: 6c20 6f66 2074 6865 206d 6172 6b65 7420  l of the market 
-00035930: 6f72 6465 7273 2077 6572 6520 6d61 6465  orders were made
-00035940: 2069 6e0a 2020 2020 2020 2020 3a70 6172   in.        :par
-00035950: 616d 2069 6e74 7c4e 6f6e 6520 7369 6e63  am int|None sinc
-00035960: 653a 2074 6865 2065 6172 6c69 6573 7420  e: the earliest 
-00035970: 7469 6d65 2069 6e20 6d73 2074 6f20 6665  time in ms to fe
-00035980: 7463 6820 6f72 6465 7273 2066 6f72 0a20  tch orders for. 
-00035990: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-000359a0: 747c 4e6f 6e65 206c 696d 6974 3a20 7468  t|None limit: th
-000359b0: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-000359c0: 206f 6620 6f72 6465 7220 7374 7275 6374   of order struct
-000359d0: 7572 6573 2074 6f20 7265 7472 6965 7665  ures to retrieve
-000359e0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000359f0: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
-00035a00: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-00035a10: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
-00035a20: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
-00035a30: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-00035a40: 726e 7320 5b64 6963 745d 3a20 6120 6c69  rns [dict]: a li
-00035a50: 7374 206f 6620 606f 7264 6572 2073 7472  st of `order str
-00035a60: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
-00035a70: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-00035a80: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
-00035a90: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-00035aa0: 2222 0a20 2020 2020 2020 206f 7264 6572  "".        order
-00035ab0: 7320 3d20 7365 6c66 2e66 6574 6368 5f6f  s = self.fetch_o
-00035ac0: 7264 6572 7328 7379 6d62 6f6c 2c20 7369  rders(symbol, si
-00035ad0: 6e63 652c 206c 696d 6974 2c20 7061 7261  nce, limit, para
-00035ae0: 6d73 290a 2020 2020 2020 2020 7265 7475  ms).        retu
-00035af0: 726e 2073 656c 662e 6669 6c74 6572 5f62  rn self.filter_b
-00035b00: 7928 6f72 6465 7273 2c20 2773 7461 7475  y(orders, 'statu
-00035b10: 7327 2c20 2763 6c6f 7365 6427 290a 0a20  s', 'closed').. 
-00035b20: 2020 2064 6566 2066 6574 6368 5f63 616e     def fetch_can
-00035b30: 6365 6c65 645f 6f72 6465 7273 2873 656c  celed_orders(sel
-00035b40: 662c 2073 796d 626f 6c3a 204f 7074 696f  f, symbol: Optio
-00035b50: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-00035b60: 2073 696e 6365 3a20 4f70 7469 6f6e 616c   since: Optional
-00035b70: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 6c69  [int] = None, li
-00035b80: 6d69 743a 204f 7074 696f 6e61 6c5b 696e  mit: Optional[in
-00035b90: 745d 203d 204e 6f6e 652c 2070 6172 616d  t] = None, param
-00035ba0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00035bb0: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-00035bc0: 6573 2069 6e66 6f72 6d61 7469 6f6e 206f  es information o
-00035bd0: 6e20 6d75 6c74 6970 6c65 2063 616e 6365  n multiple cance
-00035be0: 6c65 6420 6f72 6465 7273 206d 6164 6520  led orders made 
-00035bf0: 6279 2074 6865 2075 7365 720a 2020 2020  by the user.    
-00035c00: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
-00035c10: 6269 6e61 6e63 652d 646f 6373 2e67 6974  binance-docs.git
-00035c20: 6875 622e 696f 2f61 7069 646f 6373 2f73  hub.io/apidocs/s
-00035c30: 706f 742f 656e 2f23 616c 6c2d 6f72 6465  pot/en/#all-orde
-00035c40: 7273 2d75 7365 725f 6461 7461 0a20 2020  rs-user_data.   
-00035c50: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-00035c60: 2f62 696e 616e 6365 2d64 6f63 732e 6769  /binance-docs.gi
-00035c70: 7468 7562 2e69 6f2f 6170 6964 6f63 732f  thub.io/apidocs/
-00035c80: 7370 6f74 2f65 6e2f 2371 7565 7279 2d6d  spot/en/#query-m
-00035c90: 6172 6769 6e2d 6163 636f 756e 742d 3339  argin-account-39
-00035ca0: 2d73 2d61 6c6c 2d6f 7264 6572 732d 7573  -s-all-orders-us
-00035cb0: 6572 5f64 6174 610a 2020 2020 2020 2020  er_data.        
-00035cc0: 7365 6520 6874 7470 733a 2f2f 6269 6e61  see https://bina
-00035cd0: 6e63 652d 646f 6373 2e67 6974 6875 622e  nce-docs.github.
-00035ce0: 696f 2f61 7069 646f 6373 2f76 6f70 7469  io/apidocs/vopti
-00035cf0: 6f6e 732f 656e 2f23 7175 6572 792d 6f70  ons/en/#query-op
-00035d00: 7469 6f6e 2d6f 7264 6572 2d68 6973 746f  tion-order-histo
-00035d10: 7279 2d74 7261 6465 0a20 2020 2020 2020  ry-trade.       
-00035d20: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00035d30: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
-00035d40: 6574 2073 796d 626f 6c20 6f66 2074 6865  et symbol of the
-00035d50: 206d 6172 6b65 7420 7468 6520 6f72 6465   market the orde
-00035d60: 7273 2077 6572 6520 6d61 6465 2069 6e0a  rs were made in.
-00035d70: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00035d80: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
-00035d90: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
-00035da0: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
-00035db0: 6f72 6465 7273 2066 6f72 0a20 2020 2020  orders for.     
-00035dc0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00035dd0: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
-00035de0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
-00035df0: 6f72 6465 7220 7374 7275 6374 7572 6573  order structures
-00035e00: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
-00035e10: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00035e20: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-00035e30: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-00035e40: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
-00035e50: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
-00035e60: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00035e70: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
-00035e80: 6620 606f 7264 6572 2073 7472 7563 7475  f `order structu
-00035e90: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00035ea0: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00035eb0: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
-00035ec0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-00035ed0: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
-00035ee0: 6b5f 7265 7175 6972 6564 5f73 796d 626f  k_required_symbo
-00035ef0: 6c28 2766 6574 6368 4361 6e63 656c 6564  l('fetchCanceled
-00035f00: 4f72 6465 7273 272c 2073 796d 626f 6c29  Orders', symbol)
-00035f10: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-00035f20: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00035f30: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-00035f40: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-00035f50: 290a 2020 2020 2020 2020 6966 206d 6172  ).        if mar
-00035f60: 6b65 745b 2773 7761 7027 5d20 6f72 206d  ket['swap'] or m
-00035f70: 6172 6b65 745b 2766 7574 7572 6527 5d3a  arket['future']:
-00035f80: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00035f90: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
-00035fa0: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
-00035fb0: 6843 616e 6365 6c65 644f 7264 6572 7328  hCanceledOrders(
-00035fc0: 2920 7375 7070 6f72 7473 2073 706f 742c  ) supports spot,
-00035fd0: 206d 6172 6769 6e20 616e 6420 6f70 7469   margin and opti
-00035fe0: 6f6e 206d 6172 6b65 7473 206f 6e6c 7927  on markets only'
-00035ff0: 290a 2020 2020 2020 2020 7061 7261 6d73  ).        params
-00036000: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-00036010: 616d 732c 2027 7479 7065 2729 0a20 2020  ams, 'type').   
-00036020: 2020 2020 206f 7264 6572 7320 3d20 7365       orders = se
-00036030: 6c66 2e66 6574 6368 5f6f 7264 6572 7328  lf.fetch_orders(
-00036040: 7379 6d62 6f6c 2c20 7369 6e63 652c 204e  symbol, since, N
-00036050: 6f6e 652c 2070 6172 616d 7329 0a20 2020  one, params).   
-00036060: 2020 2020 2066 696c 7465 7265 644f 7264       filteredOrd
-00036070: 6572 7320 3d20 7365 6c66 2e66 696c 7465  ers = self.filte
-00036080: 725f 6279 286f 7264 6572 732c 2027 7374  r_by(orders, 'st
-00036090: 6174 7573 272c 2027 6361 6e63 656c 6564  atus', 'canceled
-000360a0: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
-000360b0: 6e20 7365 6c66 2e66 696c 7465 725f 6279  n self.filter_by
-000360c0: 5f6c 696d 6974 2866 696c 7465 7265 644f  _limit(filteredO
-000360d0: 7264 6572 732c 206c 696d 6974 290a 0a20  rders, limit).. 
-000360e0: 2020 2064 6566 2063 616e 6365 6c5f 6f72     def cancel_or
-000360f0: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
-00036100: 722c 2073 796d 626f 6c3a 204f 7074 696f  r, symbol: Optio
-00036110: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-00036120: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00036130: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00036140: 2063 616e 6365 6c73 2061 6e20 6f70 656e   cancels an open
-00036150: 206f 7264 6572 0a20 2020 2020 2020 203a   order.        :
-00036160: 7061 7261 6d20 7374 7220 6964 3a20 6f72  param str id: or
-00036170: 6465 7220 6964 0a20 2020 2020 2020 203a  der id.        :
-00036180: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
-00036190: 3a20 756e 6966 6965 6420 7379 6d62 6f6c  : unified symbol
-000361a0: 206f 6620 7468 6520 6d61 726b 6574 2074   of the market t
-000361b0: 6865 206f 7264 6572 2077 6173 206d 6164  he order was mad
-000361c0: 6520 696e 0a20 2020 2020 2020 203a 7061  e in.        :pa
-000361d0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-000361e0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-000361f0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-00036200: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-00036210: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-00036220: 7265 7475 726e 7320 6469 6374 3a20 416e  returns dict: An
-00036230: 2060 6f72 6465 7220 7374 7275 6374 7572   `order structur
-00036240: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
-00036250: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6f  ccxt.com/#/?id=o
-00036260: 7264 6572 2d73 7472 7563 7475 7265 3e60  rder-structure>`
-00036270: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00036280: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
-00036290: 7265 7175 6972 6564 5f73 796d 626f 6c28  required_symbol(
-000362a0: 2763 616e 6365 6c4f 7264 6572 272c 2073  'cancelOrder', s
-000362b0: 796d 626f 6c29 0a20 2020 2020 2020 2073  ymbol).        s
-000362c0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-000362d0: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-000362e0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-000362f0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-00036300: 6465 6661 756c 7454 7970 6520 3d20 7365  defaultType = se
-00036310: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
-00036320: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
-00036330: 6361 6e63 656c 4f72 6465 7227 2c20 2764  cancelOrder', 'd
-00036340: 6566 6175 6c74 5479 7065 272c 2027 7370  efaultType', 'sp
-00036350: 6f74 2729 0a20 2020 2020 2020 2074 7970  ot').        typ
-00036360: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00036370: 7269 6e67 2870 6172 616d 732c 2027 7479  ring(params, 'ty
-00036380: 7065 272c 2064 6566 6175 6c74 5479 7065  pe', defaultType
-00036390: 290a 2020 2020 2020 2020 6d61 7267 696e  ).        margin
-000363a0: 4d6f 6465 2c20 7175 6572 7920 3d20 7365  Mode, query = se
-000363b0: 6c66 2e68 616e 646c 655f 6d61 7267 696e  lf.handle_margin
-000363c0: 5f6d 6f64 655f 616e 645f 7061 7261 6d73  _mode_and_params
-000363d0: 2827 6361 6e63 656c 4f72 6465 7227 2c20  ('cancelOrder', 
-000363e0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-000363f0: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00036400: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-00036410: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
-00036420: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
-00036430: 7264 6572 4964 273a 2069 642c 0a20 2020  rderId': id,.   
-00036440: 2020 2020 2020 2020 2023 2027 6f72 6967           # 'orig
-00036450: 436c 6965 6e74 4f72 6465 7249 6427 3a20  ClientOrderId': 
-00036460: 6964 2c0a 2020 2020 2020 2020 7d0a 2020  id,.        }.  
-00036470: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
-00036480: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
-00036490: 7661 6c75 655f 3228 7061 7261 6d73 2c20  value_2(params, 
-000364a0: 276f 7269 6743 6c69 656e 744f 7264 6572  'origClientOrder
-000364b0: 4964 272c 2027 636c 6965 6e74 4f72 6465  Id', 'clientOrde
-000364c0: 7249 6427 290a 2020 2020 2020 2020 6966  rId').        if
-000364d0: 2063 6c69 656e 744f 7264 6572 4964 2069   clientOrderId i
-000364e0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000364f0: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-00036500: 745b 276f 7074 696f 6e27 5d3a 0a20 2020  t['option']:.   
-00036510: 2020 2020 2020 2020 2020 2020 2072 6571               req
-00036520: 7565 7374 5b27 636c 6965 6e74 4f72 6465  uest['clientOrde
-00036530: 7249 6427 5d20 3d20 636c 6965 6e74 4f72  rId'] = clientOr
-00036540: 6465 7249 640a 2020 2020 2020 2020 2020  derId.          
-00036550: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00036560: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00036570: 276f 7269 6743 6c69 656e 744f 7264 6572  'origClientOrder
-00036580: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
-00036590: 6572 4964 0a20 2020 2020 2020 2065 6c73  erId.        els
-000365a0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-000365b0: 6571 7565 7374 5b27 6f72 6465 7249 6427  equest['orderId'
-000365c0: 5d20 3d20 6964 0a20 2020 2020 2020 206d  ] = id.        m
-000365d0: 6574 686f 6420 3d20 2770 7269 7661 7465  ethod = 'private
-000365e0: 4465 6c65 7465 4f72 6465 7227 0a20 2020  DeleteOrder'.   
-000365f0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-00036600: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
-00036610: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-00036620: 6561 7069 5072 6976 6174 6544 656c 6574  eapiPrivateDelet
-00036630: 654f 7264 6572 270a 2020 2020 2020 2020  eOrder'.        
-00036640: 656c 6966 206d 6172 6b65 745b 276c 696e  elif market['lin
-00036650: 6561 7227 5d3a 0a20 2020 2020 2020 2020  ear']:.         
-00036660: 2020 206d 6574 686f 6420 3d20 2766 6170     method = 'fap
-00036670: 6950 7269 7661 7465 4465 6c65 7465 4f72  iPrivateDeleteOr
-00036680: 6465 7227 0a20 2020 2020 2020 2065 6c69  der'.        eli
-00036690: 6620 6d61 726b 6574 5b27 696e 7665 7273  f market['invers
-000366a0: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
-000366b0: 206d 6574 686f 6420 3d20 2764 6170 6950   method = 'dapiP
-000366c0: 7269 7661 7465 4465 6c65 7465 4f72 6465  rivateDeleteOrde
-000366d0: 7227 0a20 2020 2020 2020 2065 6c69 6620  r'.        elif 
-000366e0: 7479 7065 203d 3d20 276d 6172 6769 6e27  type == 'margin'
-000366f0: 206f 7220 6d61 7267 696e 4d6f 6465 2069   or marginMode i
-00036700: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00036710: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00036720: 2027 7361 7069 4465 6c65 7465 4d61 7267   'sapiDeleteMarg
-00036730: 696e 4f72 6465 7227 0a20 2020 2020 2020  inOrder'.       
-00036740: 2020 2020 2069 6620 6d61 7267 696e 4d6f       if marginMo
-00036750: 6465 203d 3d20 2769 736f 6c61 7465 6427  de == 'isolated'
-00036760: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00036770: 2020 7265 7175 6573 745b 2769 7349 736f    request['isIso
-00036780: 6c61 7465 6427 5d20 3d20 5472 7565 0a20  lated'] = True. 
-00036790: 2020 2020 2020 2072 6571 7565 7374 5061         requestPa
-000367a0: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-000367b0: 2871 7565 7279 2c20 5b27 7479 7065 272c  (query, ['type',
-000367c0: 2027 6f72 6967 436c 6965 6e74 4f72 6465   'origClientOrde
-000367d0: 7249 6427 2c20 2763 6c69 656e 744f 7264  rId', 'clientOrd
-000367e0: 6572 4964 275d 290a 2020 2020 2020 2020  erId']).        
-000367f0: 7265 7370 6f6e 7365 203d 2067 6574 6174  response = getat
-00036800: 7472 2873 656c 662c 206d 6574 686f 6429  tr(self, method)
-00036810: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
-00036820: 7565 7374 2c20 7265 7175 6573 7450 6172  uest, requestPar
-00036830: 616d 7329 290a 2020 2020 2020 2020 7265  ams)).        re
-00036840: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-00036850: 6f72 6465 7228 7265 7370 6f6e 7365 2c20  order(response, 
-00036860: 6d61 726b 6574 290a 0a20 2020 2064 6566  market)..    def
-00036870: 2063 616e 6365 6c5f 616c 6c5f 6f72 6465   cancel_all_orde
-00036880: 7273 2873 656c 662c 2073 796d 626f 6c3a  rs(self, symbol:
-00036890: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-000368a0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-000368b0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-000368c0: 2020 2020 2020 2063 616e 6365 6c20 616c         cancel al
-000368d0: 6c20 6f70 656e 206f 7264 6572 7320 696e  l open orders in
-000368e0: 2061 206d 6172 6b65 740a 2020 2020 2020   a market.      
-000368f0: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
-00036900: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
-00036910: 6b65 7420 7379 6d62 6f6c 206f 6620 7468  ket symbol of th
-00036920: 6520 6d61 726b 6574 2074 6f20 6361 6e63  e market to canc
-00036930: 656c 206f 7264 6572 7320 696e 0a20 2020  el orders in.   
-00036940: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00036950: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-00036960: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-00036970: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
-00036980: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
-00036990: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-000369a0: 727c 4e6f 6e65 2070 6172 616d 735b 276d  r|None params['m
-000369b0: 6172 6769 6e4d 6f64 6527 5d3a 2027 6372  arginMode']: 'cr
-000369c0: 6f73 7327 206f 7220 2769 736f 6c61 7465  oss' or 'isolate
-000369d0: 6427 2c20 666f 7220 7370 6f74 206d 6172  d', for spot mar
-000369e0: 6769 6e20 7472 6164 696e 670a 2020 2020  gin trading.    
-000369f0: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
-00036a00: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
-00036a10: 6f72 6465 7220 7374 7275 6374 7572 6573  order structures
-00036a20: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00036a30: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
-00036a40: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
-00036a50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00036a60: 2020 2020 7365 6c66 2e63 6865 636b 5f72      self.check_r
-00036a70: 6571 7569 7265 645f 7379 6d62 6f6c 2827  equired_symbol('
-00036a80: 6361 6e63 656c 416c 6c4f 7264 6572 7327  cancelAllOrders'
-00036a90: 2c20 7379 6d62 6f6c 290a 2020 2020 2020  , symbol).      
-00036aa0: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-00036ab0: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-00036ac0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00036ad0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00036ae0: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00036af0: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00036b00: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00036b10: 5d2c 0a20 2020 2020 2020 207d 0a20 2020  ],.        }.   
-00036b20: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
-00036b30: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-00036b40: 616d 732c 2027 7479 7065 272c 206d 6172  ams, 'type', mar
-00036b50: 6b65 745b 2774 7970 6527 5d29 0a20 2020  ket['type']).   
-00036b60: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-00036b70: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-00036b80: 5b27 7479 7065 275d 290a 2020 2020 2020  ['type']).      
-00036b90: 2020 6d61 7267 696e 4d6f 6465 2c20 7175    marginMode, qu
-00036ba0: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
-00036bb0: 655f 6d61 7267 696e 5f6d 6f64 655f 616e  e_margin_mode_an
-00036bc0: 645f 7061 7261 6d73 2827 6361 6e63 656c  d_params('cancel
-00036bd0: 416c 6c4f 7264 6572 7327 2c20 7061 7261  AllOrders', para
-00036be0: 6d73 290a 2020 2020 2020 2020 6d65 7468  ms).        meth
-00036bf0: 6f64 203d 2027 7072 6976 6174 6544 656c  od = 'privateDel
-00036c00: 6574 654f 7065 6e4f 7264 6572 7327 0a20  eteOpenOrders'. 
-00036c10: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-00036c20: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
-00036c30: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00036c40: 2027 6561 7069 5072 6976 6174 6544 656c   'eapiPrivateDel
-00036c50: 6574 6541 6c6c 4f70 656e 4f72 6465 7273  eteAllOpenOrders
-00036c60: 270a 2020 2020 2020 2020 656c 6966 206d  '.        elif m
-00036c70: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
-00036c80: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00036c90: 686f 6420 3d20 2766 6170 6950 7269 7661  hod = 'fapiPriva
-00036ca0: 7465 4465 6c65 7465 416c 6c4f 7065 6e4f  teDeleteAllOpenO
-00036cb0: 7264 6572 7327 0a20 2020 2020 2020 2065  rders'.        e
-00036cc0: 6c69 6620 6d61 726b 6574 5b27 696e 7665  lif market['inve
-00036cd0: 7273 6527 5d3a 0a20 2020 2020 2020 2020  rse']:.         
-00036ce0: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
-00036cf0: 6950 7269 7661 7465 4465 6c65 7465 416c  iPrivateDeleteAl
-00036d00: 6c4f 7065 6e4f 7264 6572 7327 0a20 2020  lOpenOrders'.   
-00036d10: 2020 2020 2065 6c69 6620 2874 7970 6520       elif (type 
-00036d20: 3d3d 2027 6d61 7267 696e 2729 206f 7220  == 'margin') or 
-00036d30: 286d 6172 6769 6e4d 6f64 6520 6973 206e  (marginMode is n
-00036d40: 6f74 204e 6f6e 6529 3a0a 2020 2020 2020  ot None):.      
-00036d50: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-00036d60: 7361 7069 4465 6c65 7465 4d61 7267 696e  sapiDeleteMargin
-00036d70: 4f70 656e 4f72 6465 7273 270a 2020 2020  OpenOrders'.    
-00036d80: 2020 2020 2020 2020 6966 206d 6172 6769          if margi
-00036d90: 6e4d 6f64 6520 3d3d 2027 6973 6f6c 6174  nMode == 'isolat
-00036da0: 6564 273a 0a20 2020 2020 2020 2020 2020  ed':.           
-00036db0: 2020 2020 2072 6571 7565 7374 5b27 6973       request['is
-00036dc0: 4973 6f6c 6174 6564 275d 203d 2054 7275  Isolated'] = Tru
-00036dd0: 650a 2020 2020 2020 2020 7265 7370 6f6e  e.        respon
-00036de0: 7365 203d 2067 6574 6174 7472 2873 656c  se = getattr(sel
-00036df0: 662c 206d 6574 686f 6429 2873 656c 662e  f, method)(self.
-00036e00: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00036e10: 7175 6572 7929 290a 2020 2020 2020 2020  query)).        
-00036e20: 6966 2069 7369 6e73 7461 6e63 6528 7265  if isinstance(re
-00036e30: 7370 6f6e 7365 2c20 6c69 7374 293a 0a20  sponse, list):. 
-00036e40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00036e50: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
-00036e60: 6572 7328 7265 7370 6f6e 7365 2c20 6d61  ers(response, ma
-00036e70: 726b 6574 290a 2020 2020 2020 2020 656c  rket).        el
-00036e80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00036e90: 7265 7475 726e 2072 6573 706f 6e73 650a  return response.
-00036ea0: 0a20 2020 2064 6566 2066 6574 6368 5f6f  .    def fetch_o
-00036eb0: 7264 6572 5f74 7261 6465 7328 7365 6c66  rder_trades(self
-00036ec0: 2c20 6964 3a20 7374 722c 2073 796d 626f  , id: str, symbo
-00036ed0: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00036ee0: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-00036ef0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-00036f00: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-00036f10: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-00036f20: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00036f30: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00036f40: 2020 2066 6574 6368 2061 6c6c 2074 6865     fetch all the
-00036f50: 2074 7261 6465 7320 6d61 6465 2066 726f   trades made fro
-00036f60: 6d20 6120 7369 6e67 6c65 206f 7264 6572  m a single order
-00036f70: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00036f80: 7374 7220 6964 3a20 6f72 6465 7220 6964  str id: order id
-00036f90: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00036fa0: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
-00036fb0: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
-00036fc0: 6c0a 2020 2020 2020 2020 3a70 6172 616d  l.        :param
-00036fd0: 2069 6e74 7c4e 6f6e 6520 7369 6e63 653a   int|None since:
-00036fe0: 2074 6865 2065 6172 6c69 6573 7420 7469   the earliest ti
-00036ff0: 6d65 2069 6e20 6d73 2074 6f20 6665 7463  me in ms to fetc
-00037000: 6820 7472 6164 6573 2066 6f72 0a20 2020  h trades for.   
-00037010: 2020 2020 203a 7061 7261 6d20 696e 747c       :param int|
-00037020: 4e6f 6e65 206c 696d 6974 3a20 7468 6520  None limit: the 
-00037030: 6d61 7869 6d75 6d20 6e75 6d62 6572 206f  maximum number o
-00037040: 6620 7472 6164 6573 2074 6f20 7265 7472  f trades to retr
-00037050: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
-00037060: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-00037070: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-00037080: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-00037090: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
-000370a0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-000370b0: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-000370c0: 6120 6c69 7374 206f 6620 6074 7261 6465  a list of `trade
-000370d0: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
-000370e0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-000370f0: 6f6d 2f23 2f3f 6964 3d74 7261 6465 2d73  om/#/?id=trade-s
-00037100: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00037110: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-00037120: 6620 7379 6d62 6f6c 2069 7320 4e6f 6e65  f symbol is None
-00037130: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00037140: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
-00037150: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
-00037160: 2720 6665 7463 684f 7264 6572 5472 6164  ' fetchOrderTrad
-00037170: 6573 2829 2072 6571 7569 7265 7320 6120  es() requires a 
-00037180: 7379 6d62 6f6c 2061 7267 756d 656e 7427  symbol argument'
-00037190: 290a 2020 2020 2020 2020 7365 6c66 2e6c  ).        self.l
-000371a0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-000371b0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-000371c0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-000371d0: 6c29 0a20 2020 2020 2020 2074 7970 6520  l).        type 
-000371e0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-000371f0: 6e67 2870 6172 616d 732c 2027 7479 7065  ng(params, 'type
-00037200: 272c 206d 6172 6b65 745b 2774 7970 6527  ', market['type'
-00037210: 5d29 0a20 2020 2020 2020 2070 6172 616d  ]).        param
-00037220: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-00037230: 7261 6d73 2c20 2774 7970 6527 290a 2020  rams, 'type').  
-00037240: 2020 2020 2020 6966 2074 7970 6520 213d        if type !=
-00037250: 2027 7370 6f74 273a 0a20 2020 2020 2020   'spot':.       
-00037260: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-00037270: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-00037280: 2b20 2720 6665 7463 684f 7264 6572 5472  + ' fetchOrderTr
-00037290: 6164 6573 2829 2073 7570 706f 7274 7320  ades() supports 
-000372a0: 7370 6f74 206d 6172 6b65 7473 206f 6e6c  spot markets onl
-000372b0: 7927 290a 2020 2020 2020 2020 7265 7175  y').        requ
-000372c0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-000372d0: 2020 2020 276f 7264 6572 4964 273a 2069      'orderId': i
-000372e0: 642c 0a20 2020 2020 2020 207d 0a20 2020  d,.        }.   
-000372f0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00037300: 2e66 6574 6368 5f6d 795f 7472 6164 6573  .fetch_my_trades
-00037310: 2873 796d 626f 6c2c 2073 696e 6365 2c20  (symbol, since, 
-00037320: 6c69 6d69 742c 2073 656c 662e 6578 7465  limit, self.exte
-00037330: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-00037340: 6d73 2929 0a0a 2020 2020 6465 6620 6665  ms))..    def fe
-00037350: 7463 685f 6d79 5f74 7261 6465 7328 7365  tch_my_trades(se
-00037360: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
-00037370: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
-00037380: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
-00037390: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
-000373a0: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
-000373b0: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
-000373c0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-000373d0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-000373e0: 6820 616c 6c20 7472 6164 6573 206d 6164  h all trades mad
-000373f0: 6520 6279 2074 6865 2075 7365 720a 2020  e by the user.  
-00037400: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00037410: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
-00037420: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
-00037430: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00037440: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
-00037450: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
-00037460: 696e 206d 7320 746f 2066 6574 6368 2074  in ms to fetch t
-00037470: 7261 6465 7320 666f 720a 2020 2020 2020  rades for.      
-00037480: 2020 3a70 6172 616d 2069 6e74 7c4e 6f6e    :param int|Non
-00037490: 6520 6c69 6d69 743a 2074 6865 206d 6178  e limit: the max
-000374a0: 696d 756d 206e 756d 6265 7220 6f66 2074  imum number of t
-000374b0: 7261 6465 7320 7374 7275 6374 7572 6573  rades structures
-000374c0: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
-000374d0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-000374e0: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-000374f0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-00037500: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
-00037510: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
-00037520: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00037530: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
-00037540: 6620 6074 7261 6465 2073 7472 7563 7475  f `trade structu
-00037550: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00037560: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00037570: 3d74 7261 6465 2d73 7472 7563 7475 7265  =trade-structure
-00037580: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-00037590: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-000375a0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-000375b0: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
-000375c0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-000375d0: 204e 6f6e 650a 2020 2020 2020 2020 7479   None.        ty
-000375e0: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-000375f0: 2020 6d65 7468 6f64 203d 204e 6f6e 650a    method = None.
-00037600: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
-00037610: 6465 203d 204e 6f6e 650a 2020 2020 2020  de = None.      
-00037620: 2020 6966 2073 796d 626f 6c20 6973 206e    if symbol is n
-00037630: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00037640: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-00037650: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-00037660: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00037670: 7175 6573 745b 2773 796d 626f 6c27 5d20  quest['symbol'] 
-00037680: 3d20 6d61 726b 6574 5b27 6964 275d 0a20  = market['id']. 
-00037690: 2020 2020 2020 2074 7970 652c 2070 6172         type, par
-000376a0: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-000376b0: 655f 6d61 726b 6574 5f74 7970 655f 616e  e_market_type_an
-000376c0: 645f 7061 7261 6d73 2827 6665 7463 684d  d_params('fetchM
-000376d0: 7954 7261 6465 7327 2c20 6d61 726b 6574  yTrades', market
-000376e0: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
-000376f0: 2020 6966 2074 7970 6520 3d3d 2027 6f70    if type == 'op
-00037700: 7469 6f6e 273a 0a20 2020 2020 2020 2020  tion':.         
-00037710: 2020 206d 6574 686f 6420 3d20 2765 6170     method = 'eap
-00037720: 6950 7269 7661 7465 4765 7455 7365 7254  iPrivateGetUserT
-00037730: 7261 6465 7327 0a20 2020 2020 2020 2065  rades'.        e
-00037740: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00037750: 2073 656c 662e 6368 6563 6b5f 7265 7175   self.check_requ
-00037760: 6972 6564 5f73 796d 626f 6c28 2766 6574  ired_symbol('fet
-00037770: 6368 4d79 5472 6164 6573 272c 2073 796d  chMyTrades', sym
-00037780: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-00037790: 206d 6172 6769 6e4d 6f64 652c 2070 6172   marginMode, par
-000377a0: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-000377b0: 655f 6d61 7267 696e 5f6d 6f64 655f 616e  e_margin_mode_an
-000377c0: 645f 7061 7261 6d73 2827 6665 7463 684d  d_params('fetchM
-000377d0: 7954 7261 6465 7327 2c20 7061 7261 6d73  yTrades', params
-000377e0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-000377f0: 2074 7970 6520 3d3d 2027 7370 6f74 2720   type == 'spot' 
-00037800: 6f72 2074 7970 6520 3d3d 2027 6d61 7267  or type == 'marg
-00037810: 696e 273a 0a20 2020 2020 2020 2020 2020  in':.           
-00037820: 2020 2020 206d 6574 686f 6420 3d20 2770       method = 'p
-00037830: 7269 7661 7465 4765 744d 7954 7261 6465  rivateGetMyTrade
-00037840: 7327 0a20 2020 2020 2020 2020 2020 2020  s'.             
-00037850: 2020 2069 6620 2874 7970 6520 3d3d 2027     if (type == '
-00037860: 6d61 7267 696e 2729 206f 7220 286d 6172  margin') or (mar
-00037870: 6769 6e4d 6f64 6520 6973 206e 6f74 204e  ginMode is not N
-00037880: 6f6e 6529 3a0a 2020 2020 2020 2020 2020  one):.          
-00037890: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-000378a0: 203d 2027 7361 7069 4765 744d 6172 6769   = 'sapiGetMargi
-000378b0: 6e4d 7954 7261 6465 7327 0a20 2020 2020  nMyTrades'.     
-000378c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000378d0: 6620 6d61 7267 696e 4d6f 6465 203d 3d20  f marginMode == 
-000378e0: 2769 736f 6c61 7465 6427 3a0a 2020 2020  'isolated':.    
-000378f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037900: 2020 2020 7265 7175 6573 745b 2769 7349      request['isI
-00037910: 736f 6c61 7465 6427 5d20 3d20 5472 7565  solated'] = True
-00037920: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00037930: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
-00037940: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00037950: 2020 2020 6d65 7468 6f64 203d 2027 6661      method = 'fa
-00037960: 7069 5072 6976 6174 6547 6574 5573 6572  piPrivateGetUser
-00037970: 5472 6164 6573 270a 2020 2020 2020 2020  Trades'.        
-00037980: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-00037990: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
-000379a0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-000379b0: 6f64 203d 2027 6461 7069 5072 6976 6174  od = 'dapiPrivat
-000379c0: 6547 6574 5573 6572 5472 6164 6573 270a  eGetUserTrades'.
-000379d0: 2020 2020 2020 2020 656e 6454 696d 6520          endTime 
-000379e0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-000379f0: 6765 725f 3228 7061 7261 6d73 2c20 2775  ger_2(params, 'u
-00037a00: 6e74 696c 272c 2027 656e 6454 696d 6527  ntil', 'endTime'
-00037a10: 290a 2020 2020 2020 2020 6966 2073 696e  ).        if sin
-00037a20: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
-00037a30: 2020 2020 2020 2020 2020 2020 7374 6172              star
-00037a40: 7454 696d 6520 3d20 7369 6e63 650a 2020  tTime = since.  
-00037a50: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00037a60: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
-00037a70: 2073 7461 7274 5469 6d65 0a20 2020 2020   startTime.     
-00037a80: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
-00037a90: 2f62 696e 616e 6365 2d64 6f63 732e 6769  /binance-docs.gi
-00037aa0: 7468 7562 2e69 6f2f 6170 6964 6f63 732f  thub.io/apidocs/
-00037ab0: 6675 7475 7265 732f 656e 2f23 6163 636f  futures/en/#acco
-00037ac0: 756e 742d 7472 6164 652d 6c69 7374 2d75  unt-trade-list-u
-00037ad0: 7365 725f 6461 7461 0a20 2020 2020 2020  ser_data.       
-00037ae0: 2020 2020 2023 2049 6620 7374 6172 7454       # If startT
-00037af0: 696d 6520 616e 6420 656e 6454 696d 6520  ime and endTime 
-00037b00: 6172 6520 626f 7468 206e 6f74 2073 656e  are both not sen
-00037b10: 742c 2074 6865 6e20 7468 6520 6c61 7374  t, then the last
-00037b20: 2037 2064 6179 7327 2064 6174 6120 7769   7 days' data wi
-00037b30: 6c6c 2062 6520 7265 7475 726e 6564 2e0a  ll be returned..
-00037b40: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-00037b50: 6520 7469 6d65 2062 6574 7765 656e 2073  e time between s
-00037b60: 7461 7274 5469 6d65 2061 6e64 2065 6e64  tartTime and end
-00037b70: 5469 6d65 2063 616e 6e6f 7420 6265 206c  Time cannot be l
-00037b80: 6f6e 6765 7220 7468 616e 2037 2064 6179  onger than 7 day
-00037b90: 732e 0a20 2020 2020 2020 2020 2020 2023  s..            #
-00037ba0: 2054 6865 2070 6172 616d 6574 6572 2066   The parameter f
-00037bb0: 726f 6d49 6420 6361 6e6e 6f74 2062 6520  romId cannot be 
-00037bc0: 7365 6e74 2077 6974 6820 7374 6172 7454  sent with startT
-00037bd0: 696d 6520 6f72 2065 6e64 5469 6d65 2e0a  ime or endTime..
-00037be0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-00037bf0: 656e 7454 696d 6573 7461 6d70 203d 2073  entTimestamp = s
-00037c00: 656c 662e 6d69 6c6c 6973 6563 6f6e 6473  elf.milliseconds
-00037c10: 2829 0a20 2020 2020 2020 2020 2020 206f  ().            o
-00037c20: 6e65 5765 656b 203d 2037 202a 2032 3420  neWeek = 7 * 24 
-00037c30: 2a20 3630 202a 2036 3020 2a20 3130 3030  * 60 * 60 * 1000
-00037c40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00037c50: 2863 7572 7265 6e74 5469 6d65 7374 616d  (currentTimestam
-00037c60: 7020 2d20 7374 6172 7454 696d 6529 203e  p - startTime) >
-00037c70: 3d20 6f6e 6557 6565 6b3a 0a20 2020 2020  = oneWeek:.     
-00037c80: 2020 2020 2020 2020 2020 2069 6620 2865             if (e
-00037c90: 6e64 5469 6d65 2069 7320 4e6f 6e65 2920  ndTime is None) 
-00037ca0: 616e 6420 6d61 726b 6574 5b27 6c69 6e65  and market['line
-00037cb0: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
-00037cc0: 2020 2020 2020 2020 2020 656e 6454 696d            endTim
-00037cd0: 6520 3d20 7365 6c66 2e73 756d 2873 7461  e = self.sum(sta
-00037ce0: 7274 5469 6d65 2c20 6f6e 6557 6565 6b29  rtTime, oneWeek)
-00037cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037d00: 2020 2020 2065 6e64 5469 6d65 203d 206d       endTime = m
-00037d10: 696e 2865 6e64 5469 6d65 2c20 6375 7272  in(endTime, curr
-00037d20: 656e 7454 696d 6573 7461 6d70 290a 2020  entTimestamp).  
-00037d30: 2020 2020 2020 6966 2065 6e64 5469 6d65        if endTime
-00037d40: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00037d50: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00037d60: 745b 2765 6e64 5469 6d65 275d 203d 2065  t['endTime'] = e
-00037d70: 6e64 5469 6d65 0a20 2020 2020 2020 2020  ndTime.         
-00037d80: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
-00037d90: 2e6f 6d69 7428 7061 7261 6d73 2c20 5b27  .omit(params, ['
-00037da0: 656e 6454 696d 6527 2c20 2775 6e74 696c  endTime', 'until
-00037db0: 275d 290a 2020 2020 2020 2020 6966 206c  ']).        if l
-00037dc0: 696d 6974 2069 7320 6e6f 7420 4e6f 6e65  imit is not None
-00037dd0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00037de0: 2028 7479 7065 203d 3d20 276f 7074 696f   (type == 'optio
-00037df0: 6e27 2920 6f72 206d 6172 6b65 745b 2763  n') or market['c
-00037e00: 6f6e 7472 6163 7427 5d3a 0a20 2020 2020  ontract']:.     
-00037e10: 2020 2020 2020 2020 2020 206c 696d 6974             limit
-00037e20: 203d 206d 696e 286c 696d 6974 2c20 3130   = min(limit, 10
-00037e30: 3030 2920 2023 2061 626f 7665 2031 3030  00)  # above 100
-00037e40: 302c 2072 6574 7572 6e73 2065 7272 6f72  0, returns error
-00037e50: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00037e60: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
-00037e70: 6c69 6d69 740a 2020 2020 2020 2020 7265  limit.        re
-00037e80: 7370 6f6e 7365 203d 2067 6574 6174 7472  sponse = getattr
-00037e90: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
-00037ea0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-00037eb0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-00037ec0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00037ed0: 2073 706f 7420 7472 6164 650a 2020 2020   spot trade.    
-00037ee0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00037ef0: 2020 2020 5b0a 2020 2020 2020 2020 2320      [.        # 
-00037f00: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00037f10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00037f20: 2273 796d 626f 6c22 3a20 2242 4e42 4254  "symbol": "BNBBT
-00037f30: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
-00037f40: 2020 2020 2020 2020 2020 2269 6422 3a20            "id": 
-00037f50: 3238 3435 372c 0a20 2020 2020 2020 2023  28457,.        #
-00037f60: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00037f70: 6465 7249 6422 3a20 3130 3032 3334 2c0a  derId": 100234,.
-00037f80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00037f90: 2020 2020 2020 2270 7269 6365 223a 2022        "price": "
-00037fa0: 342e 3030 3030 3031 3030 222c 0a20 2020  4.00000100",.   
-00037fb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00037fc0: 2020 2022 7174 7922 3a20 2231 322e 3030     "qty": "12.00
-00037fd0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-00037fe0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00037ff0: 636f 6d6d 6973 7369 6f6e 223a 2022 3130  commission": "10
-00038000: 2e31 3030 3030 3030 3022 2c0a 2020 2020  .10000000",.    
-00038010: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038020: 2020 2263 6f6d 6d69 7373 696f 6e41 7373    "commissionAss
-00038030: 6574 223a 2022 424e 4222 2c0a 2020 2020  et": "BNB",.    
-00038040: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038050: 2020 2274 696d 6522 3a20 3134 3939 3836    "time": 149986
-00038060: 3535 3439 3539 302c 0a20 2020 2020 2020  5549590,.       
-00038070: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00038080: 6973 4275 7965 7222 3a20 5472 7565 2c0a  isBuyer": True,.
-00038090: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000380a0: 2020 2020 2020 2269 734d 616b 6572 223a        "isMaker":
-000380b0: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-000380c0: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
-000380d0: 7342 6573 744d 6174 6368 223a 2054 7275  sBestMatch": Tru
-000380e0: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-000380f0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-00038100: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
-00038110: 0a20 2020 2020 2020 2023 2066 7574 7572  .        # futur
-00038120: 6573 2074 7261 6465 0a20 2020 2020 2020  es trade.       
-00038130: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-00038140: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-00038150: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00038160: 2020 2020 2020 2020 2020 2020 2022 6163               "ac
-00038170: 636f 756e 7449 6422 3a20 3230 2c0a 2020  countId": 20,.  
-00038180: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038190: 2020 2020 2262 7579 6572 223a 2046 616c      "buyer": Fal
-000381a0: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
-000381b0: 2020 2020 2020 2020 2020 2263 6f6d 6d69            "commi
-000381c0: 7373 696f 6e22 3a20 222d 302e 3037 3831  ssion": "-0.0781
-000381d0: 3930 3130 222c 0a20 2020 2020 2020 2023  9010",.        #
-000381e0: 2020 2020 2020 2020 2020 2020 2022 636f               "co
-000381f0: 6d6d 6973 7369 6f6e 4173 7365 7422 3a20  mmissionAsset": 
-00038200: 2255 5344 5422 2c0a 2020 2020 2020 2020  "USDT",.        
-00038210: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
-00038220: 6f75 6e74 6572 5061 7274 7949 6422 3a20  ounterPartyId": 
-00038230: 3635 332c 0a20 2020 2020 2020 2023 2020  653,.        #  
-00038240: 2020 2020 2020 2020 2020 2022 6964 223a             "id":
-00038250: 2036 3938 3735 392c 0a20 2020 2020 2020   698759,.       
-00038260: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00038270: 6d61 6b65 7222 3a20 4661 6c73 652c 0a20  maker": False,. 
-00038280: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00038290: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
-000382a0: 3235 3835 3138 3133 2c0a 2020 2020 2020  25851813,.      
-000382b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000382c0: 2270 7269 6365 223a 2022 3738 3139 2e30  "price": "7819.0
-000382d0: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
-000382e0: 2020 2020 2020 2020 2020 2271 7479 223a            "qty":
-000382f0: 2022 302e 3030 3222 2c0a 2020 2020 2020   "0.002",.      
-00038300: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00038310: 2271 756f 7465 5174 7922 3a20 2230 2e30  "quoteQty": "0.0
-00038320: 3135 3633 222c 0a20 2020 2020 2020 2023  1563",.        #
-00038330: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-00038340: 616c 697a 6564 506e 6c22 3a20 222d 302e  alizedPnl": "-0.
-00038350: 3931 3533 3939 3939 222c 0a20 2020 2020  91539999",.     
-00038360: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038370: 2022 7369 6465 223a 2022 5345 4c4c 222c   "side": "SELL",
-00038380: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038390: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-000383a0: 2022 4254 4355 5344 5422 2c0a 2020 2020   "BTCUSDT",.    
-000383b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000383c0: 2020 2274 696d 6522 3a20 3135 3639 3531    "time": 156951
-000383d0: 3439 3738 3032 300a 2020 2020 2020 2020  4978020.        
-000383e0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
-000383f0: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
-00038400: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00038410: 6f70 7469 6f6e 7328 6561 7069 290a 2020  options(eapi).  
-00038420: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00038430: 2320 2020 2020 5b0a 2020 2020 2020 2020  #     [.        
-00038440: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
-00038450: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038460: 2020 2269 6422 3a20 3131 3235 3839 3939    "id": 11258999
-00038470: 3036 3834 3432 3236 3031 322c 0a20 2020  06844226012,.   
-00038480: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038490: 2020 2022 7472 6164 6549 6422 3a20 3733     "tradeId": 73
-000384a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000384b0: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
-000384c0: 223a 2034 3633 3837 3631 3130 3038 3433  ": 4638761100843
-000384d0: 3034 3037 3638 2c0a 2020 2020 2020 2020  040768,.        
-000384e0: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
-000384f0: 796d 626f 6c22 3a20 2245 5448 2d32 3330  ymbol": "ETH-230
-00038500: 3231 312d 3135 3030 2d43 222c 0a20 2020  211-1500-C",.   
-00038510: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038520: 2020 2022 7072 6963 6522 3a20 2231 382e     "price": "18.
-00038530: 3730 3030 3030 3030 222c 0a20 2020 2020  70000000",.     
-00038540: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038550: 2022 7175 616e 7469 7479 223a 2022 2d30   "quantity": "-0
-00038560: 2e35 3730 3030 3030 3022 2c0a 2020 2020  .57000000",.    
-00038570: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038580: 2020 2266 6565 223a 2022 302e 3137 3330    "fee": "0.1730
-00038590: 3538 3930 222c 0a20 2020 2020 2020 2023  5890",.        #
-000385a0: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-000385b0: 616c 697a 6564 5072 6f66 6974 223a 2022  alizedProfit": "
-000385c0: 2d33 2e35 3334 3030 3030 3022 2c0a 2020  -3.53400000",.  
-000385d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000385e0: 2020 2020 2273 6964 6522 3a20 2253 454c      "side": "SEL
-000385f0: 4c22 2c0a 2020 2020 2020 2020 2320 2020  L",.        #   
-00038600: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
-00038610: 3a20 224c 494d 4954 222c 0a20 2020 2020  : "LIMIT",.     
-00038620: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038630: 2022 766f 6c61 7469 6c69 7479 223a 2022   "volatility": "
-00038640: 302e 3330 3030 3030 3030 222c 0a20 2020  0.30000000",.   
-00038650: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038660: 2020 2022 6c69 7175 6964 6974 7922 3a20     "liquidity": 
-00038670: 224d 414b 4552 222c 0a20 2020 2020 2020  "MAKER",.       
-00038680: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00038690: 7469 6d65 223a 2031 3637 3630 3835 3231  time": 167608521
-000386a0: 3638 3435 2c0a 2020 2020 2020 2020 2320  6845,.        # 
-000386b0: 2020 2020 2020 2020 2020 2020 2270 7269              "pri
-000386c0: 6365 5363 616c 6522 3a20 312c 0a20 2020  ceScale": 1,.   
-000386d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000386e0: 2020 2022 7175 616e 7469 7479 5363 616c     "quantityScal
-000386f0: 6522 3a20 322c 0a20 2020 2020 2020 2023  e": 2,.        #
-00038700: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
-00038710: 7469 6f6e 5369 6465 223a 2022 4341 4c4c  tionSide": "CALL
-00038720: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00038730: 2020 2020 2020 2020 2022 7175 6f74 6541           "quoteA
-00038740: 7373 6574 223a 2022 5553 4454 220a 2020  sset": "USDT".  
-00038750: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038760: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00038770: 5d0a 2020 2020 2020 2020 230a 2020 2020  ].        #.    
-00038780: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00038790: 7061 7273 655f 7472 6164 6573 2872 6573  parse_trades(res
-000387a0: 706f 6e73 652c 206d 6172 6b65 742c 2073  ponse, market, s
-000387b0: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
-000387c0: 2020 6465 6620 6665 7463 685f 6d79 5f64    def fetch_my_d
-000387d0: 7573 745f 7472 6164 6573 2873 656c 662c  ust_trades(self,
-000387e0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
-000387f0: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
-00038800: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
-00038810: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
-00038820: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
-00038830: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00038840: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-00038850: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
-00038860: 6c6c 2064 7573 7420 7472 6164 6573 206d  ll dust trades m
-00038870: 6164 6520 6279 2074 6865 2075 7365 720a  ade by the user.
-00038880: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00038890: 7472 7c4e 6f6e 6520 7379 6d62 6f6c 3a20  tr|None symbol: 
-000388a0: 6e6f 7420 7573 6564 2062 7920 6269 6e61  not used by bina
-000388b0: 6e63 6520 6665 7463 684d 7944 7573 7454  nce fetchMyDustT
-000388c0: 7261 6465 7328 290a 2020 2020 2020 2020  rades().        
-000388d0: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
-000388e0: 7369 6e63 653a 2074 6865 2065 6172 6c69  since: the earli
-000388f0: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
-00038900: 6f20 6665 7463 6820 6d79 2064 7573 7420  o fetch my dust 
-00038910: 7472 6164 6573 2066 6f72 0a20 2020 2020  trades for.     
-00038920: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00038930: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
-00038940: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
-00038950: 6475 7374 2074 7261 6465 7320 746f 2072  dust trades to r
-00038960: 6574 7269 6576 650a 2020 2020 2020 2020  etrieve.        
-00038970: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-00038980: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-00038990: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-000389a0: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
-000389b0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-000389c0: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
-000389d0: 5d3a 2061 206c 6973 7420 6f66 2060 7472  ]: a list of `tr
-000389e0: 6164 6520 7374 7275 6374 7572 6573 203c  ade structures <
-000389f0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00038a00: 742e 636f 6d2f 232f 3f69 643d 7472 6164  t.com/#/?id=trad
-00038a10: 652d 7374 7275 6374 7572 653e 600a 2020  e-structure>`.  
-00038a20: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00038a30: 2020 230a 2020 2020 2020 2020 2320 4269    #.        # Bi
-00038a40: 6e61 6e63 6520 7072 6f76 6964 6573 2061  nance provides a
-00038a50: 6e20 6f70 706f 7274 756e 6974 7920 746f  n opportunity to
-00038a60: 2074 7261 6465 2069 6e73 6967 6e69 6669   trade insignifi
-00038a70: 6361 6e74 2869 2e65 2e20 6e6f 6e2d 7472  cant(i.e. non-tr
-00038a80: 6164 6162 6c65 2061 6e64 206e 6f6e 2d77  adable and non-w
-00038a90: 6974 6864 7261 7761 626c 6529 0a20 2020  ithdrawable).   
-00038aa0: 2020 2020 2023 2074 6f6b 656e 206c 6566       # token lef
-00038ab0: 746f 7665 7273 286f 6620 616e 7920 6173  tovers(of any as
-00038ac0: 7365 7429 2069 6e74 6f20 6042 4e42 6020  set) into `BNB` 
-00038ad0: 636f 696e 2077 6869 6368 2069 6e20 7475  coin which in tu
-00038ae0: 726e 2063 616e 2062 6520 7573 6564 2074  rn can be used t
-00038af0: 6f20 7061 7920 7472 6164 696e 6720 6665  o pay trading fe
-00038b00: 6573 2077 6974 6820 6974 2e0a 2020 2020  es with it..    
-00038b10: 2020 2020 2320 5468 6520 636f 7272 6573      # The corres
-00038b20: 706f 6e64 696e 6720 7472 6164 6573 2068  ponding trades h
-00038b30: 6973 746f 7279 2069 7320 6361 6c6c 6564  istory is called
-00038b40: 2074 6865 2060 4475 7374 204c 6f67 6020   the `Dust Log` 
-00038b50: 616e 6420 6361 6e20 6265 2072 6571 7565  and can be reque
-00038b60: 7374 6564 2076 6961 2074 6865 2066 6f6c  sted via the fol
-00038b70: 6c6f 7769 6e67 2065 6e64 2d70 6f69 6e74  lowing end-point
-00038b80: 3a0a 2020 2020 2020 2020 2320 6874 7470  :.        # http
-00038b90: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f62  s://github.com/b
-00038ba0: 696e 616e 6365 2d65 7863 6861 6e67 652f  inance-exchange/
-00038bb0: 6269 6e61 6e63 652d 6f66 6669 6369 616c  binance-official
-00038bc0: 2d61 7069 2d64 6f63 732f 626c 6f62 2f6d  -api-docs/blob/m
-00038bd0: 6173 7465 722f 7761 7069 2d61 7069 2e6d  aster/wapi-api.m
-00038be0: 6423 6475 7374 6c6f 672d 7573 6572 5f64  d#dustlog-user_d
-00038bf0: 6174 610a 2020 2020 2020 2020 230a 2020  ata.        #.  
-00038c00: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
-00038c10: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00038c20: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
-00038c30: 2020 2020 2020 2069 6620 7369 6e63 6520         if since 
-00038c40: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00038c50: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00038c60: 5b27 7374 6172 7454 696d 6527 5d20 3d20  ['startTime'] = 
-00038c70: 7369 6e63 650a 2020 2020 2020 2020 2020  since.          
-00038c80: 2020 7265 7175 6573 745b 2765 6e64 5469    request['endTi
-00038c90: 6d65 275d 203d 2073 656c 662e 7375 6d28  me'] = self.sum(
-00038ca0: 7369 6e63 652c 2037 3737 3630 3030 3030  since, 777600000
-00038cb0: 3029 0a20 2020 2020 2020 2072 6573 706f  0).        respo
-00038cc0: 6e73 6520 3d20 7365 6c66 2e73 6170 6947  nse = self.sapiG
-00038cd0: 6574 4173 7365 7444 7269 6262 6c65 7428  etAssetDribblet(
-00038ce0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00038cf0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00038d00: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00038d10: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
-00038d20: 6f74 616c 223a 2022 3422 2c0a 2020 2020  otal": "4",.    
-00038d30: 2020 2020 2320 2020 2020 2020 2275 7365      #       "use
-00038d40: 7241 7373 6574 4472 6962 626c 6574 7322  rAssetDribblets"
-00038d50: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
-00038d60: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00038d70: 2320 2020 2020 2020 2020 2020 226f 7065  #           "ope
-00038d80: 7261 7465 5469 6d65 223a 2022 3136 3237  rateTime": "1627
-00038d90: 3537 3537 3331 3030 3022 2c0a 2020 2020  575731000",.    
-00038da0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038db0: 2274 6f74 616c 5365 7276 6963 6543 6861  "totalServiceCha
-00038dc0: 7267 6541 6d6f 756e 7422 3a20 2230 2e30  rgeAmount": "0.0
-00038dd0: 3030 3031 3435 3322 2c0a 2020 2020 2020  0001453",.      
-00038de0: 2020 2320 2020 2020 2020 2020 2020 2274    #           "t
-00038df0: 6f74 616c 5472 616e 7366 6572 6564 416d  otalTransferedAm
-00038e00: 6f75 6e74 223a 2022 302e 3030 3037 3236  ount": "0.000726
-00038e10: 3933 222c 0a20 2020 2020 2020 2023 2020  93",.        #  
-00038e20: 2020 2020 2020 2020 2022 7472 616e 7349           "transI
-00038e30: 6422 3a20 2237 3038 3939 3831 3538 3633  d": "70899815863
-00038e40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00038e50: 2020 2020 2020 2022 7573 6572 4173 7365         "userAsse
-00038e60: 7444 7269 6262 6c65 7444 6574 6169 6c73  tDribbletDetails
-00038e70: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
-00038e80: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00038e90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038ea0: 2020 2020 2022 6672 6f6d 4173 7365 7422       "fromAsset"
-00038eb0: 3a20 224c 5443 222c 0a20 2020 2020 2020  : "LTC",.       
-00038ec0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00038ed0: 2022 616d 6f75 6e74 223a 2022 302e 3030   "amount": "0.00
-00038ee0: 3030 3036 222c 0a20 2020 2020 2020 2023  0006",.        #
-00038ef0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00038f00: 7472 616e 7366 6572 6564 416d 6f75 6e74  transferedAmount
-00038f10: 223a 2022 302e 3030 3030 3032 3637 222c  ": "0.00000267",
-00038f20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038f30: 2020 2020 2020 2020 2022 7365 7276 6963           "servic
-00038f40: 6543 6861 7267 6541 6d6f 756e 7422 3a20  eChargeAmount": 
-00038f50: 2230 2e30 3030 3030 3030 3522 2c0a 2020  "0.00000005",.  
-00038f60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038f70: 2020 2020 2020 226f 7065 7261 7465 5469        "operateTi
-00038f80: 6d65 223a 2022 3136 3237 3537 3537 3331  me": "1627575731
-00038f90: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-00038fa0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00038fb0: 7261 6e73 4964 223a 2022 3730 3839 3938  ransId": "708998
-00038fc0: 3135 3836 3322 0a20 2020 2020 2020 2023  15863".        #
-00038fd0: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
-00038fe0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038ff0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00039000: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00039010: 2266 726f 6d41 7373 6574 223a 2022 4742  "fromAsset": "GB
-00039020: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
-00039030: 2020 2020 2020 2020 2020 2020 2261 6d6f              "amo
-00039040: 756e 7422 3a20 2230 2e31 3539 3439 3135  unt": "0.1594915
-00039050: 3722 2c0a 2020 2020 2020 2020 2320 2020  7",.        #   
-00039060: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
-00039070: 6e73 6665 7265 6441 6d6f 756e 7422 3a20  nsferedAmount": 
-00039080: 2230 2e30 3030 3732 3432 3622 2c0a 2020  "0.00072426",.  
-00039090: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000390a0: 2020 2020 2020 2273 6572 7669 6365 4368        "serviceCh
-000390b0: 6172 6765 416d 6f75 6e74 223a 2022 302e  argeAmount": "0.
-000390c0: 3030 3030 3134 3438 222c 0a20 2020 2020  00001448",.     
-000390d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000390e0: 2020 2022 6f70 6572 6174 6554 696d 6522     "operateTime"
-000390f0: 3a20 2231 3632 3735 3735 3733 3130 3030  : "1627575731000
-00039100: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00039110: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
-00039120: 7349 6422 3a20 2237 3038 3939 3831 3538  sId": "708998158
-00039130: 3633 220a 2020 2020 2020 2020 2320 2020  63".        #   
-00039140: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00039150: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00039160: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-00039170: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-00039180: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
-00039190: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-000391a0: 2072 6573 756c 7473 203d 2073 656c 662e   results = self.
-000391b0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-000391c0: 6e73 652c 2027 7573 6572 4173 7365 7444  nse, 'userAssetD
-000391d0: 7269 6262 6c65 7473 272c 205b 5d29 0a20  ribblets', []). 
-000391e0: 2020 2020 2020 2072 6f77 7320 3d20 7365         rows = se
-000391f0: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
-00039200: 7265 7370 6f6e 7365 2c20 2774 6f74 616c  response, 'total
-00039210: 272c 2030 290a 2020 2020 2020 2020 6461  ', 0).        da
-00039220: 7461 203d 205b 5d0a 2020 2020 2020 2020  ta = [].        
-00039230: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-00039240: 2c20 726f 7773 293a 0a20 2020 2020 2020  , rows):.       
-00039250: 2020 2020 206c 6f67 7320 3d20 7365 6c66       logs = self
-00039260: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
-00039270: 6c74 735b 695d 2c20 2775 7365 7241 7373  lts[i], 'userAss
-00039280: 6574 4472 6962 626c 6574 4465 7461 696c  etDribbletDetail
-00039290: 7327 2c20 5b5d 290a 2020 2020 2020 2020  s', []).        
-000392a0: 2020 2020 666f 7220 6a20 696e 2072 616e      for j in ran
-000392b0: 6765 2830 2c20 6c65 6e28 6c6f 6773 2929  ge(0, len(logs))
-000392c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000392d0: 2020 6c6f 6773 5b6a 5d5b 2769 7344 7573    logs[j]['isDus
-000392e0: 7454 7261 6465 275d 203d 2054 7275 650a  tTrade'] = True.
-000392f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00039300: 6461 7461 2e61 7070 656e 6428 6c6f 6773  data.append(logs
-00039310: 5b6a 5d29 0a20 2020 2020 2020 2074 7261  [j]).        tra
-00039320: 6465 7320 3d20 7365 6c66 2e70 6172 7365  des = self.parse
-00039330: 5f74 7261 6465 7328 6461 7461 2c20 4e6f  _trades(data, No
-00039340: 6e65 2c20 7369 6e63 652c 206c 696d 6974  ne, since, limit
-00039350: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00039360: 2073 656c 662e 6669 6c74 6572 5f62 795f   self.filter_by_
-00039370: 7369 6e63 655f 6c69 6d69 7428 7472 6164  since_limit(trad
-00039380: 6573 2c20 7369 6e63 652c 206c 696d 6974  es, since, limit
-00039390: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
-000393a0: 5f64 7573 745f 7472 6164 6528 7365 6c66  _dust_trade(self
-000393b0: 2c20 7472 6164 652c 206d 6172 6b65 743d  , trade, market=
-000393c0: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
-000393d0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-000393e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000393f0: 2022 6672 6f6d 4173 7365 7422 3a20 2255   "fromAsset": "U
-00039400: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-00039410: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-00039420: 2230 2e30 3039 3636 3922 2c0a 2020 2020  "0.009669",.    
-00039430: 2020 2020 2320 2020 2020 2020 2274 7261      #       "tra
-00039440: 6e73 6665 7265 6441 6d6f 756e 7422 3a20  nsferedAmount": 
-00039450: 2230 2e30 3030 3032 3939 3222 2c0a 2020  "0.00002992",.  
-00039460: 2020 2020 2020 2320 2020 2020 2020 2273        #       "s
-00039470: 6572 7669 6365 4368 6172 6765 416d 6f75  erviceChargeAmou
-00039480: 6e74 223a 2022 302e 3030 3030 3030 3539  nt": "0.00000059
-00039490: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000394a0: 2020 2022 6f70 6572 6174 6554 696d 6522     "operateTime"
-000394b0: 3a20 2231 3632 3830 3736 3031 3030 3030  : "1628076010000
-000394c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000394d0: 2020 2022 7472 616e 7349 6422 3a20 2237     "transId": "7
-000394e0: 3134 3136 3537 3837 3132 222c 0a20 2020  1416578712",.   
-000394f0: 2020 2020 2023 2020 2020 2020 2022 6973       #       "is
-00039500: 4475 7374 5472 6164 6522 3a20 5472 7565  DustTrade": True
-00039510: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00039520: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00039530: 2020 206f 7264 6572 4964 203d 2073 656c     orderId = sel
-00039540: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-00039550: 6164 652c 2027 7472 616e 7349 6427 290a  ade, 'transId').
-00039560: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
-00039570: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
-00039580: 7465 6765 7228 7472 6164 652c 2027 6f70  teger(trade, 'op
-00039590: 6572 6174 6554 696d 6527 290a 2020 2020  erateTime').    
-000395a0: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
-000395b0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-000395c0: 6728 7472 6164 652c 2027 6672 6f6d 4173  g(trade, 'fromAs
-000395d0: 7365 7427 290a 2020 2020 2020 2020 7472  set').        tr
-000395e0: 6164 6564 4375 7272 656e 6379 203d 2073  adedCurrency = s
-000395f0: 656c 662e 7361 6665 5f63 7572 7265 6e63  elf.safe_currenc
-00039600: 795f 636f 6465 2863 7572 7265 6e63 7949  y_code(currencyI
-00039610: 6429 0a20 2020 2020 2020 2062 6e62 203d  d).        bnb =
-00039620: 2073 656c 662e 6375 7272 656e 6379 2827   self.currency('
-00039630: 424e 4227 290a 2020 2020 2020 2020 6561  BNB').        ea
-00039640: 726e 6564 4375 7272 656e 6379 203d 2062  rnedCurrency = b
-00039650: 6e62 5b27 636f 6465 275d 0a20 2020 2020  nb['code'].     
-00039660: 2020 2061 7070 6c69 6361 6e74 5379 6d62     applicantSymb
-00039670: 6f6c 203d 2065 6172 6e65 6443 7572 7265  ol = earnedCurre
-00039680: 6e63 7920 2b20 272f 2720 2b20 7472 6164  ncy + '/' + trad
-00039690: 6564 4375 7272 656e 6379 0a20 2020 2020  edCurrency.     
-000396a0: 2020 2074 7261 6465 6443 7572 7265 6e63     tradedCurrenc
-000396b0: 7949 7351 756f 7465 203d 2046 616c 7365  yIsQuote = False
-000396c0: 0a20 2020 2020 2020 2069 6620 6170 706c  .        if appl
-000396d0: 6963 616e 7453 796d 626f 6c20 696e 2073  icantSymbol in s
-000396e0: 656c 662e 6d61 726b 6574 733a 0a20 2020  elf.markets:.   
-000396f0: 2020 2020 2020 2020 2074 7261 6465 6443           tradedC
-00039700: 7572 7265 6e63 7949 7351 756f 7465 203d  urrencyIsQuote =
-00039710: 2054 7275 650a 2020 2020 2020 2020 6665   True.        fe
-00039720: 6543 6f73 7453 7472 696e 6720 3d20 7365  eCostString = se
-00039730: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
-00039740: 7261 6465 2c20 2773 6572 7669 6365 4368  rade, 'serviceCh
-00039750: 6172 6765 416d 6f75 6e74 2729 0a20 2020  argeAmount').   
-00039760: 2020 2020 2066 6565 203d 207b 0a20 2020       fee = {.   
-00039770: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
-00039780: 6379 273a 2065 6172 6e65 6443 7572 7265  cy': earnedCurre
-00039790: 6e63 792c 0a20 2020 2020 2020 2020 2020  ncy,.           
-000397a0: 2027 636f 7374 273a 2073 656c 662e 7061   'cost': self.pa
-000397b0: 7273 655f 6e75 6d62 6572 2866 6565 436f  rse_number(feeCo
-000397c0: 7374 5374 7269 6e67 292c 0a20 2020 2020  stString),.     
-000397d0: 2020 207d 0a20 2020 2020 2020 2073 796d     }.        sym
-000397e0: 626f 6c20 3d20 4e6f 6e65 0a20 2020 2020  bol = None.     
-000397f0: 2020 2061 6d6f 756e 7453 7472 696e 6720     amountString 
-00039800: 3d20 4e6f 6e65 0a20 2020 2020 2020 2063  = None.        c
-00039810: 6f73 7453 7472 696e 6720 3d20 4e6f 6e65  ostString = None
-00039820: 0a20 2020 2020 2020 2073 6964 6520 3d20  .        side = 
-00039830: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-00039840: 7472 6164 6564 4375 7272 656e 6379 4973  tradedCurrencyIs
-00039850: 5175 6f74 653a 0a20 2020 2020 2020 2020  Quote:.         
-00039860: 2020 2073 796d 626f 6c20 3d20 6170 706c     symbol = appl
-00039870: 6963 616e 7453 796d 626f 6c0a 2020 2020  icantSymbol.    
-00039880: 2020 2020 2020 2020 616d 6f75 6e74 5374          amountSt
-00039890: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
-000398a0: 5f73 7472 696e 6728 7472 6164 652c 2027  _string(trade, '
-000398b0: 7472 616e 7366 6572 6564 416d 6f75 6e74  transferedAmount
-000398c0: 2729 0a20 2020 2020 2020 2020 2020 2063  ').            c
-000398d0: 6f73 7453 7472 696e 6720 3d20 7365 6c66  ostString = self
-000398e0: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
-000398f0: 6465 2c20 2761 6d6f 756e 7427 290a 2020  de, 'amount').  
-00039900: 2020 2020 2020 2020 2020 7369 6465 203d            side =
-00039910: 2027 6275 7927 0a20 2020 2020 2020 2065   'buy'.        e
-00039920: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00039930: 2073 796d 626f 6c20 3d20 7472 6164 6564   symbol = traded
-00039940: 4375 7272 656e 6379 202b 2027 2f27 202b  Currency + '/' +
-00039950: 2065 6172 6e65 6443 7572 7265 6e63 790a   earnedCurrency.
-00039960: 2020 2020 2020 2020 2020 2020 616d 6f75              amou
-00039970: 6e74 5374 7269 6e67 203d 2073 656c 662e  ntString = self.
-00039980: 7361 6665 5f73 7472 696e 6728 7472 6164  safe_string(trad
-00039990: 652c 2027 616d 6f75 6e74 2729 0a20 2020  e, 'amount').   
-000399a0: 2020 2020 2020 2020 2063 6f73 7453 7472           costStr
-000399b0: 696e 6720 3d20 7365 6c66 2e73 6166 655f  ing = self.safe_
-000399c0: 7374 7269 6e67 2874 7261 6465 2c20 2774  string(trade, 't
-000399d0: 7261 6e73 6665 7265 6441 6d6f 756e 7427  ransferedAmount'
-000399e0: 290a 2020 2020 2020 2020 2020 2020 7369  ).            si
-000399f0: 6465 203d 2027 7365 6c6c 270a 2020 2020  de = 'sell'.    
-00039a00: 2020 2020 7072 6963 6553 7472 696e 6720      priceString 
-00039a10: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-00039a20: 6620 636f 7374 5374 7269 6e67 2069 7320  f costString is 
-00039a30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00039a40: 2020 2020 2020 6966 2061 6d6f 756e 7453        if amountS
-00039a50: 7472 696e 673a 0a20 2020 2020 2020 2020  tring:.         
-00039a60: 2020 2020 2020 2070 7269 6365 5374 7269         priceStri
-00039a70: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
-00039a80: 696e 675f 6469 7628 636f 7374 5374 7269  ing_div(costStri
-00039a90: 6e67 2c20 616d 6f75 6e74 5374 7269 6e67  ng, amountString
-00039aa0: 290a 2020 2020 2020 2020 6964 203d 204e  ).        id = N
-00039ab0: 6f6e 650a 2020 2020 2020 2020 616d 6f75  one.        amou
-00039ac0: 6e74 203d 2073 656c 662e 7061 7273 655f  nt = self.parse_
-00039ad0: 6e75 6d62 6572 2861 6d6f 756e 7453 7472  number(amountStr
-00039ae0: 696e 6729 0a20 2020 2020 2020 2070 7269  ing).        pri
-00039af0: 6365 203d 2073 656c 662e 7061 7273 655f  ce = self.parse_
-00039b00: 6e75 6d62 6572 2870 7269 6365 5374 7269  number(priceStri
-00039b10: 6e67 290a 2020 2020 2020 2020 636f 7374  ng).        cost
-00039b20: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
-00039b30: 6d62 6572 2863 6f73 7453 7472 696e 6729  mber(costString)
-00039b40: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
-00039b50: 4e6f 6e65 0a20 2020 2020 2020 2074 616b  None.        tak
-00039b60: 6572 4f72 4d61 6b65 7220 3d20 4e6f 6e65  erOrMaker = None
-00039b70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00039b80: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
-00039b90: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
-00039ba0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
-00039bb0: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
-00039bc0: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-00039bd0: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-00039be0: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
-00039bf0: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-00039c00: 273a 2073 796d 626f 6c2c 0a20 2020 2020  ': symbol,.     
-00039c10: 2020 2020 2020 2027 6f72 6465 7227 3a20         'order': 
-00039c20: 6f72 6465 7249 642c 0a20 2020 2020 2020  orderId,.       
-00039c30: 2020 2020 2027 7479 7065 273a 2074 7970       'type': typ
-00039c40: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00039c50: 7461 6b65 724f 724d 616b 6572 273a 2074  takerOrMaker': t
-00039c60: 616b 6572 4f72 4d61 6b65 722c 0a20 2020  akerOrMaker,.   
-00039c70: 2020 2020 2020 2020 2027 7369 6465 273a           'side':
-00039c80: 2073 6964 652c 0a20 2020 2020 2020 2020   side,.         
-00039c90: 2020 2027 616d 6f75 6e74 273a 2061 6d6f     'amount': amo
-00039ca0: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
-00039cb0: 2027 7072 6963 6527 3a20 7072 6963 652c   'price': price,
-00039cc0: 0a20 2020 2020 2020 2020 2020 2027 636f  .            'co
-00039cd0: 7374 273a 2063 6f73 742c 0a20 2020 2020  st': cost,.     
-00039ce0: 2020 2020 2020 2027 6665 6527 3a20 6665         'fee': fe
-00039cf0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00039d00: 696e 666f 273a 2074 7261 6465 2c0a 2020  info': trade,.  
-00039d10: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
-00039d20: 2066 6574 6368 5f64 6570 6f73 6974 7328   fetch_deposits(
-00039d30: 7365 6c66 2c20 636f 6465 3a20 4f70 7469  self, code: Opti
-00039d40: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
-00039d50: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
-00039d60: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
-00039d70: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
-00039d80: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
-00039d90: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-00039da0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-00039db0: 6820 616c 6c20 6465 706f 7369 7473 206d  h all deposits m
-00039dc0: 6164 6520 746f 2061 6e20 6163 636f 756e  ade to an accoun
-00039dd0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
-00039de0: 2073 7472 7c4e 6f6e 6520 636f 6465 3a20   str|None code: 
-00039df0: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
-00039e00: 2063 6f64 650a 2020 2020 2020 2020 3a70   code.        :p
-00039e10: 6172 616d 2069 6e74 7c4e 6f6e 6520 7369  aram int|None si
-00039e20: 6e63 653a 2074 6865 2065 6172 6c69 6573  nce: the earlies
-00039e30: 7420 7469 6d65 2069 6e20 6d73 2074 6f20  t time in ms to 
-00039e40: 6665 7463 6820 6465 706f 7369 7473 2066  fetch deposits f
-00039e50: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
-00039e60: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-00039e70: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
-00039e80: 6d62 6572 206f 6620 6465 706f 7369 7473  mber of deposits
-00039e90: 2073 7472 7563 7475 7265 7320 746f 2072   structures to r
-00039ea0: 6574 7269 6576 650a 2020 2020 2020 2020  etrieve.        
-00039eb0: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-00039ec0: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-00039ed0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00039ee0: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
-00039ef0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-00039f00: 2020 3a70 6172 616d 2062 6f6f 6c20 7061    :param bool pa
-00039f10: 7261 6d73 5b27 6669 6174 275d 3a20 6966  rams['fiat']: if
-00039f20: 2054 7275 652c 206f 6e6c 7920 6669 6174   True, only fiat
-00039f30: 2064 6570 6f73 6974 7320 7769 6c6c 2062   deposits will b
-00039f40: 6520 7265 7475 726e 6564 0a20 2020 2020  e returned.     
-00039f50: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00039f60: 6e65 2070 6172 616d 735b 2775 6e74 696c  ne params['until
-00039f70: 275d 3a20 7468 6520 6c61 7465 7374 2074  ']: the latest t
-00039f80: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
-00039f90: 6368 2064 6570 6f73 6974 7320 666f 720a  ch deposits for.
-00039fa0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-00039fb0: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
-00039fc0: 6f66 2060 7472 616e 7361 6374 696f 6e20  of `transaction 
-00039fd0: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
-00039fe0: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-00039ff0: 6d2f 232f 3f69 643d 7472 616e 7361 6374  m/#/?id=transact
-0003a000: 696f 6e2d 7374 7275 6374 7572 653e 600a  ion-structure>`.
-0003a010: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0003a020: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-0003a030: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0003a040: 6375 7272 656e 6379 203d 204e 6f6e 650a  currency = None.
-0003a050: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-0003a060: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0003a070: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
-0003a080: 2020 2020 206c 6567 616c 4d6f 6e65 7920       legalMoney 
-0003a090: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0003a0a0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
-0003a0b0: 276c 6567 616c 4d6f 6e65 7927 2c20 7b7d  'legalMoney', {}
-0003a0c0: 290a 2020 2020 2020 2020 6669 6174 4f6e  ).        fiatOn
-0003a0d0: 6c79 203d 2073 656c 662e 7361 6665 5f76  ly = self.safe_v
-0003a0e0: 616c 7565 2870 6172 616d 732c 2027 6669  alue(params, 'fi
-0003a0f0: 6174 272c 2046 616c 7365 290a 2020 2020  at', False).    
-0003a100: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-0003a110: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
-0003a120: 6669 6174 4f6e 6c79 2729 0a20 2020 2020  fiatOnly').     
-0003a130: 2020 2075 6e74 696c 203d 2073 656c 662e     until = self.
-0003a140: 7361 6665 5f69 6e74 6567 6572 2870 6172  safe_integer(par
-0003a150: 616d 732c 2027 756e 7469 6c27 290a 2020  ams, 'until').  
-0003a160: 2020 2020 2020 6966 2066 6961 744f 6e6c        if fiatOnl
-0003a170: 7920 6f72 2028 636f 6465 2069 6e20 6c65  y or (code in le
-0003a180: 6761 6c4d 6f6e 6579 293a 0a20 2020 2020  galMoney):.     
-0003a190: 2020 2020 2020 2069 6620 636f 6465 2069         if code i
-0003a1a0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0003a1b0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-0003a1c0: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-0003a1d0: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-0003a1e0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003a1f0: 7472 616e 7361 6374 696f 6e54 7970 6527  transactionType'
-0003a200: 5d20 3d20 300a 2020 2020 2020 2020 2020  ] = 0.          
-0003a210: 2020 6966 2073 696e 6365 2069 7320 6e6f    if since is no
-0003a220: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0003a230: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003a240: 2762 6567 696e 5469 6d65 275d 203d 2073  'beginTime'] = s
-0003a250: 696e 6365 0a20 2020 2020 2020 2020 2020  ince.           
-0003a260: 2069 6620 756e 7469 6c20 6973 206e 6f74   if until is not
-0003a270: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0003a280: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003a290: 656e 6454 696d 6527 5d20 3d20 756e 7469  endTime'] = unti
-0003a2a0: 6c0a 2020 2020 2020 2020 2020 2020 7261  l.            ra
-0003a2b0: 7720 3d20 7365 6c66 2e73 6170 6947 6574  w = self.sapiGet
-0003a2c0: 4669 6174 4f72 6465 7273 2873 656c 662e  FiatOrders(self.
-0003a2d0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-0003a2e0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-0003a2f0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0003a300: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-0003a310: 7261 772c 2027 6461 7461 2729 0a20 2020  raw, 'data').   
-0003a320: 2020 2020 2020 2020 2023 2020 2020 207b           #     {
-0003a330: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003a340: 2020 2020 2022 636f 6465 223a 2022 3030       "code": "00
-0003a350: 3030 3030 222c 0a20 2020 2020 2020 2020  0000",.         
-0003a360: 2020 2023 2020 2020 2020 2022 6d65 7373     #       "mess
-0003a370: 6167 6522 3a20 2273 7563 6365 7373 222c  age": "success",
-0003a380: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003a390: 2020 2020 2022 6461 7461 223a 205b 0a20       "data": [. 
-0003a3a0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003a3b0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-0003a3c0: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
-0003a3d0: 6f72 6465 724e 6f22 3a20 2232 3563 6564  orderNo": "25ced
-0003a3e0: 3337 3037 3563 3134 3730 6261 3839 3339  37075c1470ba8939
-0003a3f0: 6430 6466 3233 3136 6532 3322 2c0a 2020  d0df2316e23",.  
-0003a400: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003a410: 2020 2020 2020 2266 6961 7443 7572 7265        "fiatCurre
-0003a420: 6e63 7922 3a20 2245 5552 222c 0a20 2020  ncy": "EUR",.   
-0003a430: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003a440: 2020 2020 2022 696e 6469 6361 7465 6441       "indicatedA
-0003a450: 6d6f 756e 7422 3a20 2231 352e 3030 222c  mount": "15.00",
-0003a460: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003a470: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
-0003a480: 223a 2022 3135 2e30 3022 2c0a 2020 2020  ": "15.00",.    
-0003a490: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003a4a0: 2020 2020 2274 6f74 616c 4665 6522 3a20      "totalFee": 
-0003a4b0: 2230 2e30 3022 2c0a 2020 2020 2020 2020  "0.00",.        
-0003a4c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003a4d0: 226d 6574 686f 6422 3a20 2263 6172 6422  "method": "card"
-0003a4e0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-0003a4f0: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
-0003a500: 7322 3a20 2246 6169 6c65 6422 2c0a 2020  s": "Failed",.  
-0003a510: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003a520: 2020 2020 2020 2263 7265 6174 6554 696d        "createTim
-0003a530: 6522 3a20 3136 3237 3530 3130 3236 3030  e": 162750102600
-0003a540: 302c 0a20 2020 2020 2020 2020 2020 2023  0,.            #
-0003a550: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
-0003a560: 7465 5469 6d65 223a 2031 3632 3735 3031  teTime": 1627501
-0003a570: 3032 3730 3030 0a20 2020 2020 2020 2020  027000.         
-0003a580: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
-0003a590: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003a5a0: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
-0003a5b0: 2020 2320 2020 2020 2020 2274 6f74 616c    #       "total
-0003a5c0: 223a 2031 2c0a 2020 2020 2020 2020 2020  ": 1,.          
-0003a5d0: 2020 2320 2020 2020 2020 2273 7563 6365    #       "succe
-0003a5e0: 7373 223a 2054 7275 650a 2020 2020 2020  ss": True.      
-0003a5f0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-0003a600: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0003a610: 2020 2020 2020 2020 6966 2063 6f64 6520          if code 
-0003a620: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0003a630: 2020 2020 2020 2020 2020 2020 2063 7572               cur
-0003a640: 7265 6e63 7920 3d20 7365 6c66 2e63 7572  rency = self.cur
-0003a650: 7265 6e63 7928 636f 6465 290a 2020 2020  rency(code).    
-0003a660: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003a670: 6573 745b 2763 6f69 6e27 5d20 3d20 6375  est['coin'] = cu
-0003a680: 7272 656e 6379 5b27 6964 275d 0a20 2020  rrency['id'].   
-0003a690: 2020 2020 2020 2020 2069 6620 7369 6e63           if sinc
-0003a6a0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0003a6b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003a6c0: 6571 7565 7374 5b27 7374 6172 7454 696d  equest['startTim
-0003a6d0: 6527 5d20 3d20 7369 6e63 650a 2020 2020  e'] = since.    
-0003a6e0: 2020 2020 2020 2020 2020 2020 2320 6d61              # ma
-0003a6f0: 7820 3320 6d6f 6e74 6873 2072 616e 6765  x 3 months range
-0003a700: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
-0003a710: 636f 6d2f 6363 7874 2f63 6378 742f 6973  com/ccxt/ccxt/is
-0003a720: 7375 6573 2f36 3439 350a 2020 2020 2020  sues/6495.      
-0003a730: 2020 2020 2020 2020 2020 656e 6454 696d            endTim
-0003a740: 6520 3d20 7365 6c66 2e73 756d 2873 696e  e = self.sum(sin
-0003a750: 6365 2c20 3737 3736 3030 3030 3030 290a  ce, 7776000000).
-0003a760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a770: 6966 2075 6e74 696c 2069 7320 6e6f 7420  if until is not 
-0003a780: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0003a790: 2020 2020 2020 2020 2020 656e 6454 696d            endTim
-0003a7a0: 6520 3d20 6d69 6e28 656e 6454 696d 652c  e = min(endTime,
-0003a7b0: 2075 6e74 696c 290a 2020 2020 2020 2020   until).        
-0003a7c0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003a7d0: 2765 6e64 5469 6d65 275d 203d 2065 6e64  'endTime'] = end
-0003a7e0: 5469 6d65 0a20 2020 2020 2020 2020 2020  Time.           
-0003a7f0: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
-0003a800: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0003a810: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003a820: 6c69 6d69 7427 5d20 3d20 6c69 6d69 740a  limit'] = limit.
-0003a830: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-0003a840: 6f6e 7365 203d 2073 656c 662e 7361 7069  onse = self.sapi
-0003a850: 4765 7443 6170 6974 616c 4465 706f 7369  GetCapitalDeposi
-0003a860: 7448 6973 7265 6328 7365 6c66 2e65 7874  tHisrec(self.ext
-0003a870: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-0003a880: 616d 7329 290a 2020 2020 2020 2020 2020  ams)).          
-0003a890: 2020 2320 2020 2020 5b0a 2020 2020 2020    #     [.      
-0003a8a0: 2020 2020 2020 2320 2020 2020 2020 7b0a        #       {.
-0003a8b0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003a8c0: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0003a8d0: 2230 2e30 3138 3434 3438 3722 2c0a 2020  "0.01844487",.  
-0003a8e0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003a8f0: 2020 2020 2263 6f69 6e22 3a20 2242 4348      "coin": "BCH
-0003a900: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003a910: 2020 2020 2020 2020 2022 6e65 7477 6f72           "networ
-0003a920: 6b22 3a20 2242 4348 222c 0a20 2020 2020  k": "BCH",.     
-0003a930: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003a940: 2022 7374 6174 7573 223a 2031 2c0a 2020   "status": 1,.  
-0003a950: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003a960: 2020 2020 2261 6464 7265 7373 223a 2022      "address": "
-0003a970: 314e 5978 414a 6857 3232 3831 484b 314b  1NYxAJhW2281HK1K
-0003a980: 744a 6561 454e 4271 4865 7967 4138 3846  tJeaENBqHeygA88F
-0003a990: 7a52 222c 0a20 2020 2020 2020 2020 2020  zR",.           
-0003a9a0: 2023 2020 2020 2020 2020 2022 6164 6472   #         "addr
-0003a9b0: 6573 7354 6167 223a 2022 222c 0a20 2020  essTag": "",.   
-0003a9c0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003a9d0: 2020 2022 7478 4964 223a 2022 6261 6663     "txId": "bafc
-0003a9e0: 3539 3032 3530 3464 3635 3034 6130 3062  5902504d6504a00b
-0003a9f0: 3764 3033 3036 6134 3131 3534 6362 6631  7d0306a41154cbf1
-0003aa00: 6431 6237 3637 6162 3730 6633 6263 3232  d1b767ab70f3bc22
-0003aa10: 3633 3237 3336 3235 3838 6166 222c 0a20  6327362588af",. 
-0003aa20: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003aa30: 2020 2020 2022 696e 7365 7274 5469 6d65       "insertTime
-0003aa40: 223a 2031 3631 3037 3834 3938 3030 3030  ": 1610784980000
-0003aa50: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-0003aa60: 2020 2020 2020 2020 2274 7261 6e73 6665          "transfe
-0003aa70: 7254 7970 6522 3a20 302c 0a20 2020 2020  rType": 0,.     
-0003aa80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003aa90: 2022 636f 6e66 6972 6d54 696d 6573 223a   "confirmTimes":
-0003aaa0: 2022 322f 3222 0a20 2020 2020 2020 2020   "2/2".         
-0003aab0: 2020 2023 2020 2020 2020 207d 2c0a 2020     #       },.  
-0003aac0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003aad0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0003aae0: 2320 2020 2020 2020 2020 2261 6d6f 756e  #         "amoun
-0003aaf0: 7422 3a20 2234 3530 3022 2c0a 2020 2020  t": "4500",.    
-0003ab00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003ab10: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
-0003ab20: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-0003ab30: 2020 2020 2020 2020 226e 6574 776f 726b          "network
-0003ab40: 223a 2022 4253 4322 2c0a 2020 2020 2020  ": "BSC",.      
-0003ab50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003ab60: 2273 7461 7475 7322 3a20 312c 0a20 2020  "status": 1,.   
-0003ab70: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003ab80: 2020 2022 6164 6472 6573 7322 3a20 2230     "address": "0
-0003ab90: 7863 3963 3932 3363 3837 3334 3763 6130  xc9c923c87347ca0
-0003aba0: 6633 3435 3164 3664 3330 3863 6538 3466  f3451d6d308ce84f
-0003abb0: 3639 3162 3966 3530 3122 2c0a 2020 2020  691b9f501",.    
-0003abc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003abd0: 2020 2261 6464 7265 7373 5461 6722 3a20    "addressTag": 
-0003abe0: 2222 2c0a 2020 2020 2020 2020 2020 2020  "",.            
-0003abf0: 2320 2020 2020 2020 2020 2274 7849 6422  #         "txId"
-0003ac00: 3a20 2249 6e74 6572 6e61 6c20 7472 616e  : "Internal tran
-0003ac10: 7366 6572 2035 3133 3736 3632 3739 3031  sfer 51376627901
-0003ac20: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003ac30: 2020 2020 2020 2020 2022 696e 7365 7274           "insert
-0003ac40: 5469 6d65 223a 2031 3631 3833 3934 3338  Time": 161839438
-0003ac50: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
-0003ac60: 2020 2320 2020 2020 2020 2020 2274 7261    #         "tra
-0003ac70: 6e73 6665 7254 7970 6522 3a20 312c 0a20  nsferType": 1,. 
-0003ac80: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003ac90: 2020 2020 2022 636f 6e66 6972 6d54 696d       "confirmTim
-0003aca0: 6573 223a 2022 312f 3135 220a 2020 2020  es": "1/15".    
-0003acb0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0003acc0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003acd0: 5d0a 2020 2020 2020 2020 666f 7220 6920  ].        for i 
-0003ace0: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-0003acf0: 7265 7370 6f6e 7365 2929 3a0a 2020 2020  response)):.    
-0003ad00: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-0003ad10: 5b69 5d5b 2774 7970 6527 5d20 3d20 2764  [i]['type'] = 'd
-0003ad20: 6570 6f73 6974 270a 2020 2020 2020 2020  eposit'.        
-0003ad30: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-0003ad40: 655f 7472 616e 7361 6374 696f 6e73 2872  e_transactions(r
-0003ad50: 6573 706f 6e73 652c 2063 7572 7265 6e63  esponse, currenc
-0003ad60: 792c 2073 696e 6365 2c20 6c69 6d69 7429  y, since, limit)
-0003ad70: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
-0003ad80: 7769 7468 6472 6177 616c 7328 7365 6c66  withdrawals(self
-0003ad90: 2c20 636f 6465 3a20 4f70 7469 6f6e 616c  , code: Optional
-0003ada0: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
-0003adb0: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
-0003adc0: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
-0003add0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-0003ade0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-0003adf0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0003ae00: 2020 2020 2020 2020 6665 7463 6820 616c          fetch al
-0003ae10: 6c20 7769 7468 6472 6177 616c 7320 6d61  l withdrawals ma
-0003ae20: 6465 2066 726f 6d20 616e 2061 6363 6f75  de from an accou
-0003ae30: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-0003ae40: 6d20 7374 727c 4e6f 6e65 2063 6f64 653a  m str|None code:
-0003ae50: 2075 6e69 6669 6564 2063 7572 7265 6e63   unified currenc
-0003ae60: 7920 636f 6465 0a20 2020 2020 2020 203a  y code.        :
-0003ae70: 7061 7261 6d20 696e 747c 4e6f 6e65 2073  param int|None s
-0003ae80: 696e 6365 3a20 7468 6520 6561 726c 6965  ince: the earlie
-0003ae90: 7374 2074 696d 6520 696e 206d 7320 746f  st time in ms to
-0003aea0: 2066 6574 6368 2077 6974 6864 7261 7761   fetch withdrawa
-0003aeb0: 6c73 2066 6f72 0a20 2020 2020 2020 203a  ls for.        :
-0003aec0: 7061 7261 6d20 696e 747c 4e6f 6e65 206c  param int|None l
-0003aed0: 696d 6974 3a20 7468 6520 6d61 7869 6d75  imit: the maximu
-0003aee0: 6d20 6e75 6d62 6572 206f 6620 7769 7468  m number of with
-0003aef0: 6472 6177 616c 7320 7374 7275 6374 7572  drawals structur
-0003af00: 6573 2074 6f20 7265 7472 6965 7665 0a20  es to retrieve. 
-0003af10: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-0003af20: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-0003af30: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-0003af40: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
-0003af50: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
-0003af60: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003af70: 626f 6f6c 2070 6172 616d 735b 2766 6961  bool params['fia
-0003af80: 7427 5d3a 2069 6620 5472 7565 2c20 6f6e  t']: if True, on
-0003af90: 6c79 2066 6961 7420 7769 7468 6472 6177  ly fiat withdraw
-0003afa0: 616c 7320 7769 6c6c 2062 6520 7265 7475  als will be retu
-0003afb0: 726e 6564 0a20 2020 2020 2020 203a 7265  rned.        :re
-0003afc0: 7475 726e 7320 5b64 6963 745d 3a20 6120  turns [dict]: a 
-0003afd0: 6c69 7374 206f 6620 6074 7261 6e73 6163  list of `transac
-0003afe0: 7469 6f6e 2073 7472 7563 7475 7265 7320  tion structures 
-0003aff0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
-0003b000: 7874 2e63 6f6d 2f23 2f3f 6964 3d74 7261  xt.com/#/?id=tra
-0003b010: 6e73 6163 7469 6f6e 2d73 7472 7563 7475  nsaction-structu
-0003b020: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
-0003b030: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-0003b040: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0003b050: 2020 2020 206c 6567 616c 4d6f 6e65 7920       legalMoney 
-0003b060: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0003b070: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
-0003b080: 276c 6567 616c 4d6f 6e65 7927 2c20 7b7d  'legalMoney', {}
-0003b090: 290a 2020 2020 2020 2020 6669 6174 4f6e  ).        fiatOn
-0003b0a0: 6c79 203d 2073 656c 662e 7361 6665 5f76  ly = self.safe_v
-0003b0b0: 616c 7565 2870 6172 616d 732c 2027 6669  alue(params, 'fi
-0003b0c0: 6174 272c 2046 616c 7365 290a 2020 2020  at', False).    
-0003b0d0: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-0003b0e0: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
-0003b0f0: 6669 6174 4f6e 6c79 2729 0a20 2020 2020  fiatOnly').     
-0003b100: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
-0003b110: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-0003b120: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0003b130: 6375 7272 656e 6379 203d 204e 6f6e 650a  currency = None.
-0003b140: 2020 2020 2020 2020 6966 2066 6961 744f          if fiatO
-0003b150: 6e6c 7920 6f72 2028 636f 6465 2069 6e20  nly or (code in 
-0003b160: 6c65 6761 6c4d 6f6e 6579 293a 0a20 2020  legalMoney):.   
-0003b170: 2020 2020 2020 2020 2069 6620 636f 6465           if code
-0003b180: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0003b190: 2020 2020 2020 2020 2020 2020 2020 6375                cu
-0003b1a0: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-0003b1b0: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-0003b1c0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003b1d0: 5b27 7472 616e 7361 6374 696f 6e54 7970  ['transactionTyp
-0003b1e0: 6527 5d20 3d20 310a 2020 2020 2020 2020  e'] = 1.        
-0003b1f0: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
-0003b200: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0003b210: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003b220: 745b 2762 6567 696e 5469 6d65 275d 203d  t['beginTime'] =
-0003b230: 2073 696e 6365 0a20 2020 2020 2020 2020   since.         
-0003b240: 2020 2072 6177 203d 2073 656c 662e 7361     raw = self.sa
-0003b250: 7069 4765 7446 6961 744f 7264 6572 7328  piGetFiatOrders(
-0003b260: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-0003b270: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-0003b280: 2020 2020 2020 2020 2020 7265 7370 6f6e            respon
-0003b290: 7365 203d 2073 656c 662e 7361 6665 5f76  se = self.safe_v
-0003b2a0: 616c 7565 2872 6177 2c20 2764 6174 6127  alue(raw, 'data'
-0003b2b0: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-0003b2c0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-0003b2d0: 2020 2320 2020 2020 2020 2263 6f64 6522    #       "code"
-0003b2e0: 3a20 2230 3030 3030 3022 2c0a 2020 2020  : "000000",.    
-0003b2f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003b300: 226d 6573 7361 6765 223a 2022 7375 6363  "message": "succ
-0003b310: 6573 7322 2c0a 2020 2020 2020 2020 2020  ess",.          
-0003b320: 2020 2320 2020 2020 2020 2264 6174 6122    #       "data"
-0003b330: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
-0003b340: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
-0003b350: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003b360: 2020 2020 226f 7264 6572 4e6f 223a 2022      "orderNo": "
-0003b370: 434a 5737 3036 3435 3232 3636 3131 3531  CJW7064522661151
-0003b380: 3730 3330 3422 2c0a 2020 2020 2020 2020  70304",.        
-0003b390: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003b3a0: 2266 6961 7443 7572 7265 6e63 7922 3a20  "fiatCurrency": 
-0003b3b0: 2247 4250 222c 0a20 2020 2020 2020 2020  "GBP",.         
-0003b3c0: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
-0003b3d0: 696e 6469 6361 7465 6441 6d6f 756e 7422  indicatedAmount"
-0003b3e0: 3a20 2231 3030 3031 2e35 3022 2c0a 2020  : "10001.50",.  
-0003b3f0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003b400: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0003b410: 2231 3030 2e30 3022 2c0a 2020 2020 2020  "100.00",.      
-0003b420: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003b430: 2020 2274 6f74 616c 4665 6522 3a20 2231    "totalFee": "1
-0003b440: 2e35 3022 2c0a 2020 2020 2020 2020 2020  .50",.          
-0003b450: 2020 2320 2020 2020 2020 2020 2020 226d    #           "m
-0003b460: 6574 686f 6422 3a20 2262 616e 6b20 7472  ethod": "bank tr
-0003b470: 616e 7366 6572 222c 0a20 2020 2020 2020  ansfer",.       
-0003b480: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003b490: 2022 7374 6174 7573 223a 2022 5375 6363   "status": "Succ
-0003b4a0: 6573 7366 756c 222c 0a20 2020 2020 2020  essful",.       
-0003b4b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003b4c0: 2022 6372 6561 7465 5469 6d65 223a 2031   "createTime": 1
-0003b4d0: 3632 3030 3337 3734 3530 3030 2c0a 2020  620037745000,.  
-0003b4e0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003b4f0: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
-0003b500: 6522 3a20 3136 3230 3033 3834 3830 3030  e": 162003848000
-0003b510: 300a 2020 2020 2020 2020 2020 2020 2320  0.            # 
-0003b520: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-0003b530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003b540: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
-0003b550: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0003b560: 724e 6f22 3a20 2243 4a57 3730 3632 3837  rNo": "CJW706287
-0003b570: 3439 3237 3831 3839 3135 3834 222c 0a20  492781891584",. 
-0003b580: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003b590: 2020 2020 2020 2022 6669 6174 4375 7272         "fiatCurr
-0003b5a0: 656e 6379 223a 2022 4742 5022 2c0a 2020  ency": "GBP",.  
-0003b5b0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003b5c0: 2020 2020 2020 2269 6e64 6963 6174 6564        "indicated
-0003b5d0: 416d 6f75 6e74 223a 2022 3130 3030 312e  Amount": "10001.
-0003b5e0: 3530 222c 0a20 2020 2020 2020 2020 2020  50",.           
-0003b5f0: 2023 2020 2020 2020 2020 2020 2022 616d   #           "am
-0003b600: 6f75 6e74 223a 2022 3130 302e 3030 222c  ount": "100.00",
-0003b610: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003b620: 2020 2020 2020 2020 2022 746f 7461 6c46           "totalF
-0003b630: 6565 223a 2022 312e 3530 222c 0a20 2020  ee": "1.50",.   
-0003b640: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003b650: 2020 2020 2022 6d65 7468 6f64 223a 2022       "method": "
-0003b660: 6261 6e6b 2074 7261 6e73 6665 7222 2c0a  bank transfer",.
-0003b670: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003b680: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
-0003b690: 3a20 2253 7563 6365 7373 6675 6c22 2c0a  : "Successful",.
-0003b6a0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003b6b0: 2020 2020 2020 2020 2263 7265 6174 6554          "createT
-0003b6c0: 696d 6522 3a20 3136 3139 3939 3834 3630  ime": 1619998460
-0003b6d0: 3030 302c 0a20 2020 2020 2020 2020 2020  000,.           
-0003b6e0: 2023 2020 2020 2020 2020 2020 2022 7570   #           "up
-0003b6f0: 6461 7465 5469 6d65 223a 2031 3631 3939  dateTime": 16199
-0003b700: 3938 3832 3330 3030 0a20 2020 2020 2020  98823000.       
-0003b710: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0003b720: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003b730: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
-0003b740: 2020 2020 2320 2020 2020 2020 2274 6f74      #       "tot
-0003b750: 616c 223a 2033 392c 0a20 2020 2020 2020  al": 39,.       
-0003b760: 2020 2020 2023 2020 2020 2020 2022 7375       #       "su
-0003b770: 6363 6573 7322 3a20 5472 7565 0a20 2020  ccess": True.   
-0003b780: 2020 2020 2020 2020 2023 2020 2020 207d           #     }
-0003b790: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0003b7a0: 2020 2020 2020 2020 2020 2069 6620 636f             if co
-0003b7b0: 6465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  de is not None:.
-0003b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b7d0: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-0003b7e0: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
-0003b7f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003b800: 6571 7565 7374 5b27 636f 696e 275d 203d  equest['coin'] =
-0003b810: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
-0003b820: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0003b830: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
-0003b840: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003b850: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-0003b860: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-0003b870: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0003b880: 206d 6178 2033 206d 6f6e 7468 7320 7261   max 3 months ra
-0003b890: 6e67 6520 6874 7470 733a 2f2f 6769 7468  nge https://gith
-0003b8a0: 7562 2e63 6f6d 2f63 6378 742f 6363 7874  ub.com/ccxt/ccxt
-0003b8b0: 2f69 7373 7565 732f 3634 3935 0a20 2020  /issues/6495.   
-0003b8c0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003b8d0: 7565 7374 5b27 656e 6454 696d 6527 5d20  uest['endTime'] 
-0003b8e0: 3d20 7365 6c66 2e73 756d 2873 696e 6365  = self.sum(since
-0003b8f0: 2c20 3737 3736 3030 3030 3030 290a 2020  , 7776000000).  
-0003b900: 2020 2020 2020 2020 2020 6966 206c 696d            if lim
-0003b910: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
-0003b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b930: 7265 7175 6573 745b 276c 696d 6974 275d  request['limit']
-0003b940: 203d 206c 696d 6974 0a20 2020 2020 2020   = limit.       
-0003b950: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0003b960: 7365 6c66 2e73 6170 6947 6574 4361 7069  self.sapiGetCapi
-0003b970: 7461 6c57 6974 6864 7261 7748 6973 746f  talWithdrawHisto
-0003b980: 7279 2873 656c 662e 6578 7465 6e64 2872  ry(self.extend(r
-0003b990: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-0003b9a0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003b9b0: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
-0003b9c0: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
-0003b9d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003b9e0: 2022 6964 223a 2022 3639 6535 3361 6433   "id": "69e53ad3
-0003b9f0: 3035 3132 3462 3936 6234 3336 3638 6365  05124b96b43668ce
-0003ba00: 6162 3135 3861 3138 222c 0a20 2020 2020  ab158a18",.     
-0003ba10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003ba20: 2022 616d 6f75 6e74 223a 2022 3238 2e37   "amount": "28.7
-0003ba30: 3522 2c0a 2020 2020 2020 2020 2020 2020  5",.            
-0003ba40: 2320 2020 2020 2020 2020 2274 7261 6e73  #         "trans
-0003ba50: 6163 7469 6f6e 4665 6522 3a20 2230 2e32  actionFee": "0.2
-0003ba60: 3522 2c0a 2020 2020 2020 2020 2020 2020  5",.            
-0003ba70: 2320 2020 2020 2020 2020 2263 6f69 6e22  #         "coin"
-0003ba80: 3a20 2258 5250 222c 0a20 2020 2020 2020  : "XRP",.       
-0003ba90: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003baa0: 7374 6174 7573 223a 2036 2c0a 2020 2020  status": 6,.    
-0003bab0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003bac0: 2020 2261 6464 7265 7373 223a 2022 7233    "address": "r3
-0003bad0: 5437 3566 754c 6a58 3531 6d6d 6662 3553  T75fuLjX51mmfb5S
-0003bae0: 6b31 6b4d 4e75 6842 6742 504a 736a 7a61  k1kMNuhBgBPJsjza
-0003baf0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003bb00: 2020 2020 2020 2020 2022 6164 6472 6573           "addres
-0003bb10: 7354 6167 223a 2022 3130 3132 3836 3932  sTag": "10128692
-0003bb20: 3222 2c0a 2020 2020 2020 2020 2020 2020  2",.            
-0003bb30: 2320 2020 2020 2020 2020 2274 7849 6422  #         "txId"
-0003bb40: 3a20 2231 3941 3542 3234 4544 3042 3639  : "19A5B24ED0B69
-0003bb50: 3745 3446 3045 3943 4430 3946 4342 3030  7E4F0E9CD09FCB00
-0003bb60: 3731 3730 4136 3035 4243 3933 4339 3238  7170A605BC93C928
-0003bb70: 3042 3945 3633 3739 4335 4536 4546 3046  0B9E6379C5E6EF0F
-0003bb80: 3635 4122 2c0a 2020 2020 2020 2020 2020  65A",.          
-0003bb90: 2020 2320 2020 2020 2020 2020 2261 7070    #         "app
-0003bba0: 6c79 5469 6d65 223a 2022 3230 3231 2d30  lyTime": "2021-0
-0003bbb0: 342d 3135 2031 323a 3039 3a31 3622 2c0a  4-15 12:09:16",.
-0003bbc0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003bbd0: 2020 2020 2020 226e 6574 776f 726b 223a        "network":
-0003bbe0: 2022 5852 5022 2c0a 2020 2020 2020 2020   "XRP",.        
-0003bbf0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-0003bc00: 7261 6e73 6665 7254 7970 6522 3a20 300a  ransferType": 0.
-0003bc10: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003bc20: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
-0003bc30: 2020 2023 2020 2020 2020 207b 0a20 2020     #       {.   
-0003bc40: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003bc50: 2020 2022 6964 223a 2022 3961 3637 3632     "id": "9a6762
-0003bc60: 3862 3136 6261 3439 3838 6165 3230 6433  8b16ba4988ae20d3
-0003bc70: 3239 3333 3366 3136 6263 222c 0a20 2020  29333f16bc",.   
-0003bc80: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003bc90: 2020 2022 616d 6f75 6e74 223a 2022 3230     "amount": "20
-0003bca0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003bcb0: 2020 2020 2020 2020 2022 7472 616e 7361           "transa
-0003bcc0: 6374 696f 6e46 6565 223a 2022 3230 222c  ctionFee": "20",
-0003bcd0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0003bce0: 2020 2020 2020 2022 636f 696e 223a 2022         "coin": "
-0003bcf0: 5553 4454 222c 0a20 2020 2020 2020 2020  USDT",.         
-0003bd00: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
-0003bd10: 6174 7573 223a 2036 2c0a 2020 2020 2020  atus": 6,.      
-0003bd20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bd30: 2261 6464 7265 7373 223a 2022 3078 3041  "address": "0x0A
-0003bd40: 4239 3931 3439 3731 3136 6637 4635 3533  B991497116f7F553
-0003bd50: 3261 3463 3266 3466 3742 3137 3834 3438  2a4c2f4f7B178448
-0003bd60: 3836 3238 6531 222c 0a20 2020 2020 2020  8628e1",.       
-0003bd70: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003bd80: 7478 4964 223a 2022 3078 3737 6662 6632  txId": "0x77fbf2
-0003bd90: 6366 3263 3835 6235 3532 6630 6664 3331  cf2c85b552f0fd31
-0003bda0: 6664 3265 3536 6463 3935 6330 3861 6461  fd2e56dc95c08ada
-0003bdb0: 6530 3331 6439 3666 3337 3137 6438 6231  e031d96f3717d8b1
-0003bdc0: 3765 3161 6561 3365 3436 222c 0a20 2020  7e1aea3e46",.   
-0003bdd0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003bde0: 2020 2022 6170 706c 7954 696d 6522 3a20     "applyTime": 
-0003bdf0: 2232 3032 312d 3034 2d31 3520 3132 3a30  "2021-04-15 12:0
-0003be00: 363a 3533 222c 0a20 2020 2020 2020 2020  6:53",.         
-0003be10: 2020 2023 2020 2020 2020 2020 2022 6e65     #         "ne
-0003be20: 7477 6f72 6b22 3a20 2245 5448 222c 0a20  twork": "ETH",. 
-0003be30: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0003be40: 2020 2020 2022 7472 616e 7366 6572 5479       "transferTy
-0003be50: 7065 223a 2030 0a20 2020 2020 2020 2020  pe": 0.         
-0003be60: 2020 2023 2020 2020 2020 207d 2c0a 2020     #       },.  
-0003be70: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0003be80: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0003be90: 2320 2020 2020 2020 2020 2269 6422 3a20  #         "id": 
-0003bea0: 2261 3763 6463 3061 6662 6661 3434 6134  "a7cdc0afbfa44a4
-0003beb0: 3862 6432 3235 6339 6563 6539 3538 6665  8bd225c9ece958fe
-0003bec0: 3222 2c0a 2020 2020 2020 2020 2020 2020  2",.            
-0003bed0: 2320 2020 2020 2020 2020 2261 6d6f 756e  #         "amoun
-0003bee0: 7422 3a20 2235 3122 2c0a 2020 2020 2020  t": "51",.      
-0003bef0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bf00: 2274 7261 6e73 6163 7469 6f6e 4665 6522  "transactionFee"
-0003bf10: 3a20 2231 222c 0a20 2020 2020 2020 2020  : "1",.         
-0003bf20: 2020 2023 2020 2020 2020 2020 2022 636f     #         "co
-0003bf30: 696e 223a 2022 5553 4454 222c 0a20 2020  in": "USDT",.   
-0003bf40: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0003bf50: 2020 2022 7374 6174 7573 223a 2036 2c0a     "status": 6,.
-0003bf60: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0003bf70: 2020 2020 2020 2261 6464 7265 7373 223a        "address":
-0003bf80: 2022 5459 446d 7475 574c 3862 7379 6a76   "TYDmtuWL8bsyjv
-0003bf90: 6361 7555 5465 7270 6659 7956 6846 7442  cauUTerpfYyVhFtB
-0003bfa0: 6a71 796f 222c 0a20 2020 2020 2020 2020  jqyo",.         
-0003bfb0: 2020 2023 2020 2020 2020 2020 2022 7478     #         "tx
-0003bfc0: 4964 223a 2022 3136 3861 3735 3131 3262  Id": "168a75112b
-0003bfd0: 6365 3663 6562 3438 3233 6336 3637 3236  ce6ceb4823c66726
-0003bfe0: 6164 3437 3632 3061 6433 3332 6536 3966  ad47620ad332e69f
-0003bff0: 6539 3264 3963 6238 6365 6237 3630 3233  e92d9cb8ceb76023
-0003c000: 6639 6130 3238 222c 0a20 2020 2020 2020  f9a028",.       
-0003c010: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003c020: 6170 706c 7954 696d 6522 3a20 2232 3032  applyTime": "202
-0003c030: 312d 3034 2d31 3320 3132 3a34 363a 3539  1-04-13 12:46:59
-0003c040: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0003c050: 2020 2020 2020 2020 2022 6e65 7477 6f72           "networ
-0003c060: 6b22 3a20 2254 5258 222c 0a20 2020 2020  k": "TRX",.     
-0003c070: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003c080: 2022 7472 616e 7366 6572 5479 7065 223a   "transferType":
-0003c090: 2030 0a20 2020 2020 2020 2020 2020 2023   0.            #
-0003c0a0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0003c0b0: 2020 2020 2023 2020 2020 205d 0a20 2020       #     ].   
-0003c0c0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-0003c0d0: 6e67 6528 302c 206c 656e 2872 6573 706f  nge(0, len(respo
-0003c0e0: 6e73 6529 293a 0a20 2020 2020 2020 2020  nse)):.         
-0003c0f0: 2020 2072 6573 706f 6e73 655b 695d 5b27     response[i]['
-0003c100: 7479 7065 275d 203d 2027 7769 7468 6472  type'] = 'withdr
-0003c110: 6177 616c 270a 2020 2020 2020 2020 7265  awal'.        re
-0003c120: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-0003c130: 7472 616e 7361 6374 696f 6e73 2872 6573  transactions(res
-0003c140: 706f 6e73 652c 2063 7572 7265 6e63 792c  ponse, currency,
-0003c150: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
-0003c160: 2020 2020 6465 6620 7061 7273 655f 7472      def parse_tr
-0003c170: 616e 7361 6374 696f 6e5f 7374 6174 7573  ansaction_status
-0003c180: 5f62 795f 7479 7065 2873 656c 662c 2073  _by_type(self, s
-0003c190: 7461 7475 732c 2074 7970 653d 4e6f 6e65  tatus, type=None
-0003c1a0: 293a 0a20 2020 2020 2020 2073 7461 7475  ):.        statu
-0003c1b0: 7365 7342 7954 7970 6520 3d20 7b0a 2020  sesByType = {.  
-0003c1c0: 2020 2020 2020 2020 2020 2764 6570 6f73            'depos
-0003c1d0: 6974 273a 207b 0a20 2020 2020 2020 2020  it': {.         
-0003c1e0: 2020 2020 2020 2027 3027 3a20 2770 656e         '0': 'pen
-0003c1f0: 6469 6e67 272c 0a20 2020 2020 2020 2020  ding',.         
-0003c200: 2020 2020 2020 2027 3127 3a20 276f 6b27         '1': 'ok'
-0003c210: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0003c220: 2020 2736 273a 2027 6f6b 272c 0a20 2020    '6': 'ok',.   
-0003c230: 2020 2020 2020 2020 2020 2020 2023 2046               # F
-0003c240: 6961 740a 2020 2020 2020 2020 2020 2020  iat.            
-0003c250: 2020 2020 2320 5072 6f63 6573 7369 6e67      # Processing
-0003c260: 2c20 4661 696c 6564 2c20 5375 6363 6573  , Failed, Succes
-0003c270: 7366 756c 2c20 4669 6e69 7368 6564 2c20  sful, Finished, 
-0003c280: 5265 6675 6e64 696e 672c 2052 6566 756e  Refunding, Refun
-0003c290: 6465 642c 2052 6566 756e 6420 4661 696c  ded, Refund Fail
-0003c2a0: 6564 2c20 4f72 6465 7220 5061 7274 6961  ed, Order Partia
-0003c2b0: 6c20 6372 6564 6974 2053 746f 7070 6564  l credit Stopped
-0003c2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003c2d0: 2027 5072 6f63 6573 7369 6e67 273a 2027   'Processing': '
-0003c2e0: 7065 6e64 696e 6727 2c0a 2020 2020 2020  pending',.      
-0003c2f0: 2020 2020 2020 2020 2020 2746 6169 6c65            'Faile
-0003c300: 6427 3a20 2766 6169 6c65 6427 2c0a 2020  d': 'failed',.  
-0003c310: 2020 2020 2020 2020 2020 2020 2020 2753                'S
-0003c320: 7563 6365 7373 6675 6c27 3a20 276f 6b27  uccessful': 'ok'
-0003c330: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0003c340: 2020 2752 6566 756e 6469 6e67 273a 2027    'Refunding': '
-0003c350: 6361 6e63 656c 6564 272c 0a20 2020 2020  canceled',.     
-0003c360: 2020 2020 2020 2020 2020 2027 5265 6675             'Refu
-0003c370: 6e64 6564 273a 2027 6361 6e63 656c 6564  nded': 'canceled
-0003c380: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0003c390: 2020 2027 5265 6675 6e64 2046 6169 6c65     'Refund Faile
-0003c3a0: 6427 3a20 2766 6169 6c65 6427 2c0a 2020  d': 'failed',.  
-0003c3b0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-0003c3c0: 2020 2020 2020 2020 2027 7769 7468 6472           'withdr
-0003c3d0: 6177 616c 273a 207b 0a20 2020 2020 2020  awal': {.       
-0003c3e0: 2020 2020 2020 2020 2027 3027 3a20 2770           '0': 'p
-0003c3f0: 656e 6469 6e67 272c 2020 2320 456d 6169  ending',  # Emai
-0003c400: 6c20 5365 6e74 0a20 2020 2020 2020 2020  l Sent.         
-0003c410: 2020 2020 2020 2027 3127 3a20 2763 616e         '1': 'can
-0003c420: 6365 6c65 6427 2c20 2023 2043 616e 6365  celed',  # Cance
-0003c430: 6c6c 6564 2864 6966 6665 7265 6e74 2066  lled(different f
-0003c440: 726f 6d20 3120 3d20 6f6b 2069 6e20 6465  rom 1 = ok in de
-0003c450: 706f 7369 7473 290a 2020 2020 2020 2020  posits).        
-0003c460: 2020 2020 2020 2020 2732 273a 2027 7065          '2': 'pe
-0003c470: 6e64 696e 6727 2c20 2023 2041 7761 6974  nding',  # Await
-0003c480: 696e 6720 4170 7072 6f76 616c 0a20 2020  ing Approval.   
-0003c490: 2020 2020 2020 2020 2020 2020 2027 3327               '3'
-0003c4a0: 3a20 2766 6169 6c65 6427 2c20 2023 2052  : 'failed',  # R
-0003c4b0: 656a 6563 7465 640a 2020 2020 2020 2020  ejected.        
-0003c4c0: 2020 2020 2020 2020 2734 273a 2027 7065          '4': 'pe
-0003c4d0: 6e64 696e 6727 2c20 2023 2050 726f 6365  nding',  # Proce
-0003c4e0: 7373 696e 670a 2020 2020 2020 2020 2020  ssing.          
-0003c4f0: 2020 2020 2020 2735 273a 2027 6661 696c        '5': 'fail
-0003c500: 6564 272c 2020 2320 4661 696c 7572 650a  ed',  # Failure.
-0003c510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c520: 2736 273a 2027 6f6b 272c 2020 2320 436f  '6': 'ok',  # Co
-0003c530: 6d70 6c65 7465 640a 2020 2020 2020 2020  mpleted.        
-0003c540: 2020 2020 2020 2020 2320 4669 6174 0a20          # Fiat. 
-0003c550: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0003c560: 2050 726f 6365 7373 696e 672c 2046 6169   Processing, Fai
-0003c570: 6c65 642c 2053 7563 6365 7373 6675 6c2c  led, Successful,
-0003c580: 2046 696e 6973 6865 642c 2052 6566 756e   Finished, Refun
-0003c590: 6469 6e67 2c20 5265 6675 6e64 6564 2c20  ding, Refunded, 
-0003c5a0: 5265 6675 6e64 2046 6169 6c65 642c 204f  Refund Failed, O
-0003c5b0: 7264 6572 2050 6172 7469 616c 2063 7265  rder Partial cre
-0003c5c0: 6469 7420 5374 6f70 7065 640a 2020 2020  dit Stopped.    
-0003c5d0: 2020 2020 2020 2020 2020 2020 2750 726f              'Pro
-0003c5e0: 6365 7373 696e 6727 3a20 2770 656e 6469  cessing': 'pendi
-0003c5f0: 6e67 272c 0a20 2020 2020 2020 2020 2020  ng',.           
-0003c600: 2020 2020 2027 4661 696c 6564 273a 2027       'Failed': '
-0003c610: 6661 696c 6564 272c 0a20 2020 2020 2020  failed',.       
-0003c620: 2020 2020 2020 2020 2027 5375 6363 6573           'Succes
-0003c630: 7366 756c 273a 2027 6f6b 272c 0a20 2020  sful': 'ok',.   
-0003c640: 2020 2020 2020 2020 2020 2020 2027 5265               'Re
-0003c650: 6675 6e64 696e 6727 3a20 2763 616e 6365  funding': 'cance
-0003c660: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
-0003c670: 2020 2020 2020 2752 6566 756e 6465 6427        'Refunded'
-0003c680: 3a20 2763 616e 6365 6c65 6427 2c0a 2020  : 'canceled',.  
-0003c690: 2020 2020 2020 2020 2020 2020 2020 2752                'R
-0003c6a0: 6566 756e 6420 4661 696c 6564 273a 2027  efund Failed': '
-0003c6b0: 6661 696c 6564 272c 0a20 2020 2020 2020  failed',.       
-0003c6c0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0003c6d0: 7d0a 2020 2020 2020 2020 7374 6174 7573  }.        status
-0003c6e0: 6573 203d 2073 656c 662e 7361 6665 5f76  es = self.safe_v
-0003c6f0: 616c 7565 2873 7461 7475 7365 7342 7954  alue(statusesByT
-0003c700: 7970 652c 2074 7970 652c 207b 7d29 0a20  ype, type, {}). 
-0003c710: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0003c720: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
-0003c730: 7461 7475 7365 732c 2073 7461 7475 732c  tatuses, status,
-0003c740: 2073 7461 7475 7329 0a0a 2020 2020 6465   status)..    de
-0003c750: 6620 7061 7273 655f 7472 616e 7361 6374  f parse_transact
-0003c760: 696f 6e28 7365 6c66 2c20 7472 616e 7361  ion(self, transa
-0003c770: 6374 696f 6e2c 2063 7572 7265 6e63 793d  ction, currency=
-0003c780: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
-0003c790: 0a20 2020 2020 2020 2023 2066 6574 6368  .        # fetch
-0003c7a0: 4465 706f 7369 7473 0a20 2020 2020 2020  Deposits.       
-0003c7b0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0003c7c0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0003c7d0: 2020 2022 616d 6f75 6e74 223a 2022 3435     "amount": "45
-0003c7e0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0003c7f0: 2020 2020 2022 636f 696e 223a 2022 5553       "coin": "US
-0003c800: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-0003c810: 2020 2020 2022 6e65 7477 6f72 6b22 3a20       "network": 
-0003c820: 2242 5343 222c 0a20 2020 2020 2020 2023  "BSC",.        #
-0003c830: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
-0003c840: 2031 2c0a 2020 2020 2020 2020 2320 2020   1,.        #   
-0003c850: 2020 2020 2261 6464 7265 7373 223a 2022      "address": "
-0003c860: 3078 6339 6339 3233 6338 3733 3437 6361  0xc9c923c87347ca
-0003c870: 3066 3334 3531 6436 6433 3038 6365 3834  0f3451d6d308ce84
-0003c880: 6636 3931 6239 6635 3031 222c 0a20 2020  f691b9f501",.   
-0003c890: 2020 2020 2023 2020 2020 2020 2022 6164       #       "ad
-0003c8a0: 6472 6573 7354 6167 223a 2022 222c 0a20  dressTag": "",. 
-0003c8b0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0003c8c0: 7478 4964 223a 2022 496e 7465 726e 616c  txId": "Internal
-0003c8d0: 2074 7261 6e73 6665 7220 3531 3337 3636   transfer 513766
-0003c8e0: 3237 3930 3122 2c0a 2020 2020 2020 2020  27901",.        
-0003c8f0: 2320 2020 2020 2020 2269 6e73 6572 7454  #       "insertT
-0003c900: 696d 6522 3a20 3136 3138 3339 3433 3831  ime": 1618394381
-0003c910: 3030 302c 0a20 2020 2020 2020 2023 2020  000,.        #  
-0003c920: 2020 2020 2022 7472 616e 7366 6572 5479       "transferTy
-0003c930: 7065 223a 2031 2c0a 2020 2020 2020 2020  pe": 1,.        
-0003c940: 2320 2020 2020 2020 2263 6f6e 6669 726d  #       "confirm
-0003c950: 5469 6d65 7322 3a20 2231 2f31 3522 0a20  Times": "1/15". 
-0003c960: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0003c970: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0003c980: 2023 2066 6574 6368 5769 7468 6472 6177   # fetchWithdraw
-0003c990: 616c 730a 2020 2020 2020 2020 230a 2020  als.        #.  
-0003c9a0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-0003c9b0: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
-0003c9c0: 6422 3a20 2236 3965 3533 6164 3330 3531  d": "69e53ad3051
-0003c9d0: 3234 6239 3662 3433 3636 3863 6561 6231  24b96b43668ceab1
-0003c9e0: 3538 6131 3822 2c0a 2020 2020 2020 2020  58a18",.        
-0003c9f0: 2320 2020 2020 2020 2261 6d6f 756e 7422  #       "amount"
-0003ca00: 3a20 2232 382e 3735 222c 0a20 2020 2020  : "28.75",.     
-0003ca10: 2020 2023 2020 2020 2020 2022 7472 616e     #       "tran
-0003ca20: 7361 6374 696f 6e46 6565 223a 2022 302e  sactionFee": "0.
-0003ca30: 3235 222c 0a20 2020 2020 2020 2023 2020  25",.        #  
-0003ca40: 2020 2020 2022 636f 696e 223a 2022 5852       "coin": "XR
-0003ca50: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
-0003ca60: 2020 2020 2273 7461 7475 7322 3a20 362c      "status": 6,
-0003ca70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003ca80: 2022 6164 6472 6573 7322 3a20 2272 3354   "address": "r3T
-0003ca90: 3735 6675 4c6a 5835 316d 6d66 6235 536b  75fuLjX51mmfb5Sk
-0003caa0: 316b 4d4e 7568 4267 4250 4a73 6a7a 6122  1kMNuhBgBPJsjza"
-0003cab0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003cac0: 2020 2261 6464 7265 7373 5461 6722 3a20    "addressTag": 
-0003cad0: 2231 3031 3238 3639 3232 222c 0a20 2020  "101286922",.   
-0003cae0: 2020 2020 2023 2020 2020 2020 2022 7478       #       "tx
-0003caf0: 4964 223a 2022 3139 4135 4232 3445 4430  Id": "19A5B24ED0
-0003cb00: 4236 3937 4534 4630 4539 4344 3039 4643  B697E4F0E9CD09FC
-0003cb10: 4230 3037 3137 3041 3630 3542 4339 3343  B007170A605BC93C
-0003cb20: 3932 3830 4239 4536 3337 3943 3545 3645  9280B9E6379C5E6E
-0003cb30: 4630 4636 3541 222c 0a20 2020 2020 2020  F0F65A",.       
-0003cb40: 2023 2020 2020 2020 2022 6170 706c 7954   #       "applyT
-0003cb50: 696d 6522 3a20 2232 3032 312d 3034 2d31  ime": "2021-04-1
-0003cb60: 3520 3132 3a30 393a 3136 222c 0a20 2020  5 12:09:16",.   
-0003cb70: 2020 2020 2023 2020 2020 2020 2022 6e65       #       "ne
-0003cb80: 7477 6f72 6b22 3a20 2258 5250 222c 0a20  twork": "XRP",. 
-0003cb90: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0003cba0: 7472 616e 7366 6572 5479 7065 223a 2030  transferType": 0
-0003cbb0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0003cbc0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0003cbd0: 2020 2023 2066 6961 7420 7472 616e 7361     # fiat transa
-0003cbe0: 6374 696f 6e0a 2020 2020 2020 2020 2320  ction.        # 
-0003cbf0: 7769 7468 6472 6177 0a20 2020 2020 2020  withdraw.       
-0003cc00: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0003cc10: 2023 2020 2020 2020 2022 6f72 6465 724e   #       "orderN
-0003cc20: 6f22 3a20 2243 4a57 3638 3438 3937 3535  o": "CJW68489755
-0003cc30: 3133 3937 3137 3132 3030 222c 0a20 2020  1397171200",.   
-0003cc40: 2020 2020 2023 2020 2020 2020 2022 6669       #       "fi
-0003cc50: 6174 4375 7272 656e 6379 223a 2022 4742  atCurrency": "GB
-0003cc60: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
-0003cc70: 2020 2020 2269 6e64 6963 6174 6564 416d      "indicatedAm
-0003cc80: 6f75 6e74 223a 2022 3239 2e39 3922 2c0a  ount": "29.99",.
-0003cc90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003cca0: 2261 6d6f 756e 7422 3a20 2232 382e 3439  "amount": "28.49
-0003ccb0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003ccc0: 2020 2022 746f 7461 6c46 6565 223a 2022     "totalFee": "
-0003ccd0: 312e 3530 222c 0a20 2020 2020 2020 2023  1.50",.        #
-0003cce0: 2020 2020 2020 2022 6d65 7468 6f64 223a         "method":
-0003ccf0: 2022 6261 6e6b 2074 7261 6e73 6665 7222   "bank transfer"
-0003cd00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003cd10: 2020 2273 7461 7475 7322 3a20 2253 7563    "status": "Suc
-0003cd20: 6365 7373 6675 6c22 2c0a 2020 2020 2020  cessful",.      
-0003cd30: 2020 2320 2020 2020 2020 2263 7265 6174    #       "creat
-0003cd40: 6554 696d 6522 3a20 3136 3134 3839 3837  eTime": 16148987
-0003cd50: 3031 3030 302c 0a20 2020 2020 2020 2023  01000,.        #
-0003cd60: 2020 2020 2020 2022 7570 6461 7465 5469         "updateTi
-0003cd70: 6d65 223a 2031 3631 3438 3938 3832 3030  me": 16148988200
-0003cd80: 3030 0a20 2020 2020 2020 2023 2020 2020  00.        #    
-0003cd90: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0003cda0: 2020 2020 2023 2064 6570 6f73 6974 0a20       # deposit. 
-0003cdb0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0003cdc0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0003cdd0: 6f72 6465 724e 6f22 3a20 2232 3563 6564  orderNo": "25ced
-0003cde0: 3337 3037 3563 3134 3730 6261 3839 3339  37075c1470ba8939
-0003cdf0: 6430 6466 3233 3136 6532 3322 2c0a 2020  d0df2316e23",.  
-0003ce00: 2020 2020 2020 2320 2020 2020 2020 2266        #       "f
-0003ce10: 6961 7443 7572 7265 6e63 7922 3a20 2245  iatCurrency": "E
-0003ce20: 5552 222c 0a20 2020 2020 2020 2023 2020  UR",.        #  
-0003ce30: 2020 2020 2022 7472 616e 7361 6374 696f       "transactio
-0003ce40: 6e54 7970 6522 3a20 302c 0a20 2020 2020  nType": 0,.     
-0003ce50: 2020 2023 2020 2020 2020 2022 696e 6469     #       "indi
-0003ce60: 6361 7465 6441 6d6f 756e 7422 3a20 2231  catedAmount": "1
-0003ce70: 352e 3030 222c 0a20 2020 2020 2020 2023  5.00",.        #
-0003ce80: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-0003ce90: 2022 3135 2e30 3022 2c0a 2020 2020 2020   "15.00",.      
-0003cea0: 2020 2320 2020 2020 2020 2274 6f74 616c    #       "total
-0003ceb0: 4665 6522 3a20 2230 2e30 3022 2c0a 2020  Fee": "0.00",.  
-0003cec0: 2020 2020 2020 2320 2020 2020 2020 226d        #       "m
-0003ced0: 6574 686f 6422 3a20 2263 6172 6422 2c0a  ethod": "card",.
-0003cee0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003cef0: 2273 7461 7475 7322 3a20 2246 6169 6c65  "status": "Faile
-0003cf00: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
-0003cf10: 2020 2020 2263 7265 6174 6554 696d 6522      "createTime"
-0003cf20: 3a20 2231 3632 3735 3031 3032 3630 3030  : "1627501026000
-0003cf30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003cf40: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
-0003cf50: 2022 3136 3237 3530 3130 3237 3030 3022   "1627501027000"
-0003cf60: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0003cf70: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0003cf80: 2020 2023 2077 6974 6864 7261 770a 2020     # withdraw.  
-0003cf90: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0003cfa0: 2320 2020 207b 6964 3a20 2739 6136 3736  #    {id: '9a676
-0003cfb0: 3238 6231 3662 6134 3938 3861 6532 3064  28b16ba4988ae20d
-0003cfc0: 3332 3933 3333 6631 3662 6327 7d0a 2020  329333f16bc'}.  
-0003cfd0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0003cfe0: 6964 203d 2073 656c 662e 7361 6665 5f73  id = self.safe_s
-0003cff0: 7472 696e 675f 3228 7472 616e 7361 6374  tring_2(transact
-0003d000: 696f 6e2c 2027 6964 272c 2027 6f72 6465  ion, 'id', 'orde
-0003d010: 724e 6f27 290a 2020 2020 2020 2020 6164  rNo').        ad
-0003d020: 6472 6573 7320 3d20 7365 6c66 2e73 6166  dress = self.saf
-0003d030: 655f 7374 7269 6e67 2874 7261 6e73 6163  e_string(transac
-0003d040: 7469 6f6e 2c20 2761 6464 7265 7373 2729  tion, 'address')
-0003d050: 0a20 2020 2020 2020 2074 6167 203d 2073  .        tag = s
-0003d060: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0003d070: 7472 616e 7361 6374 696f 6e2c 2027 6164  transaction, 'ad
-0003d080: 6472 6573 7354 6167 2729 2020 2320 7365  dressTag')  # se
-0003d090: 7420 6275 7420 756e 7573 6564 0a20 2020  t but unused.   
-0003d0a0: 2020 2020 2069 6620 7461 6720 6973 206e       if tag is n
-0003d0b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0003d0c0: 2020 2020 2069 6620 6c65 6e28 7461 6729       if len(tag)
-0003d0d0: 203c 2031 3a0a 2020 2020 2020 2020 2020   < 1:.          
-0003d0e0: 2020 2020 2020 7461 6720 3d20 4e6f 6e65        tag = None
-0003d0f0: 0a20 2020 2020 2020 2074 7869 6420 3d20  .        txid = 
-0003d100: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003d110: 2874 7261 6e73 6163 7469 6f6e 2c20 2774  (transaction, 't
-0003d120: 7849 6427 290a 2020 2020 2020 2020 6966  xId').        if
-0003d130: 2028 7478 6964 2069 7320 6e6f 7420 4e6f   (txid is not No
-0003d140: 6e65 2920 616e 6420 2874 7869 642e 6669  ne) and (txid.fi
-0003d150: 6e64 2827 496e 7465 726e 616c 2074 7261  nd('Internal tra
-0003d160: 6e73 6665 7220 2729 203e 3d20 3029 3a0a  nsfer ') >= 0):.
-0003d170: 2020 2020 2020 2020 2020 2020 7478 6964              txid
-0003d180: 203d 2074 7869 645b 3138 3a5d 0a20 2020   = txid[18:].   
-0003d190: 2020 2020 2063 7572 7265 6e63 7949 6420       currencyId 
-0003d1a0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0003d1b0: 6e67 5f32 2874 7261 6e73 6163 7469 6f6e  ng_2(transaction
-0003d1c0: 2c20 2763 6f69 6e27 2c20 2766 6961 7443  , 'coin', 'fiatC
-0003d1d0: 7572 7265 6e63 7927 290a 2020 2020 2020  urrency').      
-0003d1e0: 2020 636f 6465 203d 2073 656c 662e 7361    code = self.sa
-0003d1f0: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
-0003d200: 2863 7572 7265 6e63 7949 642c 2063 7572  (currencyId, cur
-0003d210: 7265 6e63 7929 0a20 2020 2020 2020 2074  rency).        t
-0003d220: 696d 6573 7461 6d70 203d 204e 6f6e 650a  imestamp = None.
-0003d230: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
-0003d240: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
-0003d250: 7465 6765 725f 3228 7472 616e 7361 6374  teger_2(transact
-0003d260: 696f 6e2c 2027 696e 7365 7274 5469 6d65  ion, 'insertTime
-0003d270: 272c 2027 6372 6561 7465 5469 6d65 2729  ', 'createTime')
-0003d280: 0a20 2020 2020 2020 2069 6620 7469 6d65  .        if time
-0003d290: 7374 616d 7020 6973 204e 6f6e 653a 0a20  stamp is None:. 
-0003d2a0: 2020 2020 2020 2020 2020 2074 696d 6573             times
-0003d2b0: 7461 6d70 203d 2073 656c 662e 7061 7273  tamp = self.pars
-0003d2c0: 6538 3630 3128 7365 6c66 2e73 6166 655f  e8601(self.safe_
-0003d2d0: 7374 7269 6e67 2874 7261 6e73 6163 7469  string(transacti
-0003d2e0: 6f6e 2c20 2761 7070 6c79 5469 6d65 2729  on, 'applyTime')
-0003d2f0: 290a 2020 2020 2020 2020 7570 6461 7465  ).        update
-0003d300: 6420 3d20 7365 6c66 2e73 6166 655f 696e  d = self.safe_in
-0003d310: 7465 6765 725f 3228 7472 616e 7361 6374  teger_2(transact
-0003d320: 696f 6e2c 2027 7375 6363 6573 7354 696d  ion, 'successTim
-0003d330: 6527 2c20 2775 7064 6174 6554 696d 6527  e', 'updateTime'
-0003d340: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
-0003d350: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0003d360: 6728 7472 616e 7361 6374 696f 6e2c 2027  g(transaction, '
-0003d370: 7479 7065 2729 0a20 2020 2020 2020 2069  type').        i
-0003d380: 6620 7479 7065 2069 7320 4e6f 6e65 3a0a  f type is None:.
-0003d390: 2020 2020 2020 2020 2020 2020 7478 5479              txTy
-0003d3a0: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
-0003d3b0: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
-0003d3c0: 6e2c 2027 7472 616e 7361 6374 696f 6e54  n, 'transactionT
-0003d3d0: 7970 6527 290a 2020 2020 2020 2020 2020  ype').          
-0003d3e0: 2020 6966 2074 7854 7970 6520 6973 206e    if txType is n
-0003d3f0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0003d400: 2020 2020 2020 2020 2074 7970 6520 3d20           type = 
-0003d410: 2764 6570 6f73 6974 2720 6966 2028 7478  'deposit' if (tx
-0003d420: 5479 7065 203d 3d20 2730 2729 2065 6c73  Type == '0') els
-0003d430: 6520 2777 6974 6864 7261 7761 6c27 0a20  e 'withdrawal'. 
-0003d440: 2020 2020 2020 2020 2020 206c 6567 616c             legal
-0003d450: 4d6f 6e65 7943 7572 7265 6e63 6965 7342  MoneyCurrenciesB
-0003d460: 7949 6420 3d20 7365 6c66 2e73 6166 655f  yId = self.safe_
-0003d470: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
-0003d480: 6e73 2c20 276c 6567 616c 4d6f 6e65 7943  ns, 'legalMoneyC
-0003d490: 7572 7265 6e63 6965 7342 7949 6427 290a  urrenciesById').
-0003d4a0: 2020 2020 2020 2020 2020 2020 636f 6465              code
-0003d4b0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0003d4c0: 696e 6728 6c65 6761 6c4d 6f6e 6579 4375  ing(legalMoneyCu
-0003d4d0: 7272 656e 6369 6573 4279 4964 2c20 636f  rrenciesById, co
-0003d4e0: 6465 2c20 636f 6465 290a 2020 2020 2020  de, code).      
-0003d4f0: 2020 7374 6174 7573 203d 2073 656c 662e    status = self.
-0003d500: 7061 7273 655f 7472 616e 7361 6374 696f  parse_transactio
-0003d510: 6e5f 7374 6174 7573 5f62 795f 7479 7065  n_status_by_type
-0003d520: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
-0003d530: 6728 7472 616e 7361 6374 696f 6e2c 2027  g(transaction, '
-0003d540: 7374 6174 7573 2729 2c20 7479 7065 290a  status'), type).
-0003d550: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
-0003d560: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-0003d570: 7228 7472 616e 7361 6374 696f 6e2c 2027  r(transaction, '
-0003d580: 616d 6f75 6e74 2729 0a20 2020 2020 2020  amount').       
-0003d590: 2066 6565 436f 7374 203d 2073 656c 662e   feeCost = self.
-0003d5a0: 7361 6665 5f6e 756d 6265 725f 3228 7472  safe_number_2(tr
-0003d5b0: 616e 7361 6374 696f 6e2c 2027 7472 616e  ansaction, 'tran
-0003d5c0: 7361 6374 696f 6e46 6565 272c 2027 746f  sactionFee', 'to
-0003d5d0: 7461 6c46 6565 2729 0a20 2020 2020 2020  talFee').       
-0003d5e0: 2066 6565 203d 204e 6f6e 650a 2020 2020   fee = None.    
-0003d5f0: 2020 2020 6966 2066 6565 436f 7374 2069      if feeCost i
-0003d600: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0003d610: 2020 2020 2020 2020 6665 6520 3d20 7b27          fee = {'
-0003d620: 6375 7272 656e 6379 273a 2063 6f64 652c  currency': code,
-0003d630: 2027 636f 7374 273a 2066 6565 436f 7374   'cost': feeCost
-0003d640: 7d0a 2020 2020 2020 2020 696e 7465 726e  }.        intern
-0003d650: 616c 203d 2073 656c 662e 7361 6665 5f69  al = self.safe_i
-0003d660: 6e74 6567 6572 2874 7261 6e73 6163 7469  nteger(transacti
-0003d670: 6f6e 2c20 2774 7261 6e73 6665 7254 7970  on, 'transferTyp
-0003d680: 6527 290a 2020 2020 2020 2020 6966 2069  e').        if i
-0003d690: 6e74 6572 6e61 6c20 6973 206e 6f74 204e  nternal is not N
-0003d6a0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0003d6b0: 2069 6e74 6572 6e61 6c20 3d20 5472 7565   internal = True
-0003d6c0: 2069 6620 696e 7465 726e 616c 2065 6c73   if internal els
-0003d6d0: 6520 4661 6c73 650a 2020 2020 2020 2020  e False.        
-0003d6e0: 6e65 7477 6f72 6b20 3d20 7365 6c66 2e73  network = self.s
-0003d6f0: 6166 655f 7374 7269 6e67 2874 7261 6e73  afe_string(trans
-0003d700: 6163 7469 6f6e 2c20 276e 6574 776f 726b  action, 'network
-0003d710: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
-0003d720: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
-0003d730: 2769 6e66 6f27 3a20 7472 616e 7361 6374  'info': transact
-0003d740: 696f 6e2c 0a20 2020 2020 2020 2020 2020  ion,.           
-0003d750: 2027 6964 273a 2069 642c 0a20 2020 2020   'id': id,.     
-0003d760: 2020 2020 2020 2027 7478 6964 273a 2074         'txid': t
-0003d770: 7869 642c 0a20 2020 2020 2020 2020 2020  xid,.           
-0003d780: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
-0003d790: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-0003d7a0: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-0003d7b0: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-0003d7c0: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-0003d7d0: 2020 2020 2020 276e 6574 776f 726b 273a        'network':
-0003d7e0: 206e 6574 776f 726b 2c0a 2020 2020 2020   network,.      
-0003d7f0: 2020 2020 2020 2761 6464 7265 7373 273a        'address':
-0003d800: 2061 6464 7265 7373 2c0a 2020 2020 2020   address,.      
-0003d810: 2020 2020 2020 2761 6464 7265 7373 546f        'addressTo
-0003d820: 273a 2061 6464 7265 7373 2c0a 2020 2020  ': address,.    
-0003d830: 2020 2020 2020 2020 2761 6464 7265 7373          'address
-0003d840: 4672 6f6d 273a 204e 6f6e 652c 0a20 2020  From': None,.   
-0003d850: 2020 2020 2020 2020 2027 7461 6727 3a20           'tag': 
-0003d860: 7461 672c 0a20 2020 2020 2020 2020 2020  tag,.           
-0003d870: 2027 7461 6754 6f27 3a20 7461 672c 0a20   'tagTo': tag,. 
-0003d880: 2020 2020 2020 2020 2020 2027 7461 6746             'tagF
-0003d890: 726f 6d27 3a20 4e6f 6e65 2c0a 2020 2020  rom': None,.    
-0003d8a0: 2020 2020 2020 2020 2774 7970 6527 3a20          'type': 
-0003d8b0: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
-0003d8c0: 2020 2761 6d6f 756e 7427 3a20 616d 6f75    'amount': amou
-0003d8d0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
-0003d8e0: 2763 7572 7265 6e63 7927 3a20 636f 6465  'currency': code
-0003d8f0: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
-0003d900: 7461 7475 7327 3a20 7374 6174 7573 2c0a  tatus': status,.
-0003d910: 2020 2020 2020 2020 2020 2020 2775 7064              'upd
-0003d920: 6174 6564 273a 2075 7064 6174 6564 2c0a  ated': updated,.
-0003d930: 2020 2020 2020 2020 2020 2020 2769 6e74              'int
-0003d940: 6572 6e61 6c27 3a20 696e 7465 726e 616c  ernal': internal
-0003d950: 2c0a 2020 2020 2020 2020 2020 2020 2766  ,.            'f
-0003d960: 6565 273a 2066 6565 2c0a 2020 2020 2020  ee': fee,.      
-0003d970: 2020 7d0a 0a20 2020 2064 6566 2070 6172    }..    def par
-0003d980: 7365 5f74 7261 6e73 6665 725f 7374 6174  se_transfer_stat
-0003d990: 7573 2873 656c 662c 2073 7461 7475 7329  us(self, status)
-0003d9a0: 3a0a 2020 2020 2020 2020 7374 6174 7573  :.        status
-0003d9b0: 6573 203d 207b 0a20 2020 2020 2020 2020  es = {.         
-0003d9c0: 2020 2027 434f 4e46 4952 4d45 4427 3a20     'CONFIRMED': 
-0003d9d0: 276f 6b27 2c0a 2020 2020 2020 2020 7d0a  'ok',.        }.
-0003d9e0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0003d9f0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0003da00: 7374 6174 7573 6573 2c20 7374 6174 7573  statuses, status
-0003da10: 2c20 7374 6174 7573 290a 0a20 2020 2064  , status)..    d
-0003da20: 6566 2070 6172 7365 5f74 7261 6e73 6665  ef parse_transfe
-0003da30: 7228 7365 6c66 2c20 7472 616e 7366 6572  r(self, transfer
-0003da40: 2c20 6375 7272 656e 6379 3d4e 6f6e 6529  , currency=None)
-0003da50: 3a0a 2020 2020 2020 2020 230a 2020 2020  :.        #.    
-0003da60: 2020 2020 2320 7472 616e 7366 6572 0a20      # transfer. 
-0003da70: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0003da80: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0003da90: 2023 2020 2020 2020 2020 2022 7472 616e   #         "tran
-0003daa0: 4964 223a 3133 3532 3638 3533 3632 330a  Id":13526853623.
-0003dab0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0003dac0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0003dad0: 2020 2320 6665 7463 6854 7261 6e73 6665    # fetchTransfe
-0003dae0: 7273 0a20 2020 2020 2020 2023 0a20 2020  rs.        #.   
-0003daf0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-0003db00: 2020 2020 2023 2020 2020 2020 2020 2074       #         t
-0003db10: 696d 6573 7461 6d70 3a20 3136 3134 3634  imestamp: 161464
-0003db20: 3038 3738 3030 302c 0a20 2020 2020 2020  0878000,.       
-0003db30: 2023 2020 2020 2020 2020 2061 7373 6574   #         asset
-0003db40: 3a20 2755 5344 5427 2c0a 2020 2020 2020  : 'USDT',.      
-0003db50: 2020 2320 2020 2020 2020 2020 616d 6f75    #         amou
-0003db60: 6e74 3a20 2732 3527 2c0a 2020 2020 2020  nt: '25',.      
-0003db70: 2020 2320 2020 2020 2020 2020 7479 7065    #         type
-0003db80: 3a20 274d 4149 4e5f 554d 4655 5455 5245  : 'MAIN_UMFUTURE
-0003db90: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0003dba0: 2020 2020 2073 7461 7475 733a 2027 434f       status: 'CO
-0003dbb0: 4e46 4952 4d45 4427 2c0a 2020 2020 2020  NFIRMED',.      
-0003dbc0: 2020 2320 2020 2020 2020 2020 7472 616e    #         tran
-0003dbd0: 4964 3a20 3433 3030 3031 3236 3234 380a  Id: 43000126248.
-0003dbe0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0003dbf0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0003dc00: 2020 6964 203d 2073 656c 662e 7361 6665    id = self.safe
-0003dc10: 5f73 7472 696e 6728 7472 616e 7366 6572  _string(transfer
-0003dc20: 2c20 2774 7261 6e49 6427 290a 2020 2020  , 'tranId').    
-0003dc30: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
-0003dc40: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0003dc50: 6728 7472 616e 7366 6572 2c20 2761 7373  g(transfer, 'ass
-0003dc60: 6574 2729 0a20 2020 2020 2020 2063 6f64  et').        cod
-0003dc70: 6520 3d20 7365 6c66 2e73 6166 655f 6375  e = self.safe_cu
-0003dc80: 7272 656e 6379 5f63 6f64 6528 6375 7272  rrency_code(curr
-0003dc90: 656e 6379 4964 2c20 6375 7272 656e 6379  encyId, currency
-0003dca0: 290a 2020 2020 2020 2020 616d 6f75 6e74  ).        amount
-0003dcb0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-0003dcc0: 6265 7228 7472 616e 7366 6572 2c20 2761  ber(transfer, 'a
-0003dcd0: 6d6f 756e 7427 290a 2020 2020 2020 2020  mount').        
-0003dce0: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
-0003dcf0: 5f73 7472 696e 6728 7472 616e 7366 6572  _string(transfer
-0003dd00: 2c20 2774 7970 6527 290a 2020 2020 2020  , 'type').      
-0003dd10: 2020 6672 6f6d 4163 636f 756e 7420 3d20    fromAccount = 
-0003dd20: 4e6f 6e65 0a20 2020 2020 2020 2074 6f41  None.        toA
-0003dd30: 6363 6f75 6e74 203d 204e 6f6e 650a 2020  ccount = None.  
-0003dd40: 2020 2020 2020 6163 636f 756e 7473 4279        accountsBy
-0003dd50: 4964 203d 2073 656c 662e 7361 6665 5f76  Id = self.safe_v
-0003dd60: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
-0003dd70: 732c 2027 6163 636f 756e 7473 4279 4964  s, 'accountsById
-0003dd80: 272c 207b 7d29 0a20 2020 2020 2020 2069  ', {}).        i
-0003dd90: 6620 7479 7065 2069 7320 6e6f 7420 4e6f  f type is not No
-0003dda0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0003ddb0: 7061 7274 7320 3d20 7479 7065 2e73 706c  parts = type.spl
-0003ddc0: 6974 2827 5f27 290a 2020 2020 2020 2020  it('_').        
-0003ddd0: 2020 2020 6672 6f6d 4163 636f 756e 7420      fromAccount 
-0003dde0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0003ddf0: 6528 7061 7274 732c 2030 290a 2020 2020  e(parts, 0).    
-0003de00: 2020 2020 2020 2020 746f 4163 636f 756e          toAccoun
-0003de10: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-0003de20: 6c75 6528 7061 7274 732c 2031 290a 2020  lue(parts, 1).  
-0003de30: 2020 2020 2020 2020 2020 6672 6f6d 4163            fromAc
-0003de40: 636f 756e 7420 3d20 7365 6c66 2e73 6166  count = self.saf
-0003de50: 655f 7374 7269 6e67 2861 6363 6f75 6e74  e_string(account
-0003de60: 7342 7949 642c 2066 726f 6d41 6363 6f75  sById, fromAccou
-0003de70: 6e74 2c20 6672 6f6d 4163 636f 756e 7429  nt, fromAccount)
-0003de80: 0a20 2020 2020 2020 2020 2020 2074 6f41  .            toA
-0003de90: 6363 6f75 6e74 203d 2073 656c 662e 7361  ccount = self.sa
-0003dea0: 6665 5f73 7472 696e 6728 6163 636f 756e  fe_string(accoun
-0003deb0: 7473 4279 4964 2c20 746f 4163 636f 756e  tsById, toAccoun
-0003dec0: 742c 2074 6f41 6363 6f75 6e74 290a 2020  t, toAccount).  
-0003ded0: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-0003dee0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-0003def0: 6765 7228 7472 616e 7366 6572 2c20 2774  ger(transfer, 't
-0003df00: 696d 6573 7461 6d70 2729 0a20 2020 2020  imestamp').     
-0003df10: 2020 2073 7461 7475 7320 3d20 7365 6c66     status = self
-0003df20: 2e70 6172 7365 5f74 7261 6e73 6665 725f  .parse_transfer_
-0003df30: 7374 6174 7573 2873 656c 662e 7361 6665  status(self.safe
-0003df40: 5f73 7472 696e 6728 7472 616e 7366 6572  _string(transfer
-0003df50: 2c20 2773 7461 7475 7327 2929 0a20 2020  , 'status')).   
-0003df60: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
-0003df70: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
-0003df80: 3a20 7472 616e 7366 6572 2c0a 2020 2020  : transfer,.    
-0003df90: 2020 2020 2020 2020 2769 6427 3a20 6964          'id': id
-0003dfa0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-0003dfb0: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
-0003dfc0: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
-0003dfd0: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
-0003dfe0: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
-0003dff0: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
-0003e000: 2020 2027 6375 7272 656e 6379 273a 2063     'currency': c
-0003e010: 6f64 652c 0a20 2020 2020 2020 2020 2020  ode,.           
-0003e020: 2027 616d 6f75 6e74 273a 2061 6d6f 756e   'amount': amoun
-0003e030: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
-0003e040: 6672 6f6d 4163 636f 756e 7427 3a20 6672  fromAccount': fr
-0003e050: 6f6d 4163 636f 756e 742c 0a20 2020 2020  omAccount,.     
-0003e060: 2020 2020 2020 2027 746f 4163 636f 756e         'toAccoun
-0003e070: 7427 3a20 746f 4163 636f 756e 742c 0a20  t': toAccount,. 
-0003e080: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
-0003e090: 7573 273a 2073 7461 7475 732c 0a20 2020  us': status,.   
-0003e0a0: 2020 2020 207d 0a0a 2020 2020 6465 6620       }..    def 
-0003e0b0: 7061 7273 655f 696e 636f 6d65 2873 656c  parse_income(sel
-0003e0c0: 662c 2069 6e63 6f6d 652c 206d 6172 6b65  f, income, marke
-0003e0d0: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
-0003e0e0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0003e0f0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0003e100: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
-0003e110: 4855 5344 5422 2c0a 2020 2020 2020 2020  HUSDT",.        
-0003e120: 2320 2020 2020 2020 2269 6e63 6f6d 6554  #       "incomeT
-0003e130: 7970 6522 3a20 2246 554e 4449 4e47 5f46  ype": "FUNDING_F
-0003e140: 4545 222c 0a20 2020 2020 2020 2023 2020  EE",.        #  
-0003e150: 2020 2020 2022 696e 636f 6d65 223a 2022       "income": "
-0003e160: 302e 3030 3133 3433 3137 222c 0a20 2020  0.00134317",.   
-0003e170: 2020 2020 2023 2020 2020 2020 2022 6173       #       "as
-0003e180: 7365 7422 3a20 2255 5344 5422 2c0a 2020  set": "USDT",.  
-0003e190: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
-0003e1a0: 696d 6522 3a20 2231 3632 3135 3834 3030  ime": "162158400
-0003e1b0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0003e1c0: 2020 2020 2020 2022 696e 666f 223a 2022         "info": "
-0003e1d0: 4655 4e44 494e 475f 4645 4522 2c0a 2020  FUNDING_FEE",.  
-0003e1e0: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
-0003e1f0: 7261 6e49 6422 3a20 2234 3438 3033 3231  ranId": "4480321
-0003e200: 3939 3137 3734 3034 3435 3830 222c 0a20  991774044580",. 
-0003e210: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0003e220: 7472 6164 6549 6422 3a20 2222 0a20 2020  tradeId": "".   
-0003e230: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0003e240: 2020 2020 2023 0a20 2020 2020 2020 206d       #.        m
-0003e250: 6172 6b65 7449 6420 3d20 7365 6c66 2e73  arketId = self.s
-0003e260: 6166 655f 7374 7269 6e67 2869 6e63 6f6d  afe_string(incom
-0003e270: 652c 2027 7379 6d62 6f6c 2729 0a20 2020  e, 'symbol').   
-0003e280: 2020 2020 2073 796d 626f 6c20 3d20 7365       symbol = se
-0003e290: 6c66 2e73 6166 655f 7379 6d62 6f6c 286d  lf.safe_symbol(m
-0003e2a0: 6172 6b65 7449 642c 206d 6172 6b65 742c  arketId, market,
-0003e2b0: 204e 6f6e 652c 2027 7377 6170 2729 0a20   None, 'swap'). 
-0003e2c0: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
-0003e2d0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0003e2e0: 2869 6e63 6f6d 652c 2027 696e 636f 6d65  (income, 'income
-0003e2f0: 2729 0a20 2020 2020 2020 2063 7572 7265  ').        curre
-0003e300: 6e63 7949 6420 3d20 7365 6c66 2e73 6166  ncyId = self.saf
-0003e310: 655f 7374 7269 6e67 2869 6e63 6f6d 652c  e_string(income,
-0003e320: 2027 6173 7365 7427 290a 2020 2020 2020   'asset').      
-0003e330: 2020 636f 6465 203d 2073 656c 662e 7361    code = self.sa
-0003e340: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
-0003e350: 2863 7572 7265 6e63 7949 6429 0a20 2020  (currencyId).   
-0003e360: 2020 2020 2069 6420 3d20 7365 6c66 2e73       id = self.s
-0003e370: 6166 655f 7374 7269 6e67 2869 6e63 6f6d  afe_string(incom
-0003e380: 652c 2027 7472 616e 4964 2729 0a20 2020  e, 'tranId').   
-0003e390: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
-0003e3a0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-0003e3b0: 6572 2869 6e63 6f6d 652c 2027 7469 6d65  er(income, 'time
-0003e3c0: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
-0003e3d0: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
-0003e3e0: 2769 6e66 6f27 3a20 696e 636f 6d65 2c0a  'info': income,.
-0003e3f0: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-0003e400: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
-0003e410: 2020 2020 2020 2020 2020 2763 6f64 6527            'code'
-0003e420: 3a20 636f 6465 2c0a 2020 2020 2020 2020  : code,.        
-0003e430: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
-0003e440: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
-0003e450: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-0003e460: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-0003e470: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
-0003e480: 2020 2020 2020 2020 2027 6964 273a 2069           'id': i
-0003e490: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
-0003e4a0: 616d 6f75 6e74 273a 2061 6d6f 756e 742c  amount': amount,
-0003e4b0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-0003e4c0: 6465 6620 7472 616e 7366 6572 2873 656c  def transfer(sel
-0003e4d0: 662c 2063 6f64 653a 2073 7472 2c20 616d  f, code: str, am
-0003e4e0: 6f75 6e74 2c20 6672 6f6d 4163 636f 756e  ount, fromAccoun
-0003e4f0: 742c 2074 6f41 6363 6f75 6e74 2c20 7061  t, toAccount, pa
-0003e500: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-0003e510: 2020 2222 220a 2020 2020 2020 2020 7472    """.        tr
-0003e520: 616e 7366 6572 2063 7572 7265 6e63 7920  ansfer currency 
-0003e530: 696e 7465 726e 616c 6c79 2062 6574 7765  internally betwe
-0003e540: 656e 2077 616c 6c65 7473 206f 6e20 7468  en wallets on th
-0003e550: 6520 7361 6d65 2061 6363 6f75 6e74 0a20  e same account. 
-0003e560: 2020 2020 2020 2073 6565 2068 7474 7073         see https
-0003e570: 3a2f 2f62 696e 616e 6365 2d64 6f63 732e  ://binance-docs.
-0003e580: 6769 7468 7562 2e69 6f2f 6170 6964 6f63  github.io/apidoc
-0003e590: 732f 7370 6f74 2f65 6e2f 2375 7365 722d  s/spot/en/#user-
-0003e5a0: 756e 6976 6572 7361 6c2d 7472 616e 7366  universal-transf
-0003e5b0: 6572 2d75 7365 725f 6461 7461 0a20 2020  er-user_data.   
-0003e5c0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-0003e5d0: 2f62 696e 616e 6365 2d64 6f63 732e 6769  /binance-docs.gi
-0003e5e0: 7468 7562 2e69 6f2f 6170 6964 6f63 732f  thub.io/apidocs/
-0003e5f0: 7370 6f74 2f65 6e2f 2369 736f 6c61 7465  spot/en/#isolate
-0003e600: 642d 6d61 7267 696e 2d61 6363 6f75 6e74  d-margin-account
-0003e610: 2d74 7261 6e73 6665 722d 6d61 7267 696e  -transfer-margin
-0003e620: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003e630: 7374 7220 636f 6465 3a20 756e 6966 6965  str code: unifie
-0003e640: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
-0003e650: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-0003e660: 6c6f 6174 2061 6d6f 756e 743a 2061 6d6f  loat amount: amo
-0003e670: 756e 7420 746f 2074 7261 6e73 6665 720a  unt to transfer.
-0003e680: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0003e690: 7472 2066 726f 6d41 6363 6f75 6e74 3a20  tr fromAccount: 
-0003e6a0: 6163 636f 756e 7420 746f 2074 7261 6e73  account to trans
-0003e6b0: 6665 7220 6672 6f6d 0a20 2020 2020 2020  fer from.       
-0003e6c0: 203a 7061 7261 6d20 7374 7220 746f 4163   :param str toAc
-0003e6d0: 636f 756e 743a 2061 6363 6f75 6e74 2074  count: account t
-0003e6e0: 6f20 7472 616e 7366 6572 2074 6f0a 2020  o transfer to.  
-0003e6f0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-0003e700: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
-0003e710: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-0003e720: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
-0003e730: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
-0003e740: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-0003e750: 2064 6963 743a 2061 2060 7472 616e 7366   dict: a `transf
-0003e760: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
-0003e770: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-0003e780: 636f 6d2f 232f 3f69 643d 7472 616e 7366  com/#/?id=transf
-0003e790: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-0003e7a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0003e7b0: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
-0003e7c0: 6b65 7473 2829 0a20 2020 2020 2020 2063  kets().        c
-0003e7d0: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
-0003e7e0: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
-0003e7f0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0003e800: 7b0a 2020 2020 2020 2020 2020 2020 2761  {.            'a
-0003e810: 7373 6574 273a 2063 7572 7265 6e63 795b  sset': currency[
-0003e820: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-0003e830: 2020 2027 616d 6f75 6e74 273a 2073 656c     'amount': sel
-0003e840: 662e 6375 7272 656e 6379 5f74 6f5f 7072  f.currency_to_pr
-0003e850: 6563 6973 696f 6e28 636f 6465 2c20 616d  ecision(code, am
-0003e860: 6f75 6e74 292c 0a20 2020 2020 2020 207d  ount),.        }
-0003e870: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0003e880: 5b27 7479 7065 275d 203d 2073 656c 662e  ['type'] = self.
-0003e890: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
-0003e8a0: 6d73 2c20 2774 7970 6527 290a 2020 2020  ms, 'type').    
-0003e8b0: 2020 2020 6d65 7468 6f64 203d 2027 7361      method = 'sa
-0003e8c0: 7069 506f 7374 4173 7365 7454 7261 6e73  piPostAssetTrans
-0003e8d0: 6665 7227 0a20 2020 2020 2020 2069 6620  fer'.        if 
-0003e8e0: 7265 7175 6573 745b 2774 7970 6527 5d20  request['type'] 
-0003e8f0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-0003e900: 2020 2020 2073 796d 626f 6c20 3d20 7365       symbol = se
-0003e910: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-0003e920: 6172 616d 732c 2027 7379 6d62 6f6c 2729  arams, 'symbol')
-0003e930: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0003e940: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
-0003e950: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0003e960: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-0003e970: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
-0003e980: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
-0003e990: 2020 2020 2066 726f 6d49 6420 3d20 7365       fromId = se
-0003e9a0: 6c66 2e63 6f6e 7665 7274 5f74 7970 655f  lf.convert_type_
-0003e9b0: 746f 5f61 6363 6f75 6e74 2866 726f 6d41  to_account(fromA
-0003e9c0: 6363 6f75 6e74 292e 7570 7065 7228 290a  ccount).upper().
-0003e9d0: 2020 2020 2020 2020 2020 2020 746f 4964              toId
-0003e9e0: 203d 2073 656c 662e 636f 6e76 6572 745f   = self.convert_
-0003e9f0: 7479 7065 5f74 6f5f 6163 636f 756e 7428  type_to_account(
-0003ea00: 746f 4163 636f 756e 7429 2e75 7070 6572  toAccount).upper
-0003ea10: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
-0003ea20: 6620 6672 6f6d 4964 203d 3d20 2749 534f  f fromId == 'ISO
-0003ea30: 4c41 5445 4427 3a0a 2020 2020 2020 2020  LATED':.        
-0003ea40: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-0003ea50: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
-0003ea60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003ea70: 6169 7365 2041 7267 756d 656e 7473 5265  aise ArgumentsRe
-0003ea80: 7175 6972 6564 2873 656c 662e 6964 202b  quired(self.id +
-0003ea90: 2027 2074 7261 6e73 6665 7228 2920 7265   ' transfer() re
-0003eaa0: 7175 6972 6573 2070 6172 616d 735b 2273  quires params["s
-0003eab0: 796d 626f 6c22 5d20 7768 656e 2066 726f  ymbol"] when fro
-0003eac0: 6d41 6363 6f75 6e74 2069 7320 2720 2b20  mAccount is ' + 
-0003ead0: 6672 6f6d 4163 636f 756e 7429 0a20 2020  fromAccount).   
-0003eae0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0003eaf0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0003eb00: 2020 2020 2020 2066 726f 6d49 6420 3d20         fromId = 
-0003eb10: 7365 6c66 2e6d 6172 6b65 745f 6964 2873  self.market_id(s
-0003eb20: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-0003eb30: 2020 2069 6620 746f 4964 203d 3d20 2749     if toId == 'I
-0003eb40: 534f 4c41 5445 4427 3a0a 2020 2020 2020  SOLATED':.      
-0003eb50: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
-0003eb60: 626f 6c20 6973 204e 6f6e 653a 0a20 2020  bol is None:.   
-0003eb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003eb80: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-0003eb90: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-0003eba0: 202b 2027 2074 7261 6e73 6665 7228 2920   + ' transfer() 
-0003ebb0: 7265 7175 6972 6573 2070 6172 616d 735b  requires params[
-0003ebc0: 2273 796d 626f 6c22 5d20 7768 656e 2074  "symbol"] when t
-0003ebd0: 6f41 6363 6f75 6e74 2069 7320 2720 2b20  oAccount is ' + 
-0003ebe0: 746f 4163 636f 756e 7429 0a20 2020 2020  toAccount).     
-0003ebf0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0003ec00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003ec10: 2020 2020 2074 6f49 6420 3d20 7365 6c66       toId = self
-0003ec20: 2e6d 6172 6b65 745f 6964 2873 796d 626f  .market_id(symbo
-0003ec30: 6c29 0a20 2020 2020 2020 2020 2020 2061  l).            a
-0003ec40: 6363 6f75 6e74 7342 7949 6420 3d20 7365  ccountsById = se
-0003ec50: 6c66 2e73 6166 655f 7661 6c75 6528 7365  lf.safe_value(se
-0003ec60: 6c66 2e6f 7074 696f 6e73 2c20 2761 6363  lf.options, 'acc
-0003ec70: 6f75 6e74 7342 7949 6427 2c20 7b7d 290a  ountsById', {}).
-0003ec80: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
-0003ec90: 4973 6f6c 6174 6564 203d 206e 6f74 2028  Isolated = not (
-0003eca0: 6672 6f6d 4964 2069 6e20 6163 636f 756e  fromId in accoun
-0003ecb0: 7473 4279 4964 290a 2020 2020 2020 2020  tsById).        
-0003ecc0: 2020 2020 746f 4973 6f6c 6174 6564 203d      toIsolated =
-0003ecd0: 206e 6f74 2028 746f 4964 2069 6e20 6163   not (toId in ac
-0003ece0: 636f 756e 7473 4279 4964 290a 2020 2020  countsById).    
-0003ecf0: 2020 2020 2020 2020 6966 2066 726f 6d49          if fromI
-0003ed00: 736f 6c61 7465 6420 6f72 2074 6f49 736f  solated or toIso
-0003ed10: 6c61 7465 643a 2020 2320 4973 6f6c 6174  lated:  # Isolat
-0003ed20: 6564 206d 6172 6769 6e20 7472 616e 7366  ed margin transf
-0003ed30: 6572 0a20 2020 2020 2020 2020 2020 2020  er.             
-0003ed40: 2020 2066 726f 6d46 7574 7572 6520 3d20     fromFuture = 
-0003ed50: 6672 6f6d 4964 203d 3d20 2755 4d46 5554  fromId == 'UMFUT
-0003ed60: 5552 4527 206f 7220 6672 6f6d 4964 203d  URE' or fromId =
-0003ed70: 3d20 2743 4d46 5554 5552 4527 0a20 2020  = 'CMFUTURE'.   
-0003ed80: 2020 2020 2020 2020 2020 2020 2074 6f46               toF
-0003ed90: 7574 7572 6520 3d20 746f 4964 203d 3d20  uture = toId == 
-0003eda0: 2755 4d46 5554 5552 4527 206f 7220 746f  'UMFUTURE' or to
-0003edb0: 4964 203d 3d20 2743 4d46 5554 5552 4527  Id == 'CMFUTURE'
-0003edc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003edd0: 2066 726f 6d53 706f 7420 3d20 6672 6f6d   fromSpot = from
-0003ede0: 4964 203d 3d20 274d 4149 4e27 0a20 2020  Id == 'MAIN'.   
-0003edf0: 2020 2020 2020 2020 2020 2020 2074 6f53               toS
-0003ee00: 706f 7420 3d20 746f 4964 203d 3d20 274d  pot = toId == 'M
-0003ee10: 4149 4e27 0a20 2020 2020 2020 2020 2020  AIN'.           
-0003ee20: 2020 2020 2066 756e 6469 6e67 203d 2066       funding = f
-0003ee30: 726f 6d49 6420 3d3d 2027 4655 4e44 494e  romId == 'FUNDIN
-0003ee40: 4727 206f 7220 746f 4964 203d 3d20 2746  G' or toId == 'F
-0003ee50: 554e 4449 4e47 270a 2020 2020 2020 2020  UNDING'.        
-0003ee60: 2020 2020 2020 2020 6d69 6e69 6e67 203d          mining =
-0003ee70: 2066 726f 6d49 6420 3d3d 2027 4d49 4e49   fromId == 'MINI
-0003ee80: 4e47 2720 6f72 2074 6f49 6420 3d3d 2027  NG' or toId == '
-0003ee90: 4d49 4e49 4e47 270a 2020 2020 2020 2020  MINING'.        
-0003eea0: 2020 2020 2020 2020 6f70 7469 6f6e 203d          option =
-0003eeb0: 2066 726f 6d49 6420 3d3d 2027 4f50 5449   fromId == 'OPTI
-0003eec0: 4f4e 2720 6f72 2074 6f49 6420 3d3d 2027  ON' or toId == '
-0003eed0: 4f50 5449 4f4e 270a 2020 2020 2020 2020  OPTION'.        
-0003eee0: 2020 2020 2020 2020 7072 6f68 6962 6974          prohibit
-0003eef0: 6564 5769 7468 4973 6f6c 6174 6564 203d  edWithIsolated =
-0003ef00: 2066 726f 6d46 7574 7572 6520 6f72 2074   fromFuture or t
-0003ef10: 6f46 7574 7572 6520 6f72 206d 696e 696e  oFuture or minin
-0003ef20: 6720 6f72 2066 756e 6469 6e67 206f 7220  g or funding or 
-0003ef30: 6f70 7469 6f6e 0a20 2020 2020 2020 2020  option.         
-0003ef40: 2020 2020 2020 2069 6620 2866 726f 6d49         if (fromI
-0003ef50: 736f 6c61 7465 6420 6f72 2074 6f49 736f  solated or toIso
-0003ef60: 6c61 7465 6429 2061 6e64 2070 726f 6869  lated) and prohi
-0003ef70: 6269 7465 6457 6974 6849 736f 6c61 7465  bitedWithIsolate
-0003ef80: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
-0003ef90: 2020 2020 2020 2072 6169 7365 2042 6164         raise Bad
-0003efa0: 5265 7175 6573 7428 7365 6c66 2e69 6420  Request(self.id 
-0003efb0: 2b20 2720 7472 616e 7366 6572 2829 2064  + ' transfer() d
-0003efc0: 6f65 7320 6e6f 7420 616c 6c6f 7720 7472  oes not allow tr
-0003efd0: 616e 7366 6572 7320 6265 7477 6565 6e20  ansfers between 
-0003efe0: 2720 2b20 6672 6f6d 4163 636f 756e 7420  ' + fromAccount 
-0003eff0: 2b20 2720 616e 6420 2720 2b20 746f 4163  + ' and ' + toAc
-0003f000: 636f 756e 7429 0a20 2020 2020 2020 2020  count).         
-0003f010: 2020 2020 2020 2065 6c69 6620 746f 5370         elif toSp
-0003f020: 6f74 2061 6e64 2066 726f 6d49 736f 6c61  ot and fromIsola
-0003f030: 7465 643a 0a20 2020 2020 2020 2020 2020  ted:.           
-0003f040: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-0003f050: 3d20 2773 6170 6950 6f73 744d 6172 6769  = 'sapiPostMargi
-0003f060: 6e49 736f 6c61 7465 6454 7261 6e73 6665  nIsolatedTransfe
-0003f070: 7227 0a20 2020 2020 2020 2020 2020 2020  r'.             
-0003f080: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003f090: 7472 616e 7346 726f 6d27 5d20 3d20 2749  transFrom'] = 'I
-0003f0a0: 534f 4c41 5445 445f 4d41 5247 494e 270a  SOLATED_MARGIN'.
-0003f0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f0c0: 2020 2020 7265 7175 6573 745b 2774 7261      request['tra
-0003f0d0: 6e73 546f 275d 203d 2027 5350 4f54 270a  nsTo'] = 'SPOT'.
-0003f0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f0f0: 2020 2020 7265 7175 6573 745b 2773 796d      request['sym
-0003f100: 626f 6c27 5d20 3d20 6672 6f6d 4964 0a20  bol'] = fromId. 
-0003f110: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003f120: 6c69 6620 6672 6f6d 5370 6f74 2061 6e64  lif fromSpot and
-0003f130: 2074 6f49 736f 6c61 7465 643a 0a20 2020   toIsolated:.   
-0003f140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f150: 206d 6574 686f 6420 3d20 2773 6170 6950   method = 'sapiP
-0003f160: 6f73 744d 6172 6769 6e49 736f 6c61 7465  ostMarginIsolate
-0003f170: 6454 7261 6e73 6665 7227 0a20 2020 2020  dTransfer'.     
-0003f180: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003f190: 6571 7565 7374 5b27 7472 616e 7346 726f  equest['transFro
-0003f1a0: 6d27 5d20 3d20 2753 504f 5427 0a20 2020  m'] = 'SPOT'.   
-0003f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f1c0: 2072 6571 7565 7374 5b27 7472 616e 7354   request['transT
-0003f1d0: 6f27 5d20 3d20 2749 534f 4c41 5445 445f  o'] = 'ISOLATED_
-0003f1e0: 4d41 5247 494e 270a 2020 2020 2020 2020  MARGIN'.        
-0003f1f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003f200: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
-0003f210: 746f 4964 0a20 2020 2020 2020 2020 2020  toId.           
-0003f220: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003f230: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003f240: 6620 6672 6f6d 4973 6f6c 6174 6564 3a0a  f fromIsolated:.
-0003f250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f260: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003f270: 2766 726f 6d53 796d 626f 6c27 5d20 3d20  'fromSymbol'] = 
-0003f280: 6672 6f6d 4964 0a20 2020 2020 2020 2020  fromId.         
-0003f290: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0003f2a0: 726f 6d49 6420 3d20 2749 534f 4c41 5445  romId = 'ISOLATE
-0003f2b0: 444d 4152 4749 4e27 0a20 2020 2020 2020  DMARGIN'.       
-0003f2c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0003f2d0: 746f 4973 6f6c 6174 6564 3a0a 2020 2020  toIsolated:.    
-0003f2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f2f0: 2020 2020 7265 7175 6573 745b 2774 6f53      request['toS
-0003f300: 796d 626f 6c27 5d20 3d20 746f 4964 0a20  ymbol'] = toId. 
-0003f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f320: 2020 2020 2020 2074 6f49 6420 3d20 2749         toId = 'I
-0003f330: 534f 4c41 5445 444d 4152 4749 4e27 0a20  SOLATEDMARGIN'. 
-0003f340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f350: 2020 2072 6571 7565 7374 5b27 7479 7065     request['type
-0003f360: 275d 203d 2066 726f 6d49 6420 2b20 275f  '] = fromId + '_
-0003f370: 2720 2b20 746f 4964 0a20 2020 2020 2020  ' + toId.       
-0003f380: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003f390: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003f3a0: 7374 5b27 7479 7065 275d 203d 2066 726f  st['type'] = fro
-0003f3b0: 6d49 6420 2b20 275f 2720 2b20 746f 4964  mId + '_' + toId
-0003f3c0: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
-0003f3d0: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
-0003f3e0: 6d73 2c20 2774 7970 6527 290a 2020 2020  ms, 'type').    
-0003f3f0: 2020 2020 7265 7370 6f6e 7365 203d 2067      response = g
-0003f400: 6574 6174 7472 2873 656c 662c 206d 6574  etattr(self, met
-0003f410: 686f 6429 2873 656c 662e 6578 7465 6e64  hod)(self.extend
-0003f420: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-0003f430: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-0003f440: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-0003f450: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0003f460: 7472 616e 4964 223a 3133 3532 3638 3533  tranId":13526853
-0003f470: 3632 330a 2020 2020 2020 2020 2320 2020  623.        #   
-0003f480: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0003f490: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0003f4a0: 662e 7061 7273 655f 7472 616e 7366 6572  f.parse_transfer
-0003f4b0: 2872 6573 706f 6e73 652c 2063 7572 7265  (response, curre
-0003f4c0: 6e63 7929 0a0a 2020 2020 6465 6620 6665  ncy)..    def fe
-0003f4d0: 7463 685f 7472 616e 7366 6572 7328 7365  tch_transfers(se
-0003f4e0: 6c66 2c20 636f 6465 3a20 4f70 7469 6f6e  lf, code: Option
-0003f4f0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-0003f500: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-0003f510: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-0003f520: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-0003f530: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-0003f540: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-0003f550: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-0003f560: 6120 6869 7374 6f72 7920 6f66 2069 6e74  a history of int
-0003f570: 6572 6e61 6c20 7472 616e 7366 6572 7320  ernal transfers 
-0003f580: 6d61 6465 206f 6e20 616e 2061 6363 6f75  made on an accou
-0003f590: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-0003f5a0: 6d20 7374 727c 4e6f 6e65 2063 6f64 653a  m str|None code:
-0003f5b0: 2075 6e69 6669 6564 2063 7572 7265 6e63   unified currenc
-0003f5c0: 7920 636f 6465 206f 6620 7468 6520 6375  y code of the cu
-0003f5d0: 7272 656e 6379 2074 7261 6e73 6665 7272  rrency transferr
-0003f5e0: 6564 0a20 2020 2020 2020 203a 7061 7261  ed.        :para
-0003f5f0: 6d20 696e 747c 4e6f 6e65 2073 696e 6365  m int|None since
-0003f600: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
-0003f610: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
-0003f620: 6368 2074 7261 6e73 6665 7273 2066 6f72  ch transfers for
-0003f630: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003f640: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
-0003f650: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
-0003f660: 6572 206f 6620 7472 616e 7366 6572 7320  er of transfers 
-0003f670: 7374 7275 6374 7572 6573 2074 6f20 7265  structures to re
-0003f680: 7472 6965 7665 0a20 2020 2020 2020 203a  trieve.        :
-0003f690: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-0003f6a0: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-0003f6b0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-0003f6c0: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
-0003f6d0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-0003f6e0: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
-0003f6f0: 3a20 6120 6c69 7374 206f 6620 6074 7261  : a list of `tra
-0003f700: 6e73 6665 7220 7374 7275 6374 7572 6573  nsfer structures
-0003f710: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0003f720: 6378 742e 636f 6d2f 232f 3f69 643d 7472  cxt.com/#/?id=tr
-0003f730: 616e 7366 6572 2d73 7472 7563 7475 7265  ansfer-structure
-0003f740: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-0003f750: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-0003f760: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-0003f770: 2020 2063 7572 7265 6e63 7920 3d20 4e6f     currency = No
-0003f780: 6e65 0a20 2020 2020 2020 2069 6620 636f  ne.        if co
-0003f790: 6465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  de is not None:.
-0003f7a0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-0003f7b0: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-0003f7c0: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-0003f7d0: 2020 2064 6566 6175 6c74 5479 7065 203d     defaultType =
-0003f7e0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0003f7f0: 675f 3228 7365 6c66 2e6f 7074 696f 6e73  g_2(self.options
-0003f800: 2c20 2766 6574 6368 5472 616e 7366 6572  , 'fetchTransfer
-0003f810: 7327 2c20 2764 6566 6175 6c74 5479 7065  s', 'defaultType
-0003f820: 272c 2027 7370 6f74 2729 0a20 2020 2020  ', 'spot').     
-0003f830: 2020 2066 726f 6d41 6363 6f75 6e74 203d     fromAccount =
-0003f840: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0003f850: 6728 7061 7261 6d73 2c20 2766 726f 6d41  g(params, 'fromA
-0003f860: 6363 6f75 6e74 272c 2064 6566 6175 6c74  ccount', default
-0003f870: 5479 7065 290a 2020 2020 2020 2020 6465  Type).        de
-0003f880: 6661 756c 7454 6f20 3d20 2773 706f 7427  faultTo = 'spot'
-0003f890: 2069 6620 2866 726f 6d41 6363 6f75 6e74   if (fromAccount
-0003f8a0: 203d 3d20 2766 7574 7572 6527 2920 656c   == 'future') el
-0003f8b0: 7365 2027 6675 7475 7265 270a 2020 2020  se 'future'.    
-0003f8c0: 2020 2020 746f 4163 636f 756e 7420 3d20      toAccount = 
-0003f8d0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003f8e0: 2870 6172 616d 732c 2027 746f 4163 636f  (params, 'toAcco
-0003f8f0: 756e 7427 2c20 6465 6661 756c 7454 6f29  unt', defaultTo)
-0003f900: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
-0003f910: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0003f920: 2870 6172 616d 732c 2027 7479 7065 2729  (params, 'type')
-0003f930: 0a20 2020 2020 2020 2061 6363 6f75 6e74  .        account
-0003f940: 7342 7954 7970 6520 3d20 7365 6c66 2e73  sByType = self.s
-0003f950: 6166 655f 7661 6c75 6528 7365 6c66 2e6f  afe_value(self.o
-0003f960: 7074 696f 6e73 2c20 2761 6363 6f75 6e74  ptions, 'account
-0003f970: 7342 7954 7970 6527 2c20 7b7d 290a 2020  sByType', {}).  
-0003f980: 2020 2020 2020 6672 6f6d 4964 203d 2073        fromId = s
-0003f990: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0003f9a0: 6163 636f 756e 7473 4279 5479 7065 2c20  accountsByType, 
-0003f9b0: 6672 6f6d 4163 636f 756e 7429 0a20 2020  fromAccount).   
-0003f9c0: 2020 2020 2074 6f49 6420 3d20 7365 6c66       toId = self
-0003f9d0: 2e73 6166 655f 7374 7269 6e67 2861 6363  .safe_string(acc
-0003f9e0: 6f75 6e74 7342 7954 7970 652c 2074 6f41  ountsByType, toA
-0003f9f0: 6363 6f75 6e74 290a 2020 2020 2020 2020  ccount).        
-0003fa00: 6966 2074 7970 6520 6973 204e 6f6e 653a  if type is None:
-0003fa10: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0003fa20: 6672 6f6d 4964 2069 7320 4e6f 6e65 3a0a  fromId is None:.
-0003fa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fa40: 6b65 7973 203d 206c 6973 7428 6163 636f  keys = list(acco
-0003fa50: 756e 7473 4279 5479 7065 2e6b 6579 7328  untsByType.keys(
-0003fa60: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-0003fa70: 2020 2072 6169 7365 2045 7863 6861 6e67     raise Exchang
-0003fa80: 6545 7272 6f72 2873 656c 662e 6964 202b  eError(self.id +
-0003fa90: 2027 2066 726f 6d41 6363 6f75 6e74 2070   ' fromAccount p
-0003faa0: 6172 616d 6574 6572 206d 7573 7420 6265  arameter must be
-0003fab0: 206f 6e65 206f 6620 2720 2b20 272c 2027   one of ' + ', '
-0003fac0: 2e6a 6f69 6e28 6b65 7973 2929 0a20 2020  .join(keys)).   
-0003fad0: 2020 2020 2020 2020 2069 6620 746f 4964           if toId
-0003fae0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0003faf0: 2020 2020 2020 2020 2020 6b65 7973 203d            keys =
-0003fb00: 206c 6973 7428 6163 636f 756e 7473 4279   list(accountsBy
-0003fb10: 5479 7065 2e6b 6579 7328 2929 0a20 2020  Type.keys()).   
-0003fb20: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-0003fb30: 7365 2045 7863 6861 6e67 6545 7272 6f72  se ExchangeError
-0003fb40: 2873 656c 662e 6964 202b 2027 2074 6f41  (self.id + ' toA
-0003fb50: 6363 6f75 6e74 2070 6172 616d 6574 6572  ccount parameter
-0003fb60: 206d 7573 7420 6265 206f 6e65 206f 6620   must be one of 
-0003fb70: 2720 2b20 272c 2027 2e6a 6f69 6e28 6b65  ' + ', '.join(ke
-0003fb80: 7973 2929 0a20 2020 2020 2020 2020 2020  ys)).           
-0003fb90: 2074 7970 6520 3d20 6672 6f6d 4964 202b   type = fromId +
-0003fba0: 2027 5f27 202b 2074 6f49 640a 2020 2020   '_' + toId.    
-0003fbb0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
-0003fbc0: 2020 2020 2020 2020 2020 2020 2774 7970              'typ
-0003fbd0: 6527 3a20 7479 7065 2c0a 2020 2020 2020  e': type,.      
-0003fbe0: 2020 7d0a 2020 2020 2020 2020 6966 2073    }.        if s
-0003fbf0: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
-0003fc00: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0003fc10: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
-0003fc20: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
-0003fc30: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
-0003fc40: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0003fc50: 2020 2020 2072 6571 7565 7374 5b27 7369       request['si
-0003fc60: 7a65 275d 203d 206c 696d 6974 0a20 2020  ze'] = limit.   
-0003fc70: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0003fc80: 7365 6c66 2e73 6170 6947 6574 4173 7365  self.sapiGetAsse
-0003fc90: 7454 7261 6e73 6665 7228 7365 6c66 2e65  tTransfer(self.e
-0003fca0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-0003fcb0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-0003fcc0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-0003fcd0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0003fce0: 2020 2020 746f 7461 6c3a 2033 2c0a 2020      total: 3,.  
-0003fcf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003fd00: 726f 7773 3a20 5b0a 2020 2020 2020 2020  rows: [.        
-0003fd10: 2320 2020 2020 2020 2020 2020 2020 7b0a  #             {.
-0003fd20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003fd30: 2020 2020 2020 2020 2020 7469 6d65 7374            timest
-0003fd40: 616d 703a 2031 3631 3436 3430 3837 3830  amp: 16146408780
-0003fd50: 3030 2c0a 2020 2020 2020 2020 2320 2020  00,.        #   
-0003fd60: 2020 2020 2020 2020 2020 2020 2020 6173                as
-0003fd70: 7365 743a 2027 5553 4454 272c 0a20 2020  set: 'USDT',.   
-0003fd80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003fd90: 2020 2020 2020 2061 6d6f 756e 743a 2027         amount: '
-0003fda0: 3235 272c 0a20 2020 2020 2020 2023 2020  25',.        #  
-0003fdb0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0003fdc0: 7970 653a 2027 4d41 494e 5f55 4d46 5554  ype: 'MAIN_UMFUT
-0003fdd0: 5552 4527 2c0a 2020 2020 2020 2020 2320  URE',.        # 
-0003fde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fdf0: 7374 6174 7573 3a20 2743 4f4e 4649 524d  status: 'CONFIRM
-0003fe00: 4544 272c 0a20 2020 2020 2020 2023 2020  ED',.        #  
-0003fe10: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0003fe20: 7261 6e49 643a 2034 3330 3030 3132 3632  ranId: 430001262
-0003fe30: 3438 0a20 2020 2020 2020 2023 2020 2020  48.        #    
-0003fe40: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-0003fe50: 2020 2020 2320 2020 2020 2020 2020 5d0a      #         ].
-0003fe60: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0003fe70: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0003fe80: 2020 726f 7773 203d 2073 656c 662e 7361    rows = self.sa
-0003fe90: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-0003fea0: 652c 2027 726f 7773 272c 205b 5d29 0a20  e, 'rows', []). 
-0003feb0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0003fec0: 6c66 2e70 6172 7365 5f74 7261 6e73 6665  lf.parse_transfe
-0003fed0: 7273 2872 6f77 732c 2063 7572 7265 6e63  rs(rows, currenc
-0003fee0: 792c 2073 696e 6365 2c20 6c69 6d69 7429  y, since, limit)
-0003fef0: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
-0003ff00: 6465 706f 7369 745f 6164 6472 6573 7328  deposit_address(
-0003ff10: 7365 6c66 2c20 636f 6465 3a20 7374 722c  self, code: str,
-0003ff20: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-0003ff30: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0003ff40: 2066 6574 6368 2074 6865 2064 6570 6f73   fetch the depos
-0003ff50: 6974 2061 6464 7265 7373 2066 6f72 2061  it address for a
-0003ff60: 2063 7572 7265 6e63 7920 6173 736f 6369   currency associ
-0003ff70: 6174 6564 2077 6974 6820 7365 6c66 2061  ated with self a
-0003ff80: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
-0003ff90: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
-0003ffa0: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
-0003ffb0: 2063 6f64 650a 2020 2020 2020 2020 3a70   code.        :p
-0003ffc0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
-0003ffd0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-0003ffe0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-0003fff0: 6865 2062 696e 616e 6365 2061 7069 2065  he binance api e
-00040000: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-00040010: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
-00040020: 6e20 6061 6464 7265 7373 2073 7472 7563  n `address struc
-00040030: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-00040040: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-00040050: 643d 6164 6472 6573 732d 7374 7275 6374  d=address-struct
-00040060: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-00040070: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
-00040080: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00040090: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
-000400a0: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
-000400b0: 6f64 6529 0a20 2020 2020 2020 2072 6571  ode).        req
-000400c0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-000400d0: 2020 2020 2027 636f 696e 273a 2063 7572       'coin': cur
-000400e0: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
-000400f0: 2020 2020 2020 2020 2023 2027 6e65 7477           # 'netw
-00040100: 6f72 6b27 3a20 2745 5448 272c 2020 2320  ork': 'ETH',  # 
-00040110: 2742 5343 272c 2027 584d 5227 2c20 796f  'BSC', 'XMR', yo
-00040120: 7520 6361 6e20 6765 7420 6e65 7477 6f72  u can get networ
-00040130: 6b20 616e 6420 6973 4465 6661 756c 7420  k and isDefault 
-00040140: 696e 206e 6574 776f 726b 4c69 7374 2069  in networkList i
-00040150: 6e20 7468 6520 7265 7370 6f6e 7365 206f  n the response o
-00040160: 6620 7361 7069 4765 7443 6170 6974 616c  f sapiGetCapital
-00040170: 436f 6e66 6967 4465 7461 696c 0a20 2020  ConfigDetail.   
-00040180: 2020 2020 207d 0a20 2020 2020 2020 206e       }.        n
-00040190: 6574 776f 726b 7320 3d20 7365 6c66 2e73  etworks = self.s
-000401a0: 6166 655f 7661 6c75 6528 7365 6c66 2e6f  afe_value(self.o
-000401b0: 7074 696f 6e73 2c20 276e 6574 776f 726b  ptions, 'network
-000401c0: 7327 2c20 7b7d 290a 2020 2020 2020 2020  s', {}).        
-000401d0: 6e65 7477 6f72 6b20 3d20 7365 6c66 2e73  network = self.s
-000401e0: 6166 655f 7374 7269 6e67 5f75 7070 6572  afe_string_upper
-000401f0: 2870 6172 616d 732c 2027 6e65 7477 6f72  (params, 'networ
-00040200: 6b27 2920 2023 2073 656c 6620 6c69 6e65  k')  # self line
-00040210: 2061 6c6c 6f77 7320 7468 6520 7573 6572   allows the user
-00040220: 2074 6f20 7370 6563 6966 7920 6569 7468   to specify eith
-00040230: 6572 2045 5243 3230 206f 7220 4554 480a  er ERC20 or ETH.
-00040240: 2020 2020 2020 2020 6e65 7477 6f72 6b20          network 
-00040250: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00040260: 6e67 286e 6574 776f 726b 732c 206e 6574  ng(networks, net
-00040270: 776f 726b 2c20 6e65 7477 6f72 6b29 2020  work, network)  
-00040280: 2320 6861 6e64 6c65 2045 5243 3230 3e45  # handle ERC20>E
-00040290: 5448 2061 6c69 6173 0a20 2020 2020 2020  TH alias.       
-000402a0: 2069 6620 6e65 7477 6f72 6b20 6973 206e   if network is n
-000402b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000402c0: 2020 2020 2072 6571 7565 7374 5b27 6e65       request['ne
-000402d0: 7477 6f72 6b27 5d20 3d20 6e65 7477 6f72  twork'] = networ
-000402e0: 6b0a 2020 2020 2020 2020 2020 2020 7061  k.            pa
-000402f0: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-00040300: 2870 6172 616d 732c 2027 6e65 7477 6f72  (params, 'networ
-00040310: 6b27 290a 2020 2020 2020 2020 2320 6861  k').        # ha
-00040320: 7320 7375 7070 6f72 7420 666f 7220 7468  s support for th
-00040330: 6520 276e 6574 776f 726b 2720 7061 7261  e 'network' para
-00040340: 6d65 7465 720a 2020 2020 2020 2020 2320  meter.        # 
-00040350: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
-00040360: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
-00040370: 7069 646f 6373 2f73 706f 742f 656e 2f23  pidocs/spot/en/#
-00040380: 6465 706f 7369 742d 6164 6472 6573 732d  deposit-address-
-00040390: 7375 7070 6f72 7469 6e67 2d6e 6574 776f  supporting-netwo
-000403a0: 726b 2d75 7365 725f 6461 7461 0a20 2020  rk-user_data.   
-000403b0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-000403c0: 7365 6c66 2e73 6170 6947 6574 4361 7069  self.sapiGetCapi
-000403d0: 7461 6c44 6570 6f73 6974 4164 6472 6573  talDepositAddres
-000403e0: 7328 7365 6c66 2e65 7874 656e 6428 7265  s(self.extend(re
-000403f0: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-00040400: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00040410: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-00040420: 2020 2320 2020 2020 2020 2020 6375 7272    #         curr
-00040430: 656e 6379 3a20 2758 5250 272c 0a20 2020  ency: 'XRP',.   
-00040440: 2020 2020 2023 2020 2020 2020 2020 2061       #         a
-00040450: 6464 7265 7373 3a20 2772 4562 3854 4b33  ddress: 'rEb8TK3
-00040460: 6742 676b 3561 755a 6b77 6336 7348 6e77  gBgk5auZkwc6sHnw
-00040470: 7247 564a 4838 4475 614c 6827 2c0a 2020  rGVJH8DuaLh',.  
-00040480: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00040490: 7461 673a 2027 3130 3836 3138 3236 3227  tag: '108618262'
-000404a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000404b0: 2020 2020 696e 666f 3a20 7b0a 2020 2020      info: {.    
-000404c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000404d0: 2020 636f 696e 3a20 2758 5250 272c 0a20    coin: 'XRP',. 
-000404e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000404f0: 2020 2020 2061 6464 7265 7373 3a20 2772       address: 'r
-00040500: 4562 3854 4b33 6742 676b 3561 755a 6b77  Eb8TK3gBgk5auZkw
-00040510: 6336 7348 6e77 7247 564a 4838 4475 614c  c6sHnwrGVJH8DuaL
-00040520: 6827 2c0a 2020 2020 2020 2020 2320 2020  h',.        #   
-00040530: 2020 2020 2020 2020 2020 7461 673a 2027            tag: '
-00040540: 3130 3836 3138 3236 3227 2c0a 2020 2020  108618262',.    
-00040550: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00040560: 2020 7572 6c3a 2027 6874 7470 733a 2f2f    url: 'https://
-00040570: 6269 7468 6f6d 702e 636f 6d2f 6578 706c  bithomp.com/expl
-00040580: 6f72 6572 2f72 4562 3854 4b33 6742 676b  orer/rEb8TK3gBgk
-00040590: 3561 755a 6b77 6336 7348 6e77 7247 564a  5auZkwc6sHnwrGVJ
-000405a0: 4838 4475 614c 6827 0a20 2020 2020 2020  H8DuaLh'.       
-000405b0: 2023 2020 2020 2020 2020 207d 0a20 2020   #         }.   
-000405c0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-000405d0: 2020 2020 2023 0a20 2020 2020 2020 2061       #.        a
-000405e0: 6464 7265 7373 203d 2073 656c 662e 7361  ddress = self.sa
-000405f0: 6665 5f73 7472 696e 6728 7265 7370 6f6e  fe_string(respon
-00040600: 7365 2c20 2761 6464 7265 7373 2729 0a20  se, 'address'). 
-00040610: 2020 2020 2020 2075 726c 203d 2073 656c         url = sel
-00040620: 662e 7361 6665 5f73 7472 696e 6728 7265  f.safe_string(re
-00040630: 7370 6f6e 7365 2c20 2775 726c 2729 0a20  sponse, 'url'). 
-00040640: 2020 2020 2020 2069 6d70 6c69 6564 4e65         impliedNe
-00040650: 7477 6f72 6b20 3d20 4e6f 6e65 0a20 2020  twork = None.   
-00040660: 2020 2020 2069 6620 7572 6c20 6973 206e       if url is n
-00040670: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00040680: 2020 2020 2072 6576 6572 7365 4e65 7477       reverseNetw
-00040690: 6f72 6b73 203d 2073 656c 662e 7361 6665  orks = self.safe
-000406a0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
-000406b0: 6f6e 732c 2027 7265 7665 7273 654e 6574  ons, 'reverseNet
-000406c0: 776f 726b 7327 2c20 7b7d 290a 2020 2020  works', {}).    
-000406d0: 2020 2020 2020 2020 7061 7274 7320 3d20          parts = 
-000406e0: 7572 6c2e 7370 6c69 7428 272f 2729 0a20  url.split('/'). 
-000406f0: 2020 2020 2020 2020 2020 2074 6f70 4c65             topLe
-00040700: 7665 6c20 3d20 7365 6c66 2e73 6166 655f  vel = self.safe_
-00040710: 7374 7269 6e67 2870 6172 7473 2c20 3229  string(parts, 2)
-00040720: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00040730: 2874 6f70 4c65 7665 6c20 3d3d 2027 626c  (topLevel == 'bl
-00040740: 6f63 6b63 6861 6972 2e63 6f6d 2729 206f  ockchair.com') o
-00040750: 7220 2874 6f70 4c65 7665 6c20 3d3d 2027  r (topLevel == '
-00040760: 7669 6577 626c 6f63 6b2e 696f 2729 3a0a  viewblock.io'):.
-00040770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040780: 7375 624c 6576 656c 203d 2073 656c 662e  subLevel = self.
-00040790: 7361 6665 5f73 7472 696e 6728 7061 7274  safe_string(part
-000407a0: 732c 2033 290a 2020 2020 2020 2020 2020  s, 3).          
-000407b0: 2020 2020 2020 6966 2073 7562 4c65 7665        if subLeve
-000407c0: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
-000407d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000407e0: 2020 2074 6f70 4c65 7665 6c20 3d20 746f     topLevel = to
-000407f0: 704c 6576 656c 202b 2027 2f27 202b 2073  pLevel + '/' + s
-00040800: 7562 4c65 7665 6c0a 2020 2020 2020 2020  ubLevel.        
-00040810: 2020 2020 696d 706c 6965 644e 6574 776f      impliedNetwo
-00040820: 726b 203d 2073 656c 662e 7361 6665 5f73  rk = self.safe_s
-00040830: 7472 696e 6728 7265 7665 7273 654e 6574  tring(reverseNet
-00040840: 776f 726b 732c 2074 6f70 4c65 7665 6c29  works, topLevel)
-00040850: 0a20 2020 2020 2020 2020 2020 2069 6d70  .            imp
-00040860: 6c69 6564 4e65 7477 6f72 6b73 203d 2073  liedNetworks = s
-00040870: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
-00040880: 656c 662e 6f70 7469 6f6e 732c 2027 696d  elf.options, 'im
-00040890: 706c 6965 644e 6574 776f 726b 7327 2c20  pliedNetworks', 
-000408a0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-000408b0: 2020 2745 5448 273a 207b 2745 5243 3230    'ETH': {'ERC20
-000408c0: 273a 2027 4554 4827 7d2c 0a20 2020 2020  ': 'ETH'},.     
-000408d0: 2020 2020 2020 2020 2020 2027 5452 5827             'TRX'
-000408e0: 3a20 7b27 5452 4332 3027 3a20 2754 5258  : {'TRC20': 'TRX
-000408f0: 277d 2c0a 2020 2020 2020 2020 2020 2020  '},.            
-00040900: 7d29 0a20 2020 2020 2020 2020 2020 2069  }).            i
-00040910: 6620 636f 6465 2069 6e20 696d 706c 6965  f code in implie
-00040920: 644e 6574 776f 726b 733a 0a20 2020 2020  dNetworks:.     
-00040930: 2020 2020 2020 2020 2020 2063 6f6e 7665             conve
-00040940: 7273 696f 6e20 3d20 7365 6c66 2e73 6166  rsion = self.saf
-00040950: 655f 7661 6c75 6528 696d 706c 6965 644e  e_value(impliedN
-00040960: 6574 776f 726b 732c 2063 6f64 652c 207b  etworks, code, {
-00040970: 7d29 0a20 2020 2020 2020 2020 2020 2020  }).             
-00040980: 2020 2069 6d70 6c69 6564 4e65 7477 6f72     impliedNetwor
-00040990: 6b20 3d20 7365 6c66 2e73 6166 655f 7374  k = self.safe_st
-000409a0: 7269 6e67 2863 6f6e 7665 7273 696f 6e2c  ring(conversion,
-000409b0: 2069 6d70 6c69 6564 4e65 7477 6f72 6b2c   impliedNetwork,
-000409c0: 2069 6d70 6c69 6564 4e65 7477 6f72 6b29   impliedNetwork)
-000409d0: 0a20 2020 2020 2020 2074 6167 203d 2073  .        tag = s
-000409e0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-000409f0: 7265 7370 6f6e 7365 2c20 2774 6167 272c  response, 'tag',
-00040a00: 2027 2729 0a20 2020 2020 2020 2069 6620   '').        if 
-00040a10: 6c65 6e28 7461 6729 203d 3d20 303a 0a20  len(tag) == 0:. 
-00040a20: 2020 2020 2020 2020 2020 2074 6167 203d             tag =
-00040a30: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
-00040a40: 6c66 2e63 6865 636b 5f61 6464 7265 7373  lf.check_address
-00040a50: 2861 6464 7265 7373 290a 2020 2020 2020  (address).      
-00040a60: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
-00040a70: 2020 2020 2020 2027 6375 7272 656e 6379         'currency
-00040a80: 273a 2063 6f64 652c 0a20 2020 2020 2020  ': code,.       
-00040a90: 2020 2020 2027 6164 6472 6573 7327 3a20       'address': 
-00040aa0: 6164 6472 6573 732c 0a20 2020 2020 2020  address,.       
-00040ab0: 2020 2020 2027 7461 6727 3a20 7461 672c       'tag': tag,
-00040ac0: 0a20 2020 2020 2020 2020 2020 2027 6e65  .            'ne
-00040ad0: 7477 6f72 6b27 3a20 696d 706c 6965 644e  twork': impliedN
-00040ae0: 6574 776f 726b 2c0a 2020 2020 2020 2020  etwork,.        
-00040af0: 2020 2020 2769 6e66 6f27 3a20 7265 7370      'info': resp
-00040b00: 6f6e 7365 2c0a 2020 2020 2020 2020 7d0a  onse,.        }.
-00040b10: 0a20 2020 2064 6566 2066 6574 6368 5f74  .    def fetch_t
-00040b20: 7261 6e73 6163 7469 6f6e 5f66 6565 7328  ransaction_fees(
-00040b30: 7365 6c66 2c20 636f 6465 733d 4e6f 6e65  self, codes=None
-00040b40: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00040b50: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00040b60: 2020 2a44 4550 5245 4341 5445 442a 2070    *DEPRECATED* p
-00040b70: 6c65 6173 6520 7573 6520 6665 7463 6844  lease use fetchD
-00040b80: 6570 6f73 6974 5769 7468 6472 6177 4665  epositWithdrawFe
-00040b90: 6573 2069 6e73 7465 6164 0a20 2020 2020  es instead.     
-00040ba0: 2020 203a 7061 7261 6d20 5b73 7472 5d7c     :param [str]|
-00040bb0: 4e6f 6e65 2063 6f64 6573 3a20 6e6f 7420  None codes: not 
-00040bc0: 7573 6564 2062 7920 6269 6e61 6e63 6520  used by binance 
-00040bd0: 6665 7463 6854 7261 6e73 6163 7469 6f6e  fetchTransaction
-00040be0: 4665 6573 2829 0a20 2020 2020 2020 203a  Fees().        :
-00040bf0: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-00040c00: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-00040c10: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00040c20: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
-00040c30: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00040c40: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
-00040c50: 3a20 6120 6c69 7374 206f 6620 6066 6565  : a list of `fee
-00040c60: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
-00040c70: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-00040c80: 6f6d 2f23 2f3f 6964 3d66 6565 2d73 7472  om/#/?id=fee-str
-00040c90: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00040ca0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-00040cb0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00040cc0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00040cd0: 6520 3d20 7365 6c66 2e73 6170 6947 6574  e = self.sapiGet
-00040ce0: 4361 7069 7461 6c43 6f6e 6669 6747 6574  CapitalConfigGet
-00040cf0: 616c 6c28 7061 7261 6d73 290a 2020 2020  all(params).    
-00040d00: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00040d10: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-00040d20: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00040d30: 2020 2063 6f69 6e3a 2027 4241 5427 2c0a     coin: 'BAT',.
-00040d40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040d50: 6465 706f 7369 7441 6c6c 456e 6162 6c65  depositAllEnable
-00040d60: 3a20 5472 7565 2c0a 2020 2020 2020 2020  : True,.        
-00040d70: 2320 2020 2020 2020 7769 7468 6472 6177  #       withdraw
-00040d80: 416c 6c45 6e61 626c 653a 2054 7275 652c  AllEnable: True,
-00040d90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00040da0: 206e 616d 653a 2027 4261 7369 6320 4174   name: 'Basic At
-00040db0: 7465 6e74 696f 6e20 546f 6b65 6e27 2c0a  tention Token',.
-00040dc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040dd0: 6672 6565 3a20 2730 272c 0a20 2020 2020  free: '0',.     
-00040de0: 2020 2023 2020 2020 2020 206c 6f63 6b65     #       locke
-00040df0: 643a 2027 3027 2c0a 2020 2020 2020 2020  d: '0',.        
-00040e00: 2320 2020 2020 2020 6672 6565 7a65 3a20  #       freeze: 
-00040e10: 2730 272c 0a20 2020 2020 2020 2023 2020  '0',.        #  
-00040e20: 2020 2020 2077 6974 6864 7261 7769 6e67       withdrawing
-00040e30: 3a20 2730 272c 0a20 2020 2020 2020 2023  : '0',.        #
-00040e40: 2020 2020 2020 2069 706f 696e 673a 2027         ipoing: '
-00040e50: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
-00040e60: 2020 2020 6970 6f61 626c 653a 2027 3027      ipoable: '0'
-00040e70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00040e80: 2020 7374 6f72 6167 653a 2027 3027 2c0a    storage: '0',.
-00040e90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040ea0: 6973 4c65 6761 6c4d 6f6e 6579 3a20 4661  isLegalMoney: Fa
-00040eb0: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
-00040ec0: 2020 2020 2074 7261 6469 6e67 3a20 5472       trading: Tr
-00040ed0: 7565 2c0a 2020 2020 2020 2020 2320 2020  ue,.        #   
-00040ee0: 2020 2020 6e65 7477 6f72 6b4c 6973 743a      networkList:
-00040ef0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-00040f00: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00040f10: 2020 2020 2020 2020 2020 206e 6574 776f             netwo
-00040f20: 726b 3a20 2742 4e42 272c 0a20 2020 2020  rk: 'BNB',.     
-00040f30: 2020 2023 2020 2020 2020 2020 2020 2063     #           c
-00040f40: 6f69 6e3a 2027 4241 5427 2c0a 2020 2020  oin: 'BAT',.    
-00040f50: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00040f60: 7769 7468 6472 6177 496e 7465 6765 724d  withdrawIntegerM
-00040f70: 756c 7469 706c 653a 2027 302e 3030 3030  ultiple: '0.0000
-00040f80: 3030 3031 272c 0a20 2020 2020 2020 2023  0001',.        #
-00040f90: 2020 2020 2020 2020 2020 2069 7344 6566             isDef
-00040fa0: 6175 6c74 3a20 4661 6c73 652c 0a20 2020  ault: False,.   
-00040fb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00040fc0: 2064 6570 6f73 6974 456e 6162 6c65 3a20   depositEnable: 
-00040fd0: 5472 7565 2c0a 2020 2020 2020 2020 2320  True,.        # 
-00040fe0: 2020 2020 2020 2020 2020 7769 7468 6472            withdr
-00040ff0: 6177 456e 6162 6c65 3a20 5472 7565 2c0a  awEnable: True,.
-00041000: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00041010: 2020 2020 6465 706f 7369 7444 6573 633a      depositDesc:
-00041020: 2027 272c 0a20 2020 2020 2020 2023 2020   '',.        #  
-00041030: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
-00041040: 7744 6573 633a 2027 272c 0a20 2020 2020  wDesc: '',.     
-00041050: 2020 2023 2020 2020 2020 2020 2020 2073     #           s
-00041060: 7065 6369 616c 5469 7073 3a20 2754 6865  pecialTips: 'The
-00041070: 206e 616d 6520 6f66 2073 656c 6620 6173   name of self as
-00041080: 7365 7420 6973 2042 6173 6963 2041 7474  set is Basic Att
-00041090: 656e 7469 6f6e 2054 6f6b 656e 2842 4154  ention Token(BAT
-000410a0: 292e 2042 6f74 6820 6120 4d45 4d4f 2061  ). Both a MEMO a
-000410b0: 6e64 2061 6e20 4164 6472 6573 7320 6172  nd an Address ar
-000410c0: 6520 7265 7175 6972 6564 2074 6f20 7375  e required to su
-000410d0: 6363 6573 7366 756c 6c79 2064 6570 6f73  ccessfully depos
-000410e0: 6974 2079 6f75 7220 4245 5032 2074 6f6b  it your BEP2 tok
-000410f0: 656e 7320 746f 2042 696e 616e 6365 2e27  ens to Binance.'
-00041100: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041110: 2020 2020 2020 6e61 6d65 3a20 2742 4550        name: 'BEP
-00041120: 3227 2c0a 2020 2020 2020 2020 2320 2020  2',.        #   
-00041130: 2020 2020 2020 2020 7265 7365 7441 6464          resetAdd
-00041140: 7265 7373 5374 6174 7573 3a20 4661 6c73  ressStatus: Fals
-00041150: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00041160: 2020 2020 2020 2061 6464 7265 7373 5265         addressRe
-00041170: 6765 783a 2027 5e28 626e 6231 295b 302d  gex: '^(bnb1)[0-
-00041180: 3961 2d7a 5d7b 3338 7d24 272c 0a20 2020  9a-z]{38}$',.   
-00041190: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000411a0: 206d 656d 6f52 6567 6578 3a20 275e 5b30   memoRegex: '^[0
-000411b0: 2d39 412d 5a61 2d7a 5c5c 2d5f 5d7b 312c  -9A-Za-z\\-_]{1,
-000411c0: 3132 307d 2427 2c0a 2020 2020 2020 2020  120}$',.        
-000411d0: 2320 2020 2020 2020 2020 2020 7769 7468  #           with
-000411e0: 6472 6177 4665 653a 2027 302e 3237 272c  drawFee: '0.27',
-000411f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041200: 2020 2020 2077 6974 6864 7261 774d 696e       withdrawMin
-00041210: 3a20 2730 2e35 3427 2c0a 2020 2020 2020  : '0.54',.      
-00041220: 2020 2320 2020 2020 2020 2020 2020 7769    #           wi
-00041230: 7468 6472 6177 4d61 783a 2027 3130 3030  thdrawMax: '1000
-00041240: 3030 3030 3030 3027 2c0a 2020 2020 2020  0000000',.      
-00041250: 2020 2320 2020 2020 2020 2020 2020 6d69    #           mi
-00041260: 6e43 6f6e 6669 726d 3a20 2731 272c 0a20  nConfirm: '1',. 
-00041270: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00041280: 2020 2075 6e4c 6f63 6b43 6f6e 6669 726d     unLockConfirm
-00041290: 3a20 2730 270a 2020 2020 2020 2020 2320  : '0'.        # 
-000412a0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-000412b0: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
-000412c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000412d0: 2020 206e 6574 776f 726b 3a20 2742 5343     network: 'BSC
-000412e0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-000412f0: 2020 2020 2020 2063 6f69 6e3a 2027 4241         coin: 'BA
-00041300: 5427 2c0a 2020 2020 2020 2020 2320 2020  T',.        #   
-00041310: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
-00041320: 496e 7465 6765 724d 756c 7469 706c 653a  IntegerMultiple:
-00041330: 2027 302e 3030 3030 3030 3031 272c 0a20   '0.00000001',. 
-00041340: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00041350: 2020 2069 7344 6566 6175 6c74 3a20 4661     isDefault: Fa
-00041360: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
-00041370: 2020 2020 2020 2020 2064 6570 6f73 6974           deposit
-00041380: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
-00041390: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000413a0: 2020 7769 7468 6472 6177 456e 6162 6c65    withdrawEnable
-000413b0: 3a20 5472 7565 2c0a 2020 2020 2020 2020  : True,.        
-000413c0: 2320 2020 2020 2020 2020 2020 6465 706f  #           depo
-000413d0: 7369 7444 6573 633a 2027 272c 0a20 2020  sitDesc: '',.   
-000413e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000413f0: 2077 6974 6864 7261 7744 6573 633a 2027   withdrawDesc: '
-00041400: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00041410: 2020 2020 2020 2073 7065 6369 616c 5469         specialTi
-00041420: 7073 3a20 2754 6865 206e 616d 6520 6f66  ps: 'The name of
-00041430: 2073 656c 6620 6173 7365 7420 6973 2042   self asset is B
-00041440: 6173 6963 2041 7474 656e 7469 6f6e 2054  asic Attention T
-00041450: 6f6b 656e 2e20 506c 6561 7365 2065 6e73  oken. Please ens
-00041460: 7572 6520 796f 7520 6172 6520 6465 706f  ure you are depo
-00041470: 7369 7469 6e67 2042 6173 6963 2041 7474  siting Basic Att
-00041480: 656e 7469 6f6e 2054 6f6b 656e 2842 4154  ention Token(BAT
-00041490: 2920 746f 6b65 6e73 2075 6e64 6572 2074  ) tokens under t
-000414a0: 6865 2063 6f6e 7472 6163 7420 6164 6472  he contract addr
-000414b0: 6573 7320 656e 6469 6e67 2069 6e20 3937  ess ending in 97
-000414c0: 3636 652e 272c 0a20 2020 2020 2020 2023  66e.',.        #
-000414d0: 2020 2020 2020 2020 2020 206e 616d 653a             name:
-000414e0: 2027 4245 5032 3028 4253 4329 272c 0a20   'BEP20(BSC)',. 
-000414f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00041500: 2020 2072 6573 6574 4164 6472 6573 7353     resetAddressS
-00041510: 7461 7475 733a 2046 616c 7365 2c0a 2020  tatus: False,.  
-00041520: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00041530: 2020 6164 6472 6573 7352 6567 6578 3a20    addressRegex: 
-00041540: 275e 2830 7829 5b30 2d39 412d 4661 2d66  '^(0x)[0-9A-Fa-f
-00041550: 5d7b 3430 7d24 272c 0a20 2020 2020 2020  ]{40}$',.       
-00041560: 2023 2020 2020 2020 2020 2020 206d 656d   #           mem
-00041570: 6f52 6567 6578 3a20 2727 2c0a 2020 2020  oRegex: '',.    
-00041580: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041590: 7769 7468 6472 6177 4665 653a 2027 302e  withdrawFee: '0.
-000415a0: 3237 272c 0a20 2020 2020 2020 2023 2020  27',.        #  
-000415b0: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
-000415c0: 774d 696e 3a20 2730 2e35 3427 2c0a 2020  wMin: '0.54',.  
-000415d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000415e0: 2020 7769 7468 6472 6177 4d61 783a 2027    withdrawMax: '
-000415f0: 3130 3030 3030 3030 3030 3027 2c0a 2020  10000000000',.  
-00041600: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00041610: 2020 6d69 6e43 6f6e 6669 726d 3a20 2731    minConfirm: '1
-00041620: 3527 2c0a 2020 2020 2020 2020 2320 2020  5',.        #   
-00041630: 2020 2020 2020 2020 756e 4c6f 636b 436f          unLockCo
-00041640: 6e66 6972 6d3a 2027 3027 0a20 2020 2020  nfirm: '0'.     
-00041650: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-00041660: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00041670: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00041680: 2020 2020 2020 2020 6e65 7477 6f72 6b3a          network:
-00041690: 2027 4554 4827 2c0a 2020 2020 2020 2020   'ETH',.        
-000416a0: 2320 2020 2020 2020 2020 2020 636f 696e  #           coin
-000416b0: 3a20 2742 4154 272c 0a20 2020 2020 2020  : 'BAT',.       
-000416c0: 2023 2020 2020 2020 2020 2020 2077 6974   #           wit
-000416d0: 6864 7261 7749 6e74 6567 6572 4d75 6c74  hdrawIntegerMult
-000416e0: 6970 6c65 3a20 2730 2e30 3030 3030 3030  iple: '0.0000000
-000416f0: 3127 2c0a 2020 2020 2020 2020 2320 2020  1',.        #   
-00041700: 2020 2020 2020 2020 6973 4465 6661 756c          isDefaul
-00041710: 743a 2054 7275 652c 0a20 2020 2020 2020  t: True,.       
-00041720: 2023 2020 2020 2020 2020 2020 2064 6570   #           dep
-00041730: 6f73 6974 456e 6162 6c65 3a20 5472 7565  ositEnable: True
-00041740: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041750: 2020 2020 2020 7769 7468 6472 6177 456e        withdrawEn
-00041760: 6162 6c65 3a20 5472 7565 2c0a 2020 2020  able: True,.    
-00041770: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041780: 6465 706f 7369 7444 6573 633a 2027 272c  depositDesc: '',
-00041790: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000417a0: 2020 2020 2077 6974 6864 7261 7744 6573       withdrawDes
-000417b0: 633a 2027 272c 0a20 2020 2020 2020 2023  c: '',.        #
-000417c0: 2020 2020 2020 2020 2020 2073 7065 6369             speci
-000417d0: 616c 5469 7073 3a20 2754 6865 206e 616d  alTips: 'The nam
-000417e0: 6520 6f66 2073 656c 6620 6173 7365 7420  e of self asset 
-000417f0: 6973 2042 6173 6963 2041 7474 656e 7469  is Basic Attenti
-00041800: 6f6e 2054 6f6b 656e 2e20 506c 6561 7365  on Token. Please
-00041810: 2065 6e73 7572 6520 796f 7520 6172 6520   ensure you are 
-00041820: 6465 706f 7369 7469 6e67 2042 6173 6963  depositing Basic
-00041830: 2041 7474 656e 7469 6f6e 2054 6f6b 656e   Attention Token
-00041840: 2842 4154 2920 746f 6b65 6e73 2075 6e64  (BAT) tokens und
-00041850: 6572 2074 6865 2063 6f6e 7472 6163 7420  er the contract 
-00041860: 6164 6472 6573 7320 656e 6469 6e67 2069  address ending i
-00041870: 6e20 3838 3765 662e 272c 0a20 2020 2020  n 887ef.',.     
-00041880: 2020 2023 2020 2020 2020 2020 2020 206e     #           n
-00041890: 616d 653a 2027 4552 4332 3027 2c0a 2020  ame: 'ERC20',.  
-000418a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000418b0: 2020 7265 7365 7441 6464 7265 7373 5374    resetAddressSt
-000418c0: 6174 7573 3a20 4661 6c73 652c 0a20 2020  atus: False,.   
-000418d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000418e0: 2061 6464 7265 7373 5265 6765 783a 2027   addressRegex: '
-000418f0: 5e28 3078 295b 302d 3941 2d46 612d 665d  ^(0x)[0-9A-Fa-f]
-00041900: 7b34 307d 2427 2c0a 2020 2020 2020 2020  {40}$',.        
-00041910: 2320 2020 2020 2020 2020 2020 6d65 6d6f  #           memo
-00041920: 5265 6765 783a 2027 272c 0a20 2020 2020  Regex: '',.     
-00041930: 2020 2023 2020 2020 2020 2020 2020 2077     #           w
-00041940: 6974 6864 7261 7746 6565 3a20 2732 3727  ithdrawFee: '27'
-00041950: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041960: 2020 2020 2020 7769 7468 6472 6177 4d69        withdrawMi
-00041970: 6e3a 2027 3534 272c 0a20 2020 2020 2020  n: '54',.       
-00041980: 2023 2020 2020 2020 2020 2020 2077 6974   #           wit
-00041990: 6864 7261 774d 6178 3a20 2731 3030 3030  hdrawMax: '10000
-000419a0: 3030 3030 3030 272c 0a20 2020 2020 2020  000000',.       
-000419b0: 2023 2020 2020 2020 2020 2020 206d 696e   #           min
-000419c0: 436f 6e66 6972 6d3a 2027 3132 272c 0a20  Confirm: '12',. 
-000419d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000419e0: 2020 2075 6e4c 6f63 6b43 6f6e 6669 726d     unLockConfirm
-000419f0: 3a20 2730 270a 2020 2020 2020 2020 2320  : '0'.        # 
-00041a00: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00041a10: 2020 2320 2020 2020 2020 5d0a 2020 2020    #       ].    
-00041a20: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-00041a30: 2020 2020 2320 205d 0a20 2020 2020 2020      #  ].       
-00041a40: 2023 0a20 2020 2020 2020 2077 6974 6864   #.        withd
-00041a50: 7261 7746 6565 7320 3d20 7b7d 0a20 2020  rawFees = {}.   
-00041a60: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-00041a70: 6e67 6528 302c 206c 656e 2872 6573 706f  nge(0, len(respo
-00041a80: 6e73 6529 293a 0a20 2020 2020 2020 2020  nse)):.         
-00041a90: 2020 2065 6e74 7279 203d 2072 6573 706f     entry = respo
-00041aa0: 6e73 655b 695d 0a20 2020 2020 2020 2020  nse[i].         
-00041ab0: 2020 2063 7572 7265 6e63 7949 6420 3d20     currencyId = 
-00041ac0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00041ad0: 2865 6e74 7279 2c20 2763 6f69 6e27 290a  (entry, 'coin').
-00041ae0: 2020 2020 2020 2020 2020 2020 636f 6465              code
-00041af0: 203d 2073 656c 662e 7361 6665 5f63 7572   = self.safe_cur
-00041b00: 7265 6e63 795f 636f 6465 2863 7572 7265  rency_code(curre
-00041b10: 6e63 7949 6429 0a20 2020 2020 2020 2020  ncyId).         
-00041b20: 2020 206e 6574 776f 726b 4c69 7374 203d     networkList =
-00041b30: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00041b40: 2865 6e74 7279 2c20 276e 6574 776f 726b  (entry, 'network
-00041b50: 4c69 7374 272c 205b 5d29 0a20 2020 2020  List', []).     
-00041b60: 2020 2020 2020 2077 6974 6864 7261 7746         withdrawF
-00041b70: 6565 735b 636f 6465 5d20 3d20 7b7d 0a20  ees[code] = {}. 
-00041b80: 2020 2020 2020 2020 2020 2066 6f72 206a             for j
-00041b90: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
-00041ba0: 286e 6574 776f 726b 4c69 7374 2929 3a0a  (networkList)):.
-00041bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041bc0: 6e65 7477 6f72 6b45 6e74 7279 203d 206e  networkEntry = n
-00041bd0: 6574 776f 726b 4c69 7374 5b6a 5d0a 2020  etworkList[j].  
-00041be0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00041bf0: 7477 6f72 6b49 6420 3d20 7365 6c66 2e73  tworkId = self.s
-00041c00: 6166 655f 7374 7269 6e67 286e 6574 776f  afe_string(netwo
-00041c10: 726b 456e 7472 792c 2027 6e65 7477 6f72  rkEntry, 'networ
-00041c20: 6b27 290a 2020 2020 2020 2020 2020 2020  k').            
-00041c30: 2020 2020 6e65 7477 6f72 6b43 6f64 6520      networkCode 
-00041c40: 3d20 7365 6c66 2e73 6166 655f 6375 7272  = self.safe_curr
-00041c50: 656e 6379 5f63 6f64 6528 6e65 7477 6f72  ency_code(networ
-00041c60: 6b49 6429 0a20 2020 2020 2020 2020 2020  kId).           
-00041c70: 2020 2020 2066 6565 203d 2073 656c 662e       fee = self.
-00041c80: 7361 6665 5f6e 756d 6265 7228 6e65 7477  safe_number(netw
-00041c90: 6f72 6b45 6e74 7279 2c20 2777 6974 6864  orkEntry, 'withd
-00041ca0: 7261 7746 6565 2729 0a20 2020 2020 2020  rawFee').       
-00041cb0: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
-00041cc0: 7746 6565 735b 636f 6465 5d5b 6e65 7477  wFees[code][netw
-00041cd0: 6f72 6b43 6f64 655d 203d 2066 6565 0a20  orkCode] = fee. 
-00041ce0: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
-00041cf0: 2020 2020 2020 2020 2020 2020 2777 6974              'wit
-00041d00: 6864 7261 7727 3a20 7769 7468 6472 6177  hdraw': withdraw
-00041d10: 4665 6573 2c0a 2020 2020 2020 2020 2020  Fees,.          
-00041d20: 2020 2764 6570 6f73 6974 273a 207b 7d2c    'deposit': {},
-00041d30: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-00041d40: 666f 273a 2072 6573 706f 6e73 652c 0a20  fo': response,. 
-00041d50: 2020 2020 2020 207d 0a0a 2020 2020 6465         }..    de
-00041d60: 6620 6665 7463 685f 6465 706f 7369 745f  f fetch_deposit_
-00041d70: 7769 7468 6472 6177 5f66 6565 7328 7365  withdraw_fees(se
-00041d80: 6c66 2c20 636f 6465 733d 4e6f 6e65 2c20  lf, codes=None, 
-00041d90: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00041da0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00041db0: 6665 7463 6820 6465 706f 7369 7420 616e  fetch deposit an
-00041dc0: 6420 7769 7468 6472 6177 2066 6565 730a  d withdraw fees.
-00041dd0: 2020 2020 2020 2020 3a70 6172 616d 205b          :param [
-00041de0: 7374 725d 7c4e 6f6e 6520 636f 6465 733a  str]|None codes:
-00041df0: 206e 6f74 2075 7365 6420 6279 2062 696e   not used by bin
-00041e00: 616e 6365 2066 6574 6368 4465 706f 7369  ance fetchDeposi
-00041e10: 7457 6974 6864 7261 7746 6565 7328 290a  tWithdrawFees().
-00041e20: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-00041e30: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-00041e40: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-00041e50: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
-00041e60: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
-00041e70: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-00041e80: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
-00041e90: 7420 6f66 2060 6665 6520 7374 7275 6374  t of `fee struct
-00041ea0: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
-00041eb0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-00041ec0: 643d 6665 652d 7374 7275 6374 7572 653e  d=fee-structure>
-00041ed0: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
-00041ee0: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
-00041ef0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00041f00: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00041f10: 662e 7361 7069 4765 7443 6170 6974 616c  f.sapiGetCapital
-00041f20: 436f 6e66 6967 4765 7461 6c6c 2870 6172  ConfigGetall(par
-00041f30: 616d 7329 0a20 2020 2020 2020 2023 0a20  ams).        #. 
-00041f40: 2020 2020 2020 2023 2020 2020 5b0a 2020         #    [.  
-00041f50: 2020 2020 2020 2320 2020 2020 2020 207b        #        {
-00041f60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041f70: 2020 2020 2020 636f 696e 3a20 2742 4154        coin: 'BAT
-00041f80: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00041f90: 2020 2020 2020 2020 6465 706f 7369 7441          depositA
-00041fa0: 6c6c 456e 6162 6c65 3a20 5472 7565 2c0a  llEnable: True,.
-00041fb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00041fc0: 2020 2020 2077 6974 6864 7261 7741 6c6c       withdrawAll
-00041fd0: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
-00041fe0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00041ff0: 2020 206e 616d 653a 2027 4261 7369 6320     name: 'Basic 
-00042000: 4174 7465 6e74 696f 6e20 546f 6b65 6e27  Attention Token'
-00042010: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042020: 2020 2020 2020 2066 7265 653a 2027 3027         free: '0'
-00042030: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042040: 2020 2020 2020 206c 6f63 6b65 643a 2027         locked: '
-00042050: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
-00042060: 2020 2020 2020 2020 2066 7265 657a 653a           freeze:
-00042070: 2027 3027 2c0a 2020 2020 2020 2020 2320   '0',.        # 
-00042080: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-00042090: 7261 7769 6e67 3a20 2730 272c 0a20 2020  rawing: '0',.   
-000420a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000420b0: 2020 6970 6f69 6e67 3a20 2730 272c 0a20    ipoing: '0',. 
-000420c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000420d0: 2020 2020 6970 6f61 626c 653a 2027 3027      ipoable: '0'
-000420e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000420f0: 2020 2020 2020 2073 746f 7261 6765 3a20         storage: 
-00042100: 2730 272c 0a20 2020 2020 2020 2023 2020  '0',.        #  
-00042110: 2020 2020 2020 2020 2020 6973 4c65 6761            isLega
-00042120: 6c4d 6f6e 6579 3a20 4661 6c73 652c 0a20  lMoney: False,. 
-00042130: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042140: 2020 2020 7472 6164 696e 673a 2054 7275      trading: Tru
-00042150: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00042160: 2020 2020 2020 2020 6e65 7477 6f72 6b4c          networkL
-00042170: 6973 743a 205b 0a20 2020 2020 2020 2023  ist: [.        #
-00042180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042190: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000421a0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-000421b0: 6574 776f 726b 3a20 2742 4e42 272c 0a20  etwork: 'BNB',. 
-000421c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000421d0: 2020 2020 2020 2020 2020 2020 636f 696e              coin
-000421e0: 3a20 2742 4154 272c 0a20 2020 2020 2020  : 'BAT',.       
-000421f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042200: 2020 2020 2020 7769 7468 6472 6177 496e        withdrawIn
-00042210: 7465 6765 724d 756c 7469 706c 653a 2027  tegerMultiple: '
-00042220: 302e 3030 3030 3030 3031 272c 0a20 2020  0.00000001',.   
-00042230: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042240: 2020 2020 2020 2020 2020 6973 4465 6661            isDefa
-00042250: 756c 743a 2046 616c 7365 2c0a 2020 2020  ult: False,.    
-00042260: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042270: 2020 2020 2020 2020 2064 6570 6f73 6974           deposit
-00042280: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
-00042290: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000422a0: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-000422b0: 7261 7745 6e61 626c 653a 2054 7275 652c  rawEnable: True,
-000422c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000422d0: 2020 2020 2020 2020 2020 2020 2020 6465                de
-000422e0: 706f 7369 7444 6573 633a 2027 272c 0a20  positDesc: '',. 
-000422f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042300: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00042310: 6472 6177 4465 7363 3a20 2727 2c0a 2020  drawDesc: '',.  
-00042320: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042330: 2020 2020 2020 2020 2020 2073 7065 6369             speci
-00042340: 616c 5469 7073 3a20 2754 6865 206e 616d  alTips: 'The nam
-00042350: 6520 6f66 2073 656c 6620 6173 7365 7420  e of self asset 
-00042360: 6973 2042 6173 6963 2041 7474 656e 7469  is Basic Attenti
-00042370: 6f6e 2054 6f6b 656e 2842 4154 292e 2042  on Token(BAT). B
-00042380: 6f74 6820 6120 4d45 4d4f 2061 6e64 2061  oth a MEMO and a
-00042390: 6e20 4164 6472 6573 7320 6172 6520 7265  n Address are re
-000423a0: 7175 6972 6564 2074 6f20 7375 6363 6573  quired to succes
-000423b0: 7366 756c 6c79 2064 6570 6f73 6974 2079  sfully deposit y
-000423c0: 6f75 7220 4245 5032 2074 6f6b 656e 7320  our BEP2 tokens 
-000423d0: 746f 2042 696e 616e 6365 2e27 2c0a 2020  to Binance.',.  
-000423e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000423f0: 2020 2020 2020 2020 2020 206e 616d 653a             name:
-00042400: 2027 4245 5032 272c 0a20 2020 2020 2020   'BEP2',.       
-00042410: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042420: 2020 2020 2020 7265 7365 7441 6464 7265        resetAddre
-00042430: 7373 5374 6174 7573 3a20 4661 6c73 652c  ssStatus: False,
-00042440: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042450: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-00042460: 6472 6573 7352 6567 6578 3a20 275e 2862  dressRegex: '^(b
-00042470: 6e62 3129 5b30 2d39 612d 7a5d 7b33 387d  nb1)[0-9a-z]{38}
-00042480: 2427 2c0a 2020 2020 2020 2020 2320 2020  $',.        #   
-00042490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000424a0: 206d 656d 6f52 6567 6578 3a20 275e 5b30   memoRegex: '^[0
-000424b0: 2d39 412d 5a61 2d7a 5c5c 2d5f 5d7b 312c  -9A-Za-z\\-_]{1,
-000424c0: 3132 307d 2427 2c0a 2020 2020 2020 2020  120}$',.        
-000424d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000424e0: 2020 2020 2077 6974 6864 7261 7746 6565       withdrawFee
-000424f0: 3a20 2730 2e32 3727 2c0a 2020 2020 2020  : '0.27',.      
-00042500: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042510: 2020 2020 2020 2077 6974 6864 7261 774d         withdrawM
-00042520: 696e 3a20 2730 2e35 3427 2c0a 2020 2020  in: '0.54',.    
-00042530: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042540: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
-00042550: 774d 6178 3a20 2731 3030 3030 3030 3030  wMax: '100000000
-00042560: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
-00042570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042580: 2020 6d69 6e43 6f6e 6669 726d 3a20 2731    minConfirm: '1
-00042590: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-000425a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000425b0: 756e 4c6f 636b 436f 6e66 6972 6d3a 2027  unLockConfirm: '
-000425c0: 3027 0a20 2020 2020 2020 2023 2020 2020  0'.        #    
-000425d0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-000425e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000425f0: 2020 2020 2020 2020 2e2e 2e0a 2020 2020          ....    
-00042600: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042610: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
-00042620: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-00042630: 2020 205d 0a20 2020 2020 2020 2023 0a20     ].        #. 
-00042640: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00042650: 6c66 2e70 6172 7365 5f64 6570 6f73 6974  lf.parse_deposit
-00042660: 5f77 6974 6864 7261 775f 6665 6573 2872  _withdraw_fees(r
-00042670: 6573 706f 6e73 652c 2063 6f64 6573 2c20  esponse, codes, 
-00042680: 2763 6f69 6e27 290a 0a20 2020 2064 6566  'coin')..    def
-00042690: 2070 6172 7365 5f64 6570 6f73 6974 5f77   parse_deposit_w
-000426a0: 6974 6864 7261 775f 6665 6528 7365 6c66  ithdraw_fee(self
-000426b0: 2c20 6665 652c 2063 7572 7265 6e63 793d  , fee, currency=
-000426c0: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
-000426d0: 0a20 2020 2020 2020 2023 2020 2020 7b0a  .        #    {.
-000426e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000426f0: 2063 6f69 6e3a 2027 4241 5427 2c0a 2020   coin: 'BAT',.  
-00042700: 2020 2020 2020 2320 2020 2020 2020 2064        #        d
-00042710: 6570 6f73 6974 416c 6c45 6e61 626c 653a  epositAllEnable:
-00042720: 2054 7275 652c 0a20 2020 2020 2020 2023   True,.        #
-00042730: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
-00042740: 416c 6c45 6e61 626c 653a 2054 7275 652c  AllEnable: True,
-00042750: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042760: 2020 6e61 6d65 3a20 2742 6173 6963 2041    name: 'Basic A
-00042770: 7474 656e 7469 6f6e 2054 6f6b 656e 272c  ttention Token',
-00042780: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042790: 2020 6672 6565 3a20 2730 272c 0a20 2020    free: '0',.   
-000427a0: 2020 2020 2023 2020 2020 2020 2020 6c6f       #        lo
-000427b0: 636b 6564 3a20 2730 272c 0a20 2020 2020  cked: '0',.     
-000427c0: 2020 2023 2020 2020 2020 2020 6672 6565     #        free
-000427d0: 7a65 3a20 2730 272c 0a20 2020 2020 2020  ze: '0',.       
-000427e0: 2023 2020 2020 2020 2020 7769 7468 6472   #        withdr
-000427f0: 6177 696e 673a 2027 3027 2c0a 2020 2020  awing: '0',.    
-00042800: 2020 2020 2320 2020 2020 2020 2069 706f      #        ipo
-00042810: 696e 673a 2027 3027 2c0a 2020 2020 2020  ing: '0',.      
-00042820: 2020 2320 2020 2020 2020 2069 706f 6162    #        ipoab
-00042830: 6c65 3a20 2730 272c 0a20 2020 2020 2020  le: '0',.       
-00042840: 2023 2020 2020 2020 2020 7374 6f72 6167   #        storag
-00042850: 653a 2027 3027 2c0a 2020 2020 2020 2020  e: '0',.        
-00042860: 2320 2020 2020 2020 2069 734c 6567 616c  #        isLegal
-00042870: 4d6f 6e65 793a 2046 616c 7365 2c0a 2020  Money: False,.  
-00042880: 2020 2020 2020 2320 2020 2020 2020 2074        #        t
-00042890: 7261 6469 6e67 3a20 5472 7565 2c0a 2020  rading: True,.  
-000428a0: 2020 2020 2020 2320 2020 2020 2020 206e        #        n
-000428b0: 6574 776f 726b 4c69 7374 3a20 5b0a 2020  etworkList: [.  
-000428c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000428d0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-000428e0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-000428f0: 7477 6f72 6b3a 2027 424e 4227 2c0a 2020  twork: 'BNB',.  
-00042900: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042910: 2020 2020 2020 2063 6f69 6e3a 2027 4241         coin: 'BA
-00042920: 5427 2c0a 2020 2020 2020 2020 2320 2020  T',.        #   
-00042930: 2020 2020 2020 2020 2020 2020 2077 6974               wit
-00042940: 6864 7261 7749 6e74 6567 6572 4d75 6c74  hdrawIntegerMult
-00042950: 6970 6c65 3a20 2730 2e30 3030 3030 3030  iple: '0.0000000
-00042960: 3127 2c0a 2020 2020 2020 2020 2320 2020  1',.        #   
-00042970: 2020 2020 2020 2020 2020 2020 2069 7344               isD
-00042980: 6566 6175 6c74 3a20 4661 6c73 652c 0a20  efault: False,. 
-00042990: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000429a0: 2020 2020 2020 2020 6465 706f 7369 7445          depositE
-000429b0: 6e61 626c 653a 2054 7275 652c 0a20 2020  nable: True,.   
-000429c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000429d0: 2020 2020 2020 7769 7468 6472 6177 456e        withdrawEn
-000429e0: 6162 6c65 3a20 5472 7565 2c0a 2020 2020  able: True,.    
-000429f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042a00: 2020 2020 2064 6570 6f73 6974 4465 7363       depositDesc
-00042a10: 3a20 2727 2c0a 2020 2020 2020 2020 2320  : '',.        # 
-00042a20: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00042a30: 6974 6864 7261 7744 6573 633a 2027 272c  ithdrawDesc: '',
-00042a40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042a50: 2020 2020 2020 2020 2020 7370 6563 6961            specia
-00042a60: 6c54 6970 733a 2027 5468 6520 6e61 6d65  lTips: 'The name
-00042a70: 206f 6620 7365 6c66 2061 7373 6574 2069   of self asset i
-00042a80: 7320 4261 7369 6320 4174 7465 6e74 696f  s Basic Attentio
-00042a90: 6e20 546f 6b65 6e28 4241 5429 2e20 426f  n Token(BAT). Bo
-00042aa0: 7468 2061 204d 454d 4f20 616e 6420 616e  th a MEMO and an
-00042ab0: 2041 6464 7265 7373 2061 7265 2072 6571   Address are req
-00042ac0: 7569 7265 6420 746f 2073 7563 6365 7373  uired to success
-00042ad0: 6675 6c6c 7920 6465 706f 7369 7420 796f  fully deposit yo
-00042ae0: 7572 2042 4550 3220 746f 6b65 6e73 2074  ur BEP2 tokens t
-00042af0: 6f20 4269 6e61 6e63 652e 272c 0a20 2020  o Binance.',.   
-00042b00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042b10: 2020 2020 2020 6e61 6d65 3a20 2742 4550        name: 'BEP
-00042b20: 3227 2c0a 2020 2020 2020 2020 2320 2020  2',.        #   
-00042b30: 2020 2020 2020 2020 2020 2020 2072 6573               res
-00042b40: 6574 4164 6472 6573 7353 7461 7475 733a  etAddressStatus:
-00042b50: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-00042b60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00042b70: 2061 6464 7265 7373 5265 6765 783a 2027   addressRegex: '
-00042b80: 5e28 626e 6231 295b 302d 3961 2d7a 5d7b  ^(bnb1)[0-9a-z]{
-00042b90: 3338 7d24 272c 0a20 2020 2020 2020 2023  38}$',.        #
-00042ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042bb0: 6d65 6d6f 5265 6765 783a 2027 5e5b 302d  memoRegex: '^[0-
-00042bc0: 3941 2d5a 612d 7a5c 5c2d 5f5d 7b31 2c31  9A-Za-z\\-_]{1,1
-00042bd0: 3230 7d24 272c 0a20 2020 2020 2020 2023  20}$',.        #
-00042be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042bf0: 7769 7468 6472 6177 4665 653a 2027 302e  withdrawFee: '0.
-00042c00: 3237 272c 0a20 2020 2020 2020 2023 2020  27',.        #  
-00042c10: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-00042c20: 7468 6472 6177 4d69 6e3a 2027 302e 3534  thdrawMin: '0.54
-00042c30: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00042c40: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00042c50: 6472 6177 4d61 783a 2027 3130 3030 3030  drawMax: '100000
-00042c60: 3030 3030 3027 2c0a 2020 2020 2020 2020  00000',.        
-00042c70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00042c80: 206d 696e 436f 6e66 6972 6d3a 2027 3127   minConfirm: '1'
-00042c90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042ca0: 2020 2020 2020 2020 2020 2075 6e4c 6f63             unLoc
-00042cb0: 6b43 6f6e 6669 726d 3a20 2730 270a 2020  kConfirm: '0'.  
-00042cc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042cd0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00042ce0: 2020 2020 2020 2020 2020 202e 2e2e 0a20             .... 
-00042cf0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042d00: 5d0a 2020 2020 2020 2020 2320 2020 207d  ].        #    }
-00042d10: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00042d20: 2020 206e 6574 776f 726b 4c69 7374 203d     networkList =
-00042d30: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00042d40: 2866 6565 2c20 276e 6574 776f 726b 4c69  (fee, 'networkLi
-00042d50: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-00042d60: 2072 6573 756c 7420 3d20 7365 6c66 2e64   result = self.d
-00042d70: 6570 6f73 6974 5f77 6974 6864 7261 775f  eposit_withdraw_
-00042d80: 6665 6528 6665 6529 0a20 2020 2020 2020  fee(fee).       
-00042d90: 2066 6f72 206a 2069 6e20 7261 6e67 6528   for j in range(
-00042da0: 302c 206c 656e 286e 6574 776f 726b 4c69  0, len(networkLi
-00042db0: 7374 2929 3a0a 2020 2020 2020 2020 2020  st)):.          
-00042dc0: 2020 6e65 7477 6f72 6b45 6e74 7279 203d    networkEntry =
-00042dd0: 206e 6574 776f 726b 4c69 7374 5b6a 5d0a   networkList[j].
-00042de0: 2020 2020 2020 2020 2020 2020 6e65 7477              netw
-00042df0: 6f72 6b49 6420 3d20 7365 6c66 2e73 6166  orkId = self.saf
-00042e00: 655f 7374 7269 6e67 286e 6574 776f 726b  e_string(network
-00042e10: 456e 7472 792c 2027 6e65 7477 6f72 6b27  Entry, 'network'
-00042e20: 290a 2020 2020 2020 2020 2020 2020 6e65  ).            ne
-00042e30: 7477 6f72 6b43 6f64 6520 3d20 7365 6c66  tworkCode = self
-00042e40: 2e6e 6574 776f 726b 5f69 645f 746f 5f63  .network_id_to_c
-00042e50: 6f64 6528 6e65 7477 6f72 6b49 6429 0a20  ode(networkId). 
-00042e60: 2020 2020 2020 2020 2020 2077 6974 6864             withd
-00042e70: 7261 7746 6565 203d 2073 656c 662e 7361  rawFee = self.sa
-00042e80: 6665 5f6e 756d 6265 7228 6e65 7477 6f72  fe_number(networ
-00042e90: 6b45 6e74 7279 2c20 2777 6974 6864 7261  kEntry, 'withdra
-00042ea0: 7746 6565 2729 0a20 2020 2020 2020 2020  wFee').         
-00042eb0: 2020 2069 7344 6566 6175 6c74 203d 2073     isDefault = s
-00042ec0: 656c 662e 7361 6665 5f76 616c 7565 286e  elf.safe_value(n
-00042ed0: 6574 776f 726b 456e 7472 792c 2027 6973  etworkEntry, 'is
-00042ee0: 4465 6661 756c 7427 290a 2020 2020 2020  Default').      
-00042ef0: 2020 2020 2020 6966 2069 7344 6566 6175        if isDefau
-00042f00: 6c74 2069 7320 5472 7565 3a0a 2020 2020  lt is True:.    
-00042f10: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00042f20: 6c74 5b27 7769 7468 6472 6177 275d 203d  lt['withdraw'] =
-00042f30: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00042f40: 2020 2020 2020 2027 6665 6527 3a20 7769         'fee': wi
-00042f50: 7468 6472 6177 4665 652c 0a20 2020 2020  thdrawFee,.     
-00042f60: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00042f70: 7065 7263 656e 7461 6765 273a 204e 6f6e  percentage': Non
-00042f80: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00042f90: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00042fa0: 2072 6573 756c 745b 276e 6574 776f 726b   result['network
-00042fb0: 7327 5d5b 6e65 7477 6f72 6b43 6f64 655d  s'][networkCode]
-00042fc0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00042fd0: 2020 2020 2027 7769 7468 6472 6177 273a       'withdraw':
-00042fe0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00042ff0: 2020 2020 2020 2027 6665 6527 3a20 7769         'fee': wi
-00043000: 7468 6472 6177 4665 652c 0a20 2020 2020  thdrawFee,.     
-00043010: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00043020: 7065 7263 656e 7461 6765 273a 204e 6f6e  percentage': Non
-00043030: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00043040: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
-00043050: 2020 2020 2020 2764 6570 6f73 6974 273a        'deposit':
-00043060: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00043070: 2020 2020 2020 2027 6665 6527 3a20 4e6f         'fee': No
-00043080: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00043090: 2020 2020 2020 2020 2770 6572 6365 6e74          'percent
-000430a0: 6167 6527 3a20 4e6f 6e65 2c0a 2020 2020  age': None,.    
-000430b0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-000430c0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-000430d0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-000430e0: 6c74 0a0a 2020 2020 6465 6620 7769 7468  lt..    def with
-000430f0: 6472 6177 2873 656c 662c 2063 6f64 653a  draw(self, code:
-00043100: 2073 7472 2c20 616d 6f75 6e74 2c20 6164   str, amount, ad
-00043110: 6472 6573 732c 2074 6167 3d4e 6f6e 652c  dress, tag=None,
-00043120: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00043130: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00043140: 206d 616b 6520 6120 7769 7468 6472 6177   make a withdraw
-00043150: 616c 0a20 2020 2020 2020 203a 7061 7261  al.        :para
-00043160: 6d20 7374 7220 636f 6465 3a20 756e 6966  m str code: unif
-00043170: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
-00043180: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00043190: 2066 6c6f 6174 2061 6d6f 756e 743a 2074   float amount: t
-000431a0: 6865 2061 6d6f 756e 7420 746f 2077 6974  he amount to wit
-000431b0: 6864 7261 770a 2020 2020 2020 2020 3a70  hdraw.        :p
-000431c0: 6172 616d 2073 7472 2061 6464 7265 7373  aram str address
-000431d0: 3a20 7468 6520 6164 6472 6573 7320 746f  : the address to
-000431e0: 2077 6974 6864 7261 7720 746f 0a20 2020   withdraw to.   
-000431f0: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
-00043200: 4e6f 6e65 2074 6167 3a0a 2020 2020 2020  None tag:.      
-00043210: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-00043220: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-00043230: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-00043240: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
-00043250: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-00043260: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-00043270: 743a 2061 2060 7472 616e 7361 6374 696f  t: a `transactio
-00043280: 6e20 7374 7275 6374 7572 6520 3c68 7474  n structure <htt
-00043290: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-000432a0: 6f6d 2f23 2f3f 6964 3d74 7261 6e73 6163  om/#/?id=transac
-000432b0: 7469 6f6e 2d73 7472 7563 7475 7265 3e60  tion-structure>`
-000432c0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000432d0: 2020 2020 2074 6167 2c20 7061 7261 6d73       tag, params
-000432e0: 203d 2073 656c 662e 6861 6e64 6c65 5f77   = self.handle_w
-000432f0: 6974 6864 7261 775f 7461 675f 616e 645f  ithdraw_tag_and_
-00043300: 7061 7261 6d73 2874 6167 2c20 7061 7261  params(tag, para
-00043310: 6d73 290a 2020 2020 2020 2020 7365 6c66  ms).        self
-00043320: 2e63 6865 636b 5f61 6464 7265 7373 2861  .check_address(a
-00043330: 6464 7265 7373 290a 2020 2020 2020 2020  ddress).        
-00043340: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00043350: 7328 290a 2020 2020 2020 2020 6375 7272  s().        curr
-00043360: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-00043370: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-00043380: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00043390: 2020 2020 2020 2020 2020 2027 636f 696e             'coin
-000433a0: 273a 2063 7572 7265 6e63 795b 2769 6427  ': currency['id'
-000433b0: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-000433c0: 6164 6472 6573 7327 3a20 6164 6472 6573  address': addres
-000433d0: 732c 0a20 2020 2020 2020 2020 2020 2027  s,.            '
-000433e0: 616d 6f75 6e74 273a 2061 6d6f 756e 742c  amount': amount,
-000433f0: 0a20 2020 2020 2020 2020 2020 2023 2068  .            # h
-00043400: 7474 7073 3a2f 2f62 696e 616e 6365 2d64  ttps://binance-d
-00043410: 6f63 732e 6769 7468 7562 2e69 6f2f 6170  ocs.github.io/ap
-00043420: 6964 6f63 732f 7370 6f74 2f65 6e2f 2377  idocs/spot/en/#w
-00043430: 6974 6864 7261 772d 7361 7069 0a20 2020  ithdraw-sapi.   
-00043440: 2020 2020 2020 2020 2023 2069 7373 7565           # issue
-00043450: 2073 6170 6947 6574 4361 7069 7461 6c43   sapiGetCapitalC
-00043460: 6f6e 6669 6747 6574 616c 6c28 2920 746f  onfigGetall() to
-00043470: 2067 6574 206e 6574 776f 726b 7320 666f   get networks fo
-00043480: 7220 7769 7468 6472 6177 696e 6720 5553  r withdrawing US
-00043490: 4454 2045 5243 3230 2076 7320 5553 4454  DT ERC20 vs USDT
-000434a0: 204f 6d6e 690a 2020 2020 2020 2020 2020   Omni.          
-000434b0: 2020 2320 276e 6574 776f 726b 273a 2027    # 'network': '
-000434c0: 4554 4827 2c20 2023 2027 4254 4327 2c20  ETH',  # 'BTC', 
-000434d0: 2754 5258 272c 2065 7463 2c20 6f70 7469  'TRX', etc, opti
-000434e0: 6f6e 616c 0a20 2020 2020 2020 207d 0a20  onal.        }. 
-000434f0: 2020 2020 2020 2069 6620 7461 6720 6973         if tag is
-00043500: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00043510: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00043520: 6164 6472 6573 7354 6167 275d 203d 2074  addressTag'] = t
-00043530: 6167 0a20 2020 2020 2020 206e 6574 776f  ag.        netwo
-00043540: 726b 7320 3d20 7365 6c66 2e73 6166 655f  rks = self.safe_
-00043550: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
-00043560: 6e73 2c20 276e 6574 776f 726b 7327 2c20  ns, 'networks', 
-00043570: 7b7d 290a 2020 2020 2020 2020 6e65 7477  {}).        netw
-00043580: 6f72 6b20 3d20 7365 6c66 2e73 6166 655f  ork = self.safe_
-00043590: 7374 7269 6e67 5f75 7070 6572 2870 6172  string_upper(par
-000435a0: 616d 732c 2027 6e65 7477 6f72 6b27 2920  ams, 'network') 
-000435b0: 2023 2073 656c 6620 6c69 6e65 2061 6c6c   # self line all
-000435c0: 6f77 7320 7468 6520 7573 6572 2074 6f20  ows the user to 
-000435d0: 7370 6563 6966 7920 6569 7468 6572 2045  specify either E
-000435e0: 5243 3230 206f 7220 4554 480a 2020 2020  RC20 or ETH.    
-000435f0: 2020 2020 6e65 7477 6f72 6b20 3d20 7365      network = se
-00043600: 6c66 2e73 6166 655f 7374 7269 6e67 286e  lf.safe_string(n
-00043610: 6574 776f 726b 732c 206e 6574 776f 726b  etworks, network
-00043620: 2c20 6e65 7477 6f72 6b29 2020 2320 6861  , network)  # ha
-00043630: 6e64 6c65 2045 5243 3230 3e45 5448 2061  ndle ERC20>ETH a
-00043640: 6c69 6173 0a20 2020 2020 2020 2069 6620  lias.        if 
-00043650: 6e65 7477 6f72 6b20 6973 206e 6f74 204e  network is not N
-00043660: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00043670: 2072 6571 7565 7374 5b27 6e65 7477 6f72   request['networ
-00043680: 6b27 5d20 3d20 6e65 7477 6f72 6b0a 2020  k'] = network.  
-00043690: 2020 2020 2020 2020 2020 7061 7261 6d73            params
-000436a0: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-000436b0: 616d 732c 2027 6e65 7477 6f72 6b27 290a  ams, 'network').
-000436c0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-000436d0: 203d 2073 656c 662e 7361 7069 506f 7374   = self.sapiPost
-000436e0: 4361 7069 7461 6c57 6974 6864 7261 7741  CapitalWithdrawA
-000436f0: 7070 6c79 2873 656c 662e 6578 7465 6e64  pply(self.extend
-00043700: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00043710: 2929 0a20 2020 2020 2020 2023 2020 2020  )).        #    
-00043720: 207b 6964 3a20 2739 6136 3736 3238 6231   {id: '9a67628b1
-00043730: 3662 6134 3938 3861 6532 3064 3332 3933  6ba4988ae20d3293
-00043740: 3333 6631 3662 6327 7d0a 2020 2020 2020  33f16bc'}.      
-00043750: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-00043760: 7273 655f 7472 616e 7361 6374 696f 6e28  rse_transaction(
-00043770: 7265 7370 6f6e 7365 2c20 6375 7272 656e  response, curren
-00043780: 6379 290a 0a20 2020 2064 6566 2070 6172  cy)..    def par
-00043790: 7365 5f74 7261 6469 6e67 5f66 6565 2873  se_trading_fee(s
-000437a0: 656c 662c 2066 6565 2c20 6d61 726b 6574  elf, fee, market
-000437b0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-000437c0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-000437d0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000437e0: 2020 2020 2273 796d 626f 6c22 3a20 2241      "symbol": "A
-000437f0: 4441 424e 4222 2c0a 2020 2020 2020 2020  DABNB",.        
-00043800: 2320 2020 2020 2020 2020 226d 616b 6572  #         "maker
-00043810: 436f 6d6d 6973 7369 6f6e 223a 2030 2e30  Commission": 0.0
-00043820: 3031 2c0a 2020 2020 2020 2020 2320 2020  01,.        #   
-00043830: 2020 2020 2020 2274 616b 6572 436f 6d6d        "takerComm
-00043840: 6973 7369 6f6e 223a 2030 2e30 3031 0a20  ission": 0.001. 
-00043850: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00043860: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00043870: 206d 6172 6b65 7449 6420 3d20 7365 6c66   marketId = self
-00043880: 2e73 6166 655f 7374 7269 6e67 2866 6565  .safe_string(fee
-00043890: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
-000438a0: 2020 2020 7379 6d62 6f6c 203d 2073 656c      symbol = sel
-000438b0: 662e 7361 6665 5f73 796d 626f 6c28 6d61  f.safe_symbol(ma
-000438c0: 726b 6574 4964 2c20 6d61 726b 6574 2c20  rketId, market, 
-000438d0: 4e6f 6e65 2c20 2773 706f 7427 290a 2020  None, 'spot').  
-000438e0: 2020 2020 2020 7265 7475 726e 207b 0a20        return {. 
-000438f0: 2020 2020 2020 2020 2020 2027 696e 666f             'info
-00043900: 273a 2066 6565 2c0a 2020 2020 2020 2020  ': fee,.        
-00043910: 2020 2020 2773 796d 626f 6c27 3a20 7379      'symbol': sy
-00043920: 6d62 6f6c 2c0a 2020 2020 2020 2020 2020  mbol,.          
-00043930: 2020 276d 616b 6572 273a 2073 656c 662e    'maker': self.
-00043940: 7361 6665 5f6e 756d 6265 7228 6665 652c  safe_number(fee,
-00043950: 2027 6d61 6b65 7243 6f6d 6d69 7373 696f   'makerCommissio
-00043960: 6e27 292c 0a20 2020 2020 2020 2020 2020  n'),.           
-00043970: 2027 7461 6b65 7227 3a20 7365 6c66 2e73   'taker': self.s
-00043980: 6166 655f 6e75 6d62 6572 2866 6565 2c20  afe_number(fee, 
-00043990: 2774 616b 6572 436f 6d6d 6973 7369 6f6e  'takerCommission
-000439a0: 2729 2c0a 2020 2020 2020 2020 7d0a 0a20  '),.        }.. 
-000439b0: 2020 2064 6566 2066 6574 6368 5f74 7261     def fetch_tra
-000439c0: 6469 6e67 5f66 6565 2873 656c 662c 2073  ding_fee(self, s
-000439d0: 796d 626f 6c3a 2073 7472 2c20 7061 7261  ymbol: str, para
-000439e0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-000439f0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-00043a00: 6820 7468 6520 7472 6164 696e 6720 6665  h the trading fe
-00043a10: 6573 2066 6f72 2061 206d 6172 6b65 740a  es for a market.
-00043a20: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00043a30: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
-00043a40: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
-00043a50: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00043a60: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
-00043a70: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-00043a80: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
-00043a90: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
-00043aa0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-00043ab0: 726e 7320 6469 6374 3a20 6120 6066 6565  rns dict: a `fee
-00043ac0: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
-00043ad0: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-00043ae0: 6d2f 232f 3f69 643d 6665 652d 7374 7275  m/#/?id=fee-stru
-00043af0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00043b00: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00043b10: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00043b20: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00043b30: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00043b40: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
-00043b50: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-00043b60: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
-00043b70: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-00043b80: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
-00043b90: 6573 706f 6e73 6520 3d20 7365 6c66 2e73  esponse = self.s
-00043ba0: 6170 6947 6574 4173 7365 7454 7261 6465  apiGetAssetTrade
-00043bb0: 4665 6528 7365 6c66 2e65 7874 656e 6428  Fee(self.extend(
-00043bc0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00043bd0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00043be0: 2020 2020 2320 2020 2020 5b0a 2020 2020      #     [.    
-00043bf0: 2020 2020 2320 2020 2020 2020 7b0a 2020      #       {.  
-00043c00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00043c10: 2273 796d 626f 6c22 3a20 2242 5443 5553  "symbol": "BTCUS
-00043c20: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-00043c30: 2020 2020 2020 2022 6d61 6b65 7243 6f6d         "makerCom
-00043c40: 6d69 7373 696f 6e22 3a20 2230 2e30 3031  mission": "0.001
-00043c50: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00043c60: 2020 2020 2022 7461 6b65 7243 6f6d 6d69       "takerCommi
-00043c70: 7373 696f 6e22 3a20 2230 2e30 3031 220a  ssion": "0.001".
-00043c80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00043c90: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00043ca0: 5d0a 2020 2020 2020 2020 230a 2020 2020  ].        #.    
-00043cb0: 2020 2020 6669 7273 7420 3d20 7365 6c66      first = self
-00043cc0: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-00043cd0: 6f6e 7365 2c20 302c 207b 7d29 0a20 2020  onse, 0, {}).   
-00043ce0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00043cf0: 2e70 6172 7365 5f74 7261 6469 6e67 5f66  .parse_trading_f
-00043d00: 6565 2866 6972 7374 290a 0a20 2020 2064  ee(first)..    d
-00043d10: 6566 2066 6574 6368 5f74 7261 6469 6e67  ef fetch_trading
-00043d20: 5f66 6565 7328 7365 6c66 2c20 7061 7261  _fees(self, para
-00043d30: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-00043d40: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-00043d50: 6820 7468 6520 7472 6164 696e 6720 6665  h the trading fe
-00043d60: 6573 2066 6f72 206d 756c 7469 706c 6520  es for multiple 
-00043d70: 6d61 726b 6574 730a 2020 2020 2020 2020  markets.        
-00043d80: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-00043d90: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-00043da0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00043db0: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
-00043dc0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-00043dd0: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
-00043de0: 2061 2064 6963 7469 6f6e 6172 7920 6f66   a dictionary of
-00043df0: 2060 6665 6520 7374 7275 6374 7572 6573   `fee structures
-00043e00: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00043e10: 6378 742e 636f 6d2f 232f 3f69 643d 6665  cxt.com/#/?id=fe
-00043e20: 652d 7374 7275 6374 7572 653e 6020 696e  e-structure>` in
-00043e30: 6465 7865 6420 6279 206d 6172 6b65 7420  dexed by market 
-00043e40: 7379 6d62 6f6c 730a 2020 2020 2020 2020  symbols.        
-00043e50: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00043e60: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00043e70: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00043e80: 204e 6f6e 650a 2020 2020 2020 2020 6465   None.        de
-00043e90: 6661 756c 7454 7970 6520 3d20 7365 6c66  faultType = self
-00043ea0: 2e73 6166 655f 7374 7269 6e67 5f32 2873  .safe_string_2(s
-00043eb0: 656c 662e 6f70 7469 6f6e 732c 2027 6665  elf.options, 'fe
-00043ec0: 7463 6854 7261 6469 6e67 4665 6573 272c  tchTradingFees',
-00043ed0: 2027 6465 6661 756c 7454 7970 6527 2c20   'defaultType', 
-00043ee0: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
-00043ef0: 2020 7479 7065 203d 2073 656c 662e 7361    type = self.sa
-00043f00: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
-00043f10: 2c20 2774 7970 6527 2c20 6465 6661 756c  , 'type', defaul
-00043f20: 7454 7970 6529 0a20 2020 2020 2020 2070  tType).        p
-00043f30: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-00043f40: 7428 7061 7261 6d73 2c20 2774 7970 6527  t(params, 'type'
-00043f50: 290a 2020 2020 2020 2020 7375 6254 7970  ).        subTyp
-00043f60: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-00043f70: 2073 7562 5479 7065 2c20 7061 7261 6d73   subType, params
-00043f80: 203d 2073 656c 662e 6861 6e64 6c65 5f73   = self.handle_s
-00043f90: 7562 5f74 7970 655f 616e 645f 7061 7261  ub_type_and_para
-00043fa0: 6d73 2827 6665 7463 6854 7261 6469 6e67  ms('fetchTrading
-00043fb0: 4665 6573 272c 204e 6f6e 652c 2070 6172  Fees', None, par
-00043fc0: 616d 7329 0a20 2020 2020 2020 2069 7353  ams).        isS
-00043fd0: 706f 744f 724d 6172 6769 6e20 3d20 2874  potOrMargin = (t
-00043fe0: 7970 6520 3d3d 2027 7370 6f74 2729 206f  ype == 'spot') o
-00043ff0: 7220 2874 7970 6520 3d3d 2027 6d61 7267  r (type == 'marg
-00044000: 696e 2729 0a20 2020 2020 2020 2069 734c  in').        isL
-00044010: 696e 6561 7220 3d20 7365 6c66 2e69 735f  inear = self.is_
-00044020: 6c69 6e65 6172 2874 7970 652c 2073 7562  linear(type, sub
-00044030: 5479 7065 290a 2020 2020 2020 2020 6973  Type).        is
-00044040: 496e 7665 7273 6520 3d20 7365 6c66 2e69  Inverse = self.i
-00044050: 735f 696e 7665 7273 6528 7479 7065 2c20  s_inverse(type, 
-00044060: 7375 6254 7970 6529 0a20 2020 2020 2020  subType).       
-00044070: 2069 6620 6973 5370 6f74 4f72 4d61 7267   if isSpotOrMarg
-00044080: 696e 3a0a 2020 2020 2020 2020 2020 2020  in:.            
-00044090: 6d65 7468 6f64 203d 2027 7361 7069 4765  method = 'sapiGe
-000440a0: 7441 7373 6574 5472 6164 6546 6565 270a  tAssetTradeFee'.
-000440b0: 2020 2020 2020 2020 656c 6966 2069 734c          elif isL
-000440c0: 696e 6561 723a 0a20 2020 2020 2020 2020  inear:.         
-000440d0: 2020 206d 6574 686f 6420 3d20 2766 6170     method = 'fap
-000440e0: 6950 7269 7661 7465 4765 7441 6363 6f75  iPrivateGetAccou
-000440f0: 6e74 270a 2020 2020 2020 2020 656c 6966  nt'.        elif
-00044100: 2069 7349 6e76 6572 7365 3a0a 2020 2020   isInverse:.    
-00044110: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00044120: 2027 6461 7069 5072 6976 6174 6547 6574   'dapiPrivateGet
-00044130: 4163 636f 756e 7427 0a20 2020 2020 2020  Account'.       
-00044140: 2072 6573 706f 6e73 6520 3d20 6765 7461   response = geta
-00044150: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
-00044160: 2928 7061 7261 6d73 290a 2020 2020 2020  )(params).      
-00044170: 2020 230a 2020 2020 2020 2020 2320 7361    #.        # sa
-00044180: 7069 202f 2073 706f 740a 2020 2020 2020  pi / spot.      
-00044190: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-000441a0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-000441b0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-000441c0: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-000441d0: 2022 5a52 5842 4e42 222c 0a20 2020 2020   "ZRXBNB",.     
-000441e0: 2020 2023 2020 2020 2020 2020 2022 6d61     #         "ma
-000441f0: 6b65 7243 6f6d 6d69 7373 696f 6e22 3a20  kerCommission": 
-00044200: 2230 2e30 3031 222c 0a20 2020 2020 2020  "0.001",.       
-00044210: 2023 2020 2020 2020 2020 2022 7461 6b65   #         "take
-00044220: 7243 6f6d 6d69 7373 696f 6e22 3a20 2230  rCommission": "0
-00044230: 2e30 3031 220a 2020 2020 2020 2020 2320  .001".        # 
-00044240: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00044250: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
-00044260: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
-00044270: 6d62 6f6c 223a 2022 5a52 5842 5443 222c  mbol": "ZRXBTC",
-00044280: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00044290: 2020 2022 6d61 6b65 7243 6f6d 6d69 7373     "makerCommiss
-000442a0: 696f 6e22 3a20 2230 2e30 3031 222c 0a20  ion": "0.001",. 
-000442b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000442c0: 2022 7461 6b65 7243 6f6d 6d69 7373 696f   "takerCommissio
-000442d0: 6e22 3a20 2230 2e30 3031 220a 2020 2020  n": "0.001".    
-000442e0: 2020 2020 2320 2020 2020 2020 7d2c 0a20      #       },. 
-000442f0: 2020 2020 2020 2023 2020 2020 5d0a 2020         #    ].  
-00044300: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00044310: 2320 6661 7069 202f 2066 7574 7572 6520  # fapi / future 
-00044320: 2f20 6c69 6e65 6172 0a20 2020 2020 2020  / linear.       
-00044330: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-00044340: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00044350: 2020 2020 2022 6665 6554 6965 7222 3a20       "feeTier": 
-00044360: 302c 2020 2020 2020 2023 2061 6363 6f75  0,       # accou
-00044370: 6e74 2063 6f6d 6d69 7373 7369 6f6e 2074  nt commisssion t
-00044380: 6965 720a 2020 2020 2020 2020 2320 2020  ier.        #   
-00044390: 2020 2020 2020 2263 616e 5472 6164 6522        "canTrade"
-000443a0: 3a20 5472 7565 2c20 2020 2320 6966 2063  : True,   # if c
-000443b0: 616e 2074 7261 6465 0a20 2020 2020 2020  an trade.       
-000443c0: 2023 2020 2020 2020 2020 2022 6361 6e44   #         "canD
-000443d0: 6570 6f73 6974 223a 2054 7275 652c 2020  eposit": True,  
-000443e0: 2020 2023 2069 6620 6361 6e20 7472 616e     # if can tran
-000443f0: 7366 6572 2069 6e20 6173 7365 740a 2020  sfer in asset.  
-00044400: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00044410: 2263 616e 5769 7468 6472 6177 223a 2054  "canWithdraw": T
-00044420: 7275 652c 2020 2020 2320 6966 2063 616e  rue,    # if can
-00044430: 2074 7261 6e73 6665 7220 6f75 7420 6173   transfer out as
-00044440: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
-00044450: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
-00044460: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
-00044470: 2020 2020 2020 2020 2022 746f 7461 6c49           "totalI
-00044480: 6e69 7469 616c 4d61 7267 696e 223a 2022  nitialMargin": "
-00044490: 302e 3030 3030 3030 3030 222c 2020 2020  0.00000000",    
-000444a0: 2320 746f 7461 6c20 696e 6974 6961 6c20  # total initial 
-000444b0: 6d61 7267 696e 2072 6571 7569 7265 6420  margin required 
-000444c0: 7769 7468 2063 7572 7265 6e74 206d 6172  with current mar
-000444d0: 6b20 7072 6963 6528 7573 656c 6573 7320  k price(useless 
-000444e0: 7769 7468 2069 736f 6c61 7465 6420 706f  with isolated po
-000444f0: 7369 7469 6f6e 7329 2c20 6f6e 6c79 2066  sitions), only f
-00044500: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
-00044510: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00044520: 2274 6f74 616c 4d61 696e 744d 6172 6769  "totalMaintMargi
-00044530: 6e22 3a20 2230 2e30 3030 3030 3030 3022  n": "0.00000000"
-00044540: 2c20 2020 2020 2320 746f 7461 6c20 6d61  ,     # total ma
-00044550: 696e 7465 6e61 6e63 6520 6d61 7267 696e  intenance margin
-00044560: 2072 6571 7569 7265 642c 206f 6e6c 7920   required, only 
-00044570: 666f 7220 5553 4454 2061 7373 6574 0a20  for USDT asset. 
-00044580: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044590: 2022 746f 7461 6c57 616c 6c65 7442 616c   "totalWalletBal
-000445a0: 616e 6365 223a 2022 3233 2e37 3234 3639  ance": "23.72469
-000445b0: 3230 3622 2c20 2020 2020 2320 746f 7461  206",     # tota
-000445c0: 6c20 7761 6c6c 6574 2062 616c 616e 6365  l wallet balance
-000445d0: 2c20 6f6e 6c79 2066 6f72 2055 5344 5420  , only for USDT 
-000445e0: 6173 7365 740a 2020 2020 2020 2020 2320  asset.        # 
-000445f0: 2020 2020 2020 2020 2274 6f74 616c 556e          "totalUn
-00044600: 7265 616c 697a 6564 5072 6f66 6974 223a  realizedProfit":
-00044610: 2022 302e 3030 3030 3030 3030 222c 2020   "0.00000000",  
-00044620: 2023 2074 6f74 616c 2075 6e72 6561 6c69   # total unreali
-00044630: 7a65 6420 7072 6f66 6974 2c20 6f6e 6c79  zed profit, only
-00044640: 2066 6f72 2055 5344 5420 6173 7365 740a   for USDT asset.
-00044650: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00044660: 2020 2274 6f74 616c 4d61 7267 696e 4261    "totalMarginBa
-00044670: 6c61 6e63 6522 3a20 2232 332e 3732 3436  lance": "23.7246
-00044680: 3932 3036 222c 2020 2020 2023 2074 6f74  9206",     # tot
-00044690: 616c 206d 6172 6769 6e20 6261 6c61 6e63  al margin balanc
-000446a0: 652c 206f 6e6c 7920 666f 7220 5553 4454  e, only for USDT
-000446b0: 2061 7373 6574 0a20 2020 2020 2020 2023   asset.        #
-000446c0: 2020 2020 2020 2020 2022 746f 7461 6c50           "totalP
-000446d0: 6f73 6974 696f 6e49 6e69 7469 616c 4d61  ositionInitialMa
-000446e0: 7267 696e 223a 2022 302e 3030 3030 3030  rgin": "0.000000
-000446f0: 3030 222c 2020 2020 2320 696e 6974 6961  00",    # initia
-00044700: 6c20 6d61 7267 696e 2072 6571 7569 7265  l margin require
-00044710: 6420 666f 7220 706f 7369 7469 6f6e 7320  d for positions 
-00044720: 7769 7468 2063 7572 7265 6e74 206d 6172  with current mar
-00044730: 6b20 7072 6963 652c 206f 6e6c 7920 666f  k price, only fo
-00044740: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
-00044750: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00044760: 746f 7461 6c4f 7065 6e4f 7264 6572 496e  totalOpenOrderIn
-00044770: 6974 6961 6c4d 6172 6769 6e22 3a20 2230  itialMargin": "0
-00044780: 2e30 3030 3030 3030 3022 2c20 2020 2320  .00000000",   # 
-00044790: 696e 6974 6961 6c20 6d61 7267 696e 2072  initial margin r
-000447a0: 6571 7569 7265 6420 666f 7220 6f70 656e  equired for open
-000447b0: 206f 7264 6572 7320 7769 7468 2063 7572   orders with cur
-000447c0: 7265 6e74 206d 6172 6b20 7072 6963 652c  rent mark price,
-000447d0: 206f 6e6c 7920 666f 7220 5553 4454 2061   only for USDT a
-000447e0: 7373 6574 0a20 2020 2020 2020 2023 2020  sset.        #  
-000447f0: 2020 2020 2020 2022 746f 7461 6c43 726f         "totalCro
-00044800: 7373 5761 6c6c 6574 4261 6c61 6e63 6522  ssWalletBalance"
-00044810: 3a20 2232 332e 3732 3436 3932 3036 222c  : "23.72469206",
-00044820: 2020 2020 2020 2320 6372 6f73 7365 6420        # crossed 
-00044830: 7761 6c6c 6574 2062 616c 616e 6365 2c20  wallet balance, 
-00044840: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
-00044850: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
-00044860: 2020 2020 2020 2274 6f74 616c 4372 6f73        "totalCros
-00044870: 7355 6e50 6e6c 223a 2022 302e 3030 3030  sUnPnl": "0.0000
-00044880: 3030 3030 222c 2020 2020 2020 2320 756e  0000",      # un
-00044890: 7265 616c 697a 6564 2070 726f 6669 7420  realized profit 
-000448a0: 6f66 2063 726f 7373 6564 2070 6f73 6974  of crossed posit
-000448b0: 696f 6e73 2c20 6f6e 6c79 2066 6f72 2055  ions, only for U
-000448c0: 5344 5420 6173 7365 740a 2020 2020 2020  SDT asset.      
-000448d0: 2020 2320 2020 2020 2020 2020 2261 7661    #         "ava
-000448e0: 696c 6162 6c65 4261 6c61 6e63 6522 3a20  ilableBalance": 
-000448f0: 2232 332e 3732 3436 3932 3036 222c 2020  "23.72469206",  
-00044900: 2020 2020 2023 2061 7661 696c 6162 6c65       # available
-00044910: 2062 616c 616e 6365 2c20 6f6e 6c79 2066   balance, only f
-00044920: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
-00044930: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00044940: 226d 6178 5769 7468 6472 6177 416d 6f75  "maxWithdrawAmou
-00044950: 6e74 223a 2022 3233 2e37 3234 3639 3230  nt": "23.7246920
-00044960: 3622 2020 2020 2023 206d 6178 696d 756d  6"     # maximum
-00044970: 2061 6d6f 756e 7420 666f 7220 7472 616e   amount for tran
-00044980: 7366 6572 206f 7574 2c20 6f6e 6c79 2066  sfer out, only f
-00044990: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
-000449a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000449b0: 2e2e 2e0a 2020 2020 2020 2020 2320 2020  ....        #   
-000449c0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-000449d0: 2020 2020 2020 2320 6461 7069 202f 2064        # dapi / d
-000449e0: 656c 6976 6572 7920 2f20 696e 7665 7273  elivery / invers
-000449f0: 650a 2020 2020 2020 2020 230a 2020 2020  e.        #.    
-00044a00: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00044a10: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-00044a20: 616e 4465 706f 7369 7422 3a20 5472 7565  anDeposit": True
-00044a30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00044a40: 2020 2020 2263 616e 5472 6164 6522 3a20      "canTrade": 
-00044a50: 5472 7565 2c0a 2020 2020 2020 2020 2320  True,.        # 
-00044a60: 2020 2020 2020 2020 2263 616e 5769 7468          "canWith
-00044a70: 6472 6177 223a 2054 7275 652c 0a20 2020  draw": True,.   
-00044a80: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00044a90: 6665 6554 6965 7222 3a20 322c 0a20 2020  feeTier": 2,.   
-00044aa0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00044ab0: 7570 6461 7465 5469 6d65 223a 2030 0a20  updateTime": 0. 
-00044ac0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00044ad0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00044ae0: 2069 6620 6973 5370 6f74 4f72 4d61 7267   if isSpotOrMarg
-00044af0: 696e 3a0a 2020 2020 2020 2020 2020 2020  in:.            
-00044b00: 230a 2020 2020 2020 2020 2020 2020 2320  #.            # 
-00044b10: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
-00044b20: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
-00044b30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044b40: 2022 7379 6d62 6f6c 223a 2022 5a52 5842   "symbol": "ZRXB
-00044b50: 4e42 222c 0a20 2020 2020 2020 2020 2020  NB",.           
-00044b60: 2023 2020 2020 2020 2020 2022 6d61 6b65   #         "make
-00044b70: 7243 6f6d 6d69 7373 696f 6e22 3a20 2230  rCommission": "0
-00044b80: 2e30 3031 222c 0a20 2020 2020 2020 2020  .001",.         
-00044b90: 2020 2023 2020 2020 2020 2020 2022 7461     #         "ta
-00044ba0: 6b65 7243 6f6d 6d69 7373 696f 6e22 3a20  kerCommission": 
-00044bb0: 2230 2e30 3031 220a 2020 2020 2020 2020  "0.001".        
-00044bc0: 2020 2020 2320 2020 2020 2020 7d2c 0a20      #       },. 
-00044bd0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00044be0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00044bf0: 2023 2020 2020 2020 2020 2022 7379 6d62   #         "symb
-00044c00: 6f6c 223a 2022 5a52 5842 5443 222c 0a20  ol": "ZRXBTC",. 
-00044c10: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00044c20: 2020 2020 2022 6d61 6b65 7243 6f6d 6d69       "makerCommi
-00044c30: 7373 696f 6e22 3a20 2230 2e30 3031 222c  ssion": "0.001",
-00044c40: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00044c50: 2020 2020 2020 2022 7461 6b65 7243 6f6d         "takerCom
-00044c60: 6d69 7373 696f 6e22 3a20 2230 2e30 3031  mission": "0.001
-00044c70: 220a 2020 2020 2020 2020 2020 2020 2320  ".            # 
-00044c80: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00044c90: 2020 2020 2023 2020 2020 5d0a 2020 2020       #    ].    
-00044ca0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00044cb0: 2020 2020 2020 7265 7375 6c74 203d 207b        result = {
-00044cc0: 7d0a 2020 2020 2020 2020 2020 2020 666f  }.            fo
-00044cd0: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
-00044ce0: 6c65 6e28 7265 7370 6f6e 7365 2929 3a0a  len(response)):.
-00044cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044d00: 6665 6520 3d20 7365 6c66 2e70 6172 7365  fee = self.parse
-00044d10: 5f74 7261 6469 6e67 5f66 6565 2872 6573  _trading_fee(res
-00044d20: 706f 6e73 655b 695d 290a 2020 2020 2020  ponse[i]).      
-00044d30: 2020 2020 2020 2020 2020 7379 6d62 6f6c            symbol
-00044d40: 203d 2066 6565 5b27 7379 6d62 6f6c 275d   = fee['symbol']
-00044d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044d60: 2072 6573 756c 745b 7379 6d62 6f6c 5d20   result[symbol] 
-00044d70: 3d20 6665 650a 2020 2020 2020 2020 2020  = fee.          
-00044d80: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-00044d90: 2020 2020 2020 2020 656c 6966 2069 734c          elif isL
-00044da0: 696e 6561 723a 0a20 2020 2020 2020 2020  inear:.         
-00044db0: 2020 2023 0a20 2020 2020 2020 2020 2020     #.           
-00044dc0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-00044dd0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00044de0: 6665 6554 6965 7222 3a20 302c 2020 2020  feeTier": 0,    
-00044df0: 2020 2023 2061 6363 6f75 6e74 2063 6f6d     # account com
-00044e00: 6d69 7373 7369 6f6e 2074 6965 720a 2020  misssion tier.  
-00044e10: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00044e20: 2020 2020 2263 616e 5472 6164 6522 3a20      "canTrade": 
-00044e30: 5472 7565 2c20 2020 2320 6966 2063 616e  True,   # if can
-00044e40: 2074 7261 6465 0a20 2020 2020 2020 2020   trade.         
-00044e50: 2020 2023 2020 2020 2020 2020 2022 6361     #         "ca
-00044e60: 6e44 6570 6f73 6974 223a 2054 7275 652c  nDeposit": True,
-00044e70: 2020 2020 2023 2069 6620 6361 6e20 7472       # if can tr
-00044e80: 616e 7366 6572 2069 6e20 6173 7365 740a  ansfer in asset.
-00044e90: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00044ea0: 2020 2020 2020 2263 616e 5769 7468 6472        "canWithdr
-00044eb0: 6177 223a 2054 7275 652c 2020 2020 2320  aw": True,    # 
-00044ec0: 6966 2063 616e 2074 7261 6e73 6665 7220  if can transfer 
-00044ed0: 6f75 7420 6173 7365 740a 2020 2020 2020  out asset.      
-00044ee0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00044ef0: 2275 7064 6174 6554 696d 6522 3a20 302c  "updateTime": 0,
-00044f00: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00044f10: 2020 2020 2020 2022 746f 7461 6c49 6e69         "totalIni
-00044f20: 7469 616c 4d61 7267 696e 223a 2022 302e  tialMargin": "0.
-00044f30: 3030 3030 3030 3030 222c 2020 2020 2320  00000000",    # 
-00044f40: 746f 7461 6c20 696e 6974 6961 6c20 6d61  total initial ma
-00044f50: 7267 696e 2072 6571 7569 7265 6420 7769  rgin required wi
-00044f60: 7468 2063 7572 7265 6e74 206d 6172 6b20  th current mark 
-00044f70: 7072 6963 6528 7573 656c 6573 7320 7769  price(useless wi
-00044f80: 7468 2069 736f 6c61 7465 6420 706f 7369  th isolated posi
-00044f90: 7469 6f6e 7329 2c20 6f6e 6c79 2066 6f72  tions), only for
-00044fa0: 2055 5344 5420 6173 7365 740a 2020 2020   USDT asset.    
-00044fb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00044fc0: 2020 2274 6f74 616c 4d61 696e 744d 6172    "totalMaintMar
-00044fd0: 6769 6e22 3a20 2230 2e30 3030 3030 3030  gin": "0.0000000
-00044fe0: 3022 2c20 2020 2020 2320 746f 7461 6c20  0",     # total 
-00044ff0: 6d61 696e 7465 6e61 6e63 6520 6d61 7267  maintenance marg
-00045000: 696e 2072 6571 7569 7265 642c 206f 6e6c  in required, onl
-00045010: 7920 666f 7220 5553 4454 2061 7373 6574  y for USDT asset
-00045020: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00045030: 2020 2020 2020 2022 746f 7461 6c57 616c         "totalWal
-00045040: 6c65 7442 616c 616e 6365 223a 2022 3233  letBalance": "23
-00045050: 2e37 3234 3639 3230 3622 2c20 2020 2020  .72469206",     
-00045060: 2320 746f 7461 6c20 7761 6c6c 6574 2062  # total wallet b
-00045070: 616c 616e 6365 2c20 6f6e 6c79 2066 6f72  alance, only for
-00045080: 2055 5344 5420 6173 7365 740a 2020 2020   USDT asset.    
-00045090: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000450a0: 2020 2274 6f74 616c 556e 7265 616c 697a    "totalUnrealiz
-000450b0: 6564 5072 6f66 6974 223a 2022 302e 3030  edProfit": "0.00
-000450c0: 3030 3030 3030 222c 2020 2023 2074 6f74  000000",   # tot
-000450d0: 616c 2075 6e72 6561 6c69 7a65 6420 7072  al unrealized pr
-000450e0: 6f66 6974 2c20 6f6e 6c79 2066 6f72 2055  ofit, only for U
-000450f0: 5344 5420 6173 7365 740a 2020 2020 2020  SDT asset.      
-00045100: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00045110: 2274 6f74 616c 4d61 7267 696e 4261 6c61  "totalMarginBala
-00045120: 6e63 6522 3a20 2232 332e 3732 3436 3932  nce": "23.724692
-00045130: 3036 222c 2020 2020 2023 2074 6f74 616c  06",     # total
-00045140: 206d 6172 6769 6e20 6261 6c61 6e63 652c   margin balance,
-00045150: 206f 6e6c 7920 666f 7220 5553 4454 2061   only for USDT a
-00045160: 7373 6574 0a20 2020 2020 2020 2020 2020  sset.           
-00045170: 2023 2020 2020 2020 2020 2022 746f 7461   #         "tota
-00045180: 6c50 6f73 6974 696f 6e49 6e69 7469 616c  lPositionInitial
-00045190: 4d61 7267 696e 223a 2022 302e 3030 3030  Margin": "0.0000
-000451a0: 3030 3030 222c 2020 2020 2320 696e 6974  0000",    # init
-000451b0: 6961 6c20 6d61 7267 696e 2072 6571 7569  ial margin requi
-000451c0: 7265 6420 666f 7220 706f 7369 7469 6f6e  red for position
-000451d0: 7320 7769 7468 2063 7572 7265 6e74 206d  s with current m
-000451e0: 6172 6b20 7072 6963 652c 206f 6e6c 7920  ark price, only 
-000451f0: 666f 7220 5553 4454 2061 7373 6574 0a20  for USDT asset. 
-00045200: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00045210: 2020 2020 2022 746f 7461 6c4f 7065 6e4f       "totalOpenO
-00045220: 7264 6572 496e 6974 6961 6c4d 6172 6769  rderInitialMargi
-00045230: 6e22 3a20 2230 2e30 3030 3030 3030 3022  n": "0.00000000"
-00045240: 2c20 2020 2320 696e 6974 6961 6c20 6d61  ,   # initial ma
-00045250: 7267 696e 2072 6571 7569 7265 6420 666f  rgin required fo
-00045260: 7220 6f70 656e 206f 7264 6572 7320 7769  r open orders wi
-00045270: 7468 2063 7572 7265 6e74 206d 6172 6b20  th current mark 
-00045280: 7072 6963 652c 206f 6e6c 7920 666f 7220  price, only for 
-00045290: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
-000452a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000452b0: 2022 746f 7461 6c43 726f 7373 5761 6c6c   "totalCrossWall
-000452c0: 6574 4261 6c61 6e63 6522 3a20 2232 332e  etBalance": "23.
-000452d0: 3732 3436 3932 3036 222c 2020 2020 2020  72469206",      
-000452e0: 2320 6372 6f73 7365 6420 7761 6c6c 6574  # crossed wallet
-000452f0: 2062 616c 616e 6365 2c20 6f6e 6c79 2066   balance, only f
-00045300: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
-00045310: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00045320: 2020 2020 2274 6f74 616c 4372 6f73 7355      "totalCrossU
-00045330: 6e50 6e6c 223a 2022 302e 3030 3030 3030  nPnl": "0.000000
-00045340: 3030 222c 2020 2020 2020 2320 756e 7265  00",      # unre
-00045350: 616c 697a 6564 2070 726f 6669 7420 6f66  alized profit of
-00045360: 2063 726f 7373 6564 2070 6f73 6974 696f   crossed positio
-00045370: 6e73 2c20 6f6e 6c79 2066 6f72 2055 5344  ns, only for USD
-00045380: 5420 6173 7365 740a 2020 2020 2020 2020  T asset.        
-00045390: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
-000453a0: 7661 696c 6162 6c65 4261 6c61 6e63 6522  vailableBalance"
-000453b0: 3a20 2232 332e 3732 3436 3932 3036 222c  : "23.72469206",
-000453c0: 2020 2020 2020 2023 2061 7661 696c 6162         # availab
-000453d0: 6c65 2062 616c 616e 6365 2c20 6f6e 6c79  le balance, only
-000453e0: 2066 6f72 2055 5344 5420 6173 7365 740a   for USDT asset.
-000453f0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00045400: 2020 2020 2020 226d 6178 5769 7468 6472        "maxWithdr
-00045410: 6177 416d 6f75 6e74 223a 2022 3233 2e37  awAmount": "23.7
-00045420: 3234 3639 3230 3622 2020 2020 2023 206d  2469206"     # m
-00045430: 6178 696d 756d 2061 6d6f 756e 7420 666f  aximum amount fo
-00045440: 7220 7472 616e 7366 6572 206f 7574 2c20  r transfer out, 
-00045450: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
-00045460: 7365 740a 2020 2020 2020 2020 2020 2020  set.            
-00045470: 2320 2020 2020 2020 2020 2e2e 2e0a 2020  #         ....  
-00045480: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00045490: 7d0a 2020 2020 2020 2020 2020 2020 230a  }.            #.
-000454a0: 2020 2020 2020 2020 2020 2020 7379 6d62              symb
-000454b0: 6f6c 7320 3d20 6c69 7374 2873 656c 662e  ols = list(self.
-000454c0: 6d61 726b 6574 732e 6b65 7973 2829 290a  markets.keys()).
-000454d0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-000454e0: 6c74 203d 207b 7d0a 2020 2020 2020 2020  lt = {}.        
-000454f0: 2020 2020 6665 6554 6965 7220 3d20 7365      feeTier = se
-00045500: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
-00045510: 7265 7370 6f6e 7365 2c20 2766 6565 5469  response, 'feeTi
-00045520: 6572 2729 0a20 2020 2020 2020 2020 2020  er').           
-00045530: 2066 6565 5469 6572 7320 3d20 7365 6c66   feeTiers = self
-00045540: 2e66 6565 735b 276c 696e 6561 7227 5d5b  .fees['linear'][
-00045550: 2774 7261 6469 6e67 275d 5b27 7469 6572  'trading']['tier
-00045560: 7327 5d0a 2020 2020 2020 2020 2020 2020  s'].            
-00045570: 6d61 6b65 7220 3d20 6665 6554 6965 7273  maker = feeTiers
-00045580: 5b27 6d61 6b65 7227 5d5b 6665 6554 6965  ['maker'][feeTie
-00045590: 725d 5b31 5d0a 2020 2020 2020 2020 2020  r][1].          
-000455a0: 2020 7461 6b65 7220 3d20 6665 6554 6965    taker = feeTie
-000455b0: 7273 5b27 7461 6b65 7227 5d5b 6665 6554  rs['taker'][feeT
-000455c0: 6965 725d 5b31 5d0a 2020 2020 2020 2020  ier][1].        
-000455d0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-000455e0: 6765 2830 2c20 6c65 6e28 7379 6d62 6f6c  ge(0, len(symbol
-000455f0: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-00045600: 2020 2020 2073 796d 626f 6c20 3d20 7379       symbol = sy
-00045610: 6d62 6f6c 735b 695d 0a20 2020 2020 2020  mbols[i].       
-00045620: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
-00045630: 3d20 7365 6c66 2e6d 6172 6b65 7473 5b73  = self.markets[s
-00045640: 796d 626f 6c5d 0a20 2020 2020 2020 2020  ymbol].         
-00045650: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-00045660: 5b27 6c69 6e65 6172 275d 3a0a 2020 2020  ['linear']:.    
-00045670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045680: 7265 7375 6c74 5b73 796d 626f 6c5d 203d  result[symbol] =
-00045690: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-000456a0: 2020 2020 2020 2020 2020 2027 696e 666f             'info
-000456b0: 273a 207b 0a20 2020 2020 2020 2020 2020  ': {.           
-000456c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000456d0: 2027 6665 6554 6965 7227 3a20 6665 6554   'feeTier': feeT
-000456e0: 6965 722c 0a20 2020 2020 2020 2020 2020  ier,.           
-000456f0: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
-00045700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045710: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-00045720: 3a20 7379 6d62 6f6c 2c0a 2020 2020 2020  : symbol,.      
-00045730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045740: 2020 276d 616b 6572 273a 206d 616b 6572    'maker': maker
-00045750: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00045760: 2020 2020 2020 2020 2020 2774 616b 6572            'taker
-00045770: 273a 2074 616b 6572 2c0a 2020 2020 2020  ': taker,.      
-00045780: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-00045790: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000457a0: 726e 2072 6573 756c 740a 2020 2020 2020  rn result.      
-000457b0: 2020 656c 6966 2069 7349 6e76 6572 7365    elif isInverse
-000457c0: 3a0a 2020 2020 2020 2020 2020 2020 230a  :.            #.
-000457d0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-000457e0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-000457f0: 2320 2020 2020 2020 2020 2263 616e 4465  #         "canDe
-00045800: 706f 7369 7422 3a20 5472 7565 2c0a 2020  posit": True,.  
-00045810: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00045820: 2020 2020 2263 616e 5472 6164 6522 3a20      "canTrade": 
-00045830: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
-00045840: 2020 2320 2020 2020 2020 2020 2263 616e    #         "can
-00045850: 5769 7468 6472 6177 223a 2054 7275 652c  Withdraw": True,
-00045860: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00045870: 2020 2020 2020 2022 6665 6554 6965 7222         "feeTier"
-00045880: 3a20 322c 0a20 2020 2020 2020 2020 2020  : 2,.           
-00045890: 2023 2020 2020 2020 2020 2022 7570 6461   #         "upda
-000458a0: 7465 5469 6d65 223a 2030 0a20 2020 2020  teTime": 0.     
-000458b0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-000458c0: 2020 2020 2020 2020 2020 2023 0a20 2020             #.   
-000458d0: 2020 2020 2020 2020 2073 796d 626f 6c73           symbols
-000458e0: 203d 206c 6973 7428 7365 6c66 2e6d 6172   = list(self.mar
-000458f0: 6b65 7473 2e6b 6579 7328 2929 0a20 2020  kets.keys()).   
-00045900: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-00045910: 3d20 7b7d 0a20 2020 2020 2020 2020 2020  = {}.           
-00045920: 2066 6565 5469 6572 203d 2073 656c 662e   feeTier = self.
-00045930: 7361 6665 5f69 6e74 6567 6572 2872 6573  safe_integer(res
-00045940: 706f 6e73 652c 2027 6665 6554 6965 7227  ponse, 'feeTier'
-00045950: 290a 2020 2020 2020 2020 2020 2020 6665  ).            fe
-00045960: 6554 6965 7273 203d 2073 656c 662e 6665  eTiers = self.fe
-00045970: 6573 5b27 696e 7665 7273 6527 5d5b 2774  es['inverse']['t
-00045980: 7261 6469 6e67 275d 5b27 7469 6572 7327  rading']['tiers'
-00045990: 5d0a 2020 2020 2020 2020 2020 2020 6d61  ].            ma
-000459a0: 6b65 7220 3d20 6665 6554 6965 7273 5b27  ker = feeTiers['
-000459b0: 6d61 6b65 7227 5d5b 6665 6554 6965 725d  maker'][feeTier]
-000459c0: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
-000459d0: 7461 6b65 7220 3d20 6665 6554 6965 7273  taker = feeTiers
-000459e0: 5b27 7461 6b65 7227 5d5b 6665 6554 6965  ['taker'][feeTie
-000459f0: 725d 5b31 5d0a 2020 2020 2020 2020 2020  r][1].          
-00045a00: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-00045a10: 2830 2c20 6c65 6e28 7379 6d62 6f6c 7329  (0, len(symbols)
-00045a20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00045a30: 2020 2073 796d 626f 6c20 3d20 7379 6d62     symbol = symb
-00045a40: 6f6c 735b 695d 0a20 2020 2020 2020 2020  ols[i].         
-00045a50: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-00045a60: 7365 6c66 2e6d 6172 6b65 7473 5b73 796d  self.markets[sym
-00045a70: 626f 6c5d 0a20 2020 2020 2020 2020 2020  bol].           
-00045a80: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-00045a90: 696e 7665 7273 6527 5d3a 0a20 2020 2020  inverse']:.     
-00045aa0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00045ab0: 6573 756c 745b 7379 6d62 6f6c 5d20 3d20  esult[symbol] = 
-00045ac0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00045ad0: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
-00045ae0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-00045af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045b00: 2766 6565 5469 6572 273a 2066 6565 5469  'feeTier': feeTi
-00045b10: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-00045b20: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-00045b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045b40: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-00045b50: 2073 796d 626f 6c2c 0a20 2020 2020 2020   symbol,.       
-00045b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045b70: 2027 6d61 6b65 7227 3a20 6d61 6b65 722c   'maker': maker,
-00045b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045b90: 2020 2020 2020 2020 2027 7461 6b65 7227           'taker'
-00045ba0: 3a20 7461 6b65 722c 0a20 2020 2020 2020  : taker,.       
-00045bb0: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-00045bc0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00045bd0: 6e20 7265 7375 6c74 0a20 2020 2020 2020  n result.       
-00045be0: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
-00045bf0: 2020 6465 6620 6675 7475 7265 735f 7472    def futures_tr
-00045c00: 616e 7366 6572 2873 656c 662c 2063 6f64  ansfer(self, cod
-00045c10: 653a 2073 7472 2c20 616d 6f75 6e74 2c20  e: str, amount, 
-00045c20: 7479 7065 2c20 7061 7261 6d73 3d7b 7d29  type, params={})
-00045c30: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00045c40: 2020 2020 2020 7472 616e 7366 6572 2062        transfer b
-00045c50: 6574 7765 656e 2066 7574 7572 6573 2061  etween futures a
-00045c60: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
-00045c70: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
-00045c80: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
-00045c90: 2063 6f64 650a 2020 2020 2020 2020 3a70   code.        :p
-00045ca0: 6172 616d 2066 6c6f 6174 2061 6d6f 756e  aram float amoun
-00045cb0: 743a 2074 6865 2061 6d6f 756e 7420 746f  t: the amount to
-00045cc0: 2074 7261 6e73 6665 720a 2020 2020 2020   transfer.      
-00045cd0: 2020 3a70 6172 616d 2073 7472 2074 7970    :param str typ
-00045ce0: 653a 2031 202d 2074 7261 6e73 6665 7220  e: 1 - transfer 
-00045cf0: 6672 6f6d 2073 706f 7420 6163 636f 756e  from spot accoun
-00045d00: 7420 746f 2055 5344 542d e293 8220 6675  t to USDT-... fu
-00045d10: 7475 7265 7320 6163 636f 756e 742c 2032  tures account, 2
-00045d20: 202d 2074 7261 6e73 6665 7220 6672 6f6d   - transfer from
-00045d30: 2055 5344 542d e293 8220 6675 7475 7265   USDT-... future
-00045d40: 7320 6163 636f 756e 7420 746f 2073 706f  s account to spo
-00045d50: 7420 6163 636f 756e 742c 2033 202d 2074  t account, 3 - t
-00045d60: 7261 6e73 6665 7220 6672 6f6d 2073 706f  ransfer from spo
-00045d70: 7420 6163 636f 756e 7420 746f 2043 4f49  t account to COI
-00045d80: 4e2d e293 8220 6675 7475 7265 7320 6163  N-... futures ac
-00045d90: 636f 756e 742c 2034 202d 2074 7261 6e73  count, 4 - trans
-00045da0: 6665 7220 6672 6f6d 2043 4f49 4e2d e293  fer from COIN-..
-00045db0: 8220 6675 7475 7265 7320 6163 636f 756e  . futures accoun
-00045dc0: 7420 746f 2073 706f 7420 6163 636f 756e  t to spot accoun
-00045dd0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
-00045de0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-00045df0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00045e00: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-00045e10: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
-00045e20: 696e 740a 2020 2020 2020 2020 3a70 6172  int.        :par
-00045e30: 616d 2066 6c6f 6174 7c4e 6f6e 6520 7061  am float|None pa
-00045e40: 7261 6d73 2e72 6563 7657 696e 646f 773a  rams.recvWindow:
-00045e50: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00045e60: 7320 6469 6374 3a20 6120 6074 7261 6e73  s dict: a `trans
-00045e70: 6665 7220 7374 7275 6374 7572 6520 3c68  fer structure <h
-00045e80: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-00045e90: 2e63 6f6d 2f23 2f3f 6964 3d66 7574 7572  .com/#/?id=futur
-00045ea0: 6573 2d74 7261 6e73 6665 722d 7374 7275  es-transfer-stru
-00045eb0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00045ec0: 2222 220a 2020 2020 2020 2020 6966 2028  """.        if (
-00045ed0: 7479 7065 203c 2031 2920 6f72 2028 7479  type < 1) or (ty
-00045ee0: 7065 203e 2034 293a 0a20 2020 2020 2020  pe > 4):.       
-00045ef0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
-00045f00: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
-00045f10: 662e 6964 202b 2027 2074 7970 6520 6d75  f.id + ' type mu
-00045f20: 7374 2062 6520 6265 7477 6565 6e20 3120  st be between 1 
-00045f30: 616e 6420 3427 290a 2020 2020 2020 2020  and 4').        
-00045f40: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00045f50: 7328 290a 2020 2020 2020 2020 6375 7272  s().        curr
-00045f60: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-00045f70: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-00045f80: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00045f90: 2020 2020 2020 2020 2020 2027 6173 7365             'asse
-00045fa0: 7427 3a20 6375 7272 656e 6379 5b27 6964  t': currency['id
-00045fb0: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
-00045fc0: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
-00045fd0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-00045fe0: 7970 6527 3a20 7479 7065 2c0a 2020 2020  ype': type,.    
-00045ff0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-00046000: 7370 6f6e 7365 203d 2073 656c 662e 7361  sponse = self.sa
-00046010: 7069 506f 7374 4675 7475 7265 7354 7261  piPostFuturesTra
-00046020: 6e73 6665 7228 7365 6c66 2e65 7874 656e  nsfer(self.exten
-00046030: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-00046040: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-00046050: 2020 2020 2020 2320 2020 7b0a 2020 2020        #   {.    
-00046060: 2020 2020 2320 2020 2020 2020 2274 7261      #       "tra
-00046070: 6e49 6422 3a20 3130 3030 3030 3030 310a  nId": 100000001.
-00046080: 2020 2020 2020 2020 2320 2020 7d0a 2020          #   }.  
-00046090: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000460a0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-000460b0: 655f 7472 616e 7366 6572 2872 6573 706f  e_transfer(respo
-000460c0: 6e73 652c 2063 7572 7265 6e63 7929 0a0a  nse, currency)..
-000460d0: 2020 2020 6465 6620 6665 7463 685f 6675      def fetch_fu
-000460e0: 6e64 696e 675f 7261 7465 2873 656c 662c  nding_rate(self,
-000460f0: 2073 796d 626f 6c3a 2073 7472 2c20 7061   symbol: str, pa
-00046100: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00046110: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-00046120: 7463 6820 7468 6520 6375 7272 656e 7420  tch the current 
-00046130: 6675 6e64 696e 6720 7261 7465 0a20 2020  funding rate.   
-00046140: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
-00046150: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
-00046160: 6d61 726b 6574 2073 796d 626f 6c0a 2020  market symbol.  
-00046170: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-00046180: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
-00046190: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-000461a0: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
-000461b0: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
-000461c0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-000461d0: 2064 6963 743a 2061 2060 6675 6e64 696e   dict: a `fundin
-000461e0: 6720 7261 7465 2073 7472 7563 7475 7265  g rate structure
-000461f0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00046200: 6378 742e 636f 6d2f 232f 3f69 643d 6675  cxt.com/#/?id=fu
-00046210: 6e64 696e 672d 7261 7465 2d73 7472 7563  nding-rate-struc
-00046220: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-00046230: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
-00046240: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-00046250: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-00046260: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-00046270: 6f6c 290a 2020 2020 2020 2020 7265 7175  ol).        requ
-00046280: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00046290: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
-000462a0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
-000462b0: 2020 2020 7d0a 2020 2020 2020 2020 6d65      }.        me
-000462c0: 7468 6f64 203d 204e 6f6e 650a 2020 2020  thod = None.    
-000462d0: 2020 2020 6966 206d 6172 6b65 745b 276c      if market['l
-000462e0: 696e 6561 7227 5d3a 0a20 2020 2020 2020  inear']:.       
-000462f0: 2020 2020 206d 6574 686f 6420 3d20 2766       method = 'f
-00046300: 6170 6950 7562 6c69 6347 6574 5072 656d  apiPublicGetPrem
-00046310: 6975 6d49 6e64 6578 270a 2020 2020 2020  iumIndex'.      
-00046320: 2020 656c 6966 206d 6172 6b65 745b 2769    elif market['i
-00046330: 6e76 6572 7365 275d 3a0a 2020 2020 2020  nverse']:.      
-00046340: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-00046350: 6461 7069 5075 626c 6963 4765 7450 7265  dapiPublicGetPre
-00046360: 6d69 756d 496e 6465 7827 0a20 2020 2020  miumIndex'.     
-00046370: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00046380: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-00046390: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-000463a0: 2b20 2720 6665 7463 6846 756e 6469 6e67  + ' fetchFunding
-000463b0: 5261 7465 2829 2073 7570 706f 7274 7320  Rate() supports 
-000463c0: 6c69 6e65 6172 2061 6e64 2069 6e76 6572  linear and inver
-000463d0: 7365 2063 6f6e 7472 6163 7473 206f 6e6c  se contracts onl
-000463e0: 7927 290a 2020 2020 2020 2020 7265 7370  y').        resp
-000463f0: 6f6e 7365 203d 2067 6574 6174 7472 2873  onse = getattr(s
-00046400: 656c 662c 206d 6574 686f 6429 2873 656c  elf, method)(sel
-00046410: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-00046420: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-00046430: 2020 2069 6620 6d61 726b 6574 5b27 696e     if market['in
-00046440: 7665 7273 6527 5d3a 0a20 2020 2020 2020  verse']:.       
-00046450: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00046460: 7265 7370 6f6e 7365 5b30 5d0a 2020 2020  response[0].    
-00046470: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00046480: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00046490: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-000464a0: 3a20 2242 5443 5553 4454 222c 0a20 2020  : "BTCUSDT",.   
-000464b0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000464c0: 6d61 726b 5072 6963 6522 3a20 2234 3538  markPrice": "458
-000464d0: 3032 2e38 3131 3239 3839 3222 2c0a 2020  02.81129892",.  
-000464e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000464f0: 2269 6e64 6578 5072 6963 6522 3a20 2234  "indexPrice": "4
-00046500: 3537 3435 2e34 3737 3031 3931 3522 2c0a  5745.47701915",.
-00046510: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046520: 2020 2265 7374 696d 6174 6564 5365 7474    "estimatedSett
-00046530: 6c65 5072 6963 6522 3a20 2234 3531 3333  lePrice": "45133
-00046540: 2e39 3137 3533 3637 3122 2c0a 2020 2020  .91753671",.    
-00046550: 2020 2020 2320 2020 2020 2020 2020 226c      #         "l
-00046560: 6173 7446 756e 6469 6e67 5261 7465 223a  astFundingRate":
-00046570: 2022 302e 3030 3036 3335 3231 222c 0a20   "0.00063521",. 
-00046580: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00046590: 2022 696e 7465 7265 7374 5261 7465 223a   "interestRate":
-000465a0: 2022 302e 3030 3031 3030 3030 222c 0a20   "0.00010000",. 
-000465b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000465c0: 2022 6e65 7874 4675 6e64 696e 6754 696d   "nextFundingTim
-000465d0: 6522 3a20 2231 3632 3132 3637 3230 3030  e": "16212672000
-000465e0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-000465f0: 2020 2020 2020 2022 7469 6d65 223a 2022         "time": "
-00046600: 3136 3231 3235 3233 3434 3030 3122 0a20  1621252344001". 
-00046610: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00046620: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00046630: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-00046640: 7365 5f66 756e 6469 6e67 5f72 6174 6528  se_funding_rate(
-00046650: 7265 7370 6f6e 7365 2c20 6d61 726b 6574  response, market
-00046660: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
-00046670: 5f66 756e 6469 6e67 5f72 6174 655f 6869  _funding_rate_hi
-00046680: 7374 6f72 7928 7365 6c66 2c20 7379 6d62  story(self, symb
-00046690: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-000466a0: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-000466b0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-000466c0: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-000466d0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-000466e0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-000466f0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00046700: 2020 2020 6665 7463 6865 7320 6869 7374      fetches hist
-00046710: 6f72 6963 616c 2066 756e 6469 6e67 2072  orical funding r
-00046720: 6174 6520 7072 6963 6573 0a20 2020 2020  ate prices.     
-00046730: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-00046740: 6e65 2073 796d 626f 6c3a 2075 6e69 6669  ne symbol: unifi
-00046750: 6564 2073 796d 626f 6c20 6f66 2074 6865  ed symbol of the
-00046760: 206d 6172 6b65 7420 746f 2066 6574 6368   market to fetch
-00046770: 2074 6865 2066 756e 6469 6e67 2072 6174   the funding rat
-00046780: 6520 6869 7374 6f72 7920 666f 720a 2020  e history for.  
-00046790: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-000467a0: 7c4e 6f6e 6520 7369 6e63 653a 2074 696d  |None since: tim
-000467b0: 6573 7461 6d70 2069 6e20 6d73 206f 6620  estamp in ms of 
-000467c0: 7468 6520 6561 726c 6965 7374 2066 756e  the earliest fun
-000467d0: 6469 6e67 2072 6174 6520 746f 2066 6574  ding rate to fet
-000467e0: 6368 0a20 2020 2020 2020 203a 7061 7261  ch.        :para
-000467f0: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-00046800: 3a20 7468 6520 6d61 7869 6d75 6d20 616d  : the maximum am
-00046810: 6f75 6e74 206f 6620 6066 756e 6469 6e67  ount of `funding
-00046820: 2072 6174 6520 7374 7275 6374 7572 6573   rate structures
-00046830: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00046840: 6378 742e 636f 6d2f 656e 2f6c 6174 6573  cxt.com/en/lates
-00046850: 742f 6d61 6e75 616c 2e68 746d 6c3f 2366  t/manual.html?#f
-00046860: 756e 6469 6e67 2d72 6174 652d 6869 7374  unding-rate-hist
-00046870: 6f72 792d 7374 7275 6374 7572 653e 6020  ory-structure>` 
-00046880: 746f 2066 6574 6368 0a20 2020 2020 2020  to fetch.       
-00046890: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-000468a0: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-000468b0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-000468c0: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
-000468d0: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-000468e0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-000468f0: 6e65 2070 6172 616d 735b 2775 6e74 696c  ne params['until
-00046900: 275d 3a20 7469 6d65 7374 616d 7020 696e  ']: timestamp in
-00046910: 206d 7320 6f66 2074 6865 206c 6174 6573   ms of the lates
-00046920: 7420 6675 6e64 696e 6720 7261 7465 0a20  t funding rate. 
-00046930: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00046940: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
-00046950: 6620 6066 756e 6469 6e67 2072 6174 6520  f `funding rate 
-00046960: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
-00046970: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-00046980: 6d2f 656e 2f6c 6174 6573 742f 6d61 6e75  m/en/latest/manu
-00046990: 616c 2e68 746d 6c3f 2366 756e 6469 6e67  al.html?#funding
-000469a0: 2d72 6174 652d 6869 7374 6f72 792d 7374  -rate-history-st
-000469b0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-000469c0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-000469d0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-000469e0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-000469f0: 7420 3d20 7b7d 0a20 2020 2020 2020 206d  t = {}.        m
-00046a00: 6574 686f 6420 3d20 4e6f 6e65 0a20 2020  ethod = None.   
-00046a10: 2020 2020 2064 6566 6175 6c74 5479 7065       defaultType
-00046a20: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00046a30: 696e 675f 3228 7365 6c66 2e6f 7074 696f  ing_2(self.optio
-00046a40: 6e73 2c20 2766 6574 6368 4675 6e64 696e  ns, 'fetchFundin
-00046a50: 6752 6174 6548 6973 746f 7279 272c 2027  gRateHistory', '
-00046a60: 6465 6661 756c 7454 7970 6527 2c20 2766  defaultType', 'f
-00046a70: 7574 7572 6527 290a 2020 2020 2020 2020  uture').        
-00046a80: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
-00046a90: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
-00046aa0: 2774 7970 6527 2c20 6465 6661 756c 7454  'type', defaultT
-00046ab0: 7970 6529 0a20 2020 2020 2020 206d 6172  ype).        mar
-00046ac0: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
-00046ad0: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
-00046ae0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00046af0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00046b00: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00046b10: 6c29 0a20 2020 2020 2020 2020 2020 2073  l).            s
-00046b20: 796d 626f 6c20 3d20 6d61 726b 6574 5b27  ymbol = market['
-00046b30: 7379 6d62 6f6c 275d 0a20 2020 2020 2020  symbol'].       
-00046b40: 2020 2020 2072 6571 7565 7374 5b27 7379       request['sy
-00046b50: 6d62 6f6c 275d 203d 206d 6172 6b65 745b  mbol'] = market[
-00046b60: 2769 6427 5d0a 2020 2020 2020 2020 7375  'id'].        su
-00046b70: 6254 7970 6520 3d20 4e6f 6e65 0a20 2020  bType = None.   
-00046b80: 2020 2020 2073 7562 5479 7065 2c20 7061       subType, pa
-00046b90: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
-00046ba0: 6c65 5f73 7562 5f74 7970 655f 616e 645f  le_sub_type_and_
-00046bb0: 7061 7261 6d73 2827 6665 7463 6846 756e  params('fetchFun
-00046bc0: 6469 6e67 5261 7465 4869 7374 6f72 7927  dingRateHistory'
-00046bd0: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
-00046be0: 2c20 276c 696e 6561 7227 290a 2020 2020  , 'linear').    
-00046bf0: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-00046c00: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
-00046c10: 7479 7065 2729 0a20 2020 2020 2020 2069  type').        i
-00046c20: 6620 7365 6c66 2e69 735f 6c69 6e65 6172  f self.is_linear
-00046c30: 2874 7970 652c 2073 7562 5479 7065 293a  (type, subType):
-00046c40: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00046c50: 686f 6420 3d20 2766 6170 6950 7562 6c69  hod = 'fapiPubli
-00046c60: 6347 6574 4675 6e64 696e 6752 6174 6527  cGetFundingRate'
-00046c70: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
-00046c80: 6c66 2e69 735f 696e 7665 7273 6528 7479  lf.is_inverse(ty
-00046c90: 7065 2c20 7375 6254 7970 6529 3a0a 2020  pe, subType):.  
-00046ca0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00046cb0: 203d 2027 6461 7069 5075 626c 6963 4765   = 'dapiPublicGe
-00046cc0: 7446 756e 6469 6e67 5261 7465 270a 2020  tFundingRate'.  
-00046cd0: 2020 2020 2020 6966 206d 6574 686f 6420        if method 
-00046ce0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00046cf0: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-00046d00: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-00046d10: 2b20 2720 6665 7463 6846 756e 6469 6e67  + ' fetchFunding
-00046d20: 5261 7465 4869 7374 6f72 7928 2920 6973  RateHistory() is
-00046d30: 206e 6f74 2073 7570 706f 7274 6564 2066   not supported f
-00046d40: 6f72 2027 202b 2074 7970 6520 2b20 2720  or ' + type + ' 
-00046d50: 6d61 726b 6574 7327 290a 2020 2020 2020  markets').      
-00046d60: 2020 6966 2073 696e 6365 2069 7320 6e6f    if since is no
-00046d70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00046d80: 2020 2020 7265 7175 6573 745b 2773 7461      request['sta
-00046d90: 7274 5469 6d65 275d 203d 2073 696e 6365  rtTime'] = since
-00046da0: 0a20 2020 2020 2020 2075 6e74 696c 203d  .        until =
-00046db0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-00046dc0: 6572 5f32 2870 6172 616d 732c 2027 756e  er_2(params, 'un
-00046dd0: 7469 6c27 2c20 2774 696c 6c27 2920 2023  til', 'till')  #
-00046de0: 2075 6e69 6669 6564 2069 6e20 6d69 6c6c   unified in mill
-00046df0: 6973 6563 6f6e 6473 0a20 2020 2020 2020  iseconds.       
-00046e00: 2065 6e64 5469 6d65 203d 2073 656c 662e   endTime = self.
-00046e10: 7361 6665 5f69 6e74 6567 6572 2870 6172  safe_integer(par
-00046e20: 616d 732c 2027 656e 6454 696d 6527 2c20  ams, 'endTime', 
-00046e30: 756e 7469 6c29 2020 2320 6578 6368 616e  until)  # exchan
-00046e40: 6765 2d73 7065 6369 6669 6320 696e 206d  ge-specific in m
-00046e50: 696c 6c69 7365 636f 6e64 730a 2020 2020  illiseconds.    
-00046e60: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-00046e70: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-00046e80: 2765 6e64 5469 6d65 272c 2027 7469 6c6c  'endTime', 'till
-00046e90: 272c 2027 756e 7469 6c27 5d29 0a20 2020  ', 'until']).   
-00046ea0: 2020 2020 2069 6620 656e 6454 696d 6520       if endTime 
-00046eb0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00046ec0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00046ed0: 5b27 656e 6454 696d 6527 5d20 3d20 656e  ['endTime'] = en
-00046ee0: 6454 696d 650a 2020 2020 2020 2020 6966  dTime.        if
-00046ef0: 206c 696d 6974 2069 7320 6e6f 7420 4e6f   limit is not No
-00046f00: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00046f10: 7265 7175 6573 745b 276c 696d 6974 275d  request['limit']
-00046f20: 203d 206c 696d 6974 0a20 2020 2020 2020   = limit.       
-00046f30: 2072 6573 706f 6e73 6520 3d20 6765 7461   response = geta
-00046f40: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
-00046f50: 2928 7365 6c66 2e65 7874 656e 6428 7265  )(self.extend(re
-00046f60: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-00046f70: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00046f80: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-00046f90: 2020 2320 2020 2020 2020 2020 2273 796d    #         "sym
-00046fa0: 626f 6c22 3a20 2242 5443 5553 4454 222c  bol": "BTCUSDT",
-00046fb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00046fc0: 2020 2022 6675 6e64 696e 6752 6174 6522     "fundingRate"
-00046fd0: 3a20 2230 2e30 3030 3633 3532 3122 2c0a  : "0.00063521",.
-00046fe0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046ff0: 2020 2266 756e 6469 6e67 5469 6d65 223a    "fundingTime":
-00047000: 2022 3136 3231 3236 3732 3030 3030 3022   "1621267200000"
-00047010: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00047020: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00047030: 2020 2020 7261 7465 7320 3d20 5b5d 0a20      rates = []. 
-00047040: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00047050: 7261 6e67 6528 302c 206c 656e 2872 6573  range(0, len(res
-00047060: 706f 6e73 6529 293a 0a20 2020 2020 2020  ponse)):.       
-00047070: 2020 2020 2065 6e74 7279 203d 2072 6573       entry = res
-00047080: 706f 6e73 655b 695d 0a20 2020 2020 2020  ponse[i].       
-00047090: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
-000470a0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-000470b0: 6572 2865 6e74 7279 2c20 2766 756e 6469  er(entry, 'fundi
-000470c0: 6e67 5469 6d65 2729 0a20 2020 2020 2020  ngTime').       
-000470d0: 2020 2020 2072 6174 6573 2e61 7070 656e       rates.appen
-000470e0: 6428 7b0a 2020 2020 2020 2020 2020 2020  d({.            
-000470f0: 2020 2020 2769 6e66 6f27 3a20 656e 7472      'info': entr
-00047100: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
-00047110: 2020 2027 7379 6d62 6f6c 273a 2073 656c     'symbol': sel
-00047120: 662e 7361 6665 5f73 796d 626f 6c28 7365  f.safe_symbol(se
-00047130: 6c66 2e73 6166 655f 7374 7269 6e67 2865  lf.safe_string(e
-00047140: 6e74 7279 2c20 2773 796d 626f 6c27 292c  ntry, 'symbol'),
-00047150: 204e 6f6e 652c 204e 6f6e 652c 2027 7377   None, None, 'sw
-00047160: 6170 2729 2c0a 2020 2020 2020 2020 2020  ap'),.          
-00047170: 2020 2020 2020 2766 756e 6469 6e67 5261        'fundingRa
-00047180: 7465 273a 2073 656c 662e 7361 6665 5f6e  te': self.safe_n
-00047190: 756d 6265 7228 656e 7472 792c 2027 6675  umber(entry, 'fu
-000471a0: 6e64 696e 6752 6174 6527 292c 0a20 2020  ndingRate'),.   
-000471b0: 2020 2020 2020 2020 2020 2020 2027 7469               'ti
-000471c0: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
-000471d0: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
-000471e0: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-000471f0: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-00047200: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-00047210: 2020 2020 2020 7d29 0a20 2020 2020 2020        }).       
-00047220: 2073 6f72 7465 6420 3d20 7365 6c66 2e73   sorted = self.s
-00047230: 6f72 745f 6279 2872 6174 6573 2c20 2774  ort_by(rates, 't
-00047240: 696d 6573 7461 6d70 2729 0a20 2020 2020  imestamp').     
-00047250: 2020 2072 6574 7572 6e20 7365 6c66 2e66     return self.f
-00047260: 696c 7465 725f 6279 5f73 796d 626f 6c5f  ilter_by_symbol_
-00047270: 7369 6e63 655f 6c69 6d69 7428 736f 7274  since_limit(sort
-00047280: 6564 2c20 7379 6d62 6f6c 2c20 7369 6e63  ed, symbol, sinc
-00047290: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
-000472a0: 6566 2066 6574 6368 5f66 756e 6469 6e67  ef fetch_funding
-000472b0: 5f72 6174 6573 2873 656c 662c 2073 796d  _rates(self, sym
-000472c0: 626f 6c73 3a20 4f70 7469 6f6e 616c 5b4c  bols: Optional[L
-000472d0: 6973 745b 7374 725d 5d20 3d20 4e6f 6e65  ist[str]] = None
-000472e0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-000472f0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00047300: 2020 6665 7463 6820 7468 6520 6675 6e64    fetch the fund
-00047310: 696e 6720 7261 7465 2066 6f72 206d 756c  ing rate for mul
-00047320: 7469 706c 6520 6d61 726b 6574 730a 2020  tiple markets.  
-00047330: 2020 2020 2020 3a70 6172 616d 205b 7374        :param [st
-00047340: 725d 7c4e 6f6e 6520 7379 6d62 6f6c 733a  r]|None symbols:
-00047350: 206c 6973 7420 6f66 2075 6e69 6669 6564   list of unified
-00047360: 206d 6172 6b65 7420 7379 6d62 6f6c 730a   market symbols.
-00047370: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-00047380: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-00047390: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-000473a0: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
-000473b0: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
-000473c0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-000473d0: 6e73 2064 6963 743a 2061 2064 6963 7469  ns dict: a dicti
-000473e0: 6f6e 6172 7920 6f66 2060 6675 6e64 696e  onary of `fundin
-000473f0: 6720 7261 7465 7320 7374 7275 6374 7572  g rates structur
-00047400: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
-00047410: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-00047420: 6675 6e64 696e 672d 7261 7465 732d 7374  funding-rates-st
-00047430: 7275 6374 7572 653e 602c 2069 6e64 6578  ructure>`, index
-00047440: 6520 6279 206d 6172 6b65 7420 7379 6d62  e by market symb
-00047450: 6f6c 730a 2020 2020 2020 2020 2222 220a  ols.        """.
-00047460: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-00047470: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-00047480: 2020 2020 7379 6d62 6f6c 7320 3d20 7365      symbols = se
-00047490: 6c66 2e6d 6172 6b65 745f 7379 6d62 6f6c  lf.market_symbol
-000474a0: 7328 7379 6d62 6f6c 7329 0a20 2020 2020  s(symbols).     
-000474b0: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
-000474c0: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
-000474d0: 5479 7065 203d 2073 656c 662e 7361 6665  Type = self.safe
-000474e0: 5f73 7472 696e 675f 3228 7365 6c66 2e6f  _string_2(self.o
-000474f0: 7074 696f 6e73 2c20 2766 6574 6368 4675  ptions, 'fetchFu
-00047500: 6e64 696e 6752 6174 6573 272c 2027 6465  ndingRates', 'de
-00047510: 6661 756c 7454 7970 6527 2c20 2766 7574  faultType', 'fut
-00047520: 7572 6527 290a 2020 2020 2020 2020 7479  ure').        ty
-00047530: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
-00047540: 7472 696e 6728 7061 7261 6d73 2c20 2774  tring(params, 't
-00047550: 7970 6527 2c20 6465 6661 756c 7454 7970  ype', defaultTyp
-00047560: 6529 0a20 2020 2020 2020 2073 7562 5479  e).        subTy
-00047570: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-00047580: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
-00047590: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-000475a0: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
-000475b0: 616d 7328 2766 6574 6368 4675 6e64 696e  ams('fetchFundin
-000475c0: 6752 6174 6573 272c 204e 6f6e 652c 2070  gRates', None, p
-000475d0: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
-000475e0: 0a20 2020 2020 2020 2071 7565 7279 203d  .        query =
-000475f0: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
-00047600: 732c 2027 7479 7065 2729 0a20 2020 2020  s, 'type').     
-00047610: 2020 2069 6620 7365 6c66 2e69 735f 6c69     if self.is_li
-00047620: 6e65 6172 2874 7970 652c 2073 7562 5479  near(type, subTy
-00047630: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
-00047640: 206d 6574 686f 6420 3d20 2766 6170 6950   method = 'fapiP
-00047650: 7562 6c69 6347 6574 5072 656d 6975 6d49  ublicGetPremiumI
-00047660: 6e64 6578 270a 2020 2020 2020 2020 656c  ndex'.        el
-00047670: 6966 2073 656c 662e 6973 5f69 6e76 6572  if self.is_inver
-00047680: 7365 2874 7970 652c 2073 7562 5479 7065  se(type, subType
-00047690: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
-000476a0: 6574 686f 6420 3d20 2764 6170 6950 7562  ethod = 'dapiPub
-000476b0: 6c69 6347 6574 5072 656d 6975 6d49 6e64  licGetPremiumInd
-000476c0: 6578 270a 2020 2020 2020 2020 656c 7365  ex'.        else
-000476d0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-000476e0: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
-000476f0: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
-00047700: 6368 4675 6e64 696e 6752 6174 6573 2829  chFundingRates()
-00047710: 2073 7570 706f 7274 7320 6c69 6e65 6172   supports linear
-00047720: 2061 6e64 2069 6e76 6572 7365 2063 6f6e   and inverse con
-00047730: 7472 6163 7473 206f 6e6c 7927 290a 2020  tracts only').  
-00047740: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00047750: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
-00047760: 6574 686f 6429 2871 7565 7279 290a 2020  ethod)(query).  
-00047770: 2020 2020 2020 7265 7375 6c74 203d 205b        result = [
-00047780: 5d0a 2020 2020 2020 2020 666f 7220 6920  ].        for i 
-00047790: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-000477a0: 7265 7370 6f6e 7365 2929 3a0a 2020 2020  response)):.    
-000477b0: 2020 2020 2020 2020 656e 7472 7920 3d20          entry = 
-000477c0: 7265 7370 6f6e 7365 5b69 5d0a 2020 2020  response[i].    
-000477d0: 2020 2020 2020 2020 7061 7273 6564 203d          parsed =
-000477e0: 2073 656c 662e 7061 7273 655f 6675 6e64   self.parse_fund
-000477f0: 696e 675f 7261 7465 2865 6e74 7279 290a  ing_rate(entry).
-00047800: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00047810: 6c74 2e61 7070 656e 6428 7061 7273 6564  lt.append(parsed
-00047820: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00047830: 2073 656c 662e 6669 6c74 6572 5f62 795f   self.filter_by_
-00047840: 6172 7261 7928 7265 7375 6c74 2c20 2773  array(result, 's
-00047850: 796d 626f 6c27 2c20 7379 6d62 6f6c 7329  ymbol', symbols)
-00047860: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-00047870: 6675 6e64 696e 675f 7261 7465 2873 656c  funding_rate(sel
-00047880: 662c 2063 6f6e 7472 6163 742c 206d 6172  f, contract, mar
-00047890: 6b65 743d 4e6f 6e65 293a 0a20 2020 2020  ket=None):.     
-000478a0: 2020 2023 2065 6e73 7572 6520 6974 206d     # ensure it m
-000478b0: 6174 6368 6573 2077 6974 6820 6874 7470  atches with http
-000478c0: 733a 2f2f 7777 772e 6269 6e61 6e63 652e  s://www.binance.
-000478d0: 636f 6d2f 656e 2f66 7574 7572 6573 2f66  com/en/futures/f
-000478e0: 756e 6469 6e67 2d68 6973 746f 7279 2f30  unding-history/0
-000478f0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00047900: 2020 2023 2020 207b 0a20 2020 2020 2020     #   {.       
-00047910: 2023 2020 2020 2022 7379 6d62 6f6c 223a   #     "symbol":
-00047920: 2022 4254 4355 5344 5422 2c0a 2020 2020   "BTCUSDT",.    
-00047930: 2020 2020 2320 2020 2020 226d 6172 6b50      #     "markP
-00047940: 7269 6365 223a 2022 3435 3830 322e 3831  rice": "45802.81
-00047950: 3132 3938 3932 222c 0a20 2020 2020 2020  129892",.       
-00047960: 2023 2020 2020 2022 696e 6465 7850 7269   #     "indexPri
-00047970: 6365 223a 2022 3435 3734 352e 3437 3730  ce": "45745.4770
-00047980: 3139 3135 222c 0a20 2020 2020 2020 2023  1915",.        #
-00047990: 2020 2020 2022 6573 7469 6d61 7465 6453       "estimatedS
-000479a0: 6574 746c 6550 7269 6365 223a 2022 3435  ettlePrice": "45
-000479b0: 3133 332e 3931 3735 3336 3731 222c 0a20  133.91753671",. 
-000479c0: 2020 2020 2020 2023 2020 2020 2022 6c61         #     "la
-000479d0: 7374 4675 6e64 696e 6752 6174 6522 3a20  stFundingRate": 
-000479e0: 2230 2e30 3030 3633 3532 3122 2c0a 2020  "0.00063521",.  
-000479f0: 2020 2020 2020 2320 2020 2020 2269 6e74        #     "int
-00047a00: 6572 6573 7452 6174 6522 3a20 2230 2e30  erestRate": "0.0
-00047a10: 3030 3130 3030 3022 2c0a 2020 2020 2020  0010000",.      
-00047a20: 2020 2320 2020 2020 226e 6578 7446 756e    #     "nextFun
-00047a30: 6469 6e67 5469 6d65 223a 2022 3136 3231  dingTime": "1621
-00047a40: 3236 3732 3030 3030 3022 2c0a 2020 2020  267200000",.    
-00047a50: 2020 2020 2320 2020 2020 2274 696d 6522      #     "time"
-00047a60: 3a20 2231 3632 3132 3532 3334 3430 3031  : "1621252344001
-00047a70: 220a 2020 2020 2020 2020 2320 207d 0a20  ".        #  }. 
-00047a80: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00047a90: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
-00047aa0: 662e 7361 6665 5f69 6e74 6567 6572 2863  f.safe_integer(c
-00047ab0: 6f6e 7472 6163 742c 2027 7469 6d65 2729  ontract, 'time')
-00047ac0: 0a20 2020 2020 2020 206d 6172 6b65 7449  .        marketI
-00047ad0: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
-00047ae0: 7269 6e67 2863 6f6e 7472 6163 742c 2027  ring(contract, '
-00047af0: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
-00047b00: 2073 796d 626f 6c20 3d20 7365 6c66 2e73   symbol = self.s
-00047b10: 6166 655f 7379 6d62 6f6c 286d 6172 6b65  afe_symbol(marke
-00047b20: 7449 642c 206d 6172 6b65 742c 204e 6f6e  tId, market, Non
-00047b30: 652c 2027 636f 6e74 7261 6374 2729 0a20  e, 'contract'). 
-00047b40: 2020 2020 2020 206d 6172 6b50 7269 6365         markPrice
-00047b50: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-00047b60: 6265 7228 636f 6e74 7261 6374 2c20 276d  ber(contract, 'm
-00047b70: 6172 6b50 7269 6365 2729 0a20 2020 2020  arkPrice').     
-00047b80: 2020 2069 6e64 6578 5072 6963 6520 3d20     indexPrice = 
-00047b90: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00047ba0: 2863 6f6e 7472 6163 742c 2027 696e 6465  (contract, 'inde
-00047bb0: 7850 7269 6365 2729 0a20 2020 2020 2020  xPrice').       
-00047bc0: 2069 6e74 6572 6573 7452 6174 6520 3d20   interestRate = 
-00047bd0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00047be0: 2863 6f6e 7472 6163 742c 2027 696e 7465  (contract, 'inte
-00047bf0: 7265 7374 5261 7465 2729 0a20 2020 2020  restRate').     
-00047c00: 2020 2065 7374 696d 6174 6564 5365 7474     estimatedSett
-00047c10: 6c65 5072 6963 6520 3d20 7365 6c66 2e73  lePrice = self.s
-00047c20: 6166 655f 6e75 6d62 6572 2863 6f6e 7472  afe_number(contr
-00047c30: 6163 742c 2027 6573 7469 6d61 7465 6453  act, 'estimatedS
-00047c40: 6574 746c 6550 7269 6365 2729 0a20 2020  ettlePrice').   
-00047c50: 2020 2020 2066 756e 6469 6e67 5261 7465       fundingRate
-00047c60: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-00047c70: 6265 7228 636f 6e74 7261 6374 2c20 276c  ber(contract, 'l
-00047c80: 6173 7446 756e 6469 6e67 5261 7465 2729  astFundingRate')
-00047c90: 0a20 2020 2020 2020 2066 756e 6469 6e67  .        funding
-00047ca0: 5469 6d65 203d 2073 656c 662e 7361 6665  Time = self.safe
-00047cb0: 5f69 6e74 6567 6572 2863 6f6e 7472 6163  _integer(contrac
-00047cc0: 742c 2027 6e65 7874 4675 6e64 696e 6754  t, 'nextFundingT
-00047cd0: 696d 6527 290a 2020 2020 2020 2020 7265  ime').        re
-00047ce0: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
-00047cf0: 2020 2027 696e 666f 273a 2063 6f6e 7472     'info': contr
-00047d00: 6163 742c 0a20 2020 2020 2020 2020 2020  act,.           
-00047d10: 2027 7379 6d62 6f6c 273a 2073 796d 626f   'symbol': symbo
-00047d20: 6c2c 0a20 2020 2020 2020 2020 2020 2027  l,.            '
-00047d30: 6d61 726b 5072 6963 6527 3a20 6d61 726b  markPrice': mark
-00047d40: 5072 6963 652c 0a20 2020 2020 2020 2020  Price,.         
-00047d50: 2020 2027 696e 6465 7850 7269 6365 273a     'indexPrice':
-00047d60: 2069 6e64 6578 5072 6963 652c 0a20 2020   indexPrice,.   
-00047d70: 2020 2020 2020 2020 2027 696e 7465 7265           'intere
-00047d80: 7374 5261 7465 273a 2069 6e74 6572 6573  stRate': interes
-00047d90: 7452 6174 652c 0a20 2020 2020 2020 2020  tRate,.         
-00047da0: 2020 2027 6573 7469 6d61 7465 6453 6574     'estimatedSet
-00047db0: 746c 6550 7269 6365 273a 2065 7374 696d  tlePrice': estim
-00047dc0: 6174 6564 5365 7474 6c65 5072 6963 652c  atedSettlePrice,
-00047dd0: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
-00047de0: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
-00047df0: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
-00047e00: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
-00047e10: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
-00047e20: 616d 7029 2c0a 2020 2020 2020 2020 2020  amp),.          
-00047e30: 2020 2766 756e 6469 6e67 5261 7465 273a    'fundingRate':
-00047e40: 2066 756e 6469 6e67 5261 7465 2c0a 2020   fundingRate,.  
-00047e50: 2020 2020 2020 2020 2020 2766 756e 6469            'fundi
-00047e60: 6e67 5469 6d65 7374 616d 7027 3a20 6675  ngTimestamp': fu
-00047e70: 6e64 696e 6754 696d 652c 0a20 2020 2020  ndingTime,.     
-00047e80: 2020 2020 2020 2027 6675 6e64 696e 6744         'fundingD
-00047e90: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
-00047ea0: 736f 3836 3031 2866 756e 6469 6e67 5469  so8601(fundingTi
-00047eb0: 6d65 292c 0a20 2020 2020 2020 2020 2020  me),.           
-00047ec0: 2027 6e65 7874 4675 6e64 696e 6752 6174   'nextFundingRat
-00047ed0: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
-00047ee0: 2020 2020 2020 276e 6578 7446 756e 6469        'nextFundi
-00047ef0: 6e67 5469 6d65 7374 616d 7027 3a20 4e6f  ngTimestamp': No
-00047f00: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00047f10: 276e 6578 7446 756e 6469 6e67 4461 7465  'nextFundingDate
-00047f20: 7469 6d65 273a 204e 6f6e 652c 0a20 2020  time': None,.   
-00047f30: 2020 2020 2020 2020 2027 7072 6576 696f           'previo
-00047f40: 7573 4675 6e64 696e 6752 6174 6527 3a20  usFundingRate': 
-00047f50: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00047f60: 2020 2770 7265 7669 6f75 7346 756e 6469    'previousFundi
-00047f70: 6e67 5469 6d65 7374 616d 7027 3a20 4e6f  ngTimestamp': No
-00047f80: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00047f90: 2770 7265 7669 6f75 7346 756e 6469 6e67  'previousFunding
-00047fa0: 4461 7465 7469 6d65 273a 204e 6f6e 652c  Datetime': None,
-00047fb0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-00047fc0: 6465 6620 7061 7273 655f 6163 636f 756e  def parse_accoun
-00047fd0: 745f 706f 7369 7469 6f6e 7328 7365 6c66  t_positions(self
-00047fe0: 2c20 6163 636f 756e 7429 3a0a 2020 2020  , account):.    
-00047ff0: 2020 2020 706f 7369 7469 6f6e 7320 3d20      positions = 
-00048000: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00048010: 6163 636f 756e 742c 2027 706f 7369 7469  account, 'positi
-00048020: 6f6e 7327 290a 2020 2020 2020 2020 6173  ons').        as
-00048030: 7365 7473 203d 2073 656c 662e 7361 6665  sets = self.safe
-00048040: 5f76 616c 7565 2861 6363 6f75 6e74 2c20  _value(account, 
-00048050: 2761 7373 6574 7327 2c20 5b5d 290a 2020  'assets', []).  
-00048060: 2020 2020 2020 6261 6c61 6e63 6573 203d        balances =
-00048070: 207b 7d0a 2020 2020 2020 2020 666f 7220   {}.        for 
-00048080: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
-00048090: 6e28 6173 7365 7473 2929 3a0a 2020 2020  n(assets)):.    
-000480a0: 2020 2020 2020 2020 656e 7472 7920 3d20          entry = 
-000480b0: 6173 7365 7473 5b69 5d0a 2020 2020 2020  assets[i].      
-000480c0: 2020 2020 2020 6375 7272 656e 6379 4964        currencyId
-000480d0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-000480e0: 696e 6728 656e 7472 792c 2027 6173 7365  ing(entry, 'asse
-000480f0: 7427 290a 2020 2020 2020 2020 2020 2020  t').            
-00048100: 636f 6465 203d 2073 656c 662e 7361 6665  code = self.safe
-00048110: 5f63 7572 7265 6e63 795f 636f 6465 2863  _currency_code(c
-00048120: 7572 7265 6e63 7949 6429 0a20 2020 2020  urrencyId).     
-00048130: 2020 2020 2020 2063 726f 7373 5761 6c6c         crossWall
-00048140: 6574 4261 6c61 6e63 6520 3d20 7365 6c66  etBalance = self
-00048150: 2e73 6166 655f 7374 7269 6e67 2865 6e74  .safe_string(ent
-00048160: 7279 2c20 2763 726f 7373 5761 6c6c 6574  ry, 'crossWallet
-00048170: 4261 6c61 6e63 6527 290a 2020 2020 2020  Balance').      
-00048180: 2020 2020 2020 6372 6f73 7355 6e50 6e6c        crossUnPnl
-00048190: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-000481a0: 696e 6728 656e 7472 792c 2027 6372 6f73  ing(entry, 'cros
-000481b0: 7355 6e50 6e6c 2729 0a20 2020 2020 2020  sUnPnl').       
-000481c0: 2020 2020 2062 616c 616e 6365 735b 636f       balances[co
-000481d0: 6465 5d20 3d20 7b0a 2020 2020 2020 2020  de] = {.        
-000481e0: 2020 2020 2020 2020 2763 726f 7373 4d61          'crossMa
-000481f0: 7267 696e 273a 2050 7265 6369 7365 2e73  rgin': Precise.s
-00048200: 7472 696e 675f 6164 6428 6372 6f73 7357  tring_add(crossW
-00048210: 616c 6c65 7442 616c 616e 6365 2c20 6372  alletBalance, cr
-00048220: 6f73 7355 6e50 6e6c 292c 0a20 2020 2020  ossUnPnl),.     
-00048230: 2020 2020 2020 2020 2020 2027 6372 6f73             'cros
-00048240: 7357 616c 6c65 7442 616c 616e 6365 273a  sWalletBalance':
-00048250: 2063 726f 7373 5761 6c6c 6574 4261 6c61   crossWalletBala
-00048260: 6e63 652c 0a20 2020 2020 2020 2020 2020  nce,.           
-00048270: 207d 0a20 2020 2020 2020 2072 6573 756c   }.        resul
-00048280: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
-00048290: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-000482a0: 206c 656e 2870 6f73 6974 696f 6e73 2929   len(positions))
-000482b0: 3a0a 2020 2020 2020 2020 2020 2020 706f  :.            po
-000482c0: 7369 7469 6f6e 203d 2070 6f73 6974 696f  sition = positio
-000482d0: 6e73 5b69 5d0a 2020 2020 2020 2020 2020  ns[i].          
-000482e0: 2020 6d61 726b 6574 4964 203d 2073 656c    marketId = sel
-000482f0: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
-00048300: 7369 7469 6f6e 2c20 2773 796d 626f 6c27  sition, 'symbol'
-00048310: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
-00048320: 726b 6574 203d 2073 656c 662e 7361 6665  rket = self.safe
-00048330: 5f6d 6172 6b65 7428 6d61 726b 6574 4964  _market(marketId
-00048340: 2c20 4e6f 6e65 2c20 4e6f 6e65 2c20 2763  , None, None, 'c
-00048350: 6f6e 7472 6163 7427 290a 2020 2020 2020  ontract').      
-00048360: 2020 2020 2020 636f 6465 203d 206d 6172        code = mar
-00048370: 6b65 745b 2771 756f 7465 275d 2069 6620  ket['quote'] if 
-00048380: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-00048390: 2065 6c73 6520 6d61 726b 6574 5b27 6261   else market['ba
-000483a0: 7365 275d 0a20 2020 2020 2020 2020 2020  se'].           
-000483b0: 2023 2073 6f6d 6574 696d 6573 206e 6f74   # sometimes not
-000483c0: 2061 6c6c 2074 6865 2063 6f64 6573 2061   all the codes a
-000483d0: 7265 2063 6f72 7265 6374 6c79 2072 6574  re correctly ret
-000483e0: 7572 6e65 642e 2e2e 0a20 2020 2020 2020  urned....       
-000483f0: 2020 2020 2069 6620 636f 6465 2069 6e20       if code in 
-00048400: 6261 6c61 6e63 6573 3a0a 2020 2020 2020  balances:.      
-00048410: 2020 2020 2020 2020 2020 7061 7273 6564            parsed
-00048420: 203d 2073 656c 662e 7061 7273 655f 6163   = self.parse_ac
-00048430: 636f 756e 745f 706f 7369 7469 6f6e 2873  count_position(s
-00048440: 656c 662e 6578 7465 6e64 2870 6f73 6974  elf.extend(posit
-00048450: 696f 6e2c 207b 0a20 2020 2020 2020 2020  ion, {.         
-00048460: 2020 2020 2020 2020 2020 2027 6372 6f73             'cros
-00048470: 734d 6172 6769 6e27 3a20 6261 6c61 6e63  sMargin': balanc
-00048480: 6573 5b63 6f64 655d 5b27 6372 6f73 734d  es[code]['crossM
-00048490: 6172 6769 6e27 5d2c 0a20 2020 2020 2020  argin'],.       
-000484a0: 2020 2020 2020 2020 2020 2020 2027 6372               'cr
-000484b0: 6f73 7357 616c 6c65 7442 616c 616e 6365  ossWalletBalance
-000484c0: 273a 2062 616c 616e 6365 735b 636f 6465  ': balances[code
-000484d0: 5d5b 2763 726f 7373 5761 6c6c 6574 4261  ]['crossWalletBa
-000484e0: 6c61 6e63 6527 5d2c 0a20 2020 2020 2020  lance'],.       
-000484f0: 2020 2020 2020 2020 207d 292c 206d 6172           }), mar
-00048500: 6b65 7429 0a20 2020 2020 2020 2020 2020  ket).           
-00048510: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
-00048520: 6e64 2870 6172 7365 6429 0a20 2020 2020  nd(parsed).     
-00048530: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00048540: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-00048550: 6163 636f 756e 745f 706f 7369 7469 6f6e  account_position
-00048560: 2873 656c 662c 2070 6f73 6974 696f 6e2c  (self, position,
-00048570: 206d 6172 6b65 743d 4e6f 6e65 293a 0a20   market=None):. 
-00048580: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00048590: 2023 2075 7364 6d0a 2020 2020 2020 2020   # usdm.        
-000485a0: 2320 2020 207b 0a20 2020 2020 2020 2023  #    {.        #
-000485b0: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-000485c0: 2022 4254 4342 5553 4422 2c0a 2020 2020   "BTCBUSD",.    
-000485d0: 2020 2020 2320 2020 2020 2020 2269 6e69      #       "ini
-000485e0: 7469 616c 4d61 7267 696e 223a 2022 3022  tialMargin": "0"
-000485f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00048600: 2020 226d 6169 6e74 4d61 7267 696e 223a    "maintMargin":
-00048610: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00048620: 2020 2020 2020 2275 6e72 6561 6c69 7a65        "unrealize
-00048630: 6450 726f 6669 7422 3a20 2230 2e30 3030  dProfit": "0.000
-00048640: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00048650: 2320 2020 2020 2020 2270 6f73 6974 696f  #       "positio
-00048660: 6e49 6e69 7469 616c 4d61 7267 696e 223a  nInitialMargin":
-00048670: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00048680: 2020 2020 2020 226f 7065 6e4f 7264 6572        "openOrder
-00048690: 496e 6974 6961 6c4d 6172 6769 6e22 3a20  InitialMargin": 
-000486a0: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-000486b0: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
-000486c0: 2022 3230 222c 0a20 2020 2020 2020 2023   "20",.        #
-000486d0: 2020 2020 2020 2022 6973 6f6c 6174 6564         "isolated
-000486e0: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
-000486f0: 2020 2320 2020 2020 2020 2265 6e74 7279    #       "entry
-00048700: 5072 6963 6522 3a20 2230 2e30 3030 3022  Price": "0.0000"
-00048710: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00048720: 2020 226d 6178 4e6f 7469 6f6e 616c 223a    "maxNotional":
-00048730: 2022 3130 3030 3030 222c 0a20 2020 2020   "100000",.     
-00048740: 2020 2023 2020 2020 2020 2022 706f 7369     #       "posi
-00048750: 7469 6f6e 5369 6465 223a 2022 424f 5448  tionSide": "BOTH
-00048760: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00048770: 2020 2022 706f 7369 7469 6f6e 416d 7422     "positionAmt"
-00048780: 3a20 2230 2e30 3030 222c 0a20 2020 2020  : "0.000",.     
-00048790: 2020 2023 2020 2020 2020 2022 6e6f 7469     #       "noti
-000487a0: 6f6e 616c 223a 2022 3022 2c0a 2020 2020  onal": "0",.    
-000487b0: 2020 2020 2320 2020 2020 2020 2269 736f      #       "iso
-000487c0: 6c61 7465 6457 616c 6c65 7422 3a20 2230  latedWallet": "0
-000487d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000487e0: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
-000487f0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00048800: 2020 2020 2020 2263 726f 7373 4d61 7267        "crossMarg
-00048810: 696e 223a 2022 3130 302e 3933 3633 3438  in": "100.936348
-00048820: 3039 222c 0a20 2020 2020 2020 2023 2020  09",.        #  
-00048830: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00048840: 2020 2020 2020 2023 2063 6f69 6e6d 0a20         # coinm. 
-00048850: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-00048860: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-00048870: 7379 6d62 6f6c 223a 2022 4254 4355 5344  symbol": "BTCUSD
-00048880: 5f32 3130 3632 3522 2c0a 2020 2020 2020  _210625",.      
-00048890: 2020 2320 2020 2020 2020 2269 6e69 7469    #       "initi
-000488a0: 616c 4d61 7267 696e 223a 2022 302e 3030  alMargin": "0.00
-000488b0: 3032 3433 3933 222c 0a20 2020 2020 2020  024393",.       
-000488c0: 2023 2020 2020 2020 2022 6d61 696e 744d   #       "maintM
-000488d0: 6172 6769 6e22 3a20 2230 2e30 3030 3032  argin": "0.00002
-000488e0: 3433 3922 2c0a 2020 2020 2020 2020 2320  439",.        # 
-000488f0: 2020 2020 2020 2275 6e72 6561 6c69 7a65        "unrealize
-00048900: 6450 726f 6669 7422 3a20 222d 302e 3030  dProfit": "-0.00
-00048910: 3030 3031 3633 222c 0a20 2020 2020 2020  000163",.       
-00048920: 2023 2020 2020 2020 2022 706f 7369 7469   #       "positi
-00048930: 6f6e 496e 6974 6961 6c4d 6172 6769 6e22  onInitialMargin"
-00048940: 3a20 2230 2e30 3030 3234 3339 3322 2c0a  : "0.00024393",.
-00048950: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00048960: 226f 7065 6e4f 7264 6572 496e 6974 6961  "openOrderInitia
-00048970: 6c4d 6172 6769 6e22 3a20 2230 222c 0a20  lMargin": "0",. 
-00048980: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-00048990: 6c65 7665 7261 6765 223a 2022 3130 222c  leverage": "10",
-000489a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000489b0: 2022 6973 6f6c 6174 6564 223a 2046 616c   "isolated": Fal
-000489c0: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
-000489d0: 2020 2020 2270 6f73 6974 696f 6e53 6964      "positionSid
-000489e0: 6522 3a20 2242 4f54 4822 2c0a 2020 2020  e": "BOTH",.    
-000489f0: 2020 2020 2320 2020 2020 2020 2265 6e74      #       "ent
-00048a00: 7279 5072 6963 6522 3a20 2234 3130 3231  ryPrice": "41021
-00048a10: 2e32 3030 3030 3036 3922 2c0a 2020 2020  .20000069",.    
-00048a20: 2020 2020 2320 2020 2020 2020 226d 6178      #       "max
-00048a30: 5174 7922 3a20 2231 3030 222c 0a20 2020  Qty": "100",.   
-00048a40: 2020 2020 2023 2020 2020 2020 2022 6e6f       #       "no
-00048a50: 7469 6f6e 616c 5661 6c75 6522 3a20 2230  tionalValue": "0
-00048a60: 2e30 3032 3433 3933 3922 2c0a 2020 2020  .00243939",.    
-00048a70: 2020 2020 2320 2020 2020 2020 2269 736f      #       "iso
-00048a80: 6c61 7465 6457 616c 6c65 7422 3a20 2230  latedWallet": "0
-00048a90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00048aa0: 2020 2022 6372 6f73 734d 6172 6769 6e22     "crossMargin"
-00048ab0: 3a20 2230 2e33 3134 220a 2020 2020 2020  : "0.314".      
-00048ac0: 2020 2320 2020 2020 2020 2263 726f 7373    #       "cross
-00048ad0: 5761 6c6c 6574 4261 6c61 6e63 6522 3a20  WalletBalance": 
-00048ae0: 2233 3422 2c0a 2020 2020 2020 2020 2320  "34",.        # 
-00048af0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-00048b00: 2020 2020 2020 2020 6d61 726b 6574 4964          marketId
-00048b10: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00048b20: 696e 6728 706f 7369 7469 6f6e 2c20 2773  ing(position, 's
-00048b30: 796d 626f 6c27 290a 2020 2020 2020 2020  ymbol').        
-00048b40: 6d61 726b 6574 203d 2073 656c 662e 7361  market = self.sa
-00048b50: 6665 5f6d 6172 6b65 7428 6d61 726b 6574  fe_market(market
-00048b60: 4964 2c20 6d61 726b 6574 2c20 4e6f 6e65  Id, market, None
-00048b70: 2c20 2763 6f6e 7472 6163 7427 290a 2020  , 'contract').  
-00048b80: 2020 2020 2020 7379 6d62 6f6c 203d 2073        symbol = s
-00048b90: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00048ba0: 6d61 726b 6574 2c20 2773 796d 626f 6c27  market, 'symbol'
-00048bb0: 290a 2020 2020 2020 2020 6c65 7665 7261  ).        levera
-00048bc0: 6765 5374 7269 6e67 203d 2073 656c 662e  geString = self.
-00048bd0: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
-00048be0: 7469 6f6e 2c20 276c 6576 6572 6167 6527  tion, 'leverage'
-00048bf0: 290a 2020 2020 2020 2020 6c65 7665 7261  ).        levera
-00048c00: 6765 203d 2069 6e74 286c 6576 6572 6167  ge = int(leverag
-00048c10: 6553 7472 696e 6729 0a20 2020 2020 2020  eString).       
-00048c20: 2069 6e69 7469 616c 4d61 7267 696e 5374   initialMarginSt
-00048c30: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
-00048c40: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
-00048c50: 2c20 2769 6e69 7469 616c 4d61 7267 696e  , 'initialMargin
-00048c60: 2729 0a20 2020 2020 2020 2069 6e69 7469  ').        initi
-00048c70: 616c 4d61 7267 696e 203d 2073 656c 662e  alMargin = self.
-00048c80: 7061 7273 655f 6e75 6d62 6572 2869 6e69  parse_number(ini
-00048c90: 7469 616c 4d61 7267 696e 5374 7269 6e67  tialMarginString
-00048ca0: 290a 2020 2020 2020 2020 696e 6974 6961  ).        initia
-00048cb0: 6c4d 6172 6769 6e50 6572 6365 6e74 6167  lMarginPercentag
-00048cc0: 6553 7472 696e 6720 3d20 5072 6563 6973  eString = Precis
-00048cd0: 652e 7374 7269 6e67 5f64 6976 2827 3127  e.string_div('1'
-00048ce0: 2c20 6c65 7665 7261 6765 5374 7269 6e67  , leverageString
-00048cf0: 2c20 3829 0a20 2020 2020 2020 2072 6174  , 8).        rat
-00048d00: 696f 6e61 6c20 3d20 2831 3030 3020 2520  ional = (1000 % 
-00048d10: 6c65 7665 7261 6765 2920 3d3d 2030 0a20  leverage) == 0. 
-00048d20: 2020 2020 2020 2069 6620 6e6f 7420 7261         if not ra
-00048d30: 7469 6f6e 616c 3a0a 2020 2020 2020 2020  tional:.        
-00048d40: 2020 2020 696e 6974 6961 6c4d 6172 6769      initialMargi
-00048d50: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
-00048d60: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
-00048d70: 6e67 5f64 6976 2850 7265 6369 7365 2e73  ng_div(Precise.s
-00048d80: 7472 696e 675f 6164 6428 696e 6974 6961  tring_add(initia
-00048d90: 6c4d 6172 6769 6e50 6572 6365 6e74 6167  lMarginPercentag
-00048da0: 6553 7472 696e 672c 2027 3165 2d38 2729  eString, '1e-8')
-00048db0: 2c20 2731 272c 2038 290a 2020 2020 2020  , '1', 8).      
-00048dc0: 2020 2320 746f 206e 6f74 696f 6e61 6c56    # to notionalV
-00048dd0: 616c 7565 0a20 2020 2020 2020 2075 7364  alue.        usd
-00048de0: 6d20 3d20 2827 6e6f 7469 6f6e 616c 2720  m = ('notional' 
-00048df0: 696e 2070 6f73 6974 696f 6e29 0a20 2020  in position).   
-00048e00: 2020 2020 206d 6169 6e74 656e 616e 6365       maintenance
-00048e10: 4d61 7267 696e 5374 7269 6e67 203d 2073  MarginString = s
-00048e20: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00048e30: 706f 7369 7469 6f6e 2c20 276d 6169 6e74  position, 'maint
-00048e40: 4d61 7267 696e 2729 0a20 2020 2020 2020  Margin').       
-00048e50: 206d 6169 6e74 656e 616e 6365 4d61 7267   maintenanceMarg
-00048e60: 696e 203d 2073 656c 662e 7061 7273 655f  in = self.parse_
-00048e70: 6e75 6d62 6572 286d 6169 6e74 656e 616e  number(maintenan
-00048e80: 6365 4d61 7267 696e 5374 7269 6e67 290a  ceMarginString).
-00048e90: 2020 2020 2020 2020 656e 7472 7950 7269          entryPri
-00048ea0: 6365 5374 7269 6e67 203d 2073 656c 662e  ceString = self.
-00048eb0: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
-00048ec0: 7469 6f6e 2c20 2765 6e74 7279 5072 6963  tion, 'entryPric
-00048ed0: 6527 290a 2020 2020 2020 2020 656e 7472  e').        entr
-00048ee0: 7950 7269 6365 203d 2073 656c 662e 7061  yPrice = self.pa
-00048ef0: 7273 655f 6e75 6d62 6572 2865 6e74 7279  rse_number(entry
-00048f00: 5072 6963 6553 7472 696e 6729 0a20 2020  PriceString).   
-00048f10: 2020 2020 206e 6f74 696f 6e61 6c53 7472       notionalStr
-00048f20: 696e 6720 3d20 7365 6c66 2e73 6166 655f  ing = self.safe_
-00048f30: 7374 7269 6e67 5f32 2870 6f73 6974 696f  string_2(positio
-00048f40: 6e2c 2027 6e6f 7469 6f6e 616c 272c 2027  n, 'notional', '
-00048f50: 6e6f 7469 6f6e 616c 5661 6c75 6527 290a  notionalValue').
-00048f60: 2020 2020 2020 2020 6e6f 7469 6f6e 616c          notional
-00048f70: 5374 7269 6e67 4162 7320 3d20 5072 6563  StringAbs = Prec
-00048f80: 6973 652e 7374 7269 6e67 5f61 6273 286e  ise.string_abs(n
-00048f90: 6f74 696f 6e61 6c53 7472 696e 6729 0a20  otionalString). 
-00048fa0: 2020 2020 2020 206e 6f74 696f 6e61 6c20         notional 
-00048fb0: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
-00048fc0: 6265 7228 6e6f 7469 6f6e 616c 5374 7269  ber(notionalStri
-00048fd0: 6e67 4162 7329 0a20 2020 2020 2020 2063  ngAbs).        c
-00048fe0: 6f6e 7472 6163 7473 5374 7269 6e67 203d  ontractsString =
-00048ff0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00049000: 6728 706f 7369 7469 6f6e 2c20 2770 6f73  g(position, 'pos
-00049010: 6974 696f 6e41 6d74 2729 0a20 2020 2020  itionAmt').     
-00049020: 2020 2063 6f6e 7472 6163 7473 5374 7269     contractsStri
-00049030: 6e67 4162 7320 3d20 5072 6563 6973 652e  ngAbs = Precise.
-00049040: 7374 7269 6e67 5f61 6273 2863 6f6e 7472  string_abs(contr
-00049050: 6163 7473 5374 7269 6e67 290a 2020 2020  actsString).    
-00049060: 2020 2020 6966 2063 6f6e 7472 6163 7473      if contracts
-00049070: 5374 7269 6e67 2069 7320 4e6f 6e65 3a0a  String is None:.
-00049080: 2020 2020 2020 2020 2020 2020 656e 7472              entr
-00049090: 794e 6f74 696f 6e61 6c20 3d20 5072 6563  yNotional = Prec
-000490a0: 6973 652e 7374 7269 6e67 5f6d 756c 2850  ise.string_mul(P
-000490b0: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
-000490c0: 6c28 6c65 7665 7261 6765 5374 7269 6e67  l(leverageString
-000490d0: 2c20 696e 6974 6961 6c4d 6172 6769 6e53  , initialMarginS
-000490e0: 7472 696e 6729 2c20 656e 7472 7950 7269  tring), entryPri
-000490f0: 6365 5374 7269 6e67 290a 2020 2020 2020  ceString).      
-00049100: 2020 2020 2020 636f 6e74 7261 6374 5369        contractSi
-00049110: 7a65 4e65 7720 3d20 7365 6c66 2e73 6166  zeNew = self.saf
-00049120: 655f 7374 7269 6e67 286d 6172 6b65 742c  e_string(market,
-00049130: 2027 636f 6e74 7261 6374 5369 7a65 2729   'contractSize')
-00049140: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-00049150: 7472 6163 7473 5374 7269 6e67 203d 2050  tractsString = P
-00049160: 7265 6369 7365 2e73 7472 696e 675f 6469  recise.string_di
-00049170: 7628 656e 7472 794e 6f74 696f 6e61 6c2c  v(entryNotional,
-00049180: 2063 6f6e 7472 6163 7453 697a 654e 6577   contractSizeNew
-00049190: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
-000491a0: 6e74 7261 6374 7353 7472 696e 6741 6273  ntractsStringAbs
-000491b0: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-000491c0: 675f 6469 7628 5072 6563 6973 652e 7374  g_div(Precise.st
-000491d0: 7269 6e67 5f61 6464 2863 6f6e 7472 6163  ring_add(contrac
-000491e0: 7473 5374 7269 6e67 2c20 2730 2e35 2729  tsString, '0.5')
-000491f0: 2c20 2731 272c 2030 290a 2020 2020 2020  , '1', 0).      
-00049200: 2020 636f 6e74 7261 6374 7320 3d20 7365    contracts = se
-00049210: 6c66 2e70 6172 7365 5f6e 756d 6265 7228  lf.parse_number(
-00049220: 636f 6e74 7261 6374 7353 7472 696e 6741  contractsStringA
-00049230: 6273 290a 2020 2020 2020 2020 6c65 7665  bs).        leve
-00049240: 7261 6765 4272 6163 6b65 7473 203d 2073  rageBrackets = s
-00049250: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
-00049260: 656c 662e 6f70 7469 6f6e 732c 2027 6c65  elf.options, 'le
-00049270: 7665 7261 6765 4272 6163 6b65 7473 272c  verageBrackets',
-00049280: 207b 7d29 0a20 2020 2020 2020 206c 6576   {}).        lev
-00049290: 6572 6167 6542 7261 636b 6574 203d 2073  erageBracket = s
-000492a0: 656c 662e 7361 6665 5f76 616c 7565 286c  elf.safe_value(l
-000492b0: 6576 6572 6167 6542 7261 636b 6574 732c  everageBrackets,
-000492c0: 2073 796d 626f 6c2c 205b 5d29 0a20 2020   symbol, []).   
-000492d0: 2020 2020 206d 6169 6e74 656e 616e 6365       maintenance
-000492e0: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
-000492f0: 5374 7269 6e67 203d 204e 6f6e 650a 2020  String = None.  
-00049300: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-00049310: 616e 6765 2830 2c20 6c65 6e28 6c65 7665  ange(0, len(leve
-00049320: 7261 6765 4272 6163 6b65 7429 293a 0a20  rageBracket)):. 
-00049330: 2020 2020 2020 2020 2020 2062 7261 636b             brack
-00049340: 6574 203d 206c 6576 6572 6167 6542 7261  et = leverageBra
-00049350: 636b 6574 5b69 5d0a 2020 2020 2020 2020  cket[i].        
-00049360: 2020 2020 6966 2050 7265 6369 7365 2e73      if Precise.s
-00049370: 7472 696e 675f 6c74 286e 6f74 696f 6e61  tring_lt(notiona
-00049380: 6c53 7472 696e 6741 6273 2c20 6272 6163  lStringAbs, brac
-00049390: 6b65 745b 305d 293a 0a20 2020 2020 2020  ket[0]):.       
-000493a0: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-000493b0: 2020 2020 2020 2020 2020 206d 6169 6e74             maint
-000493c0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-000493d0: 656e 7461 6765 5374 7269 6e67 203d 2062  entageString = b
-000493e0: 7261 636b 6574 5b31 5d0a 2020 2020 2020  racket[1].      
-000493f0: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
-00049400: 6769 6e50 6572 6365 6e74 6167 6520 3d20  ginPercentage = 
-00049410: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
-00049420: 7228 6d61 696e 7465 6e61 6e63 654d 6172  r(maintenanceMar
-00049430: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
-00049440: 696e 6729 0a20 2020 2020 2020 2075 6e72  ing).        unr
-00049450: 6561 6c69 7a65 6450 6e6c 5374 7269 6e67  ealizedPnlString
-00049460: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00049470: 696e 6728 706f 7369 7469 6f6e 2c20 2775  ing(position, 'u
-00049480: 6e72 6561 6c69 7a65 6450 726f 6669 7427  nrealizedProfit'
-00049490: 290a 2020 2020 2020 2020 756e 7265 616c  ).        unreal
-000494a0: 697a 6564 506e 6c20 3d20 7365 6c66 2e70  izedPnl = self.p
-000494b0: 6172 7365 5f6e 756d 6265 7228 756e 7265  arse_number(unre
-000494c0: 616c 697a 6564 506e 6c53 7472 696e 6729  alizedPnlString)
-000494d0: 0a20 2020 2020 2020 2074 696d 6573 7461  .        timesta
-000494e0: 6d70 203d 2073 656c 662e 7361 6665 5f69  mp = self.safe_i
-000494f0: 6e74 6567 6572 2870 6f73 6974 696f 6e2c  nteger(position,
-00049500: 2027 7570 6461 7465 5469 6d65 2729 0a20   'updateTime'). 
-00049510: 2020 2020 2020 2069 6620 7469 6d65 7374         if timest
-00049520: 616d 7020 3d3d 2030 3a0a 2020 2020 2020  amp == 0:.      
-00049530: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-00049540: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-00049550: 736f 6c61 7465 6420 3d20 7365 6c66 2e73  solated = self.s
-00049560: 6166 655f 7661 6c75 6528 706f 7369 7469  afe_value(positi
-00049570: 6f6e 2c20 2769 736f 6c61 7465 6427 290a  on, 'isolated').
-00049580: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
-00049590: 6465 203d 204e 6f6e 650a 2020 2020 2020  de = None.      
-000495a0: 2020 636f 6c6c 6174 6572 616c 5374 7269    collateralStri
-000495b0: 6e67 203d 204e 6f6e 650a 2020 2020 2020  ng = None.      
-000495c0: 2020 7761 6c6c 6574 4261 6c61 6e63 6520    walletBalance 
-000495d0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-000495e0: 6620 6973 6f6c 6174 6564 3a0a 2020 2020  f isolated:.    
-000495f0: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
-00049600: 6465 203d 2027 6973 6f6c 6174 6564 270a  de = 'isolated'.
-00049610: 2020 2020 2020 2020 2020 2020 7761 6c6c              wall
-00049620: 6574 4261 6c61 6e63 6520 3d20 7365 6c66  etBalance = self
-00049630: 2e73 6166 655f 7374 7269 6e67 2870 6f73  .safe_string(pos
-00049640: 6974 696f 6e2c 2027 6973 6f6c 6174 6564  ition, 'isolated
-00049650: 5761 6c6c 6574 2729 0a20 2020 2020 2020  Wallet').       
-00049660: 2020 2020 2063 6f6c 6c61 7465 7261 6c53       collateralS
-00049670: 7472 696e 6720 3d20 5072 6563 6973 652e  tring = Precise.
-00049680: 7374 7269 6e67 5f61 6464 2877 616c 6c65  string_add(walle
-00049690: 7442 616c 616e 6365 2c20 756e 7265 616c  tBalance, unreal
-000496a0: 697a 6564 506e 6c53 7472 696e 6729 0a20  izedPnlString). 
-000496b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000496c0: 2020 2020 2020 2020 206d 6172 6769 6e4d           marginM
-000496d0: 6f64 6520 3d20 2763 726f 7373 270a 2020  ode = 'cross'.  
-000496e0: 2020 2020 2020 2020 2020 7761 6c6c 6574            wallet
-000496f0: 4261 6c61 6e63 6520 3d20 7365 6c66 2e73  Balance = self.s
-00049700: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
-00049710: 696f 6e2c 2027 6372 6f73 7357 616c 6c65  ion, 'crossWalle
-00049720: 7442 616c 616e 6365 2729 0a20 2020 2020  tBalance').     
-00049730: 2020 2020 2020 2063 6f6c 6c61 7465 7261         collatera
-00049740: 6c53 7472 696e 6720 3d20 7365 6c66 2e73  lString = self.s
-00049750: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
-00049760: 696f 6e2c 2027 6372 6f73 734d 6172 6769  ion, 'crossMargi
-00049770: 6e27 290a 2020 2020 2020 2020 636f 6c6c  n').        coll
-00049780: 6174 6572 616c 203d 2073 656c 662e 7061  ateral = self.pa
-00049790: 7273 655f 6e75 6d62 6572 2863 6f6c 6c61  rse_number(colla
-000497a0: 7465 7261 6c53 7472 696e 6729 0a20 2020  teralString).   
-000497b0: 2020 2020 206d 6172 6769 6e52 6174 696f       marginRatio
-000497c0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-000497d0: 7369 6465 203d 204e 6f6e 650a 2020 2020  side = None.    
-000497e0: 2020 2020 7065 7263 656e 7461 6765 203d      percentage =
-000497f0: 204e 6f6e 650a 2020 2020 2020 2020 6c69   None.        li
-00049800: 7175 6964 6174 696f 6e50 7269 6365 5374  quidationPriceSt
-00049810: 7269 6e67 5261 7720 3d20 4e6f 6e65 0a20  ringRaw = None. 
-00049820: 2020 2020 2020 206c 6971 7569 6461 7469         liquidati
-00049830: 6f6e 5072 6963 6520 3d20 4e6f 6e65 0a20  onPrice = None. 
-00049840: 2020 2020 2020 2063 6f6e 7472 6163 7453         contractS
-00049850: 697a 6520 3d20 7365 6c66 2e73 6166 655f  ize = self.safe_
-00049860: 7661 6c75 6528 6d61 726b 6574 2c20 2763  value(market, 'c
-00049870: 6f6e 7472 6163 7453 697a 6527 290a 2020  ontractSize').  
-00049880: 2020 2020 2020 636f 6e74 7261 6374 5369        contractSi
-00049890: 7a65 5374 7269 6e67 203d 2073 656c 662e  zeString = self.
-000498a0: 6e75 6d62 6572 5f74 6f5f 7374 7269 6e67  number_to_string
-000498b0: 2863 6f6e 7472 6163 7453 697a 6529 0a20  (contractSize). 
-000498c0: 2020 2020 2020 2069 6620 5072 6563 6973         if Precis
-000498d0: 652e 7374 7269 6e67 5f65 7175 616c 7328  e.string_equals(
-000498e0: 6e6f 7469 6f6e 616c 5374 7269 6e67 2c20  notionalString, 
-000498f0: 2730 2729 3a0a 2020 2020 2020 2020 2020  '0'):.          
-00049900: 2020 656e 7472 7950 7269 6365 203d 204e    entryPrice = N
-00049910: 6f6e 650a 2020 2020 2020 2020 656c 7365  one.        else
-00049920: 3a0a 2020 2020 2020 2020 2020 2020 7369  :.            si
-00049930: 6465 203d 2027 7368 6f72 7427 2069 6620  de = 'short' if 
-00049940: 5072 6563 6973 652e 7374 7269 6e67 5f6c  Precise.string_l
-00049950: 7428 6e6f 7469 6f6e 616c 5374 7269 6e67  t(notionalString
-00049960: 2c20 2730 2729 2065 6c73 6520 276c 6f6e  , '0') else 'lon
-00049970: 6727 0a20 2020 2020 2020 2020 2020 206d  g'.            m
-00049980: 6172 6769 6e52 6174 696f 203d 2073 656c  arginRatio = sel
-00049990: 662e 7061 7273 655f 6e75 6d62 6572 2850  f.parse_number(P
-000499a0: 7265 6369 7365 2e73 7472 696e 675f 6469  recise.string_di
-000499b0: 7628 5072 6563 6973 652e 7374 7269 6e67  v(Precise.string
-000499c0: 5f61 6464 2850 7265 6369 7365 2e73 7472  _add(Precise.str
-000499d0: 696e 675f 6469 7628 6d61 696e 7465 6e61  ing_div(maintena
-000499e0: 6e63 654d 6172 6769 6e53 7472 696e 672c  nceMarginString,
-000499f0: 2063 6f6c 6c61 7465 7261 6c53 7472 696e   collateralStrin
-00049a00: 6729 2c20 2735 652d 3527 292c 2027 3127  g), '5e-5'), '1'
-00049a10: 2c20 3429 290a 2020 2020 2020 2020 2020  , 4)).          
-00049a20: 2020 7065 7263 656e 7461 6765 203d 2073    percentage = s
-00049a30: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
-00049a40: 2850 7265 6369 7365 2e73 7472 696e 675f  (Precise.string_
-00049a50: 6d75 6c28 5072 6563 6973 652e 7374 7269  mul(Precise.stri
-00049a60: 6e67 5f64 6976 2875 6e72 6561 6c69 7a65  ng_div(unrealize
-00049a70: 6450 6e6c 5374 7269 6e67 2c20 696e 6974  dPnlString, init
-00049a80: 6961 6c4d 6172 6769 6e53 7472 696e 672c  ialMarginString,
-00049a90: 2034 292c 2027 3130 3027 2929 0a20 2020   4), '100')).   
-00049aa0: 2020 2020 2020 2020 2069 6620 7573 646d           if usdm
-00049ab0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00049ac0: 2020 2320 6361 6c63 756c 6174 6520 6c69    # calculate li
-00049ad0: 7175 6964 6174 696f 6e20 7072 6963 650a  quidation price.
-00049ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049af0: 230a 2020 2020 2020 2020 2020 2020 2020  #.              
-00049b00: 2020 2320 6c69 7175 6964 6174 696f 6e50    # liquidationP
-00049b10: 7269 6365 203d 2028 7761 6c6c 6574 4261  rice = (walletBa
-00049b20: 6c61 6e63 6520 2f20 2863 6f6e 7472 6163  lance / (contrac
-00049b30: 7473 202a 2028 c2b1 3120 2b20 6d6d 7029  ts * (..1 + mmp)
-00049b40: 2929 202b 2028 c2b1 656e 7472 7950 7269  )) + (..entryPri
-00049b50: 6365 202f 2028 c2b1 3120 2b20 6d6d 7029  ce / (..1 + mmp)
-00049b60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00049b70: 2020 230a 2020 2020 2020 2020 2020 2020    #.            
-00049b80: 2020 2020 2320 6d6d 7020 3d20 6d61 696e      # mmp = main
-00049b90: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
-00049ba0: 6365 6e74 6167 650a 2020 2020 2020 2020  centage.        
-00049bb0: 2020 2020 2020 2020 2320 7768 6572 6520          # where 
-00049bc0: c2b1 2069 7320 6e65 6761 7469 7665 2066  .. is negative f
-00049bd0: 6f72 206c 6f6e 6720 616e 6420 706f 7369  or long and posi
-00049be0: 7469 7665 2066 6f72 2073 686f 7274 0a20  tive for short. 
-00049bf0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00049c00: 2054 4f44 4f3a 2063 616c 6375 6c61 7465   TODO: calculate
-00049c10: 206c 6971 7569 6461 7469 6f6e 2070 7269   liquidation pri
-00049c20: 6365 2066 6f72 2063 6f69 6e6d 2063 6f6e  ce for coinm con
-00049c30: 7472 6163 7473 0a20 2020 2020 2020 2020  tracts.         
-00049c40: 2020 2020 2020 206f 6e65 506c 7573 4d61         onePlusMa
-00049c50: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-00049c60: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
-00049c70: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
-00049c80: 2020 2020 2020 2065 6e74 7279 5072 6963         entryPric
-00049c90: 6553 6967 6e53 7472 696e 6720 3d20 656e  eSignString = en
-00049ca0: 7472 7950 7269 6365 5374 7269 6e67 0a20  tryPriceString. 
-00049cb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00049cc0: 6620 7369 6465 203d 3d20 2773 686f 7274  f side == 'short
-00049cd0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00049ce0: 2020 2020 2020 206f 6e65 506c 7573 4d61         onePlusMa
-00049cf0: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-00049d00: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
-00049d10: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-00049d20: 5f61 6464 2827 3127 2c20 6d61 696e 7465  _add('1', mainte
-00049d30: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
-00049d40: 6e74 6167 6553 7472 696e 6729 0a20 2020  ntageString).   
-00049d50: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00049d60: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00049d70: 2020 2020 2020 206f 6e65 506c 7573 4d61         onePlusMa
-00049d80: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-00049d90: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
-00049da0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-00049db0: 5f61 6464 2827 2d31 272c 206d 6169 6e74  _add('-1', maint
-00049dc0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-00049dd0: 656e 7461 6765 5374 7269 6e67 290a 2020  entageString).  
-00049de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049df0: 2020 656e 7472 7950 7269 6365 5369 676e    entryPriceSign
-00049e00: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
-00049e10: 2e73 7472 696e 675f 6d75 6c28 272d 3127  .string_mul('-1'
-00049e20: 2c20 656e 7472 7950 7269 6365 5369 676e  , entryPriceSign
-00049e30: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-00049e40: 2020 2020 2020 2020 6c65 6674 5369 6465          leftSide
-00049e50: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-00049e60: 675f 6469 7628 7761 6c6c 6574 4261 6c61  g_div(walletBala
-00049e70: 6e63 652c 2050 7265 6369 7365 2e73 7472  nce, Precise.str
-00049e80: 696e 675f 6d75 6c28 636f 6e74 7261 6374  ing_mul(contract
-00049e90: 7353 7472 696e 6741 6273 2c20 6f6e 6550  sStringAbs, oneP
-00049ea0: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-00049eb0: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-00049ec0: 7269 6e67 2929 0a20 2020 2020 2020 2020  ring)).         
-00049ed0: 2020 2020 2020 2072 6967 6874 5369 6465         rightSide
-00049ee0: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-00049ef0: 675f 6469 7628 656e 7472 7950 7269 6365  g_div(entryPrice
-00049f00: 5369 676e 5374 7269 6e67 2c20 6f6e 6550  SignString, oneP
-00049f10: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-00049f20: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-00049f30: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-00049f40: 2020 2020 2020 6c69 7175 6964 6174 696f        liquidatio
-00049f50: 6e50 7269 6365 5374 7269 6e67 5261 7720  nPriceStringRaw 
-00049f60: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-00049f70: 5f61 6464 286c 6566 7453 6964 652c 2072  _add(leftSide, r
-00049f80: 6967 6874 5369 6465 290a 2020 2020 2020  ightSide).      
-00049f90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00049fa0: 2020 2020 2020 2020 2020 2020 2320 6361              # ca
-00049fb0: 6c63 756c 6174 6520 6c69 7175 6964 6174  lculate liquidat
-00049fc0: 696f 6e20 7072 6963 650a 2020 2020 2020  ion price.      
-00049fd0: 2020 2020 2020 2020 2020 230a 2020 2020            #.    
-00049fe0: 2020 2020 2020 2020 2020 2020 2320 6c69              # li
-00049ff0: 7175 6964 6174 696f 6e50 7269 6365 203d  quidationPrice =
-0004a000: 2028 636f 6e74 7261 6374 7320 2a20 636f   (contracts * co
-0004a010: 6e74 7261 6374 5369 7a65 28c2 b131 202d  ntractSize(..1 -
-0004a020: 206d 6d70 2929 202f 2028 c2b1 312f 656e   mmp)) / (..1/en
-0004a030: 7472 7950 7269 6365 202a 2063 6f6e 7472  tryPrice * contr
-0004a040: 6163 7473 202a 2063 6f6e 7472 6163 7453  acts * contractS
-0004a050: 697a 6520 2d20 7761 6c6c 6574 4261 6c61  ize - walletBala
-0004a060: 6e63 6529 0a20 2020 2020 2020 2020 2020  nce).           
-0004a070: 2020 2020 2023 0a20 2020 2020 2020 2020       #.         
-0004a080: 2020 2020 2020 206f 6e65 506c 7573 4d61         onePlusMa
-0004a090: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-0004a0a0: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
-0004a0b0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
-0004a0c0: 2020 2020 2020 2065 6e74 7279 5072 6963         entryPric
-0004a0d0: 6553 6967 6e53 7472 696e 6720 3d20 656e  eSignString = en
-0004a0e0: 7472 7950 7269 6365 5374 7269 6e67 0a20  tryPriceString. 
-0004a0f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0004a100: 6620 7369 6465 203d 3d20 2773 686f 7274  f side == 'short
-0004a110: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-0004a120: 2020 2020 2020 206f 6e65 506c 7573 4d61         onePlusMa
-0004a130: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-0004a140: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
-0004a150: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-0004a160: 5f73 7562 2827 3127 2c20 6d61 696e 7465  _sub('1', mainte
-0004a170: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
-0004a180: 6e74 6167 6553 7472 696e 6729 0a20 2020  ntageString).   
-0004a190: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0004a1a0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0004a1b0: 2020 2020 2020 206f 6e65 506c 7573 4d61         onePlusMa
-0004a1c0: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-0004a1d0: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
-0004a1e0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-0004a1f0: 5f73 7562 2827 2d31 272c 206d 6169 6e74  _sub('-1', maint
-0004a200: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-0004a210: 656e 7461 6765 5374 7269 6e67 290a 2020  entageString).  
-0004a220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a230: 2020 656e 7472 7950 7269 6365 5369 676e    entryPriceSign
-0004a240: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
-0004a250: 2e73 7472 696e 675f 6d75 6c28 272d 3127  .string_mul('-1'
-0004a260: 2c20 656e 7472 7950 7269 6365 5369 676e  , entryPriceSign
-0004a270: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-0004a280: 2020 2020 2020 2020 7369 7a65 203d 2050          size = P
-0004a290: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
-0004a2a0: 6c28 636f 6e74 7261 6374 7353 7472 696e  l(contractsStrin
-0004a2b0: 6741 6273 2c20 636f 6e74 7261 6374 5369  gAbs, contractSi
-0004a2c0: 7a65 5374 7269 6e67 290a 2020 2020 2020  zeString).      
-0004a2d0: 2020 2020 2020 2020 2020 6c65 6674 5369            leftSi
-0004a2e0: 6465 203d 2050 7265 6369 7365 2e73 7472  de = Precise.str
-0004a2f0: 696e 675f 6d75 6c28 7369 7a65 2c20 6f6e  ing_mul(size, on
-0004a300: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
-0004a310: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
-0004a320: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-0004a330: 2020 2020 2020 2020 7269 6768 7453 6964          rightSid
-0004a340: 6520 3d20 5072 6563 6973 652e 7374 7269  e = Precise.stri
-0004a350: 6e67 5f73 7562 2850 7265 6369 7365 2e73  ng_sub(Precise.s
-0004a360: 7472 696e 675f 6d75 6c28 5072 6563 6973  tring_mul(Precis
-0004a370: 652e 7374 7269 6e67 5f64 6976 2827 3127  e.string_div('1'
-0004a380: 2c20 656e 7472 7950 7269 6365 5369 676e  , entryPriceSign
-0004a390: 5374 7269 6e67 292c 2073 697a 6529 2c20  String), size), 
-0004a3a0: 7761 6c6c 6574 4261 6c61 6e63 6529 0a20  walletBalance). 
-0004a3b0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0004a3c0: 6971 7569 6461 7469 6f6e 5072 6963 6553  iquidationPriceS
-0004a3d0: 7472 696e 6752 6177 203d 2050 7265 6369  tringRaw = Preci
-0004a3e0: 7365 2e73 7472 696e 675f 6469 7628 6c65  se.string_div(le
-0004a3f0: 6674 5369 6465 2c20 7269 6768 7453 6964  ftSide, rightSid
-0004a400: 6529 0a20 2020 2020 2020 2020 2020 2070  e).            p
-0004a410: 7269 6365 5072 6563 6973 696f 6e20 3d20  ricePrecision = 
-0004a420: 6d61 726b 6574 5b27 7072 6563 6973 696f  market['precisio
-0004a430: 6e27 5d5b 2770 7269 6365 275d 0a20 2020  n']['price'].   
-0004a440: 2020 2020 2020 2020 2070 7269 6365 5072           pricePr
-0004a450: 6563 6973 696f 6e50 6c75 734f 6e65 203d  ecisionPlusOne =
-0004a460: 2070 7269 6365 5072 6563 6973 696f 6e20   pricePrecision 
-0004a470: 2b20 310a 2020 2020 2020 2020 2020 2020  + 1.            
-0004a480: 7072 6963 6550 7265 6369 7369 6f6e 506c  pricePrecisionPl
-0004a490: 7573 4f6e 6553 7472 696e 6720 3d20 7374  usOneString = st
-0004a4a0: 7228 7072 6963 6550 7265 6369 7369 6f6e  r(pricePrecision
-0004a4b0: 506c 7573 4f6e 6529 0a20 2020 2020 2020  PlusOne).       
-0004a4c0: 2020 2020 2023 2072 6f75 6e64 2068 616c       # round hal
-0004a4d0: 6620 7570 0a20 2020 2020 2020 2020 2020  f up.           
-0004a4e0: 2072 6f75 6e64 6572 203d 2050 7265 6369   rounder = Preci
-0004a4f0: 7365 2827 3565 2d27 202b 2070 7269 6365  se('5e-' + price
-0004a500: 5072 6563 6973 696f 6e50 6c75 734f 6e65  PrecisionPlusOne
-0004a510: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-0004a520: 2020 2020 726f 756e 6465 7253 7472 696e      rounderStrin
-0004a530: 6720 3d20 7374 7228 726f 756e 6465 7229  g = str(rounder)
-0004a540: 0a20 2020 2020 2020 2020 2020 206c 6971  .            liq
-0004a550: 7569 6461 7469 6f6e 5072 6963 6552 6f75  uidationPriceRou
-0004a560: 6e64 6564 5374 7269 6e67 203d 2050 7265  ndedString = Pre
-0004a570: 6369 7365 2e73 7472 696e 675f 6164 6428  cise.string_add(
-0004a580: 726f 756e 6465 7253 7472 696e 672c 206c  rounderString, l
-0004a590: 6971 7569 6461 7469 6f6e 5072 6963 6553  iquidationPriceS
-0004a5a0: 7472 696e 6752 6177 290a 2020 2020 2020  tringRaw).      
-0004a5b0: 2020 2020 2020 7472 756e 6361 7465 644c        truncatedL
-0004a5c0: 6971 7569 6461 7469 6f6e 5072 6963 6520  iquidationPrice 
-0004a5d0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-0004a5e0: 5f64 6976 286c 6971 7569 6461 7469 6f6e  _div(liquidation
-0004a5f0: 5072 6963 6552 6f75 6e64 6564 5374 7269  PriceRoundedStri
-0004a600: 6e67 2c20 2731 272c 2070 7269 6365 5072  ng, '1', pricePr
-0004a610: 6563 6973 696f 6e29 0a20 2020 2020 2020  ecision).       
-0004a620: 2020 2020 2069 6620 7472 756e 6361 7465       if truncate
-0004a630: 644c 6971 7569 6461 7469 6f6e 5072 6963  dLiquidationPric
-0004a640: 655b 305d 203d 3d20 272d 273a 0a20 2020  e[0] == '-':.   
-0004a650: 2020 2020 2020 2020 2020 2020 2023 2075               # u
-0004a660: 7365 7220 6361 6e6e 6f74 2062 6520 6c69  ser cannot be li
-0004a670: 7175 6964 6174 6564 0a20 2020 2020 2020  quidated.       
-0004a680: 2020 2020 2020 2020 2023 2073 696e 6365           # since
-0004a690: 2068 6520 6861 7320 6d6f 7265 2063 6f6c   he has more col
-0004a6a0: 6c61 7465 7261 6c20 7468 616e 2074 6865  lateral than the
-0004a6b0: 2073 697a 6520 6f66 2074 6865 2070 6f73   size of the pos
-0004a6c0: 6974 696f 6e0a 2020 2020 2020 2020 2020  ition.          
-0004a6d0: 2020 2020 2020 7472 756e 6361 7465 644c        truncatedL
-0004a6e0: 6971 7569 6461 7469 6f6e 5072 6963 6520  iquidationPrice 
-0004a6f0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
-0004a700: 2020 206c 6971 7569 6461 7469 6f6e 5072     liquidationPr
-0004a710: 6963 6520 3d20 7365 6c66 2e70 6172 7365  ice = self.parse
-0004a720: 5f6e 756d 6265 7228 7472 756e 6361 7465  _number(truncate
-0004a730: 644c 6971 7569 6461 7469 6f6e 5072 6963  dLiquidationPric
-0004a740: 6529 0a20 2020 2020 2020 2070 6f73 6974  e).        posit
-0004a750: 696f 6e53 6964 6520 3d20 7365 6c66 2e73  ionSide = self.s
-0004a760: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
-0004a770: 696f 6e2c 2027 706f 7369 7469 6f6e 5369  ion, 'positionSi
-0004a780: 6465 2729 0a20 2020 2020 2020 2068 6564  de').        hed
-0004a790: 6765 6420 3d20 706f 7369 7469 6f6e 5369  ged = positionSi
-0004a7a0: 6465 2021 3d20 2742 4f54 4827 0a20 2020  de != 'BOTH'.   
-0004a7b0: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
-0004a7c0: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
-0004a7d0: 3a20 706f 7369 7469 6f6e 2c0a 2020 2020  : position,.    
-0004a7e0: 2020 2020 2020 2020 2769 6427 3a20 4e6f          'id': No
-0004a7f0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-0004a800: 2773 796d 626f 6c27 3a20 7379 6d62 6f6c  'symbol': symbol
-0004a810: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-0004a820: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
-0004a830: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
-0004a840: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
-0004a850: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
-0004a860: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
-0004a870: 2020 2027 696e 6974 6961 6c4d 6172 6769     'initialMargi
-0004a880: 6e27 3a20 696e 6974 6961 6c4d 6172 6769  n': initialMargi
-0004a890: 6e2c 0a20 2020 2020 2020 2020 2020 2027  n,.            '
-0004a8a0: 696e 6974 6961 6c4d 6172 6769 6e50 6572  initialMarginPer
-0004a8b0: 6365 6e74 6167 6527 3a20 7365 6c66 2e70  centage': self.p
-0004a8c0: 6172 7365 5f6e 756d 6265 7228 696e 6974  arse_number(init
-0004a8d0: 6961 6c4d 6172 6769 6e50 6572 6365 6e74  ialMarginPercent
-0004a8e0: 6167 6553 7472 696e 6729 2c0a 2020 2020  ageString),.    
-0004a8f0: 2020 2020 2020 2020 276d 6169 6e74 656e          'mainten
-0004a900: 616e 6365 4d61 7267 696e 273a 206d 6169  anceMargin': mai
-0004a910: 6e74 656e 616e 6365 4d61 7267 696e 2c0a  ntenanceMargin,.
-0004a920: 2020 2020 2020 2020 2020 2020 276d 6169              'mai
-0004a930: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004a940: 7263 656e 7461 6765 273a 206d 6169 6e74  rcentage': maint
-0004a950: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-0004a960: 656e 7461 6765 2c0a 2020 2020 2020 2020  entage,.        
-0004a970: 2020 2020 2765 6e74 7279 5072 6963 6527      'entryPrice'
-0004a980: 3a20 656e 7472 7950 7269 6365 2c0a 2020  : entryPrice,.  
-0004a990: 2020 2020 2020 2020 2020 276e 6f74 696f            'notio
-0004a9a0: 6e61 6c27 3a20 6e6f 7469 6f6e 616c 2c0a  nal': notional,.
-0004a9b0: 2020 2020 2020 2020 2020 2020 276c 6576              'lev
-0004a9c0: 6572 6167 6527 3a20 7365 6c66 2e70 6172  erage': self.par
-0004a9d0: 7365 5f6e 756d 6265 7228 6c65 7665 7261  se_number(levera
-0004a9e0: 6765 5374 7269 6e67 292c 0a20 2020 2020  geString),.     
-0004a9f0: 2020 2020 2020 2027 756e 7265 616c 697a         'unrealiz
-0004aa00: 6564 506e 6c27 3a20 756e 7265 616c 697a  edPnl': unrealiz
-0004aa10: 6564 506e 6c2c 0a20 2020 2020 2020 2020  edPnl,.         
-0004aa20: 2020 2027 636f 6e74 7261 6374 7327 3a20     'contracts': 
-0004aa30: 636f 6e74 7261 6374 732c 0a20 2020 2020  contracts,.     
-0004aa40: 2020 2020 2020 2027 636f 6e74 7261 6374         'contract
-0004aa50: 5369 7a65 273a 2063 6f6e 7472 6163 7453  Size': contractS
-0004aa60: 697a 652c 0a20 2020 2020 2020 2020 2020  ize,.           
-0004aa70: 2027 6d61 7267 696e 5261 7469 6f27 3a20   'marginRatio': 
-0004aa80: 6d61 7267 696e 5261 7469 6f2c 0a20 2020  marginRatio,.   
-0004aa90: 2020 2020 2020 2020 2027 6c69 7175 6964           'liquid
-0004aaa0: 6174 696f 6e50 7269 6365 273a 206c 6971  ationPrice': liq
-0004aab0: 7569 6461 7469 6f6e 5072 6963 652c 0a20  uidationPrice,. 
-0004aac0: 2020 2020 2020 2020 2020 2027 6d61 726b             'mark
-0004aad0: 5072 6963 6527 3a20 4e6f 6e65 2c0a 2020  Price': None,.  
-0004aae0: 2020 2020 2020 2020 2020 2763 6f6c 6c61            'colla
-0004aaf0: 7465 7261 6c27 3a20 636f 6c6c 6174 6572  teral': collater
-0004ab00: 616c 2c0a 2020 2020 2020 2020 2020 2020  al,.            
-0004ab10: 276d 6172 6769 6e4d 6f64 6527 3a20 6d61  'marginMode': ma
-0004ab20: 7267 696e 4d6f 6465 2c0a 2020 2020 2020  rginMode,.      
-0004ab30: 2020 2020 2020 2773 6964 6527 3a20 7369        'side': si
-0004ab40: 6465 2c0a 2020 2020 2020 2020 2020 2020  de,.            
-0004ab50: 2768 6564 6765 6427 3a20 6865 6467 6564  'hedged': hedged
-0004ab60: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
-0004ab70: 6572 6365 6e74 6167 6527 3a20 7065 7263  ercentage': perc
-0004ab80: 656e 7461 6765 2c0a 2020 2020 2020 2020  entage,.        
-0004ab90: 7d0a 0a20 2020 2064 6566 2070 6172 7365  }..    def parse
-0004aba0: 5f70 6f73 6974 696f 6e5f 7269 736b 2873  _position_risk(s
-0004abb0: 656c 662c 2070 6f73 6974 696f 6e2c 206d  elf, position, m
-0004abc0: 6172 6b65 743d 4e6f 6e65 293a 0a20 2020  arket=None):.   
-0004abd0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0004abe0: 2075 7364 6d0a 2020 2020 2020 2020 2320   usdm.        # 
-0004abf0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0004ac00: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-0004ac10: 2242 5443 5553 4454 222c 0a20 2020 2020  "BTCUSDT",.     
-0004ac20: 2020 2023 2020 2020 2020 2022 706f 7369     #       "posi
-0004ac30: 7469 6f6e 416d 7422 3a20 2230 2e30 3031  tionAmt": "0.001
-0004ac40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004ac50: 2020 2022 656e 7472 7950 7269 6365 223a     "entryPrice":
-0004ac60: 2022 3433 3537 382e 3037 3030 3022 2c0a   "43578.07000",.
-0004ac70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004ac80: 226d 6172 6b50 7269 6365 223a 2022 3433  "markPrice": "43
-0004ac90: 3533 322e 3330 3030 3030 3030 222c 0a20  532.30000000",. 
-0004aca0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-0004acb0: 756e 5265 616c 697a 6564 5072 6f66 6974  unRealizedProfit
-0004acc0: 223a 2022 2d30 2e30 3435 3737 3030 3022  ": "-0.04577000"
-0004acd0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004ace0: 2020 226c 6971 7569 6461 7469 6f6e 5072    "liquidationPr
-0004acf0: 6963 6522 3a20 2232 3138 3431 2e32 3439  ice": "21841.249
-0004ad00: 3933 3937 3622 2c0a 2020 2020 2020 2020  93976",.        
-0004ad10: 2320 2020 2020 2020 226c 6576 6572 6167  #       "leverag
-0004ad20: 6522 3a20 2232 222c 0a20 2020 2020 2020  e": "2",.       
-0004ad30: 2023 2020 2020 2020 2022 6d61 784e 6f74   #       "maxNot
-0004ad40: 696f 6e61 6c56 616c 7565 223a 2022 3330  ionalValue": "30
-0004ad50: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-0004ad60: 2020 2320 2020 2020 2020 226d 6172 6769    #       "margi
-0004ad70: 6e54 7970 6522 3a20 2269 736f 6c61 7465  nType": "isolate
-0004ad80: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
-0004ad90: 2020 2020 2269 736f 6c61 7465 644d 6172      "isolatedMar
-0004ada0: 6769 6e22 3a20 2232 312e 3737 3834 3135  gin": "21.778415
-0004adb0: 3036 222c 0a20 2020 2020 2020 2023 2020  06",.        #  
-0004adc0: 2020 2020 2022 6973 4175 746f 4164 644d       "isAutoAddM
-0004add0: 6172 6769 6e22 3a20 2266 616c 7365 222c  argin": "false",
-0004ade0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004adf0: 2022 706f 7369 7469 6f6e 5369 6465 223a   "positionSide":
-0004ae00: 2022 424f 5448 222c 0a20 2020 2020 2020   "BOTH",.       
-0004ae10: 2023 2020 2020 2020 2022 6e6f 7469 6f6e   #       "notion
-0004ae20: 616c 223a 2022 3433 2e35 3332 3330 3030  al": "43.5323000
-0004ae30: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004ae40: 2020 2020 2269 736f 6c61 7465 6457 616c      "isolatedWal
-0004ae50: 6c65 7422 3a20 2232 312e 3832 3431 3835  let": "21.824185
-0004ae60: 3036 222c 0a20 2020 2020 2020 2023 2020  06",.        #  
-0004ae70: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-0004ae80: 223a 2022 3136 3231 3335 3830 3233 3838  ": "162135802388
-0004ae90: 3622 0a20 2020 2020 2020 2023 2020 2020  6".        #    
-0004aea0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0004aeb0: 2020 2020 2023 2063 6f69 6e6d 0a20 2020       # coinm.   
-0004aec0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-0004aed0: 2020 2020 2023 2020 2020 2020 2022 7379       #       "sy
-0004aee0: 6d62 6f6c 223a 2022 4254 4355 5344 5f50  mbol": "BTCUSD_P
-0004aef0: 4552 5022 2c0a 2020 2020 2020 2020 2320  ERP",.        # 
-0004af00: 2020 2020 2020 2270 6f73 6974 696f 6e41        "positionA
-0004af10: 6d74 223a 2022 3222 2c0a 2020 2020 2020  mt": "2",.      
-0004af20: 2020 2320 2020 2020 2020 2265 6e74 7279    #       "entry
-0004af30: 5072 6963 6522 3a20 2233 3736 3433 2e31  Price": "37643.1
-0004af40: 3030 3030 3032 3122 2c0a 2020 2020 2020  0000021",.      
-0004af50: 2020 2320 2020 2020 2020 226d 6172 6b50    #       "markP
-0004af60: 7269 6365 223a 2022 3338 3130 332e 3035  rice": "38103.05
-0004af70: 3531 3034 3535 222c 0a20 2020 2020 2020  510455",.       
-0004af80: 2023 2020 2020 2020 2022 756e 5265 616c   #       "unReal
-0004af90: 697a 6564 5072 6f66 6974 223a 2022 302e  izedProfit": "0.
-0004afa0: 3030 3030 3634 3133 222c 0a20 2020 2020  00006413",.     
-0004afb0: 2020 2023 2020 2020 2020 2022 6c69 7175     #       "liqu
-0004afc0: 6964 6174 696f 6e50 7269 6365 223a 2022  idationPrice": "
-0004afd0: 3235 3131 392e 3937 3434 3537 3630 222c  25119.97445760",
-0004afe0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004aff0: 2022 6c65 7665 7261 6765 223a 2022 3222   "leverage": "2"
-0004b000: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004b010: 2020 226d 6178 5174 7922 3a20 2231 3530    "maxQty": "150
-0004b020: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004b030: 2020 2020 226d 6172 6769 6e54 7970 6522      "marginType"
-0004b040: 3a20 2269 736f 6c61 7465 6422 2c0a 2020  : "isolated",.  
-0004b050: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
-0004b060: 736f 6c61 7465 644d 6172 6769 6e22 3a20  solatedMargin": 
-0004b070: 2230 2e30 3032 3734 3437 3122 2c0a 2020  "0.00274471",.  
-0004b080: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
-0004b090: 7341 7574 6f41 6464 4d61 7267 696e 223a  sAutoAddMargin":
-0004b0a0: 2022 6661 6c73 6522 2c0a 2020 2020 2020   "false",.      
-0004b0b0: 2020 2320 2020 2020 2020 2270 6f73 6974    #       "posit
-0004b0c0: 696f 6e53 6964 6522 3a20 2242 4f54 4822  ionSide": "BOTH"
-0004b0d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004b0e0: 2020 226e 6f74 696f 6e61 6c56 616c 7565    "notionalValue
-0004b0f0: 223a 2022 302e 3030 3532 3438 3932 222c  ": "0.00524892",
-0004b100: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004b110: 2022 6973 6f6c 6174 6564 5761 6c6c 6574   "isolatedWallet
-0004b120: 223a 2022 302e 3030 3236 3830 3538 220a  ": "0.00268058".
-0004b130: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0004b140: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0004b150: 2020 6d61 726b 6574 4964 203d 2073 656c    marketId = sel
-0004b160: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
-0004b170: 7369 7469 6f6e 2c20 2773 796d 626f 6c27  sition, 'symbol'
-0004b180: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-0004b190: 203d 2073 656c 662e 7361 6665 5f6d 6172   = self.safe_mar
-0004b1a0: 6b65 7428 6d61 726b 6574 4964 2c20 6d61  ket(marketId, ma
-0004b1b0: 726b 6574 2c20 4e6f 6e65 2c20 2763 6f6e  rket, None, 'con
-0004b1c0: 7472 6163 7427 290a 2020 2020 2020 2020  tract').        
-0004b1d0: 7379 6d62 6f6c 203d 2073 656c 662e 7361  symbol = self.sa
-0004b1e0: 6665 5f73 7472 696e 6728 6d61 726b 6574  fe_string(market
-0004b1f0: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
-0004b200: 2020 2020 6c65 7665 7261 6765 4272 6163      leverageBrac
-0004b210: 6b65 7473 203d 2073 656c 662e 7361 6665  kets = self.safe
-0004b220: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
-0004b230: 6f6e 732c 2027 6c65 7665 7261 6765 4272  ons, 'leverageBr
-0004b240: 6163 6b65 7473 272c 207b 7d29 0a20 2020  ackets', {}).   
-0004b250: 2020 2020 206c 6576 6572 6167 6542 7261       leverageBra
-0004b260: 636b 6574 203d 2073 656c 662e 7361 6665  cket = self.safe
-0004b270: 5f76 616c 7565 286c 6576 6572 6167 6542  _value(leverageB
-0004b280: 7261 636b 6574 732c 2073 796d 626f 6c2c  rackets, symbol,
-0004b290: 205b 5d29 0a20 2020 2020 2020 206e 6f74   []).        not
-0004b2a0: 696f 6e61 6c53 7472 696e 6720 3d20 7365  ionalString = se
-0004b2b0: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
-0004b2c0: 2870 6f73 6974 696f 6e2c 2027 6e6f 7469  (position, 'noti
-0004b2d0: 6f6e 616c 272c 2027 6e6f 7469 6f6e 616c  onal', 'notional
-0004b2e0: 5661 6c75 6527 290a 2020 2020 2020 2020  Value').        
-0004b2f0: 6e6f 7469 6f6e 616c 5374 7269 6e67 4162  notionalStringAb
-0004b300: 7320 3d20 5072 6563 6973 652e 7374 7269  s = Precise.stri
-0004b310: 6e67 5f61 6273 286e 6f74 696f 6e61 6c53  ng_abs(notionalS
-0004b320: 7472 696e 6729 0a20 2020 2020 2020 206d  tring).        m
-0004b330: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
-0004b340: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
-0004b350: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0004b360: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0004b370: 2c20 6c65 6e28 6c65 7665 7261 6765 4272  , len(leverageBr
-0004b380: 6163 6b65 7429 293a 0a20 2020 2020 2020  acket)):.       
-0004b390: 2020 2020 2062 7261 636b 6574 203d 206c       bracket = l
-0004b3a0: 6576 6572 6167 6542 7261 636b 6574 5b69  everageBracket[i
-0004b3b0: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
-0004b3c0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004b3d0: 6c74 286e 6f74 696f 6e61 6c53 7472 696e  lt(notionalStrin
-0004b3e0: 6741 6273 2c20 6272 6163 6b65 745b 305d  gAbs, bracket[0]
-0004b3f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0004b400: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
-0004b410: 2020 2020 206d 6169 6e74 656e 616e 6365       maintenance
-0004b420: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
-0004b430: 5374 7269 6e67 203d 2062 7261 636b 6574  String = bracket
-0004b440: 5b31 5d0a 2020 2020 2020 2020 6e6f 7469  [1].        noti
-0004b450: 6f6e 616c 203d 2073 656c 662e 7061 7273  onal = self.pars
-0004b460: 655f 6e75 6d62 6572 286e 6f74 696f 6e61  e_number(notiona
-0004b470: 6c53 7472 696e 6741 6273 290a 2020 2020  lStringAbs).    
-0004b480: 2020 2020 636f 6e74 7261 6374 7341 6273      contractsAbs
-0004b490: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-0004b4a0: 675f 6162 7328 7365 6c66 2e73 6166 655f  g_abs(self.safe_
-0004b4b0: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
-0004b4c0: 2027 706f 7369 7469 6f6e 416d 7427 2929   'positionAmt'))
-0004b4d0: 0a20 2020 2020 2020 2063 6f6e 7472 6163  .        contrac
-0004b4e0: 7473 203d 2073 656c 662e 7061 7273 655f  ts = self.parse_
-0004b4f0: 6e75 6d62 6572 2863 6f6e 7472 6163 7473  number(contracts
-0004b500: 4162 7329 0a20 2020 2020 2020 2075 6e72  Abs).        unr
-0004b510: 6561 6c69 7a65 6450 6e6c 5374 7269 6e67  ealizedPnlString
-0004b520: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0004b530: 696e 6728 706f 7369 7469 6f6e 2c20 2775  ing(position, 'u
-0004b540: 6e52 6561 6c69 7a65 6450 726f 6669 7427  nRealizedProfit'
-0004b550: 290a 2020 2020 2020 2020 756e 7265 616c  ).        unreal
-0004b560: 697a 6564 506e 6c20 3d20 7365 6c66 2e70  izedPnl = self.p
-0004b570: 6172 7365 5f6e 756d 6265 7228 756e 7265  arse_number(unre
-0004b580: 616c 697a 6564 506e 6c53 7472 696e 6729  alizedPnlString)
-0004b590: 0a20 2020 2020 2020 206c 6576 6572 6167  .        leverag
-0004b5a0: 6553 7472 696e 6720 3d20 7365 6c66 2e73  eString = self.s
-0004b5b0: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
-0004b5c0: 696f 6e2c 2027 6c65 7665 7261 6765 2729  ion, 'leverage')
-0004b5d0: 0a20 2020 2020 2020 206c 6576 6572 6167  .        leverag
-0004b5e0: 6520 3d20 696e 7428 6c65 7665 7261 6765  e = int(leverage
-0004b5f0: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-0004b600: 6c69 7175 6964 6174 696f 6e50 7269 6365  liquidationPrice
-0004b610: 5374 7269 6e67 203d 2073 656c 662e 6f6d  String = self.om
-0004b620: 6974 5f7a 6572 6f28 7365 6c66 2e73 6166  it_zero(self.saf
-0004b630: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
-0004b640: 6e2c 2027 6c69 7175 6964 6174 696f 6e50  n, 'liquidationP
-0004b650: 7269 6365 2729 290a 2020 2020 2020 2020  rice')).        
-0004b660: 6c69 7175 6964 6174 696f 6e50 7269 6365  liquidationPrice
-0004b670: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
-0004b680: 6d62 6572 286c 6971 7569 6461 7469 6f6e  mber(liquidation
-0004b690: 5072 6963 6553 7472 696e 6729 0a20 2020  PriceString).   
-0004b6a0: 2020 2020 2063 6f6c 6c61 7465 7261 6c53       collateralS
-0004b6b0: 7472 696e 6720 3d20 4e6f 6e65 0a20 2020  tring = None.   
-0004b6c0: 2020 2020 206d 6172 6769 6e4d 6f64 6520       marginMode 
-0004b6d0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0004b6e0: 6e67 2870 6f73 6974 696f 6e2c 2027 6d61  ng(position, 'ma
-0004b6f0: 7267 696e 5479 7065 2729 0a20 2020 2020  rginType').     
-0004b700: 2020 2073 6964 6520 3d20 4e6f 6e65 0a20     side = None. 
-0004b710: 2020 2020 2020 2069 6620 5072 6563 6973         if Precis
-0004b720: 652e 7374 7269 6e67 5f67 7428 6e6f 7469  e.string_gt(noti
-0004b730: 6f6e 616c 5374 7269 6e67 2c20 2730 2729  onalString, '0')
-0004b740: 3a0a 2020 2020 2020 2020 2020 2020 7369  :.            si
-0004b750: 6465 203d 2027 6c6f 6e67 270a 2020 2020  de = 'long'.    
-0004b760: 2020 2020 656c 6966 2050 7265 6369 7365      elif Precise
-0004b770: 2e73 7472 696e 675f 6c74 286e 6f74 696f  .string_lt(notio
-0004b780: 6e61 6c53 7472 696e 672c 2027 3027 293a  nalString, '0'):
-0004b790: 0a20 2020 2020 2020 2020 2020 2073 6964  .            sid
-0004b7a0: 6520 3d20 2773 686f 7274 270a 2020 2020  e = 'short'.    
-0004b7b0: 2020 2020 656e 7472 7950 7269 6365 5374      entryPriceSt
-0004b7c0: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
-0004b7d0: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
-0004b7e0: 2c20 2765 6e74 7279 5072 6963 6527 290a  , 'entryPrice').
-0004b7f0: 2020 2020 2020 2020 656e 7472 7950 7269          entryPri
-0004b800: 6365 203d 2073 656c 662e 7061 7273 655f  ce = self.parse_
-0004b810: 6e75 6d62 6572 2865 6e74 7279 5072 6963  number(entryPric
-0004b820: 6553 7472 696e 6729 0a20 2020 2020 2020  eString).       
-0004b830: 2063 6f6e 7472 6163 7453 697a 6520 3d20   contractSize = 
-0004b840: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-0004b850: 6d61 726b 6574 2c20 2763 6f6e 7472 6163  market, 'contrac
-0004b860: 7453 697a 6527 290a 2020 2020 2020 2020  tSize').        
-0004b870: 636f 6e74 7261 6374 5369 7a65 5374 7269  contractSizeStri
-0004b880: 6e67 203d 2073 656c 662e 6e75 6d62 6572  ng = self.number
-0004b890: 5f74 6f5f 7374 7269 6e67 2863 6f6e 7472  _to_string(contr
-0004b8a0: 6163 7453 697a 6529 0a20 2020 2020 2020  actSize).       
-0004b8b0: 2023 2074 6f20 6e6f 7469 6f6e 616c 5661   # to notionalVa
-0004b8c0: 6c75 650a 2020 2020 2020 2020 6c69 6e65  lue.        line
-0004b8d0: 6172 203d 2028 276e 6f74 696f 6e61 6c27  ar = ('notional'
-0004b8e0: 2069 6e20 706f 7369 7469 6f6e 290a 2020   in position).  
-0004b8f0: 2020 2020 2020 6966 206d 6172 6769 6e4d        if marginM
-0004b900: 6f64 6520 3d3d 2027 6372 6f73 7327 3a0a  ode == 'cross':.
-0004b910: 2020 2020 2020 2020 2020 2020 2320 6361              # ca
-0004b920: 6c63 756c 6174 6520 636f 6c6c 6174 6572  lculate collater
-0004b930: 616c 0a20 2020 2020 2020 2020 2020 2070  al.            p
-0004b940: 7265 6369 7369 6f6e 203d 2073 656c 662e  recision = self.
-0004b950: 7361 6665 5f76 616c 7565 286d 6172 6b65  safe_value(marke
-0004b960: 742c 2027 7072 6563 6973 696f 6e27 2c20  t, 'precision', 
-0004b970: 7b7d 290a 2020 2020 2020 2020 2020 2020  {}).            
-0004b980: 6966 206c 696e 6561 723a 0a20 2020 2020  if linear:.     
-0004b990: 2020 2020 2020 2020 2020 2023 2077 616c             # wal
-0004b9a0: 6c65 7442 616c 616e 6365 203d 2028 6c69  letBalance = (li
-0004b9b0: 7175 6964 6174 696f 6e50 7269 6365 202a  quidationPrice *
-0004b9c0: 2028 c2b1 3120 2b20 6d6d 7029 20c2 b120   (..1 + mmp) .. 
-0004b9d0: 656e 7472 7950 7269 6365 2920 2a20 636f  entryPrice) * co
-0004b9e0: 6e74 7261 6374 730a 2020 2020 2020 2020  ntracts.        
-0004b9f0: 2020 2020 2020 2020 6f6e 6550 6c75 734d          onePlusM
-0004ba00: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
-0004ba10: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
-0004ba20: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0004ba30: 2020 2020 2020 2020 656e 7472 7950 7269          entryPri
-0004ba40: 6365 5369 676e 5374 7269 6e67 203d 2065  ceSignString = e
-0004ba50: 6e74 7279 5072 6963 6553 7472 696e 670a  ntryPriceString.
-0004ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ba70: 6966 2073 6964 6520 3d3d 2027 7368 6f72  if side == 'shor
-0004ba80: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
-0004ba90: 2020 2020 2020 2020 6f6e 6550 6c75 734d          onePlusM
-0004baa0: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
-0004bab0: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
-0004bac0: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-0004bad0: 675f 6164 6428 2731 272c 206d 6169 6e74  g_add('1', maint
-0004bae0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-0004baf0: 656e 7461 6765 5374 7269 6e67 290a 2020  entageString).  
-0004bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bb10: 2020 656e 7472 7950 7269 6365 5369 676e    entryPriceSign
-0004bb20: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
-0004bb30: 2e73 7472 696e 675f 6d75 6c28 272d 3127  .string_mul('-1'
-0004bb40: 2c20 656e 7472 7950 7269 6365 5369 676e  , entryPriceSign
-0004bb50: 5374 7269 6e67 290a 2020 2020 2020 2020  String).        
-0004bb60: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0004bb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bb80: 2020 6f6e 6550 6c75 734d 6169 6e74 656e    onePlusMainten
-0004bb90: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-0004bba0: 7461 6765 5374 7269 6e67 203d 2050 7265  tageString = Pre
-0004bbb0: 6369 7365 2e73 7472 696e 675f 6164 6428  cise.string_add(
-0004bbc0: 272d 3127 2c20 6d61 696e 7465 6e61 6e63  '-1', maintenanc
-0004bbd0: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
-0004bbe0: 6553 7472 696e 6729 0a20 2020 2020 2020  eString).       
-0004bbf0: 2020 2020 2020 2020 2069 6e6e 6572 203d           inner =
-0004bc00: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004bc10: 6d75 6c28 6c69 7175 6964 6174 696f 6e50  mul(liquidationP
-0004bc20: 7269 6365 5374 7269 6e67 2c20 6f6e 6550  riceString, oneP
-0004bc30: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-0004bc40: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-0004bc50: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0004bc60: 2020 2020 2020 6c65 6674 5369 6465 203d        leftSide =
-0004bc70: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004bc80: 6164 6428 696e 6e65 722c 2065 6e74 7279  add(inner, entry
-0004bc90: 5072 6963 6553 6967 6e53 7472 696e 6729  PriceSignString)
-0004bca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004bcb0: 2070 7269 6365 5072 6563 6973 696f 6e20   pricePrecision 
-0004bcc0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-0004bcd0: 6765 7228 7072 6563 6973 696f 6e2c 2027  ger(precision, '
-0004bce0: 7072 6963 6527 290a 2020 2020 2020 2020  price').        
-0004bcf0: 2020 2020 2020 2020 7175 6f74 6550 7265          quotePre
-0004bd00: 6369 7369 6f6e 203d 2073 656c 662e 7361  cision = self.sa
-0004bd10: 6665 5f69 6e74 6567 6572 2870 7265 6369  fe_integer(preci
-0004bd20: 7369 6f6e 2c20 2771 756f 7465 272c 2070  sion, 'quote', p
-0004bd30: 7269 6365 5072 6563 6973 696f 6e29 0a20  ricePrecision). 
-0004bd40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0004bd50: 6620 7175 6f74 6550 7265 6369 7369 6f6e  f quotePrecision
-0004bd60: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0004bd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bd80: 2020 636f 6c6c 6174 6572 616c 5374 7269    collateralStri
-0004bd90: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
-0004bda0: 696e 675f 6469 7628 5072 6563 6973 652e  ing_div(Precise.
-0004bdb0: 7374 7269 6e67 5f6d 756c 286c 6566 7453  string_mul(leftS
-0004bdc0: 6964 652c 2063 6f6e 7472 6163 7473 4162  ide, contractsAb
-0004bdd0: 7329 2c20 2731 272c 2071 756f 7465 5072  s), '1', quotePr
-0004bde0: 6563 6973 696f 6e29 0a20 2020 2020 2020  ecision).       
-0004bdf0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0004be00: 2020 2020 2020 2020 2020 2023 2077 616c             # wal
-0004be10: 6c65 7442 616c 616e 6365 203d 2028 636f  letBalance = (co
-0004be20: 6e74 7261 6374 7320 2a20 636f 6e74 7261  ntracts * contra
-0004be30: 6374 5369 7a65 2920 2a20 28c2 b131 2f65  ctSize) * (..1/e
-0004be40: 6e74 7279 5072 6963 6520 2d20 28c2 b131  ntryPrice - (..1
-0004be50: 202d 206d 6d70 2920 2f20 6c69 7175 6964   - mmp) / liquid
-0004be60: 6174 696f 6e50 7269 6365 290a 2020 2020  ationPrice).    
-0004be70: 2020 2020 2020 2020 2020 2020 6f6e 6550              oneP
-0004be80: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-0004be90: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-0004bea0: 7269 6e67 203d 204e 6f6e 650a 2020 2020  ring = None.    
-0004beb0: 2020 2020 2020 2020 2020 2020 656e 7472              entr
-0004bec0: 7950 7269 6365 5369 676e 5374 7269 6e67  yPriceSignString
-0004bed0: 203d 2065 6e74 7279 5072 6963 6553 7472   = entryPriceStr
-0004bee0: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
-0004bef0: 2020 2020 6966 2073 6964 6520 3d3d 2027      if side == '
-0004bf00: 7368 6f72 7427 3a0a 2020 2020 2020 2020  short':.        
-0004bf10: 2020 2020 2020 2020 2020 2020 6f6e 6550              oneP
-0004bf20: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-0004bf30: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-0004bf40: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
-0004bf50: 7472 696e 675f 7375 6228 2731 272c 206d  tring_sub('1', m
-0004bf60: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
-0004bf70: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
-0004bf80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0004bf90: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0004bfa0: 2020 2020 2020 2020 2020 2020 6f6e 6550              oneP
-0004bfb0: 6c75 734d 6169 6e74 656e 616e 6365 4d61  lusMaintenanceMa
-0004bfc0: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
-0004bfd0: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
-0004bfe0: 7472 696e 675f 7375 6228 272d 3127 2c20  tring_sub('-1', 
-0004bff0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
-0004c000: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
-0004c010: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-0004c020: 2020 2020 2020 2065 6e74 7279 5072 6963         entryPric
-0004c030: 6553 6967 6e53 7472 696e 6720 3d20 5072  eSignString = Pr
-0004c040: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
-0004c050: 2827 2d31 272c 2065 6e74 7279 5072 6963  ('-1', entryPric
-0004c060: 6553 6967 6e53 7472 696e 6729 0a20 2020  eSignString).   
-0004c070: 2020 2020 2020 2020 2020 2020 206c 6566               lef
-0004c080: 7453 6964 6520 3d20 5072 6563 6973 652e  tSide = Precise.
-0004c090: 7374 7269 6e67 5f6d 756c 2863 6f6e 7472  string_mul(contr
-0004c0a0: 6163 7473 4162 732c 2063 6f6e 7472 6163  actsAbs, contrac
-0004c0b0: 7453 697a 6553 7472 696e 6729 0a20 2020  tSizeString).   
-0004c0c0: 2020 2020 2020 2020 2020 2020 2072 6967               rig
-0004c0d0: 6874 5369 6465 203d 2050 7265 6369 7365  htSide = Precise
-0004c0e0: 2e73 7472 696e 675f 7375 6228 5072 6563  .string_sub(Prec
-0004c0f0: 6973 652e 7374 7269 6e67 5f64 6976 2827  ise.string_div('
-0004c100: 3127 2c20 656e 7472 7950 7269 6365 5369  1', entryPriceSi
-0004c110: 676e 5374 7269 6e67 292c 2050 7265 6369  gnString), Preci
-0004c120: 7365 2e73 7472 696e 675f 6469 7628 6f6e  se.string_div(on
-0004c130: 6550 6c75 734d 6169 6e74 656e 616e 6365  ePlusMaintenance
-0004c140: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
-0004c150: 5374 7269 6e67 2c20 6c69 7175 6964 6174  String, liquidat
-0004c160: 696f 6e50 7269 6365 5374 7269 6e67 2929  ionPriceString))
-0004c170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004c180: 2062 6173 6550 7265 6369 7369 6f6e 203d   basePrecision =
-0004c190: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-0004c1a0: 6572 2870 7265 6369 7369 6f6e 2c20 2762  er(precision, 'b
-0004c1b0: 6173 6527 290a 2020 2020 2020 2020 2020  ase').          
-0004c1c0: 2020 2020 2020 6966 2062 6173 6550 7265        if basePre
-0004c1d0: 6369 7369 6f6e 2069 7320 6e6f 7420 4e6f  cision is not No
-0004c1e0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0004c1f0: 2020 2020 2020 2020 636f 6c6c 6174 6572          collater
-0004c200: 616c 5374 7269 6e67 203d 2050 7265 6369  alString = Preci
-0004c210: 7365 2e73 7472 696e 675f 6469 7628 5072  se.string_div(Pr
-0004c220: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
-0004c230: 286c 6566 7453 6964 652c 2072 6967 6874  (leftSide, right
-0004c240: 5369 6465 292c 2027 3127 2c20 6261 7365  Side), '1', base
-0004c250: 5072 6563 6973 696f 6e29 0a20 2020 2020  Precision).     
-0004c260: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0004c270: 2020 2020 2063 6f6c 6c61 7465 7261 6c53       collateralS
-0004c280: 7472 696e 6720 3d20 7365 6c66 2e73 6166  tring = self.saf
-0004c290: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
-0004c2a0: 6e2c 2027 6973 6f6c 6174 6564 4d61 7267  n, 'isolatedMarg
-0004c2b0: 696e 2729 0a20 2020 2020 2020 2063 6f6c  in').        col
-0004c2c0: 6c61 7465 7261 6c53 7472 696e 6720 3d20  lateralString = 
-0004c2d0: 2730 2720 6966 2028 636f 6c6c 6174 6572  '0' if (collater
-0004c2e0: 616c 5374 7269 6e67 2069 7320 4e6f 6e65  alString is None
-0004c2f0: 2920 656c 7365 2063 6f6c 6c61 7465 7261  ) else collatera
-0004c300: 6c53 7472 696e 670a 2020 2020 2020 2020  lString.        
-0004c310: 636f 6c6c 6174 6572 616c 203d 2073 656c  collateral = sel
-0004c320: 662e 7061 7273 655f 6e75 6d62 6572 2863  f.parse_number(c
-0004c330: 6f6c 6c61 7465 7261 6c53 7472 696e 6729  ollateralString)
-0004c340: 0a20 2020 2020 2020 206d 6172 6b50 7269  .        markPri
-0004c350: 6365 203d 2073 656c 662e 7061 7273 655f  ce = self.parse_
-0004c360: 6e75 6d62 6572 2873 656c 662e 6f6d 6974  number(self.omit
-0004c370: 5f7a 6572 6f28 7365 6c66 2e73 6166 655f  _zero(self.safe_
-0004c380: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
-0004c390: 2027 6d61 726b 5072 6963 6527 2929 290a   'markPrice'))).
-0004c3a0: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
-0004c3b0: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
-0004c3c0: 7465 6765 7228 706f 7369 7469 6f6e 2c20  teger(position, 
-0004c3d0: 2775 7064 6174 6554 696d 6527 290a 2020  'updateTime').  
-0004c3e0: 2020 2020 2020 6966 2074 696d 6573 7461        if timesta
-0004c3f0: 6d70 203d 3d20 303a 0a20 2020 2020 2020  mp == 0:.       
-0004c400: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
-0004c410: 204e 6f6e 650a 2020 2020 2020 2020 6d61   None.        ma
-0004c420: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-0004c430: 6572 6365 6e74 6167 6520 3d20 7365 6c66  ercentage = self
-0004c440: 2e70 6172 7365 5f6e 756d 6265 7228 6d61  .parse_number(ma
-0004c450: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
-0004c460: 6572 6365 6e74 6167 6553 7472 696e 6729  ercentageString)
-0004c470: 0a20 2020 2020 2020 206d 6169 6e74 656e  .        mainten
-0004c480: 616e 6365 4d61 7267 696e 5374 7269 6e67  anceMarginString
-0004c490: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
-0004c4a0: 675f 6d75 6c28 6d61 696e 7465 6e61 6e63  g_mul(maintenanc
-0004c4b0: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
-0004c4c0: 6553 7472 696e 672c 206e 6f74 696f 6e61  eString, notiona
-0004c4d0: 6c53 7472 696e 6741 6273 290a 2020 2020  lStringAbs).    
-0004c4e0: 2020 2020 6d61 696e 7465 6e61 6e63 654d      maintenanceM
-0004c4f0: 6172 6769 6e20 3d20 7365 6c66 2e70 6172  argin = self.par
-0004c500: 7365 5f6e 756d 6265 7228 6d61 696e 7465  se_number(mainte
-0004c510: 6e61 6e63 654d 6172 6769 6e53 7472 696e  nanceMarginStrin
-0004c520: 6729 0a20 2020 2020 2020 2069 6e69 7469  g).        initi
-0004c530: 616c 4d61 7267 696e 5065 7263 656e 7461  alMarginPercenta
-0004c540: 6765 5374 7269 6e67 203d 2050 7265 6369  geString = Preci
-0004c550: 7365 2e73 7472 696e 675f 6469 7628 2731  se.string_div('1
-0004c560: 272c 206c 6576 6572 6167 6553 7472 696e  ', leverageStrin
-0004c570: 672c 2038 290a 2020 2020 2020 2020 7261  g, 8).        ra
-0004c580: 7469 6f6e 616c 203d 2028 3130 3030 2025  tional = (1000 %
-0004c590: 206c 6576 6572 6167 6529 203d 3d20 300a   leverage) == 0.
-0004c5a0: 2020 2020 2020 2020 6966 206e 6f74 2072          if not r
-0004c5b0: 6174 696f 6e61 6c3a 0a20 2020 2020 2020  ational:.       
-0004c5c0: 2020 2020 2069 6e69 7469 616c 4d61 7267       initialMarg
-0004c5d0: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
-0004c5e0: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
-0004c5f0: 696e 675f 6164 6428 696e 6974 6961 6c4d  ing_add(initialM
-0004c600: 6172 6769 6e50 6572 6365 6e74 6167 6553  arginPercentageS
-0004c610: 7472 696e 672c 2027 3165 2d38 2729 0a20  tring, '1e-8'). 
-0004c620: 2020 2020 2020 2069 6e69 7469 616c 4d61         initialMa
-0004c630: 7267 696e 5374 7269 6e67 203d 2050 7265  rginString = Pre
-0004c640: 6369 7365 2e73 7472 696e 675f 6469 7628  cise.string_div(
-0004c650: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
-0004c660: 756c 286e 6f74 696f 6e61 6c53 7472 696e  ul(notionalStrin
-0004c670: 6741 6273 2c20 696e 6974 6961 6c4d 6172  gAbs, initialMar
-0004c680: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
-0004c690: 696e 6729 2c20 2731 272c 2038 290a 2020  ing), '1', 8).  
-0004c6a0: 2020 2020 2020 696e 6974 6961 6c4d 6172        initialMar
-0004c6b0: 6769 6e20 3d20 7365 6c66 2e70 6172 7365  gin = self.parse
-0004c6c0: 5f6e 756d 6265 7228 696e 6974 6961 6c4d  _number(initialM
-0004c6d0: 6172 6769 6e53 7472 696e 6729 0a20 2020  arginString).   
-0004c6e0: 2020 2020 206d 6172 6769 6e52 6174 696f       marginRatio
-0004c6f0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0004c700: 7065 7263 656e 7461 6765 203d 204e 6f6e  percentage = Non
-0004c710: 650a 2020 2020 2020 2020 6966 206e 6f74  e.        if not
-0004c720: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0004c730: 6571 7561 6c73 2863 6f6c 6c61 7465 7261  equals(collatera
-0004c740: 6c53 7472 696e 672c 2027 3027 293a 0a20  lString, '0'):. 
-0004c750: 2020 2020 2020 2020 2020 206d 6172 6769             margi
-0004c760: 6e52 6174 696f 203d 2073 656c 662e 7061  nRatio = self.pa
-0004c770: 7273 655f 6e75 6d62 6572 2850 7265 6369  rse_number(Preci
-0004c780: 7365 2e73 7472 696e 675f 6469 7628 5072  se.string_div(Pr
-0004c790: 6563 6973 652e 7374 7269 6e67 5f61 6464  ecise.string_add
-0004c7a0: 2850 7265 6369 7365 2e73 7472 696e 675f  (Precise.string_
-0004c7b0: 6469 7628 6d61 696e 7465 6e61 6e63 654d  div(maintenanceM
-0004c7c0: 6172 6769 6e53 7472 696e 672c 2063 6f6c  arginString, col
-0004c7d0: 6c61 7465 7261 6c53 7472 696e 6729 2c20  lateralString), 
-0004c7e0: 2735 652d 3527 292c 2027 3127 2c20 3429  '5e-5'), '1', 4)
-0004c7f0: 290a 2020 2020 2020 2020 2020 2020 7065  ).            pe
-0004c800: 7263 656e 7461 6765 203d 2073 656c 662e  rcentage = self.
-0004c810: 7061 7273 655f 6e75 6d62 6572 2850 7265  parse_number(Pre
-0004c820: 6369 7365 2e73 7472 696e 675f 6d75 6c28  cise.string_mul(
-0004c830: 5072 6563 6973 652e 7374 7269 6e67 5f64  Precise.string_d
-0004c840: 6976 2875 6e72 6561 6c69 7a65 6450 6e6c  iv(unrealizedPnl
-0004c850: 5374 7269 6e67 2c20 696e 6974 6961 6c4d  String, initialM
-0004c860: 6172 6769 6e53 7472 696e 672c 2034 292c  arginString, 4),
-0004c870: 2027 3130 3027 2929 0a20 2020 2020 2020   '100')).       
-0004c880: 2070 6f73 6974 696f 6e53 6964 6520 3d20   positionSide = 
-0004c890: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0004c8a0: 2870 6f73 6974 696f 6e2c 2027 706f 7369  (position, 'posi
-0004c8b0: 7469 6f6e 5369 6465 2729 0a20 2020 2020  tionSide').     
-0004c8c0: 2020 2068 6564 6765 6420 3d20 706f 7369     hedged = posi
-0004c8d0: 7469 6f6e 5369 6465 2021 3d20 2742 4f54  tionSide != 'BOT
-0004c8e0: 4827 0a20 2020 2020 2020 2072 6574 7572  H'.        retur
-0004c8f0: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
-0004c900: 2769 6e66 6f27 3a20 706f 7369 7469 6f6e  'info': position
-0004c910: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-0004c920: 6427 3a20 4e6f 6e65 2c0a 2020 2020 2020  d': None,.      
-0004c930: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-0004c940: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
-0004c950: 2020 2020 2763 6f6e 7472 6163 7473 273a      'contracts':
-0004c960: 2063 6f6e 7472 6163 7473 2c0a 2020 2020   contracts,.    
-0004c970: 2020 2020 2020 2020 2763 6f6e 7472 6163          'contrac
-0004c980: 7453 697a 6527 3a20 636f 6e74 7261 6374  tSize': contract
-0004c990: 5369 7a65 2c0a 2020 2020 2020 2020 2020  Size,.          
-0004c9a0: 2020 2775 6e72 6561 6c69 7a65 6450 6e6c    'unrealizedPnl
-0004c9b0: 273a 2075 6e72 6561 6c69 7a65 6450 6e6c  ': unrealizedPnl
-0004c9c0: 2c0a 2020 2020 2020 2020 2020 2020 276c  ,.            'l
-0004c9d0: 6576 6572 6167 6527 3a20 7365 6c66 2e70  everage': self.p
-0004c9e0: 6172 7365 5f6e 756d 6265 7228 6c65 7665  arse_number(leve
-0004c9f0: 7261 6765 5374 7269 6e67 292c 0a20 2020  rageString),.   
-0004ca00: 2020 2020 2020 2020 2027 6c69 7175 6964           'liquid
-0004ca10: 6174 696f 6e50 7269 6365 273a 206c 6971  ationPrice': liq
-0004ca20: 7569 6461 7469 6f6e 5072 6963 652c 0a20  uidationPrice,. 
-0004ca30: 2020 2020 2020 2020 2020 2027 636f 6c6c             'coll
-0004ca40: 6174 6572 616c 273a 2063 6f6c 6c61 7465  ateral': collate
-0004ca50: 7261 6c2c 0a20 2020 2020 2020 2020 2020  ral,.           
-0004ca60: 2027 6e6f 7469 6f6e 616c 273a 206e 6f74   'notional': not
-0004ca70: 696f 6e61 6c2c 0a20 2020 2020 2020 2020  ional,.         
-0004ca80: 2020 2027 6d61 726b 5072 6963 6527 3a20     'markPrice': 
-0004ca90: 6d61 726b 5072 6963 652c 0a20 2020 2020  markPrice,.     
-0004caa0: 2020 2020 2020 2027 656e 7472 7950 7269         'entryPri
-0004cab0: 6365 273a 2065 6e74 7279 5072 6963 652c  ce': entryPrice,
-0004cac0: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
-0004cad0: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
-0004cae0: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
-0004caf0: 2027 696e 6974 6961 6c4d 6172 6769 6e27   'initialMargin'
-0004cb00: 3a20 696e 6974 6961 6c4d 6172 6769 6e2c  : initialMargin,
-0004cb10: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-0004cb20: 6974 6961 6c4d 6172 6769 6e50 6572 6365  itialMarginPerce
-0004cb30: 6e74 6167 6527 3a20 7365 6c66 2e70 6172  ntage': self.par
-0004cb40: 7365 5f6e 756d 6265 7228 696e 6974 6961  se_number(initia
-0004cb50: 6c4d 6172 6769 6e50 6572 6365 6e74 6167  lMarginPercentag
-0004cb60: 6553 7472 696e 6729 2c0a 2020 2020 2020  eString),.      
-0004cb70: 2020 2020 2020 276d 6169 6e74 656e 616e        'maintenan
-0004cb80: 6365 4d61 7267 696e 273a 206d 6169 6e74  ceMargin': maint
-0004cb90: 656e 616e 6365 4d61 7267 696e 2c0a 2020  enanceMargin,.  
-0004cba0: 2020 2020 2020 2020 2020 276d 6169 6e74            'maint
-0004cbb0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-0004cbc0: 656e 7461 6765 273a 206d 6169 6e74 656e  entage': mainten
-0004cbd0: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
-0004cbe0: 7461 6765 2c0a 2020 2020 2020 2020 2020  tage,.          
-0004cbf0: 2020 276d 6172 6769 6e52 6174 696f 273a    'marginRatio':
-0004cc00: 206d 6172 6769 6e52 6174 696f 2c0a 2020   marginRatio,.  
-0004cc10: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
-0004cc20: 696d 6527 3a20 7365 6c66 2e69 736f 3836  ime': self.iso86
-0004cc30: 3031 2874 696d 6573 7461 6d70 292c 0a20  01(timestamp),. 
-0004cc40: 2020 2020 2020 2020 2020 2027 6d61 7267             'marg
-0004cc50: 696e 4d6f 6465 273a 206d 6172 6769 6e4d  inMode': marginM
-0004cc60: 6f64 652c 0a20 2020 2020 2020 2020 2020  ode,.           
-0004cc70: 2027 6d61 7267 696e 5479 7065 273a 206d   'marginType': m
-0004cc80: 6172 6769 6e4d 6f64 652c 2020 2320 6465  arginMode,  # de
-0004cc90: 7072 6563 6174 6564 0a20 2020 2020 2020  precated.       
-0004cca0: 2020 2020 2027 7369 6465 273a 2073 6964       'side': sid
-0004ccb0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0004ccc0: 6865 6467 6564 273a 2068 6564 6765 642c  hedged': hedged,
-0004ccd0: 0a20 2020 2020 2020 2020 2020 2027 7065  .            'pe
-0004cce0: 7263 656e 7461 6765 273a 2070 6572 6365  rcentage': perce
-0004ccf0: 6e74 6167 652c 0a20 2020 2020 2020 207d  ntage,.        }
-0004cd00: 0a0a 2020 2020 6465 6620 6c6f 6164 5f6c  ..    def load_l
-0004cd10: 6576 6572 6167 655f 6272 6163 6b65 7473  everage_brackets
-0004cd20: 2873 656c 662c 2072 656c 6f61 643d 4661  (self, reload=Fa
-0004cd30: 6c73 652c 2070 6172 616d 733d 7b7d 293a  lse, params={}):
-0004cd40: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-0004cd50: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0004cd60: 2020 2020 2023 2062 7920 6465 6661 756c       # by defaul
-0004cd70: 7420 6361 6368 6520 7468 6520 6c65 7665  t cache the leve
-0004cd80: 7261 6765 2062 7261 636b 6574 0a20 2020  rage bracket.   
-0004cd90: 2020 2020 2023 2069 7420 636f 6e74 6169       # it contai
-0004cda0: 6e73 2075 7365 6675 6c20 7374 7566 6620  ns useful stuff 
-0004cdb0: 6c69 6b65 2074 6865 206d 6169 6e74 656e  like the mainten
-0004cdc0: 616e 6365 206d 6172 6769 6e20 616e 6420  ance margin and 
-0004cdd0: 696e 6974 6961 6c20 6d61 7267 696e 2066  initial margin f
-0004cde0: 6f72 2070 6f73 6974 696f 6e73 0a20 2020  or positions.   
-0004cdf0: 2020 2020 206c 6576 6572 6167 6542 7261       leverageBra
-0004ce00: 636b 6574 7320 3d20 7365 6c66 2e73 6166  ckets = self.saf
-0004ce10: 655f 7661 6c75 6528 7365 6c66 2e6f 7074  e_value(self.opt
-0004ce20: 696f 6e73 2c20 276c 6576 6572 6167 6542  ions, 'leverageB
-0004ce30: 7261 636b 6574 7327 290a 2020 2020 2020  rackets').      
-0004ce40: 2020 6966 2028 6c65 7665 7261 6765 4272    if (leverageBr
-0004ce50: 6163 6b65 7473 2069 7320 4e6f 6e65 2920  ackets is None) 
-0004ce60: 6f72 2028 7265 6c6f 6164 293a 0a20 2020  or (reload):.   
-0004ce70: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-0004ce80: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
-0004ce90: 2020 2064 6566 6175 6c74 5479 7065 203d     defaultType =
-0004cea0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0004ceb0: 6728 7365 6c66 2e6f 7074 696f 6e73 2c20  g(self.options, 
-0004cec0: 2764 6566 6175 6c74 5479 7065 272c 2027  'defaultType', '
-0004ced0: 6675 7475 7265 2729 0a20 2020 2020 2020  future').       
-0004cee0: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
-0004cef0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-0004cf00: 616d 732c 2027 7479 7065 272c 2064 6566  ams, 'type', def
-0004cf10: 6175 6c74 5479 7065 290a 2020 2020 2020  aultType).      
-0004cf20: 2020 2020 2020 7175 6572 7920 3d20 7365        query = se
-0004cf30: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-0004cf40: 2774 7970 6527 290a 2020 2020 2020 2020  'type').        
-0004cf50: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
-0004cf60: 6e65 0a20 2020 2020 2020 2020 2020 2073  ne.            s
-0004cf70: 7562 5479 7065 2c20 7061 7261 6d73 203d  ubType, params =
-0004cf80: 2073 656c 662e 6861 6e64 6c65 5f73 7562   self.handle_sub
-0004cf90: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-0004cfa0: 2827 6c6f 6164 4c65 7665 7261 6765 4272  ('loadLeverageBr
-0004cfb0: 6163 6b65 7473 272c 204e 6f6e 652c 2070  ackets', None, p
-0004cfc0: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
-0004cfd0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0004cfe0: 7365 6c66 2e69 735f 6c69 6e65 6172 2874  self.is_linear(t
-0004cff0: 7970 652c 2073 7562 5479 7065 293a 0a20  ype, subType):. 
-0004d000: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0004d010: 6574 686f 6420 3d20 2766 6170 6950 7269  ethod = 'fapiPri
-0004d020: 7661 7465 4765 744c 6576 6572 6167 6542  vateGetLeverageB
-0004d030: 7261 636b 6574 270a 2020 2020 2020 2020  racket'.        
-0004d040: 2020 2020 656c 6966 2073 656c 662e 6973      elif self.is
-0004d050: 5f69 6e76 6572 7365 2874 7970 652c 2073  _inverse(type, s
-0004d060: 7562 5479 7065 293a 0a20 2020 2020 2020  ubType):.       
-0004d070: 2020 2020 2020 2020 206d 6574 686f 6420           method 
-0004d080: 3d20 2764 6170 6950 7269 7661 7465 5632  = 'dapiPrivateV2
-0004d090: 4765 744c 6576 6572 6167 6542 7261 636b  GetLeverageBrack
-0004d0a0: 6574 270a 2020 2020 2020 2020 2020 2020  et'.            
-0004d0b0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0004d0c0: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
-0004d0d0: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
-0004d0e0: 202b 2027 206c 6f61 644c 6576 6572 6167   + ' loadLeverag
-0004d0f0: 6542 7261 636b 6574 7328 2920 7375 7070  eBrackets() supp
-0004d100: 6f72 7473 206c 696e 6561 7220 616e 6420  orts linear and 
-0004d110: 696e 7665 7273 6520 636f 6e74 7261 6374  inverse contract
-0004d120: 7320 6f6e 6c79 2729 0a20 2020 2020 2020  s only').       
-0004d130: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0004d140: 6765 7461 7474 7228 7365 6c66 2c20 6d65  getattr(self, me
-0004d150: 7468 6f64 2928 7175 6572 7929 0a20 2020  thod)(query).   
-0004d160: 2020 2020 2020 2020 2073 656c 662e 6f70           self.op
-0004d170: 7469 6f6e 735b 276c 6576 6572 6167 6542  tions['leverageB
-0004d180: 7261 636b 6574 7327 5d20 3d20 7b7d 0a20  rackets'] = {}. 
-0004d190: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0004d1a0: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
-0004d1b0: 2872 6573 706f 6e73 6529 293a 0a20 2020  (response)):.   
-0004d1c0: 2020 2020 2020 2020 2020 2020 2065 6e74               ent
-0004d1d0: 7279 203d 2072 6573 706f 6e73 655b 695d  ry = response[i]
-0004d1e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004d1f0: 206d 6172 6b65 7449 6420 3d20 7365 6c66   marketId = self
-0004d200: 2e73 6166 655f 7374 7269 6e67 2865 6e74  .safe_string(ent
-0004d210: 7279 2c20 2773 796d 626f 6c27 290a 2020  ry, 'symbol').  
-0004d220: 2020 2020 2020 2020 2020 2020 2020 7379                sy
-0004d230: 6d62 6f6c 203d 2073 656c 662e 7361 6665  mbol = self.safe
-0004d240: 5f73 796d 626f 6c28 6d61 726b 6574 4964  _symbol(marketId
-0004d250: 2c20 4e6f 6e65 2c20 4e6f 6e65 2c20 2763  , None, None, 'c
-0004d260: 6f6e 7472 6163 7427 290a 2020 2020 2020  ontract').      
-0004d270: 2020 2020 2020 2020 2020 6272 6163 6b65            bracke
-0004d280: 7473 203d 2073 656c 662e 7361 6665 5f76  ts = self.safe_v
-0004d290: 616c 7565 2865 6e74 7279 2c20 2762 7261  alue(entry, 'bra
-0004d2a0: 636b 6574 7327 2c20 5b5d 290a 2020 2020  ckets', []).    
-0004d2b0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0004d2c0: 6c74 203d 205b 5d0a 2020 2020 2020 2020  lt = [].        
-0004d2d0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
-0004d2e0: 2072 616e 6765 2830 2c20 6c65 6e28 6272   range(0, len(br
-0004d2f0: 6163 6b65 7473 2929 3a0a 2020 2020 2020  ackets)):.      
-0004d300: 2020 2020 2020 2020 2020 2020 2020 6272                br
-0004d310: 6163 6b65 7420 3d20 6272 6163 6b65 7473  acket = brackets
-0004d320: 5b6a 5d0a 2020 2020 2020 2020 2020 2020  [j].            
-0004d330: 2020 2020 2020 2020 666c 6f6f 7256 616c          floorVal
-0004d340: 7565 203d 2073 656c 662e 7361 6665 5f73  ue = self.safe_s
-0004d350: 7472 696e 675f 3228 6272 6163 6b65 742c  tring_2(bracket,
-0004d360: 2027 6e6f 7469 6f6e 616c 466c 6f6f 7227   'notionalFloor'
-0004d370: 2c20 2771 7479 466c 6f6f 7227 290a 2020  , 'qtyFloor').  
-0004d380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d390: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
-0004d3a0: 6769 6e50 6572 6365 6e74 6167 6520 3d20  ginPercentage = 
-0004d3b0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0004d3c0: 2862 7261 636b 6574 2c20 276d 6169 6e74  (bracket, 'maint
-0004d3d0: 4d61 7267 696e 5261 7469 6f27 290a 2020  MarginRatio').  
-0004d3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d3f0: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
-0004d400: 5b66 6c6f 6f72 5661 6c75 652c 206d 6169  [floorValue, mai
-0004d410: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
-0004d420: 7263 656e 7461 6765 5d29 0a20 2020 2020  rcentage]).     
-0004d430: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0004d440: 6f70 7469 6f6e 735b 276c 6576 6572 6167  options['leverag
-0004d450: 6542 7261 636b 6574 7327 5d5b 7379 6d62  eBrackets'][symb
-0004d460: 6f6c 5d20 3d20 7265 7375 6c74 0a20 2020  ol] = result.   
-0004d470: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0004d480: 2e6f 7074 696f 6e73 5b27 6c65 7665 7261  .options['levera
-0004d490: 6765 4272 6163 6b65 7473 275d 0a0a 2020  geBrackets']..  
-0004d4a0: 2020 6465 6620 6665 7463 685f 6c65 7665    def fetch_leve
-0004d4b0: 7261 6765 5f74 6965 7273 2873 656c 662c  rage_tiers(self,
-0004d4c0: 2073 796d 626f 6c73 3a20 4f70 7469 6f6e   symbols: Option
-0004d4d0: 616c 5b4c 6973 745b 7374 725d 5d20 3d20  al[List[str]] = 
-0004d4e0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-0004d4f0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0004d500: 2020 2020 2020 7265 7472 6965 7665 2069        retrieve i
-0004d510: 6e66 6f72 6d61 7469 6f6e 206f 6e20 7468  nformation on th
-0004d520: 6520 6d61 7869 6d75 6d20 6c65 7665 7261  e maximum levera
-0004d530: 6765 2c20 616e 6420 6d61 696e 7465 6e61  ge, and maintena
-0004d540: 6e63 6520 6d61 7267 696e 2066 6f72 2074  nce margin for t
-0004d550: 7261 6465 7320 6f66 2076 6172 7969 6e67  rades of varying
-0004d560: 2074 7261 6465 2073 697a 6573 0a20 2020   trade sizes.   
-0004d570: 2020 2020 203a 7061 7261 6d20 5b73 7472       :param [str
-0004d580: 5d7c 4e6f 6e65 2073 796d 626f 6c73 3a20  ]|None symbols: 
-0004d590: 6c69 7374 206f 6620 756e 6966 6965 6420  list of unified 
-0004d5a0: 6d61 726b 6574 2073 796d 626f 6c73 0a20  market symbols. 
-0004d5b0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-0004d5c0: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-0004d5d0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-0004d5e0: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
-0004d5f0: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
-0004d600: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-0004d610: 7320 6469 6374 3a20 6120 6469 6374 696f  s dict: a dictio
-0004d620: 6e61 7279 206f 6620 606c 6576 6572 6167  nary of `leverag
-0004d630: 6520 7469 6572 7320 7374 7275 6374 7572  e tiers structur
-0004d640: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
-0004d650: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-0004d660: 6c65 7665 7261 6765 2d74 6965 7273 2d73  leverage-tiers-s
-0004d670: 7472 7563 7475 7265 3e60 2c20 696e 6465  tructure>`, inde
-0004d680: 7865 6420 6279 206d 6172 6b65 7420 7379  xed by market sy
-0004d690: 6d62 6f6c 730a 2020 2020 2020 2020 2222  mbols.        ""
-0004d6a0: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
-0004d6b0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-0004d6c0: 2020 2020 2020 7479 7065 2c20 7175 6572        type, quer
-0004d6d0: 7920 3d20 7365 6c66 2e68 616e 646c 655f  y = self.handle_
-0004d6e0: 6d61 726b 6574 5f74 7970 655f 616e 645f  market_type_and_
-0004d6f0: 7061 7261 6d73 2827 6665 7463 684c 6576  params('fetchLev
-0004d700: 6572 6167 6554 6965 7273 272c 204e 6f6e  erageTiers', Non
-0004d710: 652c 2070 6172 616d 7329 0a20 2020 2020  e, params).     
-0004d720: 2020 2073 7562 5479 7065 203d 204e 6f6e     subType = Non
-0004d730: 650a 2020 2020 2020 2020 7375 6254 7970  e.        subTyp
-0004d740: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
-0004d750: 2e68 616e 646c 655f 7375 625f 7479 7065  .handle_sub_type
-0004d760: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
-0004d770: 6368 4c65 7665 7261 6765 5469 6572 7327  chLeverageTiers'
-0004d780: 2c20 4e6f 6e65 2c20 7175 6572 792c 2027  , None, query, '
-0004d790: 6c69 6e65 6172 2729 0a20 2020 2020 2020  linear').       
-0004d7a0: 206d 6574 686f 6420 3d20 4e6f 6e65 0a20   method = None. 
-0004d7b0: 2020 2020 2020 2069 6620 7365 6c66 2e69         if self.i
-0004d7c0: 735f 6c69 6e65 6172 2874 7970 652c 2073  s_linear(type, s
-0004d7d0: 7562 5479 7065 293a 0a20 2020 2020 2020  ubType):.       
-0004d7e0: 2020 2020 206d 6574 686f 6420 3d20 2766       method = 'f
-0004d7f0: 6170 6950 7269 7661 7465 4765 744c 6576  apiPrivateGetLev
-0004d800: 6572 6167 6542 7261 636b 6574 270a 2020  erageBracket'.  
-0004d810: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-0004d820: 6973 5f69 6e76 6572 7365 2874 7970 652c  is_inverse(type,
-0004d830: 2073 7562 5479 7065 293a 0a20 2020 2020   subType):.     
-0004d840: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-0004d850: 2764 6170 6950 7269 7661 7465 5632 4765  'dapiPrivateV2Ge
-0004d860: 744c 6576 6572 6167 6542 7261 636b 6574  tLeverageBracket
-0004d870: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
-0004d880: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0004d890: 6520 4e6f 7453 7570 706f 7274 6564 2873  e NotSupported(s
-0004d8a0: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
-0004d8b0: 4c65 7665 7261 6765 5469 6572 7328 2920  LeverageTiers() 
-0004d8c0: 7375 7070 6f72 7473 206c 696e 6561 7220  supports linear 
-0004d8d0: 616e 6420 696e 7665 7273 6520 636f 6e74  and inverse cont
-0004d8e0: 7261 6374 7320 6f6e 6c79 2729 0a20 2020  racts only').   
-0004d8f0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0004d900: 6765 7461 7474 7228 7365 6c66 2c20 6d65  getattr(self, me
-0004d910: 7468 6f64 2928 7175 6572 7929 0a20 2020  thod)(query).   
-0004d920: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0004d930: 2075 7364 6d0a 2020 2020 2020 2020 230a   usdm.        #.
-0004d940: 2020 2020 2020 2020 2320 2020 205b 0a20          #    [. 
-0004d950: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004d960: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0004d970: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-0004d980: 2022 5355 5348 4955 5344 5422 2c0a 2020   "SUSHIUSDT",.  
-0004d990: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004d9a0: 2020 2022 6272 6163 6b65 7473 223a 205b     "brackets": [
-0004d9b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004d9c0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0004d9d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004d9e0: 2020 2020 2020 2020 2022 6272 6163 6b65           "bracke
-0004d9f0: 7422 3a20 312c 0a20 2020 2020 2020 2023  t": 1,.        #
-0004da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004da10: 2020 2020 2269 6e69 7469 616c 4c65 7665      "initialLeve
-0004da20: 7261 6765 223a 2035 302c 0a20 2020 2020  rage": 50,.     
-0004da30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004da40: 2020 2020 2020 2020 226e 6f74 696f 6e61          "notiona
-0004da50: 6c43 6170 223a 2035 3030 3030 2c0a 2020  lCap": 50000,.  
-0004da60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004da70: 2020 2020 2020 2020 2020 2022 6e6f 7469             "noti
-0004da80: 6f6e 616c 466c 6f6f 7222 3a20 302c 0a20  onalFloor": 0,. 
-0004da90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004daa0: 2020 2020 2020 2020 2020 2020 226d 6169              "mai
-0004dab0: 6e74 4d61 7267 696e 5261 7469 6f22 3a20  ntMarginRatio": 
-0004dac0: 302e 3031 2c0a 2020 2020 2020 2020 2320  0.01,.        # 
-0004dad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dae0: 2020 2022 6375 6d22 3a20 302e 300a 2020     "cum": 0.0.  
-0004daf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004db00: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-0004db10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004db20: 2020 202e 2e2e 0a20 2020 2020 2020 2023     ....        #
-0004db30: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
-0004db40: 2020 2020 2020 2320 2020 2020 2020 207d        #        }
-0004db50: 0a20 2020 2020 2020 2023 2020 2020 5d0a  .        #    ].
-0004db60: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0004db70: 2020 2320 636f 696e 6d0a 2020 2020 2020    # coinm.      
-0004db80: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0004db90: 2020 5b0a 2020 2020 2020 2020 2320 2020    [.        #   
-0004dba0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-0004dbb0: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
-0004dbc0: 796d 626f 6c22 3a22 5852 5055 5344 5f32  ymbol":"XRPUSD_2
-0004dbd0: 3130 3332 3622 2c0a 2020 2020 2020 2020  10326",.        
-0004dbe0: 2320 2020 2020 2020 2020 2020 2020 2262  #             "b
-0004dbf0: 7261 636b 6574 7322 3a5b 0a20 2020 2020  rackets":[.     
-0004dc00: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004dc10: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0004dc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dc30: 2020 2020 2022 6272 6163 6b65 7422 3a31       "bracket":1
-0004dc40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004dc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dc60: 2269 6e69 7469 616c 4c65 7665 7261 6765  "initialLeverage
-0004dc70: 223a 3230 2c0a 2020 2020 2020 2020 2320  ":20,.        # 
-0004dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dc90: 2020 2020 2271 7479 4361 7022 3a35 3030      "qtyCap":500
-0004dca0: 3030 302c 0a20 2020 2020 2020 2023 2020  000,.        #  
-0004dcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dcc0: 2020 2022 7174 7946 6c6f 6f72 223a 302c     "qtyFloor":0,
-0004dcd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004dce0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004dcf0: 6d61 696e 744d 6172 6769 6e52 6174 696f  maintMarginRatio
-0004dd00: 223a 302e 3031 3835 2c0a 2020 2020 2020  ":0.0185,.      
-0004dd10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004dd20: 2020 2020 2020 2020 2263 756d 223a 302e          "cum":0.
-0004dd30: 300a 2020 2020 2020 2020 2320 2020 2020  0.        #     
-0004dd40: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0004dd50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004dd60: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
-0004dd70: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0004dd80: 2020 2320 2020 2020 5d0a 2020 2020 2020    #     ].      
-0004dd90: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
-0004dda0: 726e 2073 656c 662e 7061 7273 655f 6c65  rn self.parse_le
-0004ddb0: 7665 7261 6765 5f74 6965 7273 2872 6573  verage_tiers(res
-0004ddc0: 706f 6e73 652c 2073 796d 626f 6c73 2c20  ponse, symbols, 
-0004ddd0: 2773 796d 626f 6c27 290a 0a20 2020 2064  'symbol')..    d
-0004dde0: 6566 2070 6172 7365 5f6d 6172 6b65 745f  ef parse_market_
-0004ddf0: 6c65 7665 7261 6765 5f74 6965 7273 2873  leverage_tiers(s
-0004de00: 656c 662c 2069 6e66 6f2c 206d 6172 6b65  elf, info, marke
-0004de10: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
-0004de20: 2022 2222 0a20 2020 2020 2020 2020 2a20   """.         * 
-0004de30: 4069 676e 6f72 650a 2020 2020 2020 2020  @ignore.        
-0004de40: 3a70 6172 616d 2064 6963 7420 696e 666f  :param dict info
-0004de50: 3a20 4578 6368 616e 6765 2072 6573 706f  : Exchange respo
-0004de60: 6e73 6520 666f 7220 3120 6d61 726b 6574  nse for 1 market
-0004de70: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0004de80: 6469 6374 206d 6172 6b65 743a 2043 4358  dict market: CCX
-0004de90: 5420 6d61 726b 6574 0a20 2020 2020 2020  T market.       
-0004dea0: 2022 2222 0a20 2020 2020 2020 2023 0a20   """.        #. 
-0004deb0: 2020 2020 2020 2023 2020 2020 7b0a 2020         #    {.  
-0004dec0: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
-0004ded0: 7379 6d62 6f6c 223a 2022 5355 5348 4955  symbol": "SUSHIU
-0004dee0: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-0004def0: 2020 2020 2020 2022 6272 6163 6b65 7473         "brackets
-0004df00: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
-0004df10: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0004df20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004df30: 2020 2020 2022 6272 6163 6b65 7422 3a20       "bracket": 
-0004df40: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
-0004df50: 2020 2020 2020 2020 2020 2020 2269 6e69              "ini
-0004df60: 7469 616c 4c65 7665 7261 6765 223a 2035  tialLeverage": 5
-0004df70: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-0004df80: 2020 2020 2020 2020 2020 2020 226e 6f74              "not
-0004df90: 696f 6e61 6c43 6170 223a 2035 3030 3030  ionalCap": 50000
-0004dfa0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004dfb0: 2020 2020 2020 2020 2020 2022 6e6f 7469             "noti
-0004dfc0: 6f6e 616c 466c 6f6f 7222 3a20 302c 0a20  onalFloor": 0,. 
-0004dfd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004dfe0: 2020 2020 2020 2020 226d 6169 6e74 4d61          "maintMa
-0004dff0: 7267 696e 5261 7469 6f22 3a20 302e 3031  rginRatio": 0.01
-0004e000: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004e010: 2020 2020 2020 2020 2020 2022 6375 6d22             "cum"
-0004e020: 3a20 302e 300a 2020 2020 2020 2020 2320  : 0.0.        # 
-0004e030: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-0004e040: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004e050: 2020 202e 2e2e 0a20 2020 2020 2020 2023     ....        #
-0004e060: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-0004e070: 2020 2320 2020 207d 0a20 2020 2020 2020    #    }.       
-0004e080: 2023 0a20 2020 2020 2020 206d 6172 6b65   #.        marke
-0004e090: 7449 6420 3d20 7365 6c66 2e73 6166 655f  tId = self.safe_
-0004e0a0: 7374 7269 6e67 2869 6e66 6f2c 2027 7379  string(info, 'sy
-0004e0b0: 6d62 6f6c 2729 0a20 2020 2020 2020 206d  mbol').        m
-0004e0c0: 6172 6b65 7420 3d20 7365 6c66 2e73 6166  arket = self.saf
-0004e0d0: 655f 6d61 726b 6574 286d 6172 6b65 7449  e_market(marketI
-0004e0e0: 642c 206d 6172 6b65 742c 204e 6f6e 652c  d, market, None,
-0004e0f0: 2027 636f 6e74 7261 6374 2729 0a20 2020   'contract').   
-0004e100: 2020 2020 2062 7261 636b 6574 7320 3d20       brackets = 
-0004e110: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-0004e120: 696e 666f 2c20 2762 7261 636b 6574 7327  info, 'brackets'
-0004e130: 2c20 5b5d 290a 2020 2020 2020 2020 7469  , []).        ti
-0004e140: 6572 7320 3d20 5b5d 0a20 2020 2020 2020  ers = [].       
-0004e150: 2066 6f72 206a 2069 6e20 7261 6e67 6528   for j in range(
-0004e160: 302c 206c 656e 2862 7261 636b 6574 7329  0, len(brackets)
-0004e170: 293a 0a20 2020 2020 2020 2020 2020 2062  ):.            b
-0004e180: 7261 636b 6574 203d 2062 7261 636b 6574  racket = bracket
-0004e190: 735b 6a5d 0a20 2020 2020 2020 2020 2020  s[j].           
-0004e1a0: 2074 6965 7273 2e61 7070 656e 6428 7b0a   tiers.append({.
-0004e1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004e1c0: 2774 6965 7227 3a20 7365 6c66 2e73 6166  'tier': self.saf
-0004e1d0: 655f 6e75 6d62 6572 2862 7261 636b 6574  e_number(bracket
-0004e1e0: 2c20 2762 7261 636b 6574 2729 2c0a 2020  , 'bracket'),.  
-0004e1f0: 2020 2020 2020 2020 2020 2020 2020 2763                'c
-0004e200: 7572 7265 6e63 7927 3a20 6d61 726b 6574  urrency': market
-0004e210: 5b27 7175 6f74 6527 5d2c 0a20 2020 2020  ['quote'],.     
-0004e220: 2020 2020 2020 2020 2020 2027 6d69 6e4e             'minN
-0004e230: 6f74 696f 6e61 6c27 3a20 7365 6c66 2e73  otional': self.s
-0004e240: 6166 655f 6e75 6d62 6572 5f32 2862 7261  afe_number_2(bra
-0004e250: 636b 6574 2c20 276e 6f74 696f 6e61 6c46  cket, 'notionalF
-0004e260: 6c6f 6f72 272c 2027 7174 7946 6c6f 6f72  loor', 'qtyFloor
-0004e270: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-0004e280: 2020 2020 276d 6178 4e6f 7469 6f6e 616c      'maxNotional
-0004e290: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
-0004e2a0: 6265 725f 3228 6272 6163 6b65 742c 2027  ber_2(bracket, '
-0004e2b0: 6e6f 7469 6f6e 616c 4361 7027 2c20 2771  notionalCap', 'q
-0004e2c0: 7479 4361 7027 292c 0a20 2020 2020 2020  tyCap'),.       
-0004e2d0: 2020 2020 2020 2020 2027 6d61 696e 7465           'mainte
-0004e2e0: 6e61 6e63 654d 6172 6769 6e52 6174 6527  nanceMarginRate'
-0004e2f0: 3a20 7365 6c66 2e73 6166 655f 6e75 6d62  : self.safe_numb
-0004e300: 6572 2862 7261 636b 6574 2c20 276d 6169  er(bracket, 'mai
-0004e310: 6e74 4d61 7267 696e 5261 7469 6f27 292c  ntMarginRatio'),
-0004e320: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004e330: 2027 6d61 784c 6576 6572 6167 6527 3a20   'maxLeverage': 
-0004e340: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0004e350: 2862 7261 636b 6574 2c20 2769 6e69 7469  (bracket, 'initi
-0004e360: 616c 4c65 7665 7261 6765 2729 2c0a 2020  alLeverage'),.  
-0004e370: 2020 2020 2020 2020 2020 2020 2020 2769                'i
-0004e380: 6e66 6f27 3a20 6272 6163 6b65 742c 0a20  nfo': bracket,. 
-0004e390: 2020 2020 2020 2020 2020 207d 290a 2020             }).  
-0004e3a0: 2020 2020 2020 7265 7475 726e 2074 6965        return tie
-0004e3b0: 7273 0a0a 2020 2020 6465 6620 6665 7463  rs..    def fetc
-0004e3c0: 685f 706f 7369 7469 6f6e 2873 656c 662c  h_position(self,
-0004e3d0: 2073 796d 626f 6c3a 2073 7472 2c20 7061   symbol: str, pa
-0004e3e0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-0004e3f0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-0004e400: 6520 6874 7470 733a 2f2f 6269 6e61 6e63  e https://binanc
-0004e410: 652d 646f 6373 2e67 6974 6875 622e 696f  e-docs.github.io
-0004e420: 2f61 7069 646f 6373 2f76 6f70 7469 6f6e  /apidocs/voption
-0004e430: 732f 656e 2f23 6f70 7469 6f6e 2d70 6f73  s/en/#option-pos
-0004e440: 6974 696f 6e2d 696e 666f 726d 6174 696f  ition-informatio
-0004e450: 6e2d 7573 6572 5f64 6174 610a 2020 2020  n-user_data.    
-0004e460: 2020 2020 6665 7463 6820 6461 7461 206f      fetch data o
-0004e470: 6e20 616e 206f 7065 6e20 706f 7369 7469  n an open positi
-0004e480: 6f6e 0a20 2020 2020 2020 203a 7061 7261  on.        :para
-0004e490: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-0004e4a0: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-0004e4b0: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
-0004e4c0: 7420 7468 6520 706f 7369 7469 6f6e 2069  t the position i
-0004e4d0: 7320 6865 6c64 2069 6e0a 2020 2020 2020  s held in.      
-0004e4e0: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-0004e4f0: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-0004e500: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-0004e510: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
-0004e520: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-0004e530: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-0004e540: 743a 2061 2060 706f 7369 7469 6f6e 2073  t: a `position s
-0004e550: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0004e560: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0004e570: 656e 2f6c 6174 6573 742f 6d61 6e75 616c  en/latest/manual
-0004e580: 2e68 746d 6c23 706f 7369 7469 6f6e 2d73  .html#position-s
-0004e590: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-0004e5a0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0004e5b0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-0004e5c0: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-0004e5d0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-0004e5e0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-0004e5f0: 6966 206e 6f74 206d 6172 6b65 745b 276f  if not market['o
-0004e600: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
-0004e610: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-0004e620: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-0004e630: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
-0004e640: 6e28 2920 7375 7070 6f72 7473 206f 7074  n() supports opt
-0004e650: 696f 6e20 6d61 726b 6574 7320 6f6e 6c79  ion markets only
-0004e660: 2729 0a20 2020 2020 2020 2072 6571 7565  ').        reque
-0004e670: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
-0004e680: 2020 2027 7379 6d62 6f6c 273a 206d 6172     'symbol': mar
-0004e690: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
-0004e6a0: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
-0004e6b0: 706f 6e73 6520 3d20 7365 6c66 2e65 6170  ponse = self.eap
-0004e6c0: 6950 7269 7661 7465 4765 7450 6f73 6974  iPrivateGetPosit
-0004e6d0: 696f 6e28 7365 6c66 2e65 7874 656e 6428  ion(self.extend(
-0004e6e0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0004e6f0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0004e700: 2020 2020 2320 2020 2020 5b0a 2020 2020      #     [.    
-0004e710: 2020 2020 2320 2020 2020 2020 2020 7b0a      #         {.
-0004e720: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004e730: 2020 2020 2020 2265 6e74 7279 5072 6963        "entryPric
-0004e740: 6522 3a20 2232 372e 3730 3030 3030 3030  e": "27.70000000
-0004e750: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004e760: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-0004e770: 223a 2022 4554 482d 3233 3034 3236 2d31  ": "ETH-230426-1
-0004e780: 3835 302d 4322 2c0a 2020 2020 2020 2020  850-C",.        
-0004e790: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
-0004e7a0: 6964 6522 3a20 224c 4f4e 4722 2c0a 2020  ide": "LONG",.  
-0004e7b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004e7c0: 2020 2020 2271 7561 6e74 6974 7922 3a20      "quantity": 
-0004e7d0: 2230 2e35 3030 3030 3030 3022 2c0a 2020  "0.50000000",.  
-0004e7e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004e7f0: 2020 2020 2272 6564 7563 6962 6c65 5174      "reducibleQt
-0004e800: 7922 3a20 2230 2e35 3030 3030 3030 3022  y": "0.50000000"
-0004e810: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004e820: 2020 2020 2020 2020 226d 6172 6b56 616c          "markVal
-0004e830: 7565 223a 2022 3130 2e32 3530 3030 3030  ue": "10.2500000
-0004e840: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0004e850: 2020 2020 2020 2020 2020 2022 726f 7222             "ror"
-0004e860: 3a20 222d 302e 3235 3939 222c 0a20 2020  : "-0.2599",.   
-0004e870: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004e880: 2020 2022 756e 7265 616c 697a 6564 504e     "unrealizedPN
-0004e890: 4c22 3a20 222d 332e 3630 3030 3030 3030  L": "-3.60000000
-0004e8a0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004e8b0: 2020 2020 2020 2020 2020 226d 6172 6b50            "markP
-0004e8c0: 7269 6365 223a 2022 3230 2e35 222c 0a20  rice": "20.5",. 
-0004e8d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004e8e0: 2020 2020 2022 7374 7269 6b65 5072 6963       "strikePric
-0004e8f0: 6522 3a20 2231 3835 302e 3030 3030 3030  e": "1850.000000
-0004e900: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0004e910: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
-0004e920: 7469 6f6e 436f 7374 223a 2022 3133 2e38  tionCost": "13.8
-0004e930: 3530 3030 3030 3022 2c0a 2020 2020 2020  5000000",.      
-0004e940: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004e950: 2265 7870 6972 7944 6174 6522 3a20 3136  "expiryDate": 16
-0004e960: 3832 3439 3630 3030 3030 302c 0a20 2020  82496000000,.   
-0004e970: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004e980: 2020 2022 7072 6963 6553 6361 6c65 223a     "priceScale":
-0004e990: 2031 2c0a 2020 2020 2020 2020 2320 2020   1,.        #   
-0004e9a0: 2020 2020 2020 2020 2020 2271 7561 6e74            "quant
-0004e9b0: 6974 7953 6361 6c65 223a 2032 2c0a 2020  ityScale": 2,.  
-0004e9c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004e9d0: 2020 2020 226f 7074 696f 6e53 6964 6522      "optionSide"
-0004e9e0: 3a20 2243 414c 4c22 2c0a 2020 2020 2020  : "CALL",.      
-0004e9f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004ea00: 2271 756f 7465 4173 7365 7422 3a20 2255  "quoteAsset": "U
-0004ea10: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-0004ea20: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
-0004ea30: 6522 3a20 3136 3832 3439 3234 3237 3130  e": 168249242710
-0004ea40: 360a 2020 2020 2020 2020 2320 2020 2020  6.        #     
-0004ea50: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-0004ea60: 2020 2020 5d0a 2020 2020 2020 2020 230a      ].        #.
-0004ea70: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0004ea80: 656c 662e 7061 7273 655f 706f 7369 7469  elf.parse_positi
-0004ea90: 6f6e 2872 6573 706f 6e73 655b 305d 2c20  on(response[0], 
-0004eaa0: 6d61 726b 6574 290a 0a20 2020 2064 6566  market)..    def
-0004eab0: 2066 6574 6368 5f6f 7074 696f 6e5f 706f   fetch_option_po
-0004eac0: 7369 7469 6f6e 7328 7365 6c66 2c20 7379  sitions(self, sy
-0004ead0: 6d62 6f6c 733a 204f 7074 696f 6e61 6c5b  mbols: Optional[
-0004eae0: 4c69 7374 5b73 7472 5d5d 203d 204e 6f6e  List[str]] = Non
-0004eaf0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0004eb00: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0004eb10: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
-0004eb20: 696e 616e 6365 2d64 6f63 732e 6769 7468  inance-docs.gith
-0004eb30: 7562 2e69 6f2f 6170 6964 6f63 732f 766f  ub.io/apidocs/vo
-0004eb40: 7074 696f 6e73 2f65 6e2f 236f 7074 696f  ptions/en/#optio
-0004eb50: 6e2d 706f 7369 7469 6f6e 2d69 6e66 6f72  n-position-infor
-0004eb60: 6d61 7469 6f6e 2d75 7365 725f 6461 7461  mation-user_data
-0004eb70: 0a20 2020 2020 2020 2066 6574 6368 2064  .        fetch d
-0004eb80: 6174 6120 6f6e 206f 7065 6e20 6f70 7469  ata on open opti
-0004eb90: 6f6e 7320 706f 7369 7469 6f6e 730a 2020  ons positions.  
-0004eba0: 2020 2020 2020 3a70 6172 616d 205b 7374        :param [st
-0004ebb0: 725d 7c4e 6f6e 6520 7379 6d62 6f6c 733a  r]|None symbols:
-0004ebc0: 206c 6973 7420 6f66 2075 6e69 6669 6564   list of unified
-0004ebd0: 206d 6172 6b65 7420 7379 6d62 6f6c 730a   market symbols.
-0004ebe0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-0004ebf0: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-0004ec00: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-0004ec10: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
-0004ec20: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
-0004ec30: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-0004ec40: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
-0004ec50: 7420 6f66 2060 706f 7369 7469 6f6e 2073  t of `position s
-0004ec60: 7472 7563 7475 7265 7320 3c68 7474 7073  tructures <https
-0004ec70: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-0004ec80: 2f23 2f3f 6964 3d70 6f73 6974 696f 6e2d  /#/?id=position-
-0004ec90: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-0004eca0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0004ecb0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-0004ecc0: 7328 290a 2020 2020 2020 2020 7379 6d62  s().        symb
-0004ecd0: 6f6c 7320 3d20 7365 6c66 2e6d 6172 6b65  ols = self.marke
-0004ece0: 745f 7379 6d62 6f6c 7328 7379 6d62 6f6c  t_symbols(symbol
-0004ecf0: 7329 0a20 2020 2020 2020 2072 6571 7565  s).        reque
-0004ed00: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
-0004ed10: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
-0004ed20: 2020 2020 2020 6966 2073 796d 626f 6c73        if symbols
-0004ed30: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0004ed40: 2020 2020 2020 2020 2020 7379 6d62 6f6c            symbol
-0004ed50: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0004ed60: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0004ed70: 6528 7379 6d62 6f6c 732c 206c 6973 7429  e(symbols, list)
-0004ed80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0004ed90: 2020 7379 6d62 6f6c 734c 656e 6774 6820    symbolsLength 
-0004eda0: 3d20 6c65 6e28 7379 6d62 6f6c 7329 0a20  = len(symbols). 
-0004edb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0004edc0: 6620 7379 6d62 6f6c 734c 656e 6774 6820  f symbolsLength 
-0004edd0: 3e20 313a 0a20 2020 2020 2020 2020 2020  > 1:.           
-0004ede0: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-0004edf0: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-0004ee00: 6420 2b20 2720 6665 7463 6850 6f73 6974  d + ' fetchPosit
-0004ee10: 696f 6e73 2829 2073 796d 626f 6c73 2061  ions() symbols a
-0004ee20: 7267 756d 656e 7420 6361 6e6e 6f74 2063  rgument cannot c
-0004ee30: 6f6e 7461 696e 206d 6f72 6520 7468 616e  ontain more than
-0004ee40: 2031 2073 796d 626f 6c27 290a 2020 2020   1 symbol').    
-0004ee50: 2020 2020 2020 2020 2020 2020 7379 6d62              symb
-0004ee60: 6f6c 203d 2073 796d 626f 6c73 5b30 5d0a  ol = symbols[0].
-0004ee70: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0004ee80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0004ee90: 2020 7379 6d62 6f6c 203d 2073 796d 626f    symbol = symbo
-0004eea0: 6c73 0a20 2020 2020 2020 2020 2020 206d  ls.            m
-0004eeb0: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-0004eec0: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-0004eed0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0004eee0: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
-0004eef0: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-0004ef00: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-0004ef10: 2e65 6170 6950 7269 7661 7465 4765 7450  .eapiPrivateGetP
-0004ef20: 6f73 6974 696f 6e28 7365 6c66 2e65 7874  osition(self.ext
-0004ef30: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-0004ef40: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-0004ef50: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
-0004ef60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004ef70: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0004ef80: 2020 2020 2020 2020 2020 2265 6e74 7279            "entry
-0004ef90: 5072 6963 6522 3a20 2232 372e 3730 3030  Price": "27.7000
-0004efa0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0004efb0: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
-0004efc0: 6d62 6f6c 223a 2022 4554 482d 3233 3034  mbol": "ETH-2304
-0004efd0: 3236 2d31 3835 302d 4322 2c0a 2020 2020  26-1850-C",.    
-0004efe0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004eff0: 2020 2273 6964 6522 3a20 224c 4f4e 4722    "side": "LONG"
-0004f000: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f010: 2020 2020 2020 2020 2271 7561 6e74 6974          "quantit
-0004f020: 7922 3a20 2230 2e35 3030 3030 3030 3022  y": "0.50000000"
-0004f030: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f040: 2020 2020 2020 2020 2272 6564 7563 6962          "reducib
-0004f050: 6c65 5174 7922 3a20 2230 2e35 3030 3030  leQty": "0.50000
-0004f060: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0004f070: 2020 2020 2020 2020 2020 2020 226d 6172              "mar
-0004f080: 6b56 616c 7565 223a 2022 3130 2e32 3530  kValue": "10.250
-0004f090: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0004f0a0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0004f0b0: 726f 7222 3a20 222d 302e 3235 3939 222c  ror": "-0.2599",
-0004f0c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f0d0: 2020 2020 2020 2022 756e 7265 616c 697a         "unrealiz
-0004f0e0: 6564 504e 4c22 3a20 222d 332e 3630 3030  edPNL": "-3.6000
-0004f0f0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0004f100: 2320 2020 2020 2020 2020 2020 2020 226d  #             "m
-0004f110: 6172 6b50 7269 6365 223a 2022 3230 2e35  arkPrice": "20.5
-0004f120: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004f130: 2020 2020 2020 2020 2022 7374 7269 6b65           "strike
-0004f140: 5072 6963 6522 3a20 2231 3835 302e 3030  Price": "1850.00
-0004f150: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0004f160: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0004f170: 706f 7369 7469 6f6e 436f 7374 223a 2022  positionCost": "
-0004f180: 3133 2e38 3530 3030 3030 3022 2c0a 2020  13.85000000",.  
-0004f190: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f1a0: 2020 2020 2265 7870 6972 7944 6174 6522      "expiryDate"
-0004f1b0: 3a20 3136 3832 3439 3630 3030 3030 302c  : 1682496000000,
-0004f1c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f1d0: 2020 2020 2020 2022 7072 6963 6553 6361         "priceSca
-0004f1e0: 6c65 223a 2031 2c0a 2020 2020 2020 2020  le": 1,.        
-0004f1f0: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
-0004f200: 7561 6e74 6974 7953 6361 6c65 223a 2032  uantityScale": 2
-0004f210: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f220: 2020 2020 2020 2020 226f 7074 696f 6e53          "optionS
-0004f230: 6964 6522 3a20 2243 414c 4c22 2c0a 2020  ide": "CALL",.  
-0004f240: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f250: 2020 2020 2271 756f 7465 4173 7365 7422      "quoteAsset"
-0004f260: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
-0004f270: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004f280: 2274 696d 6522 3a20 3136 3832 3439 3234  "time": 16824924
-0004f290: 3237 3130 360a 2020 2020 2020 2020 2320  27106.        # 
-0004f2a0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0004f2b0: 2020 2320 2020 2020 5d0a 2020 2020 2020    #     ].      
-0004f2c0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0004f2d0: 6c74 203d 205b 5d0a 2020 2020 2020 2020  lt = [].        
-0004f2e0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0004f2f0: 2c20 6c65 6e28 7265 7370 6f6e 7365 2929  , len(response))
-0004f300: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0004f310: 7375 6c74 2e61 7070 656e 6428 7365 6c66  sult.append(self
-0004f320: 2e70 6172 7365 5f70 6f73 6974 696f 6e28  .parse_position(
-0004f330: 7265 7370 6f6e 7365 5b69 5d2c 206d 6172  response[i], mar
-0004f340: 6b65 7429 290a 2020 2020 2020 2020 7265  ket)).        re
-0004f350: 7475 726e 2073 656c 662e 6669 6c74 6572  turn self.filter
-0004f360: 5f62 795f 6172 7261 7928 7265 7375 6c74  _by_array(result
-0004f370: 2c20 2773 796d 626f 6c27 2c20 7379 6d62  , 'symbol', symb
-0004f380: 6f6c 732c 2046 616c 7365 290a 0a20 2020  ols, False)..   
-0004f390: 2064 6566 2070 6172 7365 5f70 6f73 6974   def parse_posit
-0004f3a0: 696f 6e28 7365 6c66 2c20 706f 7369 7469  ion(self, positi
-0004f3b0: 6f6e 2c20 6d61 726b 6574 3d4e 6f6e 6529  on, market=None)
-0004f3c0: 3a0a 2020 2020 2020 2020 230a 2020 2020  :.        #.    
-0004f3d0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0004f3e0: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-0004f3f0: 6e74 7279 5072 6963 6522 3a20 2232 372e  ntryPrice": "27.
-0004f400: 3730 3030 3030 3030 222c 0a20 2020 2020  70000000",.     
-0004f410: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
-0004f420: 6d62 6f6c 223a 2022 4554 482d 3233 3034  mbol": "ETH-2304
-0004f430: 3236 2d31 3835 302d 4322 2c0a 2020 2020  26-1850-C",.    
-0004f440: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-0004f450: 6964 6522 3a20 224c 4f4e 4722 2c0a 2020  ide": "LONG",.  
-0004f460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f470: 2271 7561 6e74 6974 7922 3a20 2230 2e35  "quantity": "0.5
-0004f480: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-0004f490: 2020 2320 2020 2020 2020 2020 2272 6564    #         "red
-0004f4a0: 7563 6962 6c65 5174 7922 3a20 2230 2e35  ucibleQty": "0.5
-0004f4b0: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-0004f4c0: 2020 2320 2020 2020 2020 2020 226d 6172    #         "mar
-0004f4d0: 6b56 616c 7565 223a 2022 3130 2e32 3530  kValue": "10.250
-0004f4e0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0004f4f0: 2023 2020 2020 2020 2020 2022 726f 7222   #         "ror"
-0004f500: 3a20 222d 302e 3235 3939 222c 0a20 2020  : "-0.2599",.   
-0004f510: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0004f520: 756e 7265 616c 697a 6564 504e 4c22 3a20  unrealizedPNL": 
-0004f530: 222d 332e 3630 3030 3030 3030 3022 2c0a  "-3.600000000",.
-0004f540: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f550: 2020 226d 6172 6b50 7269 6365 223a 2022    "markPrice": "
-0004f560: 3230 2e35 222c 0a20 2020 2020 2020 2023  20.5",.        #
-0004f570: 2020 2020 2020 2020 2022 7374 7269 6b65           "strike
-0004f580: 5072 6963 6522 3a20 2231 3835 302e 3030  Price": "1850.00
-0004f590: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0004f5a0: 2023 2020 2020 2020 2020 2022 706f 7369   #         "posi
-0004f5b0: 7469 6f6e 436f 7374 223a 2022 3133 2e38  tionCost": "13.8
-0004f5c0: 3530 3030 3030 3022 2c0a 2020 2020 2020  5000000",.      
-0004f5d0: 2020 2320 2020 2020 2020 2020 2265 7870    #         "exp
-0004f5e0: 6972 7944 6174 6522 3a20 3136 3832 3439  iryDate": 168249
-0004f5f0: 3630 3030 3030 302c 0a20 2020 2020 2020  6000000,.       
-0004f600: 2023 2020 2020 2020 2020 2022 7072 6963   #         "pric
-0004f610: 6553 6361 6c65 223a 2031 2c0a 2020 2020  eScale": 1,.    
-0004f620: 2020 2020 2320 2020 2020 2020 2020 2271      #         "q
-0004f630: 7561 6e74 6974 7953 6361 6c65 223a 2032  uantityScale": 2
-0004f640: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f650: 2020 2020 226f 7074 696f 6e53 6964 6522      "optionSide"
-0004f660: 3a20 2243 414c 4c22 2c0a 2020 2020 2020  : "CALL",.      
-0004f670: 2020 2320 2020 2020 2020 2020 2271 756f    #         "quo
-0004f680: 7465 4173 7365 7422 3a20 2255 5344 5422  teAsset": "USDT"
-0004f690: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f6a0: 2020 2020 2274 696d 6522 3a20 3136 3832      "time": 1682
-0004f6b0: 3439 3234 3237 3130 360a 2020 2020 2020  492427106.      
-0004f6c0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0004f6d0: 2020 230a 2020 2020 2020 2020 6d61 726b    #.        mark
-0004f6e0: 6574 4964 203d 2073 656c 662e 7361 6665  etId = self.safe
-0004f6f0: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
-0004f700: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
-0004f710: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0004f720: 662e 7361 6665 5f6d 6172 6b65 7428 6d61  f.safe_market(ma
-0004f730: 726b 6574 4964 2c20 6d61 726b 6574 290a  rketId, market).
-0004f740: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
-0004f750: 206d 6172 6b65 745b 2773 796d 626f 6c27   market['symbol'
-0004f760: 5d0a 2020 2020 2020 2020 7369 6465 203d  ].        side =
-0004f770: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0004f780: 675f 6c6f 7765 7228 706f 7369 7469 6f6e  g_lower(position
-0004f790: 2c20 2773 6964 6527 290a 2020 2020 2020  , 'side').      
-0004f7a0: 2020 7175 616e 7469 7479 203d 2073 656c    quantity = sel
-0004f7b0: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
-0004f7c0: 7369 7469 6f6e 2c20 2771 7561 6e74 6974  sition, 'quantit
-0004f7d0: 7927 290a 2020 2020 2020 2020 6966 2073  y').        if s
-0004f7e0: 6964 6520 213d 2027 6c6f 6e67 273a 0a20  ide != 'long':. 
-0004f7f0: 2020 2020 2020 2020 2020 2071 7561 6e74             quant
-0004f800: 6974 7920 3d20 5072 6563 6973 652e 7374  ity = Precise.st
-0004f810: 7269 6e67 5f6d 756c 2827 2d31 272c 2071  ring_mul('-1', q
-0004f820: 7561 6e74 6974 7929 0a20 2020 2020 2020  uantity).       
-0004f830: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
-0004f840: 662e 7361 6665 5f69 6e74 6567 6572 2870  f.safe_integer(p
-0004f850: 6f73 6974 696f 6e2c 2027 7469 6d65 2729  osition, 'time')
-0004f860: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0004f870: 7365 6c66 2e73 6166 655f 706f 7369 7469  self.safe_positi
-0004f880: 6f6e 287b 0a20 2020 2020 2020 2020 2020  on({.           
-0004f890: 2027 696e 666f 273a 2070 6f73 6974 696f   'info': positio
-0004f8a0: 6e2c 0a20 2020 2020 2020 2020 2020 2027  n,.            '
-0004f8b0: 6964 273a 204e 6f6e 652c 0a20 2020 2020  id': None,.     
-0004f8c0: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-0004f8d0: 2073 796d 626f 6c2c 0a20 2020 2020 2020   symbol,.       
-0004f8e0: 2020 2020 2027 656e 7472 7950 7269 6365       'entryPrice
-0004f8f0: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
-0004f900: 6265 7228 706f 7369 7469 6f6e 2c20 2765  ber(position, 'e
-0004f910: 6e74 7279 5072 6963 6527 292c 0a20 2020  ntryPrice'),.   
-0004f920: 2020 2020 2020 2020 2027 6d61 726b 5072           'markPr
-0004f930: 6963 6527 3a20 7365 6c66 2e73 6166 655f  ice': self.safe_
-0004f940: 6e75 6d62 6572 2870 6f73 6974 696f 6e2c  number(position,
-0004f950: 2027 6d61 726b 5072 6963 6527 292c 0a20   'markPrice'),. 
-0004f960: 2020 2020 2020 2020 2020 2027 6e6f 7469             'noti
-0004f970: 6f6e 616c 273a 2073 656c 662e 7361 6665  onal': self.safe
-0004f980: 5f6e 756d 6265 7228 706f 7369 7469 6f6e  _number(position
-0004f990: 2c20 276d 6172 6b56 616c 7565 2729 2c0a  , 'markValue'),.
-0004f9a0: 2020 2020 2020 2020 2020 2020 2763 6f6c              'col
-0004f9b0: 6c61 7465 7261 6c27 3a20 7365 6c66 2e73  lateral': self.s
-0004f9c0: 6166 655f 6e75 6d62 6572 2870 6f73 6974  afe_number(posit
-0004f9d0: 696f 6e2c 2027 706f 7369 7469 6f6e 436f  ion, 'positionCo
-0004f9e0: 7374 2729 2c0a 2020 2020 2020 2020 2020  st'),.          
-0004f9f0: 2020 2775 6e72 6561 6c69 7a65 6450 6e6c    'unrealizedPnl
-0004fa00: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
-0004fa10: 6265 7228 706f 7369 7469 6f6e 2c20 2775  ber(position, 'u
-0004fa20: 6e72 6561 6c69 7a65 6450 4e4c 2729 2c0a  nrealizedPNL'),.
-0004fa30: 2020 2020 2020 2020 2020 2020 2773 6964              'sid
-0004fa40: 6527 3a20 7369 6465 2c0a 2020 2020 2020  e': side,.      
-0004fa50: 2020 2020 2020 2763 6f6e 7472 6163 7473        'contracts
-0004fa60: 273a 2073 656c 662e 7061 7273 655f 6e75  ': self.parse_nu
-0004fa70: 6d62 6572 2871 7561 6e74 6974 7929 2c0a  mber(quantity),.
-0004fa80: 2020 2020 2020 2020 2020 2020 2763 6f6e              'con
-0004fa90: 7472 6163 7453 697a 6527 3a20 4e6f 6e65  tractSize': None
-0004faa0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-0004fab0: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
-0004fac0: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
-0004fad0: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
-0004fae0: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
-0004faf0: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
-0004fb00: 2020 2027 6865 6467 6564 273a 204e 6f6e     'hedged': Non
-0004fb10: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0004fb20: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
-0004fb30: 6e27 3a20 4e6f 6e65 2c0a 2020 2020 2020  n': None,.      
-0004fb40: 2020 2020 2020 276d 6169 6e74 656e 616e        'maintenan
-0004fb50: 6365 4d61 7267 696e 5065 7263 656e 7461  ceMarginPercenta
-0004fb60: 6765 273a 204e 6f6e 652c 0a20 2020 2020  ge': None,.     
-0004fb70: 2020 2020 2020 2027 696e 6974 6961 6c4d         'initialM
-0004fb80: 6172 6769 6e27 3a20 4e6f 6e65 2c0a 2020  argin': None,.  
-0004fb90: 2020 2020 2020 2020 2020 2769 6e69 7469            'initi
-0004fba0: 616c 4d61 7267 696e 5065 7263 656e 7461  alMarginPercenta
-0004fbb0: 6765 273a 204e 6f6e 652c 0a20 2020 2020  ge': None,.     
-0004fbc0: 2020 2020 2020 2027 6c65 7665 7261 6765         'leverage
-0004fbd0: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
-0004fbe0: 2020 2020 2027 6c69 7175 6964 6174 696f       'liquidatio
-0004fbf0: 6e50 7269 6365 273a 204e 6f6e 652c 0a20  nPrice': None,. 
-0004fc00: 2020 2020 2020 2020 2020 2027 6d61 7267             'marg
-0004fc10: 696e 5261 7469 6f27 3a20 4e6f 6e65 2c0a  inRatio': None,.
-0004fc20: 2020 2020 2020 2020 2020 2020 276d 6172              'mar
-0004fc30: 6769 6e4d 6f64 6527 3a20 4e6f 6e65 2c0a  ginMode': None,.
-0004fc40: 2020 2020 2020 2020 2020 2020 2770 6572              'per
-0004fc50: 6365 6e74 6167 6527 3a20 4e6f 6e65 2c0a  centage': None,.
-0004fc60: 2020 2020 2020 2020 7d29 0a0a 2020 2020          })..    
-0004fc70: 6465 6620 6665 7463 685f 706f 7369 7469  def fetch_positi
-0004fc80: 6f6e 7328 7365 6c66 2c20 7379 6d62 6f6c  ons(self, symbol
-0004fc90: 733a 204f 7074 696f 6e61 6c5b 4c69 7374  s: Optional[List
-0004fca0: 5b73 7472 5d5d 203d 204e 6f6e 652c 2070  [str]] = None, p
-0004fcb0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-0004fcc0: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-0004fcd0: 6574 6368 2061 6c6c 206f 7065 6e20 706f  etch all open po
-0004fce0: 7369 7469 6f6e 730a 2020 2020 2020 2020  sitions.        
-0004fcf0: 3a70 6172 616d 205b 7374 725d 7c4e 6f6e  :param [str]|Non
-0004fd00: 6520 7379 6d62 6f6c 733a 206c 6973 7420  e symbols: list 
-0004fd10: 6f66 2075 6e69 6669 6564 206d 6172 6b65  of unified marke
-0004fd20: 7420 7379 6d62 6f6c 730a 2020 2020 2020  t symbols.      
-0004fd30: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-0004fd40: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-0004fd50: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-0004fd60: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
-0004fd70: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-0004fd80: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
-0004fd90: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
-0004fda0: 706f 7369 7469 6f6e 2073 7472 7563 7475  position structu
-0004fdb0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
-0004fdc0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-0004fdd0: 706f 7369 7469 6f6e 2d73 7472 7563 7475  position-structu
-0004fde0: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
-0004fdf0: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
-0004fe00: 4d65 7468 6f64 203d 2073 656c 662e 7361  Method = self.sa
-0004fe10: 6665 5f73 7472 696e 6728 7365 6c66 2e6f  fe_string(self.o
-0004fe20: 7074 696f 6e73 2c20 2766 6574 6368 506f  ptions, 'fetchPo
-0004fe30: 7369 7469 6f6e 7327 2c20 2770 6f73 6974  sitions', 'posit
-0004fe40: 696f 6e52 6973 6b27 290a 2020 2020 2020  ionRisk').      
-0004fe50: 2020 6966 2064 6566 6175 6c74 4d65 7468    if defaultMeth
-0004fe60: 6f64 203d 3d20 2770 6f73 6974 696f 6e52  od == 'positionR
-0004fe70: 6973 6b27 3a0a 2020 2020 2020 2020 2020  isk':.          
-0004fe80: 2020 7265 7475 726e 2073 656c 662e 6665    return self.fe
-0004fe90: 7463 685f 706f 7369 7469 6f6e 735f 7269  tch_positions_ri
-0004fea0: 736b 2873 796d 626f 6c73 2c20 7061 7261  sk(symbols, para
-0004feb0: 6d73 290a 2020 2020 2020 2020 656c 6966  ms).        elif
-0004fec0: 2064 6566 6175 6c74 4d65 7468 6f64 203d   defaultMethod =
-0004fed0: 3d20 2761 6363 6f75 6e74 273a 0a20 2020  = 'account':.   
-0004fee0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0004fef0: 7365 6c66 2e66 6574 6368 5f61 6363 6f75  self.fetch_accou
-0004ff00: 6e74 5f70 6f73 6974 696f 6e73 2873 796d  nt_positions(sym
-0004ff10: 626f 6c73 2c20 7061 7261 6d73 290a 2020  bols, params).  
-0004ff20: 2020 2020 2020 656c 6966 2064 6566 6175        elif defau
-0004ff30: 6c74 4d65 7468 6f64 203d 3d20 276f 7074  ltMethod == 'opt
-0004ff40: 696f 6e27 3a0a 2020 2020 2020 2020 2020  ion':.          
-0004ff50: 2020 7265 7475 726e 2073 656c 662e 6665    return self.fe
-0004ff60: 7463 685f 6f70 7469 6f6e 5f70 6f73 6974  tch_option_posit
-0004ff70: 696f 6e73 2873 796d 626f 6c73 2c20 7061  ions(symbols, pa
-0004ff80: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
-0004ff90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0004ffa0: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-0004ffb0: 6564 2873 656c 662e 6964 202b 2027 2e6f  ed(self.id + '.o
-0004ffc0: 7074 696f 6e73 5b22 6665 7463 6850 6f73  ptions["fetchPos
-0004ffd0: 6974 696f 6e73 225d 203d 2022 2720 2b20  itions"] = "' + 
-0004ffe0: 6465 6661 756c 744d 6574 686f 6420 2b20  defaultMethod + 
-0004fff0: 2722 2069 7320 696e 7661 6c69 642c 2070  '" is invalid, p
-00050000: 6c65 6173 6520 6368 6f6f 7365 2062 6574  lease choose bet
-00050010: 7765 656e 2022 6163 636f 756e 7422 2c20  ween "account", 
-00050020: 2270 6f73 6974 696f 6e52 6973 6b22 2061  "positionRisk" a
-00050030: 6e64 2022 6f70 7469 6f6e 2227 290a 0a20  nd "option"').. 
-00050040: 2020 2064 6566 2066 6574 6368 5f61 6363     def fetch_acc
-00050050: 6f75 6e74 5f70 6f73 6974 696f 6e73 2873  ount_positions(s
-00050060: 656c 662c 2073 796d 626f 6c73 3a20 4f70  elf, symbols: Op
-00050070: 7469 6f6e 616c 5b4c 6973 745b 7374 725d  tional[List[str]
-00050080: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00050090: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-000500a0: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-000500b0: 6163 636f 756e 7420 706f 7369 7469 6f6e  account position
-000500c0: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-000500d0: 205b 7374 725d 7c4e 6f6e 6520 7379 6d62   [str]|None symb
-000500e0: 6f6c 733a 206c 6973 7420 6f66 2075 6e69  ols: list of uni
-000500f0: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
-00050100: 6f6c 730a 2020 2020 2020 2020 3a70 6172  ols.        :par
-00050110: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-00050120: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-00050130: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-00050140: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
-00050150: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-00050160: 6574 7572 6e73 2064 6963 743a 2064 6174  eturns dict: dat
-00050170: 6120 6f6e 2061 6363 6f75 6e74 2070 6f73  a on account pos
-00050180: 6974 696f 6e73 0a20 2020 2020 2020 2022  itions.        "
-00050190: 2222 0a20 2020 2020 2020 2069 6620 7379  "".        if sy
-000501a0: 6d62 6f6c 7320 6973 206e 6f74 204e 6f6e  mbols is not Non
-000501b0: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-000501c0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-000501d0: 2873 796d 626f 6c73 2c20 6c69 7374 293a  (symbols, list):
-000501e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000501f0: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-00050200: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-00050210: 202b 2027 2066 6574 6368 506f 7369 7469   + ' fetchPositi
-00050220: 6f6e 7328 2920 7265 7175 6972 6573 2061  ons() requires a
-00050230: 6e20 6172 7261 7920 6172 6775 6d65 6e74  n array argument
-00050240: 2066 6f72 2073 796d 626f 6c73 2729 0a20   for symbols'). 
-00050250: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-00050260: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00050270: 2020 2073 656c 662e 6c6f 6164 5f6c 6576     self.load_lev
-00050280: 6572 6167 655f 6272 6163 6b65 7473 2846  erage_brackets(F
-00050290: 616c 7365 2c20 7061 7261 6d73 290a 2020  alse, params).  
-000502a0: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
-000502b0: 6f6e 650a 2020 2020 2020 2020 6465 6661  one.        defa
-000502c0: 756c 7454 7970 6520 3d20 7365 6c66 2e73  ultType = self.s
-000502d0: 6166 655f 7374 7269 6e67 2873 656c 662e  afe_string(self.
-000502e0: 6f70 7469 6f6e 732c 2027 6465 6661 756c  options, 'defaul
-000502f0: 7454 7970 6527 2c20 2766 7574 7572 6527  tType', 'future'
-00050300: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
-00050310: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00050320: 6728 7061 7261 6d73 2c20 2774 7970 6527  g(params, 'type'
-00050330: 2c20 6465 6661 756c 7454 7970 6529 0a20  , defaultType). 
-00050340: 2020 2020 2020 2071 7565 7279 203d 2073         query = s
-00050350: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-00050360: 2027 7479 7065 2729 0a20 2020 2020 2020   'type').       
-00050370: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
-00050380: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
-00050390: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
-000503a0: 6e64 6c65 5f73 7562 5f74 7970 655f 616e  ndle_sub_type_an
-000503b0: 645f 7061 7261 6d73 2827 6665 7463 6841  d_params('fetchA
-000503c0: 6363 6f75 6e74 506f 7369 7469 6f6e 7327  ccountPositions'
-000503d0: 2c20 4e6f 6e65 2c20 7061 7261 6d73 2c20  , None, params, 
-000503e0: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
-000503f0: 2020 6966 2073 656c 662e 6973 5f6c 696e    if self.is_lin
-00050400: 6561 7228 7479 7065 2c20 7375 6254 7970  ear(type, subTyp
-00050410: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00050420: 6d65 7468 6f64 203d 2027 6661 7069 5072  method = 'fapiPr
-00050430: 6976 6174 6547 6574 4163 636f 756e 7427  ivateGetAccount'
-00050440: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
-00050450: 6c66 2e69 735f 696e 7665 7273 6528 7479  lf.is_inverse(ty
-00050460: 7065 2c20 7375 6254 7970 6529 3a0a 2020  pe, subType):.  
-00050470: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00050480: 203d 2027 6461 7069 5072 6976 6174 6547   = 'dapiPrivateG
-00050490: 6574 4163 636f 756e 7427 0a20 2020 2020  etAccount'.     
-000504a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000504b0: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-000504c0: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-000504d0: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
-000504e0: 6e73 2829 2073 7570 706f 7274 7320 6c69  ns() supports li
-000504f0: 6e65 6172 2061 6e64 2069 6e76 6572 7365  near and inverse
-00050500: 2063 6f6e 7472 6163 7473 206f 6e6c 7927   contracts only'
-00050510: 290a 2020 2020 2020 2020 6163 636f 756e  ).        accoun
-00050520: 7420 3d20 6765 7461 7474 7228 7365 6c66  t = getattr(self
-00050530: 2c20 6d65 7468 6f64 2928 7175 6572 7929  , method)(query)
-00050540: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00050550: 3d20 7365 6c66 2e70 6172 7365 5f61 6363  = self.parse_acc
-00050560: 6f75 6e74 5f70 6f73 6974 696f 6e73 2861  ount_positions(a
-00050570: 6363 6f75 6e74 290a 2020 2020 2020 2020  ccount).        
-00050580: 7379 6d62 6f6c 7320 3d20 7365 6c66 2e6d  symbols = self.m
-00050590: 6172 6b65 745f 7379 6d62 6f6c 7328 7379  arket_symbols(sy
-000505a0: 6d62 6f6c 7329 0a20 2020 2020 2020 2072  mbols).        r
-000505b0: 6574 7572 6e20 7365 6c66 2e66 696c 7465  eturn self.filte
-000505c0: 725f 6279 5f61 7272 6179 2872 6573 756c  r_by_array(resul
-000505d0: 742c 2027 7379 6d62 6f6c 272c 2073 796d  t, 'symbol', sym
-000505e0: 626f 6c73 2c20 4661 6c73 6529 0a0a 2020  bols, False)..  
-000505f0: 2020 6465 6620 6665 7463 685f 706f 7369    def fetch_posi
-00050600: 7469 6f6e 735f 7269 736b 2873 656c 662c  tions_risk(self,
-00050610: 2073 796d 626f 6c73 3a20 4f70 7469 6f6e   symbols: Option
-00050620: 616c 5b4c 6973 745b 7374 725d 5d20 3d20  al[List[str]] = 
-00050630: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-00050640: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00050650: 2020 2020 2020 6665 7463 6820 706f 7369        fetch posi
-00050660: 7469 6f6e 7320 7269 736b 0a20 2020 2020  tions risk.     
-00050670: 2020 203a 7061 7261 6d20 5b73 7472 5d7c     :param [str]|
-00050680: 4e6f 6e65 2073 796d 626f 6c73 3a20 6c69  None symbols: li
-00050690: 7374 206f 6620 756e 6966 6965 6420 6d61  st of unified ma
-000506a0: 726b 6574 2073 796d 626f 6c73 0a20 2020  rket symbols.   
-000506b0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-000506c0: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-000506d0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-000506e0: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
-000506f0: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
-00050700: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00050710: 6469 6374 3a20 6461 7461 206f 6e20 7468  dict: data on th
-00050720: 6520 706f 7369 7469 6f6e 7320 7269 736b  e positions risk
-00050730: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00050740: 2020 2020 2069 6620 7379 6d62 6f6c 7320       if symbols 
-00050750: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00050760: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00050770: 6973 696e 7374 616e 6365 2873 796d 626f  isinstance(symbo
-00050780: 6c73 2c20 6c69 7374 293a 0a20 2020 2020  ls, list):.     
-00050790: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000507a0: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
-000507b0: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
-000507c0: 6574 6368 506f 7369 7469 6f6e 7352 6973  etchPositionsRis
-000507d0: 6b28 2920 7265 7175 6972 6573 2061 6e20  k() requires an 
-000507e0: 6172 7261 7920 6172 6775 6d65 6e74 2066  array argument f
-000507f0: 6f72 2073 796d 626f 6c73 2729 0a20 2020  or symbols').   
-00050800: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-00050810: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00050820: 2073 656c 662e 6c6f 6164 5f6c 6576 6572   self.load_lever
-00050830: 6167 655f 6272 6163 6b65 7473 2846 616c  age_brackets(Fal
-00050840: 7365 2c20 7061 7261 6d73 290a 2020 2020  se, params).    
-00050850: 2020 2020 7265 7175 6573 7420 3d20 7b7d      request = {}
-00050860: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
-00050870: 3d20 4e6f 6e65 0a20 2020 2020 2020 2064  = None.        d
-00050880: 6566 6175 6c74 5479 7065 203d 2027 6675  efaultType = 'fu
-00050890: 7475 7265 270a 2020 2020 2020 2020 6465  ture'.        de
-000508a0: 6661 756c 7454 7970 6520 3d20 7365 6c66  faultType = self
-000508b0: 2e73 6166 655f 7374 7269 6e67 2873 656c  .safe_string(sel
-000508c0: 662e 6f70 7469 6f6e 732c 2027 6465 6661  f.options, 'defa
-000508d0: 756c 7454 7970 6527 2c20 6465 6661 756c  ultType', defaul
-000508e0: 7454 7970 6529 0a20 2020 2020 2020 2074  tType).        t
-000508f0: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
-00050900: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-00050910: 7479 7065 272c 2064 6566 6175 6c74 5479  type', defaultTy
-00050920: 7065 290a 2020 2020 2020 2020 7375 6254  pe).        subT
-00050930: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
-00050940: 2020 2073 7562 5479 7065 2c20 7061 7261     subType, para
-00050950: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
-00050960: 5f73 7562 5f74 7970 655f 616e 645f 7061  _sub_type_and_pa
-00050970: 7261 6d73 2827 6665 7463 6850 6f73 6974  rams('fetchPosit
-00050980: 696f 6e73 5269 736b 272c 204e 6f6e 652c  ionsRisk', None,
-00050990: 2070 6172 616d 732c 2027 6c69 6e65 6172   params, 'linear
-000509a0: 2729 0a20 2020 2020 2020 2070 6172 616d  ').        param
-000509b0: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-000509c0: 7261 6d73 2c20 2774 7970 6527 290a 2020  rams, 'type').  
-000509d0: 2020 2020 2020 6966 2073 656c 662e 6973        if self.is
-000509e0: 5f6c 696e 6561 7228 7479 7065 2c20 7375  _linear(type, su
-000509f0: 6254 7970 6529 3a0a 2020 2020 2020 2020  bType):.        
-00050a00: 2020 2020 6d65 7468 6f64 203d 2027 6661      method = 'fa
-00050a10: 7069 5072 6976 6174 6547 6574 506f 7369  piPrivateGetPosi
-00050a20: 7469 6f6e 5269 736b 270a 2020 2020 2020  tionRisk'.      
-00050a30: 2020 2020 2020 2320 2023 2323 2052 6573        #  ### Res
-00050a40: 706f 6e73 6520 6578 616d 706c 6573 2020  ponse examples  
-00050a50: 2323 230a 2020 2020 2020 2020 2020 2020  ###.            
-00050a60: 230a 2020 2020 2020 2020 2020 2020 2320  #.            # 
-00050a70: 466f 7220 4f6e 652d 7761 7920 706f 7369  For One-way posi
-00050a80: 7469 6f6e 206d 6f64 653a 0a20 2020 2020  tion mode:.     
-00050a90: 2020 2020 2020 2023 2020 2020 205b 0a20         #     [. 
-00050aa0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00050ab0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00050ac0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050ad0: 2022 656e 7472 7950 7269 6365 223a 2022   "entryPrice": "
-00050ae0: 302e 3030 3030 3022 2c0a 2020 2020 2020  0.00000",.      
-00050af0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00050b00: 2020 2020 226d 6172 6769 6e54 7970 6522      "marginType"
-00050b10: 3a20 2269 736f 6c61 7465 6422 2c0a 2020  : "isolated",.  
-00050b20: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00050b30: 2020 2020 2020 2020 2269 7341 7574 6f41          "isAutoA
-00050b40: 6464 4d61 7267 696e 223a 2022 6661 6c73  ddMargin": "fals
-00050b50: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
-00050b60: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
-00050b70: 736f 6c61 7465 644d 6172 6769 6e22 3a20  solatedMargin": 
-00050b80: 2230 2e30 3030 3030 3030 3022 2c0a 2020  "0.00000000",.  
-00050b90: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00050ba0: 2020 2020 2020 2020 226c 6576 6572 6167          "leverag
-00050bb0: 6522 3a20 2231 3022 2c0a 2020 2020 2020  e": "10",.      
-00050bc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00050bd0: 2020 2020 226c 6971 7569 6461 7469 6f6e      "liquidation
-00050be0: 5072 6963 6522 3a20 2230 222c 0a20 2020  Price": "0",.   
-00050bf0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00050c00: 2020 2020 2020 2022 6d61 726b 5072 6963         "markPric
-00050c10: 6522 3a20 2236 3637 392e 3530 3637 3131  e": "6679.506711
-00050c20: 3738 222c 0a20 2020 2020 2020 2020 2020  78",.           
-00050c30: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00050c40: 6d61 784e 6f74 696f 6e61 6c56 616c 7565  maxNotionalValue
-00050c50: 223a 2022 3230 3030 3030 3030 222c 0a20  ": "20000000",. 
-00050c60: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00050c70: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
-00050c80: 6f6e 416d 7422 3a20 2230 2e30 3030 222c  onAmt": "0.000",
-00050c90: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00050ca0: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
-00050cb0: 6f6c 223a 2022 4254 4355 5344 5422 2c0a  ol": "BTCUSDT",.
-00050cc0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00050cd0: 2020 2020 2020 2020 2020 2275 6e52 6561            "unRea
-00050ce0: 6c69 7a65 6450 726f 6669 7422 3a20 2230  lizedProfit": "0
-00050cf0: 2e30 3030 3030 3030 3022 2c0a 2020 2020  .00000000",.    
-00050d00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050d10: 2020 2020 2020 2270 6f73 6974 696f 6e53        "positionS
-00050d20: 6964 6522 3a20 2242 4f54 4822 2c0a 2020  ide": "BOTH",.  
-00050d30: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00050d40: 2020 2020 2020 2020 2275 7064 6174 6554          "updateT
-00050d50: 696d 6522 3a20 300a 2020 2020 2020 2020  ime": 0.        
-00050d60: 2020 2020 2320 2020 2020 2020 207d 0a20      #        }. 
-00050d70: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00050d80: 205d 0a20 2020 2020 2020 2020 2020 2023   ].            #
-00050d90: 0a20 2020 2020 2020 2020 2020 2023 2046  .            # F
-00050da0: 6f72 2048 6564 6765 2070 6f73 6974 696f  or Hedge positio
-00050db0: 6e20 6d6f 6465 3a0a 2020 2020 2020 2020  n mode:.        
-00050dc0: 2020 2020 2320 2020 2020 5b0a 2020 2020      #     [.    
-00050dd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050de0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00050df0: 2320 2020 2020 2020 2020 2020 2020 2265  #             "e
-00050e00: 6e74 7279 5072 6963 6522 3a20 2236 3536  ntryPrice": "656
-00050e10: 332e 3636 3530 3022 2c0a 2020 2020 2020  3.66500",.      
-00050e20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00050e30: 2020 2020 226d 6172 6769 6e54 7970 6522      "marginType"
-00050e40: 3a20 2269 736f 6c61 7465 6422 2c0a 2020  : "isolated",.  
-00050e50: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00050e60: 2020 2020 2020 2020 2269 7341 7574 6f41          "isAutoA
-00050e70: 6464 4d61 7267 696e 223a 2022 6661 6c73  ddMargin": "fals
-00050e80: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
-00050e90: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
-00050ea0: 736f 6c61 7465 644d 6172 6769 6e22 3a20  solatedMargin": 
-00050eb0: 2231 3535 3137 2e35 3431 3530 3436 3822  "15517.54150468"
-00050ec0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-00050ed0: 2020 2020 2020 2020 2020 2020 226c 6576              "lev
-00050ee0: 6572 6167 6522 3a20 2231 3022 2c0a 2020  erage": "10",.  
-00050ef0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00050f00: 2020 2020 2020 2020 226c 6971 7569 6461          "liquida
-00050f10: 7469 6f6e 5072 6963 6522 3a20 2235 3933  tionPrice": "593
-00050f20: 302e 3738 222c 0a20 2020 2020 2020 2020  0.78",.         
-00050f30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050f40: 2022 6d61 726b 5072 6963 6522 3a20 2236   "markPrice": "6
-00050f50: 3637 392e 3530 3637 3131 3738 222c 0a20  679.50671178",. 
-00050f60: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00050f70: 2020 2020 2020 2020 2022 6d61 784e 6f74           "maxNot
-00050f80: 696f 6e61 6c56 616c 7565 223a 2022 3230  ionalValue": "20
-00050f90: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-00050fa0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00050fb0: 2020 2022 706f 7369 7469 6f6e 416d 7422     "positionAmt"
-00050fc0: 3a20 2232 302e 3030 3022 2c0a 2020 2020  : "20.000",.    
-00050fd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050fe0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00050ff0: 2242 5443 5553 4454 222c 0a20 2020 2020  "BTCUSDT",.     
-00051000: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00051010: 2020 2020 2022 756e 5265 616c 697a 6564       "unRealized
-00051020: 5072 6f66 6974 223a 2022 3233 3136 2e38  Profit": "2316.8
-00051030: 3334 3233 3536 3022 0a20 2020 2020 2020  3423560".       
-00051040: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051050: 2020 2022 706f 7369 7469 6f6e 5369 6465     "positionSide
-00051060: 223a 2022 4c4f 4e47 222c 0a20 2020 2020  ": "LONG",.     
-00051070: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00051080: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-00051090: 223a 2031 3632 3534 3734 3330 3437 3635  ": 1625474304765
-000510a0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000510b0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-000510c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000510d0: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
-000510e0: 2020 2020 2020 2020 2020 2020 2265 6e74              "ent
-000510f0: 7279 5072 6963 6522 3a20 2230 2e30 3030  ryPrice": "0.000
-00051100: 3030 222c 0a20 2020 2020 2020 2020 2020  00",.           
-00051110: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00051120: 6d61 7267 696e 5479 7065 223a 2022 6973  marginType": "is
-00051130: 6f6c 6174 6564 222c 0a20 2020 2020 2020  olated",.       
-00051140: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051150: 2020 2022 6973 4175 746f 4164 644d 6172     "isAutoAddMar
-00051160: 6769 6e22 3a20 2266 616c 7365 222c 0a20  gin": "false",. 
-00051170: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00051180: 2020 2020 2020 2020 2022 6973 6f6c 6174           "isolat
-00051190: 6564 4d61 7267 696e 223a 2022 3534 3133  edMargin": "5413
-000511a0: 2e39 3537 3939 3939 3122 2c0a 2020 2020  .95799991",.    
-000511b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000511c0: 2020 2020 2020 226c 6576 6572 6167 6522        "leverage"
-000511d0: 3a20 2231 3022 2c0a 2020 2020 2020 2020  : "10",.        
-000511e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000511f0: 2020 226c 6971 7569 6461 7469 6f6e 5072    "liquidationPr
-00051200: 6963 6522 3a20 2237 3138 392e 3935 222c  ice": "7189.95",
-00051210: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00051220: 2020 2020 2020 2020 2020 2022 6d61 726b             "mark
-00051230: 5072 6963 6522 3a20 2236 3637 392e 3530  Price": "6679.50
-00051240: 3637 3131 3738 222c 0a20 2020 2020 2020  671178",.       
-00051250: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051260: 2020 2022 6d61 784e 6f74 696f 6e61 6c56     "maxNotionalV
-00051270: 616c 7565 223a 2022 3230 3030 3030 3030  alue": "20000000
-00051280: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-00051290: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-000512a0: 7369 7469 6f6e 416d 7422 3a20 222d 3130  sitionAmt": "-10
-000512b0: 2e30 3030 222c 0a20 2020 2020 2020 2020  .000",.         
-000512c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000512d0: 2022 7379 6d62 6f6c 223a 2022 4254 4355   "symbol": "BTCU
-000512e0: 5344 5422 2c0a 2020 2020 2020 2020 2020  SDT",.          
-000512f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00051300: 2275 6e52 6561 6c69 7a65 6450 726f 6669  "unRealizedProfi
-00051310: 7422 3a20 222d 3131 3536 2e34 3637 3131  t": "-1156.46711
-00051320: 3738 3022 2c0a 2020 2020 2020 2020 2020  780",.          
-00051330: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00051340: 2270 6f73 6974 696f 6e53 6964 6522 3a20  "positionSide": 
-00051350: 2253 484f 5254 222c 0a20 2020 2020 2020  "SHORT",.       
-00051360: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051370: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
-00051380: 2030 0a20 2020 2020 2020 2020 2020 2023   0.            #
-00051390: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-000513a0: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
-000513b0: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
-000513c0: 2e69 735f 696e 7665 7273 6528 7479 7065  .is_inverse(type
-000513d0: 2c20 7375 6254 7970 6529 3a0a 2020 2020  , subType):.    
-000513e0: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-000513f0: 2027 6461 7069 5072 6976 6174 6547 6574   'dapiPrivateGet
-00051400: 506f 7369 7469 6f6e 5269 736b 270a 2020  PositionRisk'.  
-00051410: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00051420: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
-00051430: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
-00051440: 6964 202b 2027 2066 6574 6368 506f 7369  id + ' fetchPosi
-00051450: 7469 6f6e 7352 6973 6b28 2920 7375 7070  tionsRisk() supp
-00051460: 6f72 7473 206c 696e 6561 7220 616e 6420  orts linear and 
-00051470: 696e 7665 7273 6520 636f 6e74 7261 6374  inverse contract
-00051480: 7320 6f6e 6c79 2729 0a20 2020 2020 2020  s only').       
-00051490: 2072 6573 706f 6e73 6520 3d20 6765 7461   response = geta
-000514a0: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
-000514b0: 2928 7365 6c66 2e65 7874 656e 6428 7265  )(self.extend(re
-000514c0: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-000514d0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000514e0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-000514f0: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
-00051500: 6e28 7265 7370 6f6e 7365 2929 3a0a 2020  n(response)):.  
-00051510: 2020 2020 2020 2020 2020 7061 7273 6564            parsed
-00051520: 203d 2073 656c 662e 7061 7273 655f 706f   = self.parse_po
-00051530: 7369 7469 6f6e 5f72 6973 6b28 7265 7370  sition_risk(resp
-00051540: 6f6e 7365 5b69 5d29 0a20 2020 2020 2020  onse[i]).       
-00051550: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
-00051560: 6e64 2870 6172 7365 6429 0a20 2020 2020  nd(parsed).     
-00051570: 2020 2073 796d 626f 6c73 203d 2073 656c     symbols = sel
-00051580: 662e 6d61 726b 6574 5f73 796d 626f 6c73  f.market_symbols
-00051590: 2873 796d 626f 6c73 290a 2020 2020 2020  (symbols).      
-000515a0: 2020 7265 7475 726e 2073 656c 662e 6669    return self.fi
-000515b0: 6c74 6572 5f62 795f 6172 7261 7928 7265  lter_by_array(re
-000515c0: 7375 6c74 2c20 2773 796d 626f 6c27 2c20  sult, 'symbol', 
-000515d0: 7379 6d62 6f6c 732c 2046 616c 7365 290a  symbols, False).
-000515e0: 0a20 2020 2064 6566 2066 6574 6368 5f66  .    def fetch_f
-000515f0: 756e 6469 6e67 5f68 6973 746f 7279 2873  unding_history(s
-00051600: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
-00051610: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00051620: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
-00051630: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-00051640: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
-00051650: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
-00051660: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-00051670: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-00051680: 6368 2074 6865 2068 6973 746f 7279 206f  ch the history o
-00051690: 6620 6675 6e64 696e 6720 7061 796d 656e  f funding paymen
-000516a0: 7473 2070 6169 6420 616e 6420 7265 6365  ts paid and rece
-000516b0: 6976 6564 206f 6e20 7365 6c66 2061 6363  ived on self acc
-000516c0: 6f75 6e74 0a20 2020 2020 2020 203a 7061  ount.        :pa
-000516d0: 7261 6d20 7374 727c 4e6f 6e65 2073 796d  ram str|None sym
-000516e0: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
-000516f0: 6b65 7420 7379 6d62 6f6c 0a20 2020 2020  ket symbol.     
-00051700: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00051710: 6e65 2073 696e 6365 3a20 7468 6520 6561  ne since: the ea
-00051720: 726c 6965 7374 2074 696d 6520 696e 206d  rliest time in m
-00051730: 7320 746f 2066 6574 6368 2066 756e 6469  s to fetch fundi
-00051740: 6e67 2068 6973 746f 7279 2066 6f72 0a20  ng history for. 
-00051750: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00051760: 747c 4e6f 6e65 206c 696d 6974 3a20 7468  t|None limit: th
-00051770: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-00051780: 206f 6620 6675 6e64 696e 6720 6869 7374   of funding hist
-00051790: 6f72 7920 7374 7275 6374 7572 6573 2074  ory structures t
-000517a0: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
-000517b0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-000517c0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-000517d0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-000517e0: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-000517f0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00051800: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-00051810: 6374 3a20 6120 6066 756e 6469 6e67 2068  ct: a `funding h
-00051820: 6973 746f 7279 2073 7472 7563 7475 7265  istory structure
-00051830: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00051840: 6378 742e 636f 6d2f 232f 3f69 643d 6675  cxt.com/#/?id=fu
-00051850: 6e64 696e 672d 6869 7374 6f72 792d 7374  nding-history-st
-00051860: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-00051870: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-00051880: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-00051890: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-000518a0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-000518b0: 6d65 7468 6f64 203d 204e 6f6e 650a 2020  method = None.  
-000518c0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-000518d0: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
-000518e0: 6e63 6f6d 6554 7970 6527 3a20 2746 554e  ncomeType': 'FUN
-000518f0: 4449 4e47 5f46 4545 272c 2020 2320 2254  DING_FEE',  # "T
-00051900: 5241 4e53 4645 5222 efbc 8c22 5745 4c43  RANSFER"..."WELC
-00051910: 4f4d 455f 424f 4e55 5322 2c20 2252 4541  OME_BONUS", "REA
-00051920: 4c49 5a45 445f 504e 4c22 efbc 8c22 4655  LIZED_PNL"..."FU
-00051930: 4e44 494e 475f 4645 4522 2c20 2243 4f4d  NDING_FEE", "COM
-00051940: 4d49 5353 494f 4e22 2061 6e64 2022 494e  MISSION" and "IN
-00051950: 5355 5241 4e43 455f 434c 4541 5222 0a20  SURANCE_CLEAR". 
-00051960: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00051970: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
-00051980: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00051990: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-000519a0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-000519b0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000519c0: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-000519d0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-000519e0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000519f0: 206d 6172 6b65 745b 2773 7761 7027 5d3a   market['swap']:
-00051a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00051a10: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-00051a20: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-00051a30: 6665 7463 6846 756e 6469 6e67 4869 7374  fetchFundingHist
-00051a40: 6f72 7928 2920 7375 7070 6f72 7473 2073  ory() supports s
-00051a50: 7761 7020 636f 6e74 7261 6374 7320 6f6e  wap contracts on
-00051a60: 6c79 2729 0a20 2020 2020 2020 2073 7562  ly').        sub
-00051a70: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
-00051a80: 2020 2020 7375 6254 7970 652c 2070 6172      subType, par
-00051a90: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-00051aa0: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
-00051ab0: 6172 616d 7328 2766 6574 6368 4675 6e64  arams('fetchFund
-00051ac0: 696e 6748 6973 746f 7279 272c 206d 6172  ingHistory', mar
-00051ad0: 6b65 742c 2070 6172 616d 732c 2027 6c69  ket, params, 'li
-00051ae0: 6e65 6172 2729 0a20 2020 2020 2020 2069  near').        i
-00051af0: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
-00051b00: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00051b10: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
-00051b20: 696d 6527 5d20 3d20 7369 6e63 650a 2020  ime'] = since.  
-00051b30: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
-00051b40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00051b50: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00051b60: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
-00051b70: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
-00051b80: 5479 7065 203d 2073 656c 662e 7361 6665  Type = self.safe
-00051b90: 5f73 7472 696e 675f 3228 7365 6c66 2e6f  _string_2(self.o
-00051ba0: 7074 696f 6e73 2c20 2766 6574 6368 4675  ptions, 'fetchFu
-00051bb0: 6e64 696e 6748 6973 746f 7279 272c 2027  ndingHistory', '
-00051bc0: 6465 6661 756c 7454 7970 6527 2c20 2766  defaultType', 'f
-00051bd0: 7574 7572 6527 290a 2020 2020 2020 2020  uture').        
-00051be0: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
-00051bf0: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
-00051c00: 2774 7970 6527 2c20 6465 6661 756c 7454  'type', defaultT
-00051c10: 7970 6529 0a20 2020 2020 2020 2070 6172  ype).        par
-00051c20: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
-00051c30: 7061 7261 6d73 2c20 2774 7970 6527 290a  params, 'type').
-00051c40: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00051c50: 6973 5f6c 696e 6561 7228 7479 7065 2c20  is_linear(type, 
-00051c60: 7375 6254 7970 6529 3a0a 2020 2020 2020  subType):.      
-00051c70: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-00051c80: 6661 7069 5072 6976 6174 6547 6574 496e  fapiPrivateGetIn
-00051c90: 636f 6d65 270a 2020 2020 2020 2020 656c  come'.        el
-00051ca0: 6966 2073 656c 662e 6973 5f69 6e76 6572  if self.is_inver
-00051cb0: 7365 2874 7970 652c 2073 7562 5479 7065  se(type, subType
-00051cc0: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
-00051cd0: 6574 686f 6420 3d20 2764 6170 6950 7269  ethod = 'dapiPri
-00051ce0: 7661 7465 4765 7449 6e63 6f6d 6527 0a20  vateGetIncome'. 
-00051cf0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00051d00: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
-00051d10: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
-00051d20: 2e69 6420 2b20 2720 6665 7463 6846 756e  .id + ' fetchFun
-00051d30: 6469 6e67 4869 7374 6f72 7928 2920 7375  dingHistory() su
-00051d40: 7070 6f72 7473 206c 696e 6561 7220 616e  pports linear an
-00051d50: 6420 696e 7665 7273 6520 636f 6e74 7261  d inverse contra
-00051d60: 6374 7320 6f6e 6c79 2729 0a20 2020 2020  cts only').     
-00051d70: 2020 2072 6573 706f 6e73 6520 3d20 6765     response = ge
-00051d80: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
-00051d90: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
-00051da0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00051db0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00051dc0: 2073 656c 662e 7061 7273 655f 696e 636f   self.parse_inco
-00051dd0: 6d65 7328 7265 7370 6f6e 7365 2c20 6d61  mes(response, ma
-00051de0: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
-00051df0: 6974 290a 0a20 2020 2064 6566 2073 6574  it)..    def set
-00051e00: 5f6c 6576 6572 6167 6528 7365 6c66 2c20  _leverage(self, 
-00051e10: 6c65 7665 7261 6765 2c20 7379 6d62 6f6c  leverage, symbol
-00051e20: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00051e30: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-00051e40: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-00051e50: 2020 2020 2020 2020 7365 7420 7468 6520          set the 
-00051e60: 6c65 7665 6c20 6f66 206c 6576 6572 6167  level of leverag
-00051e70: 6520 666f 7220 6120 6d61 726b 6574 0a20  e for a market. 
-00051e80: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
-00051e90: 6f61 7420 6c65 7665 7261 6765 3a20 7468  oat leverage: th
-00051ea0: 6520 7261 7465 206f 6620 6c65 7665 7261  e rate of levera
-00051eb0: 6765 0a20 2020 2020 2020 203a 7061 7261  ge.        :para
-00051ec0: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-00051ed0: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-00051ee0: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
-00051ef0: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-00051f00: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-00051f10: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-00051f20: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
-00051f30: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-00051f40: 6574 7572 6e73 2064 6963 743a 2072 6573  eturns dict: res
-00051f50: 706f 6e73 6520 6672 6f6d 2074 6865 2065  ponse from the e
-00051f60: 7863 6861 6e67 650a 2020 2020 2020 2020  xchange.        
-00051f70: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
-00051f80: 796d 626f 6c20 6973 204e 6f6e 653a 0a20  ymbol is None:. 
-00051f90: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00051fa0: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
-00051fb0: 6564 2873 656c 662e 6964 202b 2027 2073  ed(self.id + ' s
-00051fc0: 6574 4c65 7665 7261 6765 2829 2072 6571  etLeverage() req
-00051fd0: 7569 7265 7320 6120 7379 6d62 6f6c 2061  uires a symbol a
-00051fe0: 7267 756d 656e 7427 290a 2020 2020 2020  rgument').      
-00051ff0: 2020 2320 5741 524e 494e 473a 2054 4849    # WARNING: THI
-00052000: 5320 5749 4c4c 2049 4e43 5245 4153 4520  S WILL INCREASE 
-00052010: 4c49 5155 4944 4154 494f 4e20 5052 4943  LIQUIDATION PRIC
-00052020: 4520 464f 5220 4f50 454e 2049 534f 4c41  E FOR OPEN ISOLA
-00052030: 5445 4420 4c4f 4e47 2050 4f53 4954 494f  TED LONG POSITIO
-00052040: 4e53 0a20 2020 2020 2020 2023 2041 4e44  NS.        # AND
-00052050: 2044 4543 5245 4153 4520 4c49 5155 4944   DECREASE LIQUID
-00052060: 4154 494f 4e20 5052 4943 4520 464f 5220  ATION PRICE FOR 
-00052070: 4f50 454e 2049 534f 4c41 5445 4420 5348  OPEN ISOLATED SH
-00052080: 4f52 5420 504f 5349 5449 4f4e 530a 2020  ORT POSITIONS.  
-00052090: 2020 2020 2020 6966 2028 6c65 7665 7261        if (levera
-000520a0: 6765 203c 2031 2920 6f72 2028 6c65 7665  ge < 1) or (leve
-000520b0: 7261 6765 203e 2031 3235 293a 0a20 2020  rage > 125):.   
-000520c0: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-000520d0: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-000520e0: 6420 2b20 2720 6c65 7665 7261 6765 2073  d + ' leverage s
-000520f0: 686f 756c 6420 6265 2062 6574 7765 656e  hould be between
-00052100: 2031 2061 6e64 2031 3235 2729 0a20 2020   1 and 125').   
-00052110: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-00052120: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00052130: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-00052140: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-00052150: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
-00052160: 6f6e 650a 2020 2020 2020 2020 6966 206d  one.        if m
-00052170: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
-00052180: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00052190: 686f 6420 3d20 2766 6170 6950 7269 7661  hod = 'fapiPriva
-000521a0: 7465 506f 7374 4c65 7665 7261 6765 270a  tePostLeverage'.
-000521b0: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
-000521c0: 6b65 745b 2769 6e76 6572 7365 275d 3a0a  ket['inverse']:.
-000521d0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-000521e0: 6f64 203d 2027 6461 7069 5072 6976 6174  od = 'dapiPrivat
-000521f0: 6550 6f73 744c 6576 6572 6167 6527 0a20  ePostLeverage'. 
-00052200: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00052210: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
-00052220: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
-00052230: 2e69 6420 2b20 2720 7365 744c 6576 6572  .id + ' setLever
-00052240: 6167 6528 2920 7375 7070 6f72 7473 206c  age() supports l
-00052250: 696e 6561 7220 616e 6420 696e 7665 7273  inear and invers
-00052260: 6520 636f 6e74 7261 6374 7320 6f6e 6c79  e contracts only
-00052270: 2729 0a20 2020 2020 2020 2072 6571 7565  ').        reque
-00052280: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
-00052290: 2020 2027 7379 6d62 6f6c 273a 206d 6172     'symbol': mar
-000522a0: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
-000522b0: 2020 2020 2020 2027 6c65 7665 7261 6765         'leverage
-000522c0: 273a 206c 6576 6572 6167 652c 0a20 2020  ': leverage,.   
-000522d0: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
-000522e0: 6574 7572 6e20 6765 7461 7474 7228 7365  eturn getattr(se
-000522f0: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
-00052300: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-00052310: 2070 6172 616d 7329 290a 0a20 2020 2064   params))..    d
-00052320: 6566 2073 6574 5f6d 6172 6769 6e5f 6d6f  ef set_margin_mo
-00052330: 6465 2873 656c 662c 206d 6172 6769 6e4d  de(self, marginM
-00052340: 6f64 653a 2073 7472 2c20 7379 6d62 6f6c  ode: str, symbol
-00052350: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00052360: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-00052370: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-00052380: 2020 2020 2020 2020 7365 7420 6d61 7267          set marg
-00052390: 696e 206d 6f64 6520 746f 2027 6372 6f73  in mode to 'cros
-000523a0: 7327 206f 7220 2769 736f 6c61 7465 6427  s' or 'isolated'
-000523b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000523c0: 7374 7220 6d61 7267 696e 4d6f 6465 3a20  str marginMode: 
-000523d0: 2763 726f 7373 2720 6f72 2027 6973 6f6c  'cross' or 'isol
-000523e0: 6174 6564 270a 2020 2020 2020 2020 3a70  ated'.        :p
-000523f0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-00052400: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-00052410: 7379 6d62 6f6c 0a20 2020 2020 2020 203a  symbol.        :
-00052420: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-00052430: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-00052440: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00052450: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
-00052460: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00052470: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-00052480: 7265 7370 6f6e 7365 2066 726f 6d20 7468  response from th
-00052490: 6520 6578 6368 616e 6765 0a20 2020 2020  e exchange.     
-000524a0: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-000524b0: 6620 7379 6d62 6f6c 2069 7320 4e6f 6e65  f symbol is None
-000524c0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-000524d0: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
-000524e0: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
-000524f0: 2720 7365 744d 6172 6769 6e4d 6f64 6528  ' setMarginMode(
-00052500: 2920 7265 7175 6972 6573 2061 2073 796d  ) requires a sym
-00052510: 626f 6c20 6172 6775 6d65 6e74 2729 0a20  bol argument'). 
-00052520: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00052530: 2023 207b 2263 6f64 6522 3a20 2d34 3034   # {"code": -404
-00052540: 3820 2c20 226d 7367 223a 2022 4d61 7267  8 , "msg": "Marg
-00052550: 696e 2074 7970 6520 6361 6e6e 6f74 2062  in type cannot b
-00052560: 6520 6368 616e 6765 6420 6966 2074 6865  e changed if the
-00052570: 7265 2065 7869 7374 7320 706f 7369 7469  re exists positi
-00052580: 6f6e 2e22 7d0a 2020 2020 2020 2020 230a  on."}.        #.
-00052590: 2020 2020 2020 2020 2320 6f72 0a20 2020          # or.   
-000525a0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000525b0: 207b 2263 6f64 6522 3a20 3230 302c 2022   {"code": 200, "
-000525c0: 6d73 6722 3a20 2273 7563 6365 7373 227d  msg": "success"}
-000525d0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-000525e0: 2020 206d 6172 6769 6e4d 6f64 6520 3d20     marginMode = 
-000525f0: 6d61 7267 696e 4d6f 6465 2e75 7070 6572  marginMode.upper
-00052600: 2829 0a20 2020 2020 2020 2069 6620 6d61  ().        if ma
-00052610: 7267 696e 4d6f 6465 203d 3d20 2743 524f  rginMode == 'CRO
-00052620: 5353 273a 0a20 2020 2020 2020 2020 2020  SS':.           
-00052630: 206d 6172 6769 6e4d 6f64 6520 3d20 2743   marginMode = 'C
-00052640: 524f 5353 4544 270a 2020 2020 2020 2020  ROSSED'.        
-00052650: 6966 2028 6d61 7267 696e 4d6f 6465 2021  if (marginMode !
-00052660: 3d20 2749 534f 4c41 5445 4427 2920 616e  = 'ISOLATED') an
-00052670: 6420 286d 6172 6769 6e4d 6f64 6520 213d  d (marginMode !=
-00052680: 2027 4352 4f53 5345 4427 293a 0a20 2020   'CROSSED'):.   
-00052690: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-000526a0: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-000526b0: 6420 2b20 2720 6d61 7267 696e 4d6f 6465  d + ' marginMode
-000526c0: 206d 7573 7420 6265 2065 6974 6865 7220   must be either 
-000526d0: 6973 6f6c 6174 6564 206f 7220 6372 6f73  isolated or cros
-000526e0: 7327 290a 2020 2020 2020 2020 7365 6c66  s').        self
-000526f0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00052700: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00052710: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00052720: 626f 6c29 0a20 2020 2020 2020 206d 6574  bol).        met
-00052730: 686f 6420 3d20 4e6f 6e65 0a20 2020 2020  hod = None.     
-00052740: 2020 2069 6620 6d61 726b 6574 5b27 6c69     if market['li
-00052750: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
-00052760: 2020 2020 6d65 7468 6f64 203d 2027 6661      method = 'fa
-00052770: 7069 5072 6976 6174 6550 6f73 744d 6172  piPrivatePostMar
-00052780: 6769 6e54 7970 6527 0a20 2020 2020 2020  ginType'.       
-00052790: 2065 6c69 6620 6d61 726b 6574 5b27 696e   elif market['in
-000527a0: 7665 7273 6527 5d3a 0a20 2020 2020 2020  verse']:.       
-000527b0: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
-000527c0: 6170 6950 7269 7661 7465 506f 7374 4d61  apiPrivatePostMa
-000527d0: 7267 696e 5479 7065 270a 2020 2020 2020  rginType'.      
-000527e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000527f0: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-00052800: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-00052810: 2027 2073 6574 4d61 7267 696e 4d6f 6465   ' setMarginMode
-00052820: 2829 2073 7570 706f 7274 7320 6c69 6e65  () supports line
-00052830: 6172 2061 6e64 2069 6e76 6572 7365 2063  ar and inverse c
-00052840: 6f6e 7472 6163 7473 206f 6e6c 7927 290a  ontracts only').
-00052850: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00052860: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00052870: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00052880: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00052890: 2020 2020 276d 6172 6769 6e54 7970 6527      'marginType'
-000528a0: 3a20 6d61 7267 696e 4d6f 6465 2c0a 2020  : marginMode,.  
-000528b0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000528c0: 7265 7370 6f6e 7365 203d 204e 6f6e 650a  response = None.
-000528d0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-000528e0: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
-000528f0: 6520 3d20 6765 7461 7474 7228 7365 6c66  e = getattr(self
-00052900: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
-00052910: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00052920: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00052930: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00052940: 2061 7320 653a 0a20 2020 2020 2020 2020   as e:.         
-00052950: 2020 2023 206e 6f74 2061 6e20 6572 726f     # not an erro
-00052960: 720a 2020 2020 2020 2020 2020 2020 2320  r.            # 
-00052970: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00052980: 6f6d 2f63 6378 742f 6363 7874 2f69 7373  om/ccxt/ccxt/iss
-00052990: 7565 732f 3131 3236 380a 2020 2020 2020  ues/11268.      
-000529a0: 2020 2020 2020 2320 6874 7470 733a 2f2f        # https://
-000529b0: 6769 7468 7562 2e63 6f6d 2f63 6378 742f  github.com/ccxt/
-000529c0: 6363 7874 2f70 756c 6c2f 3131 3632 340a  ccxt/pull/11624.
-000529d0: 2020 2020 2020 2020 2020 2020 2320 504f              # PO
-000529e0: 5354 2068 7474 7073 3a2f 2f66 6170 692e  ST https://fapi.
-000529f0: 6269 6e61 6e63 652e 636f 6d2f 6661 7069  binance.com/fapi
-00052a00: 2f76 312f 6d61 7267 696e 5479 7065 2034  /v1/marginType 4
-00052a10: 3030 2042 6164 2052 6571 7565 7374 0a20  00 Bad Request. 
-00052a20: 2020 2020 2020 2020 2020 2023 2062 696e             # bin
-00052a30: 616e 6365 7573 646d 0a20 2020 2020 2020  anceusdm.       
-00052a40: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00052a50: 6365 2865 2c20 4d61 7267 696e 4d6f 6465  ce(e, MarginMode
-00052a60: 416c 7265 6164 7953 6574 293a 0a20 2020  AlreadySet):.   
-00052a70: 2020 2020 2020 2020 2020 2020 2074 6872               thr
-00052a80: 6f77 4d61 7267 696e 4d6f 6465 416c 7265  owMarginModeAlre
-00052a90: 6164 7953 6574 203d 2073 656c 662e 7361  adySet = self.sa
-00052aa0: 6665 5f76 616c 7565 2873 656c 662e 6f70  fe_value(self.op
-00052ab0: 7469 6f6e 732c 2027 7468 726f 774d 6172  tions, 'throwMar
-00052ac0: 6769 6e4d 6f64 6541 6c72 6561 6479 5365  ginModeAlreadySe
-00052ad0: 7427 2c20 4661 6c73 6529 0a20 2020 2020  t', False).     
-00052ae0: 2020 2020 2020 2020 2020 2069 6620 7468             if th
-00052af0: 726f 774d 6172 6769 6e4d 6f64 6541 6c72  rowMarginModeAlr
-00052b00: 6561 6479 5365 743a 0a20 2020 2020 2020  eadySet:.       
-00052b10: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00052b20: 7365 2065 0a20 2020 2020 2020 2020 2020  se e.           
-00052b30: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00052b40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00052b50: 6573 706f 6e73 6520 3d20 7b27 636f 6465  esponse = {'code
-00052b60: 273a 202d 3430 3436 2c20 276d 7367 273a  ': -4046, 'msg':
-00052b70: 2027 4e6f 206e 6565 6420 746f 2063 6861   'No need to cha
-00052b80: 6e67 6520 6d61 7267 696e 2074 7970 652e  nge margin type.
-00052b90: 277d 0a20 2020 2020 2020 2020 2020 2065  '}.            e
-00052ba0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00052bb0: 2020 2020 2072 6169 7365 2065 0a20 2020       raise e.   
-00052bc0: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
-00052bd0: 6f6e 7365 0a0a 2020 2020 6465 6620 7365  onse..    def se
-00052be0: 745f 706f 7369 7469 6f6e 5f6d 6f64 6528  t_position_mode(
-00052bf0: 7365 6c66 2c20 6865 6467 6564 2c20 7379  self, hedged, sy
-00052c00: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
-00052c10: 7472 5d20 3d20 4e6f 6e65 2c20 7061 7261  tr] = None, para
-00052c20: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-00052c30: 2222 220a 2020 2020 2020 2020 7365 7420  """.        set 
-00052c40: 6865 6467 6564 2074 6f20 5472 7565 206f  hedged to True o
-00052c50: 7220 4661 6c73 6520 666f 7220 6120 6d61  r False for a ma
-00052c60: 726b 6574 0a20 2020 2020 2020 203a 7061  rket.        :pa
-00052c70: 7261 6d20 626f 6f6c 2068 6564 6765 643a  ram bool hedged:
-00052c80: 2073 6574 2074 6f20 5472 7565 2074 6f20   set to True to 
-00052c90: 7573 6520 6475 616c 5369 6465 506f 7369  use dualSidePosi
-00052ca0: 7469 6f6e 0a20 2020 2020 2020 203a 7061  tion.        :pa
-00052cb0: 7261 6d20 7374 727c 4e6f 6e65 2073 796d  ram str|None sym
-00052cc0: 626f 6c3a 206e 6f74 2075 7365 6420 6279  bol: not used by
-00052cd0: 2062 696e 616e 6365 2073 6574 506f 7369   binance setPosi
-00052ce0: 7469 6f6e 4d6f 6465 2829 0a20 2020 2020  tionMode().     
-00052cf0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00052d00: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-00052d10: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00052d20: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-00052d30: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00052d40: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-00052d50: 6374 3a20 7265 7370 6f6e 7365 2066 726f  ct: response fro
-00052d60: 6d20 7468 6520 6578 6368 616e 6765 0a20  m the exchange. 
-00052d70: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00052d80: 2020 2064 6566 6175 6c74 5479 7065 203d     defaultType =
-00052d90: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00052da0: 6728 7365 6c66 2e6f 7074 696f 6e73 2c20  g(self.options, 
-00052db0: 2764 6566 6175 6c74 5479 7065 272c 2027  'defaultType', '
-00052dc0: 6675 7475 7265 2729 0a20 2020 2020 2020  future').       
-00052dd0: 2074 7970 6520 3d20 7365 6c66 2e73 6166   type = self.saf
-00052de0: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
-00052df0: 2027 7479 7065 272c 2064 6566 6175 6c74   'type', default
-00052e00: 5479 7065 290a 2020 2020 2020 2020 7061  Type).        pa
-00052e10: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-00052e20: 2870 6172 616d 732c 205b 2774 7970 6527  (params, ['type'
-00052e30: 5d29 0a20 2020 2020 2020 2064 7561 6c53  ]).        dualS
-00052e40: 6964 6550 6f73 6974 696f 6e20 3d20 4e6f  idePosition = No
-00052e50: 6e65 0a20 2020 2020 2020 2069 6620 6865  ne.        if he
-00052e60: 6467 6564 3a0a 2020 2020 2020 2020 2020  dged:.          
-00052e70: 2020 6475 616c 5369 6465 506f 7369 7469    dualSidePositi
-00052e80: 6f6e 203d 2027 7472 7565 270a 2020 2020  on = 'true'.    
-00052e90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00052ea0: 2020 2020 2020 6475 616c 5369 6465 506f        dualSidePo
-00052eb0: 7369 7469 6f6e 203d 2027 6661 6c73 6527  sition = 'false'
-00052ec0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-00052ed0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00052ee0: 2027 6475 616c 5369 6465 506f 7369 7469   'dualSidePositi
-00052ef0: 6f6e 273a 2064 7561 6c53 6964 6550 6f73  on': dualSidePos
-00052f00: 6974 696f 6e2c 0a20 2020 2020 2020 207d  ition,.        }
-00052f10: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
-00052f20: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-00052f30: 6620 7365 6c66 2e69 735f 696e 7665 7273  f self.is_invers
-00052f40: 6528 7479 7065 293a 0a20 2020 2020 2020  e(type):.       
-00052f50: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
-00052f60: 6170 6950 7269 7661 7465 506f 7374 506f  apiPrivatePostPo
-00052f70: 7369 7469 6f6e 5369 6465 4475 616c 270a  sitionSideDual'.
-00052f80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00052f90: 2020 2020 2020 2020 2020 2320 6465 6661            # defa
-00052fa0: 756c 7420 746f 2066 7574 7572 650a 2020  ult to future.  
-00052fb0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00052fc0: 203d 2027 6661 7069 5072 6976 6174 6550   = 'fapiPrivateP
-00052fd0: 6f73 7450 6f73 6974 696f 6e53 6964 6544  ostPositionSideD
-00052fe0: 7561 6c27 0a20 2020 2020 2020 2023 0a20  ual'.        #. 
-00052ff0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-00053000: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-00053010: 636f 6465 223a 2032 3030 2c0a 2020 2020  code": 200,.    
-00053020: 2020 2020 2320 2020 2020 2020 226d 7367      #       "msg
-00053030: 223a 2022 7375 6363 6573 7322 0a20 2020  ": "success".   
-00053040: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00053050: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00053060: 6574 7572 6e20 6765 7461 7474 7228 7365  eturn getattr(se
-00053070: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
-00053080: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-00053090: 2070 6172 616d 7329 290a 0a20 2020 2064   params))..    d
-000530a0: 6566 2066 6574 6368 5f73 6574 746c 656d  ef fetch_settlem
-000530b0: 656e 745f 6869 7374 6f72 7928 7365 6c66  ent_history(self
-000530c0: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-000530d0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-000530e0: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-000530f0: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-00053100: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-00053110: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00053120: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-00053130: 220a 2020 2020 2020 2020 6665 7463 6865  ".        fetche
-00053140: 7320 6869 7374 6f72 6963 616c 2073 6574  s historical set
-00053150: 746c 656d 656e 7420 7265 636f 7264 730a  tlement records.
-00053160: 2020 2020 2020 2020 7365 6520 6874 7470          see http
-00053170: 733a 2f2f 6269 6e61 6e63 652d 646f 6373  s://binance-docs
-00053180: 2e67 6974 6875 622e 696f 2f61 7069 646f  .github.io/apido
-00053190: 6373 2f76 6f70 7469 6f6e 732f 656e 2f23  cs/voptions/en/#
-000531a0: 6869 7374 6f72 6963 616c 2d65 7865 7263  historical-exerc
-000531b0: 6973 652d 7265 636f 7264 730a 2020 2020  ise-records.    
-000531c0: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
-000531d0: 796d 626f 6c3a 2075 6e69 6669 6564 206d  ymbol: unified m
-000531e0: 6172 6b65 7420 7379 6d62 6f6c 206f 6620  arket symbol of 
-000531f0: 7468 6520 7365 7474 6c65 6d65 6e74 2068  the settlement h
-00053200: 6973 746f 7279 0a20 2020 2020 2020 203a  istory.        :
-00053210: 7061 7261 6d20 696e 7420 7369 6e63 653a  param int since:
-00053220: 2074 696d 6573 7461 6d70 2069 6e20 6d73   timestamp in ms
-00053230: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00053240: 696e 7420 6c69 6d69 743a 206e 756d 6265  int limit: numbe
-00053250: 7220 6f66 2072 6563 6f72 6473 2c20 6465  r of records, de
-00053260: 6661 756c 7420 3130 302c 206d 6178 2031  fault 100, max 1
-00053270: 3030 0a20 2020 2020 2020 203a 7061 7261  00.        :para
-00053280: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-00053290: 7863 6861 6e67 6520 7370 6563 6966 6963  xchange specific
-000532a0: 2070 6172 616d 730a 2020 2020 2020 2020   params.        
-000532b0: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
-000532c0: 2061 206c 6973 7420 6f66 205b 7365 7474   a list of [sett
-000532d0: 6c65 6d65 6e74 2068 6973 746f 7279 206f  lement history o
-000532e0: 626a 6563 7473 5d0a 2020 2020 2020 2020  bjects].        
-000532f0: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00053300: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00053310: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00053320: 204e 6f6e 6520 6966 2028 7379 6d62 6f6c   None if (symbol
-00053330: 2069 7320 4e6f 6e65 2920 656c 7365 2073   is None) else s
-00053340: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00053350: 6c29 0a20 2020 2020 2020 2074 7970 6520  l).        type 
-00053360: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
-00053370: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
-00053380: 6c66 2e68 616e 646c 655f 6d61 726b 6574  lf.handle_market
-00053390: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-000533a0: 2827 6665 7463 6853 6574 746c 656d 656e  ('fetchSettlemen
-000533b0: 7448 6973 746f 7279 272c 206d 6172 6b65  tHistory', marke
-000533c0: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
-000533d0: 2020 2069 6620 7479 7065 2021 3d20 276f     if type != 'o
-000533e0: 7074 696f 6e27 3a0a 2020 2020 2020 2020  ption':.        
-000533f0: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-00053400: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-00053410: 2027 2066 6574 6368 5365 7474 6c65 6d65   ' fetchSettleme
-00053420: 6e74 4869 7374 6f72 7928 2920 7375 7070  ntHistory() supp
-00053430: 6f72 7473 206f 7074 696f 6e20 6d61 726b  orts option mark
-00053440: 6574 7320 6f6e 6c79 2729 0a20 2020 2020  ets only').     
-00053450: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
-00053460: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-00053470: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
-00053480: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
-00053490: 6c20 3d20 6d61 726b 6574 5b27 7379 6d62  l = market['symb
-000534a0: 6f6c 275d 0a20 2020 2020 2020 2020 2020  ol'].           
-000534b0: 2072 6571 7565 7374 5b27 756e 6465 726c   request['underl
-000534c0: 7969 6e67 275d 203d 206d 6172 6b65 745b  ying'] = market[
-000534d0: 2762 6173 6549 6427 5d20 2b20 6d61 726b  'baseId'] + mark
-000534e0: 6574 5b27 7175 6f74 6549 6427 5d0a 2020  et['quoteId'].  
-000534f0: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-00053500: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00053510: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00053520: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-00053530: 696e 6365 0a20 2020 2020 2020 2069 6620  ince.        if 
-00053540: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
-00053550: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00053560: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
-00053570: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
-00053580: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-00053590: 6561 7069 5075 626c 6963 4765 7445 7865  eapiPublicGetExe
-000535a0: 7263 6973 6548 6973 746f 7279 2873 656c  rciseHistory(sel
-000535b0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-000535c0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-000535d0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-000535e0: 2020 205b 0a20 2020 2020 2020 2023 2020     [.        #  
-000535f0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00053600: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00053610: 7379 6d62 6f6c 223a 2022 4554 482d 3233  symbol": "ETH-23
-00053620: 3032 3233 2d31 3930 302d 5022 2c0a 2020  0223-1900-P",.  
-00053630: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00053640: 2020 2020 2273 7472 696b 6550 7269 6365      "strikePrice
-00053650: 223a 2022 3139 3030 222c 0a20 2020 2020  ": "1900",.     
-00053660: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00053670: 2022 7265 616c 5374 7269 6b65 5072 6963   "realStrikePric
-00053680: 6522 3a20 2231 3636 352e 3538 3937 3333  e": "1665.589733
-00053690: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-000536a0: 2020 2020 2020 2020 2020 2265 7870 6972            "expir
-000536b0: 7944 6174 6522 3a20 3136 3737 3133 3932  yDate": 16771392
-000536c0: 3030 3030 302c 0a20 2020 2020 2020 2023  00000,.        #
-000536d0: 2020 2020 2020 2020 2020 2020 2022 7374               "st
-000536e0: 7269 6b65 5265 7375 6c74 223a 2022 5245  rikeResult": "RE
-000536f0: 414c 4953 5449 435f 5641 4c55 455f 5354  ALISTIC_VALUE_ST
-00053700: 5249 434b 454e 220a 2020 2020 2020 2020  RICKEN".        
-00053710: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
-00053720: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
-00053730: 2020 2020 230a 2020 2020 2020 2020 7365      #.        se
-00053740: 7474 6c65 6d65 6e74 7320 3d20 7365 6c66  ttlements = self
-00053750: 2e70 6172 7365 5f73 6574 746c 656d 656e  .parse_settlemen
-00053760: 7473 2872 6573 706f 6e73 652c 206d 6172  ts(response, mar
-00053770: 6b65 7429 0a20 2020 2020 2020 2073 6f72  ket).        sor
-00053780: 7465 6420 3d20 7365 6c66 2e73 6f72 745f  ted = self.sort_
-00053790: 6279 2873 6574 746c 656d 656e 7473 2c20  by(settlements, 
-000537a0: 2774 696d 6573 7461 6d70 2729 0a20 2020  'timestamp').   
-000537b0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000537c0: 2e66 696c 7465 725f 6279 5f73 796d 626f  .filter_by_symbo
-000537d0: 6c5f 7369 6e63 655f 6c69 6d69 7428 736f  l_since_limit(so
-000537e0: 7274 6564 2c20 7379 6d62 6f6c 2c20 7369  rted, symbol, si
-000537f0: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
-00053800: 2064 6566 2070 6172 7365 5f73 6574 746c   def parse_settl
-00053810: 656d 656e 7428 7365 6c66 2c20 7365 7474  ement(self, sett
-00053820: 6c65 6d65 6e74 2c20 6d61 726b 6574 293a  lement, market):
-00053830: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00053840: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-00053850: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
-00053860: 6d62 6f6c 223a 2022 4554 482d 3233 3032  mbol": "ETH-2302
-00053870: 3233 2d31 3930 302d 5022 2c0a 2020 2020  23-1900-P",.    
-00053880: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-00053890: 7472 696b 6550 7269 6365 223a 2022 3139  trikePrice": "19
-000538a0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-000538b0: 2020 2020 2020 2022 7265 616c 5374 7269         "realStri
-000538c0: 6b65 5072 6963 6522 3a20 2231 3636 352e  kePrice": "1665.
-000538d0: 3538 3937 3333 3422 2c0a 2020 2020 2020  5897334",.      
-000538e0: 2020 2320 2020 2020 2020 2020 2265 7870    #         "exp
-000538f0: 6972 7944 6174 6522 3a20 3136 3737 3133  iryDate": 167713
-00053900: 3932 3030 3030 302c 0a20 2020 2020 2020  9200000,.       
-00053910: 2023 2020 2020 2020 2020 2022 7374 7269   #         "stri
-00053920: 6b65 5265 7375 6c74 223a 2022 5245 414c  keResult": "REAL
-00053930: 4953 5449 435f 5641 4c55 455f 5354 5249  ISTIC_VALUE_STRI
-00053940: 434b 454e 220a 2020 2020 2020 2020 2320  CKEN".        # 
-00053950: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-00053960: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
-00053970: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
-00053980: 7465 6765 7228 7365 7474 6c65 6d65 6e74  teger(settlement
-00053990: 2c20 2765 7870 6972 7944 6174 6527 290a  , 'expiryDate').
-000539a0: 2020 2020 2020 2020 6d61 726b 6574 4964          marketId
-000539b0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-000539c0: 696e 6728 7365 7474 6c65 6d65 6e74 2c20  ing(settlement, 
-000539d0: 2773 796d 626f 6c27 290a 2020 2020 2020  'symbol').      
-000539e0: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
-000539f0: 2020 2020 2020 2027 696e 666f 273a 2073         'info': s
-00053a00: 6574 746c 656d 656e 742c 0a20 2020 2020  ettlement,.     
-00053a10: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-00053a20: 2073 656c 662e 7361 6665 5f73 796d 626f   self.safe_symbo
-00053a30: 6c28 6d61 726b 6574 4964 2c20 6d61 726b  l(marketId, mark
-00053a40: 6574 292c 0a20 2020 2020 2020 2020 2020  et),.           
-00053a50: 2027 7072 6963 6527 3a20 7365 6c66 2e73   'price': self.s
-00053a60: 6166 655f 6e75 6d62 6572 2873 6574 746c  afe_number(settl
-00053a70: 656d 656e 742c 2027 7265 616c 5374 7269  ement, 'realStri
-00053a80: 6b65 5072 6963 6527 292c 0a20 2020 2020  kePrice'),.     
-00053a90: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
-00053aa0: 7027 3a20 7469 6d65 7374 616d 702c 0a20  p': timestamp,. 
-00053ab0: 2020 2020 2020 2020 2020 2027 6461 7465             'date
-00053ac0: 7469 6d65 273a 2073 656c 662e 6973 6f38  time': self.iso8
-00053ad0: 3630 3128 7469 6d65 7374 616d 7029 2c0a  601(timestamp),.
-00053ae0: 2020 2020 2020 2020 7d0a 0a20 2020 2064          }..    d
-00053af0: 6566 2070 6172 7365 5f73 6574 746c 656d  ef parse_settlem
-00053b00: 656e 7473 2873 656c 662c 2073 6574 746c  ents(self, settl
-00053b10: 656d 656e 7473 2c20 6d61 726b 6574 293a  ements, market):
-00053b20: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00053b30: 2020 2023 2020 2020 205b 0a20 2020 2020     #     [.     
-00053b40: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
-00053b50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00053b60: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-00053b70: 4554 482d 3233 3032 3233 2d31 3930 302d  ETH-230223-1900-
-00053b80: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
-00053b90: 2020 2020 2020 2020 2020 2273 7472 696b            "strik
-00053ba0: 6550 7269 6365 223a 2022 3139 3030 222c  ePrice": "1900",
-00053bb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053bc0: 2020 2020 2020 2022 7265 616c 5374 7269         "realStri
-00053bd0: 6b65 5072 6963 6522 3a20 2231 3636 352e  kePrice": "1665.
-00053be0: 3538 3937 3333 3422 2c0a 2020 2020 2020  5897334",.      
-00053bf0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00053c00: 2265 7870 6972 7944 6174 6522 3a20 3136  "expiryDate": 16
-00053c10: 3737 3133 3932 3030 3030 302c 0a20 2020  77139200000,.   
-00053c20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00053c30: 2020 2022 7374 7269 6b65 5265 7375 6c74     "strikeResult
-00053c40: 223a 2022 4558 5452 494e 5349 435f 5641  ": "EXTRINSIC_VA
-00053c50: 4c55 455f 4558 5049 5245 4422 0a20 2020  LUE_EXPIRED".   
-00053c60: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-00053c70: 0a20 2020 2020 2020 2023 2020 2020 205d  .        #     ]
-00053c80: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00053c90: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
-00053ca0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00053cb0: 7261 6e67 6528 302c 206c 656e 2873 6574  range(0, len(set
-00053cc0: 746c 656d 656e 7473 2929 3a0a 2020 2020  tlements)):.    
-00053cd0: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
-00053ce0: 7070 656e 6428 7365 6c66 2e70 6172 7365  ppend(self.parse
-00053cf0: 5f73 6574 746c 656d 656e 7428 7365 7474  _settlement(sett
-00053d00: 6c65 6d65 6e74 735b 695d 2c20 6d61 726b  lements[i], mark
-00053d10: 6574 2929 0a20 2020 2020 2020 2072 6574  et)).        ret
-00053d20: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
-00053d30: 6465 6620 6665 7463 685f 6c65 6467 6572  def fetch_ledger
-00053d40: 2873 656c 662c 2063 6f64 653a 204f 7074  (self, code: Opt
-00053d50: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00053d60: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
-00053d70: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-00053d80: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
-00053d90: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
-00053da0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-00053db0: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-00053dc0: 6368 2074 6865 2068 6973 746f 7279 206f  ch the history o
-00053dd0: 6620 6368 616e 6765 732c 2061 6374 696f  f changes, actio
-00053de0: 6e73 2064 6f6e 6520 6279 2074 6865 2075  ns done by the u
-00053df0: 7365 7220 6f72 206f 7065 7261 7469 6f6e  ser or operation
-00053e00: 7320 7468 6174 2061 6c74 6572 6564 2074  s that altered t
-00053e10: 6865 2062 616c 616e 6365 206f 6620 7468  he balance of th
-00053e20: 6520 7573 6572 0a20 2020 2020 2020 2073  e user.        s
-00053e30: 6565 2068 7474 7073 3a2f 2f62 696e 616e  ee https://binan
-00053e40: 6365 2d64 6f63 732e 6769 7468 7562 2e69  ce-docs.github.i
-00053e50: 6f2f 6170 6964 6f63 732f 766f 7074 696f  o/apidocs/voptio
-00053e60: 6e73 2f65 6e2f 2361 6363 6f75 6e74 2d66  ns/en/#account-f
-00053e70: 756e 6469 6e67 2d66 6c6f 772d 7573 6572  unding-flow-user
-00053e80: 5f64 6174 610a 2020 2020 2020 2020 7365  _data.        se
-00053e90: 6520 6874 7470 733a 2f2f 6269 6e61 6e63  e https://binanc
-00053ea0: 652d 646f 6373 2e67 6974 6875 622e 696f  e-docs.github.io
-00053eb0: 2f61 7069 646f 6373 2f66 7574 7572 6573  /apidocs/futures
-00053ec0: 2f65 6e2f 2367 6574 2d69 6e63 6f6d 652d  /en/#get-income-
-00053ed0: 6869 7374 6f72 792d 7573 6572 5f64 6174  history-user_dat
-00053ee0: 610a 2020 2020 2020 2020 7365 6520 6874  a.        see ht
-00053ef0: 7470 733a 2f2f 6269 6e61 6e63 652d 646f  tps://binance-do
-00053f00: 6373 2e67 6974 6875 622e 696f 2f61 7069  cs.github.io/api
-00053f10: 646f 6373 2f64 656c 6976 6572 792f 656e  docs/delivery/en
-00053f20: 2f23 6765 742d 696e 636f 6d65 2d68 6973  /#get-income-his
-00053f30: 746f 7279 2d75 7365 725f 6461 7461 0a20  tory-user_data. 
-00053f40: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00053f50: 727c 4e6f 6e65 2063 6f64 653a 2075 6e69  r|None code: uni
-00053f60: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
-00053f70: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
-00053f80: 6d20 696e 747c 4e6f 6e65 2073 696e 6365  m int|None since
-00053f90: 3a20 7469 6d65 7374 616d 7020 696e 206d  : timestamp in m
-00053fa0: 7320 6f66 2074 6865 2065 6172 6c69 6573  s of the earlies
-00053fb0: 7420 6c65 6467 6572 2065 6e74 7279 0a20  t ledger entry. 
-00053fc0: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00053fd0: 747c 4e6f 6e65 206c 696d 6974 3a20 6d61  t|None limit: ma
-00053fe0: 7820 6e75 6d62 6572 206f 6620 6c65 6467  x number of ledg
-00053ff0: 6572 2065 6e74 7279 7320 746f 2072 6574  er entrys to ret
-00054000: 7572 6e0a 2020 2020 2020 2020 3a70 6172  urn.        :par
-00054010: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-00054020: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-00054030: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-00054040: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
-00054050: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-00054060: 6574 7572 6e73 2064 6963 743a 2061 2060  eturns dict: a `
-00054070: 6c65 6467 6572 2073 7472 7563 7475 7265  ledger structure
-00054080: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00054090: 6378 742e 636f 6d2f 232f 3f69 643d 6c65  cxt.com/#/?id=le
-000540a0: 6467 6572 2d73 7472 7563 7475 7265 3e60  dger-structure>`
-000540b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000540c0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-000540d0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-000540e0: 2074 7970 6520 3d20 4e6f 6e65 0a20 2020   type = None.   
-000540f0: 2020 2020 2073 7562 5479 7065 203d 204e       subType = N
-00054100: 6f6e 650a 2020 2020 2020 2020 6375 7272  one.        curr
-00054110: 656e 6379 203d 204e 6f6e 650a 2020 2020  ency = None.    
-00054120: 2020 2020 6d65 7468 6f64 203d 204e 6f6e      method = Non
-00054130: 650a 2020 2020 2020 2020 7265 7175 6573  e.        reques
-00054140: 7420 3d20 7b7d 0a20 2020 2020 2020 2074  t = {}.        t
-00054150: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
-00054160: 6c66 2e68 616e 646c 655f 6d61 726b 6574  lf.handle_market
-00054170: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-00054180: 2827 6665 7463 684c 6564 6765 7227 2c20  ('fetchLedger', 
-00054190: 4e6f 6e65 2c20 7061 7261 6d73 290a 2020  None, params).  
-000541a0: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
-000541b0: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-000541c0: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-000541d0: 5f70 6172 616d 7328 2766 6574 6368 4c65  _params('fetchLe
-000541e0: 6467 6572 272c 204e 6f6e 652c 2070 6172  dger', None, par
-000541f0: 616d 7329 0a20 2020 2020 2020 2069 6620  ams).        if 
-00054200: 7479 7065 203d 3d20 276f 7074 696f 6e27  type == 'option'
-00054210: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00054220: 6c66 2e63 6865 636b 5f72 6571 7569 7265  lf.check_require
-00054230: 645f 6172 6775 6d65 6e74 2827 6665 7463  d_argument('fetc
-00054240: 684c 6564 6765 7227 2c20 636f 6465 2c20  hLedger', code, 
-00054250: 2763 6f64 6527 290a 2020 2020 2020 2020  'code').        
-00054260: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
-00054270: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
-00054280: 6529 0a20 2020 2020 2020 2020 2020 2072  e).            r
-00054290: 6571 7565 7374 5b27 6375 7272 656e 6379  equest['currency
-000542a0: 275d 203d 2063 7572 7265 6e63 795b 2769  '] = currency['i
-000542b0: 6427 5d0a 2020 2020 2020 2020 2020 2020  d'].            
-000542c0: 6d65 7468 6f64 203d 2027 6561 7069 5072  method = 'eapiPr
-000542d0: 6976 6174 6547 6574 4269 6c6c 270a 2020  ivateGetBill'.  
-000542e0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-000542f0: 6973 5f6c 696e 6561 7228 7479 7065 2c20  is_linear(type, 
-00054300: 7375 6254 7970 6529 3a0a 2020 2020 2020  subType):.      
-00054310: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-00054320: 6661 7069 5072 6976 6174 6547 6574 496e  fapiPrivateGetIn
-00054330: 636f 6d65 270a 2020 2020 2020 2020 656c  come'.        el
-00054340: 6966 2073 656c 662e 6973 5f69 6e76 6572  if self.is_inver
-00054350: 7365 2874 7970 652c 2073 7562 5479 7065  se(type, subType
-00054360: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
-00054370: 6574 686f 6420 3d20 2764 6170 6950 7269  ethod = 'dapiPri
-00054380: 7661 7465 4765 7449 6e63 6f6d 6527 0a20  vateGetIncome'. 
-00054390: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000543a0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
-000543b0: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
-000543c0: 2e69 6420 2b20 2720 6665 7463 684c 6564  .id + ' fetchLed
-000543d0: 6765 7228 2920 7375 7070 6f72 7473 2063  ger() supports c
-000543e0: 6f6e 7472 6163 7420 7761 6c6c 6574 7320  ontract wallets 
-000543f0: 6f6e 6c79 2729 0a20 2020 2020 2020 2069  only').        i
-00054400: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
-00054410: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00054420: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
-00054430: 696d 6527 5d20 3d20 7369 6e63 650a 2020  ime'] = since.  
-00054440: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
-00054450: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00054460: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00054470: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
-00054480: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00054490: 6520 3d20 6765 7461 7474 7228 7365 6c66  e = getattr(self
-000544a0: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
-000544b0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-000544c0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-000544d0: 230a 2020 2020 2020 2020 2320 6f70 7469  #.        # opti
-000544e0: 6f6e 7328 6561 7069 290a 2020 2020 2020  ons(eapi).      
-000544f0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00054500: 2020 5b0a 2020 2020 2020 2020 2320 2020    [.        #   
-00054510: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00054520: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
-00054530: 6422 3a20 2231 3132 3538 3939 3930 3638  d": "11258999068
-00054540: 3435 3730 3138 3730 222c 0a20 2020 2020  45701870",.     
-00054550: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00054560: 2022 6173 7365 7422 3a20 2255 5344 5422   "asset": "USDT"
-00054570: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00054580: 2020 2020 2020 2020 2261 6d6f 756e 7422          "amount"
-00054590: 3a20 222d 302e 3136 3531 3832 3033 222c  : "-0.16518203",
-000545a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000545b0: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
-000545c0: 4645 4522 2c0a 2020 2020 2020 2020 2320  FEE",.        # 
-000545d0: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
-000545e0: 6174 6544 6174 6522 3a20 3136 3736 3632  ateDate": 167662
-000545f0: 3130 3432 3438 390a 2020 2020 2020 2020  1042489.        
-00054600: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
-00054610: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
-00054620: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00054630: 6675 7475 7265 7328 6661 7069 2c20 6461  futures(fapi, da
-00054640: 7069 290a 2020 2020 2020 2020 230a 2020  pi).        #.  
-00054650: 2020 2020 2020 2320 2020 2020 5b0a 2020        #     [.  
-00054660: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00054670: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00054680: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-00054690: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-000546a0: 2020 2020 2020 2020 2020 2020 2269 6e63              "inc
-000546b0: 6f6d 6554 7970 6522 3a20 2254 5241 4e53  omeType": "TRANS
-000546c0: 4645 5222 2c0a 2020 2020 2020 2020 2320  FER",.        # 
-000546d0: 2020 2020 2020 2020 2020 2020 2269 6e63              "inc
-000546e0: 6f6d 6522 3a20 2231 302e 3030 3030 3030  ome": "10.000000
-000546f0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-00054700: 2020 2020 2020 2020 2020 2022 6173 7365             "asse
-00054710: 7422 3a20 2255 5344 5422 2c0a 2020 2020  t": "USDT",.    
-00054720: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00054730: 2020 2274 696d 6522 3a20 3136 3737 3634    "time": 167764
-00054740: 3532 3530 3030 302c 0a20 2020 2020 2020  5250000,.       
-00054750: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00054760: 696e 666f 223a 2022 5452 414e 5346 4552  info": "TRANSFER
-00054770: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00054780: 2020 2020 2020 2020 2022 7472 616e 4964           "tranId
-00054790: 223a 2031 3331 3030 3135 3733 3038 322c  ": 131001573082,
-000547a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000547b0: 2020 2020 2020 2022 7472 6164 6549 6422         "tradeId"
-000547c0: 3a20 2222 0a20 2020 2020 2020 2023 2020  : "".        #  
-000547d0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-000547e0: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
-000547f0: 2023 0a20 2020 2020 2020 2072 6574 7572   #.        retur
-00054800: 6e20 7365 6c66 2e70 6172 7365 5f6c 6564  n self.parse_led
-00054810: 6765 7228 7265 7370 6f6e 7365 2c20 6375  ger(response, cu
-00054820: 7272 656e 6379 2c20 7369 6e63 652c 206c  rrency, since, l
-00054830: 696d 6974 290a 0a20 2020 2064 6566 2070  imit)..    def p
-00054840: 6172 7365 5f6c 6564 6765 725f 656e 7472  arse_ledger_entr
-00054850: 7928 7365 6c66 2c20 6974 656d 2c20 6375  y(self, item, cu
-00054860: 7272 656e 6379 3d4e 6f6e 6529 3a0a 2020  rrency=None):.  
-00054870: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00054880: 2320 6f70 7469 6f6e 7328 6561 7069 290a  # options(eapi).
-00054890: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000548a0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-000548b0: 2020 2320 2020 2020 2020 2020 2269 6422    #         "id"
-000548c0: 3a20 2231 3132 3538 3939 3930 3638 3435  : "1125899906845
-000548d0: 3730 3138 3730 222c 0a20 2020 2020 2020  701870",.       
-000548e0: 2023 2020 2020 2020 2020 2022 6173 7365   #         "asse
-000548f0: 7422 3a20 2255 5344 5422 2c0a 2020 2020  t": "USDT",.    
-00054900: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
-00054910: 6d6f 756e 7422 3a20 222d 302e 3136 3531  mount": "-0.1651
-00054920: 3832 3033 222c 0a20 2020 2020 2020 2023  8203",.        #
-00054930: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-00054940: 2022 4645 4522 2c0a 2020 2020 2020 2020   "FEE",.        
-00054950: 2320 2020 2020 2020 2020 2263 7265 6174  #         "creat
-00054960: 6544 6174 6522 3a20 3136 3736 3632 3130  eDate": 16766210
-00054970: 3432 3438 390a 2020 2020 2020 2020 2320  42489.        # 
-00054980: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-00054990: 2020 2020 2020 2020 2320 6675 7475 7265          # future
-000549a0: 7328 6661 7069 2c20 6461 7069 290a 2020  s(fapi, dapi).  
-000549b0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000549c0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-000549d0: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
-000549e0: 6c22 3a20 2222 2c0a 2020 2020 2020 2020  l": "",.        
-000549f0: 2320 2020 2020 2020 2020 2269 6e63 6f6d  #         "incom
-00054a00: 6554 7970 6522 3a20 2254 5241 4e53 4645  eType": "TRANSFE
-00054a10: 5222 2c0a 2020 2020 2020 2020 2320 2020  R",.        #   
-00054a20: 2020 2020 2020 2269 6e63 6f6d 6522 3a20        "income": 
-00054a30: 2231 302e 3030 3030 3030 3030 222c 0a20  "10.00000000",. 
-00054a40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054a50: 2022 6173 7365 7422 3a20 2255 5344 5422   "asset": "USDT"
-00054a60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00054a70: 2020 2020 2274 696d 6522 3a20 3136 3737      "time": 1677
-00054a80: 3634 3532 3530 3030 302c 0a20 2020 2020  645250000,.     
-00054a90: 2020 2023 2020 2020 2020 2020 2022 696e     #         "in
-00054aa0: 666f 223a 2022 5452 414e 5346 4552 222c  fo": "TRANSFER",
-00054ab0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00054ac0: 2020 2022 7472 616e 4964 223a 2031 3331     "tranId": 131
-00054ad0: 3030 3135 3733 3038 322c 0a20 2020 2020  001573082,.     
-00054ae0: 2020 2023 2020 2020 2020 2020 2022 7472     #         "tr
-00054af0: 6164 6549 6422 3a20 2222 0a20 2020 2020  adeId": "".     
-00054b00: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00054b10: 2020 2023 0a20 2020 2020 2020 2061 6d6f     #.        amo
-00054b20: 756e 7420 3d20 7365 6c66 2e73 6166 655f  unt = self.safe_
-00054b30: 7374 7269 6e67 5f32 2869 7465 6d2c 2027  string_2(item, '
-00054b40: 616d 6f75 6e74 272c 2027 696e 636f 6d65  amount', 'income
-00054b50: 2729 0a20 2020 2020 2020 2064 6972 6563  ').        direc
-00054b60: 7469 6f6e 203d 204e 6f6e 650a 2020 2020  tion = None.    
-00054b70: 2020 2020 6966 2050 7265 6369 7365 2e73      if Precise.s
-00054b80: 7472 696e 675f 6c65 2861 6d6f 756e 742c  tring_le(amount,
-00054b90: 2027 3027 293a 0a20 2020 2020 2020 2020   '0'):.         
-00054ba0: 2020 2064 6972 6563 7469 6f6e 203d 2027     direction = '
-00054bb0: 6f75 7427 0a20 2020 2020 2020 2020 2020  out'.           
-00054bc0: 2061 6d6f 756e 7420 3d20 5072 6563 6973   amount = Precis
-00054bd0: 652e 7374 7269 6e67 5f6d 756c 2827 2d31  e.string_mul('-1
-00054be0: 272c 2061 6d6f 756e 7429 0a20 2020 2020  ', amount).     
-00054bf0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00054c00: 2020 2020 2064 6972 6563 7469 6f6e 203d       direction =
-00054c10: 2027 696e 270a 2020 2020 2020 2020 6375   'in'.        cu
-00054c20: 7272 656e 6379 4964 203d 2073 656c 662e  rrencyId = self.
-00054c30: 7361 6665 5f73 7472 696e 6728 6974 656d  safe_string(item
-00054c40: 2c20 2761 7373 6574 2729 0a20 2020 2020  , 'asset').     
-00054c50: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
-00054c60: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
-00054c70: 5f32 2869 7465 6d2c 2027 6372 6561 7465  _2(item, 'create
-00054c80: 4461 7465 272c 2027 7469 6d65 2729 0a20  Date', 'time'). 
-00054c90: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
-00054ca0: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
-00054cb0: 2869 7465 6d2c 2027 7479 7065 272c 2027  (item, 'type', '
-00054cc0: 696e 636f 6d65 5479 7065 2729 0a20 2020  incomeType').   
-00054cd0: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
-00054ce0: 2020 2020 2020 2020 2020 2769 6427 3a20            'id': 
-00054cf0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00054d00: 5f32 2869 7465 6d2c 2027 6964 272c 2027  _2(item, 'id', '
-00054d10: 7472 616e 4964 2729 2c0a 2020 2020 2020  tranId'),.      
-00054d20: 2020 2020 2020 2764 6972 6563 7469 6f6e        'direction
-00054d30: 273a 2064 6972 6563 7469 6f6e 2c0a 2020  ': direction,.  
-00054d40: 2020 2020 2020 2020 2020 2761 6363 6f75            'accou
-00054d50: 6e74 273a 204e 6f6e 652c 0a20 2020 2020  nt': None,.     
-00054d60: 2020 2020 2020 2027 7265 6665 7265 6e63         'referenc
-00054d70: 6541 6363 6f75 6e74 273a 204e 6f6e 652c  eAccount': None,
-00054d80: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
-00054d90: 6665 7265 6e63 6549 6427 3a20 7365 6c66  ferenceId': self
-00054da0: 2e73 6166 655f 7374 7269 6e67 2869 7465  .safe_string(ite
-00054db0: 6d2c 2027 7472 6164 6549 6427 292c 0a20  m, 'tradeId'),. 
-00054dc0: 2020 2020 2020 2020 2020 2027 7479 7065             'type
-00054dd0: 273a 2073 656c 662e 7061 7273 655f 6c65  ': self.parse_le
-00054de0: 6467 6572 5f65 6e74 7279 5f74 7970 6528  dger_entry_type(
-00054df0: 7479 7065 292c 0a20 2020 2020 2020 2020  type),.         
-00054e00: 2020 2027 6375 7272 656e 6379 273a 2073     'currency': s
-00054e10: 656c 662e 7361 6665 5f63 7572 7265 6e63  elf.safe_currenc
-00054e20: 795f 636f 6465 2863 7572 7265 6e63 7949  y_code(currencyI
-00054e30: 642c 2063 7572 7265 6e63 7929 2c0a 2020  d, currency),.  
-00054e40: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
-00054e50: 7427 3a20 7365 6c66 2e70 6172 7365 5f6e  t': self.parse_n
-00054e60: 756d 6265 7228 616d 6f75 6e74 292c 0a20  umber(amount),. 
-00054e70: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-00054e80: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
-00054e90: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
-00054ea0: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
-00054eb0: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
-00054ec0: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
-00054ed0: 2762 6566 6f72 6527 3a20 4e6f 6e65 2c0a  'before': None,.
-00054ee0: 2020 2020 2020 2020 2020 2020 2761 6674              'aft
-00054ef0: 6572 273a 204e 6f6e 652c 0a20 2020 2020  er': None,.     
-00054f00: 2020 2020 2020 2027 7374 6174 7573 273a         'status':
-00054f10: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-00054f20: 2020 2027 6665 6527 3a20 4e6f 6e65 2c0a     'fee': None,.
-00054f30: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
-00054f40: 6f27 3a20 6974 656d 2c0a 2020 2020 2020  o': item,.      
-00054f50: 2020 7d0a 0a20 2020 2064 6566 2070 6172    }..    def par
-00054f60: 7365 5f6c 6564 6765 725f 656e 7472 795f  se_ledger_entry_
-00054f70: 7479 7065 2873 656c 662c 2074 7970 6529  type(self, type)
-00054f80: 3a0a 2020 2020 2020 2020 6c65 6467 6572  :.        ledger
-00054f90: 5479 7065 203d 207b 0a20 2020 2020 2020  Type = {.       
-00054fa0: 2020 2020 2027 4645 4527 3a20 2766 6565       'FEE': 'fee
-00054fb0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-00054fc0: 4655 4e44 494e 475f 4645 4527 3a20 2766  FUNDING_FEE': 'f
-00054fd0: 6565 272c 0a20 2020 2020 2020 2020 2020  ee',.           
-00054fe0: 2027 4f50 5449 4f4e 535f 5052 454d 4955   'OPTIONS_PREMIU
-00054ff0: 4d5f 4645 4527 3a20 2766 6565 272c 0a20  M_FEE': 'fee',. 
-00055000: 2020 2020 2020 2020 2020 2027 504f 5349             'POSI
-00055010: 5449 4f4e 5f4c 494d 4954 5f49 4e43 5245  TION_LIMIT_INCRE
-00055020: 4153 455f 4645 4527 3a20 2766 6565 272c  ASE_FEE': 'fee',
-00055030: 0a20 2020 2020 2020 2020 2020 2027 434f  .            'CO
-00055040: 4e54 5241 4354 273a 2027 7472 6164 6527  NTRACT': 'trade'
-00055050: 2c0a 2020 2020 2020 2020 2020 2020 2752  ,.            'R
-00055060: 4541 4c49 5a45 445f 504e 4c27 3a20 2774  EALIZED_PNL': 't
-00055070: 7261 6465 272c 0a20 2020 2020 2020 2020  rade',.         
-00055080: 2020 2027 5452 414e 5346 4552 273a 2027     'TRANSFER': '
-00055090: 7472 616e 7366 6572 272c 0a20 2020 2020  transfer',.     
-000550a0: 2020 2020 2020 2027 4352 4f53 535f 434f         'CROSS_CO
-000550b0: 4c4c 4154 4552 414c 5f54 5241 4e53 4645  LLATERAL_TRANSFE
-000550c0: 5227 3a20 2774 7261 6e73 6665 7227 2c0a  R': 'transfer',.
-000550d0: 2020 2020 2020 2020 2020 2020 2749 4e54              'INT
-000550e0: 4552 4e41 4c5f 5452 414e 5346 4552 273a  ERNAL_TRANSFER':
-000550f0: 2027 7472 616e 7366 6572 272c 0a20 2020   'transfer',.   
-00055100: 2020 2020 2020 2020 2027 434f 494e 5f53           'COIN_S
-00055110: 5741 505f 4445 504f 5349 5427 3a20 2764  WAP_DEPOSIT': 'd
-00055120: 6570 6f73 6974 272c 0a20 2020 2020 2020  eposit',.       
-00055130: 2020 2020 2027 434f 494e 5f53 5741 505f       'COIN_SWAP_
-00055140: 5749 5448 4452 4157 273a 2027 7769 7468  WITHDRAW': 'with
-00055150: 6472 6177 616c 272c 0a20 2020 2020 2020  drawal',.       
-00055160: 2020 2020 2027 4f50 5449 4f4e 535f 5345       'OPTIONS_SE
-00055170: 5454 4c45 5f50 524f 4649 5427 3a20 2773  TTLE_PROFIT': 's
-00055180: 6574 746c 656d 656e 7427 2c0a 2020 2020  ettlement',.    
-00055190: 2020 2020 2020 2020 2744 454c 4956 4552          'DELIVER
-000551a0: 4544 5f53 4554 5445 4c4d 454e 5427 3a20  ED_SETTELMENT': 
-000551b0: 2773 6574 746c 656d 656e 7427 2c0a 2020  'settlement',.  
-000551c0: 2020 2020 2020 2020 2020 2757 454c 434f            'WELCO
-000551d0: 4d45 5f42 4f4e 5553 273a 2027 6361 7368  ME_BONUS': 'cash
-000551e0: 6261 636b 272c 0a20 2020 2020 2020 2020  back',.         
-000551f0: 2020 2027 434f 4e54 4553 545f 5245 5741     'CONTEST_REWA
-00055200: 5244 273a 2027 6361 7368 6261 636b 272c  RD': 'cashback',
-00055210: 0a20 2020 2020 2020 2020 2020 2027 434f  .            'CO
-00055220: 4d4d 4953 5349 4f4e 5f52 4542 4154 4527  MMISSION_REBATE'
-00055230: 3a20 2772 6562 6174 6527 2c0a 2020 2020  : 'rebate',.    
-00055240: 2020 2020 2020 2020 2741 5049 5f52 4542          'API_REB
-00055250: 4154 4527 3a20 2772 6562 6174 6527 2c0a  ATE': 'rebate',.
-00055260: 2020 2020 2020 2020 2020 2020 2752 4546              'REF
-00055270: 4552 5241 4c5f 4b49 434b 4241 434b 273a  ERRAL_KICKBACK':
-00055280: 2027 7265 6665 7272 616c 272c 0a20 2020   'referral',.   
-00055290: 2020 2020 2020 2020 2027 434f 4d4d 4953           'COMMIS
-000552a0: 5349 4f4e 273a 2027 636f 6d6d 6973 7369  SION': 'commissi
-000552b0: 6f6e 272c 0a20 2020 2020 2020 207d 0a20  on',.        }. 
-000552c0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000552d0: 6c66 2e73 6166 655f 7374 7269 6e67 286c  lf.safe_string(l
-000552e0: 6564 6765 7254 7970 652c 2074 7970 652c  edgerType, type,
-000552f0: 2074 7970 6529 0a0a 2020 2020 6465 6620   type)..    def 
-00055300: 7369 676e 2873 656c 662c 2070 6174 682c  sign(self, path,
-00055310: 2061 7069 3d27 7075 626c 6963 272c 206d   api='public', m
-00055320: 6574 686f 643d 2747 4554 272c 2070 6172  ethod='GET', par
-00055330: 616d 733d 7b7d 2c20 6865 6164 6572 733d  ams={}, headers=
-00055340: 4e6f 6e65 2c20 626f 6479 3d4e 6f6e 6529  None, body=None)
-00055350: 3a0a 2020 2020 2020 2020 7572 6c73 203d  :.        urls =
-00055360: 2073 656c 662e 7572 6c73 0a20 2020 2020   self.urls.     
-00055370: 2020 2069 6620 6e6f 7420 2861 7069 2069     if not (api i
-00055380: 6e20 7572 6c73 5b27 6170 6927 5d29 3a0a  n urls['api']):.
-00055390: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000553a0: 6520 4e6f 7453 7570 706f 7274 6564 2873  e NotSupported(s
-000553b0: 656c 662e 6964 202b 2027 2064 6f65 7320  elf.id + ' does 
-000553c0: 6e6f 7420 6861 7665 2061 2074 6573 746e  not have a testn
-000553d0: 6574 2f73 616e 6462 6f78 2055 524c 2066  et/sandbox URL f
-000553e0: 6f72 2027 202b 2061 7069 202b 2027 2065  or ' + api + ' e
-000553f0: 6e64 706f 696e 7473 2729 0a20 2020 2020  ndpoints').     
-00055400: 2020 2075 726c 203d 2073 656c 662e 7572     url = self.ur
-00055410: 6c73 5b27 6170 6927 5d5b 6170 695d 0a20  ls['api'][api]. 
-00055420: 2020 2020 2020 2075 726c 202b 3d20 272f         url += '/
-00055430: 2720 2b20 7061 7468 0a20 2020 2020 2020  ' + path.       
-00055440: 2069 6620 6170 6920 3d3d 2027 7761 7069   if api == 'wapi
-00055450: 273a 0a20 2020 2020 2020 2020 2020 2075  ':.            u
-00055460: 726c 202b 3d20 272e 6874 6d6c 270a 2020  rl += '.html'.  
-00055470: 2020 2020 2020 6966 2070 6174 6820 3d3d        if path ==
-00055480: 2027 6869 7374 6f72 6963 616c 5472 6164   'historicalTrad
-00055490: 6573 273a 0a20 2020 2020 2020 2020 2020  es':.           
-000554a0: 2069 6620 7365 6c66 2e61 7069 4b65 793a   if self.apiKey:
-000554b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000554c0: 2068 6561 6465 7273 203d 207b 0a20 2020   headers = {.   
-000554d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000554e0: 2027 582d 4d42 582d 4150 494b 4559 273a   'X-MBX-APIKEY':
-000554f0: 2073 656c 662e 6170 694b 6579 2c0a 2020   self.apiKey,.  
-00055500: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-00055510: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00055520: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00055530: 2020 7261 6973 6520 4175 7468 656e 7469    raise Authenti
-00055540: 6361 7469 6f6e 4572 726f 7228 7365 6c66  cationError(self
-00055550: 2e69 6420 2b20 2720 6869 7374 6f72 6963  .id + ' historic
-00055560: 616c 5472 6164 6573 2065 6e64 706f 696e  alTrades endpoin
-00055570: 7420 7265 7175 6972 6573 2060 6170 694b  t requires `apiK
-00055580: 6579 6020 6372 6564 656e 7469 616c 2729  ey` credential')
-00055590: 0a20 2020 2020 2020 2075 7365 7244 6174  .        userDat
-000555a0: 6153 7472 6561 6d20 3d20 2870 6174 6820  aStream = (path 
-000555b0: 3d3d 2027 7573 6572 4461 7461 5374 7265  == 'userDataStre
-000555c0: 616d 2729 206f 7220 2870 6174 6820 3d3d  am') or (path ==
-000555d0: 2027 6c69 7374 656e 4b65 7927 290a 2020   'listenKey').  
-000555e0: 2020 2020 2020 6966 2075 7365 7244 6174        if userDat
-000555f0: 6153 7472 6561 6d3a 0a20 2020 2020 2020  aStream:.       
-00055600: 2020 2020 2069 6620 7365 6c66 2e61 7069       if self.api
-00055610: 4b65 793a 0a20 2020 2020 2020 2020 2020  Key:.           
-00055620: 2020 2020 2023 2076 3120 7370 6563 6961       # v1 specia
-00055630: 6c20 6361 7365 2066 6f72 2075 7365 7244  l case for userD
-00055640: 6174 6153 7472 6561 6d0a 2020 2020 2020  ataStream.      
-00055650: 2020 2020 2020 2020 2020 6865 6164 6572            header
-00055660: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
-00055670: 2020 2020 2020 2020 2020 2758 2d4d 4258            'X-MBX
-00055680: 2d41 5049 4b45 5927 3a20 7365 6c66 2e61  -APIKEY': self.a
-00055690: 7069 4b65 792c 0a20 2020 2020 2020 2020  piKey,.         
-000556a0: 2020 2020 2020 2020 2020 2027 436f 6e74             'Cont
-000556b0: 656e 742d 5479 7065 273a 2027 6170 706c  ent-Type': 'appl
-000556c0: 6963 6174 696f 6e2f 782d 7777 772d 666f  ication/x-www-fo
-000556d0: 726d 2d75 726c 656e 636f 6465 6427 2c0a  rm-urlencoded',.
-000556e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000556f0: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-00055700: 2020 6966 206d 6574 686f 6420 213d 2027    if method != '
-00055710: 4745 5427 3a0a 2020 2020 2020 2020 2020  GET':.          
-00055720: 2020 2020 2020 2020 2020 626f 6479 203d            body =
-00055730: 2073 656c 662e 7572 6c65 6e63 6f64 6528   self.urlencode(
-00055740: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-00055750: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00055760: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00055770: 4175 7468 656e 7469 6361 7469 6f6e 4572  AuthenticationEr
-00055780: 726f 7228 7365 6c66 2e69 6420 2b20 2720  ror(self.id + ' 
-00055790: 7573 6572 4461 7461 5374 7265 616d 2065  userDataStream e
-000557a0: 6e64 706f 696e 7420 7265 7175 6972 6573  ndpoint requires
-000557b0: 2060 6170 694b 6579 6020 6372 6564 656e   `apiKey` creden
-000557c0: 7469 616c 2729 0a20 2020 2020 2020 2065  tial').        e
-000557d0: 6c69 6620 2861 7069 203d 3d20 2770 7269  lif (api == 'pri
-000557e0: 7661 7465 2729 206f 7220 2861 7069 203d  vate') or (api =
-000557f0: 3d20 2765 6170 6950 7269 7661 7465 2729  = 'eapiPrivate')
-00055800: 206f 7220 2861 7069 203d 3d20 2773 6170   or (api == 'sap
-00055810: 6927 2061 6e64 2070 6174 6820 213d 2027  i' and path != '
-00055820: 7379 7374 656d 2f73 7461 7475 7327 2920  system/status') 
-00055830: 6f72 2028 6170 6920 3d3d 2027 7361 7069  or (api == 'sapi
-00055840: 5632 2729 206f 7220 2861 7069 203d 3d20  V2') or (api == 
-00055850: 2773 6170 6956 3327 2920 6f72 2028 6170  'sapiV3') or (ap
-00055860: 6920 3d3d 2027 7361 7069 5634 2729 206f  i == 'sapiV4') o
-00055870: 7220 2861 7069 203d 3d20 2777 6170 6927  r (api == 'wapi'
-00055880: 2061 6e64 2070 6174 6820 213d 2027 7379   and path != 'sy
-00055890: 7374 656d 5374 6174 7573 2729 206f 7220  stemStatus') or 
-000558a0: 2861 7069 203d 3d20 2764 6170 6950 7269  (api == 'dapiPri
-000558b0: 7661 7465 2729 206f 7220 2861 7069 203d  vate') or (api =
-000558c0: 3d20 2764 6170 6950 7269 7661 7465 5632  = 'dapiPrivateV2
-000558d0: 2729 206f 7220 2861 7069 203d 3d20 2766  ') or (api == 'f
-000558e0: 6170 6950 7269 7661 7465 2729 206f 7220  apiPrivate') or 
-000558f0: 2861 7069 203d 3d20 2766 6170 6950 7269  (api == 'fapiPri
-00055900: 7661 7465 5632 2729 3a0a 2020 2020 2020  vateV2'):.      
-00055910: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
-00055920: 5f72 6571 7569 7265 645f 6372 6564 656e  _required_creden
-00055930: 7469 616c 7328 290a 2020 2020 2020 2020  tials().        
-00055940: 2020 2020 7175 6572 7920 3d20 4e6f 6e65      query = None
-00055950: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-00055960: 6175 6c74 5265 6376 5769 6e64 6f77 203d  aultRecvWindow =
-00055970: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-00055980: 6572 2873 656c 662e 6f70 7469 6f6e 732c  er(self.options,
-00055990: 2027 7265 6376 5769 6e64 6f77 2729 0a20   'recvWindow'). 
-000559a0: 2020 2020 2020 2020 2020 2065 7874 656e             exten
-000559b0: 6465 6450 6172 616d 7320 3d20 7365 6c66  dedParams = self
-000559c0: 2e65 7874 656e 6428 7b0a 2020 2020 2020  .extend({.      
-000559d0: 2020 2020 2020 2020 2020 2774 696d 6573            'times
-000559e0: 7461 6d70 273a 2073 656c 662e 6e6f 6e63  tamp': self.nonc
-000559f0: 6528 292c 0a20 2020 2020 2020 2020 2020  e(),.           
-00055a00: 207d 2c20 7061 7261 6d73 290a 2020 2020   }, params).    
-00055a10: 2020 2020 2020 2020 6966 2064 6566 6175          if defau
-00055a20: 6c74 5265 6376 5769 6e64 6f77 2069 7320  ltRecvWindow is 
-00055a30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00055a40: 2020 2020 2020 2020 2020 6578 7465 6e64            extend
-00055a50: 6564 5061 7261 6d73 5b27 7265 6376 5769  edParams['recvWi
-00055a60: 6e64 6f77 275d 203d 2064 6566 6175 6c74  ndow'] = default
-00055a70: 5265 6376 5769 6e64 6f77 0a20 2020 2020  RecvWindow.     
-00055a80: 2020 2020 2020 2072 6563 7657 696e 646f         recvWindo
-00055a90: 7720 3d20 7365 6c66 2e73 6166 655f 696e  w = self.safe_in
-00055aa0: 7465 6765 7228 7061 7261 6d73 2c20 2772  teger(params, 'r
-00055ab0: 6563 7657 696e 646f 7727 290a 2020 2020  ecvWindow').    
-00055ac0: 2020 2020 2020 2020 6966 2072 6563 7657          if recvW
-00055ad0: 696e 646f 7720 6973 206e 6f74 204e 6f6e  indow is not Non
-00055ae0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00055af0: 2020 2065 7874 656e 6465 6450 6172 616d     extendedParam
-00055b00: 735b 2772 6563 7657 696e 646f 7727 5d20  s['recvWindow'] 
-00055b10: 3d20 7265 6376 5769 6e64 6f77 0a20 2020  = recvWindow.   
-00055b20: 2020 2020 2020 2020 2069 6620 2861 7069           if (api
-00055b30: 203d 3d20 2773 6170 6927 2920 616e 6420   == 'sapi') and 
-00055b40: 2870 6174 6820 3d3d 2027 6173 7365 742f  (path == 'asset/
-00055b50: 6475 7374 2729 3a0a 2020 2020 2020 2020  dust'):.        
-00055b60: 2020 2020 2020 2020 7175 6572 7920 3d20          query = 
-00055b70: 7365 6c66 2e75 726c 656e 636f 6465 5f77  self.urlencode_w
-00055b80: 6974 685f 6172 7261 795f 7265 7065 6174  ith_array_repeat
-00055b90: 2865 7874 656e 6465 6450 6172 616d 7329  (extendedParams)
-00055ba0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00055bb0: 6620 2870 6174 6820 3d3d 2027 6261 7463  f (path == 'batc
-00055bc0: 684f 7264 6572 7327 2920 6f72 2028 7061  hOrders') or (pa
-00055bd0: 7468 2e66 696e 6428 2773 7562 2d61 6363  th.find('sub-acc
-00055be0: 6f75 6e74 2729 203e 3d20 3029 206f 7220  ount') >= 0) or 
-00055bf0: 2870 6174 6820 3d3d 2027 6361 7069 7461  (path == 'capita
-00055c00: 6c2f 7769 7468 6472 6177 2f61 7070 6c79  l/withdraw/apply
-00055c10: 2729 206f 7220 2870 6174 682e 6669 6e64  ') or (path.find
-00055c20: 2827 7374 616b 696e 6727 2920 3e3d 2030  ('staking') >= 0
-00055c30: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00055c40: 2020 2071 7565 7279 203d 2073 656c 662e     query = self.
-00055c50: 7261 7765 6e63 6f64 6528 6578 7465 6e64  rawencode(extend
-00055c60: 6564 5061 7261 6d73 290a 2020 2020 2020  edParams).      
-00055c70: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00055c80: 2020 2020 2020 2020 2020 2020 7175 6572              quer
-00055c90: 7920 3d20 7365 6c66 2e75 726c 656e 636f  y = self.urlenco
-00055ca0: 6465 2865 7874 656e 6465 6450 6172 616d  de(extendedParam
-00055cb0: 7329 0a20 2020 2020 2020 2020 2020 2073  s).            s
-00055cc0: 6967 6e61 7475 7265 203d 204e 6f6e 650a  ignature = None.
-00055cd0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00055ce0: 656c 662e 7365 6372 6574 2e66 696e 6428  elf.secret.find(
-00055cf0: 2750 5249 5641 5445 204b 4559 2729 203e  'PRIVATE KEY') >
-00055d00: 202d 313a 0a20 2020 2020 2020 2020 2020   -1:.           
-00055d10: 2020 2020 2073 6967 6e61 7475 7265 203d       signature =
-00055d20: 2073 656c 662e 656e 636f 6465 5f75 7269   self.encode_uri
-00055d30: 5f63 6f6d 706f 6e65 6e74 2873 656c 662e  _component(self.
-00055d40: 7273 6128 7175 6572 792c 2073 656c 662e  rsa(query, self.
-00055d50: 7365 6372 6574 2c20 2773 6861 3235 3627  secret, 'sha256'
-00055d60: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-00055d70: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00055d80: 2020 2020 2073 6967 6e61 7475 7265 203d       signature =
-00055d90: 2073 656c 662e 686d 6163 2873 656c 662e   self.hmac(self.
-00055da0: 656e 636f 6465 2871 7565 7279 292c 2073  encode(query), s
-00055db0: 656c 662e 656e 636f 6465 2873 656c 662e  elf.encode(self.
-00055dc0: 7365 6372 6574 292c 2068 6173 686c 6962  secret), hashlib
-00055dd0: 2e73 6861 3235 3629 0a20 2020 2020 2020  .sha256).       
-00055de0: 2020 2020 2071 7565 7279 202b 3d20 2726       query += '&
-00055df0: 2720 2b20 2773 6967 6e61 7475 7265 3d27  ' + 'signature='
-00055e00: 202b 2073 6967 6e61 7475 7265 0a20 2020   + signature.   
-00055e10: 2020 2020 2020 2020 2068 6561 6465 7273           headers
-00055e20: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00055e30: 2020 2020 2027 582d 4d42 582d 4150 494b       'X-MBX-APIK
-00055e40: 4559 273a 2073 656c 662e 6170 694b 6579  EY': self.apiKey
-00055e50: 2c0a 2020 2020 2020 2020 2020 2020 7d0a  ,.            }.
-00055e60: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-00055e70: 6d65 7468 6f64 203d 3d20 2747 4554 2729  method == 'GET')
-00055e80: 206f 7220 286d 6574 686f 6420 3d3d 2027   or (method == '
-00055e90: 4445 4c45 5445 2729 206f 7220 2861 7069  DELETE') or (api
-00055ea0: 203d 3d20 2777 6170 6927 293a 0a20 2020   == 'wapi'):.   
-00055eb0: 2020 2020 2020 2020 2020 2020 2075 726c               url
-00055ec0: 202b 3d20 273f 2720 2b20 7175 6572 790a   += '?' + query.
-00055ed0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00055ee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00055ef0: 2020 626f 6479 203d 2071 7565 7279 0a20    body = query. 
-00055f00: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-00055f10: 6561 6465 7273 5b27 436f 6e74 656e 742d  eaders['Content-
-00055f20: 5479 7065 275d 203d 2027 6170 706c 6963  Type'] = 'applic
-00055f30: 6174 696f 6e2f 782d 7777 772d 666f 726d  ation/x-www-form
-00055f40: 2d75 726c 656e 636f 6465 6427 0a20 2020  -urlencoded'.   
-00055f50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00055f60: 2020 2020 2020 2069 6620 7061 7261 6d73         if params
-00055f70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00055f80: 2020 7572 6c20 2b3d 2027 3f27 202b 2073    url += '?' + s
-00055f90: 656c 662e 7572 6c65 6e63 6f64 6528 7061  elf.urlencode(pa
-00055fa0: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
-00055fb0: 7475 726e 207b 2775 726c 273a 2075 726c  turn {'url': url
-00055fc0: 2c20 276d 6574 686f 6427 3a20 6d65 7468  , 'method': meth
-00055fd0: 6f64 2c20 2762 6f64 7927 3a20 626f 6479  od, 'body': body
-00055fe0: 2c20 2768 6561 6465 7273 273a 2068 6561  , 'headers': hea
-00055ff0: 6465 7273 7d0a 0a20 2020 2064 6566 2068  ders}..    def h
-00056000: 616e 646c 655f 6572 726f 7273 2873 656c  andle_errors(sel
-00056010: 662c 2063 6f64 652c 2072 6561 736f 6e2c  f, code, reason,
-00056020: 2075 726c 2c20 6d65 7468 6f64 2c20 6865   url, method, he
-00056030: 6164 6572 732c 2062 6f64 792c 2072 6573  aders, body, res
-00056040: 706f 6e73 652c 2072 6571 7565 7374 4865  ponse, requestHe
-00056050: 6164 6572 732c 2072 6571 7565 7374 426f  aders, requestBo
-00056060: 6479 293a 0a20 2020 2020 2020 2069 6620  dy):.        if 
-00056070: 2863 6f64 6520 3d3d 2034 3138 2920 6f72  (code == 418) or
-00056080: 2028 636f 6465 203d 3d20 3432 3929 3a0a   (code == 429):.
-00056090: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000560a0: 6520 4444 6f53 5072 6f74 6563 7469 6f6e  e DDoSProtection
-000560b0: 2873 656c 662e 6964 202b 2027 2027 202b  (self.id + ' ' +
-000560c0: 2073 7472 2863 6f64 6529 202b 2027 2027   str(code) + ' '
-000560d0: 202b 2072 6561 736f 6e20 2b20 2720 2720   + reason + ' ' 
-000560e0: 2b20 626f 6479 290a 2020 2020 2020 2020  + body).        
-000560f0: 2320 6572 726f 7220 7265 7370 6f6e 7365  # error response
-00056100: 2069 6e20 6120 666f 726d 3a20 7b22 636f   in a form: {"co
-00056110: 6465 223a 202d 3130 3133 2c20 226d 7367  de": -1013, "msg
-00056120: 223a 2022 496e 7661 6c69 6420 7175 616e  ": "Invalid quan
-00056130: 7469 7479 2e22 7d0a 2020 2020 2020 2020  tity."}.        
-00056140: 2320 666f 6c6c 6f77 696e 6720 626c 6f63  # following bloc
-00056150: 6b20 636f 696e 7461 696e 7320 6c65 6761  k cointains lega
-00056160: 6379 2063 6865 636b 7320 6167 6169 6e73  cy checks agains
-00056170: 7420 6d65 7373 6167 6520 7061 7474 6572  t message patter
-00056180: 6e73 2069 6e20 226d 7367 2220 7072 6f70  ns in "msg" prop
-00056190: 6572 7479 0a20 2020 2020 2020 2023 2077  erty.        # w
-000561a0: 696c 6c20 7377 6974 6368 2022 636f 6465  ill switch "code
-000561b0: 2220 6368 6563 6b73 2065 7665 6e74 7561  " checks eventua
-000561c0: 6c6c 792c 2077 6865 6e20 7765 206b 6e6f  lly, when we kno
-000561d0: 7720 616c 6c20 6f66 2074 6865 6d0a 2020  w all of them.  
-000561e0: 2020 2020 2020 6966 2063 6f64 6520 3e3d        if code >=
-000561f0: 2034 3030 3a0a 2020 2020 2020 2020 2020   400:.          
-00056200: 2020 6966 2062 6f64 792e 6669 6e64 2827    if body.find('
-00056210: 5072 6963 6520 2a20 5154 5920 6973 207a  Price * QTY is z
-00056220: 6572 6f20 6f72 206c 6573 7327 2920 3e3d  ero or less') >=
-00056230: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00056240: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-00056250: 644f 7264 6572 2873 656c 662e 6964 202b  dOrder(self.id +
-00056260: 2027 206f 7264 6572 2063 6f73 7420 3d20   ' order cost = 
-00056270: 616d 6f75 6e74 202a 2070 7269 6365 2069  amount * price i
-00056280: 7320 7a65 726f 206f 7220 6c65 7373 2027  s zero or less '
-00056290: 202b 2062 6f64 7929 0a20 2020 2020 2020   + body).       
-000562a0: 2020 2020 2069 6620 626f 6479 2e66 696e       if body.fin
-000562b0: 6428 274c 4f54 5f53 495a 4527 2920 3e3d  d('LOT_SIZE') >=
-000562c0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-000562d0: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-000562e0: 644f 7264 6572 2873 656c 662e 6964 202b  dOrder(self.id +
-000562f0: 2027 206f 7264 6572 2061 6d6f 756e 7420   ' order amount 
-00056300: 7368 6f75 6c64 2062 6520 6576 656e 6c79  should be evenly
-00056310: 2064 6976 6973 6962 6c65 2062 7920 6c6f   divisible by lo
-00056320: 7420 7369 7a65 2027 202b 2062 6f64 7929  t size ' + body)
-00056330: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00056340: 626f 6479 2e66 696e 6428 2750 5249 4345  body.find('PRICE
-00056350: 5f46 494c 5445 5227 2920 3e3d 2030 3a0a  _FILTER') >= 0:.
-00056360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056370: 7261 6973 6520 496e 7661 6c69 644f 7264  raise InvalidOrd
-00056380: 6572 2873 656c 662e 6964 202b 2027 206f  er(self.id + ' o
-00056390: 7264 6572 2070 7269 6365 2069 7320 696e  rder price is in
-000563a0: 7661 6c69 642c 2069 2e65 2e20 6578 6365  valid, i.e. exce
-000563b0: 6564 7320 616c 6c6f 7765 6420 7072 6963  eds allowed pric
-000563c0: 6520 7072 6563 6973 696f 6e2c 2065 7863  e precision, exc
-000563d0: 6565 6473 206d 696e 2070 7269 6365 206f  eeds min price o
-000563e0: 7220 6d61 7820 7072 6963 6520 6c69 6d69  r max price limi
-000563f0: 7473 206f 7220 6973 2069 6e76 616c 6964  ts or is invalid
-00056400: 2076 616c 7565 2069 6e20 6765 6e65 7261   value in genera
-00056410: 6c2c 2075 7365 2073 656c 662e 7072 6963  l, use self.pric
-00056420: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
-00056430: 796d 626f 6c2c 2061 6d6f 756e 7429 2027  ymbol, amount) '
-00056440: 202b 2062 6f64 7929 0a20 2020 2020 2020   + body).       
-00056450: 2069 6620 7265 7370 6f6e 7365 2069 7320   if response is 
-00056460: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00056470: 2020 7265 7475 726e 204e 6f6e 6520 2023    return None  #
-00056480: 2066 616c 6c62 6163 6b20 746f 2064 6566   fallback to def
-00056490: 6175 6c74 2065 7272 6f72 2068 616e 646c  ault error handl
-000564a0: 6572 0a20 2020 2020 2020 2023 2063 6865  er.        # che
-000564b0: 636b 2073 7563 6365 7373 2076 616c 7565  ck success value
-000564c0: 2066 6f72 2077 6170 6920 656e 6470 6f69   for wapi endpoi
-000564d0: 6e74 730a 2020 2020 2020 2020 2320 7265  nts.        # re
-000564e0: 7370 6f6e 7365 2069 6e20 666f 726d 6174  sponse in format
-000564f0: 207b 276d 7367 273a 2027 5468 6520 636f   {'msg': 'The co
-00056500: 696e 2064 6f65 7320 6e6f 7420 6578 6973  in does not exis
-00056510: 742e 272c 2027 7375 6363 6573 7327 3a20  t.', 'success': 
-00056520: 5472 7565 2f66 616c 7365 7d0a 2020 2020  True/false}.    
-00056530: 2020 2020 7375 6363 6573 7320 3d20 7365      success = se
-00056540: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-00056550: 7370 6f6e 7365 2c20 2773 7563 6365 7373  sponse, 'success
-00056560: 272c 2054 7275 6529 0a20 2020 2020 2020  ', True).       
-00056570: 2069 6620 6e6f 7420 7375 6363 6573 733a   if not success:
-00056580: 0a20 2020 2020 2020 2020 2020 206d 6573  .            mes
-00056590: 7361 6765 4e65 7720 3d20 7365 6c66 2e73  sageNew = self.s
-000565a0: 6166 655f 7374 7269 6e67 2872 6573 706f  afe_string(respo
-000565b0: 6e73 652c 2027 6d73 6727 290a 2020 2020  nse, 'msg').    
-000565c0: 2020 2020 2020 2020 7061 7273 6564 4d65          parsedMe
-000565d0: 7373 6167 6520 3d20 4e6f 6e65 0a20 2020  ssage = None.   
-000565e0: 2020 2020 2020 2020 2069 6620 6d65 7373           if mess
-000565f0: 6167 654e 6577 2069 7320 6e6f 7420 4e6f  ageNew is not No
-00056600: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00056610: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00056620: 2020 2020 2020 2020 2020 2020 2070 6172               par
-00056630: 7365 644d 6573 7361 6765 203d 206a 736f  sedMessage = jso
-00056640: 6e2e 6c6f 6164 7328 6d65 7373 6167 654e  n.loads(messageN
-00056650: 6577 290a 2020 2020 2020 2020 2020 2020  ew).            
-00056660: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00056670: 7469 6f6e 2061 7320 653a 0a20 2020 2020  tion as e:.     
-00056680: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00056690: 2064 6f20 6e6f 7468 696e 670a 2020 2020   do nothing.    
-000566a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000566b0: 7061 7273 6564 4d65 7373 6167 6520 3d20  parsedMessage = 
-000566c0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-000566d0: 2020 2020 2069 6620 7061 7273 6564 4d65       if parsedMe
-000566e0: 7373 6167 6520 6973 206e 6f74 204e 6f6e  ssage is not Non
-000566f0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00056700: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00056710: 3d20 7061 7273 6564 4d65 7373 6167 650a  = parsedMessage.
-00056720: 2020 2020 2020 2020 6d65 7373 6167 6520          message 
-00056730: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00056740: 6e67 2872 6573 706f 6e73 652c 2027 6d73  ng(response, 'ms
-00056750: 6727 290a 2020 2020 2020 2020 6966 206d  g').        if m
-00056760: 6573 7361 6765 2069 7320 6e6f 7420 4e6f  essage is not No
-00056770: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00056780: 7365 6c66 2e74 6872 6f77 5f65 7861 6374  self.throw_exact
-00056790: 6c79 5f6d 6174 6368 6564 5f65 7863 6570  ly_matched_excep
-000567a0: 7469 6f6e 2873 656c 662e 6578 6365 7074  tion(self.except
-000567b0: 696f 6e73 5b27 6578 6163 7427 5d2c 206d  ions['exact'], m
-000567c0: 6573 7361 6765 2c20 7365 6c66 2e69 6420  essage, self.id 
-000567d0: 2b20 2720 2720 2b20 6d65 7373 6167 6529  + ' ' + message)
-000567e0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000567f0: 662e 7468 726f 775f 6272 6f61 646c 795f  f.throw_broadly_
-00056800: 6d61 7463 6865 645f 6578 6365 7074 696f  matched_exceptio
-00056810: 6e28 7365 6c66 2e65 7863 6570 7469 6f6e  n(self.exception
-00056820: 735b 2762 726f 6164 275d 2c20 6d65 7373  s['broad'], mess
-00056830: 6167 652c 2073 656c 662e 6964 202b 2027  age, self.id + '
-00056840: 2027 202b 206d 6573 7361 6765 290a 2020   ' + message).  
-00056850: 2020 2020 2020 2320 6368 6563 6b73 2061        # checks a
-00056860: 6761 696e 7374 2065 7272 6f72 2063 6f64  gainst error cod
-00056870: 6573 0a20 2020 2020 2020 2065 7272 6f72  es.        error
-00056880: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00056890: 696e 6728 7265 7370 6f6e 7365 2c20 2763  ing(response, 'c
-000568a0: 6f64 6527 290a 2020 2020 2020 2020 6966  ode').        if
-000568b0: 2065 7272 6f72 2069 7320 6e6f 7420 4e6f   error is not No
-000568c0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000568d0: 2320 6874 7470 733a 2f2f 6769 7468 7562  # https://github
-000568e0: 2e63 6f6d 2f63 6378 742f 6363 7874 2f69  .com/ccxt/ccxt/i
-000568f0: 7373 7565 732f 3635 3031 0a20 2020 2020  ssues/6501.     
-00056900: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
-00056910: 2f67 6974 6875 622e 636f 6d2f 6363 7874  /github.com/ccxt
-00056920: 2f63 6378 742f 6973 7375 6573 2f37 3734  /ccxt/issues/774
-00056930: 320a 2020 2020 2020 2020 2020 2020 6966  2.            if
-00056940: 2028 6572 726f 7220 3d3d 2027 3230 3027   (error == '200'
-00056950: 2920 6f72 2050 7265 6369 7365 2e73 7472  ) or Precise.str
-00056960: 696e 675f 6571 7561 6c73 2865 7272 6f72  ing_equals(error
-00056970: 2c20 2730 2729 3a0a 2020 2020 2020 2020  , '0'):.        
-00056980: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00056990: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-000569a0: 2320 6120 776f 726b 6172 6f75 6e64 2066  # a workaround f
-000569b0: 6f72 207b 2263 6f64 6522 3a2d 3230 3135  or {"code":-2015
-000569c0: 2c22 6d73 6722 3a22 496e 7661 6c69 6420  ,"msg":"Invalid 
-000569d0: 4150 492d 6b65 792c 2049 502c 206f 7220  API-key, IP, or 
-000569e0: 7065 726d 6973 7369 6f6e 7320 666f 7220  permissions for 
-000569f0: 6163 7469 6f6e 2e22 7d0a 2020 2020 2020  action."}.      
-00056a00: 2020 2020 2020 2320 6465 7370 6974 6520        # despite 
-00056a10: 7468 6174 2074 6865 6972 206d 6573 7361  that their messa
-00056a20: 6765 2069 7320 7665 7279 2063 6f6e 6675  ge is very confu
-00056a30: 7369 6e67 2c20 6974 2069 7320 7261 6973  sing, it is rais
-00056a40: 6564 2062 7920 4269 6e61 6e63 650a 2020  ed by Binance.  
-00056a50: 2020 2020 2020 2020 2020 2320 6f6e 2061            # on a
-00056a60: 2074 656d 706f 7261 7279 2062 616e 2c20   temporary ban, 
-00056a70: 7468 6520 4150 4920 6b65 7920 6973 2076  the API key is v
-00056a80: 616c 6964 2c20 6275 7420 6469 7361 626c  alid, but disabl
-00056a90: 6564 2066 6f72 2061 2077 6869 6c65 0a20  ed for a while. 
-00056aa0: 2020 2020 2020 2020 2020 2069 6620 2865             if (e
-00056ab0: 7272 6f72 203d 3d20 272d 3230 3135 2729  rror == '-2015')
-00056ac0: 2061 6e64 2073 656c 662e 6f70 7469 6f6e   and self.option
-00056ad0: 735b 2768 6173 416c 7265 6164 7941 7574  s['hasAlreadyAut
-00056ae0: 6865 6e74 6963 6174 6564 5375 6363 6573  henticatedSucces
-00056af0: 7366 756c 6c79 275d 3a0a 2020 2020 2020  sfully']:.      
-00056b00: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00056b10: 4444 6f53 5072 6f74 6563 7469 6f6e 2873  DDoSProtection(s
-00056b20: 656c 662e 6964 202b 2027 2027 202b 2062  elf.id + ' ' + b
-00056b30: 6f64 7929 0a20 2020 2020 2020 2020 2020  ody).           
-00056b40: 2066 6565 6462 6163 6b20 3d20 7365 6c66   feedback = self
-00056b50: 2e69 6420 2b20 2720 2720 2b20 626f 6479  .id + ' ' + body
-00056b60: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00056b70: 6d65 7373 6167 6520 3d3d 2027 4e6f 206e  message == 'No n
-00056b80: 6565 6420 746f 2063 6861 6e67 6520 6d61  eed to change ma
-00056b90: 7267 696e 2074 7970 652e 273a 0a20 2020  rgin type.':.   
-00056ba0: 2020 2020 2020 2020 2020 2020 2023 206e               # n
-00056bb0: 6f74 2061 6e20 6572 726f 720a 2020 2020  ot an error.    
-00056bc0: 2020 2020 2020 2020 2020 2020 2320 6874              # ht
-00056bd0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00056be0: 2f63 6378 742f 6363 7874 2f69 7373 7565  /ccxt/ccxt/issue
-00056bf0: 732f 3131 3236 380a 2020 2020 2020 2020  s/11268.        
-00056c00: 2020 2020 2020 2020 2320 6874 7470 733a          # https:
-00056c10: 2f2f 6769 7468 7562 2e63 6f6d 2f63 6378  //github.com/ccx
-00056c20: 742f 6363 7874 2f70 756c 6c2f 3131 3632  t/ccxt/pull/1162
-00056c30: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-00056c40: 2020 2320 504f 5354 2068 7474 7073 3a2f    # POST https:/
-00056c50: 2f66 6170 692e 6269 6e61 6e63 652e 636f  /fapi.binance.co
-00056c60: 6d2f 6661 7069 2f76 312f 6d61 7267 696e  m/fapi/v1/margin
-00056c70: 5479 7065 2034 3030 2042 6164 2052 6571  Type 400 Bad Req
-00056c80: 7565 7374 0a20 2020 2020 2020 2020 2020  uest.           
-00056c90: 2020 2020 2023 2062 696e 616e 6365 7573       # binanceus
-00056ca0: 646d 207b 2263 6f64 6522 3a2d 3430 3436  dm {"code":-4046
-00056cb0: 2c22 6d73 6722 3a22 4e6f 206e 6565 6420  ,"msg":"No need 
-00056cc0: 746f 2063 6861 6e67 6520 6d61 7267 696e  to change margin
-00056cd0: 2074 7970 652e 227d 0a20 2020 2020 2020   type."}.       
-00056ce0: 2020 2020 2020 2020 2072 6169 7365 204d           raise M
-00056cf0: 6172 6769 6e4d 6f64 6541 6c72 6561 6479  arginModeAlready
-00056d00: 5365 7428 6665 6564 6261 636b 290a 2020  Set(feedback).  
-00056d10: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-00056d20: 6872 6f77 5f65 7861 6374 6c79 5f6d 6174  hrow_exactly_mat
-00056d30: 6368 6564 5f65 7863 6570 7469 6f6e 2873  ched_exception(s
-00056d40: 656c 662e 6578 6365 7074 696f 6e73 5b27  elf.exceptions['
-00056d50: 6578 6163 7427 5d2c 2065 7272 6f72 2c20  exact'], error, 
-00056d60: 6665 6564 6261 636b 290a 2020 2020 2020  feedback).      
-00056d70: 2020 2020 2020 7261 6973 6520 4578 6368        raise Exch
-00056d80: 616e 6765 4572 726f 7228 6665 6564 6261  angeError(feedba
-00056d90: 636b 290a 2020 2020 2020 2020 6966 206e  ck).        if n
-00056da0: 6f74 2073 7563 6365 7373 3a0a 2020 2020  ot success:.    
-00056db0: 2020 2020 2020 2020 7261 6973 6520 4578          raise Ex
-00056dc0: 6368 616e 6765 4572 726f 7228 7365 6c66  changeError(self
-00056dd0: 2e69 6420 2b20 2720 2720 2b20 626f 6479  .id + ' ' + body
-00056de0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00056df0: 204e 6f6e 650a 0a20 2020 2064 6566 2063   None..    def c
-00056e00: 616c 6375 6c61 7465 5f72 6174 655f 6c69  alculate_rate_li
-00056e10: 6d69 7465 725f 636f 7374 2873 656c 662c  miter_cost(self,
-00056e20: 2061 7069 2c20 6d65 7468 6f64 2c20 7061   api, method, pa
-00056e30: 7468 2c20 7061 7261 6d73 2c20 636f 6e66  th, params, conf
-00056e40: 6967 3d7b 7d29 3a0a 2020 2020 2020 2020  ig={}):.        
-00056e50: 6966 2028 276e 6f43 6f69 6e27 2069 6e20  if ('noCoin' in 
-00056e60: 636f 6e66 6967 2920 616e 6420 6e6f 7420  config) and not 
-00056e70: 2827 636f 696e 2720 696e 2070 6172 616d  ('coin' in param
-00056e80: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-00056e90: 7265 7475 726e 2063 6f6e 6669 675b 276e  return config['n
-00056ea0: 6f43 6f69 6e27 5d0a 2020 2020 2020 2020  oCoin'].        
-00056eb0: 656c 6966 2028 276e 6f53 796d 626f 6c27  elif ('noSymbol'
-00056ec0: 2069 6e20 636f 6e66 6967 2920 616e 6420   in config) and 
-00056ed0: 6e6f 7420 2827 7379 6d62 6f6c 2720 696e  not ('symbol' in
-00056ee0: 2070 6172 616d 7329 3a0a 2020 2020 2020   params):.      
-00056ef0: 2020 2020 2020 7265 7475 726e 2063 6f6e        return con
-00056f00: 6669 675b 276e 6f53 796d 626f 6c27 5d0a  fig['noSymbol'].
-00056f10: 2020 2020 2020 2020 656c 6966 2028 276e          elif ('n
-00056f20: 6f50 6f6f 6c49 6427 2069 6e20 636f 6e66  oPoolId' in conf
-00056f30: 6967 2920 616e 6420 6e6f 7420 2827 706f  ig) and not ('po
-00056f40: 6f6c 4964 2720 696e 2070 6172 616d 7329  olId' in params)
-00056f50: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00056f60: 7475 726e 2063 6f6e 6669 675b 276e 6f50  turn config['noP
-00056f70: 6f6f 6c49 6427 5d0a 2020 2020 2020 2020  oolId'].        
-00056f80: 656c 6966 2028 2762 794c 696d 6974 2720  elif ('byLimit' 
-00056f90: 696e 2063 6f6e 6669 6729 2061 6e64 2028  in config) and (
-00056fa0: 276c 696d 6974 2720 696e 2070 6172 616d  'limit' in param
-00056fb0: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-00056fc0: 6c69 6d69 7420 3d20 7061 7261 6d73 5b27  limit = params['
-00056fd0: 6c69 6d69 7427 5d0a 2020 2020 2020 2020  limit'].        
-00056fe0: 2020 2020 6279 4c69 6d69 7420 3d20 636f      byLimit = co
-00056ff0: 6e66 6967 5b27 6279 4c69 6d69 7427 5d0a  nfig['byLimit'].
-00057000: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00057010: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
-00057020: 6e28 6279 4c69 6d69 7429 293a 0a20 2020  n(byLimit)):.   
-00057030: 2020 2020 2020 2020 2020 2020 2065 6e74               ent
-00057040: 7279 203d 2062 794c 696d 6974 5b69 5d0a  ry = byLimit[i].
-00057050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00057060: 6966 206c 696d 6974 203c 3d20 656e 7472  if limit <= entr
-00057070: 795b 305d 3a0a 2020 2020 2020 2020 2020  y[0]:.          
-00057080: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00057090: 2065 6e74 7279 5b31 5d0a 2020 2020 2020   entry[1].      
-000570a0: 2020 7265 7475 726e 2073 656c 662e 7361    return self.sa
-000570b0: 6665 5f76 616c 7565 2863 6f6e 6669 672c  fe_value(config,
-000570c0: 2027 636f 7374 272c 2031 290a 0a20 2020   'cost', 1)..   
-000570d0: 2064 6566 2072 6571 7565 7374 2873 656c   def request(sel
-000570e0: 662c 2070 6174 682c 2061 7069 3d27 7075  f, path, api='pu
-000570f0: 626c 6963 272c 206d 6574 686f 643d 2747  blic', method='G
-00057100: 4554 272c 2070 6172 616d 733d 7b7d 2c20  ET', params={}, 
-00057110: 6865 6164 6572 733d 4e6f 6e65 2c20 626f  headers=None, bo
-00057120: 6479 3d4e 6f6e 652c 2063 6f6e 6669 673d  dy=None, config=
-00057130: 7b7d 2c20 636f 6e74 6578 743d 7b7d 293a  {}, context={}):
-00057140: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00057150: 6520 3d20 7365 6c66 2e66 6574 6368 3228  e = self.fetch2(
-00057160: 7061 7468 2c20 6170 692c 206d 6574 686f  path, api, metho
-00057170: 642c 2070 6172 616d 732c 2068 6561 6465  d, params, heade
-00057180: 7273 2c20 626f 6479 2c20 636f 6e66 6967  rs, body, config
-00057190: 290a 2020 2020 2020 2020 2320 6120 776f  ).        # a wo
-000571a0: 726b 6172 6f75 6e64 2066 6f72 207b 2263  rkaround for {"c
-000571b0: 6f64 6522 3a2d 3230 3135 2c22 6d73 6722  ode":-2015,"msg"
-000571c0: 3a22 496e 7661 6c69 6420 4150 492d 6b65  :"Invalid API-ke
-000571d0: 792c 2049 502c 206f 7220 7065 726d 6973  y, IP, or permis
-000571e0: 7369 6f6e 7320 666f 7220 6163 7469 6f6e  sions for action
-000571f0: 2e22 7d0a 2020 2020 2020 2020 6966 2028  ."}.        if (
-00057200: 6170 6920 3d3d 2027 7072 6976 6174 6527  api == 'private'
-00057210: 2920 6f72 2028 6170 6920 3d3d 2027 7761  ) or (api == 'wa
-00057220: 7069 2729 3a0a 2020 2020 2020 2020 2020  pi'):.          
-00057230: 2020 7365 6c66 2e6f 7074 696f 6e73 5b27    self.options['
-00057240: 6861 7341 6c72 6561 6479 4175 7468 656e  hasAlreadyAuthen
-00057250: 7469 6361 7465 6453 7563 6365 7373 6675  ticatedSuccessfu
-00057260: 6c6c 7927 5d20 3d20 5472 7565 0a20 2020  lly'] = True.   
-00057270: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
-00057280: 6f6e 7365 0a0a 2020 2020 6465 6620 6d6f  onse..    def mo
-00057290: 6469 6679 5f6d 6172 6769 6e5f 6865 6c70  dify_margin_help
-000572a0: 6572 2873 656c 662c 2073 796d 626f 6c3a  er(self, symbol:
-000572b0: 2073 7472 2c20 616d 6f75 6e74 2c20 6164   str, amount, ad
-000572c0: 644f 7252 6564 7563 652c 2070 6172 616d  dOrReduce, param
-000572d0: 733d 7b7d 293a 0a20 2020 2020 2020 2023  s={}):.        #
-000572e0: 2075 7365 6420 746f 206d 6f64 6966 7920   used to modify 
-000572f0: 6973 6f6c 6174 6564 2070 6f73 6974 696f  isolated positio
-00057300: 6e73 0a20 2020 2020 2020 2064 6566 6175  ns.        defau
-00057310: 6c74 5479 7065 203d 2073 656c 662e 7361  ltType = self.sa
-00057320: 6665 5f73 7472 696e 6728 7365 6c66 2e6f  fe_string(self.o
-00057330: 7074 696f 6e73 2c20 2764 6566 6175 6c74  ptions, 'default
-00057340: 5479 7065 272c 2027 6675 7475 7265 2729  Type', 'future')
-00057350: 0a20 2020 2020 2020 2069 6620 6465 6661  .        if defa
-00057360: 756c 7454 7970 6520 3d3d 2027 7370 6f74  ultType == 'spot
-00057370: 273a 0a20 2020 2020 2020 2020 2020 2064  ':.            d
-00057380: 6566 6175 6c74 5479 7065 203d 2027 6675  efaultType = 'fu
-00057390: 7475 7265 270a 2020 2020 2020 2020 7479  ture'.        ty
-000573a0: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
-000573b0: 7472 696e 6728 7061 7261 6d73 2c20 2774  tring(params, 't
-000573c0: 7970 6527 2c20 6465 6661 756c 7454 7970  ype', defaultTyp
-000573d0: 6529 0a20 2020 2020 2020 2069 6620 2874  e).        if (t
-000573e0: 7970 6520 3d3d 2027 6d61 7267 696e 2729  ype == 'margin')
-000573f0: 206f 7220 2874 7970 6520 3d3d 2027 7370   or (type == 'sp
-00057400: 6f74 2729 3a0a 2020 2020 2020 2020 2020  ot'):.          
-00057410: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
-00057420: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
-00057430: 2061 6464 202f 2072 6564 7563 6520 6d61   add / reduce ma
-00057440: 7267 696e 206f 6e6c 7920 7375 7070 6f72  rgin only suppor
-00057450: 7465 6420 7769 7468 2074 7970 6520 6675  ted with type fu
-00057460: 7475 7265 206f 7220 6465 6c69 7665 7279  ture or delivery
-00057470: 2729 0a20 2020 2020 2020 2073 656c 662e  ').        self.
-00057480: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-00057490: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-000574a0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-000574b0: 6f6c 290a 2020 2020 2020 2020 616d 6f75  ol).        amou
-000574c0: 6e74 203d 2073 656c 662e 616d 6f75 6e74  nt = self.amount
-000574d0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-000574e0: 6d62 6f6c 2c20 616d 6f75 6e74 290a 2020  mbol, amount).  
-000574f0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00057500: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
-00057510: 7970 6527 3a20 6164 644f 7252 6564 7563  ype': addOrReduc
-00057520: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00057530: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
-00057540: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-00057550: 2020 2027 616d 6f75 6e74 273a 2061 6d6f     'amount': amo
-00057560: 756e 742c 0a20 2020 2020 2020 207d 0a20  unt,.        }. 
-00057570: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00057580: 4e6f 6e65 0a20 2020 2020 2020 2063 6f64  None.        cod
-00057590: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-000575a0: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
-000575b0: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
-000575c0: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
-000575d0: 5072 6976 6174 6550 6f73 7450 6f73 6974  PrivatePostPosit
-000575e0: 696f 6e4d 6172 6769 6e27 0a20 2020 2020  ionMargin'.     
-000575f0: 2020 2020 2020 2063 6f64 6520 3d20 6d61         code = ma
-00057600: 726b 6574 5b27 7175 6f74 6527 5d0a 2020  rket['quote'].  
-00057610: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00057620: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00057630: 2027 6461 7069 5072 6976 6174 6550 6f73   'dapiPrivatePos
-00057640: 7450 6f73 6974 696f 6e4d 6172 6769 6e27  tPositionMargin'
-00057650: 0a20 2020 2020 2020 2020 2020 2063 6f64  .            cod
-00057660: 6520 3d20 6d61 726b 6574 5b27 6261 7365  e = market['base
-00057670: 275d 0a20 2020 2020 2020 2072 6573 706f  '].        respo
-00057680: 6e73 6520 3d20 6765 7461 7474 7228 7365  nse = getattr(se
-00057690: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
-000576a0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-000576b0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
-000576c0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-000576d0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-000576e0: 2020 2020 2020 2263 6f64 6522 3a20 3230        "code": 20
-000576f0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-00057700: 2020 2020 2022 6d73 6722 3a20 2253 7563       "msg": "Suc
-00057710: 6365 7373 6675 6c6c 7920 6d6f 6469 6679  cessfully modify
-00057720: 2070 6f73 6974 696f 6e20 6d61 7267 696e   position margin
-00057730: 2e22 2c0a 2020 2020 2020 2020 2320 2020  .",.        #   
-00057740: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-00057750: 302e 3030 312c 0a20 2020 2020 2020 2023  0.001,.        #
-00057760: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-00057770: 2031 0a20 2020 2020 2020 2023 2020 2020   1.        #    
-00057780: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00057790: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000577a0: 2e65 7874 656e 6428 7365 6c66 2e70 6172  .extend(self.par
-000577b0: 7365 5f6d 6172 6769 6e5f 6d6f 6469 6669  se_margin_modifi
-000577c0: 6361 7469 6f6e 2872 6573 706f 6e73 652c  cation(response,
-000577d0: 206d 6172 6b65 7429 2c20 7b0a 2020 2020   market), {.    
-000577e0: 2020 2020 2020 2020 2763 6f64 6527 3a20          'code': 
-000577f0: 636f 6465 2c0a 2020 2020 2020 2020 7d29  code,.        })
-00057800: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-00057810: 6d61 7267 696e 5f6d 6f64 6966 6963 6174  margin_modificat
-00057820: 696f 6e28 7365 6c66 2c20 6461 7461 2c20  ion(self, data, 
-00057830: 6d61 726b 6574 3d4e 6f6e 6529 3a0a 2020  market=None):.  
-00057840: 2020 2020 2020 7261 7754 7970 6520 3d20        rawType = 
-00057850: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
-00057860: 7228 6461 7461 2c20 2774 7970 6527 290a  r(data, 'type').
-00057870: 2020 2020 2020 2020 7265 7375 6c74 5479          resultTy
-00057880: 7065 203d 2027 6164 6427 2069 6620 2872  pe = 'add' if (r
-00057890: 6177 5479 7065 203d 3d20 3129 2065 6c73  awType == 1) els
-000578a0: 6520 2772 6564 7563 6527 0a20 2020 2020  e 'reduce'.     
-000578b0: 2020 2072 6573 756c 7441 6d6f 756e 7420     resultAmount 
-000578c0: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-000578d0: 6572 2864 6174 612c 2027 616d 6f75 6e74  er(data, 'amount
-000578e0: 2729 0a20 2020 2020 2020 2065 7272 6f72  ').        error
-000578f0: 436f 6465 203d 2073 656c 662e 7361 6665  Code = self.safe
-00057900: 5f73 7472 696e 6728 6461 7461 2c20 2763  _string(data, 'c
-00057910: 6f64 6527 290a 2020 2020 2020 2020 7374  ode').        st
-00057920: 6174 7573 203d 2027 6f6b 2720 6966 2028  atus = 'ok' if (
-00057930: 6572 726f 7243 6f64 6520 3d3d 2027 3230  errorCode == '20
-00057940: 3027 2920 656c 7365 2027 6661 696c 6564  0') else 'failed
-00057950: 270a 2020 2020 2020 2020 7265 7475 726e  '.        return
-00057960: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00057970: 696e 666f 273a 2064 6174 612c 0a20 2020  info': data,.   
-00057980: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
-00057990: 2072 6573 756c 7454 7970 652c 0a20 2020   resultType,.   
-000579a0: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
-000579b0: 273a 2072 6573 756c 7441 6d6f 756e 742c  ': resultAmount,
-000579c0: 0a20 2020 2020 2020 2020 2020 2027 636f  .            'co
-000579d0: 6465 273a 204e 6f6e 652c 0a20 2020 2020  de': None,.     
-000579e0: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-000579f0: 206d 6172 6b65 745b 2773 796d 626f 6c27   market['symbol'
-00057a00: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-00057a10: 7374 6174 7573 273a 2073 7461 7475 732c  status': status,
-00057a20: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-00057a30: 6465 6620 7265 6475 6365 5f6d 6172 6769  def reduce_margi
-00057a40: 6e28 7365 6c66 2c20 7379 6d62 6f6c 3a20  n(self, symbol: 
-00057a50: 7374 722c 2061 6d6f 756e 742c 2070 6172  str, amount, par
-00057a60: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-00057a70: 2022 2222 0a20 2020 2020 2020 2072 656d   """.        rem
-00057a80: 6f76 6520 6d61 7267 696e 2066 726f 6d20  ove margin from 
-00057a90: 6120 706f 7369 7469 6f6e 0a20 2020 2020  a position.     
-00057aa0: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
-00057ab0: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-00057ac0: 726b 6574 2073 796d 626f 6c0a 2020 2020  rket symbol.    
-00057ad0: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
-00057ae0: 2061 6d6f 756e 743a 2074 6865 2061 6d6f   amount: the amo
-00057af0: 756e 7420 6f66 206d 6172 6769 6e20 746f  unt of margin to
-00057b00: 2072 656d 6f76 650a 2020 2020 2020 2020   remove.        
-00057b10: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-00057b20: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-00057b30: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00057b40: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
-00057b50: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-00057b60: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
-00057b70: 2061 2060 6d61 7267 696e 2073 7472 7563   a `margin struc
-00057b80: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-00057b90: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-00057ba0: 643d 7265 6475 6365 2d6d 6172 6769 6e2d  d=reduce-margin-
-00057bb0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00057bc0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00057bd0: 7265 7475 726e 2073 656c 662e 6d6f 6469  return self.modi
-00057be0: 6679 5f6d 6172 6769 6e5f 6865 6c70 6572  fy_margin_helper
-00057bf0: 2873 796d 626f 6c2c 2061 6d6f 756e 742c  (symbol, amount,
-00057c00: 2032 2c20 7061 7261 6d73 290a 0a20 2020   2, params)..   
-00057c10: 2064 6566 2061 6464 5f6d 6172 6769 6e28   def add_margin(
-00057c20: 7365 6c66 2c20 7379 6d62 6f6c 3a20 7374  self, symbol: st
-00057c30: 722c 2061 6d6f 756e 742c 2070 6172 616d  r, amount, param
-00057c40: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00057c50: 2222 0a20 2020 2020 2020 2061 6464 206d  "".        add m
-00057c60: 6172 6769 6e0a 2020 2020 2020 2020 3a70  argin.        :p
-00057c70: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-00057c80: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-00057c90: 7379 6d62 6f6c 0a20 2020 2020 2020 203a  symbol.        :
-00057ca0: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
-00057cb0: 6e74 3a20 616d 6f75 6e74 206f 6620 6d61  nt: amount of ma
-00057cc0: 7267 696e 2074 6f20 6164 640a 2020 2020  rgin to add.    
-00057cd0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-00057ce0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
-00057cf0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-00057d00: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
-00057d10: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-00057d20: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00057d30: 6963 743a 2061 2060 6d61 7267 696e 2073  ict: a `margin s
-00057d40: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-00057d50: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00057d60: 232f 3f69 643d 6164 642d 6d61 7267 696e  #/?id=add-margin
-00057d70: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-00057d80: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00057d90: 2072 6574 7572 6e20 7365 6c66 2e6d 6f64   return self.mod
-00057da0: 6966 795f 6d61 7267 696e 5f68 656c 7065  ify_margin_helpe
-00057db0: 7228 7379 6d62 6f6c 2c20 616d 6f75 6e74  r(symbol, amount
-00057dc0: 2c20 312c 2070 6172 616d 7329 0a0a 2020  , 1, params)..  
-00057dd0: 2020 6465 6620 6665 7463 685f 626f 7272    def fetch_borr
-00057de0: 6f77 5f72 6174 6528 7365 6c66 2c20 636f  ow_rate(self, co
-00057df0: 6465 3a20 7374 722c 2070 6172 616d 733d  de: str, params=
-00057e00: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-00057e10: 0a20 2020 2020 2020 2066 6574 6368 2074  .        fetch t
-00057e20: 6865 2072 6174 6520 6f66 2069 6e74 6572  he rate of inter
-00057e30: 6573 7420 746f 2062 6f72 726f 7720 6120  est to borrow a 
-00057e40: 6375 7272 656e 6379 2066 6f72 206d 6172  currency for mar
-00057e50: 6769 6e20 7472 6164 696e 670a 2020 2020  gin trading.    
-00057e60: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-00057e70: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-00057e80: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-00057e90: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00057ea0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-00057eb0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00057ec0: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
-00057ed0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00057ee0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-00057ef0: 6374 3a20 6120 6062 6f72 726f 7720 7261  ct: a `borrow ra
-00057f00: 7465 2073 7472 7563 7475 7265 203c 6874  te structure <ht
-00057f10: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00057f20: 636f 6d2f 232f 3f69 643d 626f 7272 6f77  com/#/?id=borrow
-00057f30: 2d72 6174 652d 7374 7275 6374 7572 653e  -rate-structure>
-00057f40: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
-00057f50: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
-00057f60: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00057f70: 2020 6375 7272 656e 6379 203d 2073 656c    currency = sel
-00057f80: 662e 6375 7272 656e 6379 2863 6f64 6529  f.currency(code)
-00057f90: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-00057fa0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00057fb0: 2027 6173 7365 7427 3a20 6375 7272 656e   'asset': curren
-00057fc0: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
-00057fd0: 2020 2020 2020 2320 2776 6970 4c65 7665        # 'vipLeve
-00057fe0: 6c27 3a20 7365 6c66 2e73 6166 655f 696e  l': self.safe_in
-00057ff0: 7465 6765 7228 7061 7261 6d73 2c20 2776  teger(params, 'v
-00058000: 6970 4c65 7665 6c27 292c 0a20 2020 2020  ipLevel'),.     
-00058010: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
-00058020: 706f 6e73 6520 3d20 7365 6c66 2e73 6170  ponse = self.sap
-00058030: 6947 6574 4d61 7267 696e 496e 7465 7265  iGetMarginIntere
-00058040: 7374 5261 7465 4869 7374 6f72 7928 7365  stRateHistory(se
-00058050: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00058060: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00058070: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00058080: 2020 2020 5b0a 2020 2020 2020 2020 2320      [.        # 
-00058090: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-000580a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000580b0: 2261 7373 6574 223a 2022 5553 4454 222c  "asset": "USDT",
-000580c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000580d0: 2020 2020 2020 2022 7469 6d65 7374 616d         "timestam
-000580e0: 7022 3a20 3136 3338 3233 3034 3030 3030  p": 163823040000
-000580f0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-00058100: 2020 2020 2020 2020 2022 6461 696c 7949           "dailyI
-00058110: 6e74 6572 6573 7452 6174 6522 3a20 2230  nterestRate": "0
-00058120: 2e30 3030 3622 2c0a 2020 2020 2020 2020  .0006",.        
-00058130: 2320 2020 2020 2020 2020 2020 2020 2276  #             "v
-00058140: 6970 4c65 7665 6c22 3a20 300a 2020 2020  ipLevel": 0.    
-00058150: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-00058160: 0a20 2020 2020 2020 2023 2020 2020 205d  .        #     ]
-00058170: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00058180: 2020 2072 6174 6520 3d20 7365 6c66 2e73     rate = self.s
-00058190: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
-000581a0: 7365 2c20 3029 0a20 2020 2020 2020 2072  se, 0).        r
-000581b0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-000581c0: 5f62 6f72 726f 775f 7261 7465 2872 6174  _borrow_rate(rat
-000581d0: 6529 0a0a 2020 2020 6465 6620 6665 7463  e)..    def fetc
-000581e0: 685f 626f 7272 6f77 5f72 6174 655f 6869  h_borrow_rate_hi
-000581f0: 7374 6f72 7928 7365 6c66 2c20 636f 6465  story(self, code
-00058200: 3a20 7374 722c 2073 696e 6365 3a20 4f70  : str, since: Op
-00058210: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00058220: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
-00058230: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
-00058240: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00058250: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00058260: 2072 6574 7269 6576 6573 2061 2068 6973   retrieves a his
-00058270: 746f 7279 206f 6620 6120 6375 7272 656e  tory of a curren
-00058280: 6369 6573 2062 6f72 726f 7720 696e 7465  cies borrow inte
-00058290: 7265 7374 2072 6174 6520 6174 2073 7065  rest rate at spe
-000582a0: 6369 6669 6320 7469 6d65 2073 6c6f 7473  cific time slots
-000582b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000582c0: 7374 7220 636f 6465 3a20 756e 6966 6965  str code: unifie
-000582d0: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
-000582e0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-000582f0: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
-00058300: 696d 6573 7461 6d70 2066 6f72 2074 6865  imestamp for the
-00058310: 2065 6172 6c69 6573 7420 626f 7272 6f77   earliest borrow
-00058320: 2072 6174 650a 2020 2020 2020 2020 3a70   rate.        :p
-00058330: 6172 616d 2069 6e74 7c4e 6f6e 6520 6c69  aram int|None li
-00058340: 6d69 743a 2074 6865 206d 6178 696d 756d  mit: the maximum
-00058350: 206e 756d 6265 7220 6f66 2060 626f 7272   number of `borr
-00058360: 6f77 2072 6174 6520 7374 7275 6374 7572  ow rate structur
-00058370: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
-00058380: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-00058390: 626f 7272 6f77 2d72 6174 652d 7374 7275  borrow-rate-stru
-000583a0: 6374 7572 653e 6020 746f 2072 6574 7269  cture>` to retri
-000583b0: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
-000583c0: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-000583d0: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-000583e0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-000583f0: 2065 7863 6861 6e67 6520 6170 6920 656e   exchange api en
-00058400: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-00058410: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-00058420: 616e 2061 7272 6179 206f 6620 6062 6f72  an array of `bor
-00058430: 726f 7720 7261 7465 2073 7472 7563 7475  row rate structu
-00058440: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00058450: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00058460: 3d62 6f72 726f 772d 7261 7465 2d73 7472  =borrow-rate-str
-00058470: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00058480: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-00058490: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-000584a0: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
-000584b0: 7420 6973 204e 6f6e 653a 0a20 2020 2020  t is None:.     
-000584c0: 2020 2020 2020 206c 696d 6974 203d 2039         limit = 9
-000584d0: 330a 2020 2020 2020 2020 656c 6966 206c  3.        elif l
-000584e0: 696d 6974 203e 2039 333a 0a20 2020 2020  imit > 93:.     
-000584f0: 2020 2020 2020 2023 2042 696e 616e 6365         # Binance
-00058500: 2041 5049 2073 6179 7320 7468 6520 6c69   API says the li
-00058510: 6d69 7420 6973 2031 3030 2c20 6275 7420  mit is 100, but 
-00058520: 2249 6c6c 6567 616c 2063 6861 7261 6374  "Illegal charact
-00058530: 6572 7320 666f 756e 6420 696e 2061 2070  ers found in a p
-00058540: 6172 616d 6574 6572 2e22 2069 7320 7265  arameter." is re
-00058550: 7475 726e 6564 2077 6865 6e20 6c69 6d69  turned when limi
-00058560: 7420 6973 203e 2039 330a 2020 2020 2020  t is > 93.      
-00058570: 2020 2020 2020 7261 6973 6520 4261 6452        raise BadR
-00058580: 6571 7565 7374 2873 656c 662e 6964 202b  equest(self.id +
-00058590: 2027 2066 6574 6368 426f 7272 6f77 5261   ' fetchBorrowRa
-000585a0: 7465 4869 7374 6f72 7928 2920 6c69 6d69  teHistory() limi
-000585b0: 7420 7061 7261 6d65 7465 7220 6361 6e6e  t parameter cann
-000585c0: 6f74 2065 7863 6565 6420 3932 2729 0a20  ot exceed 92'). 
-000585d0: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
-000585e0: 3d20 7365 6c66 2e63 7572 7265 6e63 7928  = self.currency(
-000585f0: 636f 6465 290a 2020 2020 2020 2020 7265  code).        re
-00058600: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-00058610: 2020 2020 2020 2761 7373 6574 273a 2063        'asset': c
-00058620: 7572 7265 6e63 795b 2769 6427 5d2c 0a20  urrency['id'],. 
-00058630: 2020 2020 2020 2020 2020 2027 6c69 6d69             'limi
-00058640: 7427 3a20 6c69 6d69 742c 0a20 2020 2020  t': limit,.     
-00058650: 2020 207d 0a20 2020 2020 2020 2069 6620     }.        if 
-00058660: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
-00058670: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00058680: 6571 7565 7374 5b27 7374 6172 7454 696d  equest['startTim
-00058690: 6527 5d20 3d20 7369 6e63 650a 2020 2020  e'] = since.    
-000586a0: 2020 2020 2020 2020 656e 6454 696d 6520          endTime 
-000586b0: 3d20 7365 6c66 2e73 756d 2873 696e 6365  = self.sum(since
-000586c0: 2c20 6c69 6d69 7420 2a20 3836 3430 3030  , limit * 864000
-000586d0: 3030 2920 2d20 3120 2023 2072 6571 7569  00) - 1  # requi
-000586e0: 7265 6420 7768 656e 2073 7461 7274 5469  red when startTi
-000586f0: 6d65 2069 7320 6675 7274 6865 7220 7468  me is further th
-00058700: 616e 2039 3320 6461 7973 2069 6e20 7468  an 93 days in th
-00058710: 6520 7061 7374 0a20 2020 2020 2020 2020  e past.         
-00058720: 2020 206e 6f77 203d 2073 656c 662e 6d69     now = self.mi
-00058730: 6c6c 6973 6563 6f6e 6473 2829 0a20 2020  lliseconds().   
-00058740: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00058750: 5b27 656e 6454 696d 6527 5d20 3d20 6d69  ['endTime'] = mi
-00058760: 6e28 656e 6454 696d 652c 206e 6f77 2920  n(endTime, now) 
-00058770: 2023 2063 616e 6e6f 7420 6861 7665 2061   # cannot have a
-00058780: 6e20 656e 6454 696d 6520 6c61 7465 7220  n endTime later 
-00058790: 7468 616e 2063 7572 7265 6e74 2074 696d  than current tim
-000587a0: 650a 2020 2020 2020 2020 7265 7370 6f6e  e.        respon
-000587b0: 7365 203d 2073 656c 662e 7361 7069 4765  se = self.sapiGe
-000587c0: 744d 6172 6769 6e49 6e74 6572 6573 7452  tMarginInterestR
-000587d0: 6174 6548 6973 746f 7279 2873 656c 662e  ateHistory(self.
-000587e0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-000587f0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-00058800: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-00058810: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-00058820: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00058830: 2020 2020 2020 2020 2020 2020 2022 6173               "as
-00058840: 7365 7422 3a20 2255 5344 5422 2c0a 2020  set": "USDT",.  
-00058850: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00058860: 2020 2020 2274 696d 6573 7461 6d70 223a      "timestamp":
-00058870: 2031 3633 3832 3330 3430 3030 3030 2c0a   1638230400000,.
-00058880: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00058890: 2020 2020 2020 2264 6169 6c79 496e 7465        "dailyInte
-000588a0: 7265 7374 5261 7465 223a 2022 302e 3030  restRate": "0.00
-000588b0: 3036 222c 0a20 2020 2020 2020 2023 2020  06",.        #  
-000588c0: 2020 2020 2020 2020 2020 2022 7669 704c             "vipL
-000588d0: 6576 656c 223a 2030 0a20 2020 2020 2020  evel": 0.       
-000588e0: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
-000588f0: 2020 2020 2020 2320 2020 2020 5d0a 2020        #     ].  
-00058900: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00058910: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00058920: 655f 626f 7272 6f77 5f72 6174 655f 6869  e_borrow_rate_hi
-00058930: 7374 6f72 7928 7265 7370 6f6e 7365 2c20  story(response, 
-00058940: 636f 6465 2c20 7369 6e63 652c 206c 696d  code, since, lim
-00058950: 6974 290a 0a20 2020 2064 6566 2070 6172  it)..    def par
-00058960: 7365 5f62 6f72 726f 775f 7261 7465 5f68  se_borrow_rate_h
-00058970: 6973 746f 7279 2873 656c 662c 2072 6573  istory(self, res
-00058980: 706f 6e73 652c 2063 6f64 652c 2073 696e  ponse, code, sin
-00058990: 6365 2c20 6c69 6d69 7429 3a0a 2020 2020  ce, limit):.    
-000589a0: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
-000589b0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000589c0: 2072 616e 6765 2830 2c20 6c65 6e28 7265   range(0, len(re
-000589d0: 7370 6f6e 7365 2929 3a0a 2020 2020 2020  sponse)):.      
-000589e0: 2020 2020 2020 6974 656d 203d 2072 6573        item = res
-000589f0: 706f 6e73 655b 695d 0a20 2020 2020 2020  ponse[i].       
-00058a00: 2020 2020 2062 6f72 726f 7752 6174 6520       borrowRate 
-00058a10: 3d20 7365 6c66 2e70 6172 7365 5f62 6f72  = self.parse_bor
-00058a20: 726f 775f 7261 7465 2869 7465 6d29 0a20  row_rate(item). 
-00058a30: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00058a40: 742e 6170 7065 6e64 2862 6f72 726f 7752  t.append(borrowR
-00058a50: 6174 6529 0a20 2020 2020 2020 2073 6f72  ate).        sor
-00058a60: 7465 6420 3d20 7365 6c66 2e73 6f72 745f  ted = self.sort_
-00058a70: 6279 2872 6573 756c 742c 2027 7469 6d65  by(result, 'time
-00058a80: 7374 616d 7027 290a 2020 2020 2020 2020  stamp').        
-00058a90: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
-00058aa0: 6572 5f62 795f 6375 7272 656e 6379 5f73  er_by_currency_s
-00058ab0: 696e 6365 5f6c 696d 6974 2873 6f72 7465  ince_limit(sorte
-00058ac0: 642c 2063 6f64 652c 2073 696e 6365 2c20  d, code, since, 
-00058ad0: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
-00058ae0: 7061 7273 655f 626f 7272 6f77 5f72 6174  parse_borrow_rat
-00058af0: 6528 7365 6c66 2c20 696e 666f 2c20 6375  e(self, info, cu
-00058b00: 7272 656e 6379 3d4e 6f6e 6529 3a0a 2020  rrency=None):.  
-00058b10: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00058b20: 2320 2020 207b 0a20 2020 2020 2020 2023  #    {.        #
-00058b30: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
-00058b40: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
-00058b50: 2023 2020 2020 2020 2020 2274 696d 6573   #        "times
-00058b60: 7461 6d70 223a 2031 3633 3832 3330 3430  tamp": 163823040
-00058b70: 3030 3030 2c0a 2020 2020 2020 2020 2320  0000,.        # 
-00058b80: 2020 2020 2020 2022 6461 696c 7949 6e74         "dailyInt
-00058b90: 6572 6573 7452 6174 6522 3a20 2230 2e30  erestRate": "0.0
-00058ba0: 3030 3622 2c0a 2020 2020 2020 2020 2320  006",.        # 
-00058bb0: 2020 2020 2020 2022 7669 704c 6576 656c         "vipLevel
-00058bc0: 223a 2030 0a20 2020 2020 2020 2023 2020  ": 0.        #  
-00058bd0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00058be0: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-00058bf0: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-00058c00: 6572 2869 6e66 6f2c 2027 7469 6d65 7374  er(info, 'timest
-00058c10: 616d 7027 290a 2020 2020 2020 2020 6375  amp').        cu
-00058c20: 7272 656e 6379 203d 2073 656c 662e 7361  rrency = self.sa
-00058c30: 6665 5f73 7472 696e 6728 696e 666f 2c20  fe_string(info, 
-00058c40: 2761 7373 6574 2729 0a20 2020 2020 2020  'asset').       
-00058c50: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
-00058c60: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
-00058c70: 3a20 7365 6c66 2e73 6166 655f 6375 7272  : self.safe_curr
-00058c80: 656e 6379 5f63 6f64 6528 6375 7272 656e  ency_code(curren
-00058c90: 6379 292c 0a20 2020 2020 2020 2020 2020  cy),.           
-00058ca0: 2027 7261 7465 273a 2073 656c 662e 7361   'rate': self.sa
-00058cb0: 6665 5f6e 756d 6265 7228 696e 666f 2c20  fe_number(info, 
-00058cc0: 2764 6169 6c79 496e 7465 7265 7374 5261  'dailyInterestRa
-00058cd0: 7465 2729 2c0a 2020 2020 2020 2020 2020  te'),.          
-00058ce0: 2020 2770 6572 696f 6427 3a20 3836 3430    'period': 8640
-00058cf0: 3030 3030 2c0a 2020 2020 2020 2020 2020  0000,.          
-00058d00: 2020 2774 696d 6573 7461 6d70 273a 2074    'timestamp': t
-00058d10: 696d 6573 7461 6d70 2c0a 2020 2020 2020  imestamp,.      
-00058d20: 2020 2020 2020 2764 6174 6574 696d 6527        'datetime'
-00058d30: 3a20 7365 6c66 2e69 736f 3836 3031 2874  : self.iso8601(t
-00058d40: 696d 6573 7461 6d70 292c 0a20 2020 2020  imestamp),.     
-00058d50: 2020 2020 2020 2027 696e 666f 273a 2069         'info': i
-00058d60: 6e66 6f2c 0a20 2020 2020 2020 207d 0a0a  nfo,.        }..
-00058d70: 2020 2020 6465 6620 6372 6561 7465 5f67      def create_g
-00058d80: 6966 745f 636f 6465 2873 656c 662c 2063  ift_code(self, c
-00058d90: 6f64 653a 2073 7472 2c20 616d 6f75 6e74  ode: str, amount
-00058da0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00058db0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00058dc0: 2020 6372 6561 7465 2067 6966 7420 636f    create gift co
-00058dd0: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
-00058de0: 6d20 7374 7220 636f 6465 3a20 6769 6674  m str code: gift
-00058df0: 2063 6f64 650a 2020 2020 2020 2020 3a70   code.        :p
-00058e00: 6172 616d 2066 6c6f 6174 2061 6d6f 756e  aram float amoun
-00058e10: 743a 2061 6d6f 756e 7420 6f66 2063 7572  t: amount of cur
-00058e20: 7265 6e63 7920 666f 7220 7468 6520 6769  rency for the gi
-00058e30: 6674 0a20 2020 2020 2020 203a 7061 7261  ft.        :para
-00058e40: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-00058e50: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-00058e60: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-00058e70: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
-00058e80: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-00058e90: 7475 726e 7320 6469 6374 3a20 5468 6520  turns dict: The 
-00058ea0: 6769 6674 2063 6f64 6520 6964 2c20 636f  gift code id, co
-00058eb0: 6465 2c20 6375 7272 656e 6379 2061 6e64  de, currency and
-00058ec0: 2061 6d6f 756e 740a 2020 2020 2020 2020   amount.        
-00058ed0: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00058ee0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00058ef0: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-00058f00: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
-00058f10: 2863 6f64 6529 0a20 2020 2020 2020 2023  (code).        #
-00058f20: 2065 6e73 7572 6520 796f 7520 6861 7665   ensure you have
-00058f30: 2065 6e6f 7567 6820 746f 6b65 6e20 696e   enough token in
-00058f40: 2079 6f75 7220 6675 6e64 696e 6720 6163   your funding ac
-00058f50: 636f 756e 7420 6265 666f 7265 2063 616c  count before cal
-00058f60: 6c69 6e67 2073 656c 6620 636f 6465 0a20  ling self code. 
-00058f70: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-00058f80: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00058f90: 746f 6b65 6e27 3a20 6375 7272 656e 6379  token': currency
-00058fa0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00058fb0: 2020 2020 2761 6d6f 756e 7427 3a20 616d      'amount': am
-00058fc0: 6f75 6e74 2c0a 2020 2020 2020 2020 7d0a  ount,.        }.
-00058fd0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00058fe0: 203d 2073 656c 662e 7361 7069 506f 7374   = self.sapiPost
-00058ff0: 4769 6674 6361 7264 4372 6561 7465 436f  GiftcardCreateCo
-00059000: 6465 2873 656c 662e 6578 7465 6e64 2872  de(self.extend(r
-00059010: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-00059020: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00059030: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-00059040: 2020 2023 2020 2020 2020 2020 2063 6f64     #         cod
-00059050: 653a 2027 3030 3030 3030 272c 0a20 2020  e: '000000',.   
-00059060: 2020 2020 2023 2020 2020 2020 2020 206d       #         m
-00059070: 6573 7361 6765 3a20 2773 7563 6365 7373  essage: 'success
-00059080: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00059090: 2020 2020 2064 6174 613a 207b 7265 6665       data: {refe
-000590a0: 7265 6e63 654e 6f3a 2027 3030 3333 3030  renceNo: '003300
-000590b0: 3234 3034 3231 3938 3233 272c 2063 6f64  2404219823', cod
-000590c0: 653a 2027 4150 3645 5854 4c4b 4e48 4d36  e: 'AP6EXTLKNHM6
-000590d0: 4345 5837 277d 2c0a 2020 2020 2020 2020  CEX7'},.        
-000590e0: 2320 2020 2020 2020 2020 7375 6363 6573  #         succes
-000590f0: 733a 2054 7275 650a 2020 2020 2020 2020  s: True.        
-00059100: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-00059110: 230a 2020 2020 2020 2020 6461 7461 203d  #.        data =
-00059120: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00059130: 2872 6573 706f 6e73 652c 2027 6461 7461  (response, 'data
-00059140: 2729 0a20 2020 2020 2020 2067 6966 7463  ').        giftc
-00059150: 6172 6443 6f64 6520 3d20 7365 6c66 2e73  ardCode = self.s
-00059160: 6166 655f 7374 7269 6e67 2864 6174 612c  afe_string(data,
-00059170: 2027 636f 6465 2729 0a20 2020 2020 2020   'code').       
-00059180: 2069 6420 3d20 7365 6c66 2e73 6166 655f   id = self.safe_
-00059190: 7374 7269 6e67 2864 6174 612c 2027 7265  string(data, 're
-000591a0: 6665 7265 6e63 654e 6f27 290a 2020 2020  ferenceNo').    
-000591b0: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
-000591c0: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-000591d0: 2072 6573 706f 6e73 652c 0a20 2020 2020   response,.     
-000591e0: 2020 2020 2020 2027 6964 273a 2069 642c         'id': id,
-000591f0: 0a20 2020 2020 2020 2020 2020 2027 636f  .            'co
-00059200: 6465 273a 2067 6966 7463 6172 6443 6f64  de': giftcardCod
-00059210: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00059220: 6375 7272 656e 6379 273a 2063 6f64 652c  currency': code,
-00059230: 0a20 2020 2020 2020 2020 2020 2027 616d  .            'am
-00059240: 6f75 6e74 273a 2061 6d6f 756e 742c 0a20  ount': amount,. 
-00059250: 2020 2020 2020 207d 0a0a 2020 2020 6465         }..    de
-00059260: 6620 7265 6465 656d 5f67 6966 745f 636f  f redeem_gift_co
-00059270: 6465 2873 656c 662c 2067 6966 7463 6172  de(self, giftcar
-00059280: 6443 6f64 652c 2070 6172 616d 733d 7b7d  dCode, params={}
-00059290: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-000592a0: 2020 2020 2020 2072 6564 6565 6d20 6769         redeem gi
-000592b0: 6674 2063 6f64 650a 2020 2020 2020 2020  ft code.        
-000592c0: 3a70 6172 616d 2073 7472 2067 6966 7463  :param str giftc
-000592d0: 6172 6443 6f64 653a 0a20 2020 2020 2020  ardCode:.       
-000592e0: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-000592f0: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00059300: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00059310: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
-00059320: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00059330: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-00059340: 3a20 7265 7370 6f6e 7365 2066 726f 6d20  : response from 
-00059350: 7468 6520 6578 6368 616e 6765 0a20 2020  the exchange.   
-00059360: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00059370: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-00059380: 2020 2020 2020 2020 2027 636f 6465 273a           'code':
-00059390: 2067 6966 7463 6172 6443 6f64 652c 0a20   giftcardCode,. 
-000593a0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-000593b0: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-000593c0: 2e73 6170 6950 6f73 7447 6966 7463 6172  .sapiPostGiftcar
-000593d0: 6452 6564 6565 6d43 6f64 6528 7365 6c66  dRedeemCode(self
-000593e0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-000593f0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
-00059400: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00059410: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00059420: 2020 2020 2020 636f 6465 3a20 2730 3030        code: '000
-00059430: 3030 3027 2c0a 2020 2020 2020 2020 2320  000',.        # 
-00059440: 2020 2020 2020 2020 6d65 7373 6167 653a          message:
-00059450: 2027 7375 6363 6573 7327 2c0a 2020 2020   'success',.    
-00059460: 2020 2020 2320 2020 2020 2020 2020 6461      #         da
-00059470: 7461 3a20 7b0a 2020 2020 2020 2020 2320  ta: {.        # 
-00059480: 2020 2020 2020 2020 2020 2020 7265 6665              refe
-00059490: 7265 6e63 654e 6f3a 2027 3030 3333 3030  renceNo: '003300
-000594a0: 3234 3034 3231 3938 3233 272c 0a20 2020  2404219823',.   
-000594b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000594c0: 2020 2069 6465 6e74 6974 794e 6f3a 2027     identityNo: '
-000594d0: 3130 3331 3634 3331 3733 3238 3031 3437  1031643173280147
-000594e0: 3435 3630 270a 2020 2020 2020 2020 2320  4560'.        # 
-000594f0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-00059500: 2020 2023 2020 2020 2020 2020 2073 7563     #         suc
-00059510: 6365 7373 3a20 5472 7565 0a20 2020 2020  cess: True.     
-00059520: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00059530: 2020 2023 0a20 2020 2020 2020 2072 6574     #.        ret
-00059540: 7572 6e20 7265 7370 6f6e 7365 0a0a 2020  urn response..  
-00059550: 2020 6465 6620 7665 7269 6679 5f67 6966    def verify_gif
-00059560: 745f 636f 6465 2873 656c 662c 2069 643a  t_code(self, id:
-00059570: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-00059580: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00059590: 2020 2020 2020 7665 7269 6679 2067 6966        verify gif
-000595a0: 7420 636f 6465 0a20 2020 2020 2020 203a  t code.        :
-000595b0: 7061 7261 6d20 7374 7220 6964 3a20 7265  param str id: re
-000595c0: 6665 7265 6e63 6520 6e75 6d62 6572 2069  ference number i
-000595d0: 640a 2020 2020 2020 2020 3a70 6172 616d  d.        :param
-000595e0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-000595f0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00059600: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-00059610: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
-00059620: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-00059630: 7572 6e73 2064 6963 743a 2072 6573 706f  urns dict: respo
-00059640: 6e73 6520 6672 6f6d 2074 6865 2065 7863  nse from the exc
-00059650: 6861 6e67 650a 2020 2020 2020 2020 2222  hange.        ""
-00059660: 220a 2020 2020 2020 2020 7265 7175 6573  ".        reques
-00059670: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-00059680: 2020 2772 6566 6572 656e 6365 4e6f 273a    'referenceNo':
-00059690: 2069 642c 0a20 2020 2020 2020 207d 0a20   id,.        }. 
-000596a0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000596b0: 3d20 7365 6c66 2e73 6170 6947 6574 4769  = self.sapiGetGi
-000596c0: 6674 6361 7264 5665 7269 6679 2873 656c  ftcardVerify(sel
-000596d0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-000596e0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-000596f0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-00059700: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00059710: 2020 2020 2020 2063 6f64 653a 2027 3030         code: '00
-00059720: 3030 3030 272c 0a20 2020 2020 2020 2023  0000',.        #
-00059730: 2020 2020 2020 2020 206d 6573 7361 6765           message
-00059740: 3a20 2773 7563 6365 7373 272c 0a20 2020  : 'success',.   
-00059750: 2020 2020 2023 2020 2020 2020 2020 2064       #         d
-00059760: 6174 613a 207b 7661 6c69 643a 2054 7275  ata: {valid: Tru
-00059770: 657d 2c0a 2020 2020 2020 2020 2320 2020  e},.        #   
-00059780: 2020 2020 2020 7375 6363 6573 733a 2054        success: T
-00059790: 7275 650a 2020 2020 2020 2020 2320 2020  rue.        #   
-000597a0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-000597b0: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-000597c0: 706f 6e73 650a 0a20 2020 2064 6566 2066  ponse..    def f
-000597d0: 6574 6368 5f62 6f72 726f 775f 696e 7465  etch_borrow_inte
-000597e0: 7265 7374 2873 656c 662c 2063 6f64 653a  rest(self, code:
-000597f0: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00059800: 204e 6f6e 652c 2073 796d 626f 6c3a 204f   None, symbol: O
-00059810: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00059820: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
-00059830: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-00059840: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
-00059850: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
-00059860: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-00059870: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-00059880: 6574 6368 2074 6865 2069 6e74 6572 6573  etch the interes
-00059890: 7420 6f77 6564 2062 7920 7468 6520 7573  t owed by the us
-000598a0: 6572 2066 6f72 2062 6f72 726f 7769 6e67  er for borrowing
-000598b0: 2063 7572 7265 6e63 7920 666f 7220 6d61   currency for ma
-000598c0: 7267 696e 2074 7261 6469 6e67 0a20 2020  rgin trading.   
-000598d0: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
-000598e0: 4e6f 6e65 2063 6f64 653a 2075 6e69 6669  None code: unifi
-000598f0: 6564 2063 7572 7265 6e63 7920 636f 6465  ed currency code
-00059900: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00059910: 7374 727c 4e6f 6e65 2073 796d 626f 6c3a  str|None symbol:
-00059920: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-00059930: 7379 6d62 6f6c 2077 6865 6e20 6665 7463  symbol when fetc
-00059940: 6820 696e 7465 7265 7374 2069 6e20 6973  h interest in is
-00059950: 6f6c 6174 6564 206d 6172 6b65 7473 0a20  olated markets. 
-00059960: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00059970: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
-00059980: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
-00059990: 696e 206d 7320 746f 2066 6574 6368 2062  in ms to fetch b
-000599a0: 6f72 7272 6f77 2069 6e74 6572 6573 7420  orrrow interest 
-000599b0: 666f 720a 2020 2020 2020 2020 3a70 6172  for.        :par
-000599c0: 616d 2069 6e74 7c4e 6f6e 6520 6c69 6d69  am int|None limi
-000599d0: 743a 2074 6865 206d 6178 696d 756d 206e  t: the maximum n
-000599e0: 756d 6265 7220 6f66 2073 7472 7563 7475  umber of structu
-000599f0: 7265 7320 746f 2072 6574 7269 6576 650a  res to retrieve.
-00059a00: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-00059a10: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-00059a20: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-00059a30: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
-00059a40: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
-00059a50: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-00059a60: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
-00059a70: 7420 6f66 2060 626f 7272 6f77 2069 6e74  t of `borrow int
-00059a80: 6572 6573 7420 7374 7275 6374 7572 6573  erest structures
-00059a90: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00059aa0: 6378 742e 636f 6d2f 232f 3f69 643d 626f  cxt.com/#/?id=bo
-00059ab0: 7272 6f77 2d69 6e74 6572 6573 742d 7374  rrow-interest-st
-00059ac0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-00059ad0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-00059ae0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-00059af0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-00059b00: 7420 3d20 7b7d 0a20 2020 2020 2020 206d  t = {}.        m
-00059b10: 6172 6b65 7420 3d20 4e6f 6e65 0a20 2020  arket = None.   
-00059b20: 2020 2020 2069 6620 636f 6465 2069 7320       if code is 
-00059b30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00059b40: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
-00059b50: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
-00059b60: 6f64 6529 0a20 2020 2020 2020 2020 2020  ode).           
-00059b70: 2072 6571 7565 7374 5b27 6173 7365 7427   request['asset'
-00059b80: 5d20 3d20 6375 7272 656e 6379 5b27 6964  ] = currency['id
-00059b90: 275d 0a20 2020 2020 2020 2069 6620 7369  '].        if si
-00059ba0: 6e63 6520 6973 206e 6f74 204e 6f6e 653a  nce is not None:
-00059bb0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00059bc0: 7565 7374 5b27 7374 6172 7454 696d 6527  uest['startTime'
-00059bd0: 5d20 3d20 7369 6e63 650a 2020 2020 2020  ] = since.      
-00059be0: 2020 6966 206c 696d 6974 2069 7320 6e6f    if limit is no
-00059bf0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00059c00: 2020 2020 7265 7175 6573 745b 2773 697a      request['siz
-00059c10: 6527 5d20 3d20 6c69 6d69 740a 2020 2020  e'] = limit.    
-00059c20: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
-00059c30: 206e 6f74 204e 6f6e 653a 2020 2320 4973   not None:  # Is
-00059c40: 6f6c 6174 6564 0a20 2020 2020 2020 2020  olated.         
-00059c50: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00059c60: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00059c70: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00059c80: 6573 745b 2769 736f 6c61 7465 6453 796d  est['isolatedSym
-00059c90: 626f 6c27 5d20 3d20 6d61 726b 6574 5b27  bol'] = market['
-00059ca0: 6964 275d 0a20 2020 2020 2020 2072 6573  id'].        res
-00059cb0: 706f 6e73 6520 3d20 7365 6c66 2e73 6170  ponse = self.sap
-00059cc0: 6947 6574 4d61 7267 696e 496e 7465 7265  iGetMarginIntere
-00059cd0: 7374 4869 7374 6f72 7928 7365 6c66 2e65  stHistory(self.e
-00059ce0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00059cf0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00059d00: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00059d10: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00059d20: 2020 2020 2272 6f77 7322 3a5b 0a20 2020      "rows":[.   
-00059d30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00059d40: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00059d50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00059d60: 6973 6f6c 6174 6564 5379 6d62 6f6c 223a  isolatedSymbol":
-00059d70: 2022 424e 4255 5344 5422 2c20 2023 2069   "BNBUSDT",  # i
-00059d80: 736f 6c61 7465 6420 7379 6d62 6f6c 2c20  solated symbol, 
-00059d90: 7769 6c6c 206e 6f74 2062 6520 7265 7475  will not be retu
-00059da0: 726e 6564 2066 6f72 2063 726f 7373 6564  rned for crossed
-00059db0: 206d 6172 6769 6e0a 2020 2020 2020 2020   margin.        
-00059dc0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00059dd0: 2020 2261 7373 6574 223a 2022 424e 4222    "asset": "BNB"
-00059de0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00059df0: 2020 2020 2020 2020 2020 2020 2269 6e74              "int
-00059e00: 6572 6573 7422 3a20 2230 2e30 3234 3134  erest": "0.02414
-00059e10: 3636 3722 2c0a 2020 2020 2020 2020 2320  667",.        # 
-00059e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00059e30: 2269 6e74 6572 6573 7441 6363 7572 6564  "interestAccured
-00059e40: 5469 6d65 223a 2031 3536 3638 3133 3630  Time": 156681360
-00059e50: 3030 3030 2c0a 2020 2020 2020 2020 2320  0000,.        # 
-00059e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00059e70: 2269 6e74 6572 6573 7452 6174 6522 3a20  "interestRate": 
-00059e80: 2230 2e30 3136 3030 3030 3022 2c0a 2020  "0.01600000",.  
-00059e90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059ea0: 2020 2020 2020 2020 2270 7269 6e63 6970          "princip
-00059eb0: 616c 223a 2022 3336 2e32 3230 3030 3030  al": "36.2200000
-00059ec0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00059ed0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00059ee0: 7970 6522 3a20 224f 4e5f 424f 5252 4f57  ype": "ON_BORROW
-00059ef0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00059f00: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00059f10: 2020 2320 2020 2020 2020 2020 5d2c 0a20    #         ],. 
-00059f20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00059f30: 2022 746f 7461 6c22 3a20 310a 2020 2020   "total": 1.    
-00059f40: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-00059f50: 2020 2020 230a 2020 2020 2020 2020 726f      #.        ro
-00059f60: 7773 203d 2073 656c 662e 7361 6665 5f76  ws = self.safe_v
-00059f70: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-00059f80: 726f 7773 2729 0a20 2020 2020 2020 2069  rows').        i
-00059f90: 6e74 6572 6573 7420 3d20 7365 6c66 2e70  nterest = self.p
-00059fa0: 6172 7365 5f62 6f72 726f 775f 696e 7465  arse_borrow_inte
-00059fb0: 7265 7374 7328 726f 7773 2c20 6d61 726b  rests(rows, mark
-00059fc0: 6574 290a 2020 2020 2020 2020 7265 7475  et).        retu
-00059fd0: 726e 2073 656c 662e 6669 6c74 6572 5f62  rn self.filter_b
-00059fe0: 795f 6375 7272 656e 6379 5f73 696e 6365  y_currency_since
-00059ff0: 5f6c 696d 6974 2869 6e74 6572 6573 742c  _limit(interest,
-0005a000: 2063 6f64 652c 2073 696e 6365 2c20 6c69   code, since, li
-0005a010: 6d69 7429 0a0a 2020 2020 6465 6620 7061  mit)..    def pa
-0005a020: 7273 655f 626f 7272 6f77 5f69 6e74 6572  rse_borrow_inter
-0005a030: 6573 7428 7365 6c66 2c20 696e 666f 2c20  est(self, info, 
-0005a040: 6d61 726b 6574 3d4e 6f6e 6529 3a0a 2020  market=None):.  
-0005a050: 2020 2020 2020 7379 6d62 6f6c 203d 2073        symbol = s
-0005a060: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0005a070: 696e 666f 2c20 2769 736f 6c61 7465 6453  info, 'isolatedS
-0005a080: 796d 626f 6c27 290a 2020 2020 2020 2020  ymbol').        
-0005a090: 7469 6d65 7374 616d 7020 3d20 7365 6c66  timestamp = self
-0005a0a0: 2e73 6166 655f 6e75 6d62 6572 2869 6e66  .safe_number(inf
-0005a0b0: 6f2c 2027 696e 7465 7265 7374 4163 6375  o, 'interestAccu
-0005a0c0: 7265 6454 696d 6527 290a 2020 2020 2020  redTime').      
-0005a0d0: 2020 6d61 7267 696e 4d6f 6465 203d 2027    marginMode = '
-0005a0e0: 6372 6f73 7327 2069 6620 2873 796d 626f  cross' if (symbo
-0005a0f0: 6c20 6973 204e 6f6e 6529 2065 6c73 6520  l is None) else 
-0005a100: 2769 736f 6c61 7465 6427 0a20 2020 2020  'isolated'.     
-0005a110: 2020 2072 6574 7572 6e20 7b0a 2020 2020     return {.    
-0005a120: 2020 2020 2020 2020 2761 6363 6f75 6e74          'account
-0005a130: 273a 2027 6372 6f73 7327 2069 6620 2873  ': 'cross' if (s
-0005a140: 796d 626f 6c20 6973 204e 6f6e 6529 2065  ymbol is None) e
-0005a150: 6c73 6520 7379 6d62 6f6c 2c0a 2020 2020  lse symbol,.    
-0005a160: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-0005a170: 3a20 7379 6d62 6f6c 2c0a 2020 2020 2020  : symbol,.      
-0005a180: 2020 2020 2020 276d 6172 6769 6e4d 6f64        'marginMod
-0005a190: 6527 3a20 6d61 7267 696e 4d6f 6465 2c0a  e': marginMode,.
-0005a1a0: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
-0005a1b0: 7265 6e63 7927 3a20 7365 6c66 2e73 6166  rency': self.saf
-0005a1c0: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
-0005a1d0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0005a1e0: 2869 6e66 6f2c 2027 6173 7365 7427 2929  (info, 'asset'))
-0005a1f0: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-0005a200: 6e74 6572 6573 7427 3a20 7365 6c66 2e73  nterest': self.s
-0005a210: 6166 655f 6e75 6d62 6572 2869 6e66 6f2c  afe_number(info,
-0005a220: 2027 696e 7465 7265 7374 2729 2c0a 2020   'interest'),.  
-0005a230: 2020 2020 2020 2020 2020 2769 6e74 6572            'inter
-0005a240: 6573 7452 6174 6527 3a20 7365 6c66 2e73  estRate': self.s
-0005a250: 6166 655f 6e75 6d62 6572 2869 6e66 6f2c  afe_number(info,
-0005a260: 2027 696e 7465 7265 7374 5261 7465 2729   'interestRate')
-0005a270: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-0005a280: 6d6f 756e 7442 6f72 726f 7765 6427 3a20  mountBorrowed': 
-0005a290: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0005a2a0: 2869 6e66 6f2c 2027 7072 696e 6369 7061  (info, 'principa
-0005a2b0: 6c27 292c 0a20 2020 2020 2020 2020 2020  l'),.           
-0005a2c0: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
-0005a2d0: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-0005a2e0: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-0005a2f0: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-0005a300: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-0005a310: 2020 2020 2020 2769 6e66 6f27 3a20 696e        'info': in
-0005a320: 666f 2c0a 2020 2020 2020 2020 7d0a 0a20  fo,.        }.. 
-0005a330: 2020 2064 6566 2072 6570 6179 5f6d 6172     def repay_mar
-0005a340: 6769 6e28 7365 6c66 2c20 636f 6465 3a20  gin(self, code: 
-0005a350: 7374 722c 2061 6d6f 756e 742c 2073 796d  str, amount, sym
-0005a360: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-0005a370: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
-0005a380: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0005a390: 2222 0a20 2020 2020 2020 2072 6570 6179  "".        repay
-0005a3a0: 2062 6f72 726f 7765 6420 6d61 7267 696e   borrowed margin
-0005a3b0: 2061 6e64 2069 6e74 6572 6573 740a 2020   and interest.  
-0005a3c0: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
-0005a3d0: 2f2f 6269 6e61 6e63 652d 646f 6373 2e67  //binance-docs.g
-0005a3e0: 6974 6875 622e 696f 2f61 7069 646f 6373  ithub.io/apidocs
-0005a3f0: 2f73 706f 742f 656e 2f23 6d61 7267 696e  /spot/en/#margin
-0005a400: 2d61 6363 6f75 6e74 2d72 6570 6179 2d6d  -account-repay-m
-0005a410: 6172 6769 6e0a 2020 2020 2020 2020 3a70  argin.        :p
-0005a420: 6172 616d 2073 7472 2063 6f64 653a 2075  aram str code: u
-0005a430: 6e69 6669 6564 2063 7572 7265 6e63 7920  nified currency 
-0005a440: 636f 6465 206f 6620 7468 6520 6375 7272  code of the curr
-0005a450: 656e 6379 2074 6f20 7265 7061 790a 2020  ency to repay.  
-0005a460: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
-0005a470: 6174 2061 6d6f 756e 743a 2074 6865 2061  at amount: the a
-0005a480: 6d6f 756e 7420 746f 2072 6570 6179 0a20  mount to repay. 
-0005a490: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0005a4a0: 727c 4e6f 6e65 2073 796d 626f 6c3a 2075  r|None symbol: u
-0005a4b0: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
-0005a4c0: 6d62 6f6c 2c20 7265 7175 6972 6564 2066  mbol, required f
-0005a4d0: 6f72 2069 736f 6c61 7465 6420 6d61 7267  or isolated marg
-0005a4e0: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-0005a4f0: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-0005a500: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-0005a510: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-0005a520: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
-0005a530: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-0005a540: 7475 726e 7320 6469 6374 3a20 6120 606d  turns dict: a `m
-0005a550: 6172 6769 6e20 6c6f 616e 2073 7472 7563  argin loan struc
-0005a560: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-0005a570: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-0005a580: 643d 6d61 7267 696e 2d6c 6f61 6e2d 7374  d=margin-loan-st
-0005a590: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-0005a5a0: 2020 2222 220a 2020 2020 2020 2020 6d61    """.        ma
-0005a5b0: 7267 696e 4d6f 6465 2c20 7175 6572 7920  rginMode, query 
-0005a5c0: 3d20 7365 6c66 2e68 616e 646c 655f 6d61  = self.handle_ma
-0005a5d0: 7267 696e 5f6d 6f64 655f 616e 645f 7061  rgin_mode_and_pa
-0005a5e0: 7261 6d73 2827 7265 7061 794d 6172 6769  rams('repayMargi
-0005a5f0: 6e27 2c20 7061 7261 6d73 2920 2023 2063  n', params)  # c
-0005a600: 726f 7373 206f 7220 6973 6f6c 6174 6564  ross or isolated
-0005a610: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
-0005a620: 6563 6b5f 7265 7175 6972 6564 5f6d 6172  eck_required_mar
-0005a630: 6769 6e5f 6172 6775 6d65 6e74 2827 7265  gin_argument('re
-0005a640: 7061 794d 6172 6769 6e27 2c20 7379 6d62  payMargin', symb
-0005a650: 6f6c 2c20 6d61 7267 696e 4d6f 6465 290a  ol, marginMode).
-0005a660: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0005a670: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0005a680: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
-0005a690: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
-0005a6a0: 6529 0a20 2020 2020 2020 2072 6571 7565  e).        reque
-0005a6b0: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
-0005a6c0: 2020 2027 6173 7365 7427 3a20 6375 7272     'asset': curr
-0005a6d0: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
-0005a6e0: 2020 2020 2020 2020 2761 6d6f 756e 7427          'amount'
-0005a6f0: 3a20 7365 6c66 2e63 7572 7265 6e63 795f  : self.currency_
-0005a700: 746f 5f70 7265 6369 7369 6f6e 2863 6f64  to_precision(cod
-0005a710: 652c 2061 6d6f 756e 7429 2c0a 2020 2020  e, amount),.    
-0005a720: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
-0005a730: 2073 796d 626f 6c20 6973 206e 6f74 204e   symbol is not N
-0005a740: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0005a750: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-0005a760: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-0005a770: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0005a780: 745b 2773 796d 626f 6c27 5d20 3d20 6d61  t['symbol'] = ma
-0005a790: 726b 6574 5b27 6964 275d 0a20 2020 2020  rket['id'].     
-0005a7a0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0005a7b0: 6973 4973 6f6c 6174 6564 275d 203d 2027  isIsolated'] = '
-0005a7c0: 5452 5545 270a 2020 2020 2020 2020 7265  TRUE'.        re
-0005a7d0: 7370 6f6e 7365 203d 2073 656c 662e 7361  sponse = self.sa
-0005a7e0: 7069 506f 7374 4d61 7267 696e 5265 7061  piPostMarginRepa
-0005a7f0: 7928 7365 6c66 2e65 7874 656e 6428 7265  y(self.extend(re
-0005a800: 7175 6573 742c 2071 7565 7279 2929 0a20  quest, query)). 
-0005a810: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005a820: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0005a830: 2023 2020 2020 2020 2020 2022 7472 616e   #         "tran
-0005a840: 4964 223a 2031 3038 3938 3832 3530 3236  Id": 10898825026
-0005a850: 352c 0a20 2020 2020 2020 2023 2020 2020  5,.        #    
-0005a860: 2020 2020 2022 636c 6965 6e74 5461 6722       "clientTag"
-0005a870: 3a22 220a 2020 2020 2020 2020 2320 2020  :"".        #   
-0005a880: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0005a890: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0005a8a0: 662e 7061 7273 655f 6d61 7267 696e 5f6c  f.parse_margin_l
-0005a8b0: 6f61 6e28 7265 7370 6f6e 7365 2c20 6375  oan(response, cu
-0005a8c0: 7272 656e 6379 290a 0a20 2020 2064 6566  rrency)..    def
-0005a8d0: 2062 6f72 726f 775f 6d61 7267 696e 2873   borrow_margin(s
-0005a8e0: 656c 662c 2063 6f64 653a 2073 7472 2c20  elf, code: str, 
-0005a8f0: 616d 6f75 6e74 2c20 7379 6d62 6f6c 3a20  amount, symbol: 
-0005a900: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-0005a910: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-0005a920: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0005a930: 2020 2020 2020 6372 6561 7465 2061 206c        create a l
-0005a940: 6f61 6e20 746f 2062 6f72 726f 7720 6d61  oan to borrow ma
-0005a950: 7267 696e 0a20 2020 2020 2020 2073 6565  rgin.        see
-0005a960: 2068 7474 7073 3a2f 2f62 696e 616e 6365   https://binance
-0005a970: 2d64 6f63 732e 6769 7468 7562 2e69 6f2f  -docs.github.io/
-0005a980: 6170 6964 6f63 732f 7370 6f74 2f65 6e2f  apidocs/spot/en/
-0005a990: 236d 6172 6769 6e2d 6163 636f 756e 742d  #margin-account-
-0005a9a0: 626f 7272 6f77 2d6d 6172 6769 6e0a 2020  borrow-margin.  
-0005a9b0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-0005a9c0: 2063 6f64 653a 2075 6e69 6669 6564 2063   code: unified c
-0005a9d0: 7572 7265 6e63 7920 636f 6465 206f 6620  urrency code of 
-0005a9e0: 7468 6520 6375 7272 656e 6379 2074 6f20  the currency to 
-0005a9f0: 626f 7272 6f77 0a20 2020 2020 2020 203a  borrow.        :
-0005aa00: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
-0005aa10: 6e74 3a20 7468 6520 616d 6f75 6e74 2074  nt: the amount t
-0005aa20: 6f20 626f 7272 6f77 0a20 2020 2020 2020  o borrow.       
-0005aa30: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-0005aa40: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
-0005aa50: 206d 6172 6b65 7420 7379 6d62 6f6c 2c20   market symbol, 
-0005aa60: 7265 7175 6972 6564 2066 6f72 2069 736f  required for iso
-0005aa70: 6c61 7465 6420 6d61 7267 696e 0a20 2020  lated margin.   
-0005aa80: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-0005aa90: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-0005aaa0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-0005aab0: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
-0005aac0: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
-0005aad0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-0005aae0: 6469 6374 3a20 6120 606d 6172 6769 6e20  dict: a `margin 
-0005aaf0: 6c6f 616e 2073 7472 7563 7475 7265 203c  loan structure <
-0005ab00: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-0005ab10: 742e 636f 6d2f 232f 3f69 643d 6d61 7267  t.com/#/?id=marg
-0005ab20: 696e 2d6c 6f61 6e2d 7374 7275 6374 7572  in-loan-structur
-0005ab30: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-0005ab40: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
-0005ab50: 6465 2c20 7175 6572 7920 3d20 7365 6c66  de, query = self
-0005ab60: 2e68 616e 646c 655f 6d61 7267 696e 5f6d  .handle_margin_m
-0005ab70: 6f64 655f 616e 645f 7061 7261 6d73 2827  ode_and_params('
-0005ab80: 626f 7272 6f77 4d61 7267 696e 272c 2070  borrowMargin', p
-0005ab90: 6172 616d 7329 2020 2320 6372 6f73 7320  arams)  # cross 
-0005aba0: 6f72 2069 736f 6c61 7465 640a 2020 2020  or isolated.    
-0005abb0: 2020 2020 7365 6c66 2e63 6865 636b 5f72      self.check_r
-0005abc0: 6571 7569 7265 645f 6d61 7267 696e 5f61  equired_margin_a
-0005abd0: 7267 756d 656e 7428 2762 6f72 726f 774d  rgument('borrowM
-0005abe0: 6172 6769 6e27 2c20 7379 6d62 6f6c 2c20  argin', symbol, 
-0005abf0: 6d61 7267 696e 4d6f 6465 290a 2020 2020  marginMode).    
-0005ac00: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-0005ac10: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0005ac20: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-0005ac30: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
-0005ac40: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-0005ac50: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-0005ac60: 6173 7365 7427 3a20 6375 7272 656e 6379  asset': currency
-0005ac70: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-0005ac80: 2020 2020 2761 6d6f 756e 7427 3a20 7365      'amount': se
-0005ac90: 6c66 2e63 7572 7265 6e63 795f 746f 5f70  lf.currency_to_p
-0005aca0: 7265 6369 7369 6f6e 2863 6f64 652c 2061  recision(code, a
-0005acb0: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
-0005acc0: 7d0a 2020 2020 2020 2020 6966 2073 796d  }.        if sym
-0005acd0: 626f 6c20 6973 206e 6f74 204e 6f6e 653a  bol is not None:
-0005ace0: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
-0005acf0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-0005ad00: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
-0005ad10: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-0005ad20: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
-0005ad30: 5b27 6964 275d 0a20 2020 2020 2020 2020  ['id'].         
-0005ad40: 2020 2072 6571 7565 7374 5b27 6973 4973     request['isIs
-0005ad50: 6f6c 6174 6564 275d 203d 2027 5452 5545  olated'] = 'TRUE
-0005ad60: 270a 2020 2020 2020 2020 7265 7370 6f6e  '.        respon
-0005ad70: 7365 203d 2073 656c 662e 7361 7069 506f  se = self.sapiPo
-0005ad80: 7374 4d61 7267 696e 4c6f 616e 2873 656c  stMarginLoan(sel
-0005ad90: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-0005ada0: 2c20 7175 6572 7929 290a 2020 2020 2020  , query)).      
-0005adb0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0005adc0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0005add0: 2020 2020 2020 2274 7261 6e49 6422 3a20        "tranId": 
-0005ade0: 3130 3839 3838 3235 3032 3635 2c0a 2020  108988250265,.  
-0005adf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005ae00: 2263 6c69 656e 7454 6167 223a 2222 0a20  "clientTag":"". 
-0005ae10: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0005ae20: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005ae30: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0005ae40: 7365 5f6d 6172 6769 6e5f 6c6f 616e 2872  se_margin_loan(r
-0005ae50: 6573 706f 6e73 652c 2063 7572 7265 6e63  esponse, currenc
-0005ae60: 7929 0a0a 2020 2020 6465 6620 7061 7273  y)..    def pars
-0005ae70: 655f 6d61 7267 696e 5f6c 6f61 6e28 7365  e_margin_loan(se
-0005ae80: 6c66 2c20 696e 666f 2c20 6375 7272 656e  lf, info, curren
-0005ae90: 6379 3d4e 6f6e 6529 3a0a 2020 2020 2020  cy=None):.      
-0005aea0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0005aeb0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0005aec0: 2020 2020 2020 2274 7261 6e49 6422 3a20        "tranId": 
-0005aed0: 3130 3839 3838 3235 3032 3635 2c0a 2020  108988250265,.  
-0005aee0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005aef0: 2263 6c69 656e 7454 6167 223a 2222 0a20  "clientTag":"". 
-0005af00: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0005af10: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005af20: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
-0005af30: 2020 2020 2020 2769 6427 3a20 7365 6c66        'id': self
-0005af40: 2e73 6166 655f 696e 7465 6765 7228 696e  .safe_integer(in
-0005af50: 666f 2c20 2774 7261 6e49 6427 292c 0a20  fo, 'tranId'),. 
-0005af60: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-0005af70: 656e 6379 273a 2073 656c 662e 7361 6665  ency': self.safe
-0005af80: 5f63 7572 7265 6e63 795f 636f 6465 284e  _currency_code(N
-0005af90: 6f6e 652c 2063 7572 7265 6e63 7929 2c0a  one, currency),.
-0005afa0: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
-0005afb0: 756e 7427 3a20 4e6f 6e65 2c0a 2020 2020  unt': None,.    
-0005afc0: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-0005afd0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-0005afe0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
-0005aff0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-0005b000: 2020 2027 6461 7465 7469 6d65 273a 204e     'datetime': N
-0005b010: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-0005b020: 2027 696e 666f 273a 2069 6e66 6f2c 0a20   'info': info,. 
-0005b030: 2020 2020 2020 207d 0a0a 2020 2020 6465         }..    de
-0005b040: 6620 6665 7463 685f 6f70 656e 5f69 6e74  f fetch_open_int
-0005b050: 6572 6573 745f 6869 7374 6f72 7928 7365  erest_history(se
-0005b060: 6c66 2c20 7379 6d62 6f6c 3a20 7374 722c  lf, symbol: str,
-0005b070: 2074 696d 6566 7261 6d65 3d27 356d 272c   timeframe='5m',
-0005b080: 2073 696e 6365 3a20 4f70 7469 6f6e 616c   since: Optional
-0005b090: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 6c69  [int] = None, li
-0005b0a0: 6d69 743a 204f 7074 696f 6e61 6c5b 696e  mit: Optional[in
-0005b0b0: 745d 203d 204e 6f6e 652c 2070 6172 616d  t] = None, param
-0005b0c0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0005b0d0: 2222 0a20 2020 2020 2020 2052 6574 7269  "".        Retri
-0005b0e0: 6576 6573 2074 6865 206f 7065 6e20 696e  eves the open in
-0005b0f0: 7465 7265 7374 2068 6973 746f 7279 206f  terest history o
-0005b100: 6620 6120 6375 7272 656e 6379 0a20 2020  f a currency.   
-0005b110: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
-0005b120: 7379 6d62 6f6c 3a20 556e 6966 6965 6420  symbol: Unified 
-0005b130: 4343 5854 206d 6172 6b65 7420 7379 6d62  CCXT market symb
-0005b140: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
-0005b150: 6d20 7374 7220 7469 6d65 6672 616d 653a  m str timeframe:
-0005b160: 2022 356d 222c 2231 356d 222c 2233 306d   "5m","15m","30m
-0005b170: 222c 2231 6822 2c22 3268 222c 2234 6822  ","1h","2h","4h"
-0005b180: 2c22 3668 222c 2231 3268 222c 206f 7220  ,"6h","12h", or 
-0005b190: 2231 6422 0a20 2020 2020 2020 203a 7061  "1d".        :pa
-0005b1a0: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
-0005b1b0: 6365 3a20 7468 6520 7469 6d65 286d 7329  ce: the time(ms)
-0005b1c0: 206f 6620 7468 6520 6561 726c 6965 7374   of the earliest
-0005b1d0: 2072 6563 6f72 6420 746f 2072 6574 7269   record to retri
-0005b1e0: 6576 6520 756e 6978 2074 696d 6573 7461  eve unix timesta
-0005b1f0: 6d70 0a20 2020 2020 2020 203a 7061 7261  mp.        :para
-0005b200: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-0005b210: 3a20 6465 6661 756c 7420 3330 2c20 6d61  : default 30, ma
-0005b220: 7820 3530 300a 2020 2020 2020 2020 3a70  x 500.        :p
-0005b230: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
-0005b240: 3a20 6578 6368 616e 6765 2073 7065 6369  : exchange speci
-0005b250: 6669 6320 7061 7261 6d65 7465 7273 0a20  fic parameters. 
-0005b260: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-0005b270: 747c 4e6f 6e65 2070 6172 616d 735b 2775  t|None params['u
-0005b280: 6e74 696c 275d 3a20 7468 6520 7469 6d65  ntil']: the time
-0005b290: 286d 7329 206f 6620 7468 6520 6c61 7465  (ms) of the late
-0005b2a0: 7374 2072 6563 6f72 6420 746f 2072 6574  st record to ret
-0005b2b0: 7269 6576 6520 756e 6978 2074 696d 6573  rieve unix times
-0005b2c0: 7461 6d70 0a20 2020 2020 2020 203a 7265  tamp.        :re
-0005b2d0: 7475 726e 7320 6469 6374 3a20 616e 2061  turns dict: an a
-0005b2e0: 7272 6179 206f 6620 606f 7065 6e20 696e  rray of `open in
-0005b2f0: 7465 7265 7374 2068 6973 746f 7279 2073  terest history s
-0005b300: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0005b310: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0005b320: 232f 3f69 643d 696e 7465 7265 7374 2d68  #/?id=interest-h
-0005b330: 6973 746f 7279 2d73 7472 7563 7475 7265  istory-structure
-0005b340: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-0005b350: 2020 2020 2020 2069 6620 7469 6d65 6672         if timefr
-0005b360: 616d 6520 3d3d 2027 316d 273a 0a20 2020  ame == '1m':.   
-0005b370: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-0005b380: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-0005b390: 6420 2b20 2766 6574 6368 4f70 656e 496e  d + 'fetchOpenIn
-0005b3a0: 7465 7265 7374 4869 7374 6f72 7920 6361  terestHistory ca
-0005b3b0: 6e6e 6f74 2075 7365 2074 6865 2031 6d20  nnot use the 1m 
-0005b3c0: 7469 6d65 6672 616d 6527 290a 2020 2020  timeframe').    
-0005b3d0: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-0005b3e0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0005b3f0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-0005b400: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-0005b410: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-0005b420: 0a20 2020 2020 2020 2020 2020 2027 7065  .            'pe
-0005b430: 7269 6f64 273a 2073 656c 662e 7361 6665  riod': self.safe
-0005b440: 5f73 7472 696e 6728 7365 6c66 2e74 696d  _string(self.tim
-0005b450: 6566 7261 6d65 732c 2074 696d 6566 7261  eframes, timefra
-0005b460: 6d65 2c20 7469 6d65 6672 616d 6529 2c0a  me, timeframe),.
-0005b470: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0005b480: 2020 6966 206c 696d 6974 2069 7320 6e6f    if limit is no
-0005b490: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0005b4a0: 2020 2020 7265 7175 6573 745b 276c 696d      request['lim
-0005b4b0: 6974 275d 203d 206c 696d 6974 0a20 2020  it'] = limit.   
-0005b4c0: 2020 2020 2073 796d 626f 6c4b 6579 203d       symbolKey =
-0005b4d0: 2027 7379 6d62 6f6c 2720 6966 206d 6172   'symbol' if mar
-0005b4e0: 6b65 745b 276c 696e 6561 7227 5d20 656c  ket['linear'] el
-0005b4f0: 7365 2027 7061 6972 270a 2020 2020 2020  se 'pair'.      
-0005b500: 2020 7265 7175 6573 745b 7379 6d62 6f6c    request[symbol
-0005b510: 4b65 795d 203d 206d 6172 6b65 745b 2769  Key] = market['i
-0005b520: 6427 5d0a 2020 2020 2020 2020 6966 206d  d'].        if m
-0005b530: 6172 6b65 745b 2769 6e76 6572 7365 275d  arket['inverse']
-0005b540: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0005b550: 7175 6573 745b 2763 6f6e 7472 6163 7454  quest['contractT
-0005b560: 7970 6527 5d20 3d20 7365 6c66 2e73 6166  ype'] = self.saf
-0005b570: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
-0005b580: 2027 636f 6e74 7261 6374 5479 7065 272c   'contractType',
-0005b590: 2027 4355 5252 454e 545f 5155 4152 5445   'CURRENT_QUARTE
-0005b5a0: 5227 290a 2020 2020 2020 2020 6966 2073  R').        if s
-0005b5b0: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
-0005b5c0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0005b5d0: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
-0005b5e0: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
-0005b5f0: 2020 2075 6e74 696c 203d 2073 656c 662e     until = self.
-0005b600: 7361 6665 5f69 6e74 6567 6572 5f32 2870  safe_integer_2(p
-0005b610: 6172 616d 732c 2027 756e 7469 6c27 2c20  arams, 'until', 
-0005b620: 2774 696c 6c27 2920 2023 2075 6e69 6669  'till')  # unifi
-0005b630: 6564 2069 6e20 6d69 6c6c 6973 6563 6f6e  ed in millisecon
-0005b640: 6473 0a20 2020 2020 2020 2065 6e64 5469  ds.        endTi
-0005b650: 6d65 203d 2073 656c 662e 7361 6665 5f69  me = self.safe_i
-0005b660: 6e74 6567 6572 2870 6172 616d 732c 2027  nteger(params, '
-0005b670: 656e 6454 696d 6527 2c20 756e 7469 6c29  endTime', until)
-0005b680: 2020 2320 6578 6368 616e 6765 2d73 7065    # exchange-spe
-0005b690: 6369 6669 6320 696e 206d 696c 6c69 7365  cific in millise
-0005b6a0: 636f 6e64 730a 2020 2020 2020 2020 7061  conds.        pa
-0005b6b0: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-0005b6c0: 2870 6172 616d 732c 205b 2765 6e64 5469  (params, ['endTi
-0005b6d0: 6d65 272c 2027 756e 7469 6c27 2c20 2774  me', 'until', 't
-0005b6e0: 696c 6c27 5d29 0a20 2020 2020 2020 2069  ill']).        i
-0005b6f0: 6620 656e 6454 696d 653a 0a20 2020 2020  f endTime:.     
-0005b700: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0005b710: 656e 6454 696d 6527 5d20 3d20 656e 6454  endTime'] = endT
-0005b720: 696d 650a 2020 2020 2020 2020 656c 6966  ime.        elif
-0005b730: 2073 696e 6365 3a0a 2020 2020 2020 2020   since:.        
-0005b740: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
-0005b750: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0005b760: 2020 2020 2020 6c69 6d69 7420 3d20 3330        limit = 30
-0005b770: 2020 2320 4578 6368 616e 6765 2064 6566    # Exchange def
-0005b780: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
-0005b790: 2064 7572 6174 696f 6e20 3d20 7365 6c66   duration = self
-0005b7a0: 2e70 6172 7365 5f74 696d 6566 7261 6d65  .parse_timeframe
-0005b7b0: 2874 696d 6566 7261 6d65 290a 2020 2020  (timeframe).    
-0005b7c0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0005b7d0: 2765 6e64 5469 6d65 275d 203d 2073 656c  'endTime'] = sel
-0005b7e0: 662e 7375 6d28 7369 6e63 652c 2064 7572  f.sum(since, dur
-0005b7f0: 6174 696f 6e20 2a20 6c69 6d69 7420 2a20  ation * limit * 
-0005b800: 3130 3030 290a 2020 2020 2020 2020 6d65  1000).        me
-0005b810: 7468 6f64 203d 2027 6661 7069 4461 7461  thod = 'fapiData
-0005b820: 4765 744f 7065 6e49 6e74 6572 6573 7448  GetOpenInterestH
-0005b830: 6973 7427 0a20 2020 2020 2020 2069 6620  ist'.        if 
-0005b840: 6d61 726b 6574 5b27 696e 7665 7273 6527  market['inverse'
-0005b850: 5d3a 0a20 2020 2020 2020 2020 2020 206d  ]:.            m
-0005b860: 6574 686f 6420 3d20 2764 6170 6944 6174  ethod = 'dapiDat
-0005b870: 6147 6574 4f70 656e 496e 7465 7265 7374  aGetOpenInterest
-0005b880: 4869 7374 270a 2020 2020 2020 2020 7265  Hist'.        re
-0005b890: 7370 6f6e 7365 203d 2067 6574 6174 7472  sponse = getattr
-0005b8a0: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
-0005b8b0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-0005b8c0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-0005b8d0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0005b8e0: 2020 5b0a 2020 2020 2020 2020 2320 2020    [.        #   
-0005b8f0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0005b900: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-0005b910: 3a22 4254 4355 5344 5422 2c0a 2020 2020  :"BTCUSDT",.    
-0005b920: 2020 2020 2320 2020 2020 2020 2020 2022      #          "
-0005b930: 7375 6d4f 7065 6e49 6e74 6572 6573 7422  sumOpenInterest"
-0005b940: 3a22 3735 3337 352e 3631 3730 3030 3030  :"75375.61700000
-0005b950: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0005b960: 2020 2020 2020 2273 756d 4f70 656e 496e        "sumOpenIn
-0005b970: 7465 7265 7374 5661 6c75 6522 3a22 3332  terestValue":"32
-0005b980: 3438 3832 3838 3833 2e37 3132 3531 3434  48828883.7125144
-0005b990: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0005b9a0: 2020 2020 2020 2022 7469 6d65 7374 616d         "timestam
-0005b9b0: 7022 3a31 3634 3231 3739 3930 3030 3030  p":1642179900000
-0005b9c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005b9d0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-0005b9e0: 2020 2e2e 2e0a 2020 2020 2020 2020 2320    ....        # 
-0005b9f0: 205d 0a20 2020 2020 2020 2023 0a20 2020   ].        #.   
-0005ba00: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0005ba10: 2e70 6172 7365 5f6f 7065 6e5f 696e 7465  .parse_open_inte
-0005ba20: 7265 7374 7328 7265 7370 6f6e 7365 2c20  rests(response, 
-0005ba30: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
-0005ba40: 696d 6974 290a 0a20 2020 2064 6566 2066  imit)..    def f
-0005ba50: 6574 6368 5f6f 7065 6e5f 696e 7465 7265  etch_open_intere
-0005ba60: 7374 2873 656c 662c 2073 796d 626f 6c3a  st(self, symbol:
-0005ba70: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-0005ba80: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0005ba90: 2020 2020 2020 7265 7472 6965 7665 7320        retrieves 
-0005baa0: 7468 6520 6f70 656e 2069 6e74 6572 6573  the open interes
-0005bab0: 7420 6f66 2061 2063 6f6e 7472 6163 7420  t of a contract 
-0005bac0: 7472 6164 696e 6720 7061 6972 0a20 2020  trading pair.   
-0005bad0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-0005bae0: 2f62 696e 616e 6365 2d64 6f63 732e 6769  /binance-docs.gi
-0005baf0: 7468 7562 2e69 6f2f 6170 6964 6f63 732f  thub.io/apidocs/
-0005bb00: 6675 7475 7265 732f 656e 2f23 6f70 656e  futures/en/#open
-0005bb10: 2d69 6e74 6572 6573 740a 2020 2020 2020  -interest.      
-0005bb20: 2020 7365 6520 6874 7470 733a 2f2f 6269    see https://bi
-0005bb30: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
-0005bb40: 622e 696f 2f61 7069 646f 6373 2f64 656c  b.io/apidocs/del
-0005bb50: 6976 6572 792f 656e 2f23 6f70 656e 2d69  ivery/en/#open-i
-0005bb60: 6e74 6572 6573 740a 2020 2020 2020 2020  nterest.        
-0005bb70: 7365 6520 6874 7470 733a 2f2f 6269 6e61  see https://bina
-0005bb80: 6e63 652d 646f 6373 2e67 6974 6875 622e  nce-docs.github.
-0005bb90: 696f 2f61 7069 646f 6373 2f76 6f70 7469  io/apidocs/vopti
-0005bba0: 6f6e 732f 656e 2f23 6f70 656e 2d69 6e74  ons/en/#open-int
-0005bbb0: 6572 6573 740a 2020 2020 2020 2020 3a70  erest.        :p
-0005bbc0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-0005bbd0: 2075 6e69 6669 6564 2043 4358 5420 6d61   unified CCXT ma
-0005bbe0: 726b 6574 2073 796d 626f 6c0a 2020 2020  rket symbol.    
-0005bbf0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-0005bc00: 7061 7261 6d73 3a20 6578 6368 616e 6765  params: exchange
-0005bc10: 2073 7065 6369 6669 6320 7061 7261 6d65   specific parame
-0005bc20: 7465 7273 0a20 2020 2020 2020 203a 7265  ters.        :re
-0005bc30: 7475 726e 7320 6469 6374 7d20 616e 206f  turns dict} an o
-0005bc40: 7065 6e20 696e 7465 7265 7374 2073 7472  pen interest str
-0005bc50: 7563 7475 7265 7b40 6c69 6e6b 2068 7474  ucture{@link htt
-0005bc60: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-0005bc70: 6f6d 2f23 2f3f 6964 3d69 6e74 6572 6573  om/#/?id=interes
-0005bc80: 742d 6869 7374 6f72 792d 7374 7275 6374  t-history-struct
-0005bc90: 7572 653a 0a20 2020 2020 2020 2022 2222  ure:.        """
-0005bca0: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-0005bcb0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0005bcc0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-0005bcd0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-0005bce0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-0005bcf0: 7420 3d20 7b7d 0a20 2020 2020 2020 2069  t = {}.        i
-0005bd00: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
-0005bd10: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-0005bd20: 7265 7175 6573 745b 2775 6e64 6572 6c79  request['underly
-0005bd30: 696e 6741 7373 6574 275d 203d 206d 6172  ingAsset'] = mar
-0005bd40: 6b65 745b 2762 6173 6549 6427 5d0a 2020  ket['baseId'].  
-0005bd50: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0005bd60: 745b 2765 7870 6972 6174 696f 6e27 5d20  t['expiration'] 
-0005bd70: 3d20 7365 6c66 2e79 796d 6d64 6428 6d61  = self.yymmdd(ma
-0005bd80: 726b 6574 5b27 6578 7069 7279 275d 290a  rket['expiry']).
-0005bd90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0005bda0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0005bdb0: 745b 2773 796d 626f 6c27 5d20 3d20 6d61  t['symbol'] = ma
-0005bdc0: 726b 6574 5b27 6964 275d 0a20 2020 2020  rket['id'].     
-0005bdd0: 2020 206d 6574 686f 6420 3d20 2766 6170     method = 'fap
-0005bde0: 6950 7562 6c69 6347 6574 4f70 656e 496e  iPublicGetOpenIn
-0005bdf0: 7465 7265 7374 270a 2020 2020 2020 2020  terest'.        
-0005be00: 6966 206d 6172 6b65 745b 276f 7074 696f  if market['optio
-0005be10: 6e27 5d3a 0a20 2020 2020 2020 2020 2020  n']:.           
-0005be20: 206d 6574 686f 6420 3d20 2765 6170 6950   method = 'eapiP
-0005be30: 7562 6c69 6347 6574 4f70 656e 496e 7465  ublicGetOpenInte
-0005be40: 7265 7374 270a 2020 2020 2020 2020 656c  rest'.        el
-0005be50: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
-0005be60: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
-0005be70: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
-0005be80: 5075 626c 6963 4765 744f 7065 6e49 6e74  PublicGetOpenInt
-0005be90: 6572 6573 7427 0a20 2020 2020 2020 2072  erest'.        r
-0005bea0: 6573 706f 6e73 6520 3d20 6765 7461 7474  esponse = getatt
-0005beb0: 7228 7365 6c66 2c20 6d65 7468 6f64 2928  r(self, method)(
-0005bec0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-0005bed0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-0005bee0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0005bef0: 2320 6675 7475 7265 7328 6661 7069 290a  # futures(fapi).
-0005bf00: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0005bf10: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0005bf20: 2020 2320 2020 2020 2020 2020 2273 796d    #         "sym
-0005bf30: 626f 6c22 3a20 2245 5448 5553 4454 5f32  bol": "ETHUSDT_2
-0005bf40: 3330 3333 3122 2c0a 2020 2020 2020 2020  30331",.        
-0005bf50: 2320 2020 2020 2020 2020 226f 7065 6e49  #         "openI
-0005bf60: 6e74 6572 6573 7422 3a20 2232 3335 3831  nterest": "23581
-0005bf70: 2e36 3737 222c 0a20 2020 2020 2020 2023  .677",.        #
-0005bf80: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
-0005bf90: 2031 3637 3733 3536 3837 3232 3635 0a20   1677356872265. 
-0005bfa0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0005bfb0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005bfc0: 2023 2066 7574 7572 6573 2864 6170 6929   # futures(dapi)
-0005bfd0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0005bfe0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0005bff0: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
-0005c000: 6d62 6f6c 223a 2022 4554 4855 5344 5f50  mbol": "ETHUSD_P
-0005c010: 4552 5022 2c0a 2020 2020 2020 2020 2320  ERP",.        # 
-0005c020: 2020 2020 2020 2020 2270 6169 7222 3a20          "pair": 
-0005c030: 2245 5448 5553 4422 2c0a 2020 2020 2020  "ETHUSD",.      
-0005c040: 2020 2320 2020 2020 2020 2020 226f 7065    #         "ope
-0005c050: 6e49 6e74 6572 6573 7422 3a20 2232 3635  nInterest": "265
-0005c060: 3432 3433 3622 2c0a 2020 2020 2020 2020  42436",.        
-0005c070: 2320 2020 2020 2020 2020 2263 6f6e 7472  #         "contr
-0005c080: 6163 7454 7970 6522 3a20 2250 4552 5045  actType": "PERPE
-0005c090: 5455 414c 222c 0a20 2020 2020 2020 2023  TUAL",.        #
-0005c0a0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
-0005c0b0: 2031 3637 3733 3630 3237 3232 3234 0a20   1677360272224. 
-0005c0c0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0005c0d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005c0e0: 2023 206f 7074 696f 6e73 2865 6170 6929   # options(eapi)
-0005c0f0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0005c100: 2020 2023 2020 2020 205b 0a20 2020 2020     #     [.     
-0005c110: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
-0005c120: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005c130: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-0005c140: 4554 482d 3233 3032 3235 2d31 3632 352d  ETH-230225-1625-
-0005c150: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
-0005c160: 2020 2020 2020 2020 2020 2273 756d 4f70            "sumOp
-0005c170: 656e 496e 7465 7265 7374 223a 2022 3436  enInterest": "46
-0005c180: 302e 3530 222c 0a20 2020 2020 2020 2023  0.50",.        #
-0005c190: 2020 2020 2020 2020 2020 2020 2022 7375               "su
-0005c1a0: 6d4f 7065 6e49 6e74 6572 6573 7455 7364  mOpenInterestUsd
-0005c1b0: 223a 2022 3733 3439 3537 2e34 3335 3830  ": "734957.43580
-0005c1c0: 3932 3135 3022 2c0a 2020 2020 2020 2020  92150",.        
-0005c1d0: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
-0005c1e0: 696d 6573 7461 6d70 223a 2022 3136 3737  imestamp": "1677
-0005c1f0: 3330 3438 3630 3030 3022 0a20 2020 2020  304860000".     
-0005c200: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
-0005c210: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
-0005c220: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005c230: 2069 6620 6d61 726b 6574 5b27 6f70 7469   if market['opti
-0005c240: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
-0005c250: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-0005c260: 7273 655f 6f70 656e 5f69 6e74 6572 6573  rse_open_interes
-0005c270: 7473 2872 6573 706f 6e73 652c 206d 6172  ts(response, mar
-0005c280: 6b65 7429 0a20 2020 2020 2020 2065 6c73  ket).        els
-0005c290: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0005c2a0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-0005c2b0: 5f6f 7065 6e5f 696e 7465 7265 7374 2872  _open_interest(r
-0005c2c0: 6573 706f 6e73 652c 206d 6172 6b65 7429  esponse, market)
-0005c2d0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-0005c2e0: 6f70 656e 5f69 6e74 6572 6573 7428 7365  open_interest(se
-0005c2f0: 6c66 2c20 696e 7465 7265 7374 2c20 6d61  lf, interest, ma
-0005c300: 726b 6574 3d4e 6f6e 6529 3a0a 2020 2020  rket=None):.    
-0005c310: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
-0005c320: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
-0005c330: 725f 3228 696e 7465 7265 7374 2c20 2774  r_2(interest, 't
-0005c340: 696d 6573 7461 6d70 272c 2027 7469 6d65  imestamp', 'time
-0005c350: 2729 0a20 2020 2020 2020 2069 6420 3d20  ').        id = 
-0005c360: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0005c370: 2869 6e74 6572 6573 742c 2027 7379 6d62  (interest, 'symb
-0005c380: 6f6c 2729 0a20 2020 2020 2020 2061 6d6f  ol').        amo
-0005c390: 756e 7420 3d20 7365 6c66 2e73 6166 655f  unt = self.safe_
-0005c3a0: 6e75 6d62 6572 5f32 2869 6e74 6572 6573  number_2(interes
-0005c3b0: 742c 2027 7375 6d4f 7065 6e49 6e74 6572  t, 'sumOpenInter
-0005c3c0: 6573 7427 2c20 276f 7065 6e49 6e74 6572  est', 'openInter
-0005c3d0: 6573 7427 290a 2020 2020 2020 2020 7661  est').        va
-0005c3e0: 6c75 6520 3d20 7365 6c66 2e73 6166 655f  lue = self.safe_
-0005c3f0: 6e75 6d62 6572 5f32 2869 6e74 6572 6573  number_2(interes
-0005c400: 742c 2027 7375 6d4f 7065 6e49 6e74 6572  t, 'sumOpenInter
-0005c410: 6573 7456 616c 7565 272c 2027 7375 6d4f  estValue', 'sumO
-0005c420: 7065 6e49 6e74 6572 6573 7455 7364 2729  penInterestUsd')
-0005c430: 0a20 2020 2020 2020 2023 2049 6e76 6572  .        # Inver
-0005c440: 7365 2072 6574 7572 6e73 2074 6865 206e  se returns the n
-0005c450: 756d 6265 7220 6f66 2063 6f6e 7472 6163  umber of contrac
-0005c460: 7473 2064 6966 6665 7265 6e74 2066 726f  ts different fro
-0005c470: 6d20 7468 6520 6261 7365 206f 7220 7175  m the base or qu
-0005c480: 6f74 6520 766f 6c75 6d65 2069 6e20 7365  ote volume in se
-0005c490: 6c66 2063 6173 650a 2020 2020 2020 2020  lf case.        
-0005c4a0: 2320 636f 6d70 6172 6564 2077 6974 6820  # compared with 
-0005c4b0: 6874 7470 733a 2f2f 7777 772e 6269 6e61  https://www.bina
-0005c4c0: 6e63 652e 636f 6d2f 656e 2f66 7574 7572  nce.com/en/futur
-0005c4d0: 6573 2f66 756e 6469 6e67 2d68 6973 746f  es/funding-histo
-0005c4e0: 7279 2f71 7561 7274 6572 6c79 2f34 0a20  ry/quarterly/4. 
-0005c4f0: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
-0005c500: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-0005c510: 626f 6c27 3a20 7365 6c66 2e73 6166 655f  bol': self.safe_
-0005c520: 7379 6d62 6f6c 2869 642c 206d 6172 6b65  symbol(id, marke
-0005c530: 742c 204e 6f6e 652c 2027 636f 6e74 7261  t, None, 'contra
-0005c540: 6374 2729 2c0a 2020 2020 2020 2020 2020  ct'),.          
-0005c550: 2020 2762 6173 6556 6f6c 756d 6527 3a20    'baseVolume': 
-0005c560: 4e6f 6e65 2069 6620 6d61 726b 6574 5b27  None if market['
-0005c570: 696e 7665 7273 6527 5d20 656c 7365 2061  inverse'] else a
-0005c580: 6d6f 756e 742c 2020 2320 6465 7072 6563  mount,  # deprec
-0005c590: 6174 6564 0a20 2020 2020 2020 2020 2020  ated.           
-0005c5a0: 2027 7175 6f74 6556 6f6c 756d 6527 3a20   'quoteVolume': 
-0005c5b0: 7661 6c75 652c 2020 2320 6465 7072 6563  value,  # deprec
-0005c5c0: 6174 6564 0a20 2020 2020 2020 2020 2020  ated.           
-0005c5d0: 2027 6f70 656e 496e 7465 7265 7374 416d   'openInterestAm
-0005c5e0: 6f75 6e74 273a 2061 6d6f 756e 742c 0a20  ount': amount,. 
-0005c5f0: 2020 2020 2020 2020 2020 2027 6f70 656e             'open
-0005c600: 496e 7465 7265 7374 5661 6c75 6527 3a20  InterestValue': 
-0005c610: 7661 6c75 652c 0a20 2020 2020 2020 2020  value,.         
-0005c620: 2020 2027 7469 6d65 7374 616d 7027 3a20     'timestamp': 
-0005c630: 7469 6d65 7374 616d 702c 0a20 2020 2020  timestamp,.     
-0005c640: 2020 2020 2020 2027 6461 7465 7469 6d65         'datetime
-0005c650: 273a 2073 656c 662e 6973 6f38 3630 3128  ': self.iso8601(
-0005c660: 7469 6d65 7374 616d 7029 2c0a 2020 2020  timestamp),.    
-0005c670: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
-0005c680: 696e 7465 7265 7374 2c0a 2020 2020 2020  interest,.      
-0005c690: 2020 7d0a                                  }.
+0002c5e0: 0a20 2020 2064 6566 2065 6469 745f 7370  .    def edit_sp
+0002c5f0: 6f74 5f6f 7264 6572 2873 656c 662c 2069  ot_order(self, i
+0002c600: 643a 2073 7472 2c20 7379 6d62 6f6c 2c20  d: str, symbol, 
+0002c610: 7479 7065 2c20 7369 6465 2c20 616d 6f75  type, side, amou
+0002c620: 6e74 2c20 7072 6963 653d 4e6f 6e65 2c20  nt, price=None, 
+0002c630: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+0002c640: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0002c650: 6564 6974 2061 2074 7261 6465 206f 7264  edit a trade ord
+0002c660: 6572 0a20 2020 2020 2020 2073 6565 2068  er.        see h
+0002c670: 7474 7073 3a2f 2f62 696e 616e 6365 2d64  ttps://binance-d
+0002c680: 6f63 732e 6769 7468 7562 2e69 6f2f 6170  ocs.github.io/ap
+0002c690: 6964 6f63 732f 7370 6f74 2f65 6e2f 2363  idocs/spot/en/#c
+0002c6a0: 616e 6365 6c2d 616e 2d65 7869 7374 696e  ancel-an-existin
+0002c6b0: 672d 6f72 6465 722d 616e 642d 7365 6e64  g-order-and-send
+0002c6c0: 2d61 2d6e 6577 2d6f 7264 6572 2d74 7261  -a-new-order-tra
+0002c6d0: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+0002c6e0: 6d20 7374 7220 6964 3a20 6361 6e63 656c  m str id: cancel
+0002c6f0: 206f 7264 6572 2069 640a 2020 2020 2020   order id.      
+0002c700: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
+0002c710: 626f 6c3a 2075 6e69 6669 6564 2073 796d  bol: unified sym
+0002c720: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
+0002c730: 7420 746f 2063 7265 6174 6520 616e 206f  t to create an o
+0002c740: 7264 6572 2069 6e0a 2020 2020 2020 2020  rder in.        
+0002c750: 3a70 6172 616d 2073 7472 2074 7970 653a  :param str type:
+0002c760: 2027 6d61 726b 6574 2720 6f72 2027 6c69   'market' or 'li
+0002c770: 6d69 7427 0a20 2020 2020 2020 203a 7061  mit'.        :pa
+0002c780: 7261 6d20 7374 7220 7369 6465 3a20 2762  ram str side: 'b
+0002c790: 7579 2720 6f72 2027 7365 6c6c 270a 2020  uy' or 'sell'.  
+0002c7a0: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
+0002c7b0: 6174 2061 6d6f 756e 743a 2068 6f77 206d  at amount: how m
+0002c7c0: 7563 6820 6f66 2063 7572 7265 6e63 7920  uch of currency 
+0002c7d0: 796f 7520 7761 6e74 2074 6f20 7472 6164  you want to trad
+0002c7e0: 6520 696e 2075 6e69 7473 206f 6620 6261  e in units of ba
+0002c7f0: 7365 2063 7572 7265 6e63 790a 2020 2020  se currency.    
+0002c800: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
+0002c810: 7c4e 6f6e 6520 7072 6963 653a 2074 6865  |None price: the
+0002c820: 2070 7269 6365 2061 7420 7768 6963 6820   price at which 
+0002c830: 7468 6520 6f72 6465 7220 6973 2074 6f20  the order is to 
+0002c840: 6265 2066 756c 6c66 696c 6c65 642c 2069  be fullfilled, i
+0002c850: 6e20 756e 6974 7320 6f66 2074 6865 2062  n units of the b
+0002c860: 6173 6520 6375 7272 656e 6379 2c20 6967  ase currency, ig
+0002c870: 6e6f 7265 6420 696e 206d 6172 6b65 7420  nored in market 
+0002c880: 6f72 6465 7273 0a20 2020 2020 2020 203a  orders.        :
+0002c890: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+0002c8a0: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+0002c8b0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+0002c8c0: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
+0002c8d0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+0002c8e0: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
+0002c8f0: 616e 2060 6f72 6465 7220 7374 7275 6374  an `order struct
+0002c900: 7572 6520 3c68 7474 7073 3a2f 2f64 6f63  ure <https://doc
+0002c910: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
+0002c920: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
+0002c930: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+0002c940: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+0002c950: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0002c960: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+0002c970: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+0002c980: 2020 2020 2020 2020 6966 206e 6f74 206d          if not m
+0002c990: 6172 6b65 745b 2773 706f 7427 5d3a 0a20  arket['spot']:. 
+0002c9a0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0002c9b0: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
+0002c9c0: 6c66 2e69 6420 2b20 2720 6564 6974 5370  lf.id + ' editSp
+0002c9d0: 6f74 4f72 6465 7228 2920 646f 6573 206e  otOrder() does n
+0002c9e0: 6f74 2073 7570 706f 7274 2027 202b 206d  ot support ' + m
+0002c9f0: 6172 6b65 745b 2774 7970 6527 5d20 2b20  arket['type'] + 
+0002ca00: 2720 6f72 6465 7273 2729 0a20 2020 2020  ' orders').     
+0002ca10: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+0002ca20: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+0002ca30: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
+0002ca40: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
+0002ca50: 7369 6465 273a 2073 6964 652e 7570 7065  side': side.uppe
+0002ca60: 7228 292c 0a20 2020 2020 2020 207d 0a20  r(),.        }. 
+0002ca70: 2020 2020 2020 2063 6c69 656e 744f 7264         clientOrd
+0002ca80: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
+0002ca90: 5f73 7472 696e 675f 6e28 7061 7261 6d73  _string_n(params
+0002caa0: 2c20 5b27 6e65 7743 6c69 656e 744f 7264  , ['newClientOrd
+0002cab0: 6572 4964 272c 2027 636c 6965 6e74 4f72  erId', 'clientOr
+0002cac0: 6465 7249 6427 2c20 276f 7269 6743 6c69  derId', 'origCli
+0002cad0: 656e 744f 7264 6572 4964 275d 290a 2020  entOrderId']).  
+0002cae0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0002caf0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0002cb00: 206d 6172 6b65 745b 2773 706f 7427 5d3a   market['spot']:
+0002cb10: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
+0002cb20: 7469 616c 5570 7065 7263 6173 6554 7970  tialUppercaseTyp
+0002cb30: 6520 3d20 7479 7065 2e75 7070 6572 2829  e = type.upper()
+0002cb40: 0a20 2020 2020 2020 2020 2020 2075 7070  .            upp
+0002cb50: 6572 6361 7365 5479 7065 203d 2069 6e69  ercaseType = ini
+0002cb60: 7469 616c 5570 7065 7263 6173 6554 7970  tialUppercaseTyp
+0002cb70: 650a 2020 2020 2020 2020 2020 2020 706f  e.            po
+0002cb80: 7374 4f6e 6c79 203d 2073 656c 662e 6973  stOnly = self.is
+0002cb90: 5f70 6f73 745f 6f6e 6c79 2869 6e69 7469  _post_only(initi
+0002cba0: 616c 5570 7065 7263 6173 6554 7970 6520  alUppercaseType 
+0002cbb0: 3d3d 2027 4d41 524b 4554 272c 2069 6e69  == 'MARKET', ini
+0002cbc0: 7469 616c 5570 7065 7263 6173 6554 7970  tialUppercaseTyp
+0002cbd0: 6520 3d3d 2027 4c49 4d49 545f 4d41 4b45  e == 'LIMIT_MAKE
+0002cbe0: 5227 2c20 7061 7261 6d73 290a 2020 2020  R', params).    
+0002cbf0: 2020 2020 2020 2020 6966 2070 6f73 744f          if postO
+0002cc00: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
+0002cc10: 2020 2020 2075 7070 6572 6361 7365 5479       uppercaseTy
+0002cc20: 7065 203d 2027 4c49 4d49 545f 4d41 4b45  pe = 'LIMIT_MAKE
+0002cc30: 5227 0a20 2020 2020 2020 2020 2020 2072  R'.            r
+0002cc40: 6571 7565 7374 5b27 7479 7065 275d 203d  equest['type'] =
+0002cc50: 2075 7070 6572 6361 7365 5479 7065 0a20   uppercaseType. 
+0002cc60: 2020 2020 2020 2020 2020 2073 746f 7050             stopP
+0002cc70: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+0002cc80: 5f6e 756d 6265 7228 7061 7261 6d73 2c20  _number(params, 
+0002cc90: 2773 746f 7050 7269 6365 2729 0a20 2020  'stopPrice').   
+0002cca0: 2020 2020 2020 2020 2069 6620 7374 6f70           if stop
+0002ccb0: 5072 6963 6520 6973 206e 6f74 204e 6f6e  Price is not Non
+0002ccc0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002ccd0: 2020 2069 6620 7570 7065 7263 6173 6554     if uppercaseT
+0002cce0: 7970 6520 3d3d 2027 4d41 524b 4554 273a  ype == 'MARKET':
+0002ccf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cd00: 2020 2020 2075 7070 6572 6361 7365 5479       uppercaseTy
+0002cd10: 7065 203d 2027 5354 4f50 5f4c 4f53 5327  pe = 'STOP_LOSS'
+0002cd20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cd30: 2065 6c69 6620 7570 7065 7263 6173 6554   elif uppercaseT
+0002cd40: 7970 6520 3d3d 2027 4c49 4d49 5427 3a0a  ype == 'LIMIT':.
+0002cd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd60: 2020 2020 7570 7065 7263 6173 6554 7970      uppercaseTyp
+0002cd70: 6520 3d20 2753 544f 505f 4c4f 5353 5f4c  e = 'STOP_LOSS_L
+0002cd80: 494d 4954 270a 2020 2020 2020 2020 2020  IMIT'.          
+0002cd90: 2020 7661 6c69 644f 7264 6572 5479 7065    validOrderType
+0002cda0: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+0002cdb0: 6c75 6528 6d61 726b 6574 5b27 696e 666f  lue(market['info
+0002cdc0: 275d 2c20 276f 7264 6572 5479 7065 7327  '], 'orderTypes'
+0002cdd0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0002cde0: 206e 6f74 2073 656c 662e 696e 5f61 7272   not self.in_arr
+0002cdf0: 6179 2875 7070 6572 6361 7365 5479 7065  ay(uppercaseType
+0002ce00: 2c20 7661 6c69 644f 7264 6572 5479 7065  , validOrderType
+0002ce10: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+0002ce20: 2020 2020 6966 2069 6e69 7469 616c 5570      if initialUp
+0002ce30: 7065 7263 6173 6554 7970 6520 213d 2075  percaseType != u
+0002ce40: 7070 6572 6361 7365 5479 7065 3a0a 2020  ppercaseType:.  
+0002ce50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ce60: 2020 7261 6973 6520 496e 7661 6c69 644f    raise InvalidO
+0002ce70: 7264 6572 2873 656c 662e 6964 202b 2027  rder(self.id + '
+0002ce80: 2073 746f 7050 7269 6365 2070 6172 616d   stopPrice param
+0002ce90: 6574 6572 2069 7320 6e6f 7420 616c 6c6f  eter is not allo
+0002cea0: 7765 6420 666f 7220 2720 2b20 7379 6d62  wed for ' + symb
+0002ceb0: 6f6c 202b 2027 2027 202b 2074 7970 6520  ol + ' ' + type 
+0002cec0: 2b20 2720 6f72 6465 7273 2729 0a20 2020  + ' orders').   
+0002ced0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002cee0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002cef0: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
+0002cf00: 616c 6964 4f72 6465 7228 7365 6c66 2e69  alidOrder(self.i
+0002cf10: 6420 2b20 2720 2720 2b20 7479 7065 202b  d + ' ' + type +
+0002cf20: 2027 2069 7320 6e6f 7420 6120 7661 6c69   ' is not a vali
+0002cf30: 6420 6f72 6465 7220 7479 7065 2066 6f72  d order type for
+0002cf40: 2074 6865 2027 202b 2073 796d 626f 6c20   the ' + symbol 
+0002cf50: 2b20 2720 6d61 726b 6574 2729 0a20 2020  + ' market').   
+0002cf60: 2020 2020 2020 2020 2069 6620 636c 6965           if clie
+0002cf70: 6e74 4f72 6465 7249 6420 6973 204e 6f6e  ntOrderId is Non
+0002cf80: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002cf90: 2020 2062 726f 6b65 7220 3d20 7365 6c66     broker = self
+0002cfa0: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
+0002cfb0: 2e6f 7074 696f 6e73 2c20 2762 726f 6b65  .options, 'broke
+0002cfc0: 7227 290a 2020 2020 2020 2020 2020 2020  r').            
+0002cfd0: 2020 2020 6966 2062 726f 6b65 7220 6973      if broker is
+0002cfe0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0002cff0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0002d000: 726f 6b65 7249 6420 3d20 7365 6c66 2e73  rokerId = self.s
+0002d010: 6166 655f 7374 7269 6e67 2862 726f 6b65  afe_string(broke
+0002d020: 722c 2027 7370 6f74 2729 0a20 2020 2020  r, 'spot').     
+0002d030: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002d040: 6620 6272 6f6b 6572 4964 2069 7320 6e6f  f brokerId is no
+0002d050: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0002d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d070: 7265 7175 6573 745b 276e 6577 436c 6965  request['newClie
+0002d080: 6e74 4f72 6465 7249 6427 5d20 3d20 6272  ntOrderId'] = br
+0002d090: 6f6b 6572 4964 202b 2073 656c 662e 7575  okerId + self.uu
+0002d0a0: 6964 3232 2829 0a20 2020 2020 2020 2020  id22().         
+0002d0b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002d0c0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002d0d0: 5b27 6e65 7743 6c69 656e 744f 7264 6572  ['newClientOrder
+0002d0e0: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
+0002d0f0: 6572 4964 0a20 2020 2020 2020 2020 2020  erId.           
+0002d100: 2072 6571 7565 7374 5b27 6e65 774f 7264   request['newOrd
+0002d110: 6572 5265 7370 5479 7065 275d 203d 2073  erRespType'] = s
+0002d120: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
+0002d130: 656c 662e 6f70 7469 6f6e 735b 276e 6577  elf.options['new
+0002d140: 4f72 6465 7252 6573 7054 7970 6527 5d2c  OrderRespType'],
+0002d150: 2074 7970 652c 2027 5245 5355 4c54 2729   type, 'RESULT')
+0002d160: 2020 2320 2741 434b 2720 666f 7220 6f72    # 'ACK' for or
+0002d170: 6465 7220 6964 2c20 2752 4553 554c 5427  der id, 'RESULT'
+0002d180: 2066 6f72 2066 756c 6c20 6f72 6465 7220   for full order 
+0002d190: 6f72 2027 4655 4c4c 2720 666f 7220 6f72  or 'FULL' for or
+0002d1a0: 6465 7220 7769 7468 2066 696c 6c73 0a20  der with fills. 
+0002d1b0: 2020 2020 2020 2020 2020 2074 696d 6549             timeI
+0002d1c0: 6e46 6f72 6365 4973 5265 7175 6972 6564  nForceIsRequired
+0002d1d0: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+0002d1e0: 2020 2020 2070 7269 6365 4973 5265 7175       priceIsRequ
+0002d1f0: 6972 6564 203d 2046 616c 7365 0a20 2020  ired = False.   
+0002d200: 2020 2020 2020 2020 2073 746f 7050 7269           stopPri
+0002d210: 6365 4973 5265 7175 6972 6564 203d 2046  ceIsRequired = F
+0002d220: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+0002d230: 2071 7561 6e74 6974 7949 7352 6571 7569   quantityIsRequi
+0002d240: 7265 6420 3d20 4661 6c73 650a 2020 2020  red = False.    
+0002d250: 2020 2020 2020 2020 6966 2075 7070 6572          if upper
+0002d260: 6361 7365 5479 7065 203d 3d20 274d 4152  caseType == 'MAR
+0002d270: 4b45 5427 3a0a 2020 2020 2020 2020 2020  KET':.          
+0002d280: 2020 2020 2020 7175 6f74 654f 7264 6572        quoteOrder
+0002d290: 5174 7920 3d20 7365 6c66 2e73 6166 655f  Qty = self.safe_
+0002d2a0: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
+0002d2b0: 6e73 2c20 2771 756f 7465 4f72 6465 7251  ns, 'quoteOrderQ
+0002d2c0: 7479 272c 2054 7275 6529 0a20 2020 2020  ty', True).     
+0002d2d0: 2020 2020 2020 2020 2020 2069 6620 7175             if qu
+0002d2e0: 6f74 654f 7264 6572 5174 793a 0a20 2020  oteOrderQty:.   
+0002d2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d300: 2071 756f 7465 4f72 6465 7251 7479 4e65   quoteOrderQtyNe
+0002d310: 7720 3d20 7365 6c66 2e73 6166 655f 7661  w = self.safe_va
+0002d320: 6c75 655f 3228 7061 7261 6d73 2c20 2771  lue_2(params, 'q
+0002d330: 756f 7465 4f72 6465 7251 7479 272c 2027  uoteOrderQty', '
+0002d340: 636f 7374 2729 0a20 2020 2020 2020 2020  cost').         
+0002d350: 2020 2020 2020 2020 2020 2070 7265 6369             preci
+0002d360: 7369 6f6e 203d 206d 6172 6b65 745b 2770  sion = market['p
+0002d370: 7265 6369 7369 6f6e 275d 5b27 7072 6963  recision']['pric
+0002d380: 6527 5d0a 2020 2020 2020 2020 2020 2020  e'].            
+0002d390: 2020 2020 2020 2020 6966 2071 756f 7465          if quote
+0002d3a0: 4f72 6465 7251 7479 4e65 7720 6973 206e  OrderQtyNew is n
+0002d3b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0002d3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3d0: 2072 6571 7565 7374 5b27 7175 6f74 654f   request['quoteO
+0002d3e0: 7264 6572 5174 7927 5d20 3d20 7365 6c66  rderQty'] = self
+0002d3f0: 2e64 6563 696d 616c 5f74 6f5f 7072 6563  .decimal_to_prec
+0002d400: 6973 696f 6e28 7175 6f74 654f 7264 6572  ision(quoteOrder
+0002d410: 5174 794e 6577 2c20 5452 554e 4341 5445  QtyNew, TRUNCATE
+0002d420: 2c20 7072 6563 6973 696f 6e2c 2073 656c  , precision, sel
+0002d430: 662e 7072 6563 6973 696f 6e4d 6f64 6529  f.precisionMode)
+0002d440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d450: 2020 2020 2065 6c69 6620 7072 6963 6520       elif price 
+0002d460: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0002d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d480: 2020 2020 2061 6d6f 756e 7453 7472 696e       amountStrin
+0002d490: 6720 3d20 7365 6c66 2e6e 756d 6265 725f  g = self.number_
+0002d4a0: 746f 5f73 7472 696e 6728 616d 6f75 6e74  to_string(amount
+0002d4b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002d4c0: 2020 2020 2020 2020 2020 7072 6963 6553            priceS
+0002d4d0: 7472 696e 6720 3d20 7365 6c66 2e6e 756d  tring = self.num
+0002d4e0: 6265 725f 746f 5f73 7472 696e 6728 7072  ber_to_string(pr
+0002d4f0: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
+0002d500: 2020 2020 2020 2020 2020 2020 2071 756f               quo
+0002d510: 7465 4f72 6465 7251 7561 6e74 6974 7920  teOrderQuantity 
+0002d520: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0002d530: 5f6d 756c 2861 6d6f 756e 7453 7472 696e  _mul(amountStrin
+0002d540: 672c 2070 7269 6365 5374 7269 6e67 290a  g, priceString).
+0002d550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d560: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002d570: 2771 756f 7465 4f72 6465 7251 7479 275d  'quoteOrderQty']
+0002d580: 203d 2073 656c 662e 6465 6369 6d61 6c5f   = self.decimal_
+0002d590: 746f 5f70 7265 6369 7369 6f6e 2871 756f  to_precision(quo
+0002d5a0: 7465 4f72 6465 7251 7561 6e74 6974 792c  teOrderQuantity,
+0002d5b0: 2054 5255 4e43 4154 452c 2070 7265 6369   TRUNCATE, preci
+0002d5c0: 7369 6f6e 2c20 7365 6c66 2e70 7265 6369  sion, self.preci
+0002d5d0: 7369 6f6e 4d6f 6465 290a 2020 2020 2020  sionMode).      
+0002d5e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002d5f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002d600: 2020 2020 2020 2020 2020 2020 7175 616e              quan
+0002d610: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
+0002d620: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+0002d630: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0002d640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d650: 7175 616e 7469 7479 4973 5265 7175 6972  quantityIsRequir
+0002d660: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
+0002d670: 2020 2020 2020 656c 6966 2075 7070 6572        elif upper
+0002d680: 6361 7365 5479 7065 203d 3d20 274c 494d  caseType == 'LIM
+0002d690: 4954 273a 0a20 2020 2020 2020 2020 2020  IT':.           
+0002d6a0: 2020 2020 2070 7269 6365 4973 5265 7175       priceIsRequ
+0002d6b0: 6972 6564 203d 2054 7275 650a 2020 2020  ired = True.    
+0002d6c0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+0002d6d0: 496e 466f 7263 6549 7352 6571 7569 7265  InForceIsRequire
+0002d6e0: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+0002d6f0: 2020 2020 2020 2020 2071 7561 6e74 6974           quantit
+0002d700: 7949 7352 6571 7569 7265 6420 3d20 5472  yIsRequired = Tr
+0002d710: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
+0002d720: 6c69 6620 2875 7070 6572 6361 7365 5479  lif (uppercaseTy
+0002d730: 7065 203d 3d20 2753 544f 505f 4c4f 5353  pe == 'STOP_LOSS
+0002d740: 2729 206f 7220 2875 7070 6572 6361 7365  ') or (uppercase
+0002d750: 5479 7065 203d 3d20 2754 414b 455f 5052  Type == 'TAKE_PR
+0002d760: 4f46 4954 2729 3a0a 2020 2020 2020 2020  OFIT'):.        
+0002d770: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+0002d780: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
+0002d790: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+0002d7a0: 2020 2071 7561 6e74 6974 7949 7352 6571     quantityIsReq
+0002d7b0: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
+0002d7c0: 2020 2020 2020 2020 2065 6c69 6620 2875           elif (u
+0002d7d0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
+0002d7e0: 2753 544f 505f 4c4f 5353 5f4c 494d 4954  'STOP_LOSS_LIMIT
+0002d7f0: 2729 206f 7220 2875 7070 6572 6361 7365  ') or (uppercase
+0002d800: 5479 7065 203d 3d20 2754 414b 455f 5052  Type == 'TAKE_PR
+0002d810: 4f46 4954 5f4c 494d 4954 2729 3a0a 2020  OFIT_LIMIT'):.  
+0002d820: 2020 2020 2020 2020 2020 2020 2020 7175                qu
+0002d830: 616e 7469 7479 4973 5265 7175 6972 6564  antityIsRequired
+0002d840: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+0002d850: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+0002d860: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
+0002d870: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+0002d880: 2020 2070 7269 6365 4973 5265 7175 6972     priceIsRequir
+0002d890: 6564 203d 2054 7275 650a 2020 2020 2020  ed = True.      
+0002d8a0: 2020 2020 2020 2020 2020 7469 6d65 496e            timeIn
+0002d8b0: 466f 7263 6549 7352 6571 7569 7265 6420  ForceIsRequired 
+0002d8c0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
+0002d8d0: 2020 2065 6c69 6620 7570 7065 7263 6173     elif uppercas
+0002d8e0: 6554 7970 6520 3d3d 2027 4c49 4d49 545f  eType == 'LIMIT_
+0002d8f0: 4d41 4b45 5227 3a0a 2020 2020 2020 2020  MAKER':.        
+0002d900: 2020 2020 2020 2020 7072 6963 6549 7352          priceIsR
+0002d910: 6571 7569 7265 6420 3d20 5472 7565 0a20  equired = True. 
+0002d920: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0002d930: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
+0002d940: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+0002d950: 2020 2020 2069 6620 7175 616e 7469 7479       if quantity
+0002d960: 4973 5265 7175 6972 6564 3a0a 2020 2020  IsRequired:.    
+0002d970: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0002d980: 6573 745b 2771 7561 6e74 6974 7927 5d20  est['quantity'] 
+0002d990: 3d20 7365 6c66 2e61 6d6f 756e 745f 746f  = self.amount_to
+0002d9a0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002d9b0: 6c2c 2061 6d6f 756e 7429 0a20 2020 2020  l, amount).     
+0002d9c0: 2020 2020 2020 2069 6620 7072 6963 6549         if priceI
+0002d9d0: 7352 6571 7569 7265 643a 0a20 2020 2020  sRequired:.     
+0002d9e0: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+0002d9f0: 6963 6520 6973 204e 6f6e 653a 0a20 2020  ice is None:.   
+0002da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da10: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
+0002da20: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
+0002da30: 6564 6974 4f72 6465 7228 2920 7265 7175  editOrder() requ
+0002da40: 6972 6573 2061 2070 7269 6365 2061 7267  ires a price arg
+0002da50: 756d 656e 7420 666f 7220 6120 2720 2b20  ument for a ' + 
+0002da60: 7479 7065 202b 2027 206f 7264 6572 2729  type + ' order')
+0002da70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002da80: 2072 6571 7565 7374 5b27 7072 6963 6527   request['price'
+0002da90: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
+0002daa0: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+0002dab0: 6f6c 2c20 7072 6963 6529 0a20 2020 2020  ol, price).     
+0002dac0: 2020 2020 2020 2069 6620 7469 6d65 496e         if timeIn
+0002dad0: 466f 7263 6549 7352 6571 7569 7265 643a  ForceIsRequired:
+0002dae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002daf0: 2072 6571 7565 7374 5b27 7469 6d65 496e   request['timeIn
+0002db00: 466f 7263 6527 5d20 3d20 7365 6c66 2e6f  Force'] = self.o
+0002db10: 7074 696f 6e73 5b27 6465 6661 756c 7454  ptions['defaultT
+0002db20: 696d 6549 6e46 6f72 6365 275d 2020 2320  imeInForce']  # 
+0002db30: 2747 5443 2720 3d20 476f 6f64 2054 6f20  'GTC' = Good To 
+0002db40: 4361 6e63 656c 2864 6566 6175 6c74 292c  Cancel(default),
+0002db50: 2027 494f 4327 203d 2049 6d6d 6564 6961   'IOC' = Immedia
+0002db60: 7465 204f 7220 4361 6e63 656c 0a20 2020  te Or Cancel.   
+0002db70: 2020 2020 2020 2020 2069 6620 7374 6f70           if stop
+0002db80: 5072 6963 6549 7352 6571 7569 7265 643a  PriceIsRequired:
+0002db90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002dba0: 2069 6620 7374 6f70 5072 6963 6520 6973   if stopPrice is
+0002dbb0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0002dbc0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0002dbd0: 2049 6e76 616c 6964 4f72 6465 7228 7365   InvalidOrder(se
+0002dbe0: 6c66 2e69 6420 2b20 2720 6564 6974 4f72  lf.id + ' editOr
+0002dbf0: 6465 7228 2920 7265 7175 6972 6573 2061  der() requires a
+0002dc00: 2073 746f 7050 7269 6365 2065 7874 7261   stopPrice extra
+0002dc10: 2070 6172 616d 2066 6f72 2061 2027 202b   param for a ' +
+0002dc20: 2074 7970 6520 2b20 2720 6f72 6465 7227   type + ' order'
+0002dc30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002dc40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002dc50: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0002dc60: 6573 745b 2773 746f 7050 7269 6365 275d  est['stopPrice']
+0002dc70: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+0002dc80: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002dc90: 6c2c 2073 746f 7050 7269 6365 290a 2020  l, stopPrice).  
+0002dca0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0002dcb0: 745b 2763 616e 6365 6c52 6570 6c61 6365  t['cancelReplace
+0002dcc0: 4d6f 6465 275d 203d 2027 5354 4f50 5f4f  Mode'] = 'STOP_O
+0002dcd0: 4e5f 4641 494c 5552 4527 2020 2320 4966  N_FAILURE'  # If
+0002dce0: 2074 6865 2063 616e 6365 6c20 7265 7175   the cancel requ
+0002dcf0: 6573 7420 6661 696c 732c 2074 6865 206e  est fails, the n
+0002dd00: 6577 206f 7264 6572 2070 6c61 6365 6d65  ew order placeme
+0002dd10: 6e74 2077 696c 6c20 6e6f 7420 6265 2061  nt will not be a
+0002dd20: 7474 656d 7074 6564 2e0a 2020 2020 2020  ttempted..      
+0002dd30: 2020 2020 2020 6361 6e63 656c 4964 203d        cancelId =
+0002dd40: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0002dd50: 675f 3228 7061 7261 6d73 2c20 2763 616e  g_2(params, 'can
+0002dd60: 6365 6c4e 6577 436c 6965 6e74 4f72 6465  celNewClientOrde
+0002dd70: 7249 6427 2c20 2763 616e 6365 6c4f 7269  rId', 'cancelOri
+0002dd80: 6743 6c69 656e 744f 7264 6572 4964 2729  gClientOrderId')
+0002dd90: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0002dda0: 6361 6e63 656c 4964 2069 7320 4e6f 6e65  cancelId is None
+0002ddb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002ddc0: 2020 7265 7175 6573 745b 2763 616e 6365    request['cance
+0002ddd0: 6c4f 7264 6572 4964 275d 203d 2069 6420  lOrderId'] = id 
+0002dde0: 2023 2075 7365 7220 6361 6e20 7072 6f76   # user can prov
+0002ddf0: 6964 6520 6569 7468 6572 2063 616e 6365  ide either cance
+0002de00: 6c4f 7264 6572 4964 2c20 6361 6e63 656c  lOrderId, cancel
+0002de10: 4f72 6967 436c 6965 6e74 4f72 6465 7249  OrigClientOrderI
+0002de20: 6420 6f72 2063 616e 6365 6c4f 7269 6743  d or cancelOrigC
+0002de30: 6c69 656e 744f 7264 6572 4964 0a20 2020  lientOrderId.   
+0002de40: 2020 2020 2020 2020 2023 2072 656d 6f76           # remov
+0002de50: 6520 7469 6d65 496e 466f 7263 6520 6672  e timeInForce fr
+0002de60: 6f6d 2070 6172 616d 7320 6265 6361 7573  om params becaus
+0002de70: 6520 504f 2069 7320 6f6e 6c79 2075 7365  e PO is only use
+0002de80: 6420 6279 2073 656c 662e 6973 5f70 6f73  d by self.is_pos
+0002de90: 745f 6f6e 6c79 616e 6420 6974 2773 206e  t_onlyand it's n
+0002dea0: 6f74 2061 2076 616c 6964 2076 616c 7565  ot a valid value
+0002deb0: 2066 6f72 2042 696e 616e 6365 0a20 2020   for Binance.   
+0002dec0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0002ded0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+0002dee0: 616d 732c 2027 7469 6d65 496e 466f 7263  ams, 'timeInForc
+0002def0: 6527 2920 3d3d 2027 504f 273a 0a20 2020  e') == 'PO':.   
+0002df00: 2020 2020 2020 2020 2020 2020 2070 6172               par
+0002df10: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
+0002df20: 7061 7261 6d73 2c20 5b27 7469 6d65 496e  params, ['timeIn
+0002df30: 466f 7263 6527 5d29 0a20 2020 2020 2020  Force']).       
+0002df40: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+0002df50: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+0002df60: 5b27 7175 6f74 654f 7264 6572 5174 7927  ['quoteOrderQty'
+0002df70: 2c20 2763 6f73 7427 2c20 2773 746f 7050  , 'cost', 'stopP
+0002df80: 7269 6365 272c 2027 6e65 7743 6c69 656e  rice', 'newClien
+0002df90: 744f 7264 6572 4964 272c 2027 636c 6965  tOrderId', 'clie
+0002dfa0: 6e74 4f72 6465 7249 6427 2c20 2770 6f73  ntOrderId', 'pos
+0002dfb0: 744f 6e6c 7927 5d29 0a20 2020 2020 2020  tOnly']).       
+0002dfc0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0002dfd0: 7365 6c66 2e70 7269 7661 7465 506f 7374  self.privatePost
+0002dfe0: 4f72 6465 7243 616e 6365 6c52 6570 6c61  OrderCancelRepla
+0002dff0: 6365 2873 656c 662e 6578 7465 6e64 2872  ce(self.extend(r
+0002e000: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+0002e010: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0002e020: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002e030: 7374 5b27 6f72 6465 7249 6427 5d20 3d20  st['orderId'] = 
+0002e040: 6964 0a20 2020 2020 2020 2020 2020 2072  id.            r
+0002e050: 6571 7565 7374 5b27 7175 616e 7469 7479  equest['quantity
+0002e060: 275d 203d 2073 656c 662e 616d 6f75 6e74  '] = self.amount
+0002e070: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+0002e080: 6d62 6f6c 2c20 616d 6f75 6e74 290a 2020  mbol, amount).  
+0002e090: 2020 2020 2020 2020 2020 6966 2070 7269            if pri
+0002e0a0: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+0002e0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e0c0: 7265 7175 6573 745b 2770 7269 6365 275d  request['price']
+0002e0d0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+0002e0e0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002e0f0: 6c2c 2070 7269 6365 290a 2020 2020 2020  l, price).      
+0002e100: 2020 2020 2020 6966 2063 6c69 656e 744f        if clientO
+0002e110: 7264 6572 4964 2069 7320 6e6f 7420 4e6f  rderId is not No
+0002e120: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0002e130: 2020 2020 7265 7175 6573 745b 276f 7269      request['ori
+0002e140: 6743 6c69 656e 744f 7264 6572 4964 275d  gClientOrderId']
+0002e150: 203d 2063 6c69 656e 744f 7264 6572 4964   = clientOrderId
+0002e160: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+0002e170: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
+0002e180: 7061 7261 6d73 2c20 5b27 636c 6965 6e74  params, ['client
+0002e190: 4f72 6465 7249 6427 2c20 276e 6577 436c  OrderId', 'newCl
+0002e1a0: 6965 6e74 4f72 6465 7249 6427 5d29 0a20  ientOrderId']). 
+0002e1b0: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
+0002e1c0: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
+0002e1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e1e0: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+0002e1f0: 6661 7069 5072 6976 6174 6550 7574 4f72  fapiPrivatePutOr
+0002e200: 6465 7228 7365 6c66 2e65 7874 656e 6428  der(self.extend(
+0002e210: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+0002e220: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+0002e230: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+0002e240: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+0002e250: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0002e260: 2073 656c 662e 6461 7069 5072 6976 6174   self.dapiPrivat
+0002e270: 6550 7574 4f72 6465 7228 7365 6c66 2e65  ePutOrder(self.e
+0002e280: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+0002e290: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+0002e2a0: 230a 2020 2020 2020 2020 2320 7370 6f74  #.        # spot
+0002e2b0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0002e2c0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0002e2d0: 2020 2023 2020 2020 2020 2020 2022 6361     #         "ca
+0002e2e0: 6e63 656c 5265 7375 6c74 223a 2022 5355  ncelResult": "SU
+0002e2f0: 4343 4553 5322 2c0a 2020 2020 2020 2020  CCESS",.        
+0002e300: 2320 2020 2020 2020 2020 226e 6577 4f72  #         "newOr
+0002e310: 6465 7252 6573 756c 7422 3a20 2253 5543  derResult": "SUC
+0002e320: 4345 5353 222c 0a20 2020 2020 2020 2023  CESS",.        #
+0002e330: 2020 2020 2020 2020 2022 6361 6e63 656c           "cancel
+0002e340: 5265 7370 6f6e 7365 223a 207b 0a20 2020  Response": {.   
+0002e350: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002e360: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
+0002e370: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
+0002e380: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
+0002e390: 7269 6743 6c69 656e 744f 7264 6572 4964  rigClientOrderId
+0002e3a0: 223a 2022 7765 625f 3366 3632 3836 3438  ": "web_3f628648
+0002e3b0: 3062 3139 3462 3037 3938 3730 6163 3735  0b194b079870ac75
+0002e3c0: 6662 3639 3738 6237 222c 0a20 2020 2020  fb6978b7",.     
+0002e3d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002e3e0: 2022 6f72 6465 7249 6422 3a20 3136 3338   "orderId": 1638
+0002e3f0: 3331 3536 3632 302c 0a20 2020 2020 2020  3156620,.       
+0002e400: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+0002e410: 6f72 6465 724c 6973 7449 6422 3a20 2d31  orderListId": -1
+0002e420: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0002e430: 2020 2020 2020 2020 2263 6c69 656e 744f          "clientO
+0002e440: 7264 6572 4964 223a 2022 417a 7436 666f  rderId": "Azt6fo
+0002e450: 5654 5467 4850 4e68 7142 6634 3154 5474  VTTgHPNhqBf41TTt
+0002e460: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e470: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
+0002e480: 3a20 2231 3430 3030 2e30 3030 3030 3030  : "14000.0000000
+0002e490: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0002e4a0: 2020 2020 2020 2020 2020 226f 7269 6751            "origQ
+0002e4b0: 7479 223a 2022 302e 3030 3131 3030 3030  ty": "0.00110000
+0002e4c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e4d0: 2020 2020 2020 2020 2022 6578 6563 7574           "execut
+0002e4e0: 6564 5174 7922 3a20 2230 2e30 3030 3030  edQty": "0.00000
+0002e4f0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0002e500: 2020 2020 2020 2020 2020 2020 2263 756d              "cum
+0002e510: 6d75 6c61 7469 7665 5175 6f74 6551 7479  mulativeQuoteQty
+0002e520: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
+0002e530: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002e540: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
+0002e550: 2022 4341 4e43 454c 4544 222c 0a20 2020   "CANCELED",.   
+0002e560: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002e570: 2020 2022 7469 6d65 496e 466f 7263 6522     "timeInForce"
+0002e580: 3a20 2247 5443 222c 0a20 2020 2020 2020  : "GTC",.       
+0002e590: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+0002e5a0: 7479 7065 223a 2022 4c49 4d49 5422 2c0a  type": "LIMIT",.
+0002e5b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002e5c0: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
+0002e5d0: 5559 220a 2020 2020 2020 2020 2320 2020  UY".        #   
+0002e5e0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+0002e5f0: 2023 2020 2020 2020 2020 2022 6e65 774f   #         "newO
+0002e600: 7264 6572 5265 7370 6f6e 7365 223a 207b  rderResponse": {
+0002e610: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002e620: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+0002e630: 2022 4254 4355 5344 5422 2c0a 2020 2020   "BTCUSDT",.    
+0002e640: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002e650: 2020 226f 7264 6572 4964 223a 2031 3633    "orderId": 163
+0002e660: 3833 3137 3632 3937 2c0a 2020 2020 2020  83176297,.      
+0002e670: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0002e680: 226f 7264 6572 4c69 7374 4964 223a 202d  "orderListId": -
+0002e690: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+0002e6a0: 2020 2020 2020 2020 2022 636c 6965 6e74           "client
+0002e6b0: 4f72 6465 7249 6422 3a20 2278 2d52 3442  OrderId": "x-R4B
+0002e6c0: 4433 5338 3232 3265 6362 3538 6562 3930  D3S8222ecb58eb90
+0002e6d0: 3734 6662 3162 6530 3138 6322 2c0a 2020  74fb1be018c",.  
+0002e6e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002e6f0: 2020 2020 2274 7261 6e73 6163 7454 696d      "transactTim
+0002e700: 6522 3a20 3136 3730 3839 3138 3437 3933  e": 167089184793
+0002e710: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
+0002e720: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
+0002e730: 3a20 2231 3335 3030 2e30 3030 3030 3030  : "13500.0000000
+0002e740: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0002e750: 2020 2020 2020 2020 2020 226f 7269 6751            "origQ
+0002e760: 7479 223a 2022 302e 3030 3038 3530 3030  ty": "0.00085000
+0002e770: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e780: 2020 2020 2020 2020 2022 6578 6563 7574           "execut
+0002e790: 6564 5174 7922 3a20 2230 2e30 3030 3030  edQty": "0.00000
+0002e7a0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0002e7b0: 2020 2020 2020 2020 2020 2020 2263 756d              "cum
+0002e7c0: 6d75 6c61 7469 7665 5175 6f74 6551 7479  mulativeQuoteQty
+0002e7d0: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
+0002e7e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002e7f0: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
+0002e800: 2022 4e45 5722 2c0a 2020 2020 2020 2020   "NEW",.        
+0002e810: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
+0002e820: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
+0002e830: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+0002e840: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
+0002e850: 3a20 224c 494d 4954 222c 0a20 2020 2020  : "LIMIT",.     
+0002e860: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002e870: 2022 7369 6465 223a 2022 4255 5922 2c0a   "side": "BUY",.
+0002e880: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002e890: 2020 2020 2020 2266 696c 6c73 223a 205b        "fills": [
+0002e8a0: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+0002e8b0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+0002e8c0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0002e8d0: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
+0002e8e0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0002e8f0: 6573 706f 6e73 652c 2027 6e65 774f 7264  esponse, 'newOrd
+0002e900: 6572 5265 7370 6f6e 7365 2729 0a20 2020  erResponse').   
+0002e910: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0002e920: 2e70 6172 7365 5f6f 7264 6572 2864 6174  .parse_order(dat
+0002e930: 612c 206d 6172 6b65 7429 0a0a 2020 2020  a, market)..    
+0002e940: 6465 6620 6564 6974 5f63 6f6e 7472 6163  def edit_contrac
+0002e950: 745f 6f72 6465 7228 7365 6c66 2c20 6964  t_order(self, id
+0002e960: 3a20 7374 722c 2073 796d 626f 6c2c 2074  : str, symbol, t
+0002e970: 7970 652c 2073 6964 652c 2061 6d6f 756e  ype, side, amoun
+0002e980: 742c 2070 7269 6365 3d4e 6f6e 652c 2070  t, price=None, p
+0002e990: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0002e9a0: 2020 2022 2222 0a20 2020 2020 2020 2065     """.        e
+0002e9b0: 6469 7420 6120 7472 6164 6520 6f72 6465  dit a trade orde
+0002e9c0: 720a 2020 2020 2020 2020 7365 6520 6874  r.        see ht
+0002e9d0: 7470 733a 2f2f 6269 6e61 6e63 652d 646f  tps://binance-do
+0002e9e0: 6373 2e67 6974 6875 622e 696f 2f61 7069  cs.github.io/api
+0002e9f0: 646f 6373 2f66 7574 7572 6573 2f65 6e2f  docs/futures/en/
+0002ea00: 236d 6f64 6966 792d 6f72 6465 722d 7472  #modify-order-tr
+0002ea10: 6164 650a 2020 2020 2020 2020 7365 6520  ade.        see 
+0002ea20: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+0002ea30: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+0002ea40: 7069 646f 6373 2f64 656c 6976 6572 792f  pidocs/delivery/
+0002ea50: 656e 2f23 6d6f 6469 6679 2d6f 7264 6572  en/#modify-order
+0002ea60: 2d74 7261 6465 0a20 2020 2020 2020 203a  -trade.        :
+0002ea70: 7061 7261 6d20 7374 7220 6964 3a20 6361  param str id: ca
+0002ea80: 6e63 656c 206f 7264 6572 2069 640a 2020  ncel order id.  
+0002ea90: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0002eaa0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+0002eab0: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+0002eac0: 6172 6b65 7420 746f 2063 7265 6174 6520  arket to create 
+0002ead0: 616e 206f 7264 6572 2069 6e0a 2020 2020  an order in.    
+0002eae0: 2020 2020 3a70 6172 616d 2073 7472 2074      :param str t
+0002eaf0: 7970 653a 2027 6d61 726b 6574 2720 6f72  ype: 'market' or
+0002eb00: 2027 6c69 6d69 7427 0a20 2020 2020 2020   'limit'.       
+0002eb10: 203a 7061 7261 6d20 7374 7220 7369 6465   :param str side
+0002eb20: 3a20 2762 7579 2720 6f72 2027 7365 6c6c  : 'buy' or 'sell
+0002eb30: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
+0002eb40: 2066 6c6f 6174 2061 6d6f 756e 743a 2068   float amount: h
+0002eb50: 6f77 206d 7563 6820 6f66 2063 7572 7265  ow much of curre
+0002eb60: 6e63 7920 796f 7520 7761 6e74 2074 6f20  ncy you want to 
+0002eb70: 7472 6164 6520 696e 2075 6e69 7473 206f  trade in units o
+0002eb80: 6620 6261 7365 2063 7572 7265 6e63 790a  f base currency.
+0002eb90: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+0002eba0: 6c6f 6174 7c4e 6f6e 6520 7072 6963 653a  loat|None price:
+0002ebb0: 2074 6865 2070 7269 6365 2061 7420 7768   the price at wh
+0002ebc0: 6963 6820 7468 6520 6f72 6465 7220 6973  ich the order is
+0002ebd0: 2074 6f20 6265 2066 756c 6c66 696c 6c65   to be fullfille
+0002ebe0: 642c 2069 6e20 756e 6974 7320 6f66 2074  d, in units of t
+0002ebf0: 6865 2062 6173 6520 6375 7272 656e 6379  he base currency
+0002ec00: 2c20 6967 6e6f 7265 6420 696e 206d 6172  , ignored in mar
+0002ec10: 6b65 7420 6f72 6465 7273 0a20 2020 2020  ket orders.     
+0002ec20: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+0002ec30: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+0002ec40: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+0002ec50: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
+0002ec60: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0002ec70: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+0002ec80: 6374 3a20 616e 2060 6f72 6465 7220 7374  ct: an `order st
+0002ec90: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+0002eca0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+0002ecb0: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
+0002ecc0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+0002ecd0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+0002ece0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0002ecf0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+0002ed00: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+0002ed10: 6f6c 290a 2020 2020 2020 2020 6966 206e  ol).        if n
+0002ed20: 6f74 206d 6172 6b65 745b 2763 6f6e 7472  ot market['contr
+0002ed30: 6163 7427 5d3a 0a20 2020 2020 2020 2020  act']:.         
+0002ed40: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
+0002ed50: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
+0002ed60: 2720 6564 6974 436f 6e74 7261 6374 4f72  ' editContractOr
+0002ed70: 6465 7228 2920 646f 6573 206e 6f74 2073  der() does not s
+0002ed80: 7570 706f 7274 2027 202b 206d 6172 6b65  upport ' + marke
+0002ed90: 745b 2774 7970 6527 5d20 2b20 2720 6f72  t['type'] + ' or
+0002eda0: 6465 7273 2729 0a20 2020 2020 2020 2072  ders').        r
+0002edb0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+0002edc0: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
+0002edd0: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
+0002ede0: 2020 2020 2020 2020 2020 2027 7369 6465             'side
+0002edf0: 273a 2073 6964 652e 7570 7065 7228 292c  ': side.upper(),
+0002ee00: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+0002ee10: 2020 2063 6c69 656e 744f 7264 6572 4964     clientOrderId
+0002ee20: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0002ee30: 696e 675f 6e28 7061 7261 6d73 2c20 5b27  ing_n(params, ['
+0002ee40: 6e65 7743 6c69 656e 744f 7264 6572 4964  newClientOrderId
+0002ee50: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
+0002ee60: 6427 2c20 276f 7269 6743 6c69 656e 744f  d', 'origClientO
+0002ee70: 7264 6572 4964 275d 290a 2020 2020 2020  rderId']).      
+0002ee80: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+0002ee90: 4964 275d 203d 2069 640a 2020 2020 2020  Id'] = id.      
+0002eea0: 2020 7265 7175 6573 745b 2771 7561 6e74    request['quant
+0002eeb0: 6974 7927 5d20 3d20 7365 6c66 2e61 6d6f  ity'] = self.amo
+0002eec0: 756e 745f 746f 5f70 7265 6369 7369 6f6e  unt_to_precision
+0002eed0: 2873 796d 626f 6c2c 2061 6d6f 756e 7429  (symbol, amount)
+0002eee0: 0a20 2020 2020 2020 2069 6620 7072 6963  .        if pric
+0002eef0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+0002ef00: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002ef10: 7374 5b27 7072 6963 6527 5d20 3d20 7365  st['price'] = se
+0002ef20: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
+0002ef30: 6973 696f 6e28 7379 6d62 6f6c 2c20 7072  ision(symbol, pr
+0002ef40: 6963 6529 0a20 2020 2020 2020 2069 6620  ice).        if 
+0002ef50: 636c 6965 6e74 4f72 6465 7249 6420 6973  clientOrderId is
+0002ef60: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0002ef70: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0002ef80: 6f72 6967 436c 6965 6e74 4f72 6465 7249  origClientOrderI
+0002ef90: 6427 5d20 3d20 636c 6965 6e74 4f72 6465  d'] = clientOrde
+0002efa0: 7249 640a 2020 2020 2020 2020 7061 7261  rId.        para
+0002efb0: 6d73 203d 2073 656c 662e 6f6d 6974 2870  ms = self.omit(p
+0002efc0: 6172 616d 732c 205b 2763 6c69 656e 744f  arams, ['clientO
+0002efd0: 7264 6572 4964 272c 2027 6e65 7743 6c69  rderId', 'newCli
+0002efe0: 656e 744f 7264 6572 4964 275d 290a 2020  entOrderId']).  
+0002eff0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0002f000: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0002f010: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
+0002f020: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
+0002f030: 6573 706f 6e73 6520 3d20 7365 6c66 2e66  esponse = self.f
+0002f040: 6170 6950 7269 7661 7465 5075 744f 7264  apiPrivatePutOrd
+0002f050: 6572 2873 656c 662e 6578 7465 6e64 2872  er(self.extend(r
+0002f060: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+0002f070: 0a20 2020 2020 2020 2065 6c69 6620 6d61  .        elif ma
+0002f080: 726b 6574 5b27 696e 7665 7273 6527 5d3a  rket['inverse']:
+0002f090: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0002f0a0: 706f 6e73 6520 3d20 7365 6c66 2e64 6170  ponse = self.dap
+0002f0b0: 6950 7269 7661 7465 5075 744f 7264 6572  iPrivatePutOrder
+0002f0c0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+0002f0d0: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+0002f0e0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0002f0f0: 2023 2073 7761 7020 616e 6420 6675 7475   # swap and futu
+0002f100: 7265 0a20 2020 2020 2020 2023 0a20 2020  re.        #.   
+0002f110: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0002f120: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0002f130: 6f72 6465 7249 6422 3a20 3135 3130 3037  orderId": 151007
+0002f140: 3438 3233 3932 2c0a 2020 2020 2020 2020  482392,.        
+0002f150: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
+0002f160: 6c22 3a20 2242 5443 5553 4454 222c 0a20  l": "BTCUSDT",. 
+0002f170: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002f180: 2022 7374 6174 7573 223a 2022 4e45 5722   "status": "NEW"
+0002f190: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0002f1a0: 2020 2020 2263 6c69 656e 744f 7264 6572      "clientOrder
+0002f1b0: 4964 223a 2022 7765 625f 7043 4347 7039  Id": "web_pCCGp9
+0002f1c0: 4149 486a 7a69 4b4c 6c70 4770 5849 222c  AIHjziKLlpGpXI",
+0002f1d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002f1e0: 2020 2022 7072 6963 6522 3a20 2232 3530     "price": "250
+0002f1f0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0002f200: 2020 2020 2020 2022 6176 6750 7269 6365         "avgPrice
+0002f210: 223a 2022 302e 3030 3030 3022 2c0a 2020  ": "0.00000",.  
+0002f220: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002f230: 226f 7269 6751 7479 223a 2022 302e 3030  "origQty": "0.00
+0002f240: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+0002f250: 2020 2020 2020 2265 7865 6375 7465 6451        "executedQ
+0002f260: 7479 223a 2022 3022 2c0a 2020 2020 2020  ty": "0",.      
+0002f270: 2020 2320 2020 2020 2020 2020 2263 756d    #         "cum
+0002f280: 5174 7922 3a20 2230 222c 0a20 2020 2020  Qty": "0",.     
+0002f290: 2020 2023 2020 2020 2020 2020 2022 6375     #         "cu
+0002f2a0: 6d51 756f 7465 223a 2022 3022 2c0a 2020  mQuote": "0",.  
+0002f2b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002f2c0: 2274 696d 6549 6e46 6f72 6365 223a 2022  "timeInForce": "
+0002f2d0: 4754 4322 2c0a 2020 2020 2020 2020 2320  GTC",.        # 
+0002f2e0: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
+0002f2f0: 224c 494d 4954 222c 0a20 2020 2020 2020  "LIMIT",.       
+0002f300: 2023 2020 2020 2020 2020 2022 7265 6475   #         "redu
+0002f310: 6365 4f6e 6c79 223a 2046 616c 7365 2c0a  ceOnly": False,.
+0002f320: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002f330: 2020 2263 6c6f 7365 506f 7369 7469 6f6e    "closePosition
+0002f340: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
+0002f350: 2020 2320 2020 2020 2020 2020 2273 6964    #         "sid
+0002f360: 6522 3a20 2242 5559 222c 0a20 2020 2020  e": "BUY",.     
+0002f370: 2020 2023 2020 2020 2020 2020 2022 706f     #         "po
+0002f380: 7369 7469 6f6e 5369 6465 223a 2022 424f  sitionSide": "BO
+0002f390: 5448 222c 0a20 2020 2020 2020 2023 2020  TH",.        #  
+0002f3a0: 2020 2020 2020 2022 7374 6f70 5072 6963         "stopPric
+0002f3b0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
+0002f3c0: 2023 2020 2020 2020 2020 2022 776f 726b   #         "work
+0002f3d0: 696e 6754 7970 6522 3a20 2243 4f4e 5452  ingType": "CONTR
+0002f3e0: 4143 545f 5052 4943 4522 2c0a 2020 2020  ACT_PRICE",.    
+0002f3f0: 2020 2020 2320 2020 2020 2020 2020 2270      #         "p
+0002f400: 7269 6365 5072 6f74 6563 7422 3a20 4661  riceProtect": Fa
+0002f410: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+0002f420: 2020 2020 2020 2022 6f72 6967 5479 7065         "origType
+0002f430: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
+0002f440: 2020 2020 2320 2020 2020 2020 2020 2275      #         "u
+0002f450: 7064 6174 6554 696d 6522 3a20 3136 3834  pdateTime": 1684
+0002f460: 3330 3035 3837 3834 350a 2020 2020 2020  300587845.      
+0002f470: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0002f480: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
+0002f490: 726e 2073 656c 662e 7061 7273 655f 6f72  rn self.parse_or
+0002f4a0: 6465 7228 7265 7370 6f6e 7365 2c20 6d61  der(response, ma
+0002f4b0: 726b 6574 290a 0a20 2020 2064 6566 2065  rket)..    def e
+0002f4c0: 6469 745f 6f72 6465 7228 7365 6c66 2c20  dit_order(self, 
+0002f4d0: 6964 3a20 7374 722c 2073 796d 626f 6c2c  id: str, symbol,
+0002f4e0: 2074 7970 652c 2073 6964 652c 2061 6d6f   type, side, amo
+0002f4f0: 756e 742c 2070 7269 6365 3d4e 6f6e 652c  unt, price=None,
+0002f500: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0002f510: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0002f520: 2065 6469 7420 6120 7472 6164 6520 6f72   edit a trade or
+0002f530: 6465 720a 2020 2020 2020 2020 7365 6520  der.        see 
+0002f540: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+0002f550: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+0002f560: 7069 646f 6373 2f73 706f 742f 656e 2f23  pidocs/spot/en/#
+0002f570: 6361 6e63 656c 2d61 6e2d 6578 6973 7469  cancel-an-existi
+0002f580: 6e67 2d6f 7264 6572 2d61 6e64 2d73 656e  ng-order-and-sen
+0002f590: 642d 612d 6e65 772d 6f72 6465 722d 7472  d-a-new-order-tr
+0002f5a0: 6164 650a 2020 2020 2020 2020 7365 6520  ade.        see 
+0002f5b0: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+0002f5c0: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+0002f5d0: 7069 646f 6373 2f66 7574 7572 6573 2f65  pidocs/futures/e
+0002f5e0: 6e2f 236d 6f64 6966 792d 6f72 6465 722d  n/#modify-order-
+0002f5f0: 7472 6164 650a 2020 2020 2020 2020 7365  trade.        se
+0002f600: 6520 6874 7470 733a 2f2f 6269 6e61 6e63  e https://binanc
+0002f610: 652d 646f 6373 2e67 6974 6875 622e 696f  e-docs.github.io
+0002f620: 2f61 7069 646f 6373 2f64 656c 6976 6572  /apidocs/deliver
+0002f630: 792f 656e 2f23 6d6f 6469 6679 2d6f 7264  y/en/#modify-ord
+0002f640: 6572 2d74 7261 6465 0a20 2020 2020 2020  er-trade.       
+0002f650: 203a 7061 7261 6d20 7374 7220 6964 3a20   :param str id: 
+0002f660: 6361 6e63 656c 206f 7264 6572 2069 640a  cancel order id.
+0002f670: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0002f680: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
+0002f690: 6564 2073 796d 626f 6c20 6f66 2074 6865  ed symbol of the
+0002f6a0: 206d 6172 6b65 7420 746f 2063 7265 6174   market to creat
+0002f6b0: 6520 616e 206f 7264 6572 2069 6e0a 2020  e an order in.  
+0002f6c0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0002f6d0: 2074 7970 653a 2027 6d61 726b 6574 2720   type: 'market' 
+0002f6e0: 6f72 2027 6c69 6d69 7427 0a20 2020 2020  or 'limit'.     
+0002f6f0: 2020 203a 7061 7261 6d20 7374 7220 7369     :param str si
+0002f700: 6465 3a20 2762 7579 2720 6f72 2027 7365  de: 'buy' or 'se
+0002f710: 6c6c 270a 2020 2020 2020 2020 3a70 6172  ll'.        :par
+0002f720: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+0002f730: 2068 6f77 206d 7563 6820 6f66 2063 7572   how much of cur
+0002f740: 7265 6e63 7920 796f 7520 7761 6e74 2074  rency you want t
+0002f750: 6f20 7472 6164 6520 696e 2075 6e69 7473  o trade in units
+0002f760: 206f 6620 6261 7365 2063 7572 7265 6e63   of base currenc
+0002f770: 790a 2020 2020 2020 2020 3a70 6172 616d  y.        :param
+0002f780: 2066 6c6f 6174 7c4e 6f6e 6520 7072 6963   float|None pric
+0002f790: 653a 2074 6865 2070 7269 6365 2061 7420  e: the price at 
+0002f7a0: 7768 6963 6820 7468 6520 6f72 6465 7220  which the order 
+0002f7b0: 6973 2074 6f20 6265 2066 756c 6c66 696c  is to be fullfil
+0002f7c0: 6c65 642c 2069 6e20 756e 6974 7320 6f66  led, in units of
+0002f7d0: 2074 6865 2062 6173 6520 6375 7272 656e   the base curren
+0002f7e0: 6379 2c20 6967 6e6f 7265 6420 696e 206d  cy, ignored in m
+0002f7f0: 6172 6b65 7420 6f72 6465 7273 0a20 2020  arket orders.   
+0002f800: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0002f810: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0002f820: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0002f830: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+0002f840: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+0002f850: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0002f860: 6469 6374 3a20 616e 2060 6f72 6465 7220  dict: an `order 
+0002f870: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+0002f880: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+0002f890: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
+0002f8a0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+0002f8b0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+0002f8c0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+0002f8d0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+0002f8e0: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+0002f8f0: 6d62 6f6c 290a 2020 2020 2020 2020 6966  mbol).        if
+0002f900: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
+0002f910: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
+0002f920: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
+0002f930: 6428 7365 6c66 2e69 6420 2b20 2720 6564  d(self.id + ' ed
+0002f940: 6974 4f72 6465 7228 2920 646f 6573 206e  itOrder() does n
+0002f950: 6f74 2073 7570 706f 7274 2027 202b 206d  ot support ' + m
+0002f960: 6172 6b65 745b 2774 7970 6527 5d20 2b20  arket['type'] + 
+0002f970: 2720 6f72 6465 7273 2729 0a20 2020 2020  ' orders').     
+0002f980: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
+0002f990: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
+0002f9a0: 2020 7265 7475 726e 2073 656c 662e 6564    return self.ed
+0002f9b0: 6974 5f73 706f 745f 6f72 6465 7228 6964  it_spot_order(id
+0002f9c0: 2c20 7379 6d62 6f6c 2c20 7479 7065 2c20  , symbol, type, 
+0002f9d0: 7369 6465 2c20 616d 6f75 6e74 2c20 7072  side, amount, pr
+0002f9e0: 6963 652c 2070 6172 616d 7329 0a20 2020  ice, params).   
+0002f9f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002fa00: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0002fa10: 6c66 2e65 6469 745f 636f 6e74 7261 6374  lf.edit_contract
+0002fa20: 5f6f 7264 6572 2869 642c 2073 796d 626f  _order(id, symbo
+0002fa30: 6c2c 2074 7970 652c 2073 6964 652c 2061  l, type, side, a
+0002fa40: 6d6f 756e 742c 2070 7269 6365 2c20 7061  mount, price, pa
+0002fa50: 7261 6d73 290a 0a20 2020 2064 6566 2070  rams)..    def p
+0002fa60: 6172 7365 5f6f 7264 6572 5f73 7461 7475  arse_order_statu
+0002fa70: 7328 7365 6c66 2c20 7374 6174 7573 293a  s(self, status):
+0002fa80: 0a20 2020 2020 2020 2073 7461 7475 7365  .        statuse
+0002fa90: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+0002faa0: 2020 274e 4557 273a 2027 6f70 656e 272c    'NEW': 'open',
+0002fab0: 0a20 2020 2020 2020 2020 2020 2027 5041  .            'PA
+0002fac0: 5254 4941 4c4c 595f 4649 4c4c 4544 273a  RTIALLY_FILLED':
+0002fad0: 2027 6f70 656e 272c 0a20 2020 2020 2020   'open',.       
+0002fae0: 2020 2020 2027 4143 4345 5054 4544 273a       'ACCEPTED':
+0002faf0: 2027 6f70 656e 272c 0a20 2020 2020 2020   'open',.       
+0002fb00: 2020 2020 2027 4649 4c4c 4544 273a 2027       'FILLED': '
+0002fb10: 636c 6f73 6564 272c 0a20 2020 2020 2020  closed',.       
+0002fb20: 2020 2020 2027 4341 4e43 454c 4544 273a       'CANCELED':
+0002fb30: 2027 6361 6e63 656c 6564 272c 0a20 2020   'canceled',.   
+0002fb40: 2020 2020 2020 2020 2027 4341 4e43 454c           'CANCEL
+0002fb50: 4c45 4427 3a20 2763 616e 6365 6c65 6427  LED': 'canceled'
+0002fb60: 2c0a 2020 2020 2020 2020 2020 2020 2750  ,.            'P
+0002fb70: 454e 4449 4e47 5f43 414e 4345 4c27 3a20  ENDING_CANCEL': 
+0002fb80: 2763 616e 6365 6c69 6e67 272c 2020 2320  'canceling',  # 
+0002fb90: 6375 7272 656e 746c 7920 756e 7573 6564  currently unused
+0002fba0: 0a20 2020 2020 2020 2020 2020 2027 5245  .            'RE
+0002fbb0: 4a45 4354 4544 273a 2027 7265 6a65 6374  JECTED': 'reject
+0002fbc0: 6564 272c 0a20 2020 2020 2020 2020 2020  ed',.           
+0002fbd0: 2027 4558 5049 5245 4427 3a20 2765 7870   'EXPIRED': 'exp
+0002fbe0: 6972 6564 272c 0a20 2020 2020 2020 2020  ired',.         
+0002fbf0: 2020 2027 4558 5049 5245 445f 494e 5f4d     'EXPIRED_IN_M
+0002fc00: 4154 4348 273a 2027 6578 7069 7265 6427  ATCH': 'expired'
+0002fc10: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0002fc20: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0002fc30: 7361 6665 5f73 7472 696e 6728 7374 6174  safe_string(stat
+0002fc40: 7573 6573 2c20 7374 6174 7573 2c20 7374  uses, status, st
+0002fc50: 6174 7573 290a 0a20 2020 2064 6566 2070  atus)..    def p
+0002fc60: 6172 7365 5f6f 7264 6572 2873 656c 662c  arse_order(self,
+0002fc70: 206f 7264 6572 2c20 6d61 726b 6574 3d4e   order, market=N
+0002fc80: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+0002fc90: 2020 2020 2020 2020 2320 7370 6f74 0a20          # spot. 
+0002fca0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0002fcb0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+0002fcc0: 2023 2020 2020 2020 2020 2022 7379 6d62   #         "symb
+0002fcd0: 6f6c 223a 2022 4c54 4342 5443 222c 0a20  ol": "LTCBTC",. 
+0002fce0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002fcf0: 2022 6f72 6465 7249 6422 3a20 312c 0a20   "orderId": 1,. 
+0002fd00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002fd10: 2022 636c 6965 6e74 4f72 6465 7249 6422   "clientOrderId"
+0002fd20: 3a20 226d 794f 7264 6572 3122 2c0a 2020  : "myOrder1",.  
+0002fd30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002fd40: 2270 7269 6365 223a 2022 302e 3122 2c0a  "price": "0.1",.
+0002fd50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002fd60: 2020 226f 7269 6751 7479 223a 2022 312e    "origQty": "1.
+0002fd70: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0002fd80: 2020 2020 2020 2265 7865 6375 7465 6451        "executedQ
+0002fd90: 7479 223a 2022 302e 3022 2c0a 2020 2020  ty": "0.0",.    
+0002fda0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
+0002fdb0: 756d 6d75 6c61 7469 7665 5175 6f74 6551  ummulativeQuoteQ
+0002fdc0: 7479 223a 2022 302e 3022 2c0a 2020 2020  ty": "0.0",.    
+0002fdd0: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
+0002fde0: 7461 7475 7322 3a20 224e 4557 222c 0a20  tatus": "NEW",. 
+0002fdf0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002fe00: 2022 7469 6d65 496e 466f 7263 6522 3a20   "timeInForce": 
+0002fe10: 2247 5443 222c 0a20 2020 2020 2020 2023  "GTC",.        #
+0002fe20: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
+0002fe30: 2022 4c49 4d49 5422 2c0a 2020 2020 2020   "LIMIT",.      
+0002fe40: 2020 2320 2020 2020 2020 2020 2273 6964    #         "sid
+0002fe50: 6522 3a20 2242 5559 222c 0a20 2020 2020  e": "BUY",.     
+0002fe60: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
+0002fe70: 6f70 5072 6963 6522 3a20 2230 2e30 222c  opPrice": "0.0",
+0002fe80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002fe90: 2020 2022 6963 6562 6572 6751 7479 223a     "icebergQty":
+0002fea0: 2022 302e 3022 2c0a 2020 2020 2020 2020   "0.0",.        
+0002feb0: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
+0002fec0: 3a20 3134 3939 3832 3733 3139 3535 392c  : 1499827319559,
+0002fed0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002fee0: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
+0002fef0: 2031 3439 3938 3237 3331 3935 3539 2c0a   1499827319559,.
+0002ff00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002ff10: 2020 2269 7357 6f72 6b69 6e67 223a 2054    "isWorking": T
+0002ff20: 7275 650a 2020 2020 2020 2020 2320 2020  rue.        #   
+0002ff30: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0002ff40: 2020 2020 2020 2320 7370 6f74 3a20 6564        # spot: ed
+0002ff50: 6974 4f72 6465 720a 2020 2020 2020 2020  itOrder.        
+0002ff60: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0002ff70: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0002ff80: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+0002ff90: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
+0002ffa0: 2023 2020 2020 2020 2020 2022 6f72 6465   #         "orde
+0002ffb0: 7249 6422 3a20 3136 3338 3331 3736 3239  rId": 1638317629
+0002ffc0: 372c 0a20 2020 2020 2020 2023 2020 2020  7,.        #    
+0002ffd0: 2020 2020 2022 6f72 6465 724c 6973 7449       "orderListI
+0002ffe0: 6422 3a20 2d31 2c0a 2020 2020 2020 2020  d": -1,.        
+0002fff0: 2320 2020 2020 2020 2020 2263 6c69 656e  #         "clien
+00030000: 744f 7264 6572 4964 223a 2022 782d 5234  tOrderId": "x-R4
+00030010: 4244 3353 3832 3232 6563 6235 3865 6239  BD3S8222ecb58eb9
+00030020: 3037 3466 6231 6265 3031 3863 222c 0a20  074fb1be018c",. 
+00030030: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030040: 2022 7472 616e 7361 6374 5469 6d65 223a   "transactTime":
+00030050: 2031 3637 3038 3931 3834 3739 3332 2c0a   1670891847932,.
+00030060: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030070: 2020 2270 7269 6365 223a 2022 3133 3530    "price": "1350
+00030080: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
+00030090: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000300a0: 6f72 6967 5174 7922 3a20 2230 2e30 3030  origQty": "0.000
+000300b0: 3835 3030 3022 2c0a 2020 2020 2020 2020  85000",.        
+000300c0: 2320 2020 2020 2020 2020 2265 7865 6375  #         "execu
+000300d0: 7465 6451 7479 223a 2022 302e 3030 3030  tedQty": "0.0000
+000300e0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000300f0: 2020 2020 2020 2020 2022 6375 6d6d 756c           "cummul
+00030100: 6174 6976 6551 756f 7465 5174 7922 3a20  ativeQuoteQty": 
+00030110: 2230 2e30 3030 3030 3030 3022 2c0a 2020  "0.00000000",.  
+00030120: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00030130: 2273 7461 7475 7322 3a20 224e 4557 222c  "status": "NEW",
+00030140: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030150: 2020 2022 7469 6d65 496e 466f 7263 6522     "timeInForce"
+00030160: 3a20 2247 5443 222c 0a20 2020 2020 2020  : "GTC",.       
+00030170: 2023 2020 2020 2020 2020 2022 7479 7065   #         "type
+00030180: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
+00030190: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
+000301a0: 6964 6522 3a20 2242 5559 222c 0a20 2020  ide": "BUY",.   
+000301b0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000301c0: 6669 6c6c 7322 3a20 5b5d 0a20 2020 2020  fills": [].     
+000301d0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+000301e0: 2020 2023 0a20 2020 2020 2020 2023 2073     #.        # s
+000301f0: 7761 7020 616e 6420 6675 7475 7265 3a20  wap and future: 
+00030200: 6564 6974 4f72 6465 720a 2020 2020 2020  editOrder.      
+00030210: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+00030220: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00030230: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
+00030240: 2031 3531 3030 3734 3832 3339 322c 0a20   151007482392,. 
+00030250: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030260: 2022 7379 6d62 6f6c 223a 2022 4254 4355   "symbol": "BTCU
+00030270: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+00030280: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
+00030290: 3a20 224e 4557 222c 0a20 2020 2020 2020  : "NEW",.       
+000302a0: 2023 2020 2020 2020 2020 2022 636c 6965   #         "clie
+000302b0: 6e74 4f72 6465 7249 6422 3a20 2277 6562  ntOrderId": "web
+000302c0: 5f70 4343 4770 3941 4948 6a7a 694b 4c6c  _pCCGp9AIHjziKLl
+000302d0: 7047 7058 4922 2c0a 2020 2020 2020 2020  pGpXI",.        
+000302e0: 2320 2020 2020 2020 2020 2270 7269 6365  #         "price
+000302f0: 223a 2022 3235 3030 3022 2c0a 2020 2020  ": "25000",.    
+00030300: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
+00030310: 7667 5072 6963 6522 3a20 2230 2e30 3030  vgPrice": "0.000
+00030320: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00030330: 2020 2020 2020 2022 6f72 6967 5174 7922         "origQty"
+00030340: 3a20 2230 2e30 3031 222c 0a20 2020 2020  : "0.001",.     
+00030350: 2020 2023 2020 2020 2020 2020 2022 6578     #         "ex
+00030360: 6563 7574 6564 5174 7922 3a20 2230 222c  ecutedQty": "0",
+00030370: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030380: 2020 2022 6375 6d51 7479 223a 2022 3022     "cumQty": "0"
+00030390: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000303a0: 2020 2020 2263 756d 5175 6f74 6522 3a20      "cumQuote": 
+000303b0: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+000303c0: 2020 2020 2020 2022 7469 6d65 496e 466f         "timeInFo
+000303d0: 7263 6522 3a20 2247 5443 222c 0a20 2020  rce": "GTC",.   
+000303e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000303f0: 7479 7065 223a 2022 4c49 4d49 5422 2c0a  type": "LIMIT",.
+00030400: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030410: 2020 2272 6564 7563 654f 6e6c 7922 3a20    "reduceOnly": 
+00030420: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+00030430: 2020 2020 2020 2020 2022 636c 6f73 6550           "closeP
+00030440: 6f73 6974 696f 6e22 3a20 4661 6c73 652c  osition": False,
+00030450: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030460: 2020 2022 7369 6465 223a 2022 4255 5922     "side": "BUY"
+00030470: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030480: 2020 2020 2270 6f73 6974 696f 6e53 6964      "positionSid
+00030490: 6522 3a20 2242 4f54 4822 2c0a 2020 2020  e": "BOTH",.    
+000304a0: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
+000304b0: 746f 7050 7269 6365 223a 2022 3022 2c0a  topPrice": "0",.
+000304c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000304d0: 2020 2277 6f72 6b69 6e67 5479 7065 223a    "workingType":
+000304e0: 2022 434f 4e54 5241 4354 5f50 5249 4345   "CONTRACT_PRICE
+000304f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030500: 2020 2020 2022 7072 6963 6550 726f 7465       "priceProte
+00030510: 6374 223a 2046 616c 7365 2c0a 2020 2020  ct": False,.    
+00030520: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
+00030530: 7269 6754 7970 6522 3a20 224c 494d 4954  rigType": "LIMIT
+00030540: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030550: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
+00030560: 223a 2031 3638 3433 3030 3538 3738 3435  ": 1684300587845
+00030570: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+00030580: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00030590: 2020 2023 2066 7574 7572 6573 0a20 2020     # futures.   
+000305a0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+000305b0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+000305c0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+000305d0: 223a 2022 4254 4355 5344 5422 2c0a 2020  ": "BTCUSDT",.  
+000305e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000305f0: 226f 7264 6572 4964 223a 2031 2c0a 2020  "orderId": 1,.  
+00030600: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00030610: 2263 6c69 656e 744f 7264 6572 4964 223a  "clientOrderId":
+00030620: 2022 6d79 4f72 6465 7231 222c 0a20 2020   "myOrder1",.   
+00030630: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00030640: 7072 6963 6522 3a20 2230 2e31 222c 0a20  price": "0.1",. 
+00030650: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030660: 2022 6f72 6967 5174 7922 3a20 2231 2e30   "origQty": "1.0
+00030670: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030680: 2020 2020 2022 6578 6563 7574 6564 5174       "executedQt
+00030690: 7922 3a20 2231 2e30 222c 0a20 2020 2020  y": "1.0",.     
+000306a0: 2020 2023 2020 2020 2020 2020 2022 6375     #         "cu
+000306b0: 6d51 756f 7465 223a 2022 3130 2e30 222c  mQuote": "10.0",
+000306c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000306d0: 2020 2022 7374 6174 7573 223a 2022 4e45     "status": "NE
+000306e0: 5722 2c0a 2020 2020 2020 2020 2320 2020  W",.        #   
+000306f0: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
+00030700: 6365 223a 2022 4754 4322 2c0a 2020 2020  ce": "GTC",.    
+00030710: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00030720: 7970 6522 3a20 224c 494d 4954 222c 0a20  ype": "LIMIT",. 
+00030730: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030740: 2022 7369 6465 223a 2022 4255 5922 2c0a   "side": "BUY",.
+00030750: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030760: 2020 2273 746f 7050 7269 6365 223a 2022    "stopPrice": "
+00030770: 302e 3022 2c0a 2020 2020 2020 2020 2320  0.0",.        # 
+00030780: 2020 2020 2020 2020 2275 7064 6174 6554          "updateT
+00030790: 696d 6522 3a20 3134 3939 3832 3733 3139  ime": 1499827319
+000307a0: 3535 390a 2020 2020 2020 2020 2320 2020  559.        #   
+000307b0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+000307c0: 2020 2020 2020 2320 6372 6561 7465 4f72        # createOr
+000307d0: 6465 7220 7769 7468 207b 226e 6577 4f72  der with {"newOr
+000307e0: 6465 7252 6573 7054 7970 6522 3a20 2246  derRespType": "F
+000307f0: 554c 4c22 7d0a 2020 2020 2020 2020 230a  ULL"}.        #.
+00030800: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00030810: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030820: 2273 796d 626f 6c22 3a20 2242 5443 5553  "symbol": "BTCUS
+00030830: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+00030840: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
+00030850: 3534 3033 3233 3339 3339 2c0a 2020 2020  5403233939,.    
+00030860: 2020 2020 2320 2020 2020 2020 226f 7264      #       "ord
+00030870: 6572 4c69 7374 4964 223a 202d 312c 0a20  erListId": -1,. 
+00030880: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00030890: 636c 6965 6e74 4f72 6465 7249 6422 3a20  clientOrderId": 
+000308a0: 2278 2d52 3442 4433 5338 3235 6536 3639  "x-R4BD3S825e669
+000308b0: 6537 3562 3663 3134 6636 3961 3263 3433  e75b6c14f69a2c43
+000308c0: 6522 2c0a 2020 2020 2020 2020 2320 2020  e",.        #   
+000308d0: 2020 2020 2274 7261 6e73 6163 7454 696d      "transactTim
+000308e0: 6522 3a20 3136 3137 3135 3139 3233 3734  e": 161715192374
+000308f0: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
+00030900: 2020 2022 7072 6963 6522 3a20 2230 2e30     "price": "0.0
+00030910: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+00030920: 2020 2320 2020 2020 2020 226f 7269 6751    #       "origQ
+00030930: 7479 223a 2022 302e 3030 3035 3030 3030  ty": "0.00050000
+00030940: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030950: 2020 2022 6578 6563 7574 6564 5174 7922     "executedQty"
+00030960: 3a20 2230 2e30 3030 3530 3030 3022 2c0a  : "0.00050000",.
+00030970: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030980: 2263 756d 6d75 6c61 7469 7665 5175 6f74  "cummulativeQuot
+00030990: 6551 7479 223a 2022 3239 2e34 3730 3831  eQty": "29.47081
+000309a0: 3530 3022 2c0a 2020 2020 2020 2020 2320  500",.        # 
+000309b0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
+000309c0: 2246 494c 4c45 4422 2c0a 2020 2020 2020  "FILLED",.      
+000309d0: 2020 2320 2020 2020 2020 2274 696d 6549    #       "timeI
+000309e0: 6e46 6f72 6365 223a 2022 4754 4322 2c0a  nForce": "GTC",.
+000309f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030a00: 2274 7970 6522 3a20 224d 4152 4b45 5422  "type": "MARKET"
+00030a10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030a20: 2020 2273 6964 6522 3a20 2242 5559 222c    "side": "BUY",
+00030a30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030a40: 2022 6669 6c6c 7322 3a20 5b0a 2020 2020   "fills": [.    
+00030a50: 2020 2020 2320 2020 2020 2020 2020 7b0a      #         {.
+00030a60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030a70: 2020 2020 2270 7269 6365 223a 2022 3538      "price": "58
+00030a80: 3934 312e 3633 3030 3030 3030 222c 0a20  941.63000000",. 
+00030a90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030aa0: 2020 2022 7174 7922 3a20 2230 2e30 3030     "qty": "0.000
+00030ab0: 3530 3030 3022 2c0a 2020 2020 2020 2020  50000",.        
+00030ac0: 2320 2020 2020 2020 2020 2020 2263 6f6d  #           "com
+00030ad0: 6d69 7373 696f 6e22 3a20 2230 2e30 3030  mission": "0.000
+00030ae0: 3037 3035 3022 2c0a 2020 2020 2020 2020  07050",.        
+00030af0: 2320 2020 2020 2020 2020 2020 2263 6f6d  #           "com
+00030b00: 6d69 7373 696f 6e41 7373 6574 223a 2022  missionAsset": "
+00030b10: 424e 4222 2c0a 2020 2020 2020 2020 2320  BNB",.        # 
+00030b20: 2020 2020 2020 2020 2020 2274 7261 6465            "trade
+00030b30: 4964 223a 2037 3337 3436 3636 3331 0a20  Id": 737466631. 
+00030b40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030b50: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+00030b60: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+00030b70: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00030b80: 2020 2020 2020 2023 2064 656c 6976 6572         # deliver
+00030b90: 790a 2020 2020 2020 2020 230a 2020 2020  y.        #.    
+00030ba0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00030bb0: 2020 2020 2320 2020 2020 2020 226f 7264      #       "ord
+00030bc0: 6572 4964 223a 2022 3138 3734 3237 3237  erId": "18742727
+00030bd0: 3431 3122 2c0a 2020 2020 2020 2020 2320  411",.        # 
+00030be0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+00030bf0: 2245 5448 5553 445f 5045 5250 222c 0a20  "ETHUSD_PERP",. 
+00030c00: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00030c10: 7061 6972 223a 2022 4554 4855 5344 222c  pair": "ETHUSD",
+00030c20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030c30: 2022 7374 6174 7573 223a 2022 4649 4c4c   "status": "FILL
+00030c40: 4544 222c 0a20 2020 2020 2020 2023 2020  ED",.        #  
+00030c50: 2020 2020 2022 636c 6965 6e74 4f72 6465       "clientOrde
+00030c60: 7249 6422 3a20 2278 2d78 634b 7447 6863  rId": "x-xcKtGhc
+00030c70: 7533 6532 6431 3530 3366 6464 3534 3362  u3e2d1503fdd543b
+00030c80: 3362 3032 3431 3922 2c0a 2020 2020 2020  3b02419",.      
+00030c90: 2020 2320 2020 2020 2020 2270 7269 6365    #       "price
+00030ca0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+00030cb0: 2320 2020 2020 2020 2261 7667 5072 6963  #       "avgPric
+00030cc0: 6522 3a20 2234 3532 322e 3134 222c 0a20  e": "4522.14",. 
+00030cd0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00030ce0: 6f72 6967 5174 7922 3a20 2231 222c 0a20  origQty": "1",. 
+00030cf0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00030d00: 6578 6563 7574 6564 5174 7922 3a20 2231  executedQty": "1
+00030d10: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00030d20: 2020 2022 6375 6d42 6173 6522 3a20 2230     "cumBase": "0
+00030d30: 2e30 3032 3231 3133 3422 2c0a 2020 2020  .00221134",.    
+00030d40: 2020 2020 2320 2020 2020 2020 2274 696d      #       "tim
+00030d50: 6549 6e46 6f72 6365 223a 2022 4754 4322  eInForce": "GTC"
+00030d60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030d70: 2020 2274 7970 6522 3a20 224d 4152 4b45    "type": "MARKE
+00030d80: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
+00030d90: 2020 2020 2272 6564 7563 654f 6e6c 7922      "reduceOnly"
+00030da0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
+00030db0: 2023 2020 2020 2020 2022 636c 6f73 6550   #       "closeP
+00030dc0: 6f73 6974 696f 6e22 3a20 4661 6c73 652c  osition": False,
+00030dd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030de0: 2022 7369 6465 223a 2022 5345 4c4c 222c   "side": "SELL",
+00030df0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030e00: 2022 706f 7369 7469 6f6e 5369 6465 223a   "positionSide":
+00030e10: 2022 424f 5448 222c 0a20 2020 2020 2020   "BOTH",.       
+00030e20: 2023 2020 2020 2020 2022 7374 6f70 5072   #       "stopPr
+00030e30: 6963 6522 3a20 2230 222c 0a20 2020 2020  ice": "0",.     
+00030e40: 2020 2023 2020 2020 2020 2022 776f 726b     #       "work
+00030e50: 696e 6754 7970 6522 3a20 2243 4f4e 5452  ingType": "CONTR
+00030e60: 4143 545f 5052 4943 4522 2c0a 2020 2020  ACT_PRICE",.    
+00030e70: 2020 2020 2320 2020 2020 2020 2270 7269      #       "pri
+00030e80: 6365 5072 6f74 6563 7422 3a20 4661 6c73  ceProtect": Fals
+00030e90: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+00030ea0: 2020 2022 6f72 6967 5479 7065 223a 2022     "origType": "
+00030eb0: 4d41 524b 4554 222c 0a20 2020 2020 2020  MARKET",.       
+00030ec0: 2023 2020 2020 2020 2022 7469 6d65 223a   #       "time":
+00030ed0: 2022 3136 3336 3036 3139 3532 3636 3022   "1636061952660"
+00030ee0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030ef0: 2020 2275 7064 6174 6554 696d 6522 3a20    "updateTime": 
+00030f00: 2231 3633 3630 3631 3935 3236 3630 220a  "1636061952660".
+00030f10: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+00030f20: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00030f30: 2020 2320 6f70 7469 6f6e 3a20 6372 6561    # option: crea
+00030f40: 7465 4f72 6465 722c 2066 6574 6368 4f72  teOrder, fetchOr
+00030f50: 6465 722c 2066 6574 6368 4f70 656e 4f72  der, fetchOpenOr
+00030f60: 6465 7273 2c20 6665 7463 684f 7264 6572  ders, fetchOrder
+00030f70: 730a 2020 2020 2020 2020 230a 2020 2020  s.        #.    
+00030f80: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00030f90: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
+00030fa0: 7264 6572 4964 223a 2034 3732 3838 3333  rderId": 4728833
+00030fb0: 3038 3534 3336 3937 3731 3532 2c0a 2020  085436977152,.  
+00030fc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00030fd0: 2273 796d 626f 6c22 3a20 2245 5448 2d32  "symbol": "ETH-2
+00030fe0: 3330 3231 312d 3135 3030 2d43 222c 0a20  30211-1500-C",. 
+00030ff0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00031000: 2022 7072 6963 6522 3a20 2231 302e 3022   "price": "10.0"
+00031010: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00031020: 2020 2020 2271 7561 6e74 6974 7922 3a20      "quantity": 
+00031030: 2231 2e30 3022 2c0a 2020 2020 2020 2020  "1.00",.        
+00031040: 2320 2020 2020 2020 2020 2265 7865 6375  #         "execu
+00031050: 7465 6451 7479 223a 2022 302e 3030 222c  tedQty": "0.00",
+00031060: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00031070: 2020 2022 6665 6522 3a20 2230 222c 0a20     "fee": "0",. 
+00031080: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00031090: 2022 7369 6465 223a 2022 4255 5922 2c0a   "side": "BUY",.
+000310a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000310b0: 2020 2274 7970 6522 3a20 224c 494d 4954    "type": "LIMIT
+000310c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000310d0: 2020 2020 2022 7469 6d65 496e 466f 7263       "timeInForc
+000310e0: 6522 3a20 2247 5443 222c 0a20 2020 2020  e": "GTC",.     
+000310f0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00031100: 6475 6365 4f6e 6c79 223a 2046 616c 7365  duceOnly": False
+00031110: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00031120: 2020 2020 2270 6f73 744f 6e6c 7922 3a20      "postOnly": 
+00031130: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+00031140: 2020 2020 2020 2020 2022 6372 6561 7465           "create
+00031150: 5469 6d65 223a 2031 3637 3630 3833 3033  Time": 167608303
+00031160: 3434 3632 2c0a 2020 2020 2020 2020 2320  4462,.        # 
+00031170: 2020 2020 2020 2020 2275 7064 6174 6554          "updateT
+00031180: 696d 6522 3a20 3136 3736 3038 3330 3334  ime": 1676083034
+00031190: 3436 322c 0a20 2020 2020 2020 2023 2020  462,.        #  
+000311a0: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
+000311b0: 2022 4143 4345 5054 4544 222c 0a20 2020   "ACCEPTED",.   
+000311c0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000311d0: 6176 6750 7269 6365 223a 2022 3022 2c0a  avgPrice": "0",.
+000311e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000311f0: 2020 2273 6f75 7263 6522 3a20 2241 5049    "source": "API
+00031200: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00031210: 2020 2020 2022 636c 6965 6e74 4f72 6465       "clientOrde
+00031220: 7249 6422 3a20 2222 2c0a 2020 2020 2020  rId": "",.      
+00031230: 2020 2320 2020 2020 2020 2020 2270 7269    #         "pri
+00031240: 6365 5363 616c 6522 3a20 312c 0a20 2020  ceScale": 1,.   
+00031250: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00031260: 7175 616e 7469 7479 5363 616c 6522 3a20  quantityScale": 
+00031270: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
+00031280: 2020 2020 2022 6f70 7469 6f6e 5369 6465       "optionSide
+00031290: 223a 2022 4341 4c4c 222c 0a20 2020 2020  ": "CALL",.     
+000312a0: 2020 2023 2020 2020 2020 2020 2022 7175     #         "qu
+000312b0: 6f74 6541 7373 6574 223a 2022 5553 4454  oteAsset": "USDT
+000312c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000312d0: 2020 2020 2022 6c61 7374 5472 6164 6522       "lastTrade"
+000312e0: 3a20 7b22 6964 223a 2236 3922 2c22 7469  : {"id":"69","ti
+000312f0: 6d65 223a 2231 3637 3630 3834 3433 3035  me":"16760844305
+00031300: 3637 222c 2270 7269 6365 223a 2232 342e  67","price":"24.
+00031310: 3922 2c22 7174 7922 3a22 312e 3030 227d  9","qty":"1.00"}
+00031320: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00031330: 2020 2020 226d 6d70 223a 2046 616c 7365      "mmp": False
+00031340: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+00031350: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00031360: 2020 2073 7461 7475 7320 3d20 7365 6c66     status = self
+00031370: 2e70 6172 7365 5f6f 7264 6572 5f73 7461  .parse_order_sta
+00031380: 7475 7328 7365 6c66 2e73 6166 655f 7374  tus(self.safe_st
+00031390: 7269 6e67 286f 7264 6572 2c20 2773 7461  ring(order, 'sta
+000313a0: 7475 7327 2929 0a20 2020 2020 2020 206d  tus')).        m
+000313b0: 6172 6b65 7449 6420 3d20 7365 6c66 2e73  arketId = self.s
+000313c0: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
+000313d0: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
+000313e0: 2020 2020 6d61 726b 6574 5479 7065 203d      marketType =
+000313f0: 2027 636f 6e74 7261 6374 2720 6966 2028   'contract' if (
+00031400: 2763 6c6f 7365 506f 7369 7469 6f6e 2720  'closePosition' 
+00031410: 696e 206f 7264 6572 2920 656c 7365 2027  in order) else '
+00031420: 7370 6f74 270a 2020 2020 2020 2020 7379  spot'.        sy
+00031430: 6d62 6f6c 203d 2073 656c 662e 7361 6665  mbol = self.safe
+00031440: 5f73 796d 626f 6c28 6d61 726b 6574 4964  _symbol(marketId
+00031450: 2c20 6d61 726b 6574 2c20 4e6f 6e65 2c20  , market, None, 
+00031460: 6d61 726b 6574 5479 7065 290a 2020 2020  marketType).    
+00031470: 2020 2020 6669 6c6c 6564 203d 2073 656c      filled = sel
+00031480: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
+00031490: 6465 722c 2027 6578 6563 7574 6564 5174  der, 'executedQt
+000314a0: 7927 2c20 2730 2729 0a20 2020 2020 2020  y', '0').       
+000314b0: 2074 696d 6573 7461 6d70 203d 204e 6f6e   timestamp = Non
+000314c0: 650a 2020 2020 2020 2020 6c61 7374 5472  e.        lastTr
+000314d0: 6164 6554 696d 6573 7461 6d70 203d 204e  adeTimestamp = N
+000314e0: 6f6e 650a 2020 2020 2020 2020 6966 2027  one.        if '
+000314f0: 7469 6d65 2720 696e 206f 7264 6572 3a0a  time' in order:.
+00031500: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00031510: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
+00031520: 655f 696e 7465 6765 7228 6f72 6465 722c  e_integer(order,
+00031530: 2027 7469 6d65 2729 0a20 2020 2020 2020   'time').       
+00031540: 2065 6c69 6620 2777 6f72 6b69 6e67 5469   elif 'workingTi
+00031550: 6d65 2720 696e 206f 7264 6572 3a0a 2020  me' in order:.  
+00031560: 2020 2020 2020 2020 2020 6c61 7374 5472            lastTr
+00031570: 6164 6554 696d 6573 7461 6d70 203d 2073  adeTimestamp = s
+00031580: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+00031590: 286f 7264 6572 2c20 2774 7261 6e73 6163  (order, 'transac
+000315a0: 7454 696d 6527 290a 2020 2020 2020 2020  tTime').        
+000315b0: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
+000315c0: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+000315d0: 7228 6f72 6465 722c 2027 776f 726b 696e  r(order, 'workin
+000315e0: 6754 696d 6527 290a 2020 2020 2020 2020  gTime').        
+000315f0: 656c 6966 2027 7472 616e 7361 6374 5469  elif 'transactTi
+00031600: 6d65 2720 696e 206f 7264 6572 3a0a 2020  me' in order:.  
+00031610: 2020 2020 2020 2020 2020 6c61 7374 5472            lastTr
+00031620: 6164 6554 696d 6573 7461 6d70 203d 2073  adeTimestamp = s
+00031630: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+00031640: 286f 7264 6572 2c20 2774 7261 6e73 6163  (order, 'transac
+00031650: 7454 696d 6527 290a 2020 2020 2020 2020  tTime').        
+00031660: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
+00031670: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+00031680: 7228 6f72 6465 722c 2027 7472 616e 7361  r(order, 'transa
+00031690: 6374 5469 6d65 2729 0a20 2020 2020 2020  ctTime').       
+000316a0: 2065 6c69 6620 2763 7265 6174 6554 696d   elif 'createTim
+000316b0: 6527 2069 6e20 6f72 6465 723a 0a20 2020  e' in order:.   
+000316c0: 2020 2020 2020 2020 206c 6173 7454 7261           lastTra
+000316d0: 6465 5469 6d65 7374 616d 7020 3d20 7365  deTimestamp = se
+000316e0: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
+000316f0: 6f72 6465 722c 2027 7570 6461 7465 5469  order, 'updateTi
+00031700: 6d65 2729 0a20 2020 2020 2020 2020 2020  me').           
+00031710: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
+00031720: 662e 7361 6665 5f69 6e74 6567 6572 286f  f.safe_integer(o
+00031730: 7264 6572 2c20 2763 7265 6174 6554 696d  rder, 'createTim
+00031740: 6527 290a 2020 2020 2020 2020 656c 6966  e').        elif
+00031750: 2027 7570 6461 7465 5469 6d65 2720 696e   'updateTime' in
+00031760: 206f 7264 6572 3a0a 2020 2020 2020 2020   order:.        
+00031770: 2020 2020 6966 2073 7461 7475 7320 3d3d      if status ==
+00031780: 2027 6f70 656e 273a 0a20 2020 2020 2020   'open':.       
+00031790: 2020 2020 2020 2020 2069 6620 5072 6563           if Prec
+000317a0: 6973 652e 7374 7269 6e67 5f67 7428 6669  ise.string_gt(fi
+000317b0: 6c6c 6564 2c20 2730 2729 3a0a 2020 2020  lled, '0'):.    
+000317c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000317d0: 6c61 7374 5472 6164 6554 696d 6573 7461  lastTradeTimesta
+000317e0: 6d70 203d 2073 656c 662e 7361 6665 5f69  mp = self.safe_i
+000317f0: 6e74 6567 6572 286f 7264 6572 2c20 2775  nteger(order, 'u
+00031800: 7064 6174 6554 696d 6527 290a 2020 2020  pdateTime').    
+00031810: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00031820: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00031830: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
+00031840: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+00031850: 6765 7228 6f72 6465 722c 2027 7570 6461  ger(order, 'upda
+00031860: 7465 5469 6d65 2729 0a20 2020 2020 2020  teTime').       
+00031870: 2061 7665 7261 6765 203d 2073 656c 662e   average = self.
+00031880: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
+00031890: 722c 2027 6176 6750 7269 6365 2729 0a20  r, 'avgPrice'). 
+000318a0: 2020 2020 2020 2070 7269 6365 203d 2073         price = s
+000318b0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000318c0: 6f72 6465 722c 2027 7072 6963 6527 290a  order, 'price').
+000318d0: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
+000318e0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+000318f0: 675f 3228 6f72 6465 722c 2027 6f72 6967  g_2(order, 'orig
+00031900: 5174 7927 2c20 2771 7561 6e74 6974 7927  Qty', 'quantity'
+00031910: 290a 2020 2020 2020 2020 2320 2d20 5370  ).        # - Sp
+00031920: 6f74 2f4d 6172 6769 6e20 6d61 726b 6574  ot/Margin market
+00031930: 3a20 6375 6d6d 756c 6174 6976 6551 756f  : cummulativeQuo
+00031940: 7465 5174 790a 2020 2020 2020 2020 2320  teQty.        # 
+00031950: 2d20 4675 7475 7265 7320 6d61 726b 6574  - Futures market
+00031960: 3a20 6375 6d51 756f 7465 2e0a 2020 2020  : cumQuote..    
+00031970: 2020 2020 2320 2020 4e6f 7465 2073 656c      #   Note sel
+00031980: 6620 6973 206e 6f74 2074 6865 2061 6374  f is not the act
+00031990: 7561 6c20 636f 7374 2c20 7369 6e63 6520  ual cost, since 
+000319a0: 4269 6e61 6e63 6520 6675 7475 7265 7320  Binance futures 
+000319b0: 7573 6573 206c 6576 6572 6167 6520 746f  uses leverage to
+000319c0: 2063 616c 6375 6c61 7465 206d 6172 6769   calculate margi
+000319d0: 6e73 2e0a 2020 2020 2020 2020 636f 7374  ns..        cost
+000319e0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+000319f0: 696e 675f 3228 6f72 6465 722c 2027 6375  ing_2(order, 'cu
+00031a00: 6d6d 756c 6174 6976 6551 756f 7465 5174  mmulativeQuoteQt
+00031a10: 7927 2c20 2763 756d 5175 6f74 6527 290a  y', 'cumQuote').
+00031a20: 2020 2020 2020 2020 636f 7374 203d 2073          cost = s
+00031a30: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00031a40: 6f72 6465 722c 2027 6375 6d42 6173 6527  order, 'cumBase'
+00031a50: 2c20 636f 7374 290a 2020 2020 2020 2020  , cost).        
+00031a60: 6964 203d 2073 656c 662e 7361 6665 5f73  id = self.safe_s
+00031a70: 7472 696e 6728 6f72 6465 722c 2027 6f72  tring(order, 'or
+00031a80: 6465 7249 6427 290a 2020 2020 2020 2020  derId').        
+00031a90: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
+00031aa0: 5f73 7472 696e 675f 6c6f 7765 7228 6f72  _string_lower(or
+00031ab0: 6465 722c 2027 7479 7065 2729 0a20 2020  der, 'type').   
+00031ac0: 2020 2020 2073 6964 6520 3d20 7365 6c66       side = self
+00031ad0: 2e73 6166 655f 7374 7269 6e67 5f6c 6f77  .safe_string_low
+00031ae0: 6572 286f 7264 6572 2c20 2773 6964 6527  er(order, 'side'
+00031af0: 290a 2020 2020 2020 2020 6669 6c6c 7320  ).        fills 
+00031b00: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00031b10: 6528 6f72 6465 722c 2027 6669 6c6c 7327  e(order, 'fills'
+00031b20: 2c20 5b5d 290a 2020 2020 2020 2020 636c  , []).        cl
+00031b30: 6965 6e74 4f72 6465 7249 6420 3d20 7365  ientOrderId = se
+00031b40: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
+00031b50: 7264 6572 2c20 2763 6c69 656e 744f 7264  rder, 'clientOrd
+00031b60: 6572 4964 2729 0a20 2020 2020 2020 2074  erId').        t
+00031b70: 696d 6549 6e46 6f72 6365 203d 2073 656c  imeInForce = sel
+00031b80: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
+00031b90: 6465 722c 2027 7469 6d65 496e 466f 7263  der, 'timeInForc
+00031ba0: 6527 290a 2020 2020 2020 2020 6966 2074  e').        if t
+00031bb0: 696d 6549 6e46 6f72 6365 203d 3d20 2747  imeInForce == 'G
+00031bc0: 5458 273a 0a20 2020 2020 2020 2020 2020  TX':.           
+00031bd0: 2023 2047 5458 206d 6561 6e73 2022 476f   # GTX means "Go
+00031be0: 6f64 2054 696c 6c20 4372 6f73 7369 6e67  od Till Crossing
+00031bf0: 2220 616e 6420 6973 2061 6e20 6571 7569  " and is an equi
+00031c00: 7661 6c65 6e74 2077 6179 206f 6620 7361  valent way of sa
+00031c10: 7969 6e67 2050 6f73 7420 4f6e 6c79 0a20  ying Post Only. 
+00031c20: 2020 2020 2020 2020 2020 2074 696d 6549             timeI
+00031c30: 6e46 6f72 6365 203d 2027 504f 270a 2020  nForce = 'PO'.  
+00031c40: 2020 2020 2020 706f 7374 4f6e 6c79 203d        postOnly =
+00031c50: 2028 7479 7065 203d 3d20 276c 696d 6974   (type == 'limit
+00031c60: 5f6d 616b 6572 2729 206f 7220 2874 696d  _maker') or (tim
+00031c70: 6549 6e46 6f72 6365 203d 3d20 2750 4f27  eInForce == 'PO'
+00031c80: 290a 2020 2020 2020 2020 6966 2074 7970  ).        if typ
+00031c90: 6520 3d3d 2027 6c69 6d69 745f 6d61 6b65  e == 'limit_make
+00031ca0: 7227 3a0a 2020 2020 2020 2020 2020 2020  r':.            
+00031cb0: 7479 7065 203d 2027 6c69 6d69 7427 0a20  type = 'limit'. 
+00031cc0: 2020 2020 2020 2073 746f 7050 7269 6365         stopPrice
+00031cd0: 5374 7269 6e67 203d 2073 656c 662e 7361  String = self.sa
+00031ce0: 6665 5f73 7472 696e 6728 6f72 6465 722c  fe_string(order,
+00031cf0: 2027 7374 6f70 5072 6963 6527 290a 2020   'stopPrice').  
+00031d00: 2020 2020 2020 7374 6f70 5072 6963 6520        stopPrice 
+00031d10: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+00031d20: 6265 7228 7365 6c66 2e6f 6d69 745f 7a65  ber(self.omit_ze
+00031d30: 726f 2873 746f 7050 7269 6365 5374 7269  ro(stopPriceStri
+00031d40: 6e67 2929 0a20 2020 2020 2020 2072 6574  ng)).        ret
+00031d50: 7572 6e20 7365 6c66 2e73 6166 655f 6f72  urn self.safe_or
+00031d60: 6465 7228 7b0a 2020 2020 2020 2020 2020  der({.          
+00031d70: 2020 2769 6e66 6f27 3a20 6f72 6465 722c    'info': order,
+00031d80: 0a20 2020 2020 2020 2020 2020 2027 6964  .            'id
+00031d90: 273a 2069 642c 0a20 2020 2020 2020 2020  ': id,.         
+00031da0: 2020 2027 636c 6965 6e74 4f72 6465 7249     'clientOrderI
+00031db0: 6427 3a20 636c 6965 6e74 4f72 6465 7249  d': clientOrderI
+00031dc0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
+00031dd0: 7469 6d65 7374 616d 7027 3a20 7469 6d65  timestamp': time
+00031de0: 7374 616d 702c 0a20 2020 2020 2020 2020  stamp,.         
+00031df0: 2020 2027 6461 7465 7469 6d65 273a 2073     'datetime': s
+00031e00: 656c 662e 6973 6f38 3630 3128 7469 6d65  elf.iso8601(time
+00031e10: 7374 616d 7029 2c0a 2020 2020 2020 2020  stamp),.        
+00031e20: 2020 2020 276c 6173 7454 7261 6465 5469      'lastTradeTi
+00031e30: 6d65 7374 616d 7027 3a20 6c61 7374 5472  mestamp': lastTr
+00031e40: 6164 6554 696d 6573 7461 6d70 2c0a 2020  adeTimestamp,.  
+00031e50: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+00031e60: 6c27 3a20 7379 6d62 6f6c 2c0a 2020 2020  l': symbol,.    
+00031e70: 2020 2020 2020 2020 2774 7970 6527 3a20          'type': 
+00031e80: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+00031e90: 2020 2774 696d 6549 6e46 6f72 6365 273a    'timeInForce':
+00031ea0: 2074 696d 6549 6e46 6f72 6365 2c0a 2020   timeInForce,.  
+00031eb0: 2020 2020 2020 2020 2020 2770 6f73 744f            'postO
+00031ec0: 6e6c 7927 3a20 706f 7374 4f6e 6c79 2c0a  nly': postOnly,.
+00031ed0: 2020 2020 2020 2020 2020 2020 2772 6564              'red
+00031ee0: 7563 654f 6e6c 7927 3a20 7365 6c66 2e73  uceOnly': self.s
+00031ef0: 6166 655f 7661 6c75 6528 6f72 6465 722c  afe_value(order,
+00031f00: 2027 7265 6475 6365 4f6e 6c79 2729 2c0a   'reduceOnly'),.
+00031f10: 2020 2020 2020 2020 2020 2020 2773 6964              'sid
+00031f20: 6527 3a20 7369 6465 2c0a 2020 2020 2020  e': side,.      
+00031f30: 2020 2020 2020 2770 7269 6365 273a 2070        'price': p
+00031f40: 7269 6365 2c0a 2020 2020 2020 2020 2020  rice,.          
+00031f50: 2020 2774 7269 6767 6572 5072 6963 6527    'triggerPrice'
+00031f60: 3a20 7374 6f70 5072 6963 652c 0a20 2020  : stopPrice,.   
+00031f70: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
+00031f80: 273a 2061 6d6f 756e 742c 0a20 2020 2020  ': amount,.     
+00031f90: 2020 2020 2020 2027 636f 7374 273a 2063         'cost': c
+00031fa0: 6f73 742c 0a20 2020 2020 2020 2020 2020  ost,.           
+00031fb0: 2027 6176 6572 6167 6527 3a20 6176 6572   'average': aver
+00031fc0: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
+00031fd0: 2027 6669 6c6c 6564 273a 2066 696c 6c65   'filled': fille
+00031fe0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
+00031ff0: 7265 6d61 696e 696e 6727 3a20 4e6f 6e65  remaining': None
+00032000: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
+00032010: 7461 7475 7327 3a20 7374 6174 7573 2c0a  tatus': status,.
+00032020: 2020 2020 2020 2020 2020 2020 2766 6565              'fee
+00032030: 273a 207b 0a20 2020 2020 2020 2020 2020  ': {.           
+00032040: 2020 2020 2027 6375 7272 656e 6379 273a       'currency':
+00032050: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00032060: 6728 6f72 6465 722c 2027 7175 6f74 6541  g(order, 'quoteA
+00032070: 7373 6574 2729 2c0a 2020 2020 2020 2020  sset'),.        
+00032080: 2020 2020 2020 2020 2763 6f73 7427 3a20          'cost': 
+00032090: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+000320a0: 286f 7264 6572 2c20 2766 6565 2729 2c0a  (order, 'fee'),.
+000320b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000320c0: 2772 6174 6527 3a20 4e6f 6e65 2c0a 2020  'rate': None,.  
+000320d0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+000320e0: 2020 2020 2020 2020 2027 7472 6164 6573           'trades
+000320f0: 273a 2066 696c 6c73 2c0a 2020 2020 2020  ': fills,.      
+00032100: 2020 7d2c 206d 6172 6b65 7429 0a0a 2020    }, market)..  
+00032110: 2020 6465 6620 6372 6561 7465 5f6f 7264    def create_ord
+00032120: 6572 2873 656c 662c 2073 796d 626f 6c3a  er(self, symbol:
+00032130: 2073 7472 2c20 7479 7065 2c20 7369 6465   str, type, side
+00032140: 3a20 4f72 6465 7253 6964 652c 2061 6d6f  : OrderSide, amo
+00032150: 756e 742c 2070 7269 6365 3d4e 6f6e 652c  unt, price=None,
+00032160: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00032170: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00032180: 2063 7265 6174 6520 6120 7472 6164 6520   create a trade 
+00032190: 6f72 6465 720a 2020 2020 2020 2020 3a70  order.        :p
+000321a0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
+000321b0: 2075 6e69 6669 6564 2073 796d 626f 6c20   unified symbol 
+000321c0: 6f66 2074 6865 206d 6172 6b65 7420 746f  of the market to
+000321d0: 2063 7265 6174 6520 616e 206f 7264 6572   create an order
+000321e0: 2069 6e0a 2020 2020 2020 2020 3a70 6172   in.        :par
+000321f0: 616d 2073 7472 2074 7970 653a 2027 6d61  am str type: 'ma
+00032200: 726b 6574 2720 6f72 2027 6c69 6d69 7427  rket' or 'limit'
+00032210: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00032220: 7374 7220 7369 6465 3a20 2762 7579 2720  str side: 'buy' 
+00032230: 6f72 2027 7365 6c6c 270a 2020 2020 2020  or 'sell'.      
+00032240: 2020 3a70 6172 616d 2066 6c6f 6174 2061    :param float a
+00032250: 6d6f 756e 743a 2068 6f77 206d 7563 6820  mount: how much 
+00032260: 6f66 2063 7572 7265 6e63 7920 796f 7520  of currency you 
+00032270: 7761 6e74 2074 6f20 7472 6164 6520 696e  want to trade in
+00032280: 2075 6e69 7473 206f 6620 6261 7365 2063   units of base c
+00032290: 7572 7265 6e63 790a 2020 2020 2020 2020  urrency.        
+000322a0: 3a70 6172 616d 2066 6c6f 6174 7c4e 6f6e  :param float|Non
+000322b0: 6520 7072 6963 653a 2074 6865 2070 7269  e price: the pri
+000322c0: 6365 2061 7420 7768 6963 6820 7468 6520  ce at which the 
+000322d0: 6f72 6465 7220 6973 2074 6f20 6265 2066  order is to be f
+000322e0: 756c 6c66 696c 6c65 642c 2069 6e20 756e  ullfilled, in un
+000322f0: 6974 7320 6f66 2074 6865 2071 756f 7465  its of the quote
+00032300: 2063 7572 7265 6e63 792c 2069 676e 6f72   currency, ignor
+00032310: 6564 2069 6e20 6d61 726b 6574 206f 7264  ed in market ord
+00032320: 6572 730a 2020 2020 2020 2020 3a70 6172  ers.        :par
+00032330: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+00032340: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00032350: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00032360: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00032370: 706f 696e 740a 2020 2020 2020 2020 3a70  point.        :p
+00032380: 6172 616d 2073 7472 7c4e 6f6e 6520 7061  aram str|None pa
+00032390: 7261 6d73 5b27 6d61 7267 696e 4d6f 6465  rams['marginMode
+000323a0: 275d 3a20 2763 726f 7373 2720 6f72 2027  ']: 'cross' or '
+000323b0: 6973 6f6c 6174 6564 272c 2066 6f72 2073  isolated', for s
+000323c0: 706f 7420 6d61 7267 696e 2074 7261 6469  pot margin tradi
+000323d0: 6e67 0a20 2020 2020 2020 203a 7265 7475  ng.        :retu
+000323e0: 726e 7320 6469 6374 3a20 616e 2060 6f72  rns dict: an `or
+000323f0: 6465 7220 7374 7275 6374 7572 6520 3c68  der structure <h
+00032400: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00032410: 2e63 6f6d 2f23 2f3f 6964 3d6f 7264 6572  .com/#/?id=order
+00032420: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+00032430: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00032440: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00032450: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+00032460: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+00032470: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+00032480: 2020 6d61 726b 6574 5479 7065 203d 2073    marketType = s
+00032490: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000324a0: 7061 7261 6d73 2c20 2774 7970 6527 2c20  params, 'type', 
+000324b0: 6d61 726b 6574 5b27 7479 7065 275d 290a  market['type']).
+000324c0: 2020 2020 2020 2020 636c 6965 6e74 4f72          clientOr
+000324d0: 6465 7249 6420 3d20 7365 6c66 2e73 6166  derId = self.saf
+000324e0: 655f 7374 7269 6e67 5f32 2870 6172 616d  e_string_2(param
+000324f0: 732c 2027 6e65 7743 6c69 656e 744f 7264  s, 'newClientOrd
+00032500: 6572 4964 272c 2027 636c 6965 6e74 4f72  erId', 'clientOr
+00032510: 6465 7249 6427 290a 2020 2020 2020 2020  derId').        
+00032520: 696e 6974 6961 6c55 7070 6572 6361 7365  initialUppercase
+00032530: 5479 7065 203d 2074 7970 652e 7570 7065  Type = type.uppe
+00032540: 7228 290a 2020 2020 2020 2020 6973 4d61  r().        isMa
+00032550: 726b 6574 4f72 6465 7220 3d20 696e 6974  rketOrder = init
+00032560: 6961 6c55 7070 6572 6361 7365 5479 7065  ialUppercaseType
+00032570: 203d 3d20 274d 4152 4b45 5427 0a20 2020   == 'MARKET'.   
+00032580: 2020 2020 2069 734c 696d 6974 4f72 6465       isLimitOrde
+00032590: 7220 3d20 696e 6974 6961 6c55 7070 6572  r = initialUpper
+000325a0: 6361 7365 5479 7065 203d 3d20 274c 494d  caseType == 'LIM
+000325b0: 4954 270a 2020 2020 2020 2020 706f 7374  IT'.        post
+000325c0: 4f6e 6c79 203d 2073 656c 662e 6973 5f70  Only = self.is_p
+000325d0: 6f73 745f 6f6e 6c79 2869 734d 6172 6b65  ost_only(isMarke
+000325e0: 744f 7264 6572 2c20 696e 6974 6961 6c55  tOrder, initialU
+000325f0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
+00032600: 274c 494d 4954 5f4d 414b 4552 272c 2070  'LIMIT_MAKER', p
+00032610: 6172 616d 7329 0a20 2020 2020 2020 2074  arams).        t
+00032620: 7269 6767 6572 5072 6963 6520 3d20 7365  riggerPrice = se
+00032630: 6c66 2e73 6166 655f 7661 6c75 655f 3228  lf.safe_value_2(
+00032640: 7061 7261 6d73 2c20 2774 7269 6767 6572  params, 'trigger
+00032650: 5072 6963 6527 2c20 2773 746f 7050 7269  Price', 'stopPri
+00032660: 6365 2729 0a20 2020 2020 2020 2073 746f  ce').        sto
+00032670: 704c 6f73 7350 7269 6365 203d 2073 656c  pLossPrice = sel
+00032680: 662e 7361 6665 5f76 616c 7565 2870 6172  f.safe_value(par
+00032690: 616d 732c 2027 7374 6f70 4c6f 7373 5072  ams, 'stopLossPr
+000326a0: 6963 6527 2c20 7472 6967 6765 7250 7269  ice', triggerPri
+000326b0: 6365 2920 2023 2066 616c 6c62 6163 6b20  ce)  # fallback 
+000326c0: 746f 2073 746f 704c 6f73 730a 2020 2020  to stopLoss.    
+000326d0: 2020 2020 7461 6b65 5072 6f66 6974 5072      takeProfitPr
+000326e0: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
+000326f0: 7661 6c75 6528 7061 7261 6d73 2c20 2774  value(params, 't
+00032700: 616b 6550 726f 6669 7450 7269 6365 2729  akeProfitPrice')
+00032710: 0a20 2020 2020 2020 2069 7353 746f 704c  .        isStopL
+00032720: 6f73 7320 3d20 7374 6f70 4c6f 7373 5072  oss = stopLossPr
+00032730: 6963 6520 6973 206e 6f74 204e 6f6e 650a  ice is not None.
+00032740: 2020 2020 2020 2020 6973 5461 6b65 5072          isTakePr
+00032750: 6f66 6974 203d 2074 616b 6550 726f 6669  ofit = takeProfi
+00032760: 7450 7269 6365 2069 7320 6e6f 7420 4e6f  tPrice is not No
+00032770: 6e65 0a20 2020 2020 2020 2070 6172 616d  ne.        param
+00032780: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+00032790: 7261 6d73 2c20 5b27 7479 7065 272c 2027  rams, ['type', '
+000327a0: 6e65 7743 6c69 656e 744f 7264 6572 4964  newClientOrderId
+000327b0: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
+000327c0: 6427 2c20 2770 6f73 744f 6e6c 7927 2c20  d', 'postOnly', 
+000327d0: 2773 746f 704c 6f73 7350 7269 6365 272c  'stopLossPrice',
+000327e0: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
+000327f0: 6527 2c20 2773 746f 7050 7269 6365 272c  e', 'stopPrice',
+00032800: 2027 7472 6967 6765 7250 7269 6365 275d   'triggerPrice']
+00032810: 290a 2020 2020 2020 2020 6d61 7267 696e  ).        margin
+00032820: 4d6f 6465 2c20 7175 6572 7920 3d20 7365  Mode, query = se
+00032830: 6c66 2e68 616e 646c 655f 6d61 7267 696e  lf.handle_margin
+00032840: 5f6d 6f64 655f 616e 645f 7061 7261 6d73  _mode_and_params
+00032850: 2827 6372 6561 7465 4f72 6465 7227 2c20  ('createOrder', 
+00032860: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+00032870: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+00032880: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00032890: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+000328a0: 2020 2020 2020 2020 2020 2020 2773 6964              'sid
+000328b0: 6527 3a20 7369 6465 2e75 7070 6572 2829  e': side.upper()
+000328c0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+000328d0: 2020 2020 6d65 7468 6f64 203d 2027 7072      method = 'pr
+000328e0: 6976 6174 6550 6f73 744f 7264 6572 270a  ivatePostOrder'.
+000328f0: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
+00032900: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
+00032910: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00032920: 3d20 2766 6170 6950 7269 7661 7465 506f  = 'fapiPrivatePo
+00032930: 7374 4f72 6465 7227 0a20 2020 2020 2020  stOrder'.       
+00032940: 2065 6c69 6620 6d61 726b 6574 5b27 696e   elif market['in
+00032950: 7665 7273 6527 5d3a 0a20 2020 2020 2020  verse']:.       
+00032960: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
+00032970: 6170 6950 7269 7661 7465 506f 7374 4f72  apiPrivatePostOr
+00032980: 6465 7227 0a20 2020 2020 2020 2065 6c69  der'.        eli
+00032990: 6620 6d61 726b 6574 5479 7065 203d 3d20  f marketType == 
+000329a0: 276d 6172 6769 6e27 206f 7220 6d61 7267  'margin' or marg
+000329b0: 696e 4d6f 6465 2069 7320 6e6f 7420 4e6f  inMode is not No
+000329c0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000329d0: 6d65 7468 6f64 203d 2027 7361 7069 506f  method = 'sapiPo
+000329e0: 7374 4d61 7267 696e 4f72 6465 7227 0a20  stMarginOrder'. 
+000329f0: 2020 2020 2020 2020 2020 2072 6564 7563             reduc
+00032a00: 654f 6e6c 7920 3d20 7365 6c66 2e73 6166  eOnly = self.saf
+00032a10: 655f 7661 6c75 6528 7061 7261 6d73 2c20  e_value(params, 
+00032a20: 2772 6564 7563 654f 6e6c 7927 290a 2020  'reduceOnly').  
+00032a30: 2020 2020 2020 2020 2020 6966 2072 6564            if red
+00032a40: 7563 654f 6e6c 793a 0a20 2020 2020 2020  uceOnly:.       
+00032a50: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00032a60: 5b27 7369 6465 4566 6665 6374 5479 7065  ['sideEffectType
+00032a70: 275d 203d 2027 4155 544f 5f52 4550 4159  '] = 'AUTO_REPAY
+00032a80: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+00032a90: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
+00032aa0: 6f6d 6974 2870 6172 616d 732c 2027 7265  omit(params, 're
+00032ab0: 6475 6365 4f6e 6c79 2729 0a20 2020 2020  duceOnly').     
+00032ac0: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
+00032ad0: 6f74 275d 206f 7220 6d61 726b 6574 5479  ot'] or marketTy
+00032ae0: 7065 203d 3d20 276d 6172 6769 6e27 3a0a  pe == 'margin':.
+00032af0: 2020 2020 2020 2020 2020 2020 2320 7375              # su
+00032b00: 7070 6f72 7420 666f 7220 7465 7374 696e  pport for testin
+00032b10: 6720 6f72 6465 7273 0a20 2020 2020 2020  g orders.       
+00032b20: 2020 2020 2074 6573 7420 3d20 7365 6c66       test = self
+00032b30: 2e73 6166 655f 7661 6c75 6528 7175 6572  .safe_value(quer
+00032b40: 792c 2027 7465 7374 272c 2046 616c 7365  y, 'test', False
+00032b50: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00032b60: 2074 6573 743a 0a20 2020 2020 2020 2020   test:.         
+00032b70: 2020 2020 2020 206d 6574 686f 6420 2b3d         method +=
+00032b80: 2027 5465 7374 270a 2020 2020 2020 2020   'Test'.        
+00032b90: 2020 2020 2320 6f6e 6c79 2073 7570 706f      # only suppo
+00032ba0: 7274 6564 2066 6f72 2073 706f 742f 6d61  rted for spot/ma
+00032bb0: 7267 696e 2061 7069 2861 6c6c 206d 6172  rgin api(all mar
+00032bc0: 6769 6e20 6d61 726b 6574 7320 6172 6520  gin markets are 
+00032bd0: 7370 6f74 206d 6172 6b65 7473 290a 2020  spot markets).  
+00032be0: 2020 2020 2020 2020 2020 6966 2070 6f73            if pos
+00032bf0: 744f 6e6c 793a 0a20 2020 2020 2020 2020  tOnly:.         
+00032c00: 2020 2020 2020 2074 7970 6520 3d20 274c         type = 'L
+00032c10: 494d 4954 5f4d 414b 4552 270a 2020 2020  IMIT_MAKER'.    
+00032c20: 2020 2020 7570 7065 7263 6173 6554 7970      uppercaseTyp
+00032c30: 6520 3d20 7479 7065 2e75 7070 6572 2829  e = type.upper()
+00032c40: 0a20 2020 2020 2020 2073 746f 7050 7269  .        stopPri
+00032c50: 6365 203d 204e 6f6e 650a 2020 2020 2020  ce = None.      
+00032c60: 2020 6966 2069 7353 746f 704c 6f73 733a    if isStopLoss:
+00032c70: 0a20 2020 2020 2020 2020 2020 2073 746f  .            sto
+00032c80: 7050 7269 6365 203d 2073 746f 704c 6f73  pPrice = stopLos
+00032c90: 7350 7269 6365 0a20 2020 2020 2020 2020  sPrice.         
+00032ca0: 2020 2069 6620 6973 4d61 726b 6574 4f72     if isMarketOr
+00032cb0: 6465 723a 0a20 2020 2020 2020 2020 2020  der:.           
+00032cc0: 2020 2020 2023 2073 706f 7420 5354 4f50       # spot STOP
+00032cd0: 5f4c 4f53 5320 6d61 726b 6574 206f 7264  _LOSS market ord
+00032ce0: 6572 7320 6172 6520 6e6f 7420 6120 7661  ers are not a va
+00032cf0: 6c69 6420 6f72 6465 7220 7479 7065 0a20  lid order type. 
+00032d00: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+00032d10: 7070 6572 6361 7365 5479 7065 203d 2027  ppercaseType = '
+00032d20: 5354 4f50 5f4d 4152 4b45 5427 2069 6620  STOP_MARKET' if 
+00032d30: 6d61 726b 6574 5b27 636f 6e74 7261 6374  market['contract
+00032d40: 275d 2065 6c73 6520 2753 544f 505f 4c4f  '] else 'STOP_LO
+00032d50: 5353 270a 2020 2020 2020 2020 2020 2020  SS'.            
+00032d60: 656c 6966 2069 734c 696d 6974 4f72 6465  elif isLimitOrde
+00032d70: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+00032d80: 2020 2075 7070 6572 6361 7365 5479 7065     uppercaseType
+00032d90: 203d 2027 5354 4f50 2720 6966 206d 6172   = 'STOP' if mar
+00032da0: 6b65 745b 2763 6f6e 7472 6163 7427 5d20  ket['contract'] 
+00032db0: 656c 7365 2027 5354 4f50 5f4c 4f53 535f  else 'STOP_LOSS_
+00032dc0: 4c49 4d49 5427 0a20 2020 2020 2020 2065  LIMIT'.        e
+00032dd0: 6c69 6620 6973 5461 6b65 5072 6f66 6974  lif isTakeProfit
+00032de0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+00032df0: 6f70 5072 6963 6520 3d20 7461 6b65 5072  opPrice = takePr
+00032e00: 6f66 6974 5072 6963 650a 2020 2020 2020  ofitPrice.      
+00032e10: 2020 2020 2020 6966 2069 734d 6172 6b65        if isMarke
+00032e20: 744f 7264 6572 3a0a 2020 2020 2020 2020  tOrder:.        
+00032e30: 2020 2020 2020 2020 2320 7370 6f74 2054          # spot T
+00032e40: 414b 455f 5052 4f46 4954 206d 6172 6b65  AKE_PROFIT marke
+00032e50: 7420 6f72 6465 7273 2061 7265 206e 6f74  t orders are not
+00032e60: 2061 2076 616c 6964 206f 7264 6572 2074   a valid order t
+00032e70: 7970 650a 2020 2020 2020 2020 2020 2020  ype.            
+00032e80: 2020 2020 7570 7065 7263 6173 6554 7970      uppercaseTyp
+00032e90: 6520 3d20 2754 414b 455f 5052 4f46 4954  e = 'TAKE_PROFIT
+00032ea0: 5f4d 4152 4b45 5427 2069 6620 6d61 726b  _MARKET' if mark
+00032eb0: 6574 5b27 636f 6e74 7261 6374 275d 2065  et['contract'] e
+00032ec0: 6c73 6520 2754 414b 455f 5052 4f46 4954  lse 'TAKE_PROFIT
+00032ed0: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
+00032ee0: 6966 2069 734c 696d 6974 4f72 6465 723a  if isLimitOrder:
+00032ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032f00: 2075 7070 6572 6361 7365 5479 7065 203d   uppercaseType =
+00032f10: 2027 5441 4b45 5f50 524f 4649 5427 2069   'TAKE_PROFIT' i
+00032f20: 6620 6d61 726b 6574 5b27 636f 6e74 7261  f market['contra
+00032f30: 6374 275d 2065 6c73 6520 2754 414b 455f  ct'] else 'TAKE_
+00032f40: 5052 4f46 4954 5f4c 494d 4954 270a 2020  PROFIT_LIMIT'.  
+00032f50: 2020 2020 2020 6966 206d 6172 6769 6e4d        if marginM
+00032f60: 6f64 6520 3d3d 2027 6973 6f6c 6174 6564  ode == 'isolated
+00032f70: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+00032f80: 6571 7565 7374 5b27 6973 4973 6f6c 6174  equest['isIsolat
+00032f90: 6564 275d 203d 2054 7275 650a 2020 2020  ed'] = True.    
+00032fa0: 2020 2020 6966 2063 6c69 656e 744f 7264      if clientOrd
+00032fb0: 6572 4964 2069 7320 4e6f 6e65 3a0a 2020  erId is None:.  
+00032fc0: 2020 2020 2020 2020 2020 6272 6f6b 6572            broker
+00032fd0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00032fe0: 7565 2873 656c 662e 6f70 7469 6f6e 732c  ue(self.options,
+00032ff0: 2027 6272 6f6b 6572 2729 0a20 2020 2020   'broker').     
+00033000: 2020 2020 2020 2069 6620 6272 6f6b 6572         if broker
+00033010: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00033020: 2020 2020 2020 2020 2020 2020 2020 6272                br
+00033030: 6f6b 6572 4964 203d 2073 656c 662e 7361  okerId = self.sa
+00033040: 6665 5f73 7472 696e 6728 6272 6f6b 6572  fe_string(broker
+00033050: 2c20 6d61 726b 6574 5479 7065 290a 2020  , marketType).  
+00033060: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00033070: 2062 726f 6b65 7249 6420 6973 206e 6f74   brokerId is not
+00033080: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00033090: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+000330a0: 7374 5b27 6e65 7743 6c69 656e 744f 7264  st['newClientOrd
+000330b0: 6572 4964 275d 203d 2062 726f 6b65 7249  erId'] = brokerI
+000330c0: 6420 2b20 7365 6c66 2e75 7569 6432 3228  d + self.uuid22(
+000330d0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+000330e0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000330f0: 6573 745b 276e 6577 436c 6965 6e74 4f72  est['newClientOr
+00033100: 6465 7249 6427 5d20 3d20 636c 6965 6e74  derId'] = client
+00033110: 4f72 6465 7249 640a 2020 2020 2020 2020  OrderId.        
+00033120: 6966 2028 6d61 726b 6574 5479 7065 203d  if (marketType =
+00033130: 3d20 2773 706f 7427 2920 6f72 2028 6d61  = 'spot') or (ma
+00033140: 726b 6574 5479 7065 203d 3d20 276d 6172  rketType == 'mar
+00033150: 6769 6e27 293a 0a20 2020 2020 2020 2020  gin'):.         
+00033160: 2020 2072 6571 7565 7374 5b27 6e65 774f     request['newO
+00033170: 7264 6572 5265 7370 5479 7065 275d 203d  rderRespType'] =
+00033180: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00033190: 2873 656c 662e 6f70 7469 6f6e 735b 276e  (self.options['n
+000331a0: 6577 4f72 6465 7252 6573 7054 7970 6527  ewOrderRespType'
+000331b0: 5d2c 2074 7970 652c 2027 5245 5355 4c54  ], type, 'RESULT
+000331c0: 2729 2020 2320 2741 434b 2720 666f 7220  ')  # 'ACK' for 
+000331d0: 6f72 6465 7220 6964 2c20 2752 4553 554c  order id, 'RESUL
+000331e0: 5427 2066 6f72 2066 756c 6c20 6f72 6465  T' for full orde
+000331f0: 7220 6f72 2027 4655 4c4c 2720 666f 7220  r or 'FULL' for 
+00033200: 6f72 6465 7220 7769 7468 2066 696c 6c73  order with fills
+00033210: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00033220: 2020 2020 2020 2020 2020 2023 2073 7761             # swa
+00033230: 702c 2066 7574 7572 6573 2061 6e64 206f  p, futures and o
+00033240: 7074 696f 6e73 0a20 2020 2020 2020 2020  ptions.         
+00033250: 2020 2072 6571 7565 7374 5b27 6e65 774f     request['newO
+00033260: 7264 6572 5265 7370 5479 7065 275d 203d  rderRespType'] =
+00033270: 2027 5245 5355 4c54 2720 2023 2022 4143   'RESULT'  # "AC
+00033280: 4b22 2c20 2252 4553 554c 5422 2c20 6465  K", "RESULT", de
+00033290: 6661 756c 7420 2241 434b 220a 2020 2020  fault "ACK".    
+000332a0: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
+000332b0: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
+000332c0: 2020 2020 2069 6620 7479 7065 203d 3d20       if type == 
+000332d0: 276d 6172 6b65 7427 3a0a 2020 2020 2020  'market':.      
+000332e0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000332f0: 496e 7661 6c69 644f 7264 6572 2873 656c  InvalidOrder(sel
+00033300: 662e 6964 202b 2027 2027 202b 2074 7970  f.id + ' ' + typ
+00033310: 6520 2b20 2720 6973 206e 6f74 2061 2076  e + ' is not a v
+00033320: 616c 6964 206f 7264 6572 2074 7970 6520  alid order type 
+00033330: 666f 7220 7468 6520 2720 2b20 7379 6d62  for the ' + symb
+00033340: 6f6c 202b 2027 206d 6172 6b65 7427 290a  ol + ' market').
+00033350: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00033360: 6f64 203d 2027 6561 7069 5072 6976 6174  od = 'eapiPrivat
+00033370: 6550 6f73 744f 7264 6572 270a 2020 2020  ePostOrder'.    
+00033380: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00033390: 2020 2020 2020 7661 6c69 644f 7264 6572        validOrder
+000333a0: 5479 7065 7320 3d20 7365 6c66 2e73 6166  Types = self.saf
+000333b0: 655f 7661 6c75 6528 6d61 726b 6574 5b27  e_value(market['
+000333c0: 696e 666f 275d 2c20 276f 7264 6572 5479  info'], 'orderTy
+000333d0: 7065 7327 290a 2020 2020 2020 2020 2020  pes').          
+000333e0: 2020 6966 206e 6f74 2073 656c 662e 696e    if not self.in
+000333f0: 5f61 7272 6179 2875 7070 6572 6361 7365  _array(uppercase
+00033400: 5479 7065 2c20 7661 6c69 644f 7264 6572  Type, validOrder
+00033410: 5479 7065 7329 3a0a 2020 2020 2020 2020  Types):.        
+00033420: 2020 2020 2020 2020 6966 2069 6e69 7469          if initi
+00033430: 616c 5570 7065 7263 6173 6554 7970 6520  alUppercaseType 
+00033440: 213d 2075 7070 6572 6361 7365 5479 7065  != uppercaseType
+00033450: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00033460: 2020 2020 2020 7261 6973 6520 496e 7661        raise Inva
+00033470: 6c69 644f 7264 6572 2873 656c 662e 6964  lidOrder(self.id
+00033480: 202b 2027 2073 746f 7050 7269 6365 2070   + ' stopPrice p
+00033490: 6172 616d 6574 6572 2069 7320 6e6f 7420  arameter is not 
+000334a0: 616c 6c6f 7765 6420 666f 7220 2720 2b20  allowed for ' + 
+000334b0: 7379 6d62 6f6c 202b 2027 2027 202b 2074  symbol + ' ' + t
+000334c0: 7970 6520 2b20 2720 6f72 6465 7273 2729  ype + ' orders')
+000334d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000334e0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000334f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00033500: 2049 6e76 616c 6964 4f72 6465 7228 7365   InvalidOrder(se
+00033510: 6c66 2e69 6420 2b20 2720 2720 2b20 7479  lf.id + ' ' + ty
+00033520: 7065 202b 2027 2069 7320 6e6f 7420 6120  pe + ' is not a 
+00033530: 7661 6c69 6420 6f72 6465 7220 7479 7065  valid order type
+00033540: 2066 6f72 2074 6865 2027 202b 2073 796d   for the ' + sym
+00033550: 626f 6c20 2b20 2720 6d61 726b 6574 2729  bol + ' market')
+00033560: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+00033570: 5b27 7479 7065 275d 203d 2075 7070 6572  ['type'] = upper
+00033580: 6361 7365 5479 7065 0a20 2020 2020 2020  caseType.       
+00033590: 2023 2061 6464 6974 696f 6e61 6c20 7265   # additional re
+000335a0: 7175 6972 6564 2066 6965 6c64 7320 6465  quired fields de
+000335b0: 7065 6e64 696e 6720 6f6e 2074 6865 206f  pending on the o
+000335c0: 7264 6572 2074 7970 650a 2020 2020 2020  rder type.      
+000335d0: 2020 7469 6d65 496e 466f 7263 6549 7352    timeInForceIsR
+000335e0: 6571 7569 7265 6420 3d20 4661 6c73 650a  equired = False.
+000335f0: 2020 2020 2020 2020 7072 6963 6549 7352          priceIsR
+00033600: 6571 7569 7265 6420 3d20 4661 6c73 650a  equired = False.
+00033610: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+00033620: 6549 7352 6571 7569 7265 6420 3d20 4661  eIsRequired = Fa
+00033630: 6c73 650a 2020 2020 2020 2020 7175 616e  lse.        quan
+00033640: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
+00033650: 2046 616c 7365 0a20 2020 2020 2020 2023   False.        #
+00033660: 0a20 2020 2020 2020 2023 2073 706f 742f  .        # spot/
+00033670: 6d61 7267 696e 0a20 2020 2020 2020 2023  margin.        #
+00033680: 0a20 2020 2020 2020 2023 2020 2020 204c  .        #     L
+00033690: 494d 4954 2020 2020 2020 2020 2020 2020  IMIT            
+000336a0: 2020 2020 7469 6d65 496e 466f 7263 652c      timeInForce,
+000336b0: 2071 7561 6e74 6974 792c 2070 7269 6365   quantity, price
+000336c0: 0a20 2020 2020 2020 2023 2020 2020 204d  .        #     M
+000336d0: 4152 4b45 5420 2020 2020 2020 2020 2020  ARKET           
+000336e0: 2020 2020 7175 616e 7469 7479 206f 7220      quantity or 
+000336f0: 7175 6f74 654f 7264 6572 5174 790a 2020  quoteOrderQty.  
+00033700: 2020 2020 2020 2320 2020 2020 5354 4f50        #     STOP
+00033710: 5f4c 4f53 5320 2020 2020 2020 2020 2020  _LOSS           
+00033720: 2071 7561 6e74 6974 792c 2073 746f 7050   quantity, stopP
+00033730: 7269 6365 0a20 2020 2020 2020 2023 2020  rice.        #  
+00033740: 2020 2053 544f 505f 4c4f 5353 5f4c 494d     STOP_LOSS_LIM
+00033750: 4954 2020 2020 2020 7469 6d65 496e 466f  IT      timeInFo
+00033760: 7263 652c 2071 7561 6e74 6974 792c 2070  rce, quantity, p
+00033770: 7269 6365 2c20 7374 6f70 5072 6963 650a  rice, stopPrice.
+00033780: 2020 2020 2020 2020 2320 2020 2020 5441          #     TA
+00033790: 4b45 5f50 524f 4649 5420 2020 2020 2020  KE_PROFIT       
+000337a0: 2020 2071 7561 6e74 6974 792c 2073 746f     quantity, sto
+000337b0: 7050 7269 6365 0a20 2020 2020 2020 2023  pPrice.        #
+000337c0: 2020 2020 2054 414b 455f 5052 4f46 4954       TAKE_PROFIT
+000337d0: 5f4c 494d 4954 2020 2020 7469 6d65 496e  _LIMIT    timeIn
+000337e0: 466f 7263 652c 2071 7561 6e74 6974 792c  Force, quantity,
+000337f0: 2070 7269 6365 2c20 7374 6f70 5072 6963   price, stopPric
+00033800: 650a 2020 2020 2020 2020 2320 2020 2020  e.        #     
+00033810: 4c49 4d49 545f 4d41 4b45 5220 2020 2020  LIMIT_MAKER     
+00033820: 2020 2020 2071 7561 6e74 6974 792c 2070       quantity, p
+00033830: 7269 6365 0a20 2020 2020 2020 2023 0a20  rice.        #. 
+00033840: 2020 2020 2020 2023 2066 7574 7572 6573         # futures
+00033850: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00033860: 2020 2023 2020 2020 204c 494d 4954 2020     #     LIMIT  
+00033870: 2020 2020 2020 2020 2020 2020 2020 7469                ti
+00033880: 6d65 496e 466f 7263 652c 2071 7561 6e74  meInForce, quant
+00033890: 6974 792c 2070 7269 6365 0a20 2020 2020  ity, price.     
+000338a0: 2020 2023 2020 2020 204d 4152 4b45 5420     #     MARKET 
+000338b0: 2020 2020 2020 2020 2020 2020 2020 7175                qu
+000338c0: 616e 7469 7479 0a20 2020 2020 2020 2023  antity.        #
+000338d0: 2020 2020 2053 544f 502f 5441 4b45 5f50       STOP/TAKE_P
+000338e0: 524f 4649 5420 2020 2020 7175 616e 7469  ROFIT     quanti
+000338f0: 7479 2c20 7072 6963 652c 2073 746f 7050  ty, price, stopP
+00033900: 7269 6365 0a20 2020 2020 2020 2023 2020  rice.        #  
+00033910: 2020 2053 544f 505f 4d41 524b 4554 2020     STOP_MARKET  
+00033920: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+00033930: 650a 2020 2020 2020 2020 2320 2020 2020  e.        #     
+00033940: 5441 4b45 5f50 524f 4649 545f 4d41 524b  TAKE_PROFIT_MARK
+00033950: 4554 2020 2073 746f 7050 7269 6365 0a20  ET   stopPrice. 
+00033960: 2020 2020 2020 2023 2020 2020 2054 5241         #     TRA
+00033970: 494c 494e 475f 5354 4f50 5f4d 4152 4b45  ILING_STOP_MARKE
+00033980: 5420 6361 6c6c 6261 636b 5261 7465 0a20  T callbackRate. 
+00033990: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000339a0: 2069 6620 7570 7065 7263 6173 6554 7970   if uppercaseTyp
+000339b0: 6520 3d3d 2027 4d41 524b 4554 273a 0a20  e == 'MARKET':. 
+000339c0: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
+000339d0: 726b 6574 5b27 7370 6f74 275d 3a0a 2020  rket['spot']:.  
+000339e0: 2020 2020 2020 2020 2020 2020 2020 7175                qu
+000339f0: 6f74 654f 7264 6572 5174 7920 3d20 7365  oteOrderQty = se
+00033a00: 6c66 2e73 6166 655f 7661 6c75 6528 7365  lf.safe_value(se
+00033a10: 6c66 2e6f 7074 696f 6e73 2c20 2771 756f  lf.options, 'quo
+00033a20: 7465 4f72 6465 7251 7479 272c 2054 7275  teOrderQty', Tru
+00033a30: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00033a40: 2020 2069 6620 7175 6f74 654f 7264 6572     if quoteOrder
+00033a50: 5174 793a 0a20 2020 2020 2020 2020 2020  Qty:.           
+00033a60: 2020 2020 2020 2020 2071 756f 7465 4f72           quoteOr
+00033a70: 6465 7251 7479 4e65 7720 3d20 7365 6c66  derQtyNew = self
+00033a80: 2e73 6166 655f 7661 6c75 655f 3228 7175  .safe_value_2(qu
+00033a90: 6572 792c 2027 7175 6f74 654f 7264 6572  ery, 'quoteOrder
+00033aa0: 5174 7927 2c20 2763 6f73 7427 290a 2020  Qty', 'cost').  
+00033ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033ac0: 2020 7072 6563 6973 696f 6e20 3d20 6d61    precision = ma
+00033ad0: 726b 6574 5b27 7072 6563 6973 696f 6e27  rket['precision'
+00033ae0: 5d5b 2770 7269 6365 275d 0a20 2020 2020  ]['price'].     
+00033af0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00033b00: 6620 7175 6f74 654f 7264 6572 5174 794e  f quoteOrderQtyN
+00033b10: 6577 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ew is not None:.
+00033b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033b30: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00033b40: 2771 756f 7465 4f72 6465 7251 7479 275d  'quoteOrderQty']
+00033b50: 203d 2073 656c 662e 6465 6369 6d61 6c5f   = self.decimal_
+00033b60: 746f 5f70 7265 6369 7369 6f6e 2871 756f  to_precision(quo
+00033b70: 7465 4f72 6465 7251 7479 4e65 772c 2054  teOrderQtyNew, T
+00033b80: 5255 4e43 4154 452c 2070 7265 6369 7369  RUNCATE, precisi
+00033b90: 6f6e 2c20 7365 6c66 2e70 7265 6369 7369  on, self.precisi
+00033ba0: 6f6e 4d6f 6465 290a 2020 2020 2020 2020  onMode).        
+00033bb0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00033bc0: 2070 7269 6365 2069 7320 6e6f 7420 4e6f   price is not No
+00033bd0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00033be0: 2020 2020 2020 2020 2020 2020 616d 6f75              amou
+00033bf0: 6e74 5374 7269 6e67 203d 2073 656c 662e  ntString = self.
+00033c00: 6e75 6d62 6572 5f74 6f5f 7374 7269 6e67  number_to_string
+00033c10: 2861 6d6f 756e 7429 0a20 2020 2020 2020  (amount).       
+00033c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033c30: 2070 7269 6365 5374 7269 6e67 203d 2073   priceString = s
+00033c40: 656c 662e 6e75 6d62 6572 5f74 6f5f 7374  elf.number_to_st
+00033c50: 7269 6e67 2870 7269 6365 290a 2020 2020  ring(price).    
+00033c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033c70: 2020 2020 7175 6f74 654f 7264 6572 5175      quoteOrderQu
+00033c80: 616e 7469 7479 203d 2050 7265 6369 7365  antity = Precise
+00033c90: 2e73 7472 696e 675f 6d75 6c28 616d 6f75  .string_mul(amou
+00033ca0: 6e74 5374 7269 6e67 2c20 7072 6963 6553  ntString, priceS
+00033cb0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+00033cc0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00033cd0: 6571 7565 7374 5b27 7175 6f74 654f 7264  equest['quoteOrd
+00033ce0: 6572 5174 7927 5d20 3d20 7365 6c66 2e64  erQty'] = self.d
+00033cf0: 6563 696d 616c 5f74 6f5f 7072 6563 6973  ecimal_to_precis
+00033d00: 696f 6e28 7175 6f74 654f 7264 6572 5175  ion(quoteOrderQu
+00033d10: 616e 7469 7479 2c20 5452 554e 4341 5445  antity, TRUNCATE
+00033d20: 2c20 7072 6563 6973 696f 6e2c 2073 656c  , precision, sel
+00033d30: 662e 7072 6563 6973 696f 6e4d 6f64 6529  f.precisionMode)
+00033d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033d50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00033d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033d70: 2020 2071 7561 6e74 6974 7949 7352 6571     quantityIsReq
+00033d80: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
+00033d90: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00033da0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00033db0: 2020 2020 2020 2071 7561 6e74 6974 7949         quantityI
+00033dc0: 7352 6571 7569 7265 6420 3d20 5472 7565  sRequired = True
+00033dd0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00033de0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00033df0: 2020 2071 7561 6e74 6974 7949 7352 6571     quantityIsReq
+00033e00: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
+00033e10: 2020 2020 2065 6c69 6620 7570 7065 7263       elif upperc
+00033e20: 6173 6554 7970 6520 3d3d 2027 4c49 4d49  aseType == 'LIMI
+00033e30: 5427 3a0a 2020 2020 2020 2020 2020 2020  T':.            
+00033e40: 7072 6963 6549 7352 6571 7569 7265 6420  priceIsRequired 
+00033e50: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
+00033e60: 2020 2074 696d 6549 6e46 6f72 6365 4973     timeInForceIs
+00033e70: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
+00033e80: 2020 2020 2020 2020 2020 2020 7175 616e              quan
+00033e90: 7469 7479 4973 5265 7175 6972 6564 203d  tityIsRequired =
+00033ea0: 2054 7275 650a 2020 2020 2020 2020 656c   True.        el
+00033eb0: 6966 2028 7570 7065 7263 6173 6554 7970  if (uppercaseTyp
+00033ec0: 6520 3d3d 2027 5354 4f50 5f4c 4f53 5327  e == 'STOP_LOSS'
+00033ed0: 2920 6f72 2028 7570 7065 7263 6173 6554  ) or (uppercaseT
+00033ee0: 7970 6520 3d3d 2027 5441 4b45 5f50 524f  ype == 'TAKE_PRO
+00033ef0: 4649 5427 293a 0a20 2020 2020 2020 2020  FIT'):.         
+00033f00: 2020 2073 746f 7050 7269 6365 4973 5265     stopPriceIsRe
+00033f10: 7175 6972 6564 203d 2054 7275 650a 2020  quired = True.  
+00033f20: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
+00033f30: 7479 4973 5265 7175 6972 6564 203d 2054  tyIsRequired = T
+00033f40: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00033f50: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
+00033f60: 7227 5d20 6f72 206d 6172 6b65 745b 2769  r'] or market['i
+00033f70: 6e76 6572 7365 275d 3a0a 2020 2020 2020  nverse']:.      
+00033f80: 2020 2020 2020 2020 2020 7072 6963 6549            priceI
+00033f90: 7352 6571 7569 7265 6420 3d20 5472 7565  sRequired = True
+00033fa0: 0a20 2020 2020 2020 2065 6c69 6620 2875  .        elif (u
+00033fb0: 7070 6572 6361 7365 5479 7065 203d 3d20  ppercaseType == 
+00033fc0: 2753 544f 505f 4c4f 5353 5f4c 494d 4954  'STOP_LOSS_LIMIT
+00033fd0: 2729 206f 7220 2875 7070 6572 6361 7365  ') or (uppercase
+00033fe0: 5479 7065 203d 3d20 2754 414b 455f 5052  Type == 'TAKE_PR
+00033ff0: 4f46 4954 5f4c 494d 4954 2729 3a0a 2020  OFIT_LIMIT'):.  
+00034000: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
+00034010: 7479 4973 5265 7175 6972 6564 203d 2054  tyIsRequired = T
+00034020: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00034030: 7374 6f70 5072 6963 6549 7352 6571 7569  stopPriceIsRequi
+00034040: 7265 6420 3d20 5472 7565 0a20 2020 2020  red = True.     
+00034050: 2020 2020 2020 2070 7269 6365 4973 5265         priceIsRe
+00034060: 7175 6972 6564 203d 2054 7275 650a 2020  quired = True.  
+00034070: 2020 2020 2020 2020 2020 7469 6d65 496e            timeIn
+00034080: 466f 7263 6549 7352 6571 7569 7265 6420  ForceIsRequired 
+00034090: 3d20 5472 7565 0a20 2020 2020 2020 2065  = True.        e
+000340a0: 6c69 6620 7570 7065 7263 6173 6554 7970  lif uppercaseTyp
+000340b0: 6520 3d3d 2027 4c49 4d49 545f 4d41 4b45  e == 'LIMIT_MAKE
+000340c0: 5227 3a0a 2020 2020 2020 2020 2020 2020  R':.            
+000340d0: 7072 6963 6549 7352 6571 7569 7265 6420  priceIsRequired 
+000340e0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
+000340f0: 2020 2071 7561 6e74 6974 7949 7352 6571     quantityIsReq
+00034100: 7569 7265 6420 3d20 5472 7565 0a20 2020  uired = True.   
+00034110: 2020 2020 2065 6c69 6620 7570 7065 7263       elif upperc
+00034120: 6173 6554 7970 6520 3d3d 2027 5354 4f50  aseType == 'STOP
+00034130: 273a 0a20 2020 2020 2020 2020 2020 2071  ':.            q
+00034140: 7561 6e74 6974 7949 7352 6571 7569 7265  uantityIsRequire
+00034150: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+00034160: 2020 2020 2073 746f 7050 7269 6365 4973       stopPriceIs
+00034170: 5265 7175 6972 6564 203d 2054 7275 650a  Required = True.
+00034180: 2020 2020 2020 2020 2020 2020 7072 6963              pric
+00034190: 6549 7352 6571 7569 7265 6420 3d20 5472  eIsRequired = Tr
+000341a0: 7565 0a20 2020 2020 2020 2065 6c69 6620  ue.        elif 
+000341b0: 2875 7070 6572 6361 7365 5479 7065 203d  (uppercaseType =
+000341c0: 3d20 2753 544f 505f 4d41 524b 4554 2729  = 'STOP_MARKET')
+000341d0: 206f 7220 2875 7070 6572 6361 7365 5479   or (uppercaseTy
+000341e0: 7065 203d 3d20 2754 414b 455f 5052 4f46  pe == 'TAKE_PROF
+000341f0: 4954 5f4d 4152 4b45 5427 293a 0a20 2020  IT_MARKET'):.   
+00034200: 2020 2020 2020 2020 2063 6c6f 7365 506f           closePo
+00034210: 7369 7469 6f6e 203d 2073 656c 662e 7361  sition = self.sa
+00034220: 6665 5f76 616c 7565 2871 7565 7279 2c20  fe_value(query, 
+00034230: 2763 6c6f 7365 506f 7369 7469 6f6e 2729  'closePosition')
+00034240: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00034250: 636c 6f73 6550 6f73 6974 696f 6e20 6973  closePosition is
+00034260: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00034270: 2020 2020 2020 2071 7561 6e74 6974 7949         quantityI
+00034280: 7352 6571 7569 7265 6420 3d20 5472 7565  sRequired = True
+00034290: 0a20 2020 2020 2020 2020 2020 2073 746f  .            sto
+000342a0: 7050 7269 6365 4973 5265 7175 6972 6564  pPriceIsRequired
+000342b0: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+000342c0: 656c 6966 2075 7070 6572 6361 7365 5479  elif uppercaseTy
+000342d0: 7065 203d 3d20 2754 5241 494c 494e 475f  pe == 'TRAILING_
+000342e0: 5354 4f50 5f4d 4152 4b45 5427 3a0a 2020  STOP_MARKET':.  
+000342f0: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
+00034300: 7479 4973 5265 7175 6972 6564 203d 2054  tyIsRequired = T
+00034310: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00034320: 6361 6c6c 6261 636b 5261 7465 203d 2073  callbackRate = s
+00034330: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+00034340: 7175 6572 792c 2027 6361 6c6c 6261 636b  query, 'callback
+00034350: 5261 7465 2729 0a20 2020 2020 2020 2020  Rate').         
+00034360: 2020 2069 6620 6361 6c6c 6261 636b 5261     if callbackRa
+00034370: 7465 2069 7320 4e6f 6e65 3a0a 2020 2020  te is None:.    
+00034380: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00034390: 6520 496e 7661 6c69 644f 7264 6572 2873  e InvalidOrder(s
+000343a0: 656c 662e 6964 202b 2027 2063 7265 6174  elf.id + ' creat
+000343b0: 654f 7264 6572 2829 2072 6571 7569 7265  eOrder() require
+000343c0: 7320 6120 6361 6c6c 6261 636b 5261 7465  s a callbackRate
+000343d0: 2065 7874 7261 2070 6172 616d 2066 6f72   extra param for
+000343e0: 2061 2027 202b 2074 7970 6520 2b20 2720   a ' + type + ' 
+000343f0: 6f72 6465 7227 290a 2020 2020 2020 2020  order').        
+00034400: 6966 2071 7561 6e74 6974 7949 7352 6571  if quantityIsReq
+00034410: 7569 7265 643a 0a20 2020 2020 2020 2020  uired:.         
+00034420: 2020 2072 6571 7565 7374 5b27 7175 616e     request['quan
+00034430: 7469 7479 275d 203d 2073 656c 662e 616d  tity'] = self.am
+00034440: 6f75 6e74 5f74 6f5f 7072 6563 6973 696f  ount_to_precisio
+00034450: 6e28 7379 6d62 6f6c 2c20 616d 6f75 6e74  n(symbol, amount
+00034460: 290a 2020 2020 2020 2020 6966 2070 7269  ).        if pri
+00034470: 6365 4973 5265 7175 6972 6564 3a0a 2020  ceIsRequired:.  
+00034480: 2020 2020 2020 2020 2020 6966 2070 7269            if pri
+00034490: 6365 2069 7320 4e6f 6e65 3a0a 2020 2020  ce is None:.    
+000344a0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000344b0: 6520 496e 7661 6c69 644f 7264 6572 2873  e InvalidOrder(s
+000344c0: 656c 662e 6964 202b 2027 2063 7265 6174  elf.id + ' creat
+000344d0: 654f 7264 6572 2829 2072 6571 7569 7265  eOrder() require
+000344e0: 7320 6120 7072 6963 6520 6172 6775 6d65  s a price argume
+000344f0: 6e74 2066 6f72 2061 2027 202b 2074 7970  nt for a ' + typ
+00034500: 6520 2b20 2720 6f72 6465 7227 290a 2020  e + ' order').  
+00034510: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00034520: 745b 2770 7269 6365 275d 203d 2073 656c  t['price'] = sel
+00034530: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
+00034540: 7369 6f6e 2873 796d 626f 6c2c 2070 7269  sion(symbol, pri
+00034550: 6365 290a 2020 2020 2020 2020 6966 2074  ce).        if t
+00034560: 696d 6549 6e46 6f72 6365 4973 5265 7175  imeInForceIsRequ
+00034570: 6972 6564 3a0a 2020 2020 2020 2020 2020  ired:.          
+00034580: 2020 7265 7175 6573 745b 2774 696d 6549    request['timeI
+00034590: 6e46 6f72 6365 275d 203d 2073 656c 662e  nForce'] = self.
+000345a0: 6f70 7469 6f6e 735b 2764 6566 6175 6c74  options['default
+000345b0: 5469 6d65 496e 466f 7263 6527 5d20 2023  TimeInForce']  #
+000345c0: 2027 4754 4327 203d 2047 6f6f 6420 546f   'GTC' = Good To
+000345d0: 2043 616e 6365 6c28 6465 6661 756c 7429   Cancel(default)
+000345e0: 2c20 2749 4f43 2720 3d20 496d 6d65 6469  , 'IOC' = Immedi
+000345f0: 6174 6520 4f72 2043 616e 6365 6c0a 2020  ate Or Cancel.  
+00034600: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+00034610: 2763 6f6e 7472 6163 7427 5d20 616e 6420  'contract'] and 
+00034620: 706f 7374 4f6e 6c79 3a0a 2020 2020 2020  postOnly:.      
+00034630: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
+00034640: 696d 6549 6e46 6f72 6365 275d 203d 2027  imeInForce'] = '
+00034650: 4754 5827 0a20 2020 2020 2020 2069 6620  GTX'.        if 
+00034660: 7374 6f70 5072 6963 6549 7352 6571 7569  stopPriceIsRequi
+00034670: 7265 643a 0a20 2020 2020 2020 2020 2020  red:.           
+00034680: 2069 6620 6d61 726b 6574 5b27 636f 6e74   if market['cont
+00034690: 7261 6374 275d 3a0a 2020 2020 2020 2020  ract']:.        
+000346a0: 2020 2020 2020 2020 6966 2073 746f 7050          if stopP
+000346b0: 7269 6365 2069 7320 4e6f 6e65 3a0a 2020  rice is None:.  
+000346c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000346d0: 2020 7261 6973 6520 496e 7661 6c69 644f    raise InvalidO
+000346e0: 7264 6572 2873 656c 662e 6964 202b 2027  rder(self.id + '
+000346f0: 2063 7265 6174 654f 7264 6572 2829 2072   createOrder() r
+00034700: 6571 7569 7265 7320 6120 7374 6f70 5072  equires a stopPr
+00034710: 6963 6520 6578 7472 6120 7061 7261 6d20  ice extra param 
+00034720: 666f 7220 6120 2720 2b20 7479 7065 202b  for a ' + type +
+00034730: 2027 206f 7264 6572 2729 0a20 2020 2020   ' order').     
+00034740: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00034750: 2020 2020 2020 2020 2020 2020 2023 2063               # c
+00034760: 6865 636b 2066 6f72 2064 656c 7461 2070  heck for delta p
+00034770: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
+00034780: 2020 2020 2074 7261 696c 696e 6744 656c       trailingDel
+00034790: 7461 203d 2073 656c 662e 7361 6665 5f76  ta = self.safe_v
+000347a0: 616c 7565 2870 6172 616d 732c 2027 7472  alue(params, 'tr
+000347b0: 6169 6c69 6e67 4465 6c74 6127 290a 2020  ailingDelta').  
+000347c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000347d0: 2074 7261 696c 696e 6744 656c 7461 2069   trailingDelta i
+000347e0: 7320 4e6f 6e65 2061 6e64 2073 746f 7050  s None and stopP
+000347f0: 7269 6365 2069 7320 4e6f 6e65 3a0a 2020  rice is None:.  
+00034800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034810: 2020 7261 6973 6520 496e 7661 6c69 644f    raise InvalidO
+00034820: 7264 6572 2873 656c 662e 6964 202b 2027  rder(self.id + '
+00034830: 2063 7265 6174 654f 7264 6572 2829 2072   createOrder() r
+00034840: 6571 7569 7265 7320 6120 7374 6f70 5072  equires a stopPr
+00034850: 6963 6520 6f72 2074 7261 696c 696e 6744  ice or trailingD
+00034860: 656c 7461 2070 6172 616d 2066 6f72 2061  elta param for a
+00034870: 2027 202b 2074 7970 6520 2b20 2720 6f72   ' + type + ' or
+00034880: 6465 7227 290a 2020 2020 2020 2020 2020  der').          
+00034890: 2020 6966 2073 746f 7050 7269 6365 2069    if stopPrice i
+000348a0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+000348b0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000348c0: 6573 745b 2773 746f 7050 7269 6365 275d  est['stopPrice']
+000348d0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+000348e0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+000348f0: 6c2c 2073 746f 7050 7269 6365 290a 2020  l, stopPrice).  
+00034900: 2020 2020 2020 2320 7265 6d6f 7665 2074        # remove t
+00034910: 696d 6549 6e46 6f72 6365 2066 726f 6d20  imeInForce from 
+00034920: 7061 7261 6d73 2062 6563 6175 7365 2050  params because P
+00034930: 4f20 6973 206f 6e6c 7920 7573 6564 2062  O is only used b
+00034940: 7920 7365 6c66 2e69 735f 706f 7374 5f6f  y self.is_post_o
+00034950: 6e6c 7961 6e64 2069 7427 7320 6e6f 7420  nlyand it's not 
+00034960: 6120 7661 6c69 6420 7661 6c75 6520 666f  a valid value fo
+00034970: 7220 4269 6e61 6e63 650a 2020 2020 2020  r Binance.      
+00034980: 2020 6966 2073 656c 662e 7361 6665 5f73    if self.safe_s
+00034990: 7472 696e 6728 7061 7261 6d73 2c20 2774  tring(params, 't
+000349a0: 696d 6549 6e46 6f72 6365 2729 203d 3d20  imeInForce') == 
+000349b0: 2750 4f27 3a0a 2020 2020 2020 2020 2020  'PO':.          
+000349c0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
+000349d0: 6f6d 6974 2870 6172 616d 732c 205b 2774  omit(params, ['t
+000349e0: 696d 6549 6e46 6f72 6365 275d 290a 2020  imeInForce']).  
+000349f0: 2020 2020 2020 7265 7175 6573 7450 6172        requestPar
+00034a00: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
+00034a10: 7061 7261 6d73 2c20 5b27 7175 6f74 654f  params, ['quoteO
+00034a20: 7264 6572 5174 7927 2c20 2763 6f73 7427  rderQty', 'cost'
+00034a30: 2c20 2773 746f 7050 7269 6365 272c 2027  , 'stopPrice', '
+00034a40: 7465 7374 272c 2027 7479 7065 272c 2027  test', 'type', '
+00034a50: 6e65 7743 6c69 656e 744f 7264 6572 4964  newClientOrderId
+00034a60: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
+00034a70: 6427 2c20 2770 6f73 744f 6e6c 7927 5d29  d', 'postOnly'])
+00034a80: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+00034a90: 6520 3d20 6765 7461 7474 7228 7365 6c66  e = getattr(self
+00034aa0: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
+00034ab0: 7874 656e 6428 7265 7175 6573 742c 2072  xtend(request, r
+00034ac0: 6571 7565 7374 5061 7261 6d73 2929 0a20  equestParams)). 
+00034ad0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00034ae0: 6c66 2e70 6172 7365 5f6f 7264 6572 2872  lf.parse_order(r
+00034af0: 6573 706f 6e73 652c 206d 6172 6b65 7429  esponse, market)
+00034b00: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
+00034b10: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
+00034b20: 7374 722c 2073 796d 626f 6c3a 204f 7074  str, symbol: Opt
+00034b30: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00034b40: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+00034b50: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00034b60: 2020 2066 6574 6368 6573 2069 6e66 6f72     fetches infor
+00034b70: 6d61 7469 6f6e 206f 6e20 616e 206f 7264  mation on an ord
+00034b80: 6572 206d 6164 6520 6279 2074 6865 2075  er made by the u
+00034b90: 7365 720a 2020 2020 2020 2020 3a70 6172  ser.        :par
+00034ba0: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+00034bb0: 6e69 6669 6564 2073 796d 626f 6c20 6f66  nified symbol of
+00034bc0: 2074 6865 206d 6172 6b65 7420 7468 6520   the market the 
+00034bd0: 6f72 6465 7220 7761 7320 6d61 6465 2069  order was made i
+00034be0: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
+00034bf0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+00034c00: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+00034c10: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+00034c20: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
+00034c30: 696e 740a 2020 2020 2020 2020 3a70 6172  int.        :par
+00034c40: 616d 2073 7472 7c4e 6f6e 6520 7061 7261  am str|None para
+00034c50: 6d73 5b27 6d61 7267 696e 4d6f 6465 275d  ms['marginMode']
+00034c60: 3a20 2763 726f 7373 2720 6f72 2027 6973  : 'cross' or 'is
+00034c70: 6f6c 6174 6564 272c 2066 6f72 2073 706f  olated', for spo
+00034c80: 7420 6d61 7267 696e 2074 7261 6469 6e67  t margin trading
+00034c90: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00034ca0: 7320 6469 6374 3a20 416e 2060 6f72 6465  s dict: An `orde
+00034cb0: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
+00034cc0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+00034cd0: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
+00034ce0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+00034cf0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+00034d00: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
+00034d10: 6564 5f73 796d 626f 6c28 2766 6574 6368  ed_symbol('fetch
+00034d20: 4f72 6465 7227 2c20 7379 6d62 6f6c 290a  Order', symbol).
+00034d30: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+00034d40: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00034d50: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00034d60: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00034d70: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
+00034d80: 5479 7065 203d 2073 656c 662e 7361 6665  Type = self.safe
+00034d90: 5f73 7472 696e 675f 3228 7365 6c66 2e6f  _string_2(self.o
+00034da0: 7074 696f 6e73 2c20 2766 6574 6368 4f72  ptions, 'fetchOr
+00034db0: 6465 7227 2c20 2764 6566 6175 6c74 5479  der', 'defaultTy
+00034dc0: 7065 272c 2027 7370 6f74 2729 0a20 2020  pe', 'spot').   
+00034dd0: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
+00034de0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+00034df0: 616d 732c 2027 7479 7065 272c 2064 6566  ams, 'type', def
+00034e00: 6175 6c74 5479 7065 290a 2020 2020 2020  aultType).      
+00034e10: 2020 6d61 7267 696e 4d6f 6465 2c20 7175    marginMode, qu
+00034e20: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
+00034e30: 655f 6d61 7267 696e 5f6d 6f64 655f 616e  e_margin_mode_an
+00034e40: 645f 7061 7261 6d73 2827 6665 7463 684f  d_params('fetchO
+00034e50: 7264 6572 272c 2070 6172 616d 7329 0a20  rder', params). 
+00034e60: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00034e70: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00034e80: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
+00034e90: 2769 6427 5d2c 0a20 2020 2020 2020 207d  'id'],.        }
+00034ea0: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
+00034eb0: 3d20 2770 7269 7661 7465 4765 744f 7264  = 'privateGetOrd
+00034ec0: 6572 270a 2020 2020 2020 2020 6966 206d  er'.        if m
+00034ed0: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+00034ee0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00034ef0: 686f 6420 3d20 2765 6170 6950 7269 7661  hod = 'eapiPriva
+00034f00: 7465 4765 744f 7264 6572 270a 2020 2020  teGetOrder'.    
+00034f10: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
+00034f20: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+00034f30: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00034f40: 2766 6170 6950 7269 7661 7465 4765 744f  'fapiPrivateGetO
+00034f50: 7264 6572 270a 2020 2020 2020 2020 656c  rder'.        el
+00034f60: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+00034f70: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+00034f80: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
+00034f90: 5072 6976 6174 6547 6574 4f72 6465 7227  PrivateGetOrder'
+00034fa0: 0a20 2020 2020 2020 2065 6c69 6620 7479  .        elif ty
+00034fb0: 7065 203d 3d20 276d 6172 6769 6e27 206f  pe == 'margin' o
+00034fc0: 7220 6d61 7267 696e 4d6f 6465 2069 7320  r marginMode is 
+00034fd0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00034fe0: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+00034ff0: 7361 7069 4765 744d 6172 6769 6e4f 7264  sapiGetMarginOrd
+00035000: 6572 270a 2020 2020 2020 2020 2020 2020  er'.            
+00035010: 6966 206d 6172 6769 6e4d 6f64 6520 3d3d  if marginMode ==
+00035020: 2027 6973 6f6c 6174 6564 273a 0a20 2020   'isolated':.   
+00035030: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00035040: 7565 7374 5b27 6973 4973 6f6c 6174 6564  uest['isIsolated
+00035050: 275d 203d 2054 7275 650a 2020 2020 2020  '] = True.      
+00035060: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
+00035070: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00035080: 655f 3228 7061 7261 6d73 2c20 276f 7269  e_2(params, 'ori
+00035090: 6743 6c69 656e 744f 7264 6572 4964 272c  gClientOrderId',
+000350a0: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+000350b0: 290a 2020 2020 2020 2020 6966 2063 6c69  ).        if cli
+000350c0: 656e 744f 7264 6572 4964 2069 7320 6e6f  entOrderId is no
+000350d0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000350e0: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
+000350f0: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
+00035100: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00035110: 5b27 636c 6965 6e74 4f72 6465 7249 6427  ['clientOrderId'
+00035120: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
+00035130: 640a 2020 2020 2020 2020 2020 2020 656c  d.            el
+00035140: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00035150: 2020 2020 7265 7175 6573 745b 276f 7269      request['ori
+00035160: 6743 6c69 656e 744f 7264 6572 4964 275d  gClientOrderId']
+00035170: 203d 2063 6c69 656e 744f 7264 6572 4964   = clientOrderId
+00035180: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00035190: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+000351a0: 7374 5b27 6f72 6465 7249 6427 5d20 3d20  st['orderId'] = 
+000351b0: 6964 0a20 2020 2020 2020 2072 6571 7565  id.        reque
+000351c0: 7374 5061 7261 6d73 203d 2073 656c 662e  stParams = self.
+000351d0: 6f6d 6974 2871 7565 7279 2c20 5b27 7479  omit(query, ['ty
+000351e0: 7065 272c 2027 636c 6965 6e74 4f72 6465  pe', 'clientOrde
+000351f0: 7249 6427 2c20 276f 7269 6743 6c69 656e  rId', 'origClien
+00035200: 744f 7264 6572 4964 275d 290a 2020 2020  tOrderId']).    
+00035210: 2020 2020 7265 7370 6f6e 7365 203d 2067      response = g
+00035220: 6574 6174 7472 2873 656c 662c 206d 6574  etattr(self, met
+00035230: 686f 6429 2873 656c 662e 6578 7465 6e64  hod)(self.extend
+00035240: 2872 6571 7565 7374 2c20 7265 7175 6573  (request, reques
+00035250: 7450 6172 616d 7329 290a 2020 2020 2020  tParams)).      
+00035260: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00035270: 7273 655f 6f72 6465 7228 7265 7370 6f6e  rse_order(respon
+00035280: 7365 2c20 6d61 726b 6574 290a 0a20 2020  se, market)..   
+00035290: 2064 6566 2066 6574 6368 5f6f 7264 6572   def fetch_order
+000352a0: 7328 7365 6c66 2c20 7379 6d62 6f6c 3a20  s(self, symbol: 
+000352b0: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
+000352c0: 4e6f 6e65 2c20 7369 6e63 653a 204f 7074  None, since: Opt
+000352d0: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
+000352e0: 652c 206c 696d 6974 3a20 4f70 7469 6f6e  e, limit: Option
+000352f0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+00035300: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00035310: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00035320: 6665 7463 6865 7320 696e 666f 726d 6174  fetches informat
+00035330: 696f 6e20 6f6e 206d 756c 7469 706c 6520  ion on multiple 
+00035340: 6f72 6465 7273 206d 6164 6520 6279 2074  orders made by t
+00035350: 6865 2075 7365 720a 2020 2020 2020 2020  he user.        
+00035360: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
+00035370: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
+00035380: 7420 7379 6d62 6f6c 206f 6620 7468 6520  t symbol of the 
+00035390: 6d61 726b 6574 206f 7264 6572 7320 7765  market orders we
+000353a0: 7265 206d 6164 6520 696e 0a20 2020 2020  re made in.     
+000353b0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+000353c0: 6e65 2073 696e 6365 3a20 7468 6520 6561  ne since: the ea
+000353d0: 726c 6965 7374 2074 696d 6520 696e 206d  rliest time in m
+000353e0: 7320 746f 2066 6574 6368 206f 7264 6572  s to fetch order
+000353f0: 7320 666f 720a 2020 2020 2020 2020 3a70  s for.        :p
+00035400: 6172 616d 2069 6e74 7c4e 6f6e 6520 6c69  aram int|None li
+00035410: 6d69 743a 2074 6865 206d 6178 696d 756d  mit: the maximum
+00035420: 206e 756d 6265 7220 6f66 206f 7264 6572   number of order
+00035430: 2073 7472 7563 7475 7265 7320 746f 2072   structures to r
+00035440: 6574 7269 6576 650a 2020 2020 2020 2020  etrieve.        
+00035450: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+00035460: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+00035470: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+00035480: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+00035490: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+000354a0: 2020 3a70 6172 616d 2073 7472 7c4e 6f6e    :param str|Non
+000354b0: 6520 7061 7261 6d73 5b27 6d61 7267 696e  e params['margin
+000354c0: 4d6f 6465 275d 3a20 2763 726f 7373 2720  Mode']: 'cross' 
+000354d0: 6f72 2027 6973 6f6c 6174 6564 272c 2066  or 'isolated', f
+000354e0: 6f72 2073 706f 7420 6d61 7267 696e 2074  or spot margin t
+000354f0: 7261 6469 6e67 0a20 2020 2020 2020 203a  rading.        :
+00035500: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
+00035510: 6120 6c69 7374 206f 6620 606f 7264 6572  a list of `order
+00035520: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
+00035530: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+00035540: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
+00035550: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+00035560: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+00035570: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
+00035580: 6564 5f73 796d 626f 6c28 2766 6574 6368  ed_symbol('fetch
+00035590: 4f72 6465 7273 272c 2073 796d 626f 6c29  Orders', symbol)
+000355a0: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+000355b0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+000355c0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+000355d0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+000355e0: 290a 2020 2020 2020 2020 6465 6661 756c  ).        defaul
+000355f0: 7454 7970 6520 3d20 7365 6c66 2e73 6166  tType = self.saf
+00035600: 655f 7374 7269 6e67 5f32 2873 656c 662e  e_string_2(self.
+00035610: 6f70 7469 6f6e 732c 2027 6665 7463 684f  options, 'fetchO
+00035620: 7264 6572 7327 2c20 2764 6566 6175 6c74  rders', 'default
+00035630: 5479 7065 272c 2027 7370 6f74 2729 0a20  Type', 'spot'). 
+00035640: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
+00035650: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00035660: 6172 616d 732c 2027 7479 7065 272c 2064  arams, 'type', d
+00035670: 6566 6175 6c74 5479 7065 290a 2020 2020  efaultType).    
+00035680: 2020 2020 6d61 7267 696e 4d6f 6465 2c20      marginMode, 
+00035690: 7175 6572 7920 3d20 7365 6c66 2e68 616e  query = self.han
+000356a0: 646c 655f 6d61 7267 696e 5f6d 6f64 655f  dle_margin_mode_
+000356b0: 616e 645f 7061 7261 6d73 2827 6665 7463  and_params('fetc
+000356c0: 684f 7264 6572 7327 2c20 7061 7261 6d73  hOrders', params
+000356d0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+000356e0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+000356f0: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+00035700: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+00035710: 2020 7d0a 2020 2020 2020 2020 6d65 7468    }.        meth
+00035720: 6f64 203d 2027 7072 6976 6174 6547 6574  od = 'privateGet
+00035730: 416c 6c4f 7264 6572 7327 0a20 2020 2020  AllOrders'.     
+00035740: 2020 2069 6620 6d61 726b 6574 5b27 6f70     if market['op
+00035750: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
+00035760: 2020 2020 6d65 7468 6f64 203d 2027 6561      method = 'ea
+00035770: 7069 5072 6976 6174 6547 6574 4869 7374  piPrivateGetHist
+00035780: 6f72 794f 7264 6572 7327 0a20 2020 2020  oryOrders'.     
+00035790: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+000357a0: 6c69 6e65 6172 275d 3a0a 2020 2020 2020  linear']:.      
+000357b0: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+000357c0: 6661 7069 5072 6976 6174 6547 6574 416c  fapiPrivateGetAl
+000357d0: 6c4f 7264 6572 7327 0a20 2020 2020 2020  lOrders'.       
+000357e0: 2065 6c69 6620 6d61 726b 6574 5b27 696e   elif market['in
+000357f0: 7665 7273 6527 5d3a 0a20 2020 2020 2020  verse']:.       
+00035800: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
+00035810: 6170 6950 7269 7661 7465 4765 7441 6c6c  apiPrivateGetAll
+00035820: 4f72 6465 7273 270a 2020 2020 2020 2020  Orders'.        
+00035830: 656c 6966 2074 7970 6520 3d3d 2027 6d61  elif type == 'ma
+00035840: 7267 696e 2720 6f72 206d 6172 6769 6e4d  rgin' or marginM
+00035850: 6f64 6520 6973 206e 6f74 204e 6f6e 653a  ode is not None:
+00035860: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00035870: 686f 6420 3d20 2773 6170 6947 6574 4d61  hod = 'sapiGetMa
+00035880: 7267 696e 416c 6c4f 7264 6572 7327 0a20  rginAllOrders'. 
+00035890: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
+000358a0: 7267 696e 4d6f 6465 203d 3d20 2769 736f  rginMode == 'iso
+000358b0: 6c61 7465 6427 3a0a 2020 2020 2020 2020  lated':.        
+000358c0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+000358d0: 2769 7349 736f 6c61 7465 6427 5d20 3d20  'isIsolated'] = 
+000358e0: 5472 7565 0a20 2020 2020 2020 2069 6620  True.        if 
+000358f0: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
+00035900: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00035910: 6571 7565 7374 5b27 7374 6172 7454 696d  equest['startTim
+00035920: 6527 5d20 3d20 7369 6e63 650a 2020 2020  e'] = since.    
+00035930: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
+00035940: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00035950: 2020 2020 2020 7265 7175 6573 745b 276c        request['l
+00035960: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
+00035970: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00035980: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
+00035990: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+000359a0: 656e 6428 7265 7175 6573 742c 2071 7565  end(request, que
+000359b0: 7279 2929 0a20 2020 2020 2020 2023 0a20  ry)).        #. 
+000359c0: 2020 2020 2020 2023 2020 7370 6f74 0a20         #  spot. 
+000359d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000359e0: 2023 2020 2020 205b 0a20 2020 2020 2020   #     [.       
+000359f0: 2023 2020 2020 2020 2020 207b 0a20 2020   #         {.   
+00035a00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00035a10: 2020 2022 7379 6d62 6f6c 223a 2022 4c54     "symbol": "LT
+00035a20: 4342 5443 222c 0a20 2020 2020 2020 2023  CBTC",.        #
+00035a30: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00035a40: 6465 7249 6422 3a20 312c 0a20 2020 2020  derId": 1,.     
+00035a50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00035a60: 2022 636c 6965 6e74 4f72 6465 7249 6422   "clientOrderId"
+00035a70: 3a20 226d 794f 7264 6572 3122 2c0a 2020  : "myOrder1",.  
+00035a80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00035a90: 2020 2020 2270 7269 6365 223a 2022 302e      "price": "0.
+00035aa0: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+00035ab0: 2020 2020 2020 2020 2020 226f 7269 6751            "origQ
+00035ac0: 7479 223a 2022 312e 3022 2c0a 2020 2020  ty": "1.0",.    
+00035ad0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00035ae0: 2020 2265 7865 6375 7465 6451 7479 223a    "executedQty":
+00035af0: 2022 302e 3022 2c0a 2020 2020 2020 2020   "0.0",.        
+00035b00: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
+00035b10: 756d 6d75 6c61 7469 7665 5175 6f74 6551  ummulativeQuoteQ
+00035b20: 7479 223a 2022 302e 3022 2c0a 2020 2020  ty": "0.0",.    
+00035b30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00035b40: 2020 2273 7461 7475 7322 3a20 224e 4557    "status": "NEW
+00035b50: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00035b60: 2020 2020 2020 2020 2022 7469 6d65 496e           "timeIn
+00035b70: 466f 7263 6522 3a20 2247 5443 222c 0a20  Force": "GTC",. 
+00035b80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00035b90: 2020 2020 2022 7479 7065 223a 2022 4c49       "type": "LI
+00035ba0: 4d49 5422 2c0a 2020 2020 2020 2020 2320  MIT",.        # 
+00035bb0: 2020 2020 2020 2020 2020 2020 2273 6964              "sid
+00035bc0: 6522 3a20 2242 5559 222c 0a20 2020 2020  e": "BUY",.     
+00035bd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00035be0: 2022 7374 6f70 5072 6963 6522 3a20 2230   "stopPrice": "0
+00035bf0: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
+00035c00: 2020 2020 2020 2020 2020 2022 6963 6562             "iceb
+00035c10: 6572 6751 7479 223a 2022 302e 3022 2c0a  ergQty": "0.0",.
+00035c20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00035c30: 2020 2020 2020 2274 696d 6522 3a20 3134        "time": 14
+00035c40: 3939 3832 3733 3139 3535 392c 0a20 2020  99827319559,.   
+00035c50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00035c60: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
+00035c70: 2031 3439 3938 3237 3331 3935 3539 2c0a   1499827319559,.
+00035c80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00035c90: 2020 2020 2020 2269 7357 6f72 6b69 6e67        "isWorking
+00035ca0: 223a 2054 7275 650a 2020 2020 2020 2020  ": True.        
+00035cb0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+00035cc0: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
+00035cd0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00035ce0: 2066 7574 7572 6573 0a20 2020 2020 2020   futures.       
+00035cf0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00035d00: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+00035d10: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00035d20: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
+00035d30: 6d62 6f6c 223a 2022 4254 4355 5344 5422  mbol": "BTCUSDT"
+00035d40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00035d50: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
+00035d60: 223a 2031 2c0a 2020 2020 2020 2020 2320  ": 1,.        # 
+00035d70: 2020 2020 2020 2020 2020 2020 2263 6c69              "cli
+00035d80: 656e 744f 7264 6572 4964 223a 2022 6d79  entOrderId": "my
+00035d90: 4f72 6465 7231 222c 0a20 2020 2020 2020  Order1",.       
+00035da0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00035db0: 7072 6963 6522 3a20 2230 2e31 222c 0a20  price": "0.1",. 
+00035dc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00035dd0: 2020 2020 2022 6f72 6967 5174 7922 3a20       "origQty": 
+00035de0: 2231 2e30 222c 0a20 2020 2020 2020 2023  "1.0",.        #
+00035df0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+00035e00: 6563 7574 6564 5174 7922 3a20 2231 2e30  ecutedQty": "1.0
+00035e10: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00035e20: 2020 2020 2020 2020 2022 6375 6d51 756f           "cumQuo
+00035e30: 7465 223a 2022 3130 2e30 222c 0a20 2020  te": "10.0",.   
+00035e40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00035e50: 2020 2022 7374 6174 7573 223a 2022 4e45     "status": "NE
+00035e60: 5722 2c0a 2020 2020 2020 2020 2320 2020  W",.        #   
+00035e70: 2020 2020 2020 2020 2020 2274 696d 6549            "timeI
+00035e80: 6e46 6f72 6365 223a 2022 4754 4322 2c0a  nForce": "GTC",.
+00035e90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00035ea0: 2020 2020 2020 2274 7970 6522 3a20 224c        "type": "L
+00035eb0: 494d 4954 222c 0a20 2020 2020 2020 2023  IMIT",.        #
+00035ec0: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+00035ed0: 6465 223a 2022 4255 5922 2c0a 2020 2020  de": "BUY",.    
+00035ee0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00035ef0: 2020 2273 746f 7050 7269 6365 223a 2022    "stopPrice": "
+00035f00: 302e 3022 2c0a 2020 2020 2020 2020 2320  0.0",.        # 
+00035f10: 2020 2020 2020 2020 2020 2020 2275 7064              "upd
+00035f20: 6174 6554 696d 6522 3a20 3134 3939 3832  ateTime": 149982
+00035f30: 3733 3139 3535 390a 2020 2020 2020 2020  7319559.        
+00035f40: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+00035f50: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
+00035f60: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00035f70: 6f70 7469 6f6e 730a 2020 2020 2020 2020  options.        
+00035f80: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00035f90: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
+00035fa0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00035fb0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00035fc0: 6572 4964 223a 2034 3732 3838 3333 3038  erId": 472883308
+00035fd0: 3534 3336 3937 3731 3532 2c0a 2020 2020  5436977152,.    
+00035fe0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00035ff0: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
+00036000: 2d32 3330 3231 312d 3135 3030 2d43 222c  -230211-1500-C",
+00036010: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00036020: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
+00036030: 2231 302e 3022 2c0a 2020 2020 2020 2020  "10.0",.        
+00036040: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
+00036050: 7561 6e74 6974 7922 3a20 2231 2e30 3022  uantity": "1.00"
+00036060: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00036070: 2020 2020 2020 2020 2265 7865 6375 7465          "execute
+00036080: 6451 7479 223a 2022 302e 3030 222c 0a20  dQty": "0.00",. 
+00036090: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000360a0: 2020 2020 2022 6665 6522 3a20 2230 222c       "fee": "0",
+000360b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000360c0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+000360d0: 4255 5922 2c0a 2020 2020 2020 2020 2320  BUY",.        # 
+000360e0: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
+000360f0: 6522 3a20 224c 494d 4954 222c 0a20 2020  e": "LIMIT",.   
+00036100: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00036110: 2020 2022 7469 6d65 496e 466f 7263 6522     "timeInForce"
+00036120: 3a20 2247 5443 222c 0a20 2020 2020 2020  : "GTC",.       
+00036130: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00036140: 7265 6475 6365 4f6e 6c79 223a 2046 616c  reduceOnly": Fal
+00036150: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
+00036160: 2020 2020 2020 2020 2020 2270 6f73 744f            "postO
+00036170: 6e6c 7922 3a20 4661 6c73 652c 0a20 2020  nly": False,.   
+00036180: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00036190: 2020 2022 6372 6561 7465 5469 6d65 223a     "createTime":
+000361a0: 2031 3637 3630 3833 3033 3434 3632 2c0a   1676083034462,.
+000361b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000361c0: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
+000361d0: 6522 3a20 3136 3736 3038 3330 3334 3436  e": 167608303446
+000361e0: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
+000361f0: 2020 2020 2020 2020 2022 7374 6174 7573           "status
+00036200: 223a 2022 4143 4345 5054 4544 222c 0a20  ": "ACCEPTED",. 
+00036210: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00036220: 2020 2020 2022 6176 6750 7269 6365 223a       "avgPrice":
+00036230: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+00036240: 2020 2020 2020 2020 2020 2020 2273 6f75              "sou
+00036250: 7263 6522 3a20 2241 5049 222c 0a20 2020  rce": "API",.   
+00036260: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00036270: 2020 2022 636c 6965 6e74 4f72 6465 7249     "clientOrderI
+00036280: 6422 3a20 2222 2c0a 2020 2020 2020 2020  d": "",.        
+00036290: 2320 2020 2020 2020 2020 2020 2020 2270  #             "p
+000362a0: 7269 6365 5363 616c 6522 3a20 312c 0a20  riceScale": 1,. 
+000362b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000362c0: 2020 2020 2022 7175 616e 7469 7479 5363       "quantitySc
+000362d0: 616c 6522 3a20 322c 0a20 2020 2020 2020  ale": 2,.       
+000362e0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000362f0: 6f70 7469 6f6e 5369 6465 223a 2022 4341  optionSide": "CA
+00036300: 4c4c 222c 0a20 2020 2020 2020 2023 2020  LL",.        #  
+00036310: 2020 2020 2020 2020 2020 2022 7175 6f74             "quot
+00036320: 6541 7373 6574 223a 2022 5553 4454 222c  eAsset": "USDT",
+00036330: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00036340: 2020 2020 2020 2022 6c61 7374 5472 6164         "lastTrad
+00036350: 6522 3a20 7b22 6964 223a 2236 3922 2c22  e": {"id":"69","
+00036360: 7469 6d65 223a 2231 3637 3630 3834 3433  time":"167608443
+00036370: 3035 3637 222c 2270 7269 6365 223a 2232  0567","price":"2
+00036380: 342e 3922 2c22 7174 7922 3a22 312e 3030  4.9","qty":"1.00
+00036390: 227d 2c0a 2020 2020 2020 2020 2320 2020  "},.        #   
+000363a0: 2020 2020 2020 2020 2020 226d 6d70 223a            "mmp":
+000363b0: 2046 616c 7365 0a20 2020 2020 2020 2023   False.        #
+000363c0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+000363d0: 2020 2023 2020 2020 205d 0a20 2020 2020     #     ].     
+000363e0: 2020 2023 0a20 2020 2020 2020 2072 6574     #.        ret
+000363f0: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+00036400: 7264 6572 7328 7265 7370 6f6e 7365 2c20  rders(response, 
+00036410: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
+00036420: 696d 6974 290a 0a20 2020 2064 6566 2066  imit)..    def f
+00036430: 6574 6368 5f6f 7065 6e5f 6f72 6465 7273  etch_open_orders
+00036440: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
+00036450: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00036460: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
+00036470: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00036480: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
+00036490: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
+000364a0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+000364b0: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
+000364c0: 6574 6368 2061 6c6c 2075 6e66 696c 6c65  etch all unfille
+000364d0: 6420 6375 7272 656e 746c 7920 6f70 656e  d currently open
+000364e0: 206f 7264 6572 730a 2020 2020 2020 2020   orders.        
+000364f0: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+00036500: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+00036510: 6d61 726b 6574 2073 796d 626f 6c0a 2020  market symbol.  
+00036520: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+00036530: 7c4e 6f6e 6520 7369 6e63 653a 2074 6865  |None since: the
+00036540: 2065 6172 6c69 6573 7420 7469 6d65 2069   earliest time i
+00036550: 6e20 6d73 2074 6f20 6665 7463 6820 6f70  n ms to fetch op
+00036560: 656e 206f 7264 6572 7320 666f 720a 2020  en orders for.  
+00036570: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+00036580: 7c4e 6f6e 6520 6c69 6d69 743a 2074 6865  |None limit: the
+00036590: 206d 6178 696d 756d 206e 756d 6265 7220   maximum number 
+000365a0: 6f66 206f 7065 6e20 6f72 6465 7273 2073  of open orders s
+000365b0: 7472 7563 7475 7265 7320 746f 2072 6574  tructures to ret
+000365c0: 7269 6576 650a 2020 2020 2020 2020 3a70  rieve.        :p
+000365d0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+000365e0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+000365f0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+00036600: 6865 2062 696e 616e 6365 2061 7069 2065  he binance api e
+00036610: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+00036620: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+00036630: 7061 7261 6d73 5b27 6d61 7267 696e 4d6f  params['marginMo
+00036640: 6465 275d 3a20 2763 726f 7373 2720 6f72  de']: 'cross' or
+00036650: 2027 6973 6f6c 6174 6564 272c 2066 6f72   'isolated', for
+00036660: 2073 706f 7420 6d61 7267 696e 2074 7261   spot margin tra
+00036670: 6469 6e67 0a20 2020 2020 2020 203a 7265  ding.        :re
+00036680: 7475 726e 7320 5b64 6963 745d 3a20 6120  turns [dict]: a 
+00036690: 6c69 7374 206f 6620 606f 7264 6572 2073  list of `order s
+000366a0: 7472 7563 7475 7265 7320 3c68 7474 7073  tructures <https
+000366b0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+000366c0: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
+000366d0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+000366e0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+000366f0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+00036700: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+00036710: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
+00036720: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
+00036730: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
+00036740: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
+00036750: 6465 203d 204e 6f6e 650a 2020 2020 2020  de = None.      
+00036760: 2020 7175 6572 7920 3d20 4e6f 6e65 0a20    query = None. 
+00036770: 2020 2020 2020 206d 6172 6769 6e4d 6f64         marginMod
+00036780: 652c 2071 7565 7279 203d 2073 656c 662e  e, query = self.
+00036790: 6861 6e64 6c65 5f6d 6172 6769 6e5f 6d6f  handle_margin_mo
+000367a0: 6465 5f61 6e64 5f70 6172 616d 7328 2766  de_and_params('f
+000367b0: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
+000367c0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+000367d0: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
+000367e0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000367f0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00036800: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00036810: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00036820: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
+00036830: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
+00036840: 2020 2020 2020 2020 2020 6465 6661 756c            defaul
+00036850: 7454 7970 6520 3d20 7365 6c66 2e73 6166  tType = self.saf
+00036860: 655f 7374 7269 6e67 5f32 2873 656c 662e  e_string_2(self.
+00036870: 6f70 7469 6f6e 732c 2027 6665 7463 684f  options, 'fetchO
+00036880: 7065 6e4f 7264 6572 7327 2c20 2764 6566  penOrders', 'def
+00036890: 6175 6c74 5479 7065 272c 2027 7370 6f74  aultType', 'spot
+000368a0: 2729 0a20 2020 2020 2020 2020 2020 206d  ').            m
+000368b0: 6172 6b65 7454 7970 6520 3d20 6d61 726b  arketType = mark
+000368c0: 6574 5b27 7479 7065 275d 2069 6620 2827  et['type'] if ('
+000368d0: 7479 7065 2720 696e 206d 6172 6b65 7429  type' in market)
+000368e0: 2065 6c73 6520 6465 6661 756c 7454 7970   else defaultTyp
+000368f0: 650a 2020 2020 2020 2020 2020 2020 7479  e.            ty
+00036900: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
+00036910: 7472 696e 6728 7175 6572 792c 2027 7479  tring(query, 'ty
+00036920: 7065 272c 206d 6172 6b65 7454 7970 6529  pe', marketType)
+00036930: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
+00036940: 6c66 2e6f 7074 696f 6e73 5b27 7761 726e  lf.options['warn
+00036950: 4f6e 4665 7463 684f 7065 6e4f 7264 6572  OnFetchOpenOrder
+00036960: 7357 6974 686f 7574 5379 6d62 6f6c 275d  sWithoutSymbol']
+00036970: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
+00036980: 6d62 6f6c 7320 3d20 7365 6c66 2e73 796d  mbols = self.sym
+00036990: 626f 6c73 0a20 2020 2020 2020 2020 2020  bols.           
+000369a0: 206e 756d 5379 6d62 6f6c 7320 3d20 6c65   numSymbols = le
+000369b0: 6e28 7379 6d62 6f6c 7329 0a20 2020 2020  n(symbols).     
+000369c0: 2020 2020 2020 2066 6574 6368 4f70 656e         fetchOpen
+000369d0: 4f72 6465 7273 5261 7465 4c69 6d69 7420  OrdersRateLimit 
+000369e0: 3d20 7365 6c66 2e70 6172 7365 5f74 6f5f  = self.parse_to_
+000369f0: 696e 7428 6e75 6d53 796d 626f 6c73 202f  int(numSymbols /
+00036a00: 2032 290a 2020 2020 2020 2020 2020 2020   2).            
+00036a10: 7261 6973 6520 4578 6368 616e 6765 4572  raise ExchangeEr
+00036a20: 726f 7228 7365 6c66 2e69 6420 2b20 2720  ror(self.id + ' 
+00036a30: 6665 7463 684f 7065 6e4f 7264 6572 7328  fetchOpenOrders(
+00036a40: 2920 5741 524e 494e 473a 2066 6574 6368  ) WARNING: fetch
+00036a50: 696e 6720 6f70 656e 206f 7264 6572 7320  ing open orders 
+00036a60: 7769 7468 6f75 7420 7370 6563 6966 7969  without specifyi
+00036a70: 6e67 2061 2073 796d 626f 6c20 6973 2072  ng a symbol is r
+00036a80: 6174 652d 6c69 6d69 7465 6420 746f 206f  ate-limited to o
+00036a90: 6e65 2063 616c 6c20 7065 7220 2720 2b20  ne call per ' + 
+00036aa0: 7374 7228 6665 7463 684f 7065 6e4f 7264  str(fetchOpenOrd
+00036ab0: 6572 7352 6174 654c 696d 6974 2920 2b20  ersRateLimit) + 
+00036ac0: 2720 7365 636f 6e64 732e 2044 6f20 6e6f  ' seconds. Do no
+00036ad0: 7420 6361 6c6c 2073 656c 6620 6d65 7468  t call self meth
+00036ae0: 6f64 2066 7265 7175 656e 746c 7920 746f  od frequently to
+00036af0: 2061 766f 6964 2062 616e 2e20 5365 7420   avoid ban. Set 
+00036b00: 2720 2b20 7365 6c66 2e69 6420 2b20 272e  ' + self.id + '.
+00036b10: 6f70 7469 6f6e 735b 2277 6172 6e4f 6e46  options["warnOnF
+00036b20: 6574 6368 4f70 656e 4f72 6465 7273 5769  etchOpenOrdersWi
+00036b30: 7468 6f75 7453 796d 626f 6c22 5d20 3d20  thoutSymbol"] = 
+00036b40: 4661 6c73 6520 746f 2073 7570 7072 6573  False to suppres
+00036b50: 7320 7365 6c66 2077 6172 6e69 6e67 206d  s self warning m
+00036b60: 6573 7361 6765 2e27 290a 2020 2020 2020  essage.').      
+00036b70: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00036b80: 2020 2020 6465 6661 756c 7454 7970 6520      defaultType 
+00036b90: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00036ba0: 6e67 5f32 2873 656c 662e 6f70 7469 6f6e  ng_2(self.option
+00036bb0: 732c 2027 6665 7463 684f 7065 6e4f 7264  s, 'fetchOpenOrd
+00036bc0: 6572 7327 2c20 2764 6566 6175 6c74 5479  ers', 'defaultTy
+00036bd0: 7065 272c 2027 7370 6f74 2729 0a20 2020  pe', 'spot').   
+00036be0: 2020 2020 2020 2020 2074 7970 6520 3d20           type = 
+00036bf0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00036c00: 2871 7565 7279 2c20 2774 7970 6527 2c20  (query, 'type', 
+00036c10: 6465 6661 756c 7454 7970 6529 0a20 2020  defaultType).   
+00036c20: 2020 2020 2073 7562 5479 7065 203d 204e       subType = N
+00036c30: 6f6e 650a 2020 2020 2020 2020 7375 6254  one.        subT
+00036c40: 7970 652c 2071 7565 7279 203d 2073 656c  ype, query = sel
+00036c50: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
+00036c60: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
+00036c70: 7463 684f 7065 6e4f 7264 6572 7327 2c20  tchOpenOrders', 
+00036c80: 6d61 726b 6574 2c20 7175 6572 7929 0a20  market, query). 
+00036c90: 2020 2020 2020 2072 6571 7565 7374 5061         requestPa
+00036ca0: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
+00036cb0: 2871 7565 7279 2c20 2774 7970 6527 290a  (query, 'type').
+00036cc0: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
+00036cd0: 2027 7072 6976 6174 6547 6574 4f70 656e   'privateGetOpen
+00036ce0: 4f72 6465 7273 270a 2020 2020 2020 2020  Orders'.        
+00036cf0: 6966 2074 7970 6520 3d3d 2027 6f70 7469  if type == 'opti
+00036d00: 6f6e 273a 0a20 2020 2020 2020 2020 2020  on':.           
+00036d10: 206d 6574 686f 6420 3d20 2765 6170 6950   method = 'eapiP
+00036d20: 7269 7661 7465 4765 744f 7065 6e4f 7264  rivateGetOpenOrd
+00036d30: 6572 7327 0a20 2020 2020 2020 2020 2020  ers'.           
+00036d40: 2069 6620 7369 6e63 6520 6973 206e 6f74   if since is not
+00036d50: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00036d60: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00036d70: 7374 6172 7454 696d 6527 5d20 3d20 7369  startTime'] = si
+00036d80: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
+00036d90: 6966 206c 696d 6974 2069 7320 6e6f 7420  if limit is not 
+00036da0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00036db0: 2020 2020 2020 7265 7175 6573 745b 276c        request['l
+00036dc0: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
+00036dd0: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
+00036de0: 2e69 735f 6c69 6e65 6172 2874 7970 652c  .is_linear(type,
+00036df0: 2073 7562 5479 7065 293a 0a20 2020 2020   subType):.     
+00036e00: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00036e10: 2766 6170 6950 7269 7661 7465 4765 744f  'fapiPrivateGetO
+00036e20: 7065 6e4f 7264 6572 7327 0a20 2020 2020  penOrders'.     
+00036e30: 2020 2065 6c69 6620 7365 6c66 2e69 735f     elif self.is_
+00036e40: 696e 7665 7273 6528 7479 7065 2c20 7375  inverse(type, su
+00036e50: 6254 7970 6529 3a0a 2020 2020 2020 2020  bType):.        
+00036e60: 2020 2020 6d65 7468 6f64 203d 2027 6461      method = 'da
+00036e70: 7069 5072 6976 6174 6547 6574 4f70 656e  piPrivateGetOpen
+00036e80: 4f72 6465 7273 270a 2020 2020 2020 2020  Orders'.        
+00036e90: 656c 6966 2074 7970 6520 3d3d 2027 6d61  elif type == 'ma
+00036ea0: 7267 696e 2720 6f72 206d 6172 6769 6e4d  rgin' or marginM
+00036eb0: 6f64 6520 6973 206e 6f74 204e 6f6e 653a  ode is not None:
+00036ec0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00036ed0: 686f 6420 3d20 2773 6170 6947 6574 4d61  hod = 'sapiGetMa
+00036ee0: 7267 696e 4f70 656e 4f72 6465 7273 270a  rginOpenOrders'.
+00036ef0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00036f00: 6172 6769 6e4d 6f64 6520 3d3d 2027 6973  arginMode == 'is
+00036f10: 6f6c 6174 6564 273a 0a20 2020 2020 2020  olated':.       
+00036f20: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00036f30: 5b27 6973 4973 6f6c 6174 6564 275d 203d  ['isIsolated'] =
+00036f40: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+00036f50: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
+00036f60: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00036f70: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00036f80: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
+00036f90: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
+00036fa0: 2066 6574 6368 4f70 656e 4f72 6465 7273   fetchOpenOrders
+00036fb0: 2829 2072 6571 7569 7265 7320 6120 7379  () requires a sy
+00036fc0: 6d62 6f6c 2061 7267 756d 656e 7420 666f  mbol argument fo
+00036fd0: 7220 6973 6f6c 6174 6564 206d 6172 6b65  r isolated marke
+00036fe0: 7473 2729 0a20 2020 2020 2020 2072 6573  ts').        res
+00036ff0: 706f 6e73 6520 3d20 6765 7461 7474 7228  ponse = getattr(
+00037000: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
+00037010: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00037020: 742c 2072 6571 7565 7374 5061 7261 6d73  t, requestParams
+00037030: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+00037040: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
+00037050: 6572 7328 7265 7370 6f6e 7365 2c20 6d61  ers(response, ma
+00037060: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
+00037070: 6974 290a 0a20 2020 2064 6566 2066 6574  it)..    def fet
+00037080: 6368 5f63 6c6f 7365 645f 6f72 6465 7273  ch_closed_orders
+00037090: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
+000370a0: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+000370b0: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
+000370c0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+000370d0: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
+000370e0: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
+000370f0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00037100: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
+00037110: 6574 6368 6573 2069 6e66 6f72 6d61 7469  etches informati
+00037120: 6f6e 206f 6e20 6d75 6c74 6970 6c65 2063  on on multiple c
+00037130: 6c6f 7365 6420 6f72 6465 7273 206d 6164  losed orders mad
+00037140: 6520 6279 2074 6865 2075 7365 720a 2020  e by the user.  
+00037150: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00037160: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+00037170: 206d 6172 6b65 7420 7379 6d62 6f6c 206f   market symbol o
+00037180: 6620 7468 6520 6d61 726b 6574 206f 7264  f the market ord
+00037190: 6572 7320 7765 7265 206d 6164 6520 696e  ers were made in
+000371a0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000371b0: 696e 747c 4e6f 6e65 2073 696e 6365 3a20  int|None since: 
+000371c0: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
+000371d0: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
+000371e0: 206f 7264 6572 7320 666f 720a 2020 2020   orders for.    
+000371f0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00037200: 6f6e 6520 6c69 6d69 743a 2074 6865 206d  one limit: the m
+00037210: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
+00037220: 206f 7264 6572 2073 7472 7563 7475 7265   order structure
+00037230: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
+00037240: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00037250: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+00037260: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00037270: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
+00037280: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
+00037290: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+000372a0: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
+000372b0: 6f66 2060 6f72 6465 7220 7374 7275 6374  of `order struct
+000372c0: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
+000372d0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+000372e0: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
+000372f0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00037300: 2020 2020 2020 2020 6f72 6465 7273 203d          orders =
+00037310: 2073 656c 662e 6665 7463 685f 6f72 6465   self.fetch_orde
+00037320: 7273 2873 796d 626f 6c2c 2073 696e 6365  rs(symbol, since
+00037330: 2c20 6c69 6d69 742c 2070 6172 616d 7329  , limit, params)
+00037340: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00037350: 7365 6c66 2e66 696c 7465 725f 6279 286f  self.filter_by(o
+00037360: 7264 6572 732c 2027 7374 6174 7573 272c  rders, 'status',
+00037370: 2027 636c 6f73 6564 2729 0a0a 2020 2020   'closed')..    
+00037380: 6465 6620 6665 7463 685f 6361 6e63 656c  def fetch_cancel
+00037390: 6564 5f6f 7264 6572 7328 7365 6c66 2c20  ed_orders(self, 
+000373a0: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+000373b0: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
+000373c0: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
+000373d0: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
+000373e0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+000373f0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00037400: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+00037410: 2020 2020 2020 2020 6665 7463 6865 7320          fetches 
+00037420: 696e 666f 726d 6174 696f 6e20 6f6e 206d  information on m
+00037430: 756c 7469 706c 6520 6361 6e63 656c 6564  ultiple canceled
+00037440: 206f 7264 6572 7320 6d61 6465 2062 7920   orders made by 
+00037450: 7468 6520 7573 6572 0a20 2020 2020 2020  the user.       
+00037460: 2073 6565 2068 7474 7073 3a2f 2f62 696e   see https://bin
+00037470: 616e 6365 2d64 6f63 732e 6769 7468 7562  ance-docs.github
+00037480: 2e69 6f2f 6170 6964 6f63 732f 7370 6f74  .io/apidocs/spot
+00037490: 2f65 6e2f 2361 6c6c 2d6f 7264 6572 732d  /en/#all-orders-
+000374a0: 7573 6572 5f64 6174 610a 2020 2020 2020  user_data.      
+000374b0: 2020 7365 6520 6874 7470 733a 2f2f 6269    see https://bi
+000374c0: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
+000374d0: 622e 696f 2f61 7069 646f 6373 2f73 706f  b.io/apidocs/spo
+000374e0: 742f 656e 2f23 7175 6572 792d 6d61 7267  t/en/#query-marg
+000374f0: 696e 2d61 6363 6f75 6e74 2d33 392d 732d  in-account-39-s-
+00037500: 616c 6c2d 6f72 6465 7273 2d75 7365 725f  all-orders-user_
+00037510: 6461 7461 0a20 2020 2020 2020 2073 6565  data.        see
+00037520: 2068 7474 7073 3a2f 2f62 696e 616e 6365   https://binance
+00037530: 2d64 6f63 732e 6769 7468 7562 2e69 6f2f  -docs.github.io/
+00037540: 6170 6964 6f63 732f 766f 7074 696f 6e73  apidocs/voptions
+00037550: 2f65 6e2f 2371 7565 7279 2d6f 7074 696f  /en/#query-optio
+00037560: 6e2d 6f72 6465 722d 6869 7374 6f72 792d  n-order-history-
+00037570: 7472 6164 650a 2020 2020 2020 2020 3a70  trade.        :p
+00037580: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
+00037590: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
+000375a0: 7379 6d62 6f6c 206f 6620 7468 6520 6d61  symbol of the ma
+000375b0: 726b 6574 2074 6865 206f 7264 6572 7320  rket the orders 
+000375c0: 7765 7265 206d 6164 6520 696e 0a20 2020  were made in.   
+000375d0: 2020 2020 203a 7061 7261 6d20 696e 747c       :param int|
+000375e0: 4e6f 6e65 2073 696e 6365 3a20 7468 6520  None since: the 
+000375f0: 6561 726c 6965 7374 2074 696d 6520 696e  earliest time in
+00037600: 206d 7320 746f 2066 6574 6368 206f 7264   ms to fetch ord
+00037610: 6572 7320 666f 720a 2020 2020 2020 2020  ers for.        
+00037620: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+00037630: 6c69 6d69 743a 2074 6865 206d 6178 696d  limit: the maxim
+00037640: 756d 206e 756d 6265 7220 6f66 206f 7264  um number of ord
+00037650: 6572 2073 7472 7563 7475 7265 7320 746f  er structures to
+00037660: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
+00037670: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+00037680: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+00037690: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+000376a0: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
+000376b0: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+000376c0: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
+000376d0: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
+000376e0: 6f72 6465 7220 7374 7275 6374 7572 6573  order structures
+000376f0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+00037700: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
+00037710: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
+00037720: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00037730: 2020 2020 7365 6c66 2e63 6865 636b 5f72      self.check_r
+00037740: 6571 7569 7265 645f 7379 6d62 6f6c 2827  equired_symbol('
+00037750: 6665 7463 6843 616e 6365 6c65 644f 7264  fetchCanceledOrd
+00037760: 6572 7327 2c20 7379 6d62 6f6c 290a 2020  ers', symbol).  
+00037770: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+00037780: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00037790: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+000377a0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+000377b0: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
+000377c0: 5b27 7377 6170 275d 206f 7220 6d61 726b  ['swap'] or mark
+000377d0: 6574 5b27 6675 7475 7265 275d 3a0a 2020  et['future']:.  
+000377e0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000377f0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
+00037800: 662e 6964 202b 2027 2066 6574 6368 4361  f.id + ' fetchCa
+00037810: 6e63 656c 6564 4f72 6465 7273 2829 2073  nceledOrders() s
+00037820: 7570 706f 7274 7320 7370 6f74 2c20 6d61  upports spot, ma
+00037830: 7267 696e 2061 6e64 206f 7074 696f 6e20  rgin and option 
+00037840: 6d61 726b 6574 7320 6f6e 6c79 2729 0a20  markets only'). 
+00037850: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
+00037860: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
+00037870: 2c20 2774 7970 6527 290a 2020 2020 2020  , 'type').      
+00037880: 2020 6f72 6465 7273 203d 2073 656c 662e    orders = self.
+00037890: 6665 7463 685f 6f72 6465 7273 2873 796d  fetch_orders(sym
+000378a0: 626f 6c2c 2073 696e 6365 2c20 4e6f 6e65  bol, since, None
+000378b0: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+000378c0: 2020 6669 6c74 6572 6564 4f72 6465 7273    filteredOrders
+000378d0: 203d 2073 656c 662e 6669 6c74 6572 5f62   = self.filter_b
+000378e0: 7928 6f72 6465 7273 2c20 2773 7461 7475  y(orders, 'statu
+000378f0: 7327 2c20 2763 616e 6365 6c65 6427 290a  s', 'canceled').
+00037900: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00037910: 656c 662e 6669 6c74 6572 5f62 795f 6c69  elf.filter_by_li
+00037920: 6d69 7428 6669 6c74 6572 6564 4f72 6465  mit(filteredOrde
+00037930: 7273 2c20 6c69 6d69 7429 0a0a 2020 2020  rs, limit)..    
+00037940: 6465 6620 6361 6e63 656c 5f6f 7264 6572  def cancel_order
+00037950: 2873 656c 662c 2069 643a 2073 7472 2c20  (self, id: str, 
+00037960: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+00037970: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
+00037980: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00037990: 2020 2222 220a 2020 2020 2020 2020 6361    """.        ca
+000379a0: 6e63 656c 7320 616e 206f 7065 6e20 6f72  ncels an open or
+000379b0: 6465 720a 2020 2020 2020 2020 3a70 6172  der.        :par
+000379c0: 616d 2073 7472 2069 643a 206f 7264 6572  am str id: order
+000379d0: 2069 640a 2020 2020 2020 2020 3a70 6172   id.        :par
+000379e0: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+000379f0: 6e69 6669 6564 2073 796d 626f 6c20 6f66  nified symbol of
+00037a00: 2074 6865 206d 6172 6b65 7420 7468 6520   the market the 
+00037a10: 6f72 6465 7220 7761 7320 6d61 6465 2069  order was made i
+00037a20: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
+00037a30: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+00037a40: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+00037a50: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+00037a60: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
+00037a70: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+00037a80: 7572 6e73 2064 6963 743a 2041 6e20 606f  urns dict: An `o
+00037a90: 7264 6572 2073 7472 7563 7475 7265 203c  rder structure <
+00037aa0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
+00037ab0: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
+00037ac0: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
+00037ad0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00037ae0: 2020 7365 6c66 2e63 6865 636b 5f72 6571    self.check_req
+00037af0: 7569 7265 645f 7379 6d62 6f6c 2827 6361  uired_symbol('ca
+00037b00: 6e63 656c 4f72 6465 7227 2c20 7379 6d62  ncelOrder', symb
+00037b10: 6f6c 290a 2020 2020 2020 2020 7365 6c66  ol).        self
+00037b20: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00037b30: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00037b40: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00037b50: 626f 6c29 0a20 2020 2020 2020 2064 6566  bol).        def
+00037b60: 6175 6c74 5479 7065 203d 2073 656c 662e  aultType = self.
+00037b70: 7361 6665 5f73 7472 696e 675f 3228 7365  safe_string_2(se
+00037b80: 6c66 2e6f 7074 696f 6e73 2c20 2763 616e  lf.options, 'can
+00037b90: 6365 6c4f 7264 6572 272c 2027 6465 6661  celOrder', 'defa
+00037ba0: 756c 7454 7970 6527 2c20 2773 706f 7427  ultType', 'spot'
+00037bb0: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
+00037bc0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00037bd0: 6728 7061 7261 6d73 2c20 2774 7970 6527  g(params, 'type'
+00037be0: 2c20 6465 6661 756c 7454 7970 6529 0a20  , defaultType). 
+00037bf0: 2020 2020 2020 206d 6172 6769 6e4d 6f64         marginMod
+00037c00: 652c 2071 7565 7279 203d 2073 656c 662e  e, query = self.
+00037c10: 6861 6e64 6c65 5f6d 6172 6769 6e5f 6d6f  handle_margin_mo
+00037c20: 6465 5f61 6e64 5f70 6172 616d 7328 2763  de_and_params('c
+00037c30: 616e 6365 6c4f 7264 6572 272c 2070 6172  ancelOrder', par
+00037c40: 616d 7329 0a20 2020 2020 2020 2072 6571  ams).        req
+00037c50: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+00037c60: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
+00037c70: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
+00037c80: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+00037c90: 7249 6427 3a20 6964 2c0a 2020 2020 2020  rId': id,.      
+00037ca0: 2020 2020 2020 2320 276f 7269 6743 6c69        # 'origCli
+00037cb0: 656e 744f 7264 6572 4964 273a 2069 642c  entOrderId': id,
+00037cc0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00037cd0: 2020 2063 6c69 656e 744f 7264 6572 4964     clientOrderId
+00037ce0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00037cf0: 7565 5f32 2870 6172 616d 732c 2027 6f72  ue_2(params, 'or
+00037d00: 6967 436c 6965 6e74 4f72 6465 7249 6427  igClientOrderId'
+00037d10: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
+00037d20: 2729 0a20 2020 2020 2020 2069 6620 636c  ').        if cl
+00037d30: 6965 6e74 4f72 6465 7249 6420 6973 206e  ientOrderId is n
+00037d40: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00037d50: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+00037d60: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
+00037d70: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00037d80: 745b 2763 6c69 656e 744f 7264 6572 4964  t['clientOrderId
+00037d90: 275d 203d 2063 6c69 656e 744f 7264 6572  '] = clientOrder
+00037da0: 4964 0a20 2020 2020 2020 2020 2020 2065  Id.            e
+00037db0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00037dc0: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
+00037dd0: 6967 436c 6965 6e74 4f72 6465 7249 6427  igClientOrderId'
+00037de0: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
+00037df0: 640a 2020 2020 2020 2020 656c 7365 3a0a  d.        else:.
+00037e00: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00037e10: 6573 745b 276f 7264 6572 4964 275d 203d  est['orderId'] =
+00037e20: 2069 640a 2020 2020 2020 2020 6d65 7468   id.        meth
+00037e30: 6f64 203d 2027 7072 6976 6174 6544 656c  od = 'privateDel
+00037e40: 6574 654f 7264 6572 270a 2020 2020 2020  eteOrder'.      
+00037e50: 2020 6966 206d 6172 6b65 745b 276f 7074    if market['opt
+00037e60: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
+00037e70: 2020 206d 6574 686f 6420 3d20 2765 6170     method = 'eap
+00037e80: 6950 7269 7661 7465 4465 6c65 7465 4f72  iPrivateDeleteOr
+00037e90: 6465 7227 0a20 2020 2020 2020 2065 6c69  der'.        eli
+00037ea0: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
+00037eb0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00037ec0: 6d65 7468 6f64 203d 2027 6661 7069 5072  method = 'fapiPr
+00037ed0: 6976 6174 6544 656c 6574 654f 7264 6572  ivateDeleteOrder
+00037ee0: 270a 2020 2020 2020 2020 656c 6966 206d  '.        elif m
+00037ef0: 6172 6b65 745b 2769 6e76 6572 7365 275d  arket['inverse']
+00037f00: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+00037f10: 7468 6f64 203d 2027 6461 7069 5072 6976  thod = 'dapiPriv
+00037f20: 6174 6544 656c 6574 654f 7264 6572 270a  ateDeleteOrder'.
+00037f30: 2020 2020 2020 2020 656c 6966 2074 7970          elif typ
+00037f40: 6520 3d3d 2027 6d61 7267 696e 2720 6f72  e == 'margin' or
+00037f50: 206d 6172 6769 6e4d 6f64 6520 6973 206e   marginMode is n
+00037f60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00037f70: 2020 2020 206d 6574 686f 6420 3d20 2773       method = 's
+00037f80: 6170 6944 656c 6574 654d 6172 6769 6e4f  apiDeleteMarginO
+00037f90: 7264 6572 270a 2020 2020 2020 2020 2020  rder'.          
+00037fa0: 2020 6966 206d 6172 6769 6e4d 6f64 6520    if marginMode 
+00037fb0: 3d3d 2027 6973 6f6c 6174 6564 273a 0a20  == 'isolated':. 
+00037fc0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00037fd0: 6571 7565 7374 5b27 6973 4973 6f6c 6174  equest['isIsolat
+00037fe0: 6564 275d 203d 2054 7275 650a 2020 2020  ed'] = True.    
+00037ff0: 2020 2020 7265 7175 6573 7450 6172 616d      requestParam
+00038000: 7320 3d20 7365 6c66 2e6f 6d69 7428 7175  s = self.omit(qu
+00038010: 6572 792c 205b 2774 7970 6527 2c20 276f  ery, ['type', 'o
+00038020: 7269 6743 6c69 656e 744f 7264 6572 4964  rigClientOrderId
+00038030: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
+00038040: 6427 5d29 0a20 2020 2020 2020 2072 6573  d']).        res
+00038050: 706f 6e73 6520 3d20 6765 7461 7474 7228  ponse = getattr(
+00038060: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
+00038070: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00038080: 742c 2072 6571 7565 7374 5061 7261 6d73  t, requestParams
+00038090: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+000380a0: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
+000380b0: 6572 2872 6573 706f 6e73 652c 206d 6172  er(response, mar
+000380c0: 6b65 7429 0a0a 2020 2020 6465 6620 6361  ket)..    def ca
+000380d0: 6e63 656c 5f61 6c6c 5f6f 7264 6572 7328  ncel_all_orders(
+000380e0: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
+000380f0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+00038100: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+00038110: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00038120: 2020 2020 6361 6e63 656c 2061 6c6c 206f      cancel all o
+00038130: 7065 6e20 6f72 6465 7273 2069 6e20 6120  pen orders in a 
+00038140: 6d61 726b 6574 0a20 2020 2020 2020 203a  market.        :
+00038150: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
+00038160: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+00038170: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+00038180: 6172 6b65 7420 746f 2063 616e 6365 6c20  arket to cancel 
+00038190: 6f72 6465 7273 2069 6e0a 2020 2020 2020  orders in.      
+000381a0: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+000381b0: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+000381c0: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+000381d0: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
+000381e0: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+000381f0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
+00038200: 6f6e 6520 7061 7261 6d73 5b27 6d61 7267  one params['marg
+00038210: 696e 4d6f 6465 275d 3a20 2763 726f 7373  inMode']: 'cross
+00038220: 2720 6f72 2027 6973 6f6c 6174 6564 272c  ' or 'isolated',
+00038230: 2066 6f72 2073 706f 7420 6d61 7267 696e   for spot margin
+00038240: 2074 7261 6469 6e67 0a20 2020 2020 2020   trading.       
+00038250: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
+00038260: 3a20 6120 6c69 7374 206f 6620 606f 7264  : a list of `ord
+00038270: 6572 2073 7472 7563 7475 7265 7320 3c68  er structures <h
+00038280: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00038290: 2e63 6f6d 2f23 2f3f 6964 3d6f 7264 6572  .com/#/?id=order
+000382a0: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+000382b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000382c0: 2073 656c 662e 6368 6563 6b5f 7265 7175   self.check_requ
+000382d0: 6972 6564 5f73 796d 626f 6c28 2763 616e  ired_symbol('can
+000382e0: 6365 6c41 6c6c 4f72 6465 7273 272c 2073  celAllOrders', s
+000382f0: 796d 626f 6c29 0a20 2020 2020 2020 2073  ymbol).        s
+00038300: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+00038310: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+00038320: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+00038330: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+00038340: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+00038350: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00038360: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+00038370: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00038380: 2020 7479 7065 203d 2073 656c 662e 7361    type = self.sa
+00038390: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
+000383a0: 2c20 2774 7970 6527 2c20 6d61 726b 6574  , 'type', market
+000383b0: 5b27 7479 7065 275d 290a 2020 2020 2020  ['type']).      
+000383c0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
+000383d0: 6f6d 6974 2870 6172 616d 732c 205b 2774  omit(params, ['t
+000383e0: 7970 6527 5d29 0a20 2020 2020 2020 206d  ype']).        m
+000383f0: 6172 6769 6e4d 6f64 652c 2071 7565 7279  arginMode, query
+00038400: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+00038410: 6172 6769 6e5f 6d6f 6465 5f61 6e64 5f70  argin_mode_and_p
+00038420: 6172 616d 7328 2763 616e 6365 6c41 6c6c  arams('cancelAll
+00038430: 4f72 6465 7273 272c 2070 6172 616d 7329  Orders', params)
+00038440: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
+00038450: 3d20 2770 7269 7661 7465 4465 6c65 7465  = 'privateDelete
+00038460: 4f70 656e 4f72 6465 7273 270a 2020 2020  OpenOrders'.    
+00038470: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
+00038480: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
+00038490: 2020 2020 206d 6574 686f 6420 3d20 2765       method = 'e
+000384a0: 6170 6950 7269 7661 7465 4465 6c65 7465  apiPrivateDelete
+000384b0: 416c 6c4f 7065 6e4f 7264 6572 7327 0a20  AllOpenOrders'. 
+000384c0: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
+000384d0: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
+000384e0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+000384f0: 203d 2027 6661 7069 5072 6976 6174 6544   = 'fapiPrivateD
+00038500: 656c 6574 6541 6c6c 4f70 656e 4f72 6465  eleteAllOpenOrde
+00038510: 7273 270a 2020 2020 2020 2020 656c 6966  rs'.        elif
+00038520: 206d 6172 6b65 745b 2769 6e76 6572 7365   market['inverse
+00038530: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00038540: 6d65 7468 6f64 203d 2027 6461 7069 5072  method = 'dapiPr
+00038550: 6976 6174 6544 656c 6574 6541 6c6c 4f70  ivateDeleteAllOp
+00038560: 656e 4f72 6465 7273 270a 2020 2020 2020  enOrders'.      
+00038570: 2020 656c 6966 2028 7479 7065 203d 3d20    elif (type == 
+00038580: 276d 6172 6769 6e27 2920 6f72 2028 6d61  'margin') or (ma
+00038590: 7267 696e 4d6f 6465 2069 7320 6e6f 7420  rginMode is not 
+000385a0: 4e6f 6e65 293a 0a20 2020 2020 2020 2020  None):.         
+000385b0: 2020 206d 6574 686f 6420 3d20 2773 6170     method = 'sap
+000385c0: 6944 656c 6574 654d 6172 6769 6e4f 7065  iDeleteMarginOpe
+000385d0: 6e4f 7264 6572 7327 0a20 2020 2020 2020  nOrders'.       
+000385e0: 2020 2020 2069 6620 6d61 7267 696e 4d6f       if marginMo
+000385f0: 6465 203d 3d20 2769 736f 6c61 7465 6427  de == 'isolated'
+00038600: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00038610: 2020 7265 7175 6573 745b 2769 7349 736f    request['isIso
+00038620: 6c61 7465 6427 5d20 3d20 5472 7565 0a20  lated'] = True. 
+00038630: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00038640: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
+00038650: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+00038660: 656e 6428 7265 7175 6573 742c 2071 7565  end(request, que
+00038670: 7279 2929 0a20 2020 2020 2020 2069 6620  ry)).        if 
+00038680: 6973 696e 7374 616e 6365 2872 6573 706f  isinstance(respo
+00038690: 6e73 652c 206c 6973 7429 3a0a 2020 2020  nse, list):.    
+000386a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000386b0: 656c 662e 7061 7273 655f 6f72 6465 7273  elf.parse_orders
+000386c0: 2872 6573 706f 6e73 652c 206d 6172 6b65  (response, marke
+000386d0: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
+000386e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000386f0: 7572 6e20 7265 7370 6f6e 7365 0a0a 2020  urn response..  
+00038700: 2020 6465 6620 6665 7463 685f 6f72 6465    def fetch_orde
+00038710: 725f 7472 6164 6573 2873 656c 662c 2069  r_trades(self, i
+00038720: 643a 2073 7472 2c20 7379 6d62 6f6c 3a20  d: str, symbol: 
+00038730: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
+00038740: 4e6f 6e65 2c20 7369 6e63 653a 204f 7074  None, since: Opt
+00038750: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
+00038760: 652c 206c 696d 6974 3a20 4f70 7469 6f6e  e, limit: Option
+00038770: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+00038780: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00038790: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000387a0: 6665 7463 6820 616c 6c20 7468 6520 7472  fetch all the tr
+000387b0: 6164 6573 206d 6164 6520 6672 6f6d 2061  ades made from a
+000387c0: 2073 696e 676c 6520 6f72 6465 720a 2020   single order.  
+000387d0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000387e0: 2069 643a 206f 7264 6572 2069 640a 2020   id: order id.  
+000387f0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00038800: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+00038810: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
+00038820: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
+00038830: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
+00038840: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
+00038850: 696e 206d 7320 746f 2066 6574 6368 2074  in ms to fetch t
+00038860: 7261 6465 7320 666f 720a 2020 2020 2020  rades for.      
+00038870: 2020 3a70 6172 616d 2069 6e74 7c4e 6f6e    :param int|Non
+00038880: 6520 6c69 6d69 743a 2074 6865 206d 6178  e limit: the max
+00038890: 696d 756d 206e 756d 6265 7220 6f66 2074  imum number of t
+000388a0: 7261 6465 7320 746f 2072 6574 7269 6576  rades to retriev
+000388b0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+000388c0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+000388d0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+000388e0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+000388f0: 696e 616e 6365 2061 7069 2065 6e64 706f  inance api endpo
+00038900: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+00038910: 7572 6e73 205b 6469 6374 5d3a 2061 206c  urns [dict]: a l
+00038920: 6973 7420 6f66 2060 7472 6164 6520 7374  ist of `trade st
+00038930: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
+00038940: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+00038950: 232f 3f69 643d 7472 6164 652d 7374 7275  #/?id=trade-stru
+00038960: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
+00038970: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
+00038980: 796d 626f 6c20 6973 204e 6f6e 653a 0a20  ymbol is None:. 
+00038990: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000389a0: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
+000389b0: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
+000389c0: 6574 6368 4f72 6465 7254 7261 6465 7328  etchOrderTrades(
+000389d0: 2920 7265 7175 6972 6573 2061 2073 796d  ) requires a sym
+000389e0: 626f 6c20 6172 6775 6d65 6e74 2729 0a20  bol argument'). 
+000389f0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+00038a00: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00038a10: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00038a20: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00038a30: 2020 2020 2020 2020 7479 7065 203d 2073          type = s
+00038a40: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00038a50: 7061 7261 6d73 2c20 2774 7970 6527 2c20  params, 'type', 
+00038a60: 6d61 726b 6574 5b27 7479 7065 275d 290a  market['type']).
+00038a70: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+00038a80: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+00038a90: 732c 2027 7479 7065 2729 0a20 2020 2020  s, 'type').     
+00038aa0: 2020 2069 6620 7479 7065 2021 3d20 2773     if type != 's
+00038ab0: 706f 7427 3a0a 2020 2020 2020 2020 2020  pot':.          
+00038ac0: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+00038ad0: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+00038ae0: 2066 6574 6368 4f72 6465 7254 7261 6465   fetchOrderTrade
+00038af0: 7328 2920 7375 7070 6f72 7473 2073 706f  s() supports spo
+00038b00: 7420 6d61 726b 6574 7320 6f6e 6c79 2729  t markets only')
+00038b10: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+00038b20: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00038b30: 2027 6f72 6465 7249 6427 3a20 6964 2c0a   'orderId': id,.
+00038b40: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00038b50: 2020 7265 7475 726e 2073 656c 662e 6665    return self.fe
+00038b60: 7463 685f 6d79 5f74 7261 6465 7328 7379  tch_my_trades(sy
+00038b70: 6d62 6f6c 2c20 7369 6e63 652c 206c 696d  mbol, since, lim
+00038b80: 6974 2c20 7365 6c66 2e65 7874 656e 6428  it, self.extend(
+00038b90: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+00038ba0: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
+00038bb0: 5f6d 795f 7472 6164 6573 2873 656c 662c  _my_trades(self,
+00038bc0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+00038bd0: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
+00038be0: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
+00038bf0: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
+00038c00: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
+00038c10: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+00038c20: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00038c30: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
+00038c40: 6c6c 2074 7261 6465 7320 6d61 6465 2062  ll trades made b
+00038c50: 7920 7468 6520 7573 6572 0a20 2020 2020  y the user.     
+00038c60: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
+00038c70: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
+00038c80: 726b 6574 2073 796d 626f 6c0a 2020 2020  rket symbol.    
+00038c90: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00038ca0: 6f6e 6520 7369 6e63 653a 2074 6865 2065  one since: the e
+00038cb0: 6172 6c69 6573 7420 7469 6d65 2069 6e20  arliest time in 
+00038cc0: 6d73 2074 6f20 6665 7463 6820 7472 6164  ms to fetch trad
+00038cd0: 6573 2066 6f72 0a20 2020 2020 2020 203a  es for.        :
+00038ce0: 7061 7261 6d20 696e 747c 4e6f 6e65 206c  param int|None l
+00038cf0: 696d 6974 3a20 7468 6520 6d61 7869 6d75  imit: the maximu
+00038d00: 6d20 6e75 6d62 6572 206f 6620 7472 6164  m number of trad
+00038d10: 6573 2073 7472 7563 7475 7265 7320 746f  es structures to
+00038d20: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
+00038d30: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+00038d40: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+00038d50: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+00038d60: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
+00038d70: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+00038d80: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
+00038d90: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
+00038da0: 7472 6164 6520 7374 7275 6374 7572 6573  trade structures
+00038db0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+00038dc0: 6378 742e 636f 6d2f 232f 3f69 643d 7472  cxt.com/#/?id=tr
+00038dd0: 6164 652d 7374 7275 6374 7572 653e 600a  ade-structure>`.
+00038de0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00038df0: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00038e00: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00038e10: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
+00038e20: 2020 2020 206d 6172 6b65 7420 3d20 4e6f       market = No
+00038e30: 6e65 0a20 2020 2020 2020 2074 7970 6520  ne.        type 
+00038e40: 3d20 4e6f 6e65 0a20 2020 2020 2020 206d  = None.        m
+00038e50: 6574 686f 6420 3d20 4e6f 6e65 0a20 2020  ethod = None.   
+00038e60: 2020 2020 206d 6172 6769 6e4d 6f64 6520       marginMode 
+00038e70: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
+00038e80: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
+00038e90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00038ea0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+00038eb0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+00038ec0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00038ed0: 7374 5b27 7379 6d62 6f6c 275d 203d 206d  st['symbol'] = m
+00038ee0: 6172 6b65 745b 2769 6427 5d0a 2020 2020  arket['id'].    
+00038ef0: 2020 2020 7479 7065 2c20 7061 7261 6d73      type, params
+00038f00: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+00038f10: 6172 6b65 745f 7479 7065 5f61 6e64 5f70  arket_type_and_p
+00038f20: 6172 616d 7328 2766 6574 6368 4d79 5472  arams('fetchMyTr
+00038f30: 6164 6573 272c 206d 6172 6b65 742c 2070  ades', market, p
+00038f40: 6172 616d 7329 0a20 2020 2020 2020 2069  arams).        i
+00038f50: 6620 7479 7065 203d 3d20 276f 7074 696f  f type == 'optio
+00038f60: 6e27 3a0a 2020 2020 2020 2020 2020 2020  n':.            
+00038f70: 6d65 7468 6f64 203d 2027 6561 7069 5072  method = 'eapiPr
+00038f80: 6976 6174 6547 6574 5573 6572 5472 6164  ivateGetUserTrad
+00038f90: 6573 270a 2020 2020 2020 2020 656c 7365  es'.        else
+00038fa0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+00038fb0: 6c66 2e63 6865 636b 5f72 6571 7569 7265  lf.check_require
+00038fc0: 645f 7379 6d62 6f6c 2827 6665 7463 684d  d_symbol('fetchM
+00038fd0: 7954 7261 6465 7327 2c20 7379 6d62 6f6c  yTrades', symbol
+00038fe0: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
+00038ff0: 7267 696e 4d6f 6465 2c20 7061 7261 6d73  rginMode, params
+00039000: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+00039010: 6172 6769 6e5f 6d6f 6465 5f61 6e64 5f70  argin_mode_and_p
+00039020: 6172 616d 7328 2766 6574 6368 4d79 5472  arams('fetchMyTr
+00039030: 6164 6573 272c 2070 6172 616d 7329 0a20  ades', params). 
+00039040: 2020 2020 2020 2020 2020 2069 6620 7479             if ty
+00039050: 7065 203d 3d20 2773 706f 7427 206f 7220  pe == 'spot' or 
+00039060: 7479 7065 203d 3d20 276d 6172 6769 6e27  type == 'margin'
+00039070: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00039080: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+00039090: 6174 6547 6574 4d79 5472 6164 6573 270a  ateGetMyTrades'.
+000390a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000390b0: 6966 2028 7479 7065 203d 3d20 276d 6172  if (type == 'mar
+000390c0: 6769 6e27 2920 6f72 2028 6d61 7267 696e  gin') or (margin
+000390d0: 4d6f 6465 2069 7320 6e6f 7420 4e6f 6e65  Mode is not None
+000390e0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000390f0: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00039100: 2773 6170 6947 6574 4d61 7267 696e 4d79  'sapiGetMarginMy
+00039110: 5472 6164 6573 270a 2020 2020 2020 2020  Trades'.        
+00039120: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00039130: 6172 6769 6e4d 6f64 6520 3d3d 2027 6973  arginMode == 'is
+00039140: 6f6c 6174 6564 273a 0a20 2020 2020 2020  olated':.       
+00039150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039160: 2072 6571 7565 7374 5b27 6973 4973 6f6c   request['isIsol
+00039170: 6174 6564 275d 203d 2054 7275 650a 2020  ated'] = True.  
+00039180: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
+00039190: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
+000391a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000391b0: 206d 6574 686f 6420 3d20 2766 6170 6950   method = 'fapiP
+000391c0: 7269 7661 7465 4765 7455 7365 7254 7261  rivateGetUserTra
+000391d0: 6465 7327 0a20 2020 2020 2020 2020 2020  des'.           
+000391e0: 2065 6c69 6620 6d61 726b 6574 5b27 696e   elif market['in
+000391f0: 7665 7273 6527 5d3a 0a20 2020 2020 2020  verse']:.       
+00039200: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00039210: 3d20 2764 6170 6950 7269 7661 7465 4765  = 'dapiPrivateGe
+00039220: 7455 7365 7254 7261 6465 7327 0a20 2020  tUserTrades'.   
+00039230: 2020 2020 2065 6e64 5469 6d65 203d 2073       endTime = s
+00039240: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+00039250: 5f32 2870 6172 616d 732c 2027 756e 7469  _2(params, 'unti
+00039260: 6c27 2c20 2765 6e64 5469 6d65 2729 0a20  l', 'endTime'). 
+00039270: 2020 2020 2020 2069 6620 7369 6e63 6520         if since 
+00039280: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00039290: 2020 2020 2020 2020 2073 7461 7274 5469           startTi
+000392a0: 6d65 203d 2073 696e 6365 0a20 2020 2020  me = since.     
+000392b0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+000392c0: 7374 6172 7454 696d 6527 5d20 3d20 7374  startTime'] = st
+000392d0: 6172 7454 696d 650a 2020 2020 2020 2020  artTime.        
+000392e0: 2020 2020 2320 6874 7470 733a 2f2f 6269      # https://bi
+000392f0: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
+00039300: 622e 696f 2f61 7069 646f 6373 2f66 7574  b.io/apidocs/fut
+00039310: 7572 6573 2f65 6e2f 2361 6363 6f75 6e74  ures/en/#account
+00039320: 2d74 7261 6465 2d6c 6973 742d 7573 6572  -trade-list-user
+00039330: 5f64 6174 610a 2020 2020 2020 2020 2020  _data.          
+00039340: 2020 2320 4966 2073 7461 7274 5469 6d65    # If startTime
+00039350: 2061 6e64 2065 6e64 5469 6d65 2061 7265   and endTime are
+00039360: 2062 6f74 6820 6e6f 7420 7365 6e74 2c20   both not sent, 
+00039370: 7468 656e 2074 6865 206c 6173 7420 3720  then the last 7 
+00039380: 6461 7973 2720 6461 7461 2077 696c 6c20  days' data will 
+00039390: 6265 2072 6574 7572 6e65 642e 0a20 2020  be returned..   
+000393a0: 2020 2020 2020 2020 2023 2054 6865 2074           # The t
+000393b0: 696d 6520 6265 7477 6565 6e20 7374 6172  ime between star
+000393c0: 7454 696d 6520 616e 6420 656e 6454 696d  tTime and endTim
+000393d0: 6520 6361 6e6e 6f74 2062 6520 6c6f 6e67  e cannot be long
+000393e0: 6572 2074 6861 6e20 3720 6461 7973 2e0a  er than 7 days..
+000393f0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+00039400: 6520 7061 7261 6d65 7465 7220 6672 6f6d  e parameter from
+00039410: 4964 2063 616e 6e6f 7420 6265 2073 656e  Id cannot be sen
+00039420: 7420 7769 7468 2073 7461 7274 5469 6d65  t with startTime
+00039430: 206f 7220 656e 6454 696d 652e 0a20 2020   or endTime..   
+00039440: 2020 2020 2020 2020 2063 7572 7265 6e74           current
+00039450: 5469 6d65 7374 616d 7020 3d20 7365 6c66  Timestamp = self
+00039460: 2e6d 696c 6c69 7365 636f 6e64 7328 290a  .milliseconds().
+00039470: 2020 2020 2020 2020 2020 2020 6f6e 6557              oneW
+00039480: 6565 6b20 3d20 3720 2a20 3234 202a 2036  eek = 7 * 24 * 6
+00039490: 3020 2a20 3630 202a 2031 3030 300a 2020  0 * 60 * 1000.  
+000394a0: 2020 2020 2020 2020 2020 6966 2028 6375            if (cu
+000394b0: 7272 656e 7454 696d 6573 7461 6d70 202d  rrentTimestamp -
+000394c0: 2073 7461 7274 5469 6d65 2920 3e3d 206f   startTime) >= o
+000394d0: 6e65 5765 656b 3a0a 2020 2020 2020 2020  neWeek:.        
+000394e0: 2020 2020 2020 2020 6966 2028 656e 6454          if (endT
+000394f0: 696d 6520 6973 204e 6f6e 6529 2061 6e64  ime is None) and
+00039500: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
+00039510: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00039520: 2020 2020 2020 2065 6e64 5469 6d65 203d         endTime =
+00039530: 2073 656c 662e 7375 6d28 7374 6172 7454   self.sum(startT
+00039540: 696d 652c 206f 6e65 5765 656b 290a 2020  ime, oneWeek).  
+00039550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039560: 2020 656e 6454 696d 6520 3d20 6d69 6e28    endTime = min(
+00039570: 656e 6454 696d 652c 2063 7572 7265 6e74  endTime, current
+00039580: 5469 6d65 7374 616d 7029 0a20 2020 2020  Timestamp).     
+00039590: 2020 2069 6620 656e 6454 696d 6520 6973     if endTime is
+000395a0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000395b0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+000395c0: 656e 6454 696d 6527 5d20 3d20 656e 6454  endTime'] = endT
+000395d0: 696d 650a 2020 2020 2020 2020 2020 2020  ime.            
+000395e0: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+000395f0: 6974 2870 6172 616d 732c 205b 2765 6e64  it(params, ['end
+00039600: 5469 6d65 272c 2027 756e 7469 6c27 5d29  Time', 'until'])
+00039610: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
+00039620: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+00039630: 2020 2020 2020 2020 2020 2069 6620 2874             if (t
+00039640: 7970 6520 3d3d 2027 6f70 7469 6f6e 2729  ype == 'option')
+00039650: 206f 7220 6d61 726b 6574 5b27 636f 6e74   or market['cont
+00039660: 7261 6374 275d 3a0a 2020 2020 2020 2020  ract']:.        
+00039670: 2020 2020 2020 2020 6c69 6d69 7420 3d20          limit = 
+00039680: 6d69 6e28 6c69 6d69 742c 2031 3030 3029  min(limit, 1000)
+00039690: 2020 2320 6162 6f76 6520 3130 3030 2c20    # above 1000, 
+000396a0: 7265 7475 726e 7320 6572 726f 720a 2020  returns error.  
+000396b0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+000396c0: 745b 276c 696d 6974 275d 203d 206c 696d  t['limit'] = lim
+000396d0: 6974 0a20 2020 2020 2020 2072 6573 706f  it.        respo
+000396e0: 6e73 6520 3d20 6765 7461 7474 7228 7365  nse = getattr(se
+000396f0: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
+00039700: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+00039710: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+00039720: 2020 230a 2020 2020 2020 2020 2320 7370    #.        # sp
+00039730: 6f74 2074 7261 6465 0a20 2020 2020 2020  ot trade.       
+00039740: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00039750: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+00039760: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00039770: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
+00039780: 6d62 6f6c 223a 2022 424e 4242 5443 222c  mbol": "BNBBTC",
+00039790: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000397a0: 2020 2020 2020 2022 6964 223a 2032 3834         "id": 284
+000397b0: 3537 2c0a 2020 2020 2020 2020 2320 2020  57,.        #   
+000397c0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+000397d0: 4964 223a 2031 3030 3233 342c 0a20 2020  Id": 100234,.   
+000397e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000397f0: 2020 2022 7072 6963 6522 3a20 2234 2e30     "price": "4.0
+00039800: 3030 3030 3130 3022 2c0a 2020 2020 2020  0000100",.      
+00039810: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039820: 2271 7479 223a 2022 3132 2e30 3030 3030  "qty": "12.00000
+00039830: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00039840: 2020 2020 2020 2020 2020 2020 2263 6f6d              "com
+00039850: 6d69 7373 696f 6e22 3a20 2231 302e 3130  mission": "10.10
+00039860: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00039870: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039880: 636f 6d6d 6973 7369 6f6e 4173 7365 7422  commissionAsset"
+00039890: 3a20 2242 4e42 222c 0a20 2020 2020 2020  : "BNB",.       
+000398a0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000398b0: 7469 6d65 223a 2031 3439 3938 3635 3534  time": 149986554
+000398c0: 3935 3930 2c0a 2020 2020 2020 2020 2320  9590,.        # 
+000398d0: 2020 2020 2020 2020 2020 2020 2269 7342              "isB
+000398e0: 7579 6572 223a 2054 7275 652c 0a20 2020  uyer": True,.   
+000398f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00039900: 2020 2022 6973 4d61 6b65 7222 3a20 4661     "isMaker": Fa
+00039910: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+00039920: 2020 2020 2020 2020 2020 2022 6973 4265             "isBe
+00039930: 7374 4d61 7463 6822 3a20 5472 7565 2c0a  stMatch": True,.
+00039940: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00039950: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00039960: 2020 5d0a 2020 2020 2020 2020 230a 2020    ].        #.  
+00039970: 2020 2020 2020 2320 6675 7475 7265 7320        # futures 
+00039980: 7472 6164 650a 2020 2020 2020 2020 230a  trade.        #.
+00039990: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
+000399a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000399b0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+000399c0: 2020 2020 2020 2020 2020 2261 6363 6f75            "accou
+000399d0: 6e74 4964 223a 2032 302c 0a20 2020 2020  ntId": 20,.     
+000399e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000399f0: 2022 6275 7965 7222 3a20 4661 6c73 652c   "buyer": False,
+00039a00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039a10: 2020 2020 2020 2022 636f 6d6d 6973 7369         "commissi
+00039a20: 6f6e 223a 2022 2d30 2e30 3738 3139 3031  on": "-0.0781901
+00039a30: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00039a40: 2020 2020 2020 2020 2020 2263 6f6d 6d69            "commi
+00039a50: 7373 696f 6e41 7373 6574 223a 2022 5553  ssionAsset": "US
+00039a60: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+00039a70: 2020 2020 2020 2020 2020 2022 636f 756e             "coun
+00039a80: 7465 7250 6172 7479 4964 223a 2036 3533  terPartyId": 653
+00039a90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00039aa0: 2020 2020 2020 2020 2269 6422 3a20 3639          "id": 69
+00039ab0: 3837 3539 2c0a 2020 2020 2020 2020 2320  8759,.        # 
+00039ac0: 2020 2020 2020 2020 2020 2020 226d 616b              "mak
+00039ad0: 6572 223a 2046 616c 7365 2c0a 2020 2020  er": False,.    
+00039ae0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00039af0: 2020 226f 7264 6572 4964 223a 2032 3538    "orderId": 258
+00039b00: 3531 3831 332c 0a20 2020 2020 2020 2023  51813,.        #
+00039b10: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
+00039b20: 6963 6522 3a20 2237 3831 392e 3031 222c  ice": "7819.01",
+00039b30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039b40: 2020 2020 2020 2022 7174 7922 3a20 2230         "qty": "0
+00039b50: 2e30 3032 222c 0a20 2020 2020 2020 2023  .002",.        #
+00039b60: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
+00039b70: 6f74 6551 7479 223a 2022 302e 3031 3536  oteQty": "0.0156
+00039b80: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
+00039b90: 2020 2020 2020 2020 2020 2272 6561 6c69            "reali
+00039ba0: 7a65 6450 6e6c 223a 2022 2d30 2e39 3135  zedPnl": "-0.915
+00039bb0: 3339 3939 3922 2c0a 2020 2020 2020 2020  39999",.        
+00039bc0: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
+00039bd0: 6964 6522 3a20 2253 454c 4c22 2c0a 2020  ide": "SELL",.  
+00039be0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00039bf0: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+00039c00: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
+00039c10: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039c20: 7469 6d65 223a 2031 3536 3935 3134 3937  time": 156951497
+00039c30: 3830 3230 0a20 2020 2020 2020 2023 2020  8020.        #  
+00039c40: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00039c50: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
+00039c60: 2023 0a20 2020 2020 2020 2023 206f 7074   #.        # opt
+00039c70: 696f 6e73 2865 6170 6929 0a20 2020 2020  ions(eapi).     
+00039c80: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00039c90: 2020 205b 0a20 2020 2020 2020 2023 2020     [.        #  
+00039ca0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00039cb0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039cc0: 6964 223a 2031 3132 3538 3939 3930 3638  id": 11258999068
+00039cd0: 3434 3232 3630 3132 2c0a 2020 2020 2020  44226012,.      
+00039ce0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039cf0: 2274 7261 6465 4964 223a 2037 332c 0a20  "tradeId": 73,. 
+00039d00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00039d10: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
+00039d20: 3436 3338 3736 3131 3030 3834 3330 3430  4638761100843040
+00039d30: 3736 382c 0a20 2020 2020 2020 2023 2020  768,.        #  
+00039d40: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+00039d50: 6f6c 223a 2022 4554 482d 3233 3032 3131  ol": "ETH-230211
+00039d60: 2d31 3530 302d 4322 2c0a 2020 2020 2020  -1500-C",.      
+00039d70: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039d80: 2270 7269 6365 223a 2022 3138 2e37 3030  "price": "18.700
+00039d90: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00039da0: 2320 2020 2020 2020 2020 2020 2020 2271  #             "q
+00039db0: 7561 6e74 6974 7922 3a20 222d 302e 3537  uantity": "-0.57
+00039dc0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00039dd0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00039de0: 6665 6522 3a20 2230 2e31 3733 3035 3839  fee": "0.1730589
+00039df0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00039e00: 2020 2020 2020 2020 2020 2272 6561 6c69            "reali
+00039e10: 7a65 6450 726f 6669 7422 3a20 222d 332e  zedProfit": "-3.
+00039e20: 3533 3430 3030 3030 222c 0a20 2020 2020  53400000",.     
+00039e30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00039e40: 2022 7369 6465 223a 2022 5345 4c4c 222c   "side": "SELL",
+00039e50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039e60: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
+00039e70: 4c49 4d49 5422 2c0a 2020 2020 2020 2020  LIMIT",.        
+00039e80: 2320 2020 2020 2020 2020 2020 2020 2276  #             "v
+00039e90: 6f6c 6174 696c 6974 7922 3a20 2230 2e33  olatility": "0.3
+00039ea0: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+00039eb0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039ec0: 226c 6971 7569 6469 7479 223a 2022 4d41  "liquidity": "MA
+00039ed0: 4b45 5222 2c0a 2020 2020 2020 2020 2320  KER",.        # 
+00039ee0: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
+00039ef0: 6522 3a20 3136 3736 3038 3532 3136 3834  e": 167608521684
+00039f00: 352c 0a20 2020 2020 2020 2023 2020 2020  5,.        #    
+00039f10: 2020 2020 2020 2020 2022 7072 6963 6553           "priceS
+00039f20: 6361 6c65 223a 2031 2c0a 2020 2020 2020  cale": 1,.      
+00039f30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039f40: 2271 7561 6e74 6974 7953 6361 6c65 223a  "quantityScale":
+00039f50: 2032 2c0a 2020 2020 2020 2020 2320 2020   2,.        #   
+00039f60: 2020 2020 2020 2020 2020 226f 7074 696f            "optio
+00039f70: 6e53 6964 6522 3a20 2243 414c 4c22 2c0a  nSide": "CALL",.
+00039f80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00039f90: 2020 2020 2020 2271 756f 7465 4173 7365        "quoteAsse
+00039fa0: 7422 3a20 2255 5344 5422 0a20 2020 2020  t": "USDT".     
+00039fb0: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
+00039fc0: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
+00039fd0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00039fe0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+00039ff0: 7365 5f74 7261 6465 7328 7265 7370 6f6e  se_trades(respon
+0003a000: 7365 2c20 6d61 726b 6574 2c20 7369 6e63  se, market, sinc
+0003a010: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
+0003a020: 6566 2066 6574 6368 5f6d 795f 6475 7374  ef fetch_my_dust
+0003a030: 5f74 7261 6465 7328 7365 6c66 2c20 7379  _trades(self, sy
+0003a040: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+0003a050: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
+0003a060: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
+0003a070: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+0003a080: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
+0003a090: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+0003a0a0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0003a0b0: 2020 2020 2020 6665 7463 6820 616c 6c20        fetch all 
+0003a0c0: 6475 7374 2074 7261 6465 7320 6d61 6465  dust trades made
+0003a0d0: 2062 7920 7468 6520 7573 6572 0a20 2020   by the user.   
+0003a0e0: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
+0003a0f0: 4e6f 6e65 2073 796d 626f 6c3a 206e 6f74  None symbol: not
+0003a100: 2075 7365 6420 6279 2062 696e 616e 6365   used by binance
+0003a110: 2066 6574 6368 4d79 4475 7374 5472 6164   fetchMyDustTrad
+0003a120: 6573 2829 0a20 2020 2020 2020 203a 7061  es().        :pa
+0003a130: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
+0003a140: 6365 3a20 7468 6520 6561 726c 6965 7374  ce: the earliest
+0003a150: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
+0003a160: 6574 6368 206d 7920 6475 7374 2074 7261  etch my dust tra
+0003a170: 6465 7320 666f 720a 2020 2020 2020 2020  des for.        
+0003a180: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+0003a190: 6c69 6d69 743a 2074 6865 206d 6178 696d  limit: the maxim
+0003a1a0: 756d 206e 756d 6265 7220 6f66 2064 7573  um number of dus
+0003a1b0: 7420 7472 6164 6573 2074 6f20 7265 7472  t trades to retr
+0003a1c0: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
+0003a1d0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+0003a1e0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+0003a1f0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+0003a200: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
+0003a210: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+0003a220: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
+0003a230: 6120 6c69 7374 206f 6620 6074 7261 6465  a list of `trade
+0003a240: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
+0003a250: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+0003a260: 6f6d 2f23 2f3f 6964 3d74 7261 6465 2d73  om/#/?id=trade-s
+0003a270: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+0003a280: 2020 2022 2222 0a20 2020 2020 2020 2023     """.        #
+0003a290: 0a20 2020 2020 2020 2023 2042 696e 616e  .        # Binan
+0003a2a0: 6365 2070 726f 7669 6465 7320 616e 206f  ce provides an o
+0003a2b0: 7070 6f72 7475 6e69 7479 2074 6f20 7472  pportunity to tr
+0003a2c0: 6164 6520 696e 7369 676e 6966 6963 616e  ade insignifican
+0003a2d0: 7428 692e 652e 206e 6f6e 2d74 7261 6461  t(i.e. non-trada
+0003a2e0: 626c 6520 616e 6420 6e6f 6e2d 7769 7468  ble and non-with
+0003a2f0: 6472 6177 6162 6c65 290a 2020 2020 2020  drawable).      
+0003a300: 2020 2320 746f 6b65 6e20 6c65 6674 6f76    # token leftov
+0003a310: 6572 7328 6f66 2061 6e79 2061 7373 6574  ers(of any asset
+0003a320: 2920 696e 746f 2060 424e 4260 2063 6f69  ) into `BNB` coi
+0003a330: 6e20 7768 6963 6820 696e 2074 7572 6e20  n which in turn 
+0003a340: 6361 6e20 6265 2075 7365 6420 746f 2070  can be used to p
+0003a350: 6179 2074 7261 6469 6e67 2066 6565 7320  ay trading fees 
+0003a360: 7769 7468 2069 742e 0a20 2020 2020 2020  with it..       
+0003a370: 2023 2054 6865 2063 6f72 7265 7370 6f6e   # The correspon
+0003a380: 6469 6e67 2074 7261 6465 7320 6869 7374  ding trades hist
+0003a390: 6f72 7920 6973 2063 616c 6c65 6420 7468  ory is called th
+0003a3a0: 6520 6044 7573 7420 4c6f 6760 2061 6e64  e `Dust Log` and
+0003a3b0: 2063 616e 2062 6520 7265 7175 6573 7465   can be requeste
+0003a3c0: 6420 7669 6120 7468 6520 666f 6c6c 6f77  d via the follow
+0003a3d0: 696e 6720 656e 642d 706f 696e 743a 0a20  ing end-point:. 
+0003a3e0: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
+0003a3f0: 2f67 6974 6875 622e 636f 6d2f 6269 6e61  /github.com/bina
+0003a400: 6e63 652d 6578 6368 616e 6765 2f62 696e  nce-exchange/bin
+0003a410: 616e 6365 2d6f 6666 6963 6961 6c2d 6170  ance-official-ap
+0003a420: 692d 646f 6373 2f62 6c6f 622f 6d61 7374  i-docs/blob/mast
+0003a430: 6572 2f77 6170 692d 6170 692e 6d64 2364  er/wapi-api.md#d
+0003a440: 7573 746c 6f67 2d75 7365 725f 6461 7461  ustlog-user_data
+0003a450: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0003a460: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+0003a470: 6b65 7473 2829 0a20 2020 2020 2020 2072  kets().        r
+0003a480: 6571 7565 7374 203d 207b 7d0a 2020 2020  equest = {}.    
+0003a490: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
+0003a4a0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0003a4b0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
+0003a4c0: 7461 7274 5469 6d65 275d 203d 2073 696e  tartTime'] = sin
+0003a4d0: 6365 0a20 2020 2020 2020 2020 2020 2072  ce.            r
+0003a4e0: 6571 7565 7374 5b27 656e 6454 696d 6527  equest['endTime'
+0003a4f0: 5d20 3d20 7365 6c66 2e73 756d 2873 696e  ] = self.sum(sin
+0003a500: 6365 2c20 3737 3736 3030 3030 3030 290a  ce, 7776000000).
+0003a510: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+0003a520: 203d 2073 656c 662e 7361 7069 4765 7441   = self.sapiGetA
+0003a530: 7373 6574 4472 6962 626c 6574 2873 656c  ssetDribblet(sel
+0003a540: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0003a550: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0003a560: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0003a570: 2020 2023 2020 2020 2020 2022 746f 7461     #       "tota
+0003a580: 6c22 3a20 2234 222c 0a20 2020 2020 2020  l": "4",.       
+0003a590: 2023 2020 2020 2020 2022 7573 6572 4173   #       "userAs
+0003a5a0: 7365 7444 7269 6262 6c65 7473 223a 205b  setDribblets": [
+0003a5b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003a5c0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0003a5d0: 2020 2020 2020 2020 2022 6f70 6572 6174           "operat
+0003a5e0: 6554 696d 6522 3a20 2231 3632 3735 3735  eTime": "1627575
+0003a5f0: 3733 3130 3030 222c 0a20 2020 2020 2020  731000",.       
+0003a600: 2023 2020 2020 2020 2020 2020 2022 746f   #           "to
+0003a610: 7461 6c53 6572 7669 6365 4368 6172 6765  talServiceCharge
+0003a620: 416d 6f75 6e74 223a 2022 302e 3030 3030  Amount": "0.0000
+0003a630: 3134 3533 222c 0a20 2020 2020 2020 2023  1453",.        #
+0003a640: 2020 2020 2020 2020 2020 2022 746f 7461             "tota
+0003a650: 6c54 7261 6e73 6665 7265 6441 6d6f 756e  lTransferedAmoun
+0003a660: 7422 3a20 2230 2e30 3030 3732 3639 3322  t": "0.00072693"
+0003a670: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003a680: 2020 2020 2020 2274 7261 6e73 4964 223a        "transId":
+0003a690: 2022 3730 3839 3938 3135 3836 3322 2c0a   "70899815863",.
+0003a6a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003a6b0: 2020 2020 2275 7365 7241 7373 6574 4472      "userAssetDr
+0003a6c0: 6962 626c 6574 4465 7461 696c 7322 3a20  ibbletDetails": 
+0003a6d0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
+0003a6e0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0003a6f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003a700: 2020 2266 726f 6d41 7373 6574 223a 2022    "fromAsset": "
+0003a710: 4c54 4322 2c0a 2020 2020 2020 2020 2320  LTC",.        # 
+0003a720: 2020 2020 2020 2020 2020 2020 2020 2261                "a
+0003a730: 6d6f 756e 7422 3a20 2230 2e30 3030 3030  mount": "0.00000
+0003a740: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
+0003a750: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
+0003a760: 6e73 6665 7265 6441 6d6f 756e 7422 3a20  nsferedAmount": 
+0003a770: 2230 2e30 3030 3030 3236 3722 2c0a 2020  "0.00000267",.  
+0003a780: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003a790: 2020 2020 2020 2273 6572 7669 6365 4368        "serviceCh
+0003a7a0: 6172 6765 416d 6f75 6e74 223a 2022 302e  argeAmount": "0.
+0003a7b0: 3030 3030 3030 3035 222c 0a20 2020 2020  00000005",.     
+0003a7c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003a7d0: 2020 2022 6f70 6572 6174 6554 696d 6522     "operateTime"
+0003a7e0: 3a20 2231 3632 3735 3735 3733 3130 3030  : "1627575731000
+0003a7f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003a800: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
+0003a810: 7349 6422 3a20 2237 3038 3939 3831 3538  sId": "708998158
+0003a820: 3633 220a 2020 2020 2020 2020 2320 2020  63".        #   
+0003a830: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+0003a840: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003a850: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0003a860: 2020 2020 2020 2020 2020 2020 2022 6672               "fr
+0003a870: 6f6d 4173 7365 7422 3a20 2247 4250 222c  omAsset": "GBP",
+0003a880: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003a890: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
+0003a8a0: 223a 2022 302e 3135 3934 3931 3537 222c  ": "0.15949157",
+0003a8b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003a8c0: 2020 2020 2020 2020 2022 7472 616e 7366           "transf
+0003a8d0: 6572 6564 416d 6f75 6e74 223a 2022 302e  eredAmount": "0.
+0003a8e0: 3030 3037 3234 3236 222c 0a20 2020 2020  00072426",.     
+0003a8f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003a900: 2020 2022 7365 7276 6963 6543 6861 7267     "serviceCharg
+0003a910: 6541 6d6f 756e 7422 3a20 2230 2e30 3030  eAmount": "0.000
+0003a920: 3031 3434 3822 2c0a 2020 2020 2020 2020  01448",.        
+0003a930: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003a940: 226f 7065 7261 7465 5469 6d65 223a 2022  "operateTime": "
+0003a950: 3136 3237 3537 3537 3331 3030 3022 2c0a  1627575731000",.
+0003a960: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003a970: 2020 2020 2020 2020 2274 7261 6e73 4964          "transId
+0003a980: 223a 2022 3730 3839 3938 3135 3836 3322  ": "70899815863"
+0003a990: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003a9a0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0003a9b0: 2023 2020 2020 2020 2020 2020 205d 0a20   #           ]. 
+0003a9c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003a9d0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
+0003a9e0: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
+0003a9f0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+0003aa00: 7375 6c74 7320 3d20 7365 6c66 2e73 6166  sults = self.saf
+0003aa10: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+0003aa20: 2c20 2775 7365 7241 7373 6574 4472 6962  , 'userAssetDrib
+0003aa30: 626c 6574 7327 2c20 5b5d 290a 2020 2020  blets', []).    
+0003aa40: 2020 2020 726f 7773 203d 2073 656c 662e      rows = self.
+0003aa50: 7361 6665 5f69 6e74 6567 6572 2872 6573  safe_integer(res
+0003aa60: 706f 6e73 652c 2027 746f 7461 6c27 2c20  ponse, 'total', 
+0003aa70: 3029 0a20 2020 2020 2020 2064 6174 6120  0).        data 
+0003aa80: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
+0003aa90: 2069 2069 6e20 7261 6e67 6528 302c 2072   i in range(0, r
+0003aaa0: 6f77 7329 3a0a 2020 2020 2020 2020 2020  ows):.          
+0003aab0: 2020 6c6f 6773 203d 2073 656c 662e 7361    logs = self.sa
+0003aac0: 6665 5f76 616c 7565 2872 6573 756c 7473  fe_value(results
+0003aad0: 5b69 5d2c 2027 7573 6572 4173 7365 7444  [i], 'userAssetD
+0003aae0: 7269 6262 6c65 7444 6574 6169 6c73 272c  ribbletDetails',
+0003aaf0: 205b 5d29 0a20 2020 2020 2020 2020 2020   []).           
+0003ab00: 2066 6f72 206a 2069 6e20 7261 6e67 6528   for j in range(
+0003ab10: 302c 206c 656e 286c 6f67 7329 293a 0a20  0, len(logs)):. 
+0003ab20: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0003ab30: 6f67 735b 6a5d 5b27 6973 4475 7374 5472  ogs[j]['isDustTr
+0003ab40: 6164 6527 5d20 3d20 5472 7565 0a20 2020  ade'] = True.   
+0003ab50: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+0003ab60: 612e 6170 7065 6e64 286c 6f67 735b 6a5d  a.append(logs[j]
+0003ab70: 290a 2020 2020 2020 2020 7472 6164 6573  ).        trades
+0003ab80: 203d 2073 656c 662e 7061 7273 655f 7472   = self.parse_tr
+0003ab90: 6164 6573 2864 6174 612c 204e 6f6e 652c  ades(data, None,
+0003aba0: 2073 696e 6365 2c20 6c69 6d69 7429 0a20   since, limit). 
+0003abb0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0003abc0: 6c66 2e66 696c 7465 725f 6279 5f73 696e  lf.filter_by_sin
+0003abd0: 6365 5f6c 696d 6974 2874 7261 6465 732c  ce_limit(trades,
+0003abe0: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
+0003abf0: 2020 2020 6465 6620 7061 7273 655f 6475      def parse_du
+0003ac00: 7374 5f74 7261 6465 2873 656c 662c 2074  st_trade(self, t
+0003ac10: 7261 6465 2c20 6d61 726b 6574 3d4e 6f6e  rade, market=Non
+0003ac20: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+0003ac30: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0003ac40: 2020 2020 2020 2320 2020 2020 2020 2266        #       "f
+0003ac50: 726f 6d41 7373 6574 223a 2022 5553 4454  romAsset": "USDT
+0003ac60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003ac70: 2020 2022 616d 6f75 6e74 223a 2022 302e     "amount": "0.
+0003ac80: 3030 3936 3639 222c 0a20 2020 2020 2020  009669",.       
+0003ac90: 2023 2020 2020 2020 2022 7472 616e 7366   #       "transf
+0003aca0: 6572 6564 416d 6f75 6e74 223a 2022 302e  eredAmount": "0.
+0003acb0: 3030 3030 3239 3932 222c 0a20 2020 2020  00002992",.     
+0003acc0: 2020 2023 2020 2020 2020 2022 7365 7276     #       "serv
+0003acd0: 6963 6543 6861 7267 6541 6d6f 756e 7422  iceChargeAmount"
+0003ace0: 3a20 2230 2e30 3030 3030 3035 3922 2c0a  : "0.00000059",.
+0003acf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003ad00: 226f 7065 7261 7465 5469 6d65 223a 2022  "operateTime": "
+0003ad10: 3136 3238 3037 3630 3130 3030 3022 2c0a  1628076010000",.
+0003ad20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003ad30: 2274 7261 6e73 4964 223a 2022 3731 3431  "transId": "7141
+0003ad40: 3635 3738 3731 3222 2c0a 2020 2020 2020  6578712",.      
+0003ad50: 2020 2320 2020 2020 2020 2269 7344 7573    #       "isDus
+0003ad60: 7454 7261 6465 223a 2054 7275 650a 2020  tTrade": True.  
+0003ad70: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0003ad80: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0003ad90: 6f72 6465 7249 6420 3d20 7365 6c66 2e73  orderId = self.s
+0003ada0: 6166 655f 7374 7269 6e67 2874 7261 6465  afe_string(trade
+0003adb0: 2c20 2774 7261 6e73 4964 2729 0a20 2020  , 'transId').   
+0003adc0: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+0003add0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+0003ade0: 6572 2874 7261 6465 2c20 276f 7065 7261  er(trade, 'opera
+0003adf0: 7465 5469 6d65 2729 0a20 2020 2020 2020  teTime').       
+0003ae00: 2063 7572 7265 6e63 7949 6420 3d20 7365   currencyId = se
+0003ae10: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
+0003ae20: 7261 6465 2c20 2766 726f 6d41 7373 6574  rade, 'fromAsset
+0003ae30: 2729 0a20 2020 2020 2020 2074 7261 6465  ').        trade
+0003ae40: 6443 7572 7265 6e63 7920 3d20 7365 6c66  dCurrency = self
+0003ae50: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
+0003ae60: 6f64 6528 6375 7272 656e 6379 4964 290a  ode(currencyId).
+0003ae70: 2020 2020 2020 2020 626e 6220 3d20 7365          bnb = se
+0003ae80: 6c66 2e63 7572 7265 6e63 7928 2742 4e42  lf.currency('BNB
+0003ae90: 2729 0a20 2020 2020 2020 2065 6172 6e65  ').        earne
+0003aea0: 6443 7572 7265 6e63 7920 3d20 626e 625b  dCurrency = bnb[
+0003aeb0: 2763 6f64 6527 5d0a 2020 2020 2020 2020  'code'].        
+0003aec0: 6170 706c 6963 616e 7453 796d 626f 6c20  applicantSymbol 
+0003aed0: 3d20 6561 726e 6564 4375 7272 656e 6379  = earnedCurrency
+0003aee0: 202b 2027 2f27 202b 2074 7261 6465 6443   + '/' + tradedC
+0003aef0: 7572 7265 6e63 790a 2020 2020 2020 2020  urrency.        
+0003af00: 7472 6164 6564 4375 7272 656e 6379 4973  tradedCurrencyIs
+0003af10: 5175 6f74 6520 3d20 4661 6c73 650a 2020  Quote = False.  
+0003af20: 2020 2020 2020 6966 2061 7070 6c69 6361        if applica
+0003af30: 6e74 5379 6d62 6f6c 2069 6e20 7365 6c66  ntSymbol in self
+0003af40: 2e6d 6172 6b65 7473 3a0a 2020 2020 2020  .markets:.      
+0003af50: 2020 2020 2020 7472 6164 6564 4375 7272        tradedCurr
+0003af60: 656e 6379 4973 5175 6f74 6520 3d20 5472  encyIsQuote = Tr
+0003af70: 7565 0a20 2020 2020 2020 2066 6565 436f  ue.        feeCo
+0003af80: 7374 5374 7269 6e67 203d 2073 656c 662e  stString = self.
+0003af90: 7361 6665 5f73 7472 696e 6728 7472 6164  safe_string(trad
+0003afa0: 652c 2027 7365 7276 6963 6543 6861 7267  e, 'serviceCharg
+0003afb0: 6541 6d6f 756e 7427 290a 2020 2020 2020  eAmount').      
+0003afc0: 2020 6665 6520 3d20 7b0a 2020 2020 2020    fee = {.      
+0003afd0: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
+0003afe0: 3a20 6561 726e 6564 4375 7272 656e 6379  : earnedCurrency
+0003aff0: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
+0003b000: 6f73 7427 3a20 7365 6c66 2e70 6172 7365  ost': self.parse
+0003b010: 5f6e 756d 6265 7228 6665 6543 6f73 7453  _number(feeCostS
+0003b020: 7472 696e 6729 2c0a 2020 2020 2020 2020  tring),.        
+0003b030: 7d0a 2020 2020 2020 2020 7379 6d62 6f6c  }.        symbol
+0003b040: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0003b050: 616d 6f75 6e74 5374 7269 6e67 203d 204e  amountString = N
+0003b060: 6f6e 650a 2020 2020 2020 2020 636f 7374  one.        cost
+0003b070: 5374 7269 6e67 203d 204e 6f6e 650a 2020  String = None.  
+0003b080: 2020 2020 2020 7369 6465 203d 204e 6f6e        side = Non
+0003b090: 650a 2020 2020 2020 2020 6966 2074 7261  e.        if tra
+0003b0a0: 6465 6443 7572 7265 6e63 7949 7351 756f  dedCurrencyIsQuo
+0003b0b0: 7465 3a0a 2020 2020 2020 2020 2020 2020  te:.            
+0003b0c0: 7379 6d62 6f6c 203d 2061 7070 6c69 6361  symbol = applica
+0003b0d0: 6e74 5379 6d62 6f6c 0a20 2020 2020 2020  ntSymbol.       
+0003b0e0: 2020 2020 2061 6d6f 756e 7453 7472 696e       amountStrin
+0003b0f0: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
+0003b100: 7269 6e67 2874 7261 6465 2c20 2774 7261  ring(trade, 'tra
+0003b110: 6e73 6665 7265 6441 6d6f 756e 7427 290a  nsferedAmount').
+0003b120: 2020 2020 2020 2020 2020 2020 636f 7374              cost
+0003b130: 5374 7269 6e67 203d 2073 656c 662e 7361  String = self.sa
+0003b140: 6665 5f73 7472 696e 6728 7472 6164 652c  fe_string(trade,
+0003b150: 2027 616d 6f75 6e74 2729 0a20 2020 2020   'amount').     
+0003b160: 2020 2020 2020 2073 6964 6520 3d20 2762         side = 'b
+0003b170: 7579 270a 2020 2020 2020 2020 656c 7365  uy'.        else
+0003b180: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
+0003b190: 6d62 6f6c 203d 2074 7261 6465 6443 7572  mbol = tradedCur
+0003b1a0: 7265 6e63 7920 2b20 272f 2720 2b20 6561  rency + '/' + ea
+0003b1b0: 726e 6564 4375 7272 656e 6379 0a20 2020  rnedCurrency.   
+0003b1c0: 2020 2020 2020 2020 2061 6d6f 756e 7453           amountS
+0003b1d0: 7472 696e 6720 3d20 7365 6c66 2e73 6166  tring = self.saf
+0003b1e0: 655f 7374 7269 6e67 2874 7261 6465 2c20  e_string(trade, 
+0003b1f0: 2761 6d6f 756e 7427 290a 2020 2020 2020  'amount').      
+0003b200: 2020 2020 2020 636f 7374 5374 7269 6e67        costString
+0003b210: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0003b220: 696e 6728 7472 6164 652c 2027 7472 616e  ing(trade, 'tran
+0003b230: 7366 6572 6564 416d 6f75 6e74 2729 0a20  sferedAmount'). 
+0003b240: 2020 2020 2020 2020 2020 2073 6964 6520             side 
+0003b250: 3d20 2773 656c 6c27 0a20 2020 2020 2020  = 'sell'.       
+0003b260: 2070 7269 6365 5374 7269 6e67 203d 204e   priceString = N
+0003b270: 6f6e 650a 2020 2020 2020 2020 6966 2063  one.        if c
+0003b280: 6f73 7453 7472 696e 6720 6973 206e 6f74  ostString is not
+0003b290: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0003b2a0: 2020 2069 6620 616d 6f75 6e74 5374 7269     if amountStri
+0003b2b0: 6e67 3a0a 2020 2020 2020 2020 2020 2020  ng:.            
+0003b2c0: 2020 2020 7072 6963 6553 7472 696e 6720      priceString 
+0003b2d0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0003b2e0: 5f64 6976 2863 6f73 7453 7472 696e 672c  _div(costString,
+0003b2f0: 2061 6d6f 756e 7453 7472 696e 6729 0a20   amountString). 
+0003b300: 2020 2020 2020 2069 6420 3d20 4e6f 6e65         id = None
+0003b310: 0a20 2020 2020 2020 2061 6d6f 756e 7420  .        amount 
+0003b320: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0003b330: 6265 7228 616d 6f75 6e74 5374 7269 6e67  ber(amountString
+0003b340: 290a 2020 2020 2020 2020 7072 6963 6520  ).        price 
+0003b350: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0003b360: 6265 7228 7072 6963 6553 7472 696e 6729  ber(priceString)
+0003b370: 0a20 2020 2020 2020 2063 6f73 7420 3d20  .        cost = 
+0003b380: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
+0003b390: 7228 636f 7374 5374 7269 6e67 290a 2020  r(costString).  
+0003b3a0: 2020 2020 2020 7479 7065 203d 204e 6f6e        type = Non
+0003b3b0: 650a 2020 2020 2020 2020 7461 6b65 724f  e.        takerO
+0003b3c0: 724d 616b 6572 203d 204e 6f6e 650a 2020  rMaker = None.  
+0003b3d0: 2020 2020 2020 7265 7475 726e 207b 0a20        return {. 
+0003b3e0: 2020 2020 2020 2020 2020 2027 6964 273a             'id':
+0003b3f0: 2069 642c 0a20 2020 2020 2020 2020 2020   id,.           
+0003b400: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
+0003b410: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
+0003b420: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
+0003b430: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
+0003b440: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
+0003b450: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+0003b460: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
+0003b470: 2020 2020 276f 7264 6572 273a 206f 7264      'order': ord
+0003b480: 6572 4964 2c0a 2020 2020 2020 2020 2020  erId,.          
+0003b490: 2020 2774 7970 6527 3a20 7479 7065 2c0a    'type': type,.
+0003b4a0: 2020 2020 2020 2020 2020 2020 2774 616b              'tak
+0003b4b0: 6572 4f72 4d61 6b65 7227 3a20 7461 6b65  erOrMaker': take
+0003b4c0: 724f 724d 616b 6572 2c0a 2020 2020 2020  rOrMaker,.      
+0003b4d0: 2020 2020 2020 2773 6964 6527 3a20 7369        'side': si
+0003b4e0: 6465 2c0a 2020 2020 2020 2020 2020 2020  de,.            
+0003b4f0: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
+0003b500: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
+0003b510: 7269 6365 273a 2070 7269 6365 2c0a 2020  rice': price,.  
+0003b520: 2020 2020 2020 2020 2020 2763 6f73 7427            'cost'
+0003b530: 3a20 636f 7374 2c0a 2020 2020 2020 2020  : cost,.        
+0003b540: 2020 2020 2766 6565 273a 2066 6565 2c0a      'fee': fee,.
+0003b550: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
+0003b560: 6f27 3a20 7472 6164 652c 0a20 2020 2020  o': trade,.     
+0003b570: 2020 207d 0a0a 2020 2020 6465 6620 6665     }..    def fe
+0003b580: 7463 685f 6465 706f 7369 7473 2873 656c  tch_deposits(sel
+0003b590: 662c 2063 6f64 653a 204f 7074 696f 6e61  f, code: Optiona
+0003b5a0: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
+0003b5b0: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
+0003b5c0: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
+0003b5d0: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
+0003b5e0: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+0003b5f0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+0003b600: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
+0003b610: 6c6c 2064 6570 6f73 6974 7320 6d61 6465  ll deposits made
+0003b620: 2074 6f20 616e 2061 6363 6f75 6e74 0a20   to an account. 
+0003b630: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0003b640: 727c 4e6f 6e65 2063 6f64 653a 2075 6e69  r|None code: uni
+0003b650: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+0003b660: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+0003b670: 6d20 696e 747c 4e6f 6e65 2073 696e 6365  m int|None since
+0003b680: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
+0003b690: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
+0003b6a0: 6368 2064 6570 6f73 6974 7320 666f 720a  ch deposits for.
+0003b6b0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0003b6c0: 6e74 7c4e 6f6e 6520 6c69 6d69 743a 2074  nt|None limit: t
+0003b6d0: 6865 206d 6178 696d 756d 206e 756d 6265  he maximum numbe
+0003b6e0: 7220 6f66 2064 6570 6f73 6974 7320 7374  r of deposits st
+0003b6f0: 7275 6374 7572 6573 2074 6f20 7265 7472  ructures to retr
+0003b700: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
+0003b710: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+0003b720: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+0003b730: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+0003b740: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
+0003b750: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+0003b760: 7061 7261 6d20 626f 6f6c 2070 6172 616d  param bool param
+0003b770: 735b 2766 6961 7427 5d3a 2069 6620 5472  s['fiat']: if Tr
+0003b780: 7565 2c20 6f6e 6c79 2066 6961 7420 6465  ue, only fiat de
+0003b790: 706f 7369 7473 2077 696c 6c20 6265 2072  posits will be r
+0003b7a0: 6574 7572 6e65 640a 2020 2020 2020 2020  eturned.        
+0003b7b0: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+0003b7c0: 7061 7261 6d73 5b27 756e 7469 6c27 5d3a  params['until']:
+0003b7d0: 2074 6865 206c 6174 6573 7420 7469 6d65   the latest time
+0003b7e0: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+0003b7f0: 6465 706f 7369 7473 2066 6f72 0a20 2020  deposits for.   
+0003b800: 2020 2020 203a 7265 7475 726e 7320 5b64       :returns [d
+0003b810: 6963 745d 3a20 6120 6c69 7374 206f 6620  ict]: a list of 
+0003b820: 6074 7261 6e73 6163 7469 6f6e 2073 7472  `transaction str
+0003b830: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+0003b840: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+0003b850: 2f3f 6964 3d74 7261 6e73 6163 7469 6f6e  /?id=transaction
+0003b860: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+0003b870: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0003b880: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+0003b890: 7473 2829 0a20 2020 2020 2020 2063 7572  ts().        cur
+0003b8a0: 7265 6e63 7920 3d20 4e6f 6e65 0a20 2020  rency = None.   
+0003b8b0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0003b8c0: 4e6f 6e65 0a20 2020 2020 2020 2072 6571  None.        req
+0003b8d0: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
+0003b8e0: 2020 6c65 6761 6c4d 6f6e 6579 203d 2073    legalMoney = s
+0003b8f0: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
+0003b900: 656c 662e 6f70 7469 6f6e 732c 2027 6c65  elf.options, 'le
+0003b910: 6761 6c4d 6f6e 6579 272c 207b 7d29 0a20  galMoney', {}). 
+0003b920: 2020 2020 2020 2066 6961 744f 6e6c 7920         fiatOnly 
+0003b930: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0003b940: 6528 7061 7261 6d73 2c20 2766 6961 7427  e(params, 'fiat'
+0003b950: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
+0003b960: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+0003b970: 6d69 7428 7061 7261 6d73 2c20 2766 6961  mit(params, 'fia
+0003b980: 744f 6e6c 7927 290a 2020 2020 2020 2020  tOnly').        
+0003b990: 756e 7469 6c20 3d20 7365 6c66 2e73 6166  until = self.saf
+0003b9a0: 655f 696e 7465 6765 7228 7061 7261 6d73  e_integer(params
+0003b9b0: 2c20 2775 6e74 696c 2729 0a20 2020 2020  , 'until').     
+0003b9c0: 2020 2069 6620 6669 6174 4f6e 6c79 206f     if fiatOnly o
+0003b9d0: 7220 2863 6f64 6520 696e 206c 6567 616c  r (code in legal
+0003b9e0: 4d6f 6e65 7929 3a0a 2020 2020 2020 2020  Money):.        
+0003b9f0: 2020 2020 6966 2063 6f64 6520 6973 206e      if code is n
+0003ba00: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0003ba10: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+0003ba20: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+0003ba30: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+0003ba40: 2020 2020 7265 7175 6573 745b 2774 7261      request['tra
+0003ba50: 6e73 6163 7469 6f6e 5479 7065 275d 203d  nsactionType'] =
+0003ba60: 2030 0a20 2020 2020 2020 2020 2020 2069   0.            i
+0003ba70: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
+0003ba80: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0003ba90: 2020 2020 2072 6571 7565 7374 5b27 6265       request['be
+0003baa0: 6769 6e54 696d 6527 5d20 3d20 7369 6e63  ginTime'] = sinc
+0003bab0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+0003bac0: 2075 6e74 696c 2069 7320 6e6f 7420 4e6f   until is not No
+0003bad0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0003bae0: 2020 2020 7265 7175 6573 745b 2765 6e64      request['end
+0003baf0: 5469 6d65 275d 203d 2075 6e74 696c 0a20  Time'] = until. 
+0003bb00: 2020 2020 2020 2020 2020 2072 6177 203d             raw =
+0003bb10: 2073 656c 662e 7361 7069 4765 7446 6961   self.sapiGetFia
+0003bb20: 744f 7264 6572 7328 7365 6c66 2e65 7874  tOrders(self.ext
+0003bb30: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+0003bb40: 616d 7329 290a 2020 2020 2020 2020 2020  ams)).          
+0003bb50: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+0003bb60: 662e 7361 6665 5f76 616c 7565 2872 6177  f.safe_value(raw
+0003bb70: 2c20 2764 6174 6127 290a 2020 2020 2020  , 'data').      
+0003bb80: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0003bb90: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003bba0: 2020 2263 6f64 6522 3a20 2230 3030 3030    "code": "00000
+0003bbb0: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
+0003bbc0: 2320 2020 2020 2020 226d 6573 7361 6765  #       "message
+0003bbd0: 223a 2022 7375 6363 6573 7322 2c0a 2020  ": "success",.  
+0003bbe0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003bbf0: 2020 2264 6174 6122 3a20 5b0a 2020 2020    "data": [.    
+0003bc00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003bc10: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+0003bc20: 2320 2020 2020 2020 2020 2020 226f 7264  #           "ord
+0003bc30: 6572 4e6f 223a 2022 3235 6365 6433 3730  erNo": "25ced370
+0003bc40: 3735 6331 3437 3062 6138 3933 3964 3064  75c1470ba8939d0d
+0003bc50: 6632 3331 3665 3233 222c 0a20 2020 2020  f2316e23",.     
+0003bc60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003bc70: 2020 2022 6669 6174 4375 7272 656e 6379     "fiatCurrency
+0003bc80: 223a 2022 4555 5222 2c0a 2020 2020 2020  ": "EUR",.      
+0003bc90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003bca0: 2020 2269 6e64 6963 6174 6564 416d 6f75    "indicatedAmou
+0003bcb0: 6e74 223a 2022 3135 2e30 3022 2c0a 2020  nt": "15.00",.  
+0003bcc0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003bcd0: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
+0003bce0: 2231 352e 3030 222c 0a20 2020 2020 2020  "15.00",.       
+0003bcf0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003bd00: 2022 746f 7461 6c46 6565 223a 2022 302e   "totalFee": "0.
+0003bd10: 3030 222c 0a20 2020 2020 2020 2020 2020  00",.           
+0003bd20: 2023 2020 2020 2020 2020 2020 2022 6d65   #           "me
+0003bd30: 7468 6f64 223a 2022 6361 7264 222c 0a20  thod": "card",. 
+0003bd40: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003bd50: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
+0003bd60: 2022 4661 696c 6564 222c 0a20 2020 2020   "Failed",.     
+0003bd70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003bd80: 2020 2022 6372 6561 7465 5469 6d65 223a     "createTime":
+0003bd90: 2031 3632 3735 3031 3032 3630 3030 2c0a   1627501026000,.
+0003bda0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003bdb0: 2020 2020 2020 2020 2275 7064 6174 6554          "updateT
+0003bdc0: 696d 6522 3a20 3136 3237 3530 3130 3237  ime": 1627501027
+0003bdd0: 3030 300a 2020 2020 2020 2020 2020 2020  000.            
+0003bde0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+0003bdf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003be00: 5d2c 0a20 2020 2020 2020 2020 2020 2023  ],.            #
+0003be10: 2020 2020 2020 2022 746f 7461 6c22 3a20         "total": 
+0003be20: 312c 0a20 2020 2020 2020 2020 2020 2023  1,.            #
+0003be30: 2020 2020 2020 2022 7375 6363 6573 7322         "success"
+0003be40: 3a20 5472 7565 0a20 2020 2020 2020 2020  : True.         
+0003be50: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+0003be60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003be70: 2020 2020 2069 6620 636f 6465 2069 7320       if code is 
+0003be80: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0003be90: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+0003bea0: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
+0003beb0: 6379 2863 6f64 6529 0a20 2020 2020 2020  cy(code).       
+0003bec0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003bed0: 5b27 636f 696e 275d 203d 2063 7572 7265  ['coin'] = curre
+0003bee0: 6e63 795b 2769 6427 5d0a 2020 2020 2020  ncy['id'].      
+0003bef0: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
+0003bf00: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0003bf10: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003bf20: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
+0003bf30: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
+0003bf40: 2020 2020 2020 2020 2023 206d 6178 2033           # max 3
+0003bf50: 206d 6f6e 7468 7320 7261 6e67 6520 6874   months range ht
+0003bf60: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+0003bf70: 2f63 6378 742f 6363 7874 2f69 7373 7565  /ccxt/ccxt/issue
+0003bf80: 732f 3634 3935 0a20 2020 2020 2020 2020  s/6495.         
+0003bf90: 2020 2020 2020 2065 6e64 5469 6d65 203d         endTime =
+0003bfa0: 2073 656c 662e 7375 6d28 7369 6e63 652c   self.sum(since,
+0003bfb0: 2037 3737 3630 3030 3030 3029 0a20 2020   7776000000).   
+0003bfc0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0003bfd0: 756e 7469 6c20 6973 206e 6f74 204e 6f6e  until is not Non
+0003bfe0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0003bff0: 2020 2020 2020 2065 6e64 5469 6d65 203d         endTime =
+0003c000: 206d 696e 2865 6e64 5469 6d65 2c20 756e   min(endTime, un
+0003c010: 7469 6c29 0a20 2020 2020 2020 2020 2020  til).           
+0003c020: 2020 2020 2072 6571 7565 7374 5b27 656e       request['en
+0003c030: 6454 696d 6527 5d20 3d20 656e 6454 696d  dTime'] = endTim
+0003c040: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+0003c050: 206c 696d 6974 2069 7320 6e6f 7420 4e6f   limit is not No
+0003c060: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0003c070: 2020 2020 7265 7175 6573 745b 276c 696d      request['lim
+0003c080: 6974 275d 203d 206c 696d 6974 0a20 2020  it'] = limit.   
+0003c090: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
+0003c0a0: 6520 3d20 7365 6c66 2e73 6170 6947 6574  e = self.sapiGet
+0003c0b0: 4361 7069 7461 6c44 6570 6f73 6974 4869  CapitalDepositHi
+0003c0c0: 7372 6563 2873 656c 662e 6578 7465 6e64  srec(self.extend
+0003c0d0: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+0003c0e0: 2929 0a20 2020 2020 2020 2020 2020 2023  )).            #
+0003c0f0: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+0003c100: 2020 2023 2020 2020 2020 207b 0a20 2020     #       {.   
+0003c110: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003c120: 2020 2022 616d 6f75 6e74 223a 2022 302e     "amount": "0.
+0003c130: 3031 3834 3434 3837 222c 0a20 2020 2020  01844487",.     
+0003c140: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c150: 2022 636f 696e 223a 2022 4243 4822 2c0a   "coin": "BCH",.
+0003c160: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003c170: 2020 2020 2020 226e 6574 776f 726b 223a        "network":
+0003c180: 2022 4243 4822 2c0a 2020 2020 2020 2020   "BCH",.        
+0003c190: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
+0003c1a0: 7461 7475 7322 3a20 312c 0a20 2020 2020  tatus": 1,.     
+0003c1b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c1c0: 2022 6164 6472 6573 7322 3a20 2231 4e59   "address": "1NY
+0003c1d0: 7841 4a68 5732 3238 3148 4b31 4b74 4a65  xAJhW2281HK1KtJe
+0003c1e0: 6145 4e42 7148 6579 6741 3838 467a 5222  aENBqHeygA88FzR"
+0003c1f0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003c200: 2020 2020 2020 2020 2261 6464 7265 7373          "address
+0003c210: 5461 6722 3a20 2222 2c0a 2020 2020 2020  Tag": "",.      
+0003c220: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c230: 2274 7849 6422 3a20 2262 6166 6335 3930  "txId": "bafc590
+0003c240: 3235 3034 6436 3530 3461 3030 6237 6430  2504d6504a00b7d0
+0003c250: 3330 3661 3431 3135 3463 6266 3164 3162  306a41154cbf1d1b
+0003c260: 3736 3761 6237 3066 3362 6332 3236 3332  767ab70f3bc22632
+0003c270: 3733 3632 3538 3861 6622 2c0a 2020 2020  7362588af",.    
+0003c280: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c290: 2020 2269 6e73 6572 7454 696d 6522 3a20    "insertTime": 
+0003c2a0: 3136 3130 3738 3439 3830 3030 302c 0a20  1610784980000,. 
+0003c2b0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003c2c0: 2020 2020 2022 7472 616e 7366 6572 5479       "transferTy
+0003c2d0: 7065 223a 2030 2c0a 2020 2020 2020 2020  pe": 0,.        
+0003c2e0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
+0003c2f0: 6f6e 6669 726d 5469 6d65 7322 3a20 2232  onfirmTimes": "2
+0003c300: 2f32 220a 2020 2020 2020 2020 2020 2020  /2".            
+0003c310: 2320 2020 2020 2020 7d2c 0a20 2020 2020  #       },.     
+0003c320: 2020 2020 2020 2023 2020 2020 2020 207b         #       {
+0003c330: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003c340: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
+0003c350: 2022 3435 3030 222c 0a20 2020 2020 2020   "4500",.       
+0003c360: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003c370: 636f 696e 223a 2022 5553 4454 222c 0a20  coin": "USDT",. 
+0003c380: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003c390: 2020 2020 2022 6e65 7477 6f72 6b22 3a20       "network": 
+0003c3a0: 2242 5343 222c 0a20 2020 2020 2020 2020  "BSC",.         
+0003c3b0: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
+0003c3c0: 6174 7573 223a 2031 2c0a 2020 2020 2020  atus": 1,.      
+0003c3d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c3e0: 2261 6464 7265 7373 223a 2022 3078 6339  "address": "0xc9
+0003c3f0: 6339 3233 6338 3733 3437 6361 3066 3334  c923c87347ca0f34
+0003c400: 3531 6436 6433 3038 6365 3834 6636 3931  51d6d308ce84f691
+0003c410: 6239 6635 3031 222c 0a20 2020 2020 2020  b9f501",.       
+0003c420: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003c430: 6164 6472 6573 7354 6167 223a 2022 222c  addressTag": "",
+0003c440: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003c450: 2020 2020 2020 2022 7478 4964 223a 2022         "txId": "
+0003c460: 496e 7465 726e 616c 2074 7261 6e73 6665  Internal transfe
+0003c470: 7220 3531 3337 3636 3237 3930 3122 2c0a  r 51376627901",.
+0003c480: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003c490: 2020 2020 2020 2269 6e73 6572 7454 696d        "insertTim
+0003c4a0: 6522 3a20 3136 3138 3339 3433 3831 3030  e": 161839438100
+0003c4b0: 302c 0a20 2020 2020 2020 2020 2020 2023  0,.            #
+0003c4c0: 2020 2020 2020 2020 2022 7472 616e 7366           "transf
+0003c4d0: 6572 5479 7065 223a 2031 2c0a 2020 2020  erType": 1,.    
+0003c4e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c4f0: 2020 2263 6f6e 6669 726d 5469 6d65 7322    "confirmTimes"
+0003c500: 3a20 2231 2f31 3522 0a20 2020 2020 2020  : "1/15".       
+0003c510: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0003c520: 2020 2020 2020 2020 2023 2020 205d 0a20           #   ]. 
+0003c530: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0003c540: 7261 6e67 6528 302c 206c 656e 2872 6573  range(0, len(res
+0003c550: 706f 6e73 6529 293a 0a20 2020 2020 2020  ponse)):.       
+0003c560: 2020 2020 2072 6573 706f 6e73 655b 695d       response[i]
+0003c570: 5b27 7479 7065 275d 203d 2027 6465 706f  ['type'] = 'depo
+0003c580: 7369 7427 0a20 2020 2020 2020 2072 6574  sit'.        ret
+0003c590: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+0003c5a0: 7261 6e73 6163 7469 6f6e 7328 7265 7370  ransactions(resp
+0003c5b0: 6f6e 7365 2c20 6375 7272 656e 6379 2c20  onse, currency, 
+0003c5c0: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+0003c5d0: 2020 2064 6566 2066 6574 6368 5f77 6974     def fetch_wit
+0003c5e0: 6864 7261 7761 6c73 2873 656c 662c 2063  hdrawals(self, c
+0003c5f0: 6f64 653a 204f 7074 696f 6e61 6c5b 7374  ode: Optional[st
+0003c600: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
+0003c610: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+0003c620: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
+0003c630: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+0003c640: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+0003c650: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0003c660: 2020 2020 2066 6574 6368 2061 6c6c 2077       fetch all w
+0003c670: 6974 6864 7261 7761 6c73 206d 6164 6520  ithdrawals made 
+0003c680: 6672 6f6d 2061 6e20 6163 636f 756e 740a  from an account.
+0003c690: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0003c6a0: 7472 7c4e 6f6e 6520 636f 6465 3a20 756e  tr|None code: un
+0003c6b0: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+0003c6c0: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+0003c6d0: 616d 2069 6e74 7c4e 6f6e 6520 7369 6e63  am int|None sinc
+0003c6e0: 653a 2074 6865 2065 6172 6c69 6573 7420  e: the earliest 
+0003c6f0: 7469 6d65 2069 6e20 6d73 2074 6f20 6665  time in ms to fe
+0003c700: 7463 6820 7769 7468 6472 6177 616c 7320  tch withdrawals 
+0003c710: 666f 720a 2020 2020 2020 2020 3a70 6172  for.        :par
+0003c720: 616d 2069 6e74 7c4e 6f6e 6520 6c69 6d69  am int|None limi
+0003c730: 743a 2074 6865 206d 6178 696d 756d 206e  t: the maximum n
+0003c740: 756d 6265 7220 6f66 2077 6974 6864 7261  umber of withdra
+0003c750: 7761 6c73 2073 7472 7563 7475 7265 7320  wals structures 
+0003c760: 746f 2072 6574 7269 6576 650a 2020 2020  to retrieve.    
+0003c770: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0003c780: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0003c790: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0003c7a0: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
+0003c7b0: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+0003c7c0: 2020 2020 2020 3a70 6172 616d 2062 6f6f        :param boo
+0003c7d0: 6c20 7061 7261 6d73 5b27 6669 6174 275d  l params['fiat']
+0003c7e0: 3a20 6966 2054 7275 652c 206f 6e6c 7920  : if True, only 
+0003c7f0: 6669 6174 2077 6974 6864 7261 7761 6c73  fiat withdrawals
+0003c800: 2077 696c 6c20 6265 2072 6574 7572 6e65   will be returne
+0003c810: 640a 2020 2020 2020 2020 3a72 6574 7572  d.        :retur
+0003c820: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
+0003c830: 7420 6f66 2060 7472 616e 7361 6374 696f  t of `transactio
+0003c840: 6e20 7374 7275 6374 7572 6573 203c 6874  n structures <ht
+0003c850: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+0003c860: 636f 6d2f 232f 3f69 643d 7472 616e 7361  com/#/?id=transa
+0003c870: 6374 696f 6e2d 7374 7275 6374 7572 653e  ction-structure>
+0003c880: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0003c890: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+0003c8a0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+0003c8b0: 2020 6c65 6761 6c4d 6f6e 6579 203d 2073    legalMoney = s
+0003c8c0: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
+0003c8d0: 656c 662e 6f70 7469 6f6e 732c 2027 6c65  elf.options, 'le
+0003c8e0: 6761 6c4d 6f6e 6579 272c 207b 7d29 0a20  galMoney', {}). 
+0003c8f0: 2020 2020 2020 2066 6961 744f 6e6c 7920         fiatOnly 
+0003c900: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0003c910: 6528 7061 7261 6d73 2c20 2766 6961 7427  e(params, 'fiat'
+0003c920: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
+0003c930: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+0003c940: 6d69 7428 7061 7261 6d73 2c20 2766 6961  mit(params, 'fia
+0003c950: 744f 6e6c 7927 290a 2020 2020 2020 2020  tOnly').        
+0003c960: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
+0003c970: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0003c980: 4e6f 6e65 0a20 2020 2020 2020 2063 7572  None.        cur
+0003c990: 7265 6e63 7920 3d20 4e6f 6e65 0a20 2020  rency = None.   
+0003c9a0: 2020 2020 2069 6620 6669 6174 4f6e 6c79       if fiatOnly
+0003c9b0: 206f 7220 2863 6f64 6520 696e 206c 6567   or (code in leg
+0003c9c0: 616c 4d6f 6e65 7929 3a0a 2020 2020 2020  alMoney):.      
+0003c9d0: 2020 2020 2020 6966 2063 6f64 6520 6973        if code is
+0003c9e0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0003c9f0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
+0003ca00: 6e63 7920 3d20 7365 6c66 2e63 7572 7265  ncy = self.curre
+0003ca10: 6e63 7928 636f 6465 290a 2020 2020 2020  ncy(code).      
+0003ca20: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
+0003ca30: 7261 6e73 6163 7469 6f6e 5479 7065 275d  ransactionType']
+0003ca40: 203d 2031 0a20 2020 2020 2020 2020 2020   = 1.           
+0003ca50: 2069 6620 7369 6e63 6520 6973 206e 6f74   if since is not
+0003ca60: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0003ca70: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0003ca80: 6265 6769 6e54 696d 6527 5d20 3d20 7369  beginTime'] = si
+0003ca90: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
+0003caa0: 7261 7720 3d20 7365 6c66 2e73 6170 6947  raw = self.sapiG
+0003cab0: 6574 4669 6174 4f72 6465 7273 2873 656c  etFiatOrders(sel
+0003cac0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0003cad0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0003cae0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0003caf0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0003cb00: 6528 7261 772c 2027 6461 7461 2729 0a20  e(raw, 'data'). 
+0003cb10: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003cb20: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+0003cb30: 2020 2020 2020 2022 636f 6465 223a 2022         "code": "
+0003cb40: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+0003cb50: 2020 2020 2023 2020 2020 2020 2022 6d65       #       "me
+0003cb60: 7373 6167 6522 3a20 2273 7563 6365 7373  ssage": "success
+0003cb70: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003cb80: 2020 2020 2020 2022 6461 7461 223a 205b         "data": [
+0003cb90: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003cba0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0003cbb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003cbc0: 2022 6f72 6465 724e 6f22 3a20 2243 4a57   "orderNo": "CJW
+0003cbd0: 3730 3634 3532 3236 3631 3135 3137 3033  7064522661151703
+0003cbe0: 3034 222c 0a20 2020 2020 2020 2020 2020  04",.           
+0003cbf0: 2023 2020 2020 2020 2020 2020 2022 6669   #           "fi
+0003cc00: 6174 4375 7272 656e 6379 223a 2022 4742  atCurrency": "GB
+0003cc10: 5022 2c0a 2020 2020 2020 2020 2020 2020  P",.            
+0003cc20: 2320 2020 2020 2020 2020 2020 2269 6e64  #           "ind
+0003cc30: 6963 6174 6564 416d 6f75 6e74 223a 2022  icatedAmount": "
+0003cc40: 3130 3030 312e 3530 222c 0a20 2020 2020  10001.50",.     
+0003cc50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003cc60: 2020 2022 616d 6f75 6e74 223a 2022 3130     "amount": "10
+0003cc70: 302e 3030 222c 0a20 2020 2020 2020 2020  0.00",.         
+0003cc80: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
+0003cc90: 746f 7461 6c46 6565 223a 2022 312e 3530  totalFee": "1.50
+0003cca0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003ccb0: 2020 2020 2020 2020 2020 2022 6d65 7468             "meth
+0003ccc0: 6f64 223a 2022 6261 6e6b 2074 7261 6e73  od": "bank trans
+0003ccd0: 6665 7222 2c0a 2020 2020 2020 2020 2020  fer",.          
+0003cce0: 2020 2320 2020 2020 2020 2020 2020 2273    #           "s
+0003ccf0: 7461 7475 7322 3a20 2253 7563 6365 7373  tatus": "Success
+0003cd00: 6675 6c22 2c0a 2020 2020 2020 2020 2020  ful",.          
+0003cd10: 2020 2320 2020 2020 2020 2020 2020 2263    #           "c
+0003cd20: 7265 6174 6554 696d 6522 3a20 3136 3230  reateTime": 1620
+0003cd30: 3033 3737 3435 3030 302c 0a20 2020 2020  037745000,.     
+0003cd40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003cd50: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
+0003cd60: 2031 3632 3030 3338 3438 3030 3030 0a20   1620038480000. 
+0003cd70: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0003cd80: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+0003cd90: 2020 2020 2320 2020 2020 2020 2020 7b0a      #         {.
+0003cda0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003cdb0: 2020 2020 2020 2020 226f 7264 6572 4e6f          "orderNo
+0003cdc0: 223a 2022 434a 5737 3036 3238 3734 3932  ": "CJW706287492
+0003cdd0: 3738 3138 3931 3538 3422 2c0a 2020 2020  781891584",.    
+0003cde0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003cdf0: 2020 2020 2266 6961 7443 7572 7265 6e63      "fiatCurrenc
+0003ce00: 7922 3a20 2247 4250 222c 0a20 2020 2020  y": "GBP",.     
+0003ce10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003ce20: 2020 2022 696e 6469 6361 7465 6441 6d6f     "indicatedAmo
+0003ce30: 756e 7422 3a20 2231 3030 3031 2e35 3022  unt": "10001.50"
+0003ce40: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003ce50: 2020 2020 2020 2020 2020 2261 6d6f 756e            "amoun
+0003ce60: 7422 3a20 2231 3030 2e30 3022 2c0a 2020  t": "100.00",.  
+0003ce70: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003ce80: 2020 2020 2020 2274 6f74 616c 4665 6522        "totalFee"
+0003ce90: 3a20 2231 2e35 3022 2c0a 2020 2020 2020  : "1.50",.      
+0003cea0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003ceb0: 2020 226d 6574 686f 6422 3a20 2262 616e    "method": "ban
+0003cec0: 6b20 7472 616e 7366 6572 222c 0a20 2020  k transfer",.   
+0003ced0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003cee0: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
+0003cef0: 5375 6363 6573 7366 756c 222c 0a20 2020  Successful",.   
+0003cf00: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003cf10: 2020 2020 2022 6372 6561 7465 5469 6d65       "createTime
+0003cf20: 223a 2031 3631 3939 3938 3436 3030 3030  ": 1619998460000
+0003cf30: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0003cf40: 2020 2020 2020 2020 2020 2275 7064 6174            "updat
+0003cf50: 6554 696d 6522 3a20 3136 3139 3939 3838  eTime": 16199988
+0003cf60: 3233 3030 300a 2020 2020 2020 2020 2020  23000.          
+0003cf70: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
+0003cf80: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003cf90: 2020 5d2c 0a20 2020 2020 2020 2020 2020    ],.           
+0003cfa0: 2023 2020 2020 2020 2022 746f 7461 6c22   #       "total"
+0003cfb0: 3a20 3339 2c0a 2020 2020 2020 2020 2020  : 39,.          
+0003cfc0: 2020 2320 2020 2020 2020 2273 7563 6365    #       "succe
+0003cfd0: 7373 223a 2054 7275 650a 2020 2020 2020  ss": True.      
+0003cfe0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0003cff0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003d000: 2020 2020 2020 2020 6966 2063 6f64 6520          if code 
+0003d010: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0003d020: 2020 2020 2020 2020 2020 2020 2063 7572               cur
+0003d030: 7265 6e63 7920 3d20 7365 6c66 2e63 7572  rency = self.cur
+0003d040: 7265 6e63 7928 636f 6465 290a 2020 2020  rency(code).    
+0003d050: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003d060: 6573 745b 2763 6f69 6e27 5d20 3d20 6375  est['coin'] = cu
+0003d070: 7272 656e 6379 5b27 6964 275d 0a20 2020  rrency['id'].   
+0003d080: 2020 2020 2020 2020 2069 6620 7369 6e63           if sinc
+0003d090: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+0003d0a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003d0b0: 6571 7565 7374 5b27 7374 6172 7454 696d  equest['startTim
+0003d0c0: 6527 5d20 3d20 7369 6e63 650a 2020 2020  e'] = since.    
+0003d0d0: 2020 2020 2020 2020 2020 2020 2320 6d61              # ma
+0003d0e0: 7820 3320 6d6f 6e74 6873 2072 616e 6765  x 3 months range
+0003d0f0: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
+0003d100: 636f 6d2f 6363 7874 2f63 6378 742f 6973  com/ccxt/ccxt/is
+0003d110: 7375 6573 2f36 3439 350a 2020 2020 2020  sues/6495.      
+0003d120: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0003d130: 745b 2765 6e64 5469 6d65 275d 203d 2073  t['endTime'] = s
+0003d140: 656c 662e 7375 6d28 7369 6e63 652c 2037  elf.sum(since, 7
+0003d150: 3737 3630 3030 3030 3029 0a20 2020 2020  776000000).     
+0003d160: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
+0003d170: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0003d180: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0003d190: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
+0003d1a0: 6c69 6d69 740a 2020 2020 2020 2020 2020  limit.          
+0003d1b0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+0003d1c0: 662e 7361 7069 4765 7443 6170 6974 616c  f.sapiGetCapital
+0003d1d0: 5769 7468 6472 6177 4869 7374 6f72 7928  WithdrawHistory(
+0003d1e0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+0003d1f0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+0003d200: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003d210: 5b0a 2020 2020 2020 2020 2020 2020 2320  [.            # 
+0003d220: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0003d230: 2020 2020 2320 2020 2020 2020 2020 2269      #         "i
+0003d240: 6422 3a20 2236 3965 3533 6164 3330 3531  d": "69e53ad3051
+0003d250: 3234 6239 3662 3433 3636 3863 6561 6231  24b96b43668ceab1
+0003d260: 3538 6131 3822 2c0a 2020 2020 2020 2020  58a18",.        
+0003d270: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
+0003d280: 6d6f 756e 7422 3a20 2232 382e 3735 222c  mount": "28.75",
+0003d290: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003d2a0: 2020 2020 2020 2022 7472 616e 7361 6374         "transact
+0003d2b0: 696f 6e46 6565 223a 2022 302e 3235 222c  ionFee": "0.25",
+0003d2c0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003d2d0: 2020 2020 2020 2022 636f 696e 223a 2022         "coin": "
+0003d2e0: 5852 5022 2c0a 2020 2020 2020 2020 2020  XRP",.          
+0003d2f0: 2020 2320 2020 2020 2020 2020 2273 7461    #         "sta
+0003d300: 7475 7322 3a20 362c 0a20 2020 2020 2020  tus": 6,.       
+0003d310: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003d320: 6164 6472 6573 7322 3a20 2272 3354 3735  address": "r3T75
+0003d330: 6675 4c6a 5835 316d 6d66 6235 536b 316b  fuLjX51mmfb5Sk1k
+0003d340: 4d4e 7568 4267 4250 4a73 6a7a 6122 2c0a  MNuhBgBPJsjza",.
+0003d350: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003d360: 2020 2020 2020 2261 6464 7265 7373 5461        "addressTa
+0003d370: 6722 3a20 2231 3031 3238 3639 3232 222c  g": "101286922",
+0003d380: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003d390: 2020 2020 2020 2022 7478 4964 223a 2022         "txId": "
+0003d3a0: 3139 4135 4232 3445 4430 4236 3937 4534  19A5B24ED0B697E4
+0003d3b0: 4630 4539 4344 3039 4643 4230 3037 3137  F0E9CD09FCB00717
+0003d3c0: 3041 3630 3542 4339 3343 3932 3830 4239  0A605BC93C9280B9
+0003d3d0: 4536 3337 3943 3545 3645 4630 4636 3541  E6379C5E6EF0F65A
+0003d3e0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0003d3f0: 2020 2020 2020 2020 2022 6170 706c 7954           "applyT
+0003d400: 696d 6522 3a20 2232 3032 312d 3034 2d31  ime": "2021-04-1
+0003d410: 3520 3132 3a30 393a 3136 222c 0a20 2020  5 12:09:16",.   
+0003d420: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003d430: 2020 2022 6e65 7477 6f72 6b22 3a20 2258     "network": "X
+0003d440: 5250 222c 0a20 2020 2020 2020 2020 2020  RP",.           
+0003d450: 2023 2020 2020 2020 2020 2022 7472 616e   #         "tran
+0003d460: 7366 6572 5479 7065 223a 2030 0a20 2020  sferType": 0.   
+0003d470: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003d480: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
+0003d490: 2320 2020 2020 2020 7b0a 2020 2020 2020  #       {.      
+0003d4a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d4b0: 2269 6422 3a20 2239 6136 3736 3238 6231  "id": "9a67628b1
+0003d4c0: 3662 6134 3938 3861 6532 3064 3332 3933  6ba4988ae20d3293
+0003d4d0: 3333 6631 3662 6322 2c0a 2020 2020 2020  33f16bc",.      
+0003d4e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d4f0: 2261 6d6f 756e 7422 3a20 2232 3022 2c0a  "amount": "20",.
+0003d500: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003d510: 2020 2020 2020 2274 7261 6e73 6163 7469        "transacti
+0003d520: 6f6e 4665 6522 3a20 2232 3022 2c0a 2020  onFee": "20",.  
+0003d530: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0003d540: 2020 2020 2263 6f69 6e22 3a20 2255 5344      "coin": "USD
+0003d550: 5422 2c0a 2020 2020 2020 2020 2020 2020  T",.            
+0003d560: 2320 2020 2020 2020 2020 2273 7461 7475  #         "statu
+0003d570: 7322 3a20 362c 0a20 2020 2020 2020 2020  s": 6,.         
+0003d580: 2020 2023 2020 2020 2020 2020 2022 6164     #         "ad
+0003d590: 6472 6573 7322 3a20 2230 7830 4142 3939  dress": "0x0AB99
+0003d5a0: 3134 3937 3131 3666 3746 3535 3332 6134  1497116f7F5532a4
+0003d5b0: 6332 6634 6637 4231 3738 3434 3838 3632  c2f4f7B178448862
+0003d5c0: 3865 3122 2c0a 2020 2020 2020 2020 2020  8e1",.          
+0003d5d0: 2020 2320 2020 2020 2020 2020 2274 7849    #         "txI
+0003d5e0: 6422 3a20 2230 7837 3766 6266 3263 6632  d": "0x77fbf2cf2
+0003d5f0: 6338 3562 3535 3266 3066 6433 3166 6432  c85b552f0fd31fd2
+0003d600: 6535 3664 6339 3563 3038 6164 6165 3033  e56dc95c08adae03
+0003d610: 3164 3936 6633 3731 3764 3862 3137 6531  1d96f3717d8b17e1
+0003d620: 6165 6133 6534 3622 2c0a 2020 2020 2020  aea3e46",.      
+0003d630: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d640: 2261 7070 6c79 5469 6d65 223a 2022 3230  "applyTime": "20
+0003d650: 3231 2d30 342d 3135 2031 323a 3036 3a35  21-04-15 12:06:5
+0003d660: 3322 2c0a 2020 2020 2020 2020 2020 2020  3",.            
+0003d670: 2320 2020 2020 2020 2020 226e 6574 776f  #         "netwo
+0003d680: 726b 223a 2022 4554 4822 2c0a 2020 2020  rk": "ETH",.    
+0003d690: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d6a0: 2020 2274 7261 6e73 6665 7254 7970 6522    "transferType"
+0003d6b0: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
+0003d6c0: 2320 2020 2020 2020 7d2c 0a20 2020 2020  #       },.     
+0003d6d0: 2020 2020 2020 2023 2020 2020 2020 207b         #       {
+0003d6e0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003d6f0: 2020 2020 2020 2022 6964 223a 2022 6137         "id": "a7
+0003d700: 6364 6330 6166 6266 6134 3461 3438 6264  cdc0afbfa44a48bd
+0003d710: 3232 3563 3965 6365 3935 3866 6532 222c  225c9ece958fe2",
+0003d720: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0003d730: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
+0003d740: 2022 3531 222c 0a20 2020 2020 2020 2020   "51",.         
+0003d750: 2020 2023 2020 2020 2020 2020 2022 7472     #         "tr
+0003d760: 616e 7361 6374 696f 6e46 6565 223a 2022  ansactionFee": "
+0003d770: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
+0003d780: 2320 2020 2020 2020 2020 2263 6f69 6e22  #         "coin"
+0003d790: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
+0003d7a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d7b0: 2273 7461 7475 7322 3a20 362c 0a20 2020  "status": 6,.   
+0003d7c0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0003d7d0: 2020 2022 6164 6472 6573 7322 3a20 2254     "address": "T
+0003d7e0: 5944 6d74 7557 4c38 6273 796a 7663 6175  YDmtuWL8bsyjvcau
+0003d7f0: 5554 6572 7066 5979 5668 4674 426a 7179  UTerpfYyVhFtBjqy
+0003d800: 6f22 2c0a 2020 2020 2020 2020 2020 2020  o",.            
+0003d810: 2320 2020 2020 2020 2020 2274 7849 6422  #         "txId"
+0003d820: 3a20 2231 3638 6137 3531 3132 6263 6536  : "168a75112bce6
+0003d830: 6365 6234 3832 3363 3636 3732 3661 6434  ceb4823c66726ad4
+0003d840: 3736 3230 6164 3333 3265 3639 6665 3932  7620ad332e69fe92
+0003d850: 6439 6362 3863 6562 3736 3032 3366 3961  d9cb8ceb76023f9a
+0003d860: 3032 3822 2c0a 2020 2020 2020 2020 2020  028",.          
+0003d870: 2020 2320 2020 2020 2020 2020 2261 7070    #         "app
+0003d880: 6c79 5469 6d65 223a 2022 3230 3231 2d30  lyTime": "2021-0
+0003d890: 342d 3133 2031 323a 3436 3a35 3922 2c0a  4-13 12:46:59",.
+0003d8a0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003d8b0: 2020 2020 2020 226e 6574 776f 726b 223a        "network":
+0003d8c0: 2022 5452 5822 2c0a 2020 2020 2020 2020   "TRX",.        
+0003d8d0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0003d8e0: 7261 6e73 6665 7254 7970 6522 3a20 300a  ransferType": 0.
+0003d8f0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0003d900: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+0003d910: 2020 2320 2020 2020 5d0a 2020 2020 2020    #     ].      
+0003d920: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+0003d930: 2830 2c20 6c65 6e28 7265 7370 6f6e 7365  (0, len(response
+0003d940: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0003d950: 7265 7370 6f6e 7365 5b69 5d5b 2774 7970  response[i]['typ
+0003d960: 6527 5d20 3d20 2777 6974 6864 7261 7761  e'] = 'withdrawa
+0003d970: 6c27 0a20 2020 2020 2020 2072 6574 7572  l'.        retur
+0003d980: 6e20 7365 6c66 2e70 6172 7365 5f74 7261  n self.parse_tra
+0003d990: 6e73 6163 7469 6f6e 7328 7265 7370 6f6e  nsactions(respon
+0003d9a0: 7365 2c20 6375 7272 656e 6379 2c20 7369  se, currency, si
+0003d9b0: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
+0003d9c0: 2064 6566 2070 6172 7365 5f74 7261 6e73   def parse_trans
+0003d9d0: 6163 7469 6f6e 5f73 7461 7475 735f 6279  action_status_by
+0003d9e0: 5f74 7970 6528 7365 6c66 2c20 7374 6174  _type(self, stat
+0003d9f0: 7573 2c20 7479 7065 3d4e 6f6e 6529 3a0a  us, type=None):.
+0003da00: 2020 2020 2020 2020 7374 6174 7573 6573          statuses
+0003da10: 4279 5479 7065 203d 207b 0a20 2020 2020  ByType = {.     
+0003da20: 2020 2020 2020 2027 6465 706f 7369 7427         'deposit'
+0003da30: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+0003da40: 2020 2020 2730 273a 2027 7065 6e64 696e      '0': 'pendin
+0003da50: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
+0003da60: 2020 2020 2731 273a 2027 6f6b 272c 0a20      '1': 'ok',. 
+0003da70: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0003da80: 3627 3a20 276f 6b27 2c0a 2020 2020 2020  6': 'ok',.      
+0003da90: 2020 2020 2020 2020 2020 2320 4669 6174            # Fiat
+0003daa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003dab0: 2023 2050 726f 6365 7373 696e 672c 2046   # Processing, F
+0003dac0: 6169 6c65 642c 2053 7563 6365 7373 6675  ailed, Successfu
+0003dad0: 6c2c 2046 696e 6973 6865 642c 2052 6566  l, Finished, Ref
+0003dae0: 756e 6469 6e67 2c20 5265 6675 6e64 6564  unding, Refunded
+0003daf0: 2c20 5265 6675 6e64 2046 6169 6c65 642c  , Refund Failed,
+0003db00: 204f 7264 6572 2050 6172 7469 616c 2063   Order Partial c
+0003db10: 7265 6469 7420 5374 6f70 7065 640a 2020  redit Stopped.  
+0003db20: 2020 2020 2020 2020 2020 2020 2020 2750                'P
+0003db30: 726f 6365 7373 696e 6727 3a20 2770 656e  rocessing': 'pen
+0003db40: 6469 6e67 272c 0a20 2020 2020 2020 2020  ding',.         
+0003db50: 2020 2020 2020 2027 4661 696c 6564 273a         'Failed':
+0003db60: 2027 6661 696c 6564 272c 0a20 2020 2020   'failed',.     
+0003db70: 2020 2020 2020 2020 2020 2027 5375 6363             'Succ
+0003db80: 6573 7366 756c 273a 2027 6f6b 272c 0a20  essful': 'ok',. 
+0003db90: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0003dba0: 5265 6675 6e64 696e 6727 3a20 2763 616e  Refunding': 'can
+0003dbb0: 6365 6c65 6427 2c0a 2020 2020 2020 2020  celed',.        
+0003dbc0: 2020 2020 2020 2020 2752 6566 756e 6465          'Refunde
+0003dbd0: 6427 3a20 2763 616e 6365 6c65 6427 2c0a  d': 'canceled',.
+0003dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dbf0: 2752 6566 756e 6420 4661 696c 6564 273a  'Refund Failed':
+0003dc00: 2027 6661 696c 6564 272c 0a20 2020 2020   'failed',.     
+0003dc10: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0003dc20: 2020 2020 2020 2777 6974 6864 7261 7761        'withdrawa
+0003dc30: 6c27 3a20 7b0a 2020 2020 2020 2020 2020  l': {.          
+0003dc40: 2020 2020 2020 2730 273a 2027 7065 6e64        '0': 'pend
+0003dc50: 696e 6727 2c20 2023 2045 6d61 696c 2053  ing',  # Email S
+0003dc60: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
+0003dc70: 2020 2020 2731 273a 2027 6361 6e63 656c      '1': 'cancel
+0003dc80: 6564 272c 2020 2320 4361 6e63 656c 6c65  ed',  # Cancelle
+0003dc90: 6428 6469 6666 6572 656e 7420 6672 6f6d  d(different from
+0003dca0: 2031 203d 206f 6b20 696e 2064 6570 6f73   1 = ok in depos
+0003dcb0: 6974 7329 0a20 2020 2020 2020 2020 2020  its).           
+0003dcc0: 2020 2020 2027 3227 3a20 2770 656e 6469       '2': 'pendi
+0003dcd0: 6e67 272c 2020 2320 4177 6169 7469 6e67  ng',  # Awaiting
+0003dce0: 2041 7070 726f 7661 6c0a 2020 2020 2020   Approval.      
+0003dcf0: 2020 2020 2020 2020 2020 2733 273a 2027            '3': '
+0003dd00: 6661 696c 6564 272c 2020 2320 5265 6a65  failed',  # Reje
+0003dd10: 6374 6564 0a20 2020 2020 2020 2020 2020  cted.           
+0003dd20: 2020 2020 2027 3427 3a20 2770 656e 6469       '4': 'pendi
+0003dd30: 6e67 272c 2020 2320 5072 6f63 6573 7369  ng',  # Processi
+0003dd40: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
+0003dd50: 2020 2027 3527 3a20 2766 6169 6c65 6427     '5': 'failed'
+0003dd60: 2c20 2023 2046 6169 6c75 7265 0a20 2020  ,  # Failure.   
+0003dd70: 2020 2020 2020 2020 2020 2020 2027 3627               '6'
+0003dd80: 3a20 276f 6b27 2c20 2023 2043 6f6d 706c  : 'ok',  # Compl
+0003dd90: 6574 6564 0a20 2020 2020 2020 2020 2020  eted.           
+0003dda0: 2020 2020 2023 2046 6961 740a 2020 2020       # Fiat.    
+0003ddb0: 2020 2020 2020 2020 2020 2020 2320 5072              # Pr
+0003ddc0: 6f63 6573 7369 6e67 2c20 4661 696c 6564  ocessing, Failed
+0003ddd0: 2c20 5375 6363 6573 7366 756c 2c20 4669  , Successful, Fi
+0003dde0: 6e69 7368 6564 2c20 5265 6675 6e64 696e  nished, Refundin
+0003ddf0: 672c 2052 6566 756e 6465 642c 2052 6566  g, Refunded, Ref
+0003de00: 756e 6420 4661 696c 6564 2c20 4f72 6465  und Failed, Orde
+0003de10: 7220 5061 7274 6961 6c20 6372 6564 6974  r Partial credit
+0003de20: 2053 746f 7070 6564 0a20 2020 2020 2020   Stopped.       
+0003de30: 2020 2020 2020 2020 2027 5072 6f63 6573           'Proces
+0003de40: 7369 6e67 273a 2027 7065 6e64 696e 6727  sing': 'pending'
+0003de50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0003de60: 2020 2746 6169 6c65 6427 3a20 2766 6169    'Failed': 'fai
+0003de70: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
+0003de80: 2020 2020 2020 2753 7563 6365 7373 6675        'Successfu
+0003de90: 6c27 3a20 276f 6b27 2c0a 2020 2020 2020  l': 'ok',.      
+0003dea0: 2020 2020 2020 2020 2020 2752 6566 756e            'Refun
+0003deb0: 6469 6e67 273a 2027 6361 6e63 656c 6564  ding': 'canceled
+0003dec0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+0003ded0: 2020 2027 5265 6675 6e64 6564 273a 2027     'Refunded': '
+0003dee0: 6361 6e63 656c 6564 272c 0a20 2020 2020  canceled',.     
+0003def0: 2020 2020 2020 2020 2020 2027 5265 6675             'Refu
+0003df00: 6e64 2046 6169 6c65 6427 3a20 2766 6169  nd Failed': 'fai
+0003df10: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
+0003df20: 2020 7d2c 0a20 2020 2020 2020 207d 0a20    },.        }. 
+0003df30: 2020 2020 2020 2073 7461 7475 7365 7320         statuses 
+0003df40: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0003df50: 6528 7374 6174 7573 6573 4279 5479 7065  e(statusesByType
+0003df60: 2c20 7479 7065 2c20 7b7d 290a 2020 2020  , type, {}).    
+0003df70: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0003df80: 7361 6665 5f73 7472 696e 6728 7374 6174  safe_string(stat
+0003df90: 7573 6573 2c20 7374 6174 7573 2c20 7374  uses, status, st
+0003dfa0: 6174 7573 290a 0a20 2020 2064 6566 2070  atus)..    def p
+0003dfb0: 6172 7365 5f74 7261 6e73 6163 7469 6f6e  arse_transaction
+0003dfc0: 2873 656c 662c 2074 7261 6e73 6163 7469  (self, transacti
+0003dfd0: 6f6e 2c20 6375 7272 656e 6379 3d4e 6f6e  on, currency=Non
+0003dfe0: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+0003dff0: 2020 2020 2020 2320 6665 7463 6844 6570        # fetchDep
+0003e000: 6f73 6974 730a 2020 2020 2020 2020 230a  osits.        #.
+0003e010: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0003e020: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e030: 2261 6d6f 756e 7422 3a20 2234 3530 3022  "amount": "4500"
+0003e040: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e050: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
+0003e060: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e070: 2020 226e 6574 776f 726b 223a 2022 4253    "network": "BS
+0003e080: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+0003e090: 2020 2020 2273 7461 7475 7322 3a20 312c      "status": 1,
+0003e0a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e0b0: 2022 6164 6472 6573 7322 3a20 2230 7863   "address": "0xc
+0003e0c0: 3963 3932 3363 3837 3334 3763 6130 6633  9c923c87347ca0f3
+0003e0d0: 3435 3164 3664 3330 3863 6538 3466 3639  451d6d308ce84f69
+0003e0e0: 3162 3966 3530 3122 2c0a 2020 2020 2020  1b9f501",.      
+0003e0f0: 2020 2320 2020 2020 2020 2261 6464 7265    #       "addre
+0003e100: 7373 5461 6722 3a20 2222 2c0a 2020 2020  ssTag": "",.    
+0003e110: 2020 2020 2320 2020 2020 2020 2274 7849      #       "txI
+0003e120: 6422 3a20 2249 6e74 6572 6e61 6c20 7472  d": "Internal tr
+0003e130: 616e 7366 6572 2035 3133 3736 3632 3739  ansfer 513766279
+0003e140: 3031 222c 0a20 2020 2020 2020 2023 2020  01",.        #  
+0003e150: 2020 2020 2022 696e 7365 7274 5469 6d65       "insertTime
+0003e160: 223a 2031 3631 3833 3934 3338 3130 3030  ": 1618394381000
+0003e170: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e180: 2020 2274 7261 6e73 6665 7254 7970 6522    "transferType"
+0003e190: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
+0003e1a0: 2020 2020 2022 636f 6e66 6972 6d54 696d       "confirmTim
+0003e1b0: 6573 223a 2022 312f 3135 220a 2020 2020  es": "1/15".    
+0003e1c0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0003e1d0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0003e1e0: 6665 7463 6857 6974 6864 7261 7761 6c73  fetchWithdrawals
+0003e1f0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0003e200: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0003e210: 2020 2023 2020 2020 2020 2022 6964 223a     #       "id":
+0003e220: 2022 3639 6535 3361 6433 3035 3132 3462   "69e53ad305124b
+0003e230: 3936 6234 3336 3638 6365 6162 3135 3861  96b43668ceab158a
+0003e240: 3138 222c 0a20 2020 2020 2020 2023 2020  18",.        #  
+0003e250: 2020 2020 2022 616d 6f75 6e74 223a 2022       "amount": "
+0003e260: 3238 2e37 3522 2c0a 2020 2020 2020 2020  28.75",.        
+0003e270: 2320 2020 2020 2020 2274 7261 6e73 6163  #       "transac
+0003e280: 7469 6f6e 4665 6522 3a20 2230 2e32 3522  tionFee": "0.25"
+0003e290: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e2a0: 2020 2263 6f69 6e22 3a20 2258 5250 222c    "coin": "XRP",
+0003e2b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e2c0: 2022 7374 6174 7573 223a 2036 2c0a 2020   "status": 6,.  
+0003e2d0: 2020 2020 2020 2320 2020 2020 2020 2261        #       "a
+0003e2e0: 6464 7265 7373 223a 2022 7233 5437 3566  ddress": "r3T75f
+0003e2f0: 754c 6a58 3531 6d6d 6662 3553 6b31 6b4d  uLjX51mmfb5Sk1kM
+0003e300: 4e75 6842 6742 504a 736a 7a61 222c 0a20  NuhBgBPJsjza",. 
+0003e310: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0003e320: 6164 6472 6573 7354 6167 223a 2022 3130  addressTag": "10
+0003e330: 3132 3836 3932 3222 2c0a 2020 2020 2020  1286922",.      
+0003e340: 2020 2320 2020 2020 2020 2274 7849 6422    #       "txId"
+0003e350: 3a20 2231 3941 3542 3234 4544 3042 3639  : "19A5B24ED0B69
+0003e360: 3745 3446 3045 3943 4430 3946 4342 3030  7E4F0E9CD09FCB00
+0003e370: 3731 3730 4136 3035 4243 3933 4339 3238  7170A605BC93C928
+0003e380: 3042 3945 3633 3739 4335 4536 4546 3046  0B9E6379C5E6EF0F
+0003e390: 3635 4122 2c0a 2020 2020 2020 2020 2320  65A",.        # 
+0003e3a0: 2020 2020 2020 2261 7070 6c79 5469 6d65        "applyTime
+0003e3b0: 223a 2022 3230 3231 2d30 342d 3135 2031  ": "2021-04-15 1
+0003e3c0: 323a 3039 3a31 3622 2c0a 2020 2020 2020  2:09:16",.      
+0003e3d0: 2020 2320 2020 2020 2020 226e 6574 776f    #       "netwo
+0003e3e0: 726b 223a 2022 5852 5022 2c0a 2020 2020  rk": "XRP",.    
+0003e3f0: 2020 2020 2320 2020 2020 2020 2274 7261      #       "tra
+0003e400: 6e73 6665 7254 7970 6522 3a20 300a 2020  nsferType": 0.  
+0003e410: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0003e420: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0003e430: 2320 6669 6174 2074 7261 6e73 6163 7469  # fiat transacti
+0003e440: 6f6e 0a20 2020 2020 2020 2023 2077 6974  on.        # wit
+0003e450: 6864 7261 770a 2020 2020 2020 2020 2320  hdraw.        # 
+0003e460: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0003e470: 2020 2020 2020 226f 7264 6572 4e6f 223a        "orderNo":
+0003e480: 2022 434a 5736 3834 3839 3735 3531 3339   "CJW68489755139
+0003e490: 3731 3731 3230 3022 2c0a 2020 2020 2020  7171200",.      
+0003e4a0: 2020 2320 2020 2020 2020 2266 6961 7443    #       "fiatC
+0003e4b0: 7572 7265 6e63 7922 3a20 2247 4250 222c  urrency": "GBP",
+0003e4c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e4d0: 2022 696e 6469 6361 7465 6441 6d6f 756e   "indicatedAmoun
+0003e4e0: 7422 3a20 2232 392e 3939 222c 0a20 2020  t": "29.99",.   
+0003e4f0: 2020 2020 2023 2020 2020 2020 2022 616d       #       "am
+0003e500: 6f75 6e74 223a 2022 3238 2e34 3922 2c0a  ount": "28.49",.
+0003e510: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e520: 2274 6f74 616c 4665 6522 3a20 2231 2e35  "totalFee": "1.5
+0003e530: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0003e540: 2020 2020 226d 6574 686f 6422 3a20 2262      "method": "b
+0003e550: 616e 6b20 7472 616e 7366 6572 222c 0a20  ank transfer",. 
+0003e560: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0003e570: 7374 6174 7573 223a 2022 5375 6363 6573  status": "Succes
+0003e580: 7366 756c 222c 0a20 2020 2020 2020 2023  sful",.        #
+0003e590: 2020 2020 2020 2022 6372 6561 7465 5469         "createTi
+0003e5a0: 6d65 223a 2031 3631 3438 3938 3730 3130  me": 16148987010
+0003e5b0: 3030 2c0a 2020 2020 2020 2020 2320 2020  00,.        #   
+0003e5c0: 2020 2020 2275 7064 6174 6554 696d 6522      "updateTime"
+0003e5d0: 3a20 3136 3134 3839 3838 3230 3030 300a  : 1614898820000.
+0003e5e0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0003e5f0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0003e600: 2020 2320 6465 706f 7369 740a 2020 2020    # deposit.    
+0003e610: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0003e620: 2020 2020 2320 2020 2020 2020 226f 7264      #       "ord
+0003e630: 6572 4e6f 223a 2022 3235 6365 6433 3730  erNo": "25ced370
+0003e640: 3735 6331 3437 3062 6138 3933 3964 3064  75c1470ba8939d0d
+0003e650: 6632 3331 3665 3233 222c 0a20 2020 2020  f2316e23",.     
+0003e660: 2020 2023 2020 2020 2020 2022 6669 6174     #       "fiat
+0003e670: 4375 7272 656e 6379 223a 2022 4555 5222  Currency": "EUR"
+0003e680: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e690: 2020 2274 7261 6e73 6163 7469 6f6e 5479    "transactionTy
+0003e6a0: 7065 223a 2030 2c0a 2020 2020 2020 2020  pe": 0,.        
+0003e6b0: 2320 2020 2020 2020 2269 6e64 6963 6174  #       "indicat
+0003e6c0: 6564 416d 6f75 6e74 223a 2022 3135 2e30  edAmount": "15.0
+0003e6d0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0003e6e0: 2020 2020 2261 6d6f 756e 7422 3a20 2231      "amount": "1
+0003e6f0: 352e 3030 222c 0a20 2020 2020 2020 2023  5.00",.        #
+0003e700: 2020 2020 2020 2022 746f 7461 6c46 6565         "totalFee
+0003e710: 223a 2022 302e 3030 222c 0a20 2020 2020  ": "0.00",.     
+0003e720: 2020 2023 2020 2020 2020 2022 6d65 7468     #       "meth
+0003e730: 6f64 223a 2022 6361 7264 222c 0a20 2020  od": "card",.   
+0003e740: 2020 2020 2023 2020 2020 2020 2022 7374       #       "st
+0003e750: 6174 7573 223a 2022 4661 696c 6564 222c  atus": "Failed",
+0003e760: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e770: 2022 6372 6561 7465 5469 6d65 223a 2022   "createTime": "
+0003e780: 3136 3237 3530 3130 3236 3030 3022 2c0a  1627501026000",.
+0003e790: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e7a0: 2275 7064 6174 6554 696d 6522 3a20 2231  "updateTime": "1
+0003e7b0: 3632 3735 3031 3032 3730 3030 220a 2020  627501027000".  
+0003e7c0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0003e7d0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0003e7e0: 2320 7769 7468 6472 6177 0a20 2020 2020  # withdraw.     
+0003e7f0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0003e800: 2020 7b69 643a 2027 3961 3637 3632 3862    {id: '9a67628b
+0003e810: 3136 6261 3439 3838 6165 3230 6433 3239  16ba4988ae20d329
+0003e820: 3333 3366 3136 6263 277d 0a20 2020 2020  333f16bc'}.     
+0003e830: 2020 2023 0a20 2020 2020 2020 2069 6420     #.        id 
+0003e840: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0003e850: 6e67 5f32 2874 7261 6e73 6163 7469 6f6e  ng_2(transaction
+0003e860: 2c20 2769 6427 2c20 276f 7264 6572 4e6f  , 'id', 'orderNo
+0003e870: 2729 0a20 2020 2020 2020 2061 6464 7265  ').        addre
+0003e880: 7373 203d 2073 656c 662e 7361 6665 5f73  ss = self.safe_s
+0003e890: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
+0003e8a0: 6e2c 2027 6164 6472 6573 7327 290a 2020  n, 'address').  
+0003e8b0: 2020 2020 2020 7461 6720 3d20 7365 6c66        tag = self
+0003e8c0: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
+0003e8d0: 6e73 6163 7469 6f6e 2c20 2761 6464 7265  nsaction, 'addre
+0003e8e0: 7373 5461 6727 2920 2023 2073 6574 2062  ssTag')  # set b
+0003e8f0: 7574 2075 6e75 7365 640a 2020 2020 2020  ut unused.      
+0003e900: 2020 6966 2074 6167 2069 7320 6e6f 7420    if tag is not 
+0003e910: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0003e920: 2020 6966 206c 656e 2874 6167 2920 3c20    if len(tag) < 
+0003e930: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
+0003e940: 2020 2074 6167 203d 204e 6f6e 650a 2020     tag = None.  
+0003e950: 2020 2020 2020 7478 6964 203d 2073 656c        txid = sel
+0003e960: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
+0003e970: 616e 7361 6374 696f 6e2c 2027 7478 4964  ansaction, 'txId
+0003e980: 2729 0a20 2020 2020 2020 2069 6620 2874  ').        if (t
+0003e990: 7869 6420 6973 206e 6f74 204e 6f6e 6529  xid is not None)
+0003e9a0: 2061 6e64 2028 7478 6964 2e66 696e 6428   and (txid.find(
+0003e9b0: 2749 6e74 6572 6e61 6c20 7472 616e 7366  'Internal transf
+0003e9c0: 6572 2027 2920 3e3d 2030 293a 0a20 2020  er ') >= 0):.   
+0003e9d0: 2020 2020 2020 2020 2074 7869 6420 3d20           txid = 
+0003e9e0: 7478 6964 5b31 383a 5d0a 2020 2020 2020  txid[18:].      
+0003e9f0: 2020 6375 7272 656e 6379 4964 203d 2073    currencyId = s
+0003ea00: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
+0003ea10: 3228 7472 616e 7361 6374 696f 6e2c 2027  2(transaction, '
+0003ea20: 636f 696e 272c 2027 6669 6174 4375 7272  coin', 'fiatCurr
+0003ea30: 656e 6379 2729 0a20 2020 2020 2020 2063  ency').        c
+0003ea40: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
+0003ea50: 6375 7272 656e 6379 5f63 6f64 6528 6375  currency_code(cu
+0003ea60: 7272 656e 6379 4964 2c20 6375 7272 656e  rrencyId, curren
+0003ea70: 6379 290a 2020 2020 2020 2020 7469 6d65  cy).        time
+0003ea80: 7374 616d 7020 3d20 4e6f 6e65 0a20 2020  stamp = None.   
+0003ea90: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+0003eaa0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+0003eab0: 6572 5f32 2874 7261 6e73 6163 7469 6f6e  er_2(transaction
+0003eac0: 2c20 2769 6e73 6572 7454 696d 6527 2c20  , 'insertTime', 
+0003ead0: 2763 7265 6174 6554 696d 6527 290a 2020  'createTime').  
+0003eae0: 2020 2020 2020 6966 2074 696d 6573 7461        if timesta
+0003eaf0: 6d70 2069 7320 4e6f 6e65 3a0a 2020 2020  mp is None:.    
+0003eb00: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
+0003eb10: 7020 3d20 7365 6c66 2e70 6172 7365 3836  p = self.parse86
+0003eb20: 3031 2873 656c 662e 7361 6665 5f73 7472  01(self.safe_str
+0003eb30: 696e 6728 7472 616e 7361 6374 696f 6e2c  ing(transaction,
+0003eb40: 2027 6170 706c 7954 696d 6527 2929 0a20   'applyTime')). 
+0003eb50: 2020 2020 2020 2075 7064 6174 6564 203d         updated =
+0003eb60: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+0003eb70: 6572 5f32 2874 7261 6e73 6163 7469 6f6e  er_2(transaction
+0003eb80: 2c20 2773 7563 6365 7373 5469 6d65 272c  , 'successTime',
+0003eb90: 2027 7570 6461 7465 5469 6d65 2729 0a20   'updateTime'). 
+0003eba0: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
+0003ebb0: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
+0003ebc0: 7261 6e73 6163 7469 6f6e 2c20 2774 7970  ransaction, 'typ
+0003ebd0: 6527 290a 2020 2020 2020 2020 6966 2074  e').        if t
+0003ebe0: 7970 6520 6973 204e 6f6e 653a 0a20 2020  ype is None:.   
+0003ebf0: 2020 2020 2020 2020 2074 7854 7970 6520           txType 
+0003ec00: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0003ec10: 6e67 2874 7261 6e73 6163 7469 6f6e 2c20  ng(transaction, 
+0003ec20: 2774 7261 6e73 6163 7469 6f6e 5479 7065  'transactionType
+0003ec30: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
+0003ec40: 6620 7478 5479 7065 2069 7320 6e6f 7420  f txType is not 
+0003ec50: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0003ec60: 2020 2020 2020 7479 7065 203d 2027 6465        type = 'de
+0003ec70: 706f 7369 7427 2069 6620 2874 7854 7970  posit' if (txTyp
+0003ec80: 6520 3d3d 2027 3027 2920 656c 7365 2027  e == '0') else '
+0003ec90: 7769 7468 6472 6177 616c 270a 2020 2020  withdrawal'.    
+0003eca0: 2020 2020 2020 2020 6c65 6761 6c4d 6f6e          legalMon
+0003ecb0: 6579 4375 7272 656e 6369 6573 4279 4964  eyCurrenciesById
+0003ecc0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0003ecd0: 7565 2873 656c 662e 6f70 7469 6f6e 732c  ue(self.options,
+0003ece0: 2027 6c65 6761 6c4d 6f6e 6579 4375 7272   'legalMoneyCurr
+0003ecf0: 656e 6369 6573 4279 4964 2729 0a20 2020  enciesById').   
+0003ed00: 2020 2020 2020 2020 2063 6f64 6520 3d20           code = 
+0003ed10: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0003ed20: 286c 6567 616c 4d6f 6e65 7943 7572 7265  (legalMoneyCurre
+0003ed30: 6e63 6965 7342 7949 642c 2063 6f64 652c  nciesById, code,
+0003ed40: 2063 6f64 6529 0a20 2020 2020 2020 2073   code).        s
+0003ed50: 7461 7475 7320 3d20 7365 6c66 2e70 6172  tatus = self.par
+0003ed60: 7365 5f74 7261 6e73 6163 7469 6f6e 5f73  se_transaction_s
+0003ed70: 7461 7475 735f 6279 5f74 7970 6528 7365  tatus_by_type(se
+0003ed80: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
+0003ed90: 7261 6e73 6163 7469 6f6e 2c20 2773 7461  ransaction, 'sta
+0003eda0: 7475 7327 292c 2074 7970 6529 0a20 2020  tus'), type).   
+0003edb0: 2020 2020 2061 6d6f 756e 7420 3d20 7365       amount = se
+0003edc0: 6c66 2e73 6166 655f 6e75 6d62 6572 2874  lf.safe_number(t
+0003edd0: 7261 6e73 6163 7469 6f6e 2c20 2761 6d6f  ransaction, 'amo
+0003ede0: 756e 7427 290a 2020 2020 2020 2020 6665  unt').        fe
+0003edf0: 6543 6f73 7420 3d20 7365 6c66 2e73 6166  eCost = self.saf
+0003ee00: 655f 6e75 6d62 6572 5f32 2874 7261 6e73  e_number_2(trans
+0003ee10: 6163 7469 6f6e 2c20 2774 7261 6e73 6163  action, 'transac
+0003ee20: 7469 6f6e 4665 6527 2c20 2774 6f74 616c  tionFee', 'total
+0003ee30: 4665 6527 290a 2020 2020 2020 2020 6665  Fee').        fe
+0003ee40: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
+0003ee50: 2069 6620 6665 6543 6f73 7420 6973 206e   if feeCost is n
+0003ee60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0003ee70: 2020 2020 2066 6565 203d 207b 2763 7572       fee = {'cur
+0003ee80: 7265 6e63 7927 3a20 636f 6465 2c20 2763  rency': code, 'c
+0003ee90: 6f73 7427 3a20 6665 6543 6f73 747d 0a20  ost': feeCost}. 
+0003eea0: 2020 2020 2020 2069 6e74 6572 6e61 6c20         internal 
+0003eeb0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+0003eec0: 6765 7228 7472 616e 7361 6374 696f 6e2c  ger(transaction,
+0003eed0: 2027 7472 616e 7366 6572 5479 7065 2729   'transferType')
+0003eee0: 0a20 2020 2020 2020 2069 6620 696e 7465  .        if inte
+0003eef0: 726e 616c 2069 7320 6e6f 7420 4e6f 6e65  rnal is not None
+0003ef00: 3a0a 2020 2020 2020 2020 2020 2020 696e  :.            in
+0003ef10: 7465 726e 616c 203d 2054 7275 6520 6966  ternal = True if
+0003ef20: 2069 6e74 6572 6e61 6c20 656c 7365 2046   internal else F
+0003ef30: 616c 7365 0a20 2020 2020 2020 206e 6574  alse.        net
+0003ef40: 776f 726b 203d 2073 656c 662e 7361 6665  work = self.safe
+0003ef50: 5f73 7472 696e 6728 7472 616e 7361 6374  _string(transact
+0003ef60: 696f 6e2c 2027 6e65 7477 6f72 6b27 290a  ion, 'network').
+0003ef70: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0003ef80: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
+0003ef90: 666f 273a 2074 7261 6e73 6163 7469 6f6e  fo': transaction
+0003efa0: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+0003efb0: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
+0003efc0: 2020 2020 2774 7869 6427 3a20 7478 6964      'txid': txid
+0003efd0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0003efe0: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
+0003eff0: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
+0003f000: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
+0003f010: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
+0003f020: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
+0003f030: 2020 2027 6e65 7477 6f72 6b27 3a20 6e65     'network': ne
+0003f040: 7477 6f72 6b2c 0a20 2020 2020 2020 2020  twork,.         
+0003f050: 2020 2027 6164 6472 6573 7327 3a20 6164     'address': ad
+0003f060: 6472 6573 732c 0a20 2020 2020 2020 2020  dress,.         
+0003f070: 2020 2027 6164 6472 6573 7354 6f27 3a20     'addressTo': 
+0003f080: 6164 6472 6573 732c 0a20 2020 2020 2020  address,.       
+0003f090: 2020 2020 2027 6164 6472 6573 7346 726f       'addressFro
+0003f0a0: 6d27 3a20 4e6f 6e65 2c0a 2020 2020 2020  m': None,.      
+0003f0b0: 2020 2020 2020 2774 6167 273a 2074 6167        'tag': tag
+0003f0c0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0003f0d0: 6167 546f 273a 2074 6167 2c0a 2020 2020  agTo': tag,.    
+0003f0e0: 2020 2020 2020 2020 2774 6167 4672 6f6d          'tagFrom
+0003f0f0: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+0003f100: 2020 2020 2027 7479 7065 273a 2074 7970       'type': typ
+0003f110: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0003f120: 616d 6f75 6e74 273a 2061 6d6f 756e 742c  amount': amount,
+0003f130: 0a20 2020 2020 2020 2020 2020 2027 6375  .            'cu
+0003f140: 7272 656e 6379 273a 2063 6f64 652c 0a20  rrency': code,. 
+0003f150: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+0003f160: 7573 273a 2073 7461 7475 732c 0a20 2020  us': status,.   
+0003f170: 2020 2020 2020 2020 2027 7570 6461 7465           'update
+0003f180: 6427 3a20 7570 6461 7465 642c 0a20 2020  d': updated,.   
+0003f190: 2020 2020 2020 2020 2027 696e 7465 726e           'intern
+0003f1a0: 616c 273a 2069 6e74 6572 6e61 6c2c 0a20  al': internal,. 
+0003f1b0: 2020 2020 2020 2020 2020 2027 6665 6527             'fee'
+0003f1c0: 3a20 6665 652c 0a20 2020 2020 2020 207d  : fee,.        }
+0003f1d0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+0003f1e0: 7472 616e 7366 6572 5f73 7461 7475 7328  transfer_status(
+0003f1f0: 7365 6c66 2c20 7374 6174 7573 293a 0a20  self, status):. 
+0003f200: 2020 2020 2020 2073 7461 7475 7365 7320         statuses 
+0003f210: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0003f220: 2743 4f4e 4649 524d 4544 273a 2027 6f6b  'CONFIRMED': 'ok
+0003f230: 272c 0a20 2020 2020 2020 207d 0a20 2020  ',.        }.   
+0003f240: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0003f250: 2e73 6166 655f 7374 7269 6e67 2873 7461  .safe_string(sta
+0003f260: 7475 7365 732c 2073 7461 7475 732c 2073  tuses, status, s
+0003f270: 7461 7475 7329 0a0a 2020 2020 6465 6620  tatus)..    def 
+0003f280: 7061 7273 655f 7472 616e 7366 6572 2873  parse_transfer(s
+0003f290: 656c 662c 2074 7261 6e73 6665 722c 2063  elf, transfer, c
+0003f2a0: 7572 7265 6e63 793d 4e6f 6e65 293a 0a20  urrency=None):. 
+0003f2b0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0003f2c0: 2023 2074 7261 6e73 6665 720a 2020 2020   # transfer.    
+0003f2d0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0003f2e0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0003f2f0: 2020 2020 2020 2020 2274 7261 6e49 6422          "tranId"
+0003f300: 3a31 3335 3236 3835 3336 3233 0a20 2020  :13526853623.   
+0003f310: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0003f320: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0003f330: 2066 6574 6368 5472 616e 7366 6572 730a   fetchTransfers.
+0003f340: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0003f350: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0003f360: 2020 2320 2020 2020 2020 2020 7469 6d65    #         time
+0003f370: 7374 616d 703a 2031 3631 3436 3430 3837  stamp: 161464087
+0003f380: 3830 3030 2c0a 2020 2020 2020 2020 2320  8000,.        # 
+0003f390: 2020 2020 2020 2020 6173 7365 743a 2027          asset: '
+0003f3a0: 5553 4454 272c 0a20 2020 2020 2020 2023  USDT',.        #
+0003f3b0: 2020 2020 2020 2020 2061 6d6f 756e 743a           amount:
+0003f3c0: 2027 3235 272c 0a20 2020 2020 2020 2023   '25',.        #
+0003f3d0: 2020 2020 2020 2020 2074 7970 653a 2027           type: '
+0003f3e0: 4d41 494e 5f55 4d46 5554 5552 4527 2c0a  MAIN_UMFUTURE',.
+0003f3f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003f400: 2020 7374 6174 7573 3a20 2743 4f4e 4649    status: 'CONFI
+0003f410: 524d 4544 272c 0a20 2020 2020 2020 2023  RMED',.        #
+0003f420: 2020 2020 2020 2020 2074 7261 6e49 643a           tranId:
+0003f430: 2034 3330 3030 3132 3632 3438 0a20 2020   43000126248.   
+0003f440: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0003f450: 2020 2020 2023 0a20 2020 2020 2020 2069       #.        i
+0003f460: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+0003f470: 7269 6e67 2874 7261 6e73 6665 722c 2027  ring(transfer, '
+0003f480: 7472 616e 4964 2729 0a20 2020 2020 2020  tranId').       
+0003f490: 2063 7572 7265 6e63 7949 6420 3d20 7365   currencyId = se
+0003f4a0: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
+0003f4b0: 7261 6e73 6665 722c 2027 6173 7365 7427  ransfer, 'asset'
+0003f4c0: 290a 2020 2020 2020 2020 636f 6465 203d  ).        code =
+0003f4d0: 2073 656c 662e 7361 6665 5f63 7572 7265   self.safe_curre
+0003f4e0: 6e63 795f 636f 6465 2863 7572 7265 6e63  ncy_code(currenc
+0003f4f0: 7949 642c 2063 7572 7265 6e63 7929 0a20  yId, currency). 
+0003f500: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
+0003f510: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0003f520: 2874 7261 6e73 6665 722c 2027 616d 6f75  (transfer, 'amou
+0003f530: 6e74 2729 0a20 2020 2020 2020 2074 7970  nt').        typ
+0003f540: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+0003f550: 7269 6e67 2874 7261 6e73 6665 722c 2027  ring(transfer, '
+0003f560: 7479 7065 2729 0a20 2020 2020 2020 2066  type').        f
+0003f570: 726f 6d41 6363 6f75 6e74 203d 204e 6f6e  romAccount = Non
+0003f580: 650a 2020 2020 2020 2020 746f 4163 636f  e.        toAcco
+0003f590: 756e 7420 3d20 4e6f 6e65 0a20 2020 2020  unt = None.     
+0003f5a0: 2020 2061 6363 6f75 6e74 7342 7949 6420     accountsById 
+0003f5b0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0003f5c0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
+0003f5d0: 2761 6363 6f75 6e74 7342 7949 6427 2c20  'accountsById', 
+0003f5e0: 7b7d 290a 2020 2020 2020 2020 6966 2074  {}).        if t
+0003f5f0: 7970 6520 6973 206e 6f74 204e 6f6e 653a  ype is not None:
+0003f600: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+0003f610: 7473 203d 2074 7970 652e 7370 6c69 7428  ts = type.split(
+0003f620: 275f 2729 0a20 2020 2020 2020 2020 2020  '_').           
+0003f630: 2066 726f 6d41 6363 6f75 6e74 203d 2073   fromAccount = s
+0003f640: 656c 662e 7361 6665 5f76 616c 7565 2870  elf.safe_value(p
+0003f650: 6172 7473 2c20 3029 0a20 2020 2020 2020  arts, 0).       
+0003f660: 2020 2020 2074 6f41 6363 6f75 6e74 203d       toAccount =
+0003f670: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0003f680: 2870 6172 7473 2c20 3129 0a20 2020 2020  (parts, 1).     
+0003f690: 2020 2020 2020 2066 726f 6d41 6363 6f75         fromAccou
+0003f6a0: 6e74 203d 2073 656c 662e 7361 6665 5f73  nt = self.safe_s
+0003f6b0: 7472 696e 6728 6163 636f 756e 7473 4279  tring(accountsBy
+0003f6c0: 4964 2c20 6672 6f6d 4163 636f 756e 742c  Id, fromAccount,
+0003f6d0: 2066 726f 6d41 6363 6f75 6e74 290a 2020   fromAccount).  
+0003f6e0: 2020 2020 2020 2020 2020 746f 4163 636f            toAcco
+0003f6f0: 756e 7420 3d20 7365 6c66 2e73 6166 655f  unt = self.safe_
+0003f700: 7374 7269 6e67 2861 6363 6f75 6e74 7342  string(accountsB
+0003f710: 7949 642c 2074 6f41 6363 6f75 6e74 2c20  yId, toAccount, 
+0003f720: 746f 4163 636f 756e 7429 0a20 2020 2020  toAccount).     
+0003f730: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
+0003f740: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+0003f750: 2874 7261 6e73 6665 722c 2027 7469 6d65  (transfer, 'time
+0003f760: 7374 616d 7027 290a 2020 2020 2020 2020  stamp').        
+0003f770: 7374 6174 7573 203d 2073 656c 662e 7061  status = self.pa
+0003f780: 7273 655f 7472 616e 7366 6572 5f73 7461  rse_transfer_sta
+0003f790: 7475 7328 7365 6c66 2e73 6166 655f 7374  tus(self.safe_st
+0003f7a0: 7269 6e67 2874 7261 6e73 6665 722c 2027  ring(transfer, '
+0003f7b0: 7374 6174 7573 2729 290a 2020 2020 2020  status')).      
+0003f7c0: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0003f7d0: 2020 2020 2020 2027 696e 666f 273a 2074         'info': t
+0003f7e0: 7261 6e73 6665 722c 0a20 2020 2020 2020  ransfer,.       
+0003f7f0: 2020 2020 2027 6964 273a 2069 642c 0a20       'id': id,. 
+0003f800: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0003f810: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+0003f820: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+0003f830: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+0003f840: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+0003f850: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
+0003f860: 2763 7572 7265 6e63 7927 3a20 636f 6465  'currency': code
+0003f870: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0003f880: 6d6f 756e 7427 3a20 616d 6f75 6e74 2c0a  mount': amount,.
+0003f890: 2020 2020 2020 2020 2020 2020 2766 726f              'fro
+0003f8a0: 6d41 6363 6f75 6e74 273a 2066 726f 6d41  mAccount': fromA
+0003f8b0: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
+0003f8c0: 2020 2020 2774 6f41 6363 6f75 6e74 273a      'toAccount':
+0003f8d0: 2074 6f41 6363 6f75 6e74 2c0a 2020 2020   toAccount,.    
+0003f8e0: 2020 2020 2020 2020 2773 7461 7475 7327          'status'
+0003f8f0: 3a20 7374 6174 7573 2c0a 2020 2020 2020  : status,.      
+0003f900: 2020 7d0a 0a20 2020 2064 6566 2070 6172    }..    def par
+0003f910: 7365 5f69 6e63 6f6d 6528 7365 6c66 2c20  se_income(self, 
+0003f920: 696e 636f 6d65 2c20 6d61 726b 6574 3d4e  income, market=N
+0003f930: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+0003f940: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0003f950: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003f960: 2273 796d 626f 6c22 3a20 2245 5448 5553  "symbol": "ETHUS
+0003f970: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0003f980: 2020 2020 2022 696e 636f 6d65 5479 7065       "incomeType
+0003f990: 223a 2022 4655 4e44 494e 475f 4645 4522  ": "FUNDING_FEE"
+0003f9a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003f9b0: 2020 2269 6e63 6f6d 6522 3a20 2230 2e30    "income": "0.0
+0003f9c0: 3031 3334 3331 3722 2c0a 2020 2020 2020  0134317",.      
+0003f9d0: 2020 2320 2020 2020 2020 2261 7373 6574    #       "asset
+0003f9e0: 223a 2022 5553 4454 222c 0a20 2020 2020  ": "USDT",.     
+0003f9f0: 2020 2023 2020 2020 2020 2022 7469 6d65     #       "time
+0003fa00: 223a 2022 3136 3231 3538 3430 3030 3030  ": "162158400000
+0003fa10: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0003fa20: 2020 2020 2269 6e66 6f22 3a20 2246 554e      "info": "FUN
+0003fa30: 4449 4e47 5f46 4545 222c 0a20 2020 2020  DING_FEE",.     
+0003fa40: 2020 2023 2020 2020 2020 2022 7472 616e     #       "tran
+0003fa50: 4964 223a 2022 3434 3830 3332 3139 3931  Id": "4480321991
+0003fa60: 3737 3430 3434 3538 3022 2c0a 2020 2020  774044580",.    
+0003fa70: 2020 2020 2320 2020 2020 2020 2274 7261      #       "tra
+0003fa80: 6465 4964 223a 2022 220a 2020 2020 2020  deId": "".      
+0003fa90: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0003faa0: 2020 230a 2020 2020 2020 2020 6d61 726b    #.        mark
+0003fab0: 6574 4964 203d 2073 656c 662e 7361 6665  etId = self.safe
+0003fac0: 5f73 7472 696e 6728 696e 636f 6d65 2c20  _string(income, 
+0003fad0: 2773 796d 626f 6c27 290a 2020 2020 2020  'symbol').      
+0003fae0: 2020 7379 6d62 6f6c 203d 2073 656c 662e    symbol = self.
+0003faf0: 7361 6665 5f73 796d 626f 6c28 6d61 726b  safe_symbol(mark
+0003fb00: 6574 4964 2c20 6d61 726b 6574 2c20 4e6f  etId, market, No
+0003fb10: 6e65 2c20 2773 7761 7027 290a 2020 2020  ne, 'swap').    
+0003fb20: 2020 2020 616d 6f75 6e74 203d 2073 656c      amount = sel
+0003fb30: 662e 7361 6665 5f6e 756d 6265 7228 696e  f.safe_number(in
+0003fb40: 636f 6d65 2c20 2769 6e63 6f6d 6527 290a  come, 'income').
+0003fb50: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0003fb60: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
+0003fb70: 7472 696e 6728 696e 636f 6d65 2c20 2761  tring(income, 'a
+0003fb80: 7373 6574 2729 0a20 2020 2020 2020 2063  sset').        c
+0003fb90: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
+0003fba0: 6375 7272 656e 6379 5f63 6f64 6528 6375  currency_code(cu
+0003fbb0: 7272 656e 6379 4964 290a 2020 2020 2020  rrencyId).      
+0003fbc0: 2020 6964 203d 2073 656c 662e 7361 6665    id = self.safe
+0003fbd0: 5f73 7472 696e 6728 696e 636f 6d65 2c20  _string(income, 
+0003fbe0: 2774 7261 6e49 6427 290a 2020 2020 2020  'tranId').      
+0003fbf0: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
+0003fc00: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
+0003fc10: 696e 636f 6d65 2c20 2774 696d 6527 290a  income, 'time').
+0003fc20: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0003fc30: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
+0003fc40: 666f 273a 2069 6e63 6f6d 652c 0a20 2020  fo': income,.   
+0003fc50: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
+0003fc60: 273a 2073 796d 626f 6c2c 0a20 2020 2020  ': symbol,.     
+0003fc70: 2020 2020 2020 2027 636f 6465 273a 2063         'code': c
+0003fc80: 6f64 652c 0a20 2020 2020 2020 2020 2020  ode,.           
+0003fc90: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
+0003fca0: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
+0003fcb0: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
+0003fcc0: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
+0003fcd0: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
+0003fce0: 2020 2020 2020 2769 6427 3a20 6964 2c0a        'id': id,.
+0003fcf0: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
+0003fd00: 756e 7427 3a20 616d 6f75 6e74 2c0a 2020  unt': amount,.  
+0003fd10: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
+0003fd20: 2074 7261 6e73 6665 7228 7365 6c66 2c20   transfer(self, 
+0003fd30: 636f 6465 3a20 7374 722c 2061 6d6f 756e  code: str, amoun
+0003fd40: 742c 2066 726f 6d41 6363 6f75 6e74 2c20  t, fromAccount, 
+0003fd50: 746f 4163 636f 756e 742c 2070 6172 616d  toAccount, param
+0003fd60: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+0003fd70: 2222 0a20 2020 2020 2020 2074 7261 6e73  "".        trans
+0003fd80: 6665 7220 6375 7272 656e 6379 2069 6e74  fer currency int
+0003fd90: 6572 6e61 6c6c 7920 6265 7477 6565 6e20  ernally between 
+0003fda0: 7761 6c6c 6574 7320 6f6e 2074 6865 2073  wallets on the s
+0003fdb0: 616d 6520 6163 636f 756e 740a 2020 2020  ame account.    
+0003fdc0: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
+0003fdd0: 6269 6e61 6e63 652d 646f 6373 2e67 6974  binance-docs.git
+0003fde0: 6875 622e 696f 2f61 7069 646f 6373 2f73  hub.io/apidocs/s
+0003fdf0: 706f 742f 656e 2f23 7573 6572 2d75 6e69  pot/en/#user-uni
+0003fe00: 7665 7273 616c 2d74 7261 6e73 6665 722d  versal-transfer-
+0003fe10: 7573 6572 5f64 6174 610a 2020 2020 2020  user_data.      
+0003fe20: 2020 7365 6520 6874 7470 733a 2f2f 6269    see https://bi
+0003fe30: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
+0003fe40: 622e 696f 2f61 7069 646f 6373 2f73 706f  b.io/apidocs/spo
+0003fe50: 742f 656e 2f23 6973 6f6c 6174 6564 2d6d  t/en/#isolated-m
+0003fe60: 6172 6769 6e2d 6163 636f 756e 742d 7472  argin-account-tr
+0003fe70: 616e 7366 6572 2d6d 6172 6769 6e0a 2020  ansfer-margin.  
+0003fe80: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0003fe90: 2063 6f64 653a 2075 6e69 6669 6564 2063   code: unified c
+0003fea0: 7572 7265 6e63 7920 636f 6465 0a20 2020  urrency code.   
+0003feb0: 2020 2020 203a 7061 7261 6d20 666c 6f61       :param floa
+0003fec0: 7420 616d 6f75 6e74 3a20 616d 6f75 6e74  t amount: amount
+0003fed0: 2074 6f20 7472 616e 7366 6572 0a20 2020   to transfer.   
+0003fee0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+0003fef0: 6672 6f6d 4163 636f 756e 743a 2061 6363  fromAccount: acc
+0003ff00: 6f75 6e74 2074 6f20 7472 616e 7366 6572  ount to transfer
+0003ff10: 2066 726f 6d0a 2020 2020 2020 2020 3a70   from.        :p
+0003ff20: 6172 616d 2073 7472 2074 6f41 6363 6f75  aram str toAccou
+0003ff30: 6e74 3a20 6163 636f 756e 7420 746f 2074  nt: account to t
+0003ff40: 7261 6e73 6665 7220 746f 0a20 2020 2020  ransfer to.     
+0003ff50: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+0003ff60: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+0003ff70: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+0003ff80: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
+0003ff90: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0003ffa0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+0003ffb0: 6374 3a20 6120 6074 7261 6e73 6665 7220  ct: a `transfer 
+0003ffc0: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+0003ffd0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+0003ffe0: 2f23 2f3f 6964 3d74 7261 6e73 6665 722d  /#/?id=transfer-
+0003fff0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+00040000: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00040010: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00040020: 7328 290a 2020 2020 2020 2020 6375 7272  s().        curr
+00040030: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
+00040040: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
+00040050: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00040060: 2020 2020 2020 2020 2020 2027 6173 7365             'asse
+00040070: 7427 3a20 6375 7272 656e 6379 5b27 6964  t': currency['id
+00040080: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+00040090: 2761 6d6f 756e 7427 3a20 7365 6c66 2e63  'amount': self.c
+000400a0: 7572 7265 6e63 795f 746f 5f70 7265 6369  urrency_to_preci
+000400b0: 7369 6f6e 2863 6f64 652c 2061 6d6f 756e  sion(code, amoun
+000400c0: 7429 2c0a 2020 2020 2020 2020 7d0a 2020  t),.        }.  
+000400d0: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
+000400e0: 7970 6527 5d20 3d20 7365 6c66 2e73 6166  ype'] = self.saf
+000400f0: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
+00040100: 2027 7479 7065 2729 0a20 2020 2020 2020   'type').       
+00040110: 206d 6574 686f 6420 3d20 2773 6170 6950   method = 'sapiP
+00040120: 6f73 7441 7373 6574 5472 616e 7366 6572  ostAssetTransfer
+00040130: 270a 2020 2020 2020 2020 6966 2072 6571  '.        if req
+00040140: 7565 7374 5b27 7479 7065 275d 2069 7320  uest['type'] is 
+00040150: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00040160: 2020 7379 6d62 6f6c 203d 2073 656c 662e    symbol = self.
+00040170: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
+00040180: 6d73 2c20 2773 796d 626f 6c27 290a 2020  ms, 'symbol').  
+00040190: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
+000401a0: 626f 6c20 6973 206e 6f74 204e 6f6e 653a  bol is not None:
+000401b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000401c0: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+000401d0: 6d69 7428 7061 7261 6d73 2c20 2773 796d  mit(params, 'sym
+000401e0: 626f 6c27 290a 2020 2020 2020 2020 2020  bol').          
+000401f0: 2020 6672 6f6d 4964 203d 2073 656c 662e    fromId = self.
+00040200: 636f 6e76 6572 745f 7479 7065 5f74 6f5f  convert_type_to_
+00040210: 6163 636f 756e 7428 6672 6f6d 4163 636f  account(fromAcco
+00040220: 756e 7429 2e75 7070 6572 2829 0a20 2020  unt).upper().   
+00040230: 2020 2020 2020 2020 2074 6f49 6420 3d20           toId = 
+00040240: 7365 6c66 2e63 6f6e 7665 7274 5f74 7970  self.convert_typ
+00040250: 655f 746f 5f61 6363 6f75 6e74 2874 6f41  e_to_account(toA
+00040260: 6363 6f75 6e74 292e 7570 7065 7228 290a  ccount).upper().
+00040270: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+00040280: 726f 6d49 6420 3d3d 2027 4953 4f4c 4154  romId == 'ISOLAT
+00040290: 4544 273a 0a20 2020 2020 2020 2020 2020  ED':.           
+000402a0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+000402b0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000402c0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000402d0: 6520 4172 6775 6d65 6e74 7352 6571 7569  e ArgumentsRequi
+000402e0: 7265 6428 7365 6c66 2e69 6420 2b20 2720  red(self.id + ' 
+000402f0: 7472 616e 7366 6572 2829 2072 6571 7569  transfer() requi
+00040300: 7265 7320 7061 7261 6d73 5b22 7379 6d62  res params["symb
+00040310: 6f6c 225d 2077 6865 6e20 6672 6f6d 4163  ol"] when fromAc
+00040320: 636f 756e 7420 6973 2027 202b 2066 726f  count is ' + fro
+00040330: 6d41 6363 6f75 6e74 290a 2020 2020 2020  mAccount).      
+00040340: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00040350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040360: 2020 2020 6672 6f6d 4964 203d 2073 656c      fromId = sel
+00040370: 662e 6d61 726b 6574 5f69 6428 7379 6d62  f.market_id(symb
+00040380: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+00040390: 6966 2074 6f49 6420 3d3d 2027 4953 4f4c  if toId == 'ISOL
+000403a0: 4154 4544 273a 0a20 2020 2020 2020 2020  ATED':.         
+000403b0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+000403c0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+000403d0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+000403e0: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
+000403f0: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
+00040400: 2720 7472 616e 7366 6572 2829 2072 6571  ' transfer() req
+00040410: 7569 7265 7320 7061 7261 6d73 5b22 7379  uires params["sy
+00040420: 6d62 6f6c 225d 2077 6865 6e20 746f 4163  mbol"] when toAc
+00040430: 636f 756e 7420 6973 2027 202b 2074 6f41  count is ' + toA
+00040440: 6363 6f75 6e74 290a 2020 2020 2020 2020  ccount).        
+00040450: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00040460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040470: 2020 746f 4964 203d 2073 656c 662e 6d61    toId = self.ma
+00040480: 726b 6574 5f69 6428 7379 6d62 6f6c 290a  rket_id(symbol).
+00040490: 2020 2020 2020 2020 2020 2020 6163 636f              acco
+000404a0: 756e 7473 4279 4964 203d 2073 656c 662e  untsById = self.
+000404b0: 7361 6665 5f76 616c 7565 2873 656c 662e  safe_value(self.
+000404c0: 6f70 7469 6f6e 732c 2027 6163 636f 756e  options, 'accoun
+000404d0: 7473 4279 4964 272c 207b 7d29 0a20 2020  tsById', {}).   
+000404e0: 2020 2020 2020 2020 2066 726f 6d49 736f           fromIso
+000404f0: 6c61 7465 6420 3d20 6e6f 7420 2866 726f  lated = not (fro
+00040500: 6d49 6420 696e 2061 6363 6f75 6e74 7342  mId in accountsB
+00040510: 7949 6429 0a20 2020 2020 2020 2020 2020  yId).           
+00040520: 2074 6f49 736f 6c61 7465 6420 3d20 6e6f   toIsolated = no
+00040530: 7420 2874 6f49 6420 696e 2061 6363 6f75  t (toId in accou
+00040540: 6e74 7342 7949 6429 0a20 2020 2020 2020  ntsById).       
+00040550: 2020 2020 2069 6620 6672 6f6d 4973 6f6c       if fromIsol
+00040560: 6174 6564 206f 7220 746f 4973 6f6c 6174  ated or toIsolat
+00040570: 6564 3a20 2023 2049 736f 6c61 7465 6420  ed:  # Isolated 
+00040580: 6d61 7267 696e 2074 7261 6e73 6665 720a  margin transfer.
+00040590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000405a0: 6672 6f6d 4675 7475 7265 203d 2066 726f  fromFuture = fro
+000405b0: 6d49 6420 3d3d 2027 554d 4655 5455 5245  mId == 'UMFUTURE
+000405c0: 2720 6f72 2066 726f 6d49 6420 3d3d 2027  ' or fromId == '
+000405d0: 434d 4655 5455 5245 270a 2020 2020 2020  CMFUTURE'.      
+000405e0: 2020 2020 2020 2020 2020 746f 4675 7475            toFutu
+000405f0: 7265 203d 2074 6f49 6420 3d3d 2027 554d  re = toId == 'UM
+00040600: 4655 5455 5245 2720 6f72 2074 6f49 6420  FUTURE' or toId 
+00040610: 3d3d 2027 434d 4655 5455 5245 270a 2020  == 'CMFUTURE'.  
+00040620: 2020 2020 2020 2020 2020 2020 2020 6672                fr
+00040630: 6f6d 5370 6f74 203d 2066 726f 6d49 6420  omSpot = fromId 
+00040640: 3d3d 2027 4d41 494e 270a 2020 2020 2020  == 'MAIN'.      
+00040650: 2020 2020 2020 2020 2020 746f 5370 6f74            toSpot
+00040660: 203d 2074 6f49 6420 3d3d 2027 4d41 494e   = toId == 'MAIN
+00040670: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+00040680: 2020 6675 6e64 696e 6720 3d20 6672 6f6d    funding = from
+00040690: 4964 203d 3d20 2746 554e 4449 4e47 2720  Id == 'FUNDING' 
+000406a0: 6f72 2074 6f49 6420 3d3d 2027 4655 4e44  or toId == 'FUND
+000406b0: 494e 4727 0a20 2020 2020 2020 2020 2020  ING'.           
+000406c0: 2020 2020 206d 696e 696e 6720 3d20 6672       mining = fr
+000406d0: 6f6d 4964 203d 3d20 274d 494e 494e 4727  omId == 'MINING'
+000406e0: 206f 7220 746f 4964 203d 3d20 274d 494e   or toId == 'MIN
+000406f0: 494e 4727 0a20 2020 2020 2020 2020 2020  ING'.           
+00040700: 2020 2020 206f 7074 696f 6e20 3d20 6672       option = fr
+00040710: 6f6d 4964 203d 3d20 274f 5054 494f 4e27  omId == 'OPTION'
+00040720: 206f 7220 746f 4964 203d 3d20 274f 5054   or toId == 'OPT
+00040730: 494f 4e27 0a20 2020 2020 2020 2020 2020  ION'.           
+00040740: 2020 2020 2070 726f 6869 6269 7465 6457       prohibitedW
+00040750: 6974 6849 736f 6c61 7465 6420 3d20 6672  ithIsolated = fr
+00040760: 6f6d 4675 7475 7265 206f 7220 746f 4675  omFuture or toFu
+00040770: 7475 7265 206f 7220 6d69 6e69 6e67 206f  ture or mining o
+00040780: 7220 6675 6e64 696e 6720 6f72 206f 7074  r funding or opt
+00040790: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+000407a0: 2020 2020 6966 2028 6672 6f6d 4973 6f6c      if (fromIsol
+000407b0: 6174 6564 206f 7220 746f 4973 6f6c 6174  ated or toIsolat
+000407c0: 6564 2920 616e 6420 7072 6f68 6962 6974  ed) and prohibit
+000407d0: 6564 5769 7468 4973 6f6c 6174 6564 3a0a  edWithIsolated:.
+000407e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000407f0: 2020 2020 7261 6973 6520 4261 6452 6571      raise BadReq
+00040800: 7565 7374 2873 656c 662e 6964 202b 2027  uest(self.id + '
+00040810: 2074 7261 6e73 6665 7228 2920 646f 6573   transfer() does
+00040820: 206e 6f74 2061 6c6c 6f77 2074 7261 6e73   not allow trans
+00040830: 6665 7273 2062 6574 7765 656e 2027 202b  fers between ' +
+00040840: 2066 726f 6d41 6363 6f75 6e74 202b 2027   fromAccount + '
+00040850: 2061 6e64 2027 202b 2074 6f41 6363 6f75   and ' + toAccou
+00040860: 6e74 290a 2020 2020 2020 2020 2020 2020  nt).            
+00040870: 2020 2020 656c 6966 2074 6f53 706f 7420      elif toSpot 
+00040880: 616e 6420 6672 6f6d 4973 6f6c 6174 6564  and fromIsolated
+00040890: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000408a0: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+000408b0: 7361 7069 506f 7374 4d61 7267 696e 4973  sapiPostMarginIs
+000408c0: 6f6c 6174 6564 5472 616e 7366 6572 270a  olatedTransfer'.
+000408d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000408e0: 2020 2020 7265 7175 6573 745b 2774 7261      request['tra
+000408f0: 6e73 4672 6f6d 275d 203d 2027 4953 4f4c  nsFrom'] = 'ISOL
+00040900: 4154 4544 5f4d 4152 4749 4e27 0a20 2020  ATED_MARGIN'.   
+00040910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040920: 2072 6571 7565 7374 5b27 7472 616e 7354   request['transT
+00040930: 6f27 5d20 3d20 2753 504f 5427 0a20 2020  o'] = 'SPOT'.   
+00040940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040950: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
+00040960: 275d 203d 2066 726f 6d49 640a 2020 2020  '] = fromId.    
+00040970: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00040980: 2066 726f 6d53 706f 7420 616e 6420 746f   fromSpot and to
+00040990: 4973 6f6c 6174 6564 3a0a 2020 2020 2020  Isolated:.      
+000409a0: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+000409b0: 7468 6f64 203d 2027 7361 7069 506f 7374  thod = 'sapiPost
+000409c0: 4d61 7267 696e 4973 6f6c 6174 6564 5472  MarginIsolatedTr
+000409d0: 616e 7366 6572 270a 2020 2020 2020 2020  ansfer'.        
+000409e0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000409f0: 6573 745b 2774 7261 6e73 4672 6f6d 275d  est['transFrom']
+00040a00: 203d 2027 5350 4f54 270a 2020 2020 2020   = 'SPOT'.      
+00040a10: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00040a20: 7175 6573 745b 2774 7261 6e73 546f 275d  quest['transTo']
+00040a30: 203d 2027 4953 4f4c 4154 4544 5f4d 4152   = 'ISOLATED_MAR
+00040a40: 4749 4e27 0a20 2020 2020 2020 2020 2020  GIN'.           
+00040a50: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00040a60: 5b27 7379 6d62 6f6c 275d 203d 2074 6f49  ['symbol'] = toI
+00040a70: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+00040a80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00040a90: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+00040aa0: 726f 6d49 736f 6c61 7465 643a 0a20 2020  romIsolated:.   
+00040ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040ac0: 2020 2020 2072 6571 7565 7374 5b27 6672       request['fr
+00040ad0: 6f6d 5379 6d62 6f6c 275d 203d 2066 726f  omSymbol'] = fro
+00040ae0: 6d49 640a 2020 2020 2020 2020 2020 2020  mId.            
+00040af0: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+00040b00: 4964 203d 2027 4953 4f4c 4154 4544 4d41  Id = 'ISOLATEDMA
+00040b10: 5247 494e 270a 2020 2020 2020 2020 2020  RGIN'.          
+00040b20: 2020 2020 2020 2020 2020 6966 2074 6f49            if toI
+00040b30: 736f 6c61 7465 643a 0a20 2020 2020 2020  solated:.       
+00040b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040b50: 2072 6571 7565 7374 5b27 746f 5379 6d62   request['toSymb
+00040b60: 6f6c 275d 203d 2074 6f49 640a 2020 2020  ol'] = toId.    
+00040b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040b80: 2020 2020 746f 4964 203d 2027 4953 4f4c      toId = 'ISOL
+00040b90: 4154 4544 4d41 5247 494e 270a 2020 2020  ATEDMARGIN'.    
+00040ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040bb0: 7265 7175 6573 745b 2774 7970 6527 5d20  request['type'] 
+00040bc0: 3d20 6672 6f6d 4964 202b 2027 5f27 202b  = fromId + '_' +
+00040bd0: 2074 6f49 640a 2020 2020 2020 2020 2020   toId.          
+00040be0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00040bf0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00040c00: 2774 7970 6527 5d20 3d20 6672 6f6d 4964  'type'] = fromId
+00040c10: 202b 2027 5f27 202b 2074 6f49 640a 2020   + '_' + toId.  
+00040c20: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
+00040c30: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
+00040c40: 2027 7479 7065 2729 0a20 2020 2020 2020   'type').       
+00040c50: 2072 6573 706f 6e73 6520 3d20 6765 7461   response = geta
+00040c60: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
+00040c70: 2928 7365 6c66 2e65 7874 656e 6428 7265  )(self.extend(re
+00040c80: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00040c90: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00040ca0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+00040cb0: 2020 2320 2020 2020 2020 2020 2274 7261    #         "tra
+00040cc0: 6e49 6422 3a31 3335 3236 3835 3336 3233  nId":13526853623
+00040cd0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+00040ce0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00040cf0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+00040d00: 6172 7365 5f74 7261 6e73 6665 7228 7265  arse_transfer(re
+00040d10: 7370 6f6e 7365 2c20 6375 7272 656e 6379  sponse, currency
+00040d20: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
+00040d30: 5f74 7261 6e73 6665 7273 2873 656c 662c  _transfers(self,
+00040d40: 2063 6f64 653a 204f 7074 696f 6e61 6c5b   code: Optional[
+00040d50: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
+00040d60: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
+00040d70: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
+00040d80: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00040d90: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00040da0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00040db0: 2020 2020 2020 2066 6574 6368 2061 2068         fetch a h
+00040dc0: 6973 746f 7279 206f 6620 696e 7465 726e  istory of intern
+00040dd0: 616c 2074 7261 6e73 6665 7273 206d 6164  al transfers mad
+00040de0: 6520 6f6e 2061 6e20 6163 636f 756e 740a  e on an account.
+00040df0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00040e00: 7472 7c4e 6f6e 6520 636f 6465 3a20 756e  tr|None code: un
+00040e10: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+00040e20: 6f64 6520 6f66 2074 6865 2063 7572 7265  ode of the curre
+00040e30: 6e63 7920 7472 616e 7366 6572 7265 640a  ncy transferred.
+00040e40: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00040e50: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
+00040e60: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
+00040e70: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+00040e80: 7472 616e 7366 6572 7320 666f 720a 2020  transfers for.  
+00040e90: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+00040ea0: 7c4e 6f6e 6520 6c69 6d69 743a 2074 6865  |None limit: the
+00040eb0: 206d 6178 696d 756d 206e 756d 6265 7220   maximum number 
+00040ec0: 6f66 2074 7261 6e73 6665 7273 2073 7472  of transfers str
+00040ed0: 7563 7475 7265 7320 746f 2072 6574 7269  uctures to retri
+00040ee0: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
+00040ef0: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+00040f00: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00040f10: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00040f20: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00040f30: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+00040f40: 6574 7572 6e73 205b 6469 6374 5d3a 2061  eturns [dict]: a
+00040f50: 206c 6973 7420 6f66 2060 7472 616e 7366   list of `transf
+00040f60: 6572 2073 7472 7563 7475 7265 7320 3c68  er structures <h
+00040f70: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00040f80: 2e63 6f6d 2f23 2f3f 6964 3d74 7261 6e73  .com/#/?id=trans
+00040f90: 6665 722d 7374 7275 6374 7572 653e 600a  fer-structure>`.
+00040fa0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00040fb0: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00040fc0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00040fd0: 6375 7272 656e 6379 203d 204e 6f6e 650a  currency = None.
+00040fe0: 2020 2020 2020 2020 6966 2063 6f64 6520          if code 
+00040ff0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00041000: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+00041010: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+00041020: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+00041030: 6465 6661 756c 7454 7970 6520 3d20 7365  defaultType = se
+00041040: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
+00041050: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
+00041060: 6665 7463 6854 7261 6e73 6665 7273 272c  fetchTransfers',
+00041070: 2027 6465 6661 756c 7454 7970 6527 2c20   'defaultType', 
+00041080: 2773 706f 7427 290a 2020 2020 2020 2020  'spot').        
+00041090: 6672 6f6d 4163 636f 756e 7420 3d20 7365  fromAccount = se
+000410a0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+000410b0: 6172 616d 732c 2027 6672 6f6d 4163 636f  arams, 'fromAcco
+000410c0: 756e 7427 2c20 6465 6661 756c 7454 7970  unt', defaultTyp
+000410d0: 6529 0a20 2020 2020 2020 2064 6566 6175  e).        defau
+000410e0: 6c74 546f 203d 2027 7370 6f74 2720 6966  ltTo = 'spot' if
+000410f0: 2028 6672 6f6d 4163 636f 756e 7420 3d3d   (fromAccount ==
+00041100: 2027 6675 7475 7265 2729 2065 6c73 6520   'future') else 
+00041110: 2766 7574 7572 6527 0a20 2020 2020 2020  'future'.       
+00041120: 2074 6f41 6363 6f75 6e74 203d 2073 656c   toAccount = sel
+00041130: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00041140: 7261 6d73 2c20 2774 6f41 6363 6f75 6e74  rams, 'toAccount
+00041150: 272c 2064 6566 6175 6c74 546f 290a 2020  ', defaultTo).  
+00041160: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
+00041170: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00041180: 7261 6d73 2c20 2774 7970 6527 290a 2020  rams, 'type').  
+00041190: 2020 2020 2020 6163 636f 756e 7473 4279        accountsBy
+000411a0: 5479 7065 203d 2073 656c 662e 7361 6665  Type = self.safe
+000411b0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
+000411c0: 6f6e 732c 2027 6163 636f 756e 7473 4279  ons, 'accountsBy
+000411d0: 5479 7065 272c 207b 7d29 0a20 2020 2020  Type', {}).     
+000411e0: 2020 2066 726f 6d49 6420 3d20 7365 6c66     fromId = self
+000411f0: 2e73 6166 655f 7374 7269 6e67 2861 6363  .safe_string(acc
+00041200: 6f75 6e74 7342 7954 7970 652c 2066 726f  ountsByType, fro
+00041210: 6d41 6363 6f75 6e74 290a 2020 2020 2020  mAccount).      
+00041220: 2020 746f 4964 203d 2073 656c 662e 7361    toId = self.sa
+00041230: 6665 5f73 7472 696e 6728 6163 636f 756e  fe_string(accoun
+00041240: 7473 4279 5479 7065 2c20 746f 4163 636f  tsByType, toAcco
+00041250: 756e 7429 0a20 2020 2020 2020 2069 6620  unt).        if 
+00041260: 7479 7065 2069 7320 4e6f 6e65 3a0a 2020  type is None:.  
+00041270: 2020 2020 2020 2020 2020 6966 2066 726f            if fro
+00041280: 6d49 6420 6973 204e 6f6e 653a 0a20 2020  mId is None:.   
+00041290: 2020 2020 2020 2020 2020 2020 206b 6579               key
+000412a0: 7320 3d20 6c69 7374 2861 6363 6f75 6e74  s = list(account
+000412b0: 7342 7954 7970 652e 6b65 7973 2829 290a  sByType.keys()).
+000412c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000412d0: 7261 6973 6520 4578 6368 616e 6765 4572  raise ExchangeEr
+000412e0: 726f 7228 7365 6c66 2e69 6420 2b20 2720  ror(self.id + ' 
+000412f0: 6672 6f6d 4163 636f 756e 7420 7061 7261  fromAccount para
+00041300: 6d65 7465 7220 6d75 7374 2062 6520 6f6e  meter must be on
+00041310: 6520 6f66 2027 202b 2027 2c20 272e 6a6f  e of ' + ', '.jo
+00041320: 696e 286b 6579 7329 290a 2020 2020 2020  in(keys)).      
+00041330: 2020 2020 2020 6966 2074 6f49 6420 6973        if toId is
+00041340: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00041350: 2020 2020 2020 206b 6579 7320 3d20 6c69         keys = li
+00041360: 7374 2861 6363 6f75 6e74 7342 7954 7970  st(accountsByTyp
+00041370: 652e 6b65 7973 2829 290a 2020 2020 2020  e.keys()).      
+00041380: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00041390: 4578 6368 616e 6765 4572 726f 7228 7365  ExchangeError(se
+000413a0: 6c66 2e69 6420 2b20 2720 746f 4163 636f  lf.id + ' toAcco
+000413b0: 756e 7420 7061 7261 6d65 7465 7220 6d75  unt parameter mu
+000413c0: 7374 2062 6520 6f6e 6520 6f66 2027 202b  st be one of ' +
+000413d0: 2027 2c20 272e 6a6f 696e 286b 6579 7329   ', '.join(keys)
+000413e0: 290a 2020 2020 2020 2020 2020 2020 7479  ).            ty
+000413f0: 7065 203d 2066 726f 6d49 6420 2b20 275f  pe = fromId + '_
+00041400: 2720 2b20 746f 4964 0a20 2020 2020 2020  ' + toId.       
+00041410: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+00041420: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
+00041430: 2074 7970 652c 0a20 2020 2020 2020 207d   type,.        }
+00041440: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
+00041450: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+00041460: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00041470: 7374 5b27 7374 6172 7454 696d 6527 5d20  st['startTime'] 
+00041480: 3d20 7369 6e63 650a 2020 2020 2020 2020  = since.        
+00041490: 6966 206c 696d 6974 2069 7320 6e6f 7420  if limit is not 
+000414a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000414b0: 2020 7265 7175 6573 745b 2773 697a 6527    request['size'
+000414c0: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
+000414d0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+000414e0: 662e 7361 7069 4765 7441 7373 6574 5472  f.sapiGetAssetTr
+000414f0: 616e 7366 6572 2873 656c 662e 6578 7465  ansfer(self.exte
+00041500: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00041510: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00041520: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00041530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041540: 2074 6f74 616c 3a20 332c 0a20 2020 2020   total: 3,.     
+00041550: 2020 2023 2020 2020 2020 2020 2072 6f77     #         row
+00041560: 733a 205b 0a20 2020 2020 2020 2023 2020  s: [.        #  
+00041570: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00041580: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041590: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+000415a0: 3a20 3136 3134 3634 3038 3738 3030 302c  : 1614640878000,
+000415b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000415c0: 2020 2020 2020 2020 2020 2061 7373 6574             asset
+000415d0: 3a20 2755 5344 5427 2c0a 2020 2020 2020  : 'USDT',.      
+000415e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000415f0: 2020 2020 616d 6f75 6e74 3a20 2732 3527      amount: '25'
+00041600: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00041610: 2020 2020 2020 2020 2020 2020 7479 7065              type
+00041620: 3a20 274d 4149 4e5f 554d 4655 5455 5245  : 'MAIN_UMFUTURE
+00041630: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00041640: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+00041650: 7475 733a 2027 434f 4e46 4952 4d45 4427  tus: 'CONFIRMED'
+00041660: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00041670: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+00041680: 4964 3a20 3433 3030 3031 3236 3234 380a  Id: 43000126248.
+00041690: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000416a0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+000416b0: 2023 2020 2020 2020 2020 205d 0a20 2020   #         ].   
+000416c0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+000416d0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+000416e0: 6f77 7320 3d20 7365 6c66 2e73 6166 655f  ows = self.safe_
+000416f0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
+00041700: 2772 6f77 7327 2c20 5b5d 290a 2020 2020  'rows', []).    
+00041710: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00041720: 7061 7273 655f 7472 616e 7366 6572 7328  parse_transfers(
+00041730: 726f 7773 2c20 6375 7272 656e 6379 2c20  rows, currency, 
+00041740: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+00041750: 2020 2064 6566 2066 6574 6368 5f64 6570     def fetch_dep
+00041760: 6f73 6974 5f61 6464 7265 7373 2873 656c  osit_address(sel
+00041770: 662c 2063 6f64 653a 2073 7472 2c20 7061  f, code: str, pa
+00041780: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00041790: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
+000417a0: 7463 6820 7468 6520 6465 706f 7369 7420  tch the deposit 
+000417b0: 6164 6472 6573 7320 666f 7220 6120 6375  address for a cu
+000417c0: 7272 656e 6379 2061 7373 6f63 6961 7465  rrency associate
+000417d0: 6420 7769 7468 2073 656c 6620 6163 636f  d with self acco
+000417e0: 756e 740a 2020 2020 2020 2020 3a70 6172  unt.        :par
+000417f0: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+00041800: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+00041810: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+00041820: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+00041830: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+00041840: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+00041850: 6269 6e61 6e63 6520 6170 6920 656e 6470  binance api endp
+00041860: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+00041870: 7475 726e 7320 6469 6374 3a20 616e 2060  turns dict: an `
+00041880: 6164 6472 6573 7320 7374 7275 6374 7572  address structur
+00041890: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+000418a0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d61  ccxt.com/#/?id=a
+000418b0: 6464 7265 7373 2d73 7472 7563 7475 7265  ddress-structure
+000418c0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+000418d0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+000418e0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+000418f0: 2020 2063 7572 7265 6e63 7920 3d20 7365     currency = se
+00041900: 6c66 2e63 7572 7265 6e63 7928 636f 6465  lf.currency(code
+00041910: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+00041920: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+00041930: 2020 2763 6f69 6e27 3a20 6375 7272 656e    'coin': curren
+00041940: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
+00041950: 2020 2020 2020 2320 276e 6574 776f 726b        # 'network
+00041960: 273a 2027 4554 4827 2c20 2023 2027 4253  ': 'ETH',  # 'BS
+00041970: 4327 2c20 2758 4d52 272c 2079 6f75 2063  C', 'XMR', you c
+00041980: 616e 2067 6574 206e 6574 776f 726b 2061  an get network a
+00041990: 6e64 2069 7344 6566 6175 6c74 2069 6e20  nd isDefault in 
+000419a0: 6e65 7477 6f72 6b4c 6973 7420 696e 2074  networkList in t
+000419b0: 6865 2072 6573 706f 6e73 6520 6f66 2073  he response of s
+000419c0: 6170 6947 6574 4361 7069 7461 6c43 6f6e  apiGetCapitalCon
+000419d0: 6669 6744 6574 6169 6c0a 2020 2020 2020  figDetail.      
+000419e0: 2020 7d0a 2020 2020 2020 2020 6e65 7477    }.        netw
+000419f0: 6f72 6b73 203d 2073 656c 662e 7361 6665  orks = self.safe
+00041a00: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
+00041a10: 6f6e 732c 2027 6e65 7477 6f72 6b73 272c  ons, 'networks',
+00041a20: 207b 7d29 0a20 2020 2020 2020 206e 6574   {}).        net
+00041a30: 776f 726b 203d 2073 656c 662e 7361 6665  work = self.safe
+00041a40: 5f73 7472 696e 675f 7570 7065 7228 7061  _string_upper(pa
+00041a50: 7261 6d73 2c20 276e 6574 776f 726b 2729  rams, 'network')
+00041a60: 2020 2320 7365 6c66 206c 696e 6520 616c    # self line al
+00041a70: 6c6f 7773 2074 6865 2075 7365 7220 746f  lows the user to
+00041a80: 2073 7065 6369 6679 2065 6974 6865 7220   specify either 
+00041a90: 4552 4332 3020 6f72 2045 5448 0a20 2020  ERC20 or ETH.   
+00041aa0: 2020 2020 206e 6574 776f 726b 203d 2073       network = s
+00041ab0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00041ac0: 6e65 7477 6f72 6b73 2c20 6e65 7477 6f72  networks, networ
+00041ad0: 6b2c 206e 6574 776f 726b 2920 2023 2068  k, network)  # h
+00041ae0: 616e 646c 6520 4552 4332 303e 4554 4820  andle ERC20>ETH 
+00041af0: 616c 6961 730a 2020 2020 2020 2020 6966  alias.        if
+00041b00: 206e 6574 776f 726b 2069 7320 6e6f 7420   network is not 
+00041b10: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00041b20: 2020 7265 7175 6573 745b 276e 6574 776f    request['netwo
+00041b30: 726b 275d 203d 206e 6574 776f 726b 0a20  rk'] = network. 
+00041b40: 2020 2020 2020 2020 2020 2070 6172 616d             param
+00041b50: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+00041b60: 7261 6d73 2c20 276e 6574 776f 726b 2729  rams, 'network')
+00041b70: 0a20 2020 2020 2020 2023 2068 6173 2073  .        # has s
+00041b80: 7570 706f 7274 2066 6f72 2074 6865 2027  upport for the '
+00041b90: 6e65 7477 6f72 6b27 2070 6172 616d 6574  network' paramet
+00041ba0: 6572 0a20 2020 2020 2020 2023 2068 7474  er.        # htt
+00041bb0: 7073 3a2f 2f62 696e 616e 6365 2d64 6f63  ps://binance-doc
+00041bc0: 732e 6769 7468 7562 2e69 6f2f 6170 6964  s.github.io/apid
+00041bd0: 6f63 732f 7370 6f74 2f65 6e2f 2364 6570  ocs/spot/en/#dep
+00041be0: 6f73 6974 2d61 6464 7265 7373 2d73 7570  osit-address-sup
+00041bf0: 706f 7274 696e 672d 6e65 7477 6f72 6b2d  porting-network-
+00041c00: 7573 6572 5f64 6174 610a 2020 2020 2020  user_data.      
+00041c10: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+00041c20: 662e 7361 7069 4765 7443 6170 6974 616c  f.sapiGetCapital
+00041c30: 4465 706f 7369 7441 6464 7265 7373 2873  DepositAddress(s
+00041c40: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+00041c50: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00041c60: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00041c70: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00041c80: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+00041c90: 793a 2027 5852 5027 2c0a 2020 2020 2020  y: 'XRP',.      
+00041ca0: 2020 2320 2020 2020 2020 2020 6164 6472    #         addr
+00041cb0: 6573 733a 2027 7245 6238 544b 3367 4267  ess: 'rEb8TK3gBg
+00041cc0: 6b35 6175 5a6b 7763 3673 486e 7772 4756  k5auZkwc6sHnwrGV
+00041cd0: 4a48 3844 7561 4c68 272c 0a20 2020 2020  JH8DuaLh',.     
+00041ce0: 2020 2023 2020 2020 2020 2020 2074 6167     #         tag
+00041cf0: 3a20 2731 3038 3631 3832 3632 272c 0a20  : '108618262',. 
+00041d00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041d10: 2069 6e66 6f3a 207b 0a20 2020 2020 2020   info: {.       
+00041d20: 2023 2020 2020 2020 2020 2020 2020 2063   #             c
+00041d30: 6f69 6e3a 2027 5852 5027 2c0a 2020 2020  oin: 'XRP',.    
+00041d40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00041d50: 2020 6164 6472 6573 733a 2027 7245 6238    address: 'rEb8
+00041d60: 544b 3367 4267 6b35 6175 5a6b 7763 3673  TK3gBgk5auZkwc6s
+00041d70: 486e 7772 4756 4a48 3844 7561 4c68 272c  HnwrGVJH8DuaLh',
+00041d80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00041d90: 2020 2020 2020 2074 6167 3a20 2731 3038         tag: '108
+00041da0: 3631 3832 3632 272c 0a20 2020 2020 2020  618262',.       
+00041db0: 2023 2020 2020 2020 2020 2020 2020 2075   #             u
+00041dc0: 726c 3a20 2768 7474 7073 3a2f 2f62 6974  rl: 'https://bit
+00041dd0: 686f 6d70 2e63 6f6d 2f65 7870 6c6f 7265  homp.com/explore
+00041de0: 722f 7245 6238 544b 3367 4267 6b35 6175  r/rEb8TK3gBgk5au
+00041df0: 5a6b 7763 3673 486e 7772 4756 4a48 3844  Zkwc6sHnwrGVJH8D
+00041e00: 7561 4c68 270a 2020 2020 2020 2020 2320  uaLh'.        # 
+00041e10: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00041e20: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00041e30: 2020 230a 2020 2020 2020 2020 6164 6472    #.        addr
+00041e40: 6573 7320 3d20 7365 6c66 2e73 6166 655f  ess = self.safe_
+00041e50: 7374 7269 6e67 2872 6573 706f 6e73 652c  string(response,
+00041e60: 2027 6164 6472 6573 7327 290a 2020 2020   'address').    
+00041e70: 2020 2020 7572 6c20 3d20 7365 6c66 2e73      url = self.s
+00041e80: 6166 655f 7374 7269 6e67 2872 6573 706f  afe_string(respo
+00041e90: 6e73 652c 2027 7572 6c27 290a 2020 2020  nse, 'url').    
+00041ea0: 2020 2020 696d 706c 6965 644e 6574 776f      impliedNetwo
+00041eb0: 726b 203d 204e 6f6e 650a 2020 2020 2020  rk = None.      
+00041ec0: 2020 6966 2075 726c 2069 7320 6e6f 7420    if url is not 
+00041ed0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00041ee0: 2020 7265 7665 7273 654e 6574 776f 726b    reverseNetwork
+00041ef0: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+00041f00: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
+00041f10: 2c20 2772 6576 6572 7365 4e65 7477 6f72  , 'reverseNetwor
+00041f20: 6b73 272c 207b 7d29 0a20 2020 2020 2020  ks', {}).       
+00041f30: 2020 2020 2070 6172 7473 203d 2075 726c       parts = url
+00041f40: 2e73 706c 6974 2827 2f27 290a 2020 2020  .split('/').    
+00041f50: 2020 2020 2020 2020 746f 704c 6576 656c          topLevel
+00041f60: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00041f70: 696e 6728 7061 7274 732c 2032 290a 2020  ing(parts, 2).  
+00041f80: 2020 2020 2020 2020 2020 6966 2028 746f            if (to
+00041f90: 704c 6576 656c 203d 3d20 2762 6c6f 636b  pLevel == 'block
+00041fa0: 6368 6169 722e 636f 6d27 2920 6f72 2028  chair.com') or (
+00041fb0: 746f 704c 6576 656c 203d 3d20 2776 6965  topLevel == 'vie
+00041fc0: 7762 6c6f 636b 2e69 6f27 293a 0a20 2020  wblock.io'):.   
+00041fd0: 2020 2020 2020 2020 2020 2020 2073 7562               sub
+00041fe0: 4c65 7665 6c20 3d20 7365 6c66 2e73 6166  Level = self.saf
+00041ff0: 655f 7374 7269 6e67 2870 6172 7473 2c20  e_string(parts, 
+00042000: 3329 0a20 2020 2020 2020 2020 2020 2020  3).             
+00042010: 2020 2069 6620 7375 624c 6576 656c 2069     if subLevel i
+00042020: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00042030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042040: 746f 704c 6576 656c 203d 2074 6f70 4c65  topLevel = topLe
+00042050: 7665 6c20 2b20 272f 2720 2b20 7375 624c  vel + '/' + subL
+00042060: 6576 656c 0a20 2020 2020 2020 2020 2020  evel.           
+00042070: 2069 6d70 6c69 6564 4e65 7477 6f72 6b20   impliedNetwork 
+00042080: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00042090: 6e67 2872 6576 6572 7365 4e65 7477 6f72  ng(reverseNetwor
+000420a0: 6b73 2c20 746f 704c 6576 656c 290a 2020  ks, topLevel).  
+000420b0: 2020 2020 2020 2020 2020 696d 706c 6965            implie
+000420c0: 644e 6574 776f 726b 7320 3d20 7365 6c66  dNetworks = self
+000420d0: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
+000420e0: 2e6f 7074 696f 6e73 2c20 2769 6d70 6c69  .options, 'impli
+000420f0: 6564 4e65 7477 6f72 6b73 272c 207b 0a20  edNetworks', {. 
+00042100: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00042110: 4554 4827 3a20 7b27 4552 4332 3027 3a20  ETH': {'ERC20': 
+00042120: 2745 5448 277d 2c0a 2020 2020 2020 2020  'ETH'},.        
+00042130: 2020 2020 2020 2020 2754 5258 273a 207b          'TRX': {
+00042140: 2754 5243 3230 273a 2027 5452 5827 7d2c  'TRC20': 'TRX'},
+00042150: 0a20 2020 2020 2020 2020 2020 207d 290a  .            }).
+00042160: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+00042170: 6f64 6520 696e 2069 6d70 6c69 6564 4e65  ode in impliedNe
+00042180: 7477 6f72 6b73 3a0a 2020 2020 2020 2020  tworks:.        
+00042190: 2020 2020 2020 2020 636f 6e76 6572 7369          conversi
+000421a0: 6f6e 203d 2073 656c 662e 7361 6665 5f76  on = self.safe_v
+000421b0: 616c 7565 2869 6d70 6c69 6564 4e65 7477  alue(impliedNetw
+000421c0: 6f72 6b73 2c20 636f 6465 2c20 7b7d 290a  orks, code, {}).
+000421d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000421e0: 696d 706c 6965 644e 6574 776f 726b 203d  impliedNetwork =
+000421f0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00042200: 6728 636f 6e76 6572 7369 6f6e 2c20 696d  g(conversion, im
+00042210: 706c 6965 644e 6574 776f 726b 2c20 696d  pliedNetwork, im
+00042220: 706c 6965 644e 6574 776f 726b 290a 2020  pliedNetwork).  
+00042230: 2020 2020 2020 7461 6720 3d20 7365 6c66        tag = self
+00042240: 2e73 6166 655f 7374 7269 6e67 2872 6573  .safe_string(res
+00042250: 706f 6e73 652c 2027 7461 6727 2c20 2727  ponse, 'tag', ''
+00042260: 290a 2020 2020 2020 2020 6966 206c 656e  ).        if len
+00042270: 2874 6167 2920 3d3d 2030 3a0a 2020 2020  (tag) == 0:.    
+00042280: 2020 2020 2020 2020 7461 6720 3d20 4e6f          tag = No
+00042290: 6e65 0a20 2020 2020 2020 2073 656c 662e  ne.        self.
+000422a0: 6368 6563 6b5f 6164 6472 6573 7328 6164  check_address(ad
+000422b0: 6472 6573 7329 0a20 2020 2020 2020 2072  dress).        r
+000422c0: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
+000422d0: 2020 2020 2763 7572 7265 6e63 7927 3a20      'currency': 
+000422e0: 636f 6465 2c0a 2020 2020 2020 2020 2020  code,.          
+000422f0: 2020 2761 6464 7265 7373 273a 2061 6464    'address': add
+00042300: 7265 7373 2c0a 2020 2020 2020 2020 2020  ress,.          
+00042310: 2020 2774 6167 273a 2074 6167 2c0a 2020    'tag': tag,.  
+00042320: 2020 2020 2020 2020 2020 276e 6574 776f            'netwo
+00042330: 726b 273a 2069 6d70 6c69 6564 4e65 7477  rk': impliedNetw
+00042340: 6f72 6b2c 0a20 2020 2020 2020 2020 2020  ork,.           
+00042350: 2027 696e 666f 273a 2072 6573 706f 6e73   'info': respons
+00042360: 652c 0a20 2020 2020 2020 207d 0a0a 2020  e,.        }..  
+00042370: 2020 6465 6620 6665 7463 685f 7472 616e    def fetch_tran
+00042380: 7361 6374 696f 6e5f 6665 6573 2873 656c  saction_fees(sel
+00042390: 662c 2063 6f64 6573 3d4e 6f6e 652c 2070  f, codes=None, p
+000423a0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+000423b0: 2020 2022 2222 0a20 2020 2020 2020 202a     """.        *
+000423c0: 4445 5052 4543 4154 4544 2a20 706c 6561  DEPRECATED* plea
+000423d0: 7365 2075 7365 2066 6574 6368 4465 706f  se use fetchDepo
+000423e0: 7369 7457 6974 6864 7261 7746 6565 7320  sitWithdrawFees 
+000423f0: 696e 7374 6561 640a 2020 2020 2020 2020  instead.        
+00042400: 3a70 6172 616d 205b 7374 725d 7c4e 6f6e  :param [str]|Non
+00042410: 6520 636f 6465 733a 206e 6f74 2075 7365  e codes: not use
+00042420: 6420 6279 2062 696e 616e 6365 2066 6574  d by binance fet
+00042430: 6368 5472 616e 7361 6374 696f 6e46 6565  chTransactionFee
+00042440: 7328 290a 2020 2020 2020 2020 3a70 6172  s().        :par
+00042450: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+00042460: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00042470: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00042480: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00042490: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+000424a0: 6574 7572 6e73 205b 6469 6374 5d3a 2061  eturns [dict]: a
+000424b0: 206c 6973 7420 6f66 2060 6665 6520 7374   list of `fee st
+000424c0: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
+000424d0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+000424e0: 232f 3f69 643d 6665 652d 7374 7275 6374  #/?id=fee-struct
+000424f0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
+00042500: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
+00042510: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00042520: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00042530: 2073 656c 662e 7361 7069 4765 7443 6170   self.sapiGetCap
+00042540: 6974 616c 436f 6e66 6967 4765 7461 6c6c  italConfigGetall
+00042550: 2870 6172 616d 7329 0a20 2020 2020 2020  (params).       
+00042560: 2023 0a20 2020 2020 2020 2023 2020 5b0a   #.        #  [.
+00042570: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00042580: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00042590: 636f 696e 3a20 2742 4154 272c 0a20 2020  coin: 'BAT',.   
+000425a0: 2020 2020 2023 2020 2020 2020 2064 6570       #       dep
+000425b0: 6f73 6974 416c 6c45 6e61 626c 653a 2054  ositAllEnable: T
+000425c0: 7275 652c 0a20 2020 2020 2020 2023 2020  rue,.        #  
+000425d0: 2020 2020 2077 6974 6864 7261 7741 6c6c       withdrawAll
+000425e0: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
+000425f0: 2020 2020 2020 2320 2020 2020 2020 6e61        #       na
+00042600: 6d65 3a20 2742 6173 6963 2041 7474 656e  me: 'Basic Atten
+00042610: 7469 6f6e 2054 6f6b 656e 272c 0a20 2020  tion Token',.   
+00042620: 2020 2020 2023 2020 2020 2020 2066 7265       #       fre
+00042630: 653a 2027 3027 2c0a 2020 2020 2020 2020  e: '0',.        
+00042640: 2320 2020 2020 2020 6c6f 636b 6564 3a20  #       locked: 
+00042650: 2730 272c 0a20 2020 2020 2020 2023 2020  '0',.        #  
+00042660: 2020 2020 2066 7265 657a 653a 2027 3027       freeze: '0'
+00042670: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042680: 2020 7769 7468 6472 6177 696e 673a 2027    withdrawing: '
+00042690: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
+000426a0: 2020 2020 6970 6f69 6e67 3a20 2730 272c      ipoing: '0',
+000426b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000426c0: 2069 706f 6162 6c65 3a20 2730 272c 0a20   ipoable: '0',. 
+000426d0: 2020 2020 2020 2023 2020 2020 2020 2073         #       s
+000426e0: 746f 7261 6765 3a20 2730 272c 0a20 2020  torage: '0',.   
+000426f0: 2020 2020 2023 2020 2020 2020 2069 734c       #       isL
+00042700: 6567 616c 4d6f 6e65 793a 2046 616c 7365  egalMoney: False
+00042710: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042720: 2020 7472 6164 696e 673a 2054 7275 652c    trading: True,
+00042730: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042740: 206e 6574 776f 726b 4c69 7374 3a20 5b0a   networkList: [.
+00042750: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00042760: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00042770: 2020 2020 2020 2020 6e65 7477 6f72 6b3a          network:
+00042780: 2027 424e 4227 2c0a 2020 2020 2020 2020   'BNB',.        
+00042790: 2320 2020 2020 2020 2020 2020 636f 696e  #           coin
+000427a0: 3a20 2742 4154 272c 0a20 2020 2020 2020  : 'BAT',.       
+000427b0: 2023 2020 2020 2020 2020 2020 2077 6974   #           wit
+000427c0: 6864 7261 7749 6e74 6567 6572 4d75 6c74  hdrawIntegerMult
+000427d0: 6970 6c65 3a20 2730 2e30 3030 3030 3030  iple: '0.0000000
+000427e0: 3127 2c0a 2020 2020 2020 2020 2320 2020  1',.        #   
+000427f0: 2020 2020 2020 2020 6973 4465 6661 756c          isDefaul
+00042800: 743a 2046 616c 7365 2c0a 2020 2020 2020  t: False,.      
+00042810: 2020 2320 2020 2020 2020 2020 2020 6465    #           de
+00042820: 706f 7369 7445 6e61 626c 653a 2054 7275  positEnable: Tru
+00042830: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+00042840: 2020 2020 2020 2077 6974 6864 7261 7745         withdrawE
+00042850: 6e61 626c 653a 2054 7275 652c 0a20 2020  nable: True,.   
+00042860: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00042870: 2064 6570 6f73 6974 4465 7363 3a20 2727   depositDesc: ''
+00042880: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042890: 2020 2020 2020 7769 7468 6472 6177 4465        withdrawDe
+000428a0: 7363 3a20 2727 2c0a 2020 2020 2020 2020  sc: '',.        
+000428b0: 2320 2020 2020 2020 2020 2020 7370 6563  #           spec
+000428c0: 6961 6c54 6970 733a 2027 5468 6520 6e61  ialTips: 'The na
+000428d0: 6d65 206f 6620 7365 6c66 2061 7373 6574  me of self asset
+000428e0: 2069 7320 4261 7369 6320 4174 7465 6e74   is Basic Attent
+000428f0: 696f 6e20 546f 6b65 6e28 4241 5429 2e20  ion Token(BAT). 
+00042900: 426f 7468 2061 204d 454d 4f20 616e 6420  Both a MEMO and 
+00042910: 616e 2041 6464 7265 7373 2061 7265 2072  an Address are r
+00042920: 6571 7569 7265 6420 746f 2073 7563 6365  equired to succe
+00042930: 7373 6675 6c6c 7920 6465 706f 7369 7420  ssfully deposit 
+00042940: 796f 7572 2042 4550 3220 746f 6b65 6e73  your BEP2 tokens
+00042950: 2074 6f20 4269 6e61 6e63 652e 272c 0a20   to Binance.',. 
+00042960: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042970: 2020 206e 616d 653a 2027 4245 5032 272c     name: 'BEP2',
+00042980: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042990: 2020 2020 2072 6573 6574 4164 6472 6573       resetAddres
+000429a0: 7353 7461 7475 733a 2046 616c 7365 2c0a  sStatus: False,.
+000429b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000429c0: 2020 2020 6164 6472 6573 7352 6567 6578      addressRegex
+000429d0: 3a20 275e 2862 6e62 3129 5b30 2d39 612d  : '^(bnb1)[0-9a-
+000429e0: 7a5d 7b33 387d 2427 2c0a 2020 2020 2020  z]{38}$',.      
+000429f0: 2020 2320 2020 2020 2020 2020 2020 6d65    #           me
+00042a00: 6d6f 5265 6765 783a 2027 5e5b 302d 3941  moRegex: '^[0-9A
+00042a10: 2d5a 612d 7a5c 5c2d 5f5d 7b31 2c31 3230  -Za-z\\-_]{1,120
+00042a20: 7d24 272c 0a20 2020 2020 2020 2023 2020  }$',.        #  
+00042a30: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
+00042a40: 7746 6565 3a20 2730 2e32 3727 2c0a 2020  wFee: '0.27',.  
+00042a50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042a60: 2020 7769 7468 6472 6177 4d69 6e3a 2027    withdrawMin: '
+00042a70: 302e 3534 272c 0a20 2020 2020 2020 2023  0.54',.        #
+00042a80: 2020 2020 2020 2020 2020 2077 6974 6864             withd
+00042a90: 7261 774d 6178 3a20 2731 3030 3030 3030  rawMax: '1000000
+00042aa0: 3030 3030 272c 0a20 2020 2020 2020 2023  0000',.        #
+00042ab0: 2020 2020 2020 2020 2020 206d 696e 436f             minCo
+00042ac0: 6e66 6972 6d3a 2027 3127 2c0a 2020 2020  nfirm: '1',.    
+00042ad0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00042ae0: 756e 4c6f 636b 436f 6e66 6972 6d3a 2027  unLockConfirm: '
+00042af0: 3027 0a20 2020 2020 2020 2023 2020 2020  0'.        #    
+00042b00: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00042b10: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
+00042b20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00042b30: 6e65 7477 6f72 6b3a 2027 4253 4327 2c0a  network: 'BSC',.
+00042b40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00042b50: 2020 2020 636f 696e 3a20 2742 4154 272c      coin: 'BAT',
+00042b60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042b70: 2020 2020 2077 6974 6864 7261 7749 6e74       withdrawInt
+00042b80: 6567 6572 4d75 6c74 6970 6c65 3a20 2730  egerMultiple: '0
+00042b90: 2e30 3030 3030 3030 3127 2c0a 2020 2020  .00000001',.    
+00042ba0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00042bb0: 6973 4465 6661 756c 743a 2046 616c 7365  isDefault: False
+00042bc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042bd0: 2020 2020 2020 6465 706f 7369 7445 6e61        depositEna
+00042be0: 626c 653a 2054 7275 652c 0a20 2020 2020  ble: True,.     
+00042bf0: 2020 2023 2020 2020 2020 2020 2020 2077     #           w
+00042c00: 6974 6864 7261 7745 6e61 626c 653a 2054  ithdrawEnable: T
+00042c10: 7275 652c 0a20 2020 2020 2020 2023 2020  rue,.        #  
+00042c20: 2020 2020 2020 2020 2064 6570 6f73 6974           deposit
+00042c30: 4465 7363 3a20 2727 2c0a 2020 2020 2020  Desc: '',.      
+00042c40: 2020 2320 2020 2020 2020 2020 2020 7769    #           wi
+00042c50: 7468 6472 6177 4465 7363 3a20 2727 2c0a  thdrawDesc: '',.
+00042c60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00042c70: 2020 2020 7370 6563 6961 6c54 6970 733a      specialTips:
+00042c80: 2027 5468 6520 6e61 6d65 206f 6620 7365   'The name of se
+00042c90: 6c66 2061 7373 6574 2069 7320 4261 7369  lf asset is Basi
+00042ca0: 6320 4174 7465 6e74 696f 6e20 546f 6b65  c Attention Toke
+00042cb0: 6e2e 2050 6c65 6173 6520 656e 7375 7265  n. Please ensure
+00042cc0: 2079 6f75 2061 7265 2064 6570 6f73 6974   you are deposit
+00042cd0: 696e 6720 4261 7369 6320 4174 7465 6e74  ing Basic Attent
+00042ce0: 696f 6e20 546f 6b65 6e28 4241 5429 2074  ion Token(BAT) t
+00042cf0: 6f6b 656e 7320 756e 6465 7220 7468 6520  okens under the 
+00042d00: 636f 6e74 7261 6374 2061 6464 7265 7373  contract address
+00042d10: 2065 6e64 696e 6720 696e 2039 3736 3665   ending in 9766e
+00042d20: 2e27 2c0a 2020 2020 2020 2020 2320 2020  .',.        #   
+00042d30: 2020 2020 2020 2020 6e61 6d65 3a20 2742          name: 'B
+00042d40: 4550 3230 2842 5343 2927 2c0a 2020 2020  EP20(BSC)',.    
+00042d50: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00042d60: 7265 7365 7441 6464 7265 7373 5374 6174  resetAddressStat
+00042d70: 7573 3a20 4661 6c73 652c 0a20 2020 2020  us: False,.     
+00042d80: 2020 2023 2020 2020 2020 2020 2020 2061     #           a
+00042d90: 6464 7265 7373 5265 6765 783a 2027 5e28  ddressRegex: '^(
+00042da0: 3078 295b 302d 3941 2d46 612d 665d 7b34  0x)[0-9A-Fa-f]{4
+00042db0: 307d 2427 2c0a 2020 2020 2020 2020 2320  0}$',.        # 
+00042dc0: 2020 2020 2020 2020 2020 6d65 6d6f 5265            memoRe
+00042dd0: 6765 783a 2027 272c 0a20 2020 2020 2020  gex: '',.       
+00042de0: 2023 2020 2020 2020 2020 2020 2077 6974   #           wit
+00042df0: 6864 7261 7746 6565 3a20 2730 2e32 3727  hdrawFee: '0.27'
+00042e00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042e10: 2020 2020 2020 7769 7468 6472 6177 4d69        withdrawMi
+00042e20: 6e3a 2027 302e 3534 272c 0a20 2020 2020  n: '0.54',.     
+00042e30: 2020 2023 2020 2020 2020 2020 2020 2077     #           w
+00042e40: 6974 6864 7261 774d 6178 3a20 2731 3030  ithdrawMax: '100
+00042e50: 3030 3030 3030 3030 272c 0a20 2020 2020  00000000',.     
+00042e60: 2020 2023 2020 2020 2020 2020 2020 206d     #           m
+00042e70: 696e 436f 6e66 6972 6d3a 2027 3135 272c  inConfirm: '15',
+00042e80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042e90: 2020 2020 2075 6e4c 6f63 6b43 6f6e 6669       unLockConfi
+00042ea0: 726d 3a20 2730 270a 2020 2020 2020 2020  rm: '0'.        
+00042eb0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
+00042ec0: 2020 2020 2023 2020 2020 2020 2020 207b       #         {
+00042ed0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042ee0: 2020 2020 206e 6574 776f 726b 3a20 2745       network: 'E
+00042ef0: 5448 272c 0a20 2020 2020 2020 2023 2020  TH',.        #  
+00042f00: 2020 2020 2020 2020 2063 6f69 6e3a 2027           coin: '
+00042f10: 4241 5427 2c0a 2020 2020 2020 2020 2320  BAT',.        # 
+00042f20: 2020 2020 2020 2020 2020 7769 7468 6472            withdr
+00042f30: 6177 496e 7465 6765 724d 756c 7469 706c  awIntegerMultipl
+00042f40: 653a 2027 302e 3030 3030 3030 3031 272c  e: '0.00000001',
+00042f50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042f60: 2020 2020 2069 7344 6566 6175 6c74 3a20       isDefault: 
+00042f70: 5472 7565 2c0a 2020 2020 2020 2020 2320  True,.        # 
+00042f80: 2020 2020 2020 2020 2020 6465 706f 7369            deposi
+00042f90: 7445 6e61 626c 653a 2054 7275 652c 0a20  tEnable: True,. 
+00042fa0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042fb0: 2020 2077 6974 6864 7261 7745 6e61 626c     withdrawEnabl
+00042fc0: 653a 2054 7275 652c 0a20 2020 2020 2020  e: True,.       
+00042fd0: 2023 2020 2020 2020 2020 2020 2064 6570   #           dep
+00042fe0: 6f73 6974 4465 7363 3a20 2727 2c0a 2020  ositDesc: '',.  
+00042ff0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00043000: 2020 7769 7468 6472 6177 4465 7363 3a20    withdrawDesc: 
+00043010: 2727 2c0a 2020 2020 2020 2020 2320 2020  '',.        #   
+00043020: 2020 2020 2020 2020 7370 6563 6961 6c54          specialT
+00043030: 6970 733a 2027 5468 6520 6e61 6d65 206f  ips: 'The name o
+00043040: 6620 7365 6c66 2061 7373 6574 2069 7320  f self asset is 
+00043050: 4261 7369 6320 4174 7465 6e74 696f 6e20  Basic Attention 
+00043060: 546f 6b65 6e2e 2050 6c65 6173 6520 656e  Token. Please en
+00043070: 7375 7265 2079 6f75 2061 7265 2064 6570  sure you are dep
+00043080: 6f73 6974 696e 6720 4261 7369 6320 4174  ositing Basic At
+00043090: 7465 6e74 696f 6e20 546f 6b65 6e28 4241  tention Token(BA
+000430a0: 5429 2074 6f6b 656e 7320 756e 6465 7220  T) tokens under 
+000430b0: 7468 6520 636f 6e74 7261 6374 2061 6464  the contract add
+000430c0: 7265 7373 2065 6e64 696e 6720 696e 2038  ress ending in 8
+000430d0: 3837 6566 2e27 2c0a 2020 2020 2020 2020  87ef.',.        
+000430e0: 2320 2020 2020 2020 2020 2020 6e61 6d65  #           name
+000430f0: 3a20 2745 5243 3230 272c 0a20 2020 2020  : 'ERC20',.     
+00043100: 2020 2023 2020 2020 2020 2020 2020 2072     #           r
+00043110: 6573 6574 4164 6472 6573 7353 7461 7475  esetAddressStatu
+00043120: 733a 2046 616c 7365 2c0a 2020 2020 2020  s: False,.      
+00043130: 2020 2320 2020 2020 2020 2020 2020 6164    #           ad
+00043140: 6472 6573 7352 6567 6578 3a20 275e 2830  dressRegex: '^(0
+00043150: 7829 5b30 2d39 412d 4661 2d66 5d7b 3430  x)[0-9A-Fa-f]{40
+00043160: 7d24 272c 0a20 2020 2020 2020 2023 2020  }$',.        #  
+00043170: 2020 2020 2020 2020 206d 656d 6f52 6567           memoReg
+00043180: 6578 3a20 2727 2c0a 2020 2020 2020 2020  ex: '',.        
+00043190: 2320 2020 2020 2020 2020 2020 7769 7468  #           with
+000431a0: 6472 6177 4665 653a 2027 3237 272c 0a20  drawFee: '27',. 
+000431b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000431c0: 2020 2077 6974 6864 7261 774d 696e 3a20     withdrawMin: 
+000431d0: 2735 3427 2c0a 2020 2020 2020 2020 2320  '54',.        # 
+000431e0: 2020 2020 2020 2020 2020 7769 7468 6472            withdr
+000431f0: 6177 4d61 783a 2027 3130 3030 3030 3030  awMax: '10000000
+00043200: 3030 3027 2c0a 2020 2020 2020 2020 2320  000',.        # 
+00043210: 2020 2020 2020 2020 2020 6d69 6e43 6f6e            minCon
+00043220: 6669 726d 3a20 2731 3227 2c0a 2020 2020  firm: '12',.    
+00043230: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043240: 756e 4c6f 636b 436f 6e66 6972 6d3a 2027  unLockConfirm: '
+00043250: 3027 0a20 2020 2020 2020 2023 2020 2020  0'.        #    
+00043260: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00043270: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+00043280: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+00043290: 2023 2020 5d0a 2020 2020 2020 2020 230a   #  ].        #.
+000432a0: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
+000432b0: 4665 6573 203d 207b 7d0a 2020 2020 2020  Fees = {}.      
+000432c0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+000432d0: 2830 2c20 6c65 6e28 7265 7370 6f6e 7365  (0, len(response
+000432e0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+000432f0: 656e 7472 7920 3d20 7265 7370 6f6e 7365  entry = response
+00043300: 5b69 5d0a 2020 2020 2020 2020 2020 2020  [i].            
+00043310: 6375 7272 656e 6379 4964 203d 2073 656c  currencyId = sel
+00043320: 662e 7361 6665 5f73 7472 696e 6728 656e  f.safe_string(en
+00043330: 7472 792c 2027 636f 696e 2729 0a20 2020  try, 'coin').   
+00043340: 2020 2020 2020 2020 2063 6f64 6520 3d20           code = 
+00043350: 7365 6c66 2e73 6166 655f 6375 7272 656e  self.safe_curren
+00043360: 6379 5f63 6f64 6528 6375 7272 656e 6379  cy_code(currency
+00043370: 4964 290a 2020 2020 2020 2020 2020 2020  Id).            
+00043380: 6e65 7477 6f72 6b4c 6973 7420 3d20 7365  networkList = se
+00043390: 6c66 2e73 6166 655f 7661 6c75 6528 656e  lf.safe_value(en
+000433a0: 7472 792c 2027 6e65 7477 6f72 6b4c 6973  try, 'networkLis
+000433b0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
+000433c0: 2020 2020 7769 7468 6472 6177 4665 6573      withdrawFees
+000433d0: 5b63 6f64 655d 203d 207b 7d0a 2020 2020  [code] = {}.    
+000433e0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
+000433f0: 2072 616e 6765 2830 2c20 6c65 6e28 6e65   range(0, len(ne
+00043400: 7477 6f72 6b4c 6973 7429 293a 0a20 2020  tworkList)):.   
+00043410: 2020 2020 2020 2020 2020 2020 206e 6574               net
+00043420: 776f 726b 456e 7472 7920 3d20 6e65 7477  workEntry = netw
+00043430: 6f72 6b4c 6973 745b 6a5d 0a20 2020 2020  orkList[j].     
+00043440: 2020 2020 2020 2020 2020 206e 6574 776f             netwo
+00043450: 726b 4964 203d 2073 656c 662e 7361 6665  rkId = self.safe
+00043460: 5f73 7472 696e 6728 6e65 7477 6f72 6b45  _string(networkE
+00043470: 6e74 7279 2c20 276e 6574 776f 726b 2729  ntry, 'network')
+00043480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043490: 206e 6574 776f 726b 436f 6465 203d 2073   networkCode = s
+000434a0: 656c 662e 7361 6665 5f63 7572 7265 6e63  elf.safe_currenc
+000434b0: 795f 636f 6465 286e 6574 776f 726b 4964  y_code(networkId
+000434c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000434d0: 2020 6665 6520 3d20 7365 6c66 2e73 6166    fee = self.saf
+000434e0: 655f 6e75 6d62 6572 286e 6574 776f 726b  e_number(network
+000434f0: 456e 7472 792c 2027 7769 7468 6472 6177  Entry, 'withdraw
+00043500: 4665 6527 290a 2020 2020 2020 2020 2020  Fee').          
+00043510: 2020 2020 2020 7769 7468 6472 6177 4665        withdrawFe
+00043520: 6573 5b63 6f64 655d 5b6e 6574 776f 726b  es[code][network
+00043530: 436f 6465 5d20 3d20 6665 650a 2020 2020  Code] = fee.    
+00043540: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
+00043550: 2020 2020 2020 2020 2027 7769 7468 6472           'withdr
+00043560: 6177 273a 2077 6974 6864 7261 7746 6565  aw': withdrawFee
+00043570: 732c 0a20 2020 2020 2020 2020 2020 2027  s,.            '
+00043580: 6465 706f 7369 7427 3a20 7b7d 2c0a 2020  deposit': {},.  
+00043590: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+000435a0: 3a20 7265 7370 6f6e 7365 2c0a 2020 2020  : response,.    
+000435b0: 2020 2020 7d0a 0a20 2020 2064 6566 2066      }..    def f
+000435c0: 6574 6368 5f64 6570 6f73 6974 5f77 6974  etch_deposit_wit
+000435d0: 6864 7261 775f 6665 6573 2873 656c 662c  hdraw_fees(self,
+000435e0: 2063 6f64 6573 3d4e 6f6e 652c 2070 6172   codes=None, par
+000435f0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00043600: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00043610: 6368 2064 6570 6f73 6974 2061 6e64 2077  ch deposit and w
+00043620: 6974 6864 7261 7720 6665 6573 0a20 2020  ithdraw fees.   
+00043630: 2020 2020 203a 7061 7261 6d20 5b73 7472       :param [str
+00043640: 5d7c 4e6f 6e65 2063 6f64 6573 3a20 6e6f  ]|None codes: no
+00043650: 7420 7573 6564 2062 7920 6269 6e61 6e63  t used by binanc
+00043660: 6520 6665 7463 6844 6570 6f73 6974 5769  e fetchDepositWi
+00043670: 7468 6472 6177 4665 6573 2829 0a20 2020  thdrawFees().   
+00043680: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+00043690: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+000436a0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+000436b0: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+000436c0: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+000436d0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+000436e0: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
+000436f0: 6620 6066 6565 2073 7472 7563 7475 7265  f `fee structure
+00043700: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+00043710: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d66  ccxt.com/#/?id=f
+00043720: 6565 2d73 7472 7563 7475 7265 3e60 0a20  ee-structure>`. 
+00043730: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00043740: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+00043750: 6b65 7473 2829 0a20 2020 2020 2020 2072  kets().        r
+00043760: 6573 706f 6e73 6520 3d20 7365 6c66 2e73  esponse = self.s
+00043770: 6170 6947 6574 4361 7069 7461 6c43 6f6e  apiGetCapitalCon
+00043780: 6669 6747 6574 616c 6c28 7061 7261 6d73  figGetall(params
+00043790: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+000437a0: 2020 2020 2320 2020 205b 0a20 2020 2020      #    [.     
+000437b0: 2020 2023 2020 2020 2020 2020 7b0a 2020     #        {.  
+000437c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000437d0: 2020 2063 6f69 6e3a 2027 4241 5427 2c0a     coin: 'BAT',.
+000437e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000437f0: 2020 2020 2064 6570 6f73 6974 416c 6c45       depositAllE
+00043800: 6e61 626c 653a 2054 7275 652c 0a20 2020  nable: True,.   
+00043810: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00043820: 2020 7769 7468 6472 6177 416c 6c45 6e61    withdrawAllEna
+00043830: 626c 653a 2054 7275 652c 0a20 2020 2020  ble: True,.     
+00043840: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043850: 6e61 6d65 3a20 2742 6173 6963 2041 7474  name: 'Basic Att
+00043860: 656e 7469 6f6e 2054 6f6b 656e 272c 0a20  ention Token',. 
+00043870: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00043880: 2020 2020 6672 6565 3a20 2730 272c 0a20      free: '0',. 
+00043890: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000438a0: 2020 2020 6c6f 636b 6564 3a20 2730 272c      locked: '0',
+000438b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000438c0: 2020 2020 2020 6672 6565 7a65 3a20 2730        freeze: '0
+000438d0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+000438e0: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
+000438f0: 696e 673a 2027 3027 2c0a 2020 2020 2020  ing: '0',.      
+00043900: 2020 2320 2020 2020 2020 2020 2020 2069    #            i
+00043910: 706f 696e 673a 2027 3027 2c0a 2020 2020  poing: '0',.    
+00043920: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043930: 2069 706f 6162 6c65 3a20 2730 272c 0a20   ipoable: '0',. 
+00043940: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00043950: 2020 2020 7374 6f72 6167 653a 2027 3027      storage: '0'
+00043960: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00043970: 2020 2020 2020 2069 734c 6567 616c 4d6f         isLegalMo
+00043980: 6e65 793a 2046 616c 7365 2c0a 2020 2020  ney: False,.    
+00043990: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000439a0: 2074 7261 6469 6e67 3a20 5472 7565 2c0a   trading: True,.
+000439b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000439c0: 2020 2020 206e 6574 776f 726b 4c69 7374       networkList
+000439d0: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+000439e0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+000439f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00043a00: 2020 2020 2020 2020 2020 2020 6e65 7477              netw
+00043a10: 6f72 6b3a 2027 424e 4227 2c0a 2020 2020  ork: 'BNB',.    
+00043a20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043a30: 2020 2020 2020 2020 2063 6f69 6e3a 2027           coin: '
+00043a40: 4241 5427 2c0a 2020 2020 2020 2020 2320  BAT',.        # 
+00043a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043a60: 2020 2077 6974 6864 7261 7749 6e74 6567     withdrawInteg
+00043a70: 6572 4d75 6c74 6970 6c65 3a20 2730 2e30  erMultiple: '0.0
+00043a80: 3030 3030 3030 3127 2c0a 2020 2020 2020  0000001',.      
+00043a90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00043aa0: 2020 2020 2020 2069 7344 6566 6175 6c74         isDefault
+00043ab0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
+00043ac0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00043ad0: 2020 2020 2020 6465 706f 7369 7445 6e61        depositEna
+00043ae0: 626c 653a 2054 7275 652c 0a20 2020 2020  ble: True,.     
+00043af0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043b00: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
+00043b10: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
+00043b20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00043b30: 2020 2020 2020 2020 2020 2064 6570 6f73             depos
+00043b40: 6974 4465 7363 3a20 2727 2c0a 2020 2020  itDesc: '',.    
+00043b50: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043b60: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
+00043b70: 7744 6573 633a 2027 272c 0a20 2020 2020  wDesc: '',.     
+00043b80: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043b90: 2020 2020 2020 2020 7370 6563 6961 6c54          specialT
+00043ba0: 6970 733a 2027 5468 6520 6e61 6d65 206f  ips: 'The name o
+00043bb0: 6620 7365 6c66 2061 7373 6574 2069 7320  f self asset is 
+00043bc0: 4261 7369 6320 4174 7465 6e74 696f 6e20  Basic Attention 
+00043bd0: 546f 6b65 6e28 4241 5429 2e20 426f 7468  Token(BAT). Both
+00043be0: 2061 204d 454d 4f20 616e 6420 616e 2041   a MEMO and an A
+00043bf0: 6464 7265 7373 2061 7265 2072 6571 7569  ddress are requi
+00043c00: 7265 6420 746f 2073 7563 6365 7373 6675  red to successfu
+00043c10: 6c6c 7920 6465 706f 7369 7420 796f 7572  lly deposit your
+00043c20: 2042 4550 3220 746f 6b65 6e73 2074 6f20   BEP2 tokens to 
+00043c30: 4269 6e61 6e63 652e 272c 0a20 2020 2020  Binance.',.     
+00043c40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043c50: 2020 2020 2020 2020 6e61 6d65 3a20 2742          name: 'B
+00043c60: 4550 3227 2c0a 2020 2020 2020 2020 2320  EP2',.        # 
+00043c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043c80: 2020 2072 6573 6574 4164 6472 6573 7353     resetAddressS
+00043c90: 7461 7475 733a 2046 616c 7365 2c0a 2020  tatus: False,.  
+00043ca0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00043cb0: 2020 2020 2020 2020 2020 2061 6464 7265             addre
+00043cc0: 7373 5265 6765 783a 2027 5e28 626e 6231  ssRegex: '^(bnb1
+00043cd0: 295b 302d 3961 2d7a 5d7b 3338 7d24 272c  )[0-9a-z]{38}$',
+00043ce0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00043cf0: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+00043d00: 6d6f 5265 6765 783a 2027 5e5b 302d 3941  moRegex: '^[0-9A
+00043d10: 2d5a 612d 7a5c 5c2d 5f5d 7b31 2c31 3230  -Za-z\\-_]{1,120
+00043d20: 7d24 272c 0a20 2020 2020 2020 2023 2020  }$',.        #  
+00043d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043d40: 2020 7769 7468 6472 6177 4665 653a 2027    withdrawFee: '
+00043d50: 302e 3237 272c 0a20 2020 2020 2020 2023  0.27',.        #
+00043d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043d70: 2020 2020 7769 7468 6472 6177 4d69 6e3a      withdrawMin:
+00043d80: 2027 302e 3534 272c 0a20 2020 2020 2020   '0.54',.       
+00043d90: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00043da0: 2020 2020 2020 7769 7468 6472 6177 4d61        withdrawMa
+00043db0: 783a 2027 3130 3030 3030 3030 3030 3027  x: '10000000000'
+00043dc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00043dd0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00043de0: 696e 436f 6e66 6972 6d3a 2027 3127 2c0a  inConfirm: '1',.
+00043df0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043e00: 2020 2020 2020 2020 2020 2020 2075 6e4c               unL
+00043e10: 6f63 6b43 6f6e 6669 726d 3a20 2730 270a  ockConfirm: '0'.
+00043e20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043e30: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00043e40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043e50: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
+00043e60: 2023 2020 2020 2020 2020 2020 2020 5d0a   #            ].
+00043e70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043e80: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+00043e90: 5d0a 2020 2020 2020 2020 230a 2020 2020  ].        #.    
+00043ea0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00043eb0: 7061 7273 655f 6465 706f 7369 745f 7769  parse_deposit_wi
+00043ec0: 7468 6472 6177 5f66 6565 7328 7265 7370  thdraw_fees(resp
+00043ed0: 6f6e 7365 2c20 636f 6465 732c 2027 636f  onse, codes, 'co
+00043ee0: 696e 2729 0a0a 2020 2020 6465 6620 7061  in')..    def pa
+00043ef0: 7273 655f 6465 706f 7369 745f 7769 7468  rse_deposit_with
+00043f00: 6472 6177 5f66 6565 2873 656c 662c 2066  draw_fee(self, f
+00043f10: 6565 2c20 6375 7272 656e 6379 3d4e 6f6e  ee, currency=Non
+00043f20: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+00043f30: 2020 2020 2020 2320 2020 207b 0a20 2020        #    {.   
+00043f40: 2020 2020 2023 2020 2020 2020 2020 636f       #        co
+00043f50: 696e 3a20 2742 4154 272c 0a20 2020 2020  in: 'BAT',.     
+00043f60: 2020 2023 2020 2020 2020 2020 6465 706f     #        depo
+00043f70: 7369 7441 6c6c 456e 6162 6c65 3a20 5472  sitAllEnable: Tr
+00043f80: 7565 2c0a 2020 2020 2020 2020 2320 2020  ue,.        #   
+00043f90: 2020 2020 2077 6974 6864 7261 7741 6c6c       withdrawAll
+00043fa0: 456e 6162 6c65 3a20 5472 7565 2c0a 2020  Enable: True,.  
+00043fb0: 2020 2020 2020 2320 2020 2020 2020 206e        #        n
+00043fc0: 616d 653a 2027 4261 7369 6320 4174 7465  ame: 'Basic Atte
+00043fd0: 6e74 696f 6e20 546f 6b65 6e27 2c0a 2020  ntion Token',.  
+00043fe0: 2020 2020 2020 2320 2020 2020 2020 2066        #        f
+00043ff0: 7265 653a 2027 3027 2c0a 2020 2020 2020  ree: '0',.      
+00044000: 2020 2320 2020 2020 2020 206c 6f63 6b65    #        locke
+00044010: 643a 2027 3027 2c0a 2020 2020 2020 2020  d: '0',.        
+00044020: 2320 2020 2020 2020 2066 7265 657a 653a  #        freeze:
+00044030: 2027 3027 2c0a 2020 2020 2020 2020 2320   '0',.        # 
+00044040: 2020 2020 2020 2077 6974 6864 7261 7769         withdrawi
+00044050: 6e67 3a20 2730 272c 0a20 2020 2020 2020  ng: '0',.       
+00044060: 2023 2020 2020 2020 2020 6970 6f69 6e67   #        ipoing
+00044070: 3a20 2730 272c 0a20 2020 2020 2020 2023  : '0',.        #
+00044080: 2020 2020 2020 2020 6970 6f61 626c 653a          ipoable:
+00044090: 2027 3027 2c0a 2020 2020 2020 2020 2320   '0',.        # 
+000440a0: 2020 2020 2020 2073 746f 7261 6765 3a20         storage: 
+000440b0: 2730 272c 0a20 2020 2020 2020 2023 2020  '0',.        #  
+000440c0: 2020 2020 2020 6973 4c65 6761 6c4d 6f6e        isLegalMon
+000440d0: 6579 3a20 4661 6c73 652c 0a20 2020 2020  ey: False,.     
+000440e0: 2020 2023 2020 2020 2020 2020 7472 6164     #        trad
+000440f0: 696e 673a 2054 7275 652c 0a20 2020 2020  ing: True,.     
+00044100: 2020 2023 2020 2020 2020 2020 6e65 7477     #        netw
+00044110: 6f72 6b4c 6973 743a 205b 0a20 2020 2020  orkList: [.     
+00044120: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00044130: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00044140: 2020 2020 2020 2020 2020 206e 6574 776f             netwo
+00044150: 726b 3a20 2742 4e42 272c 0a20 2020 2020  rk: 'BNB',.     
+00044160: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00044170: 2020 2020 636f 696e 3a20 2742 4154 272c      coin: 'BAT',
+00044180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044190: 2020 2020 2020 2020 2020 7769 7468 6472            withdr
+000441a0: 6177 496e 7465 6765 724d 756c 7469 706c  awIntegerMultipl
+000441b0: 653a 2027 302e 3030 3030 3030 3031 272c  e: '0.00000001',
+000441c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000441d0: 2020 2020 2020 2020 2020 6973 4465 6661            isDefa
+000441e0: 756c 743a 2046 616c 7365 2c0a 2020 2020  ult: False,.    
+000441f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044200: 2020 2020 2064 6570 6f73 6974 456e 6162       depositEnab
+00044210: 6c65 3a20 5472 7565 2c0a 2020 2020 2020  le: True,.      
+00044220: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00044230: 2020 2077 6974 6864 7261 7745 6e61 626c     withdrawEnabl
+00044240: 653a 2054 7275 652c 0a20 2020 2020 2020  e: True,.       
+00044250: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00044260: 2020 6465 706f 7369 7444 6573 633a 2027    depositDesc: '
+00044270: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00044280: 2020 2020 2020 2020 2020 2020 7769 7468              with
+00044290: 6472 6177 4465 7363 3a20 2727 2c0a 2020  drawDesc: '',.  
+000442a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000442b0: 2020 2020 2020 2073 7065 6369 616c 5469         specialTi
+000442c0: 7073 3a20 2754 6865 206e 616d 6520 6f66  ps: 'The name of
+000442d0: 2073 656c 6620 6173 7365 7420 6973 2042   self asset is B
+000442e0: 6173 6963 2041 7474 656e 7469 6f6e 2054  asic Attention T
+000442f0: 6f6b 656e 2842 4154 292e 2042 6f74 6820  oken(BAT). Both 
+00044300: 6120 4d45 4d4f 2061 6e64 2061 6e20 4164  a MEMO and an Ad
+00044310: 6472 6573 7320 6172 6520 7265 7175 6972  dress are requir
+00044320: 6564 2074 6f20 7375 6363 6573 7366 756c  ed to successful
+00044330: 6c79 2064 6570 6f73 6974 2079 6f75 7220  ly deposit your 
+00044340: 4245 5032 2074 6f6b 656e 7320 746f 2042  BEP2 tokens to B
+00044350: 696e 616e 6365 2e27 2c0a 2020 2020 2020  inance.',.      
+00044360: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00044370: 2020 206e 616d 653a 2027 4245 5032 272c     name: 'BEP2',
+00044380: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044390: 2020 2020 2020 2020 2020 7265 7365 7441            resetA
+000443a0: 6464 7265 7373 5374 6174 7573 3a20 4661  ddressStatus: Fa
+000443b0: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+000443c0: 2020 2020 2020 2020 2020 2020 2020 6164                ad
+000443d0: 6472 6573 7352 6567 6578 3a20 275e 2862  dressRegex: '^(b
+000443e0: 6e62 3129 5b30 2d39 612d 7a5d 7b33 387d  nb1)[0-9a-z]{38}
+000443f0: 2427 2c0a 2020 2020 2020 2020 2320 2020  $',.        #   
+00044400: 2020 2020 2020 2020 2020 2020 206d 656d               mem
+00044410: 6f52 6567 6578 3a20 275e 5b30 2d39 412d  oRegex: '^[0-9A-
+00044420: 5a61 2d7a 5c5c 2d5f 5d7b 312c 3132 307d  Za-z\\-_]{1,120}
+00044430: 2427 2c0a 2020 2020 2020 2020 2320 2020  $',.        #   
+00044440: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+00044450: 6864 7261 7746 6565 3a20 2730 2e32 3727  hdrawFee: '0.27'
+00044460: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00044470: 2020 2020 2020 2020 2020 2077 6974 6864             withd
+00044480: 7261 774d 696e 3a20 2730 2e35 3427 2c0a  rawMin: '0.54',.
+00044490: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000444a0: 2020 2020 2020 2020 2077 6974 6864 7261           withdra
+000444b0: 774d 6178 3a20 2731 3030 3030 3030 3030  wMax: '100000000
+000444c0: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
+000444d0: 2020 2020 2020 2020 2020 2020 2020 6d69                mi
+000444e0: 6e43 6f6e 6669 726d 3a20 2731 272c 0a20  nConfirm: '1',. 
+000444f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00044500: 2020 2020 2020 2020 756e 4c6f 636b 436f          unLockCo
+00044510: 6e66 6972 6d3a 2027 3027 0a20 2020 2020  nfirm: '0'.     
+00044520: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00044530: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+00044540: 2020 2020 2020 2020 2e2e 2e0a 2020 2020          ....    
+00044550: 2020 2020 2320 2020 2020 2020 205d 0a20      #        ]. 
+00044560: 2020 2020 2020 2023 2020 2020 7d0a 2020         #    }.  
+00044570: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00044580: 6e65 7477 6f72 6b4c 6973 7420 3d20 7365  networkList = se
+00044590: 6c66 2e73 6166 655f 7661 6c75 6528 6665  lf.safe_value(fe
+000445a0: 652c 2027 6e65 7477 6f72 6b4c 6973 7427  e, 'networkList'
+000445b0: 2c20 5b5d 290a 2020 2020 2020 2020 7265  , []).        re
+000445c0: 7375 6c74 203d 2073 656c 662e 6465 706f  sult = self.depo
+000445d0: 7369 745f 7769 7468 6472 6177 5f66 6565  sit_withdraw_fee
+000445e0: 2866 6565 290a 2020 2020 2020 2020 666f  (fee).        fo
+000445f0: 7220 6a20 696e 2072 616e 6765 2830 2c20  r j in range(0, 
+00044600: 6c65 6e28 6e65 7477 6f72 6b4c 6973 7429  len(networkList)
+00044610: 293a 0a20 2020 2020 2020 2020 2020 206e  ):.            n
+00044620: 6574 776f 726b 456e 7472 7920 3d20 6e65  etworkEntry = ne
+00044630: 7477 6f72 6b4c 6973 745b 6a5d 0a20 2020  tworkList[j].   
+00044640: 2020 2020 2020 2020 206e 6574 776f 726b           network
+00044650: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
+00044660: 7472 696e 6728 6e65 7477 6f72 6b45 6e74  tring(networkEnt
+00044670: 7279 2c20 276e 6574 776f 726b 2729 0a20  ry, 'network'). 
+00044680: 2020 2020 2020 2020 2020 206e 6574 776f             netwo
+00044690: 726b 436f 6465 203d 2073 656c 662e 6e65  rkCode = self.ne
+000446a0: 7477 6f72 6b5f 6964 5f74 6f5f 636f 6465  twork_id_to_code
+000446b0: 286e 6574 776f 726b 4964 290a 2020 2020  (networkId).    
+000446c0: 2020 2020 2020 2020 7769 7468 6472 6177          withdraw
+000446d0: 4665 6520 3d20 7365 6c66 2e73 6166 655f  Fee = self.safe_
+000446e0: 6e75 6d62 6572 286e 6574 776f 726b 456e  number(networkEn
+000446f0: 7472 792c 2027 7769 7468 6472 6177 4665  try, 'withdrawFe
+00044700: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
+00044710: 6973 4465 6661 756c 7420 3d20 7365 6c66  isDefault = self
+00044720: 2e73 6166 655f 7661 6c75 6528 6e65 7477  .safe_value(netw
+00044730: 6f72 6b45 6e74 7279 2c20 2769 7344 6566  orkEntry, 'isDef
+00044740: 6175 6c74 2729 0a20 2020 2020 2020 2020  ault').         
+00044750: 2020 2069 6620 6973 4465 6661 756c 7420     if isDefault 
+00044760: 6973 2054 7275 653a 0a20 2020 2020 2020  is True:.       
+00044770: 2020 2020 2020 2020 2072 6573 756c 745b           result[
+00044780: 2777 6974 6864 7261 7727 5d20 3d20 7b0a  'withdraw'] = {.
+00044790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000447a0: 2020 2020 2766 6565 273a 2077 6974 6864      'fee': withd
+000447b0: 7261 7746 6565 2c0a 2020 2020 2020 2020  rawFee,.        
+000447c0: 2020 2020 2020 2020 2020 2020 2770 6572              'per
+000447d0: 6365 6e74 6167 6527 3a20 4e6f 6e65 2c0a  centage': None,.
+000447e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000447f0: 7d0a 2020 2020 2020 2020 2020 2020 7265  }.            re
+00044800: 7375 6c74 5b27 6e65 7477 6f72 6b73 275d  sult['networks']
+00044810: 5b6e 6574 776f 726b 436f 6465 5d20 3d20  [networkCode] = 
+00044820: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00044830: 2020 2777 6974 6864 7261 7727 3a20 7b0a    'withdraw': {.
+00044840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044850: 2020 2020 2766 6565 273a 2077 6974 6864      'fee': withd
+00044860: 7261 7746 6565 2c0a 2020 2020 2020 2020  rawFee,.        
+00044870: 2020 2020 2020 2020 2020 2020 2770 6572              'per
+00044880: 6365 6e74 6167 6527 3a20 4e6f 6e65 2c0a  centage': None,.
+00044890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000448a0: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+000448b0: 2020 2027 6465 706f 7369 7427 3a20 7b0a     'deposit': {.
+000448c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000448d0: 2020 2020 2766 6565 273a 204e 6f6e 652c      'fee': None,
+000448e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000448f0: 2020 2020 2027 7065 7263 656e 7461 6765       'percentage
+00044900: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+00044910: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00044920: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00044930: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
+00044940: 0a20 2020 2064 6566 2077 6974 6864 7261  .    def withdra
+00044950: 7728 7365 6c66 2c20 636f 6465 3a20 7374  w(self, code: st
+00044960: 722c 2061 6d6f 756e 742c 2061 6464 7265  r, amount, addre
+00044970: 7373 2c20 7461 673d 4e6f 6e65 2c20 7061  ss, tag=None, pa
+00044980: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00044990: 2020 2222 220a 2020 2020 2020 2020 6d61    """.        ma
+000449a0: 6b65 2061 2077 6974 6864 7261 7761 6c0a  ke a withdrawal.
+000449b0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+000449c0: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
+000449d0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
+000449e0: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
+000449f0: 6f61 7420 616d 6f75 6e74 3a20 7468 6520  oat amount: the 
+00044a00: 616d 6f75 6e74 2074 6f20 7769 7468 6472  amount to withdr
+00044a10: 6177 0a20 2020 2020 2020 203a 7061 7261  aw.        :para
+00044a20: 6d20 7374 7220 6164 6472 6573 733a 2074  m str address: t
+00044a30: 6865 2061 6464 7265 7373 2074 6f20 7769  he address to wi
+00044a40: 7468 6472 6177 2074 6f0a 2020 2020 2020  thdraw to.      
+00044a50: 2020 3a70 6172 616d 2073 7472 7c4e 6f6e    :param str|Non
+00044a60: 6520 7461 673a 0a20 2020 2020 2020 203a  e tag:.        :
+00044a70: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+00044a80: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+00044a90: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00044aa0: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
+00044ab0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+00044ac0: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
+00044ad0: 6120 6074 7261 6e73 6163 7469 6f6e 2073  a `transaction s
+00044ae0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
+00044af0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+00044b00: 232f 3f69 643d 7472 616e 7361 6374 696f  #/?id=transactio
+00044b10: 6e2d 7374 7275 6374 7572 653e 600a 2020  n-structure>`.  
+00044b20: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00044b30: 2020 7461 672c 2070 6172 616d 7320 3d20    tag, params = 
+00044b40: 7365 6c66 2e68 616e 646c 655f 7769 7468  self.handle_with
+00044b50: 6472 6177 5f74 6167 5f61 6e64 5f70 6172  draw_tag_and_par
+00044b60: 616d 7328 7461 672c 2070 6172 616d 7329  ams(tag, params)
+00044b70: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
+00044b80: 6563 6b5f 6164 6472 6573 7328 6164 6472  eck_address(addr
+00044b90: 6573 7329 0a20 2020 2020 2020 2073 656c  ess).        sel
+00044ba0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+00044bb0: 0a20 2020 2020 2020 2063 7572 7265 6e63  .        currenc
+00044bc0: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+00044bd0: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+00044be0: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+00044bf0: 2020 2020 2020 2020 2763 6f69 6e27 3a20          'coin': 
+00044c00: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
+00044c10: 2020 2020 2020 2020 2020 2020 2761 6464              'add
+00044c20: 7265 7373 273a 2061 6464 7265 7373 2c0a  ress': address,.
+00044c30: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
+00044c40: 756e 7427 3a20 616d 6f75 6e74 2c0a 2020  unt': amount,.  
+00044c50: 2020 2020 2020 2020 2020 2320 6874 7470            # http
+00044c60: 733a 2f2f 6269 6e61 6e63 652d 646f 6373  s://binance-docs
+00044c70: 2e67 6974 6875 622e 696f 2f61 7069 646f  .github.io/apido
+00044c80: 6373 2f73 706f 742f 656e 2f23 7769 7468  cs/spot/en/#with
+00044c90: 6472 6177 2d73 6170 690a 2020 2020 2020  draw-sapi.      
+00044ca0: 2020 2020 2020 2320 6973 7375 6520 7361        # issue sa
+00044cb0: 7069 4765 7443 6170 6974 616c 436f 6e66  piGetCapitalConf
+00044cc0: 6967 4765 7461 6c6c 2829 2074 6f20 6765  igGetall() to ge
+00044cd0: 7420 6e65 7477 6f72 6b73 2066 6f72 2077  t networks for w
+00044ce0: 6974 6864 7261 7769 6e67 2055 5344 5420  ithdrawing USDT 
+00044cf0: 4552 4332 3020 7673 2055 5344 5420 4f6d  ERC20 vs USDT Om
+00044d00: 6e69 0a20 2020 2020 2020 2020 2020 2023  ni.            #
+00044d10: 2027 6e65 7477 6f72 6b27 3a20 2745 5448   'network': 'ETH
+00044d20: 272c 2020 2320 2742 5443 272c 2027 5452  ',  # 'BTC', 'TR
+00044d30: 5827 2c20 6574 632c 206f 7074 696f 6e61  X', etc, optiona
+00044d40: 6c0a 2020 2020 2020 2020 7d0a 2020 2020  l.        }.    
+00044d50: 2020 2020 6966 2074 6167 2069 7320 6e6f      if tag is no
+00044d60: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00044d70: 2020 2020 7265 7175 6573 745b 2761 6464      request['add
+00044d80: 7265 7373 5461 6727 5d20 3d20 7461 670a  ressTag'] = tag.
+00044d90: 2020 2020 2020 2020 6e65 7477 6f72 6b73          networks
+00044da0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00044db0: 7565 2873 656c 662e 6f70 7469 6f6e 732c  ue(self.options,
+00044dc0: 2027 6e65 7477 6f72 6b73 272c 207b 7d29   'networks', {})
+00044dd0: 0a20 2020 2020 2020 206e 6574 776f 726b  .        network
+00044de0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00044df0: 696e 675f 7570 7065 7228 7061 7261 6d73  ing_upper(params
+00044e00: 2c20 276e 6574 776f 726b 2729 2020 2320  , 'network')  # 
+00044e10: 7365 6c66 206c 696e 6520 616c 6c6f 7773  self line allows
+00044e20: 2074 6865 2075 7365 7220 746f 2073 7065   the user to spe
+00044e30: 6369 6679 2065 6974 6865 7220 4552 4332  cify either ERC2
+00044e40: 3020 6f72 2045 5448 0a20 2020 2020 2020  0 or ETH.       
+00044e50: 206e 6574 776f 726b 203d 2073 656c 662e   network = self.
+00044e60: 7361 6665 5f73 7472 696e 6728 6e65 7477  safe_string(netw
+00044e70: 6f72 6b73 2c20 6e65 7477 6f72 6b2c 206e  orks, network, n
+00044e80: 6574 776f 726b 2920 2023 2068 616e 646c  etwork)  # handl
+00044e90: 6520 4552 4332 303e 4554 4820 616c 6961  e ERC20>ETH alia
+00044ea0: 730a 2020 2020 2020 2020 6966 206e 6574  s.        if net
+00044eb0: 776f 726b 2069 7320 6e6f 7420 4e6f 6e65  work is not None
+00044ec0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00044ed0: 7175 6573 745b 276e 6574 776f 726b 275d  quest['network']
+00044ee0: 203d 206e 6574 776f 726b 0a20 2020 2020   = network.     
+00044ef0: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
+00044f00: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
+00044f10: 2c20 276e 6574 776f 726b 2729 0a20 2020  , 'network').   
+00044f20: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+00044f30: 7365 6c66 2e73 6170 6950 6f73 7443 6170  self.sapiPostCap
+00044f40: 6974 616c 5769 7468 6472 6177 4170 706c  italWithdrawAppl
+00044f50: 7928 7365 6c66 2e65 7874 656e 6428 7265  y(self.extend(re
+00044f60: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00044f70: 2020 2020 2020 2020 2320 2020 2020 7b69          #     {i
+00044f80: 643a 2027 3961 3637 3632 3862 3136 6261  d: '9a67628b16ba
+00044f90: 3439 3838 6165 3230 6433 3239 3333 3366  4988ae20d329333f
+00044fa0: 3136 6263 277d 0a20 2020 2020 2020 2072  16bc'}.        r
+00044fb0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00044fc0: 5f74 7261 6e73 6163 7469 6f6e 2872 6573  _transaction(res
+00044fd0: 706f 6e73 652c 2063 7572 7265 6e63 7929  ponse, currency)
+00044fe0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+00044ff0: 7472 6164 696e 675f 6665 6528 7365 6c66  trading_fee(self
+00045000: 2c20 6665 652c 206d 6172 6b65 743d 4e6f  , fee, market=No
+00045010: 6e65 293a 0a20 2020 2020 2020 2023 0a20  ne):.        #. 
+00045020: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00045030: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00045040: 2022 7379 6d62 6f6c 223a 2022 4144 4142   "symbol": "ADAB
+00045050: 4e42 222c 0a20 2020 2020 2020 2023 2020  NB",.        #  
+00045060: 2020 2020 2020 2022 6d61 6b65 7243 6f6d         "makerCom
+00045070: 6d69 7373 696f 6e22 3a20 302e 3030 312c  mission": 0.001,
+00045080: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00045090: 2020 2022 7461 6b65 7243 6f6d 6d69 7373     "takerCommiss
+000450a0: 696f 6e22 3a20 302e 3030 310a 2020 2020  ion": 0.001.    
+000450b0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+000450c0: 2020 2020 230a 2020 2020 2020 2020 6d61      #.        ma
+000450d0: 726b 6574 4964 203d 2073 656c 662e 7361  rketId = self.sa
+000450e0: 6665 5f73 7472 696e 6728 6665 652c 2027  fe_string(fee, '
+000450f0: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+00045100: 2073 796d 626f 6c20 3d20 7365 6c66 2e73   symbol = self.s
+00045110: 6166 655f 7379 6d62 6f6c 286d 6172 6b65  afe_symbol(marke
+00045120: 7449 642c 206d 6172 6b65 742c 204e 6f6e  tId, market, Non
+00045130: 652c 2027 7370 6f74 2729 0a20 2020 2020  e, 'spot').     
+00045140: 2020 2072 6574 7572 6e20 7b0a 2020 2020     return {.    
+00045150: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
+00045160: 6665 652c 0a20 2020 2020 2020 2020 2020  fee,.           
+00045170: 2027 7379 6d62 6f6c 273a 2073 796d 626f   'symbol': symbo
+00045180: 6c2c 0a20 2020 2020 2020 2020 2020 2027  l,.            '
+00045190: 6d61 6b65 7227 3a20 7365 6c66 2e73 6166  maker': self.saf
+000451a0: 655f 6e75 6d62 6572 2866 6565 2c20 276d  e_number(fee, 'm
+000451b0: 616b 6572 436f 6d6d 6973 7369 6f6e 2729  akerCommission')
+000451c0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+000451d0: 616b 6572 273a 2073 656c 662e 7361 6665  aker': self.safe
+000451e0: 5f6e 756d 6265 7228 6665 652c 2027 7461  _number(fee, 'ta
+000451f0: 6b65 7243 6f6d 6d69 7373 696f 6e27 292c  kerCommission'),
+00045200: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
+00045210: 6465 6620 6665 7463 685f 7472 6164 696e  def fetch_tradin
+00045220: 675f 6665 6528 7365 6c66 2c20 7379 6d62  g_fee(self, symb
+00045230: 6f6c 3a20 7374 722c 2070 6172 616d 733d  ol: str, params=
+00045240: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00045250: 0a20 2020 2020 2020 2066 6574 6368 2074  .        fetch t
+00045260: 6865 2074 7261 6469 6e67 2066 6565 7320  he trading fees 
+00045270: 666f 7220 6120 6d61 726b 6574 0a20 2020  for a market.   
+00045280: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+00045290: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+000452a0: 6d61 726b 6574 2073 796d 626f 6c0a 2020  market symbol.  
+000452b0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+000452c0: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+000452d0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+000452e0: 6669 6320 746f 2074 6865 2062 696e 616e  fic to the binan
+000452f0: 6365 2061 7069 2065 6e64 706f 696e 740a  ce api endpoint.
+00045300: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+00045310: 2064 6963 743a 2061 2060 6665 6520 7374   dict: a `fee st
+00045320: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+00045330: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+00045340: 2f3f 6964 3d66 6565 2d73 7472 7563 7475  /?id=fee-structu
+00045350: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+00045360: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+00045370: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00045380: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00045390: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+000453a0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+000453b0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+000453c0: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+000453d0: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+000453e0: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
+000453f0: 6f6e 7365 203d 2073 656c 662e 7361 7069  onse = self.sapi
+00045400: 4765 7441 7373 6574 5472 6164 6546 6565  GetAssetTradeFee
+00045410: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+00045420: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+00045430: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00045440: 2023 2020 2020 205b 0a20 2020 2020 2020   #     [.       
+00045450: 2023 2020 2020 2020 207b 0a20 2020 2020   #       {.     
+00045460: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
+00045470: 6d62 6f6c 223a 2022 4254 4355 5344 5422  mbol": "BTCUSDT"
+00045480: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00045490: 2020 2020 226d 616b 6572 436f 6d6d 6973      "makerCommis
+000454a0: 7369 6f6e 223a 2022 302e 3030 3122 2c0a  sion": "0.001",.
+000454b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000454c0: 2020 2274 616b 6572 436f 6d6d 6973 7369    "takerCommissi
+000454d0: 6f6e 223a 2022 302e 3030 3122 0a20 2020  on": "0.001".   
+000454e0: 2020 2020 2023 2020 2020 2020 207d 0a20       #       }. 
+000454f0: 2020 2020 2020 2023 2020 2020 205d 0a20         #     ]. 
+00045500: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00045510: 2066 6972 7374 203d 2073 656c 662e 7361   first = self.sa
+00045520: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+00045530: 652c 2030 2c20 7b7d 290a 2020 2020 2020  e, 0, {}).      
+00045540: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00045550: 7273 655f 7472 6164 696e 675f 6665 6528  rse_trading_fee(
+00045560: 6669 7273 7429 0a0a 2020 2020 6465 6620  first)..    def 
+00045570: 6665 7463 685f 7472 6164 696e 675f 6665  fetch_trading_fe
+00045580: 6573 2873 656c 662c 2070 6172 616d 733d  es(self, params=
+00045590: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+000455a0: 0a20 2020 2020 2020 2066 6574 6368 2074  .        fetch t
+000455b0: 6865 2074 7261 6469 6e67 2066 6565 7320  he trading fees 
+000455c0: 666f 7220 6d75 6c74 6970 6c65 206d 6172  for multiple mar
+000455d0: 6b65 7473 0a20 2020 2020 2020 203a 7061  kets.        :pa
+000455e0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+000455f0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00045600: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+00045610: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
+00045620: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+00045630: 7265 7475 726e 7320 6469 6374 3a20 6120  returns dict: a 
+00045640: 6469 6374 696f 6e61 7279 206f 6620 6066  dictionary of `f
+00045650: 6565 2073 7472 7563 7475 7265 7320 3c68  ee structures <h
+00045660: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00045670: 2e63 6f6d 2f23 2f3f 6964 3d66 6565 2d73  .com/#/?id=fee-s
+00045680: 7472 7563 7475 7265 3e60 2069 6e64 6578  tructure>` index
+00045690: 6564 2062 7920 6d61 726b 6574 2073 796d  ed by market sym
+000456a0: 626f 6c73 0a20 2020 2020 2020 2022 2222  bols.        """
+000456b0: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+000456c0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+000456d0: 2020 2020 206d 6574 686f 6420 3d20 4e6f       method = No
+000456e0: 6e65 0a20 2020 2020 2020 2064 6566 6175  ne.        defau
+000456f0: 6c74 5479 7065 203d 2073 656c 662e 7361  ltType = self.sa
+00045700: 6665 5f73 7472 696e 675f 3228 7365 6c66  fe_string_2(self
+00045710: 2e6f 7074 696f 6e73 2c20 2766 6574 6368  .options, 'fetch
+00045720: 5472 6164 696e 6746 6565 7327 2c20 2764  TradingFees', 'd
+00045730: 6566 6175 6c74 5479 7065 272c 2027 6c69  efaultType', 'li
+00045740: 6e65 6172 2729 0a20 2020 2020 2020 2074  near').        t
+00045750: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
+00045760: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
+00045770: 7479 7065 272c 2064 6566 6175 6c74 5479  type', defaultTy
+00045780: 7065 290a 2020 2020 2020 2020 7061 7261  pe).        para
+00045790: 6d73 203d 2073 656c 662e 6f6d 6974 2870  ms = self.omit(p
+000457a0: 6172 616d 732c 2027 7479 7065 2729 0a20  arams, 'type'). 
+000457b0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
+000457c0: 204e 6f6e 650a 2020 2020 2020 2020 7375   None.        su
+000457d0: 6254 7970 652c 2070 6172 616d 7320 3d20  bType, params = 
+000457e0: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
+000457f0: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
+00045800: 2766 6574 6368 5472 6164 696e 6746 6565  'fetchTradingFee
+00045810: 7327 2c20 4e6f 6e65 2c20 7061 7261 6d73  s', None, params
+00045820: 290a 2020 2020 2020 2020 6973 5370 6f74  ).        isSpot
+00045830: 4f72 4d61 7267 696e 203d 2028 7479 7065  OrMargin = (type
+00045840: 203d 3d20 2773 706f 7427 2920 6f72 2028   == 'spot') or (
+00045850: 7479 7065 203d 3d20 276d 6172 6769 6e27  type == 'margin'
+00045860: 290a 2020 2020 2020 2020 6973 4c69 6e65  ).        isLine
+00045870: 6172 203d 2073 656c 662e 6973 5f6c 696e  ar = self.is_lin
+00045880: 6561 7228 7479 7065 2c20 7375 6254 7970  ear(type, subTyp
+00045890: 6529 0a20 2020 2020 2020 2069 7349 6e76  e).        isInv
+000458a0: 6572 7365 203d 2073 656c 662e 6973 5f69  erse = self.is_i
+000458b0: 6e76 6572 7365 2874 7970 652c 2073 7562  nverse(type, sub
+000458c0: 5479 7065 290a 2020 2020 2020 2020 6966  Type).        if
+000458d0: 2069 7353 706f 744f 724d 6172 6769 6e3a   isSpotOrMargin:
+000458e0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+000458f0: 686f 6420 3d20 2773 6170 6947 6574 4173  hod = 'sapiGetAs
+00045900: 7365 7454 7261 6465 4665 6527 0a20 2020  setTradeFee'.   
+00045910: 2020 2020 2065 6c69 6620 6973 4c69 6e65       elif isLine
+00045920: 6172 3a0a 2020 2020 2020 2020 2020 2020  ar:.            
+00045930: 6d65 7468 6f64 203d 2027 6661 7069 5072  method = 'fapiPr
+00045940: 6976 6174 6547 6574 4163 636f 756e 7427  ivateGetAccount'
+00045950: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
+00045960: 496e 7665 7273 653a 0a20 2020 2020 2020  Inverse:.       
+00045970: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
+00045980: 6170 6950 7269 7661 7465 4765 7441 6363  apiPrivateGetAcc
+00045990: 6f75 6e74 270a 2020 2020 2020 2020 7265  ount'.        re
+000459a0: 7370 6f6e 7365 203d 2067 6574 6174 7472  sponse = getattr
+000459b0: 2873 656c 662c 206d 6574 686f 6429 2870  (self, method)(p
+000459c0: 6172 616d 7329 0a20 2020 2020 2020 2023  arams).        #
+000459d0: 0a20 2020 2020 2020 2023 2073 6170 6920  .        # sapi 
+000459e0: 2f20 7370 6f74 0a20 2020 2020 2020 2023  / spot.        #
+000459f0: 0a20 2020 2020 2020 2023 2020 2020 5b0a  .        #    [.
+00045a00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00045a10: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00045a20: 2020 2020 2273 796d 626f 6c22 3a20 225a      "symbol": "Z
+00045a30: 5258 424e 4222 2c0a 2020 2020 2020 2020  RXBNB",.        
+00045a40: 2320 2020 2020 2020 2020 226d 616b 6572  #         "maker
+00045a50: 436f 6d6d 6973 7369 6f6e 223a 2022 302e  Commission": "0.
+00045a60: 3030 3122 2c0a 2020 2020 2020 2020 2320  001",.        # 
+00045a70: 2020 2020 2020 2020 2274 616b 6572 436f          "takerCo
+00045a80: 6d6d 6973 7369 6f6e 223a 2022 302e 3030  mmission": "0.00
+00045a90: 3122 0a20 2020 2020 2020 2023 2020 2020  1".        #    
+00045aa0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+00045ab0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00045ac0: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
+00045ad0: 6c22 3a20 225a 5258 4254 4322 2c0a 2020  l": "ZRXBTC",.  
+00045ae0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00045af0: 226d 616b 6572 436f 6d6d 6973 7369 6f6e  "makerCommission
+00045b00: 223a 2022 302e 3030 3122 2c0a 2020 2020  ": "0.001",.    
+00045b10: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00045b20: 616b 6572 436f 6d6d 6973 7369 6f6e 223a  akerCommission":
+00045b30: 2022 302e 3030 3122 0a20 2020 2020 2020   "0.001".       
+00045b40: 2023 2020 2020 2020 207d 2c0a 2020 2020   #       },.    
+00045b50: 2020 2020 2320 2020 205d 0a20 2020 2020      #    ].     
+00045b60: 2020 2023 0a20 2020 2020 2020 2023 2066     #.        # f
+00045b70: 6170 6920 2f20 6675 7475 7265 202f 206c  api / future / l
+00045b80: 696e 6561 720a 2020 2020 2020 2020 230a  inear.        #.
+00045b90: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00045ba0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00045bb0: 2020 2266 6565 5469 6572 223a 2030 2c20    "feeTier": 0, 
+00045bc0: 2020 2020 2020 2320 6163 636f 756e 7420        # account 
+00045bd0: 636f 6d6d 6973 7373 696f 6e20 7469 6572  commisssion tier
+00045be0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00045bf0: 2020 2022 6361 6e54 7261 6465 223a 2054     "canTrade": T
+00045c00: 7275 652c 2020 2023 2069 6620 6361 6e20  rue,   # if can 
+00045c10: 7472 6164 650a 2020 2020 2020 2020 2320  trade.        # 
+00045c20: 2020 2020 2020 2020 2263 616e 4465 706f          "canDepo
+00045c30: 7369 7422 3a20 5472 7565 2c20 2020 2020  sit": True,     
+00045c40: 2320 6966 2063 616e 2074 7261 6e73 6665  # if can transfe
+00045c50: 7220 696e 2061 7373 6574 0a20 2020 2020  r in asset.     
+00045c60: 2020 2023 2020 2020 2020 2020 2022 6361     #         "ca
+00045c70: 6e57 6974 6864 7261 7722 3a20 5472 7565  nWithdraw": True
+00045c80: 2c20 2020 2023 2069 6620 6361 6e20 7472  ,    # if can tr
+00045c90: 616e 7366 6572 206f 7574 2061 7373 6574  ansfer out asset
+00045ca0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00045cb0: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
+00045cc0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+00045cd0: 2020 2020 2020 2274 6f74 616c 496e 6974        "totalInit
+00045ce0: 6961 6c4d 6172 6769 6e22 3a20 2230 2e30  ialMargin": "0.0
+00045cf0: 3030 3030 3030 3022 2c20 2020 2023 2074  0000000",    # t
+00045d00: 6f74 616c 2069 6e69 7469 616c 206d 6172  otal initial mar
+00045d10: 6769 6e20 7265 7175 6972 6564 2077 6974  gin required wit
+00045d20: 6820 6375 7272 656e 7420 6d61 726b 2070  h current mark p
+00045d30: 7269 6365 2875 7365 6c65 7373 2077 6974  rice(useless wit
+00045d40: 6820 6973 6f6c 6174 6564 2070 6f73 6974  h isolated posit
+00045d50: 696f 6e73 292c 206f 6e6c 7920 666f 7220  ions), only for 
+00045d60: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
+00045d70: 2020 2023 2020 2020 2020 2020 2022 746f     #         "to
+00045d80: 7461 6c4d 6169 6e74 4d61 7267 696e 223a  talMaintMargin":
+00045d90: 2022 302e 3030 3030 3030 3030 222c 2020   "0.00000000",  
+00045da0: 2020 2023 2074 6f74 616c 206d 6169 6e74     # total maint
+00045db0: 656e 616e 6365 206d 6172 6769 6e20 7265  enance margin re
+00045dc0: 7175 6972 6564 2c20 6f6e 6c79 2066 6f72  quired, only for
+00045dd0: 2055 5344 5420 6173 7365 740a 2020 2020   USDT asset.    
+00045de0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00045df0: 6f74 616c 5761 6c6c 6574 4261 6c61 6e63  otalWalletBalanc
+00045e00: 6522 3a20 2232 332e 3732 3436 3932 3036  e": "23.72469206
+00045e10: 222c 2020 2020 2023 2074 6f74 616c 2077  ",     # total w
+00045e20: 616c 6c65 7420 6261 6c61 6e63 652c 206f  allet balance, o
+00045e30: 6e6c 7920 666f 7220 5553 4454 2061 7373  nly for USDT ass
+00045e40: 6574 0a20 2020 2020 2020 2023 2020 2020  et.        #    
+00045e50: 2020 2020 2022 746f 7461 6c55 6e72 6561       "totalUnrea
+00045e60: 6c69 7a65 6450 726f 6669 7422 3a20 2230  lizedProfit": "0
+00045e70: 2e30 3030 3030 3030 3022 2c20 2020 2320  .00000000",   # 
+00045e80: 746f 7461 6c20 756e 7265 616c 697a 6564  total unrealized
+00045e90: 2070 726f 6669 742c 206f 6e6c 7920 666f   profit, only fo
+00045ea0: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
+00045eb0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00045ec0: 746f 7461 6c4d 6172 6769 6e42 616c 616e  totalMarginBalan
+00045ed0: 6365 223a 2022 3233 2e37 3234 3639 3230  ce": "23.7246920
+00045ee0: 3622 2c20 2020 2020 2320 746f 7461 6c20  6",     # total 
+00045ef0: 6d61 7267 696e 2062 616c 616e 6365 2c20  margin balance, 
+00045f00: 6f6e 6c79 2066 6f72 2055 5344 5420 6173  only for USDT as
+00045f10: 7365 740a 2020 2020 2020 2020 2320 2020  set.        #   
+00045f20: 2020 2020 2020 2274 6f74 616c 506f 7369        "totalPosi
+00045f30: 7469 6f6e 496e 6974 6961 6c4d 6172 6769  tionInitialMargi
+00045f40: 6e22 3a20 2230 2e30 3030 3030 3030 3022  n": "0.00000000"
+00045f50: 2c20 2020 2023 2069 6e69 7469 616c 206d  ,    # initial m
+00045f60: 6172 6769 6e20 7265 7175 6972 6564 2066  argin required f
+00045f70: 6f72 2070 6f73 6974 696f 6e73 2077 6974  or positions wit
+00045f80: 6820 6375 7272 656e 7420 6d61 726b 2070  h current mark p
+00045f90: 7269 6365 2c20 6f6e 6c79 2066 6f72 2055  rice, only for U
+00045fa0: 5344 5420 6173 7365 740a 2020 2020 2020  SDT asset.      
+00045fb0: 2020 2320 2020 2020 2020 2020 2274 6f74    #         "tot
+00045fc0: 616c 4f70 656e 4f72 6465 7249 6e69 7469  alOpenOrderIniti
+00045fd0: 616c 4d61 7267 696e 223a 2022 302e 3030  alMargin": "0.00
+00045fe0: 3030 3030 3030 222c 2020 2023 2069 6e69  000000",   # ini
+00045ff0: 7469 616c 206d 6172 6769 6e20 7265 7175  tial margin requ
+00046000: 6972 6564 2066 6f72 206f 7065 6e20 6f72  ired for open or
+00046010: 6465 7273 2077 6974 6820 6375 7272 656e  ders with curren
+00046020: 7420 6d61 726b 2070 7269 6365 2c20 6f6e  t mark price, on
+00046030: 6c79 2066 6f72 2055 5344 5420 6173 7365  ly for USDT asse
+00046040: 740a 2020 2020 2020 2020 2320 2020 2020  t.        #     
+00046050: 2020 2020 2274 6f74 616c 4372 6f73 7357      "totalCrossW
+00046060: 616c 6c65 7442 616c 616e 6365 223a 2022  alletBalance": "
+00046070: 3233 2e37 3234 3639 3230 3622 2c20 2020  23.72469206",   
+00046080: 2020 2023 2063 726f 7373 6564 2077 616c     # crossed wal
+00046090: 6c65 7420 6261 6c61 6e63 652c 206f 6e6c  let balance, onl
+000460a0: 7920 666f 7220 5553 4454 2061 7373 6574  y for USDT asset
+000460b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000460c0: 2020 2022 746f 7461 6c43 726f 7373 556e     "totalCrossUn
+000460d0: 506e 6c22 3a20 2230 2e30 3030 3030 3030  Pnl": "0.0000000
+000460e0: 3022 2c20 2020 2020 2023 2075 6e72 6561  0",      # unrea
+000460f0: 6c69 7a65 6420 7072 6f66 6974 206f 6620  lized profit of 
+00046100: 6372 6f73 7365 6420 706f 7369 7469 6f6e  crossed position
+00046110: 732c 206f 6e6c 7920 666f 7220 5553 4454  s, only for USDT
+00046120: 2061 7373 6574 0a20 2020 2020 2020 2023   asset.        #
+00046130: 2020 2020 2020 2020 2022 6176 6169 6c61           "availa
+00046140: 626c 6542 616c 616e 6365 223a 2022 3233  bleBalance": "23
+00046150: 2e37 3234 3639 3230 3622 2c20 2020 2020  .72469206",     
+00046160: 2020 2320 6176 6169 6c61 626c 6520 6261    # available ba
+00046170: 6c61 6e63 652c 206f 6e6c 7920 666f 7220  lance, only for 
+00046180: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
+00046190: 2020 2023 2020 2020 2020 2020 2022 6d61     #         "ma
+000461a0: 7857 6974 6864 7261 7741 6d6f 756e 7422  xWithdrawAmount"
+000461b0: 3a20 2232 332e 3732 3436 3932 3036 2220  : "23.72469206" 
+000461c0: 2020 2020 2320 6d61 7869 6d75 6d20 616d      # maximum am
+000461d0: 6f75 6e74 2066 6f72 2074 7261 6e73 6665  ount for transfe
+000461e0: 7220 6f75 742c 206f 6e6c 7920 666f 7220  r out, only for 
+000461f0: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
+00046200: 2020 2023 2020 2020 2020 2020 202e 2e2e     #         ...
+00046210: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+00046220: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00046230: 2020 2023 2064 6170 6920 2f20 6465 6c69     # dapi / deli
+00046240: 7665 7279 202f 2069 6e76 6572 7365 0a20  very / inverse. 
+00046250: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00046260: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+00046270: 2023 2020 2020 2020 2020 2022 6361 6e44   #         "canD
+00046280: 6570 6f73 6974 223a 2054 7275 652c 0a20  eposit": True,. 
+00046290: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000462a0: 2022 6361 6e54 7261 6465 223a 2054 7275   "canTrade": Tru
+000462b0: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+000462c0: 2020 2020 2022 6361 6e57 6974 6864 7261       "canWithdra
+000462d0: 7722 3a20 5472 7565 2c0a 2020 2020 2020  w": True,.      
+000462e0: 2020 2320 2020 2020 2020 2020 2266 6565    #         "fee
+000462f0: 5469 6572 223a 2032 2c0a 2020 2020 2020  Tier": 2,.      
+00046300: 2020 2320 2020 2020 2020 2020 2275 7064    #         "upd
+00046310: 6174 6554 696d 6522 3a20 300a 2020 2020  ateTime": 0.    
+00046320: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00046330: 2020 2020 230a 2020 2020 2020 2020 6966      #.        if
+00046340: 2069 7353 706f 744f 724d 6172 6769 6e3a   isSpotOrMargin:
+00046350: 0a20 2020 2020 2020 2020 2020 2023 0a20  .            #. 
+00046360: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00046370: 5b0a 2020 2020 2020 2020 2020 2020 2320  [.            # 
+00046380: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00046390: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
+000463a0: 796d 626f 6c22 3a20 225a 5258 424e 4222  ymbol": "ZRXBNB"
+000463b0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+000463c0: 2020 2020 2020 2020 226d 616b 6572 436f          "makerCo
+000463d0: 6d6d 6973 7369 6f6e 223a 2022 302e 3030  mmission": "0.00
+000463e0: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
+000463f0: 2320 2020 2020 2020 2020 2274 616b 6572  #         "taker
+00046400: 436f 6d6d 6973 7369 6f6e 223a 2022 302e  Commission": "0.
+00046410: 3030 3122 0a20 2020 2020 2020 2020 2020  001".           
+00046420: 2023 2020 2020 2020 207d 2c0a 2020 2020   #       },.    
+00046430: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00046440: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
+00046450: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+00046460: 3a20 225a 5258 4254 4322 2c0a 2020 2020  : "ZRXBTC",.    
+00046470: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00046480: 2020 226d 616b 6572 436f 6d6d 6973 7369    "makerCommissi
+00046490: 6f6e 223a 2022 302e 3030 3122 2c0a 2020  on": "0.001",.  
+000464a0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+000464b0: 2020 2020 2274 616b 6572 436f 6d6d 6973      "takerCommis
+000464c0: 7369 6f6e 223a 2022 302e 3030 3122 0a20  sion": "0.001". 
+000464d0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000464e0: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
+000464f0: 2020 2320 2020 205d 0a20 2020 2020 2020    #    ].       
+00046500: 2020 2020 2023 0a20 2020 2020 2020 2020       #.         
+00046510: 2020 2072 6573 756c 7420 3d20 7b7d 0a20     result = {}. 
+00046520: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+00046530: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
+00046540: 2872 6573 706f 6e73 6529 293a 0a20 2020  (response)):.   
+00046550: 2020 2020 2020 2020 2020 2020 2066 6565               fee
+00046560: 203d 2073 656c 662e 7061 7273 655f 7472   = self.parse_tr
+00046570: 6164 696e 675f 6665 6528 7265 7370 6f6e  ading_fee(respon
+00046580: 7365 5b69 5d29 0a20 2020 2020 2020 2020  se[i]).         
+00046590: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
+000465a0: 6665 655b 2773 796d 626f 6c27 5d0a 2020  fee['symbol'].  
+000465b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000465c0: 7375 6c74 5b73 796d 626f 6c5d 203d 2066  sult[symbol] = f
+000465d0: 6565 0a20 2020 2020 2020 2020 2020 2072  ee.            r
+000465e0: 6574 7572 6e20 7265 7375 6c74 0a20 2020  eturn result.   
+000465f0: 2020 2020 2065 6c69 6620 6973 4c69 6e65       elif isLine
+00046600: 6172 3a0a 2020 2020 2020 2020 2020 2020  ar:.            
+00046610: 230a 2020 2020 2020 2020 2020 2020 2320  #.            # 
+00046620: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00046630: 2020 2320 2020 2020 2020 2020 2266 6565    #         "fee
+00046640: 5469 6572 223a 2030 2c20 2020 2020 2020  Tier": 0,       
+00046650: 2320 6163 636f 756e 7420 636f 6d6d 6973  # account commis
+00046660: 7373 696f 6e20 7469 6572 0a20 2020 2020  ssion tier.     
+00046670: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046680: 2022 6361 6e54 7261 6465 223a 2054 7275   "canTrade": Tru
+00046690: 652c 2020 2023 2069 6620 6361 6e20 7472  e,   # if can tr
+000466a0: 6164 650a 2020 2020 2020 2020 2020 2020  ade.            
+000466b0: 2320 2020 2020 2020 2020 2263 616e 4465  #         "canDe
+000466c0: 706f 7369 7422 3a20 5472 7565 2c20 2020  posit": True,   
+000466d0: 2020 2320 6966 2063 616e 2074 7261 6e73    # if can trans
+000466e0: 6665 7220 696e 2061 7373 6574 0a20 2020  fer in asset.   
+000466f0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00046700: 2020 2022 6361 6e57 6974 6864 7261 7722     "canWithdraw"
+00046710: 3a20 5472 7565 2c20 2020 2023 2069 6620  : True,    # if 
+00046720: 6361 6e20 7472 616e 7366 6572 206f 7574  can transfer out
+00046730: 2061 7373 6574 0a20 2020 2020 2020 2020   asset.         
+00046740: 2020 2023 2020 2020 2020 2020 2022 7570     #         "up
+00046750: 6461 7465 5469 6d65 223a 2030 2c0a 2020  dateTime": 0,.  
+00046760: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00046770: 2020 2020 2274 6f74 616c 496e 6974 6961      "totalInitia
+00046780: 6c4d 6172 6769 6e22 3a20 2230 2e30 3030  lMargin": "0.000
+00046790: 3030 3030 3022 2c20 2020 2023 2074 6f74  00000",    # tot
+000467a0: 616c 2069 6e69 7469 616c 206d 6172 6769  al initial margi
+000467b0: 6e20 7265 7175 6972 6564 2077 6974 6820  n required with 
+000467c0: 6375 7272 656e 7420 6d61 726b 2070 7269  current mark pri
+000467d0: 6365 2875 7365 6c65 7373 2077 6974 6820  ce(useless with 
+000467e0: 6973 6f6c 6174 6564 2070 6f73 6974 696f  isolated positio
+000467f0: 6e73 292c 206f 6e6c 7920 666f 7220 5553  ns), only for US
+00046800: 4454 2061 7373 6574 0a20 2020 2020 2020  DT asset.       
+00046810: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046820: 746f 7461 6c4d 6169 6e74 4d61 7267 696e  totalMaintMargin
+00046830: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
+00046840: 2020 2020 2023 2074 6f74 616c 206d 6169       # total mai
+00046850: 6e74 656e 616e 6365 206d 6172 6769 6e20  ntenance margin 
+00046860: 7265 7175 6972 6564 2c20 6f6e 6c79 2066  required, only f
+00046870: 6f72 2055 5344 5420 6173 7365 740a 2020  or USDT asset.  
+00046880: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00046890: 2020 2020 2274 6f74 616c 5761 6c6c 6574      "totalWallet
+000468a0: 4261 6c61 6e63 6522 3a20 2232 332e 3732  Balance": "23.72
+000468b0: 3436 3932 3036 222c 2020 2020 2023 2074  469206",     # t
+000468c0: 6f74 616c 2077 616c 6c65 7420 6261 6c61  otal wallet bala
+000468d0: 6e63 652c 206f 6e6c 7920 666f 7220 5553  nce, only for US
+000468e0: 4454 2061 7373 6574 0a20 2020 2020 2020  DT asset.       
+000468f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046900: 746f 7461 6c55 6e72 6561 6c69 7a65 6450  totalUnrealizedP
+00046910: 726f 6669 7422 3a20 2230 2e30 3030 3030  rofit": "0.00000
+00046920: 3030 3022 2c20 2020 2320 746f 7461 6c20  000",   # total 
+00046930: 756e 7265 616c 697a 6564 2070 726f 6669  unrealized profi
+00046940: 742c 206f 6e6c 7920 666f 7220 5553 4454  t, only for USDT
+00046950: 2061 7373 6574 0a20 2020 2020 2020 2020   asset.         
+00046960: 2020 2023 2020 2020 2020 2020 2022 746f     #         "to
+00046970: 7461 6c4d 6172 6769 6e42 616c 616e 6365  talMarginBalance
+00046980: 223a 2022 3233 2e37 3234 3639 3230 3622  ": "23.72469206"
+00046990: 2c20 2020 2020 2320 746f 7461 6c20 6d61  ,     # total ma
+000469a0: 7267 696e 2062 616c 616e 6365 2c20 6f6e  rgin balance, on
+000469b0: 6c79 2066 6f72 2055 5344 5420 6173 7365  ly for USDT asse
+000469c0: 740a 2020 2020 2020 2020 2020 2020 2320  t.            # 
+000469d0: 2020 2020 2020 2020 2274 6f74 616c 506f          "totalPo
+000469e0: 7369 7469 6f6e 496e 6974 6961 6c4d 6172  sitionInitialMar
+000469f0: 6769 6e22 3a20 2230 2e30 3030 3030 3030  gin": "0.0000000
+00046a00: 3022 2c20 2020 2023 2069 6e69 7469 616c  0",    # initial
+00046a10: 206d 6172 6769 6e20 7265 7175 6972 6564   margin required
+00046a20: 2066 6f72 2070 6f73 6974 696f 6e73 2077   for positions w
+00046a30: 6974 6820 6375 7272 656e 7420 6d61 726b  ith current mark
+00046a40: 2070 7269 6365 2c20 6f6e 6c79 2066 6f72   price, only for
+00046a50: 2055 5344 5420 6173 7365 740a 2020 2020   USDT asset.    
+00046a60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00046a70: 2020 2274 6f74 616c 4f70 656e 4f72 6465    "totalOpenOrde
+00046a80: 7249 6e69 7469 616c 4d61 7267 696e 223a  rInitialMargin":
+00046a90: 2022 302e 3030 3030 3030 3030 222c 2020   "0.00000000",  
+00046aa0: 2023 2069 6e69 7469 616c 206d 6172 6769   # initial margi
+00046ab0: 6e20 7265 7175 6972 6564 2066 6f72 206f  n required for o
+00046ac0: 7065 6e20 6f72 6465 7273 2077 6974 6820  pen orders with 
+00046ad0: 6375 7272 656e 7420 6d61 726b 2070 7269  current mark pri
+00046ae0: 6365 2c20 6f6e 6c79 2066 6f72 2055 5344  ce, only for USD
+00046af0: 5420 6173 7365 740a 2020 2020 2020 2020  T asset.        
+00046b00: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00046b10: 6f74 616c 4372 6f73 7357 616c 6c65 7442  otalCrossWalletB
+00046b20: 616c 616e 6365 223a 2022 3233 2e37 3234  alance": "23.724
+00046b30: 3639 3230 3622 2c20 2020 2020 2023 2063  69206",      # c
+00046b40: 726f 7373 6564 2077 616c 6c65 7420 6261  rossed wallet ba
+00046b50: 6c61 6e63 652c 206f 6e6c 7920 666f 7220  lance, only for 
+00046b60: 5553 4454 2061 7373 6574 0a20 2020 2020  USDT asset.     
+00046b70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046b80: 2022 746f 7461 6c43 726f 7373 556e 506e   "totalCrossUnPn
+00046b90: 6c22 3a20 2230 2e30 3030 3030 3030 3022  l": "0.00000000"
+00046ba0: 2c20 2020 2020 2023 2075 6e72 6561 6c69  ,      # unreali
+00046bb0: 7a65 6420 7072 6f66 6974 206f 6620 6372  zed profit of cr
+00046bc0: 6f73 7365 6420 706f 7369 7469 6f6e 732c  ossed positions,
+00046bd0: 206f 6e6c 7920 666f 7220 5553 4454 2061   only for USDT a
+00046be0: 7373 6574 0a20 2020 2020 2020 2020 2020  sset.           
+00046bf0: 2023 2020 2020 2020 2020 2022 6176 6169   #         "avai
+00046c00: 6c61 626c 6542 616c 616e 6365 223a 2022  lableBalance": "
+00046c10: 3233 2e37 3234 3639 3230 3622 2c20 2020  23.72469206",   
+00046c20: 2020 2020 2320 6176 6169 6c61 626c 6520      # available 
+00046c30: 6261 6c61 6e63 652c 206f 6e6c 7920 666f  balance, only fo
+00046c40: 7220 5553 4454 2061 7373 6574 0a20 2020  r USDT asset.   
+00046c50: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00046c60: 2020 2022 6d61 7857 6974 6864 7261 7741     "maxWithdrawA
+00046c70: 6d6f 756e 7422 3a20 2232 332e 3732 3436  mount": "23.7246
+00046c80: 3932 3036 2220 2020 2020 2320 6d61 7869  9206"     # maxi
+00046c90: 6d75 6d20 616d 6f75 6e74 2066 6f72 2074  mum amount for t
+00046ca0: 7261 6e73 6665 7220 6f75 742c 206f 6e6c  ransfer out, onl
+00046cb0: 7920 666f 7220 5553 4454 2061 7373 6574  y for USDT asset
+00046cc0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00046cd0: 2020 2020 2020 202e 2e2e 0a20 2020 2020         ....     
+00046ce0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00046cf0: 2020 2020 2020 2020 2020 2023 0a20 2020             #.   
+00046d00: 2020 2020 2020 2020 2073 796d 626f 6c73           symbols
+00046d10: 203d 206c 6973 7428 7365 6c66 2e6d 6172   = list(self.mar
+00046d20: 6b65 7473 2e6b 6579 7328 2929 0a20 2020  kets.keys()).   
+00046d30: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00046d40: 3d20 7b7d 0a20 2020 2020 2020 2020 2020  = {}.           
+00046d50: 2066 6565 5469 6572 203d 2073 656c 662e   feeTier = self.
+00046d60: 7361 6665 5f69 6e74 6567 6572 2872 6573  safe_integer(res
+00046d70: 706f 6e73 652c 2027 6665 6554 6965 7227  ponse, 'feeTier'
+00046d80: 290a 2020 2020 2020 2020 2020 2020 6665  ).            fe
+00046d90: 6554 6965 7273 203d 2073 656c 662e 6665  eTiers = self.fe
+00046da0: 6573 5b27 6c69 6e65 6172 275d 5b27 7472  es['linear']['tr
+00046db0: 6164 696e 6727 5d5b 2774 6965 7273 275d  ading']['tiers']
+00046dc0: 0a20 2020 2020 2020 2020 2020 206d 616b  .            mak
+00046dd0: 6572 203d 2066 6565 5469 6572 735b 276d  er = feeTiers['m
+00046de0: 616b 6572 275d 5b66 6565 5469 6572 5d5b  aker'][feeTier][
+00046df0: 315d 0a20 2020 2020 2020 2020 2020 2074  1].            t
+00046e00: 616b 6572 203d 2066 6565 5469 6572 735b  aker = feeTiers[
+00046e10: 2774 616b 6572 275d 5b66 6565 5469 6572  'taker'][feeTier
+00046e20: 5d5b 315d 0a20 2020 2020 2020 2020 2020  ][1].           
+00046e30: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00046e40: 302c 206c 656e 2873 796d 626f 6c73 2929  0, len(symbols))
+00046e50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00046e60: 2020 7379 6d62 6f6c 203d 2073 796d 626f    symbol = symbo
+00046e70: 6c73 5b69 5d0a 2020 2020 2020 2020 2020  ls[i].          
+00046e80: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00046e90: 656c 662e 6d61 726b 6574 735b 7379 6d62  elf.markets[symb
+00046ea0: 6f6c 5d0a 2020 2020 2020 2020 2020 2020  ol].            
+00046eb0: 2020 2020 6966 206d 6172 6b65 745b 276c      if market['l
+00046ec0: 696e 6561 7227 5d3a 0a20 2020 2020 2020  inear']:.       
+00046ed0: 2020 2020 2020 2020 2020 2020 2072 6573               res
+00046ee0: 756c 745b 7379 6d62 6f6c 5d20 3d20 7b0a  ult[symbol] = {.
+00046ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046f00: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
+00046f10: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00046f20: 2020 2020 2020 2020 2020 2020 2020 2766                'f
+00046f30: 6565 5469 6572 273a 2066 6565 5469 6572  eeTier': feeTier
+00046f40: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00046f50: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+00046f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046f70: 2020 2020 2027 7379 6d62 6f6c 273a 2073       'symbol': s
+00046f80: 796d 626f 6c2c 0a20 2020 2020 2020 2020  ymbol,.         
+00046f90: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00046fa0: 6d61 6b65 7227 3a20 6d61 6b65 722c 0a20  maker': maker,. 
+00046fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046fc0: 2020 2020 2020 2027 7461 6b65 7227 3a20         'taker': 
+00046fd0: 7461 6b65 722c 0a20 2020 2020 2020 2020  taker,.         
+00046fe0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00046ff0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00047000: 7265 7375 6c74 0a20 2020 2020 2020 2065  result.        e
+00047010: 6c69 6620 6973 496e 7665 7273 653a 0a20  lif isInverse:. 
+00047020: 2020 2020 2020 2020 2020 2023 0a20 2020             #.   
+00047030: 2020 2020 2020 2020 2023 2020 2020 207b           #     {
+00047040: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00047050: 2020 2020 2020 2022 6361 6e44 6570 6f73         "canDepos
+00047060: 6974 223a 2054 7275 652c 0a20 2020 2020  it": True,.     
+00047070: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00047080: 2022 6361 6e54 7261 6465 223a 2054 7275   "canTrade": Tru
+00047090: 652c 0a20 2020 2020 2020 2020 2020 2023  e,.            #
+000470a0: 2020 2020 2020 2020 2022 6361 6e57 6974           "canWit
+000470b0: 6864 7261 7722 3a20 5472 7565 2c0a 2020  hdraw": True,.  
+000470c0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+000470d0: 2020 2020 2266 6565 5469 6572 223a 2032      "feeTier": 2
+000470e0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+000470f0: 2020 2020 2020 2020 2275 7064 6174 6554          "updateT
+00047100: 696d 6522 3a20 300a 2020 2020 2020 2020  ime": 0.        
+00047110: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00047120: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00047130: 2020 2020 2020 7379 6d62 6f6c 7320 3d20        symbols = 
+00047140: 6c69 7374 2873 656c 662e 6d61 726b 6574  list(self.market
+00047150: 732e 6b65 7973 2829 290a 2020 2020 2020  s.keys()).      
+00047160: 2020 2020 2020 7265 7375 6c74 203d 207b        result = {
+00047170: 7d0a 2020 2020 2020 2020 2020 2020 6665  }.            fe
+00047180: 6554 6965 7220 3d20 7365 6c66 2e73 6166  eTier = self.saf
+00047190: 655f 696e 7465 6765 7228 7265 7370 6f6e  e_integer(respon
+000471a0: 7365 2c20 2766 6565 5469 6572 2729 0a20  se, 'feeTier'). 
+000471b0: 2020 2020 2020 2020 2020 2066 6565 5469             feeTi
+000471c0: 6572 7320 3d20 7365 6c66 2e66 6565 735b  ers = self.fees[
+000471d0: 2769 6e76 6572 7365 275d 5b27 7472 6164  'inverse']['trad
+000471e0: 696e 6727 5d5b 2774 6965 7273 275d 0a20  ing']['tiers']. 
+000471f0: 2020 2020 2020 2020 2020 206d 616b 6572             maker
+00047200: 203d 2066 6565 5469 6572 735b 276d 616b   = feeTiers['mak
+00047210: 6572 275d 5b66 6565 5469 6572 5d5b 315d  er'][feeTier][1]
+00047220: 0a20 2020 2020 2020 2020 2020 2074 616b  .            tak
+00047230: 6572 203d 2066 6565 5469 6572 735b 2774  er = feeTiers['t
+00047240: 616b 6572 275d 5b66 6565 5469 6572 5d5b  aker'][feeTier][
+00047250: 315d 0a20 2020 2020 2020 2020 2020 2066  1].            f
+00047260: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+00047270: 206c 656e 2873 796d 626f 6c73 2929 3a0a   len(symbols)):.
+00047280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047290: 7379 6d62 6f6c 203d 2073 796d 626f 6c73  symbol = symbols
+000472a0: 5b69 5d0a 2020 2020 2020 2020 2020 2020  [i].            
+000472b0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+000472c0: 662e 6d61 726b 6574 735b 7379 6d62 6f6c  f.markets[symbol
+000472d0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+000472e0: 2020 6966 206d 6172 6b65 745b 2769 6e76    if market['inv
+000472f0: 6572 7365 275d 3a0a 2020 2020 2020 2020  erse']:.        
+00047300: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00047310: 6c74 5b73 796d 626f 6c5d 203d 207b 0a20  lt[symbol] = {. 
+00047320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047330: 2020 2020 2020 2027 696e 666f 273a 207b         'info': {
+00047340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047350: 2020 2020 2020 2020 2020 2020 2027 6665               'fe
+00047360: 6554 6965 7227 3a20 6665 6554 6965 722c  eTier': feeTier,
+00047370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047380: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00047390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000473a0: 2020 2020 2773 796d 626f 6c27 3a20 7379      'symbol': sy
+000473b0: 6d62 6f6c 2c0a 2020 2020 2020 2020 2020  mbol,.          
+000473c0: 2020 2020 2020 2020 2020 2020 2020 276d                'm
+000473d0: 616b 6572 273a 206d 616b 6572 2c0a 2020  aker': maker,.  
+000473e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000473f0: 2020 2020 2020 2774 616b 6572 273a 2074        'taker': t
+00047400: 616b 6572 2c0a 2020 2020 2020 2020 2020  aker,.          
+00047410: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00047420: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00047430: 6573 756c 740a 2020 2020 2020 2020 7265  esult.        re
+00047440: 7475 726e 204e 6f6e 650a 0a20 2020 2064  turn None..    d
+00047450: 6566 2066 7574 7572 6573 5f74 7261 6e73  ef futures_trans
+00047460: 6665 7228 7365 6c66 2c20 636f 6465 3a20  fer(self, code: 
+00047470: 7374 722c 2061 6d6f 756e 742c 2074 7970  str, amount, typ
+00047480: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+00047490: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000474a0: 2020 2074 7261 6e73 6665 7220 6265 7477     transfer betw
+000474b0: 6565 6e20 6675 7475 7265 7320 6163 636f  een futures acco
+000474c0: 756e 740a 2020 2020 2020 2020 3a70 6172  unt.        :par
+000474d0: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+000474e0: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+000474f0: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+00047500: 6d20 666c 6f61 7420 616d 6f75 6e74 3a20  m float amount: 
+00047510: 7468 6520 616d 6f75 6e74 2074 6f20 7472  the amount to tr
+00047520: 616e 7366 6572 0a20 2020 2020 2020 203a  ansfer.        :
+00047530: 7061 7261 6d20 7374 7220 7479 7065 3a20  param str type: 
+00047540: 3120 2d20 7472 616e 7366 6572 2066 726f  1 - transfer fro
+00047550: 6d20 7370 6f74 2061 6363 6f75 6e74 2074  m spot account t
+00047560: 6f20 5553 4454 2de2 9382 2066 7574 7572  o USDT-... futur
+00047570: 6573 2061 6363 6f75 6e74 2c20 3220 2d20  es account, 2 - 
+00047580: 7472 616e 7366 6572 2066 726f 6d20 5553  transfer from US
+00047590: 4454 2de2 9382 2066 7574 7572 6573 2061  DT-... futures a
+000475a0: 6363 6f75 6e74 2074 6f20 7370 6f74 2061  ccount to spot a
+000475b0: 6363 6f75 6e74 2c20 3320 2d20 7472 616e  ccount, 3 - tran
+000475c0: 7366 6572 2066 726f 6d20 7370 6f74 2061  sfer from spot a
+000475d0: 6363 6f75 6e74 2074 6f20 434f 494e 2de2  ccount to COIN-.
+000475e0: 9382 2066 7574 7572 6573 2061 6363 6f75  .. futures accou
+000475f0: 6e74 2c20 3420 2d20 7472 616e 7366 6572  nt, 4 - transfer
+00047600: 2066 726f 6d20 434f 494e 2de2 9382 2066   from COIN-... f
+00047610: 7574 7572 6573 2061 6363 6f75 6e74 2074  utures account t
+00047620: 6f20 7370 6f74 2061 6363 6f75 6e74 0a20  o spot account. 
+00047630: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+00047640: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+00047650: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+00047660: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
+00047670: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
+00047680: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00047690: 666c 6f61 747c 4e6f 6e65 2070 6172 616d  float|None param
+000476a0: 732e 7265 6376 5769 6e64 6f77 3a0a 2020  s.recvWindow:.  
+000476b0: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
+000476c0: 6963 743a 2061 2060 7472 616e 7366 6572  ict: a `transfer
+000476d0: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
+000476e0: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+000476f0: 6d2f 232f 3f69 643d 6675 7475 7265 732d  m/#/?id=futures-
+00047700: 7472 616e 7366 6572 2d73 7472 7563 7475  transfer-structu
+00047710: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+00047720: 0a20 2020 2020 2020 2069 6620 2874 7970  .        if (typ
+00047730: 6520 3c20 3129 206f 7220 2874 7970 6520  e < 1) or (type 
+00047740: 3e20 3429 3a0a 2020 2020 2020 2020 2020  > 4):.          
+00047750: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
+00047760: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
+00047770: 6420 2b20 2720 7479 7065 206d 7573 7420  d + ' type must 
+00047780: 6265 2062 6574 7765 656e 2031 2061 6e64  be between 1 and
+00047790: 2034 2729 0a20 2020 2020 2020 2073 656c   4').        sel
+000477a0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+000477b0: 0a20 2020 2020 2020 2063 7572 7265 6e63  .        currenc
+000477c0: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+000477d0: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+000477e0: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+000477f0: 2020 2020 2020 2020 2761 7373 6574 273a          'asset':
+00047800: 2063 7572 7265 6e63 795b 2769 6427 5d2c   currency['id'],
+00047810: 0a20 2020 2020 2020 2020 2020 2027 616d  .            'am
+00047820: 6f75 6e74 273a 2061 6d6f 756e 742c 0a20  ount': amount,. 
+00047830: 2020 2020 2020 2020 2020 2027 7479 7065             'type
+00047840: 273a 2074 7970 652c 0a20 2020 2020 2020  ': type,.       
+00047850: 207d 0a20 2020 2020 2020 2072 6573 706f   }.        respo
+00047860: 6e73 6520 3d20 7365 6c66 2e73 6170 6950  nse = self.sapiP
+00047870: 6f73 7446 7574 7572 6573 5472 616e 7366  ostFuturesTransf
+00047880: 6572 2873 656c 662e 6578 7465 6e64 2872  er(self.extend(r
+00047890: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+000478a0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+000478b0: 2020 2023 2020 207b 0a20 2020 2020 2020     #   {.       
+000478c0: 2023 2020 2020 2020 2022 7472 616e 4964   #       "tranId
+000478d0: 223a 2031 3030 3030 3030 3031 0a20 2020  ": 100000001.   
+000478e0: 2020 2020 2023 2020 207d 0a20 2020 2020       #   }.     
+000478f0: 2020 2023 0a20 2020 2020 2020 2072 6574     #.        ret
+00047900: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+00047910: 7261 6e73 6665 7228 7265 7370 6f6e 7365  ransfer(response
+00047920: 2c20 6375 7272 656e 6379 290a 0a20 2020  , currency)..   
+00047930: 2064 6566 2066 6574 6368 5f66 756e 6469   def fetch_fundi
+00047940: 6e67 5f72 6174 6528 7365 6c66 2c20 7379  ng_rate(self, sy
+00047950: 6d62 6f6c 3a20 7374 722c 2070 6172 616d  mbol: str, param
+00047960: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00047970: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+00047980: 2074 6865 2063 7572 7265 6e74 2066 756e   the current fun
+00047990: 6469 6e67 2072 6174 650a 2020 2020 2020  ding rate.      
+000479a0: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
+000479b0: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
+000479c0: 6b65 7420 7379 6d62 6f6c 0a20 2020 2020  ket symbol.     
+000479d0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+000479e0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+000479f0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+00047a00: 2074 6f20 7468 6520 6269 6e61 6e63 6520   to the binance 
+00047a10: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+00047a20: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+00047a30: 6374 3a20 6120 6066 756e 6469 6e67 2072  ct: a `funding r
+00047a40: 6174 6520 7374 7275 6374 7572 6520 3c68  ate structure <h
+00047a50: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00047a60: 2e63 6f6d 2f23 2f3f 6964 3d66 756e 6469  .com/#/?id=fundi
+00047a70: 6e67 2d72 6174 652d 7374 7275 6374 7572  ng-rate-structur
+00047a80: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00047a90: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+00047aa0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00047ab0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00047ac0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00047ad0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+00047ae0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00047af0: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
+00047b00: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
+00047b10: 207d 0a20 2020 2020 2020 206d 6574 686f   }.        metho
+00047b20: 6420 3d20 4e6f 6e65 0a20 2020 2020 2020  d = None.       
+00047b30: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
+00047b40: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
+00047b50: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
+00047b60: 5075 626c 6963 4765 7450 7265 6d69 756d  PublicGetPremium
+00047b70: 496e 6465 7827 0a20 2020 2020 2020 2065  Index'.        e
+00047b80: 6c69 6620 6d61 726b 6574 5b27 696e 7665  lif market['inve
+00047b90: 7273 6527 5d3a 0a20 2020 2020 2020 2020  rse']:.         
+00047ba0: 2020 206d 6574 686f 6420 3d20 2764 6170     method = 'dap
+00047bb0: 6950 7562 6c69 6347 6574 5072 656d 6975  iPublicGetPremiu
+00047bc0: 6d49 6e64 6578 270a 2020 2020 2020 2020  mIndex'.        
+00047bd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00047be0: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+00047bf0: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+00047c00: 2066 6574 6368 4675 6e64 696e 6752 6174   fetchFundingRat
+00047c10: 6528 2920 7375 7070 6f72 7473 206c 696e  e() supports lin
+00047c20: 6561 7220 616e 6420 696e 7665 7273 6520  ear and inverse 
+00047c30: 636f 6e74 7261 6374 7320 6f6e 6c79 2729  contracts only')
+00047c40: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+00047c50: 6520 3d20 6765 7461 7474 7228 7365 6c66  e = getattr(self
+00047c60: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
+00047c70: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00047c80: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00047c90: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+00047ca0: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+00047cb0: 2020 7265 7370 6f6e 7365 203d 2072 6573    response = res
+00047cc0: 706f 6e73 655b 305d 0a20 2020 2020 2020  ponse[0].       
+00047cd0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00047ce0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00047cf0: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+00047d00: 4254 4355 5344 5422 2c0a 2020 2020 2020  BTCUSDT",.      
+00047d10: 2020 2320 2020 2020 2020 2020 226d 6172    #         "mar
+00047d20: 6b50 7269 6365 223a 2022 3435 3830 322e  kPrice": "45802.
+00047d30: 3831 3132 3938 3932 222c 0a20 2020 2020  81129892",.     
+00047d40: 2020 2023 2020 2020 2020 2020 2022 696e     #         "in
+00047d50: 6465 7850 7269 6365 223a 2022 3435 3734  dexPrice": "4574
+00047d60: 352e 3437 3730 3139 3135 222c 0a20 2020  5.47701915",.   
+00047d70: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00047d80: 6573 7469 6d61 7465 6453 6574 746c 6550  estimatedSettleP
+00047d90: 7269 6365 223a 2022 3435 3133 332e 3931  rice": "45133.91
+00047da0: 3735 3336 3731 222c 0a20 2020 2020 2020  753671",.       
+00047db0: 2023 2020 2020 2020 2020 2022 6c61 7374   #         "last
+00047dc0: 4675 6e64 696e 6752 6174 6522 3a20 2230  FundingRate": "0
+00047dd0: 2e30 3030 3633 3532 3122 2c0a 2020 2020  .00063521",.    
+00047de0: 2020 2020 2320 2020 2020 2020 2020 2269      #         "i
+00047df0: 6e74 6572 6573 7452 6174 6522 3a20 2230  nterestRate": "0
+00047e00: 2e30 3030 3130 3030 3022 2c0a 2020 2020  .00010000",.    
+00047e10: 2020 2020 2320 2020 2020 2020 2020 226e      #         "n
+00047e20: 6578 7446 756e 6469 6e67 5469 6d65 223a  extFundingTime":
+00047e30: 2022 3136 3231 3236 3732 3030 3030 3022   "1621267200000"
+00047e40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00047e50: 2020 2020 2274 696d 6522 3a20 2231 3632      "time": "162
+00047e60: 3132 3532 3334 3430 3031 220a 2020 2020  1252344001".    
+00047e70: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00047e80: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+00047e90: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+00047ea0: 6675 6e64 696e 675f 7261 7465 2872 6573  funding_rate(res
+00047eb0: 706f 6e73 652c 206d 6172 6b65 7429 0a0a  ponse, market)..
+00047ec0: 2020 2020 6465 6620 6665 7463 685f 6675      def fetch_fu
+00047ed0: 6e64 696e 675f 7261 7465 5f68 6973 746f  nding_rate_histo
+00047ee0: 7279 2873 656c 662c 2073 796d 626f 6c3a  ry(self, symbol:
+00047ef0: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+00047f00: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
+00047f10: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00047f20: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
+00047f30: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+00047f40: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00047f50: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00047f60: 2066 6574 6368 6573 2068 6973 746f 7269   fetches histori
+00047f70: 6361 6c20 6675 6e64 696e 6720 7261 7465  cal funding rate
+00047f80: 2070 7269 6365 730a 2020 2020 2020 2020   prices.        
+00047f90: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+00047fa0: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+00047fb0: 7379 6d62 6f6c 206f 6620 7468 6520 6d61  symbol of the ma
+00047fc0: 726b 6574 2074 6f20 6665 7463 6820 7468  rket to fetch th
+00047fd0: 6520 6675 6e64 696e 6720 7261 7465 2068  e funding rate h
+00047fe0: 6973 746f 7279 2066 6f72 0a20 2020 2020  istory for.     
+00047ff0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+00048000: 6e65 2073 696e 6365 3a20 7469 6d65 7374  ne since: timest
+00048010: 616d 7020 696e 206d 7320 6f66 2074 6865  amp in ms of the
+00048020: 2065 6172 6c69 6573 7420 6675 6e64 696e   earliest fundin
+00048030: 6720 7261 7465 2074 6f20 6665 7463 680a  g rate to fetch.
+00048040: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00048050: 6e74 7c4e 6f6e 6520 6c69 6d69 743a 2074  nt|None limit: t
+00048060: 6865 206d 6178 696d 756d 2061 6d6f 756e  he maximum amoun
+00048070: 7420 6f66 2060 6675 6e64 696e 6720 7261  t of `funding ra
+00048080: 7465 2073 7472 7563 7475 7265 7320 3c68  te structures <h
+00048090: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+000480a0: 2e63 6f6d 2f65 6e2f 6c61 7465 7374 2f6d  .com/en/latest/m
+000480b0: 616e 7561 6c2e 6874 6d6c 3f23 6675 6e64  anual.html?#fund
+000480c0: 696e 672d 7261 7465 2d68 6973 746f 7279  ing-rate-history
+000480d0: 2d73 7472 7563 7475 7265 3e60 2074 6f20  -structure>` to 
+000480e0: 6665 7463 680a 2020 2020 2020 2020 3a70  fetch.        :p
+000480f0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+00048100: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+00048110: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+00048120: 6865 2062 696e 616e 6365 2061 7069 2065  he binance api e
+00048130: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+00048140: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+00048150: 7061 7261 6d73 5b27 756e 7469 6c27 5d3a  params['until']:
+00048160: 2074 696d 6573 7461 6d70 2069 6e20 6d73   timestamp in ms
+00048170: 206f 6620 7468 6520 6c61 7465 7374 2066   of the latest f
+00048180: 756e 6469 6e67 2072 6174 650a 2020 2020  unding rate.    
+00048190: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
+000481a0: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
+000481b0: 6675 6e64 696e 6720 7261 7465 2073 7472  funding rate str
+000481c0: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+000481d0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f65  /docs.ccxt.com/e
+000481e0: 6e2f 6c61 7465 7374 2f6d 616e 7561 6c2e  n/latest/manual.
+000481f0: 6874 6d6c 3f23 6675 6e64 696e 672d 7261  html?#funding-ra
+00048200: 7465 2d68 6973 746f 7279 2d73 7472 7563  te-history-struc
+00048210: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00048220: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00048230: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00048240: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00048250: 207b 7d0a 2020 2020 2020 2020 6d65 7468   {}.        meth
+00048260: 6f64 203d 204e 6f6e 650a 2020 2020 2020  od = None.      
+00048270: 2020 6465 6661 756c 7454 7970 6520 3d20    defaultType = 
+00048280: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00048290: 5f32 2873 656c 662e 6f70 7469 6f6e 732c  _2(self.options,
+000482a0: 2027 6665 7463 6846 756e 6469 6e67 5261   'fetchFundingRa
+000482b0: 7465 4869 7374 6f72 7927 2c20 2764 6566  teHistory', 'def
+000482c0: 6175 6c74 5479 7065 272c 2027 6675 7475  aultType', 'futu
+000482d0: 7265 2729 0a20 2020 2020 2020 2074 7970  re').        typ
+000482e0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+000482f0: 7269 6e67 2870 6172 616d 732c 2027 7479  ring(params, 'ty
+00048300: 7065 272c 2064 6566 6175 6c74 5479 7065  pe', defaultType
+00048310: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+00048320: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00048330: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
+00048340: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00048350: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00048360: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00048370: 2020 2020 2020 2020 2020 2020 7379 6d62              symb
+00048380: 6f6c 203d 206d 6172 6b65 745b 2773 796d  ol = market['sym
+00048390: 626f 6c27 5d0a 2020 2020 2020 2020 2020  bol'].          
+000483a0: 2020 7265 7175 6573 745b 2773 796d 626f    request['symbo
+000483b0: 6c27 5d20 3d20 6d61 726b 6574 5b27 6964  l'] = market['id
+000483c0: 275d 0a20 2020 2020 2020 2073 7562 5479  '].        subTy
+000483d0: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
+000483e0: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
+000483f0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+00048400: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
+00048410: 616d 7328 2766 6574 6368 4675 6e64 696e  ams('fetchFundin
+00048420: 6752 6174 6548 6973 746f 7279 272c 206d  gRateHistory', m
+00048430: 6172 6b65 742c 2070 6172 616d 732c 2027  arket, params, '
+00048440: 6c69 6e65 6172 2729 0a20 2020 2020 2020  linear').       
+00048450: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+00048460: 6d69 7428 7061 7261 6d73 2c20 2774 7970  mit(params, 'typ
+00048470: 6527 290a 2020 2020 2020 2020 6966 2073  e').        if s
+00048480: 656c 662e 6973 5f6c 696e 6561 7228 7479  elf.is_linear(ty
+00048490: 7065 2c20 7375 6254 7970 6529 3a0a 2020  pe, subType):.  
+000484a0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+000484b0: 203d 2027 6661 7069 5075 626c 6963 4765   = 'fapiPublicGe
+000484c0: 7446 756e 6469 6e67 5261 7465 270a 2020  tFundingRate'.  
+000484d0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+000484e0: 6973 5f69 6e76 6572 7365 2874 7970 652c  is_inverse(type,
+000484f0: 2073 7562 5479 7065 293a 0a20 2020 2020   subType):.     
+00048500: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00048510: 2764 6170 6950 7562 6c69 6347 6574 4675  'dapiPublicGetFu
+00048520: 6e64 696e 6752 6174 6527 0a20 2020 2020  ndingRate'.     
+00048530: 2020 2069 6620 6d65 7468 6f64 2069 7320     if method is 
+00048540: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00048550: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+00048560: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+00048570: 2066 6574 6368 4675 6e64 696e 6752 6174   fetchFundingRat
+00048580: 6548 6973 746f 7279 2829 2069 7320 6e6f  eHistory() is no
+00048590: 7420 7375 7070 6f72 7465 6420 666f 7220  t supported for 
+000485a0: 2720 2b20 7479 7065 202b 2027 206d 6172  ' + type + ' mar
+000485b0: 6b65 7473 2729 0a20 2020 2020 2020 2069  kets').        i
+000485c0: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
+000485d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000485e0: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
+000485f0: 696d 6527 5d20 3d20 7369 6e63 650a 2020  ime'] = since.  
+00048600: 2020 2020 2020 756e 7469 6c20 3d20 7365        until = se
+00048610: 6c66 2e73 6166 655f 696e 7465 6765 725f  lf.safe_integer_
+00048620: 3228 7061 7261 6d73 2c20 2775 6e74 696c  2(params, 'until
+00048630: 272c 2027 7469 6c6c 2729 2020 2320 756e  ', 'till')  # un
+00048640: 6966 6965 6420 696e 206d 696c 6c69 7365  ified in millise
+00048650: 636f 6e64 730a 2020 2020 2020 2020 656e  conds.        en
+00048660: 6454 696d 6520 3d20 7365 6c66 2e73 6166  dTime = self.saf
+00048670: 655f 696e 7465 6765 7228 7061 7261 6d73  e_integer(params
+00048680: 2c20 2765 6e64 5469 6d65 272c 2075 6e74  , 'endTime', unt
+00048690: 696c 2920 2023 2065 7863 6861 6e67 652d  il)  # exchange-
+000486a0: 7370 6563 6966 6963 2069 6e20 6d69 6c6c  specific in mill
+000486b0: 6973 6563 6f6e 6473 0a20 2020 2020 2020  iseconds.       
+000486c0: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+000486d0: 6d69 7428 7061 7261 6d73 2c20 5b27 656e  mit(params, ['en
+000486e0: 6454 696d 6527 2c20 2774 696c 6c27 2c20  dTime', 'till', 
+000486f0: 2775 6e74 696c 275d 290a 2020 2020 2020  'until']).      
+00048700: 2020 6966 2065 6e64 5469 6d65 2069 7320    if endTime is 
+00048710: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00048720: 2020 2020 2020 7265 7175 6573 745b 2765        request['e
+00048730: 6e64 5469 6d65 275d 203d 2065 6e64 5469  ndTime'] = endTi
+00048740: 6d65 0a20 2020 2020 2020 2069 6620 6c69  me.        if li
+00048750: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
+00048760: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00048770: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
+00048780: 6c69 6d69 740a 2020 2020 2020 2020 7265  limit.        re
+00048790: 7370 6f6e 7365 203d 2067 6574 6174 7472  sponse = getattr
+000487a0: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
+000487b0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+000487c0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+000487d0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+000487e0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+000487f0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+00048800: 223a 2022 4254 4355 5344 5422 2c0a 2020  ": "BTCUSDT",.  
+00048810: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00048820: 2266 756e 6469 6e67 5261 7465 223a 2022  "fundingRate": "
+00048830: 302e 3030 3036 3335 3231 222c 0a20 2020  0.00063521",.   
+00048840: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00048850: 6675 6e64 696e 6754 696d 6522 3a20 2231  fundingTime": "1
+00048860: 3632 3132 3637 3230 3030 3030 222c 0a20  621267200000",. 
+00048870: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00048880: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00048890: 2072 6174 6573 203d 205b 5d0a 2020 2020   rates = [].    
+000488a0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+000488b0: 6765 2830 2c20 6c65 6e28 7265 7370 6f6e  ge(0, len(respon
+000488c0: 7365 2929 3a0a 2020 2020 2020 2020 2020  se)):.          
+000488d0: 2020 656e 7472 7920 3d20 7265 7370 6f6e    entry = respon
+000488e0: 7365 5b69 5d0a 2020 2020 2020 2020 2020  se[i].          
+000488f0: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
+00048900: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
+00048910: 656e 7472 792c 2027 6675 6e64 696e 6754  entry, 'fundingT
+00048920: 696d 6527 290a 2020 2020 2020 2020 2020  ime').          
+00048930: 2020 7261 7465 732e 6170 7065 6e64 287b    rates.append({
+00048940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048950: 2027 696e 666f 273a 2065 6e74 7279 2c0a   'info': entry,.
+00048960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048970: 2773 796d 626f 6c27 3a20 7365 6c66 2e73  'symbol': self.s
+00048980: 6166 655f 7379 6d62 6f6c 2873 656c 662e  afe_symbol(self.
+00048990: 7361 6665 5f73 7472 696e 6728 656e 7472  safe_string(entr
+000489a0: 792c 2027 7379 6d62 6f6c 2729 2c20 4e6f  y, 'symbol'), No
+000489b0: 6e65 2c20 4e6f 6e65 2c20 2773 7761 7027  ne, None, 'swap'
+000489c0: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+000489d0: 2020 2027 6675 6e64 696e 6752 6174 6527     'fundingRate'
+000489e0: 3a20 7365 6c66 2e73 6166 655f 6e75 6d62  : self.safe_numb
+000489f0: 6572 2865 6e74 7279 2c20 2766 756e 6469  er(entry, 'fundi
+00048a00: 6e67 5261 7465 2729 2c0a 2020 2020 2020  ngRate'),.      
+00048a10: 2020 2020 2020 2020 2020 2774 696d 6573            'times
+00048a20: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
+00048a30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00048a40: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
+00048a50: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
+00048a60: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
+00048a70: 2020 207d 290a 2020 2020 2020 2020 736f     }).        so
+00048a80: 7274 6564 203d 2073 656c 662e 736f 7274  rted = self.sort
+00048a90: 5f62 7928 7261 7465 732c 2027 7469 6d65  _by(rates, 'time
+00048aa0: 7374 616d 7027 290a 2020 2020 2020 2020  stamp').        
+00048ab0: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
+00048ac0: 6572 5f62 795f 7379 6d62 6f6c 5f73 696e  er_by_symbol_sin
+00048ad0: 6365 5f6c 696d 6974 2873 6f72 7465 642c  ce_limit(sorted,
+00048ae0: 2073 796d 626f 6c2c 2073 696e 6365 2c20   symbol, since, 
+00048af0: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
+00048b00: 6665 7463 685f 6675 6e64 696e 675f 7261  fetch_funding_ra
+00048b10: 7465 7328 7365 6c66 2c20 7379 6d62 6f6c  tes(self, symbol
+00048b20: 733a 204f 7074 696f 6e61 6c5b 4c69 7374  s: Optional[List
+00048b30: 5b73 7472 5d5d 203d 204e 6f6e 652c 2070  [str]] = None, p
+00048b40: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00048b50: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
+00048b60: 6574 6368 2074 6865 2066 756e 6469 6e67  etch the funding
+00048b70: 2072 6174 6520 666f 7220 6d75 6c74 6970   rate for multip
+00048b80: 6c65 206d 6172 6b65 7473 0a20 2020 2020  le markets.     
+00048b90: 2020 203a 7061 7261 6d20 5b73 7472 5d7c     :param [str]|
+00048ba0: 4e6f 6e65 2073 796d 626f 6c73 3a20 6c69  None symbols: li
+00048bb0: 7374 206f 6620 756e 6966 6965 6420 6d61  st of unified ma
+00048bc0: 726b 6574 2073 796d 626f 6c73 0a20 2020  rket symbols.   
+00048bd0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+00048be0: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+00048bf0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+00048c00: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+00048c10: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+00048c20: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+00048c30: 6469 6374 3a20 6120 6469 6374 696f 6e61  dict: a dictiona
+00048c40: 7279 206f 6620 6066 756e 6469 6e67 2072  ry of `funding r
+00048c50: 6174 6573 2073 7472 7563 7475 7265 7320  ates structures 
+00048c60: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+00048c70: 7874 2e63 6f6d 2f23 2f3f 6964 3d66 756e  xt.com/#/?id=fun
+00048c80: 6469 6e67 2d72 6174 6573 2d73 7472 7563  ding-rates-struc
+00048c90: 7475 7265 3e60 2c20 696e 6465 7865 2062  ture>`, indexe b
+00048ca0: 7920 6d61 726b 6574 2073 796d 626f 6c73  y market symbols
+00048cb0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00048cc0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
+00048cd0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+00048ce0: 2073 796d 626f 6c73 203d 2073 656c 662e   symbols = self.
+00048cf0: 6d61 726b 6574 5f73 796d 626f 6c73 2873  market_symbols(s
+00048d00: 796d 626f 6c73 290a 2020 2020 2020 2020  ymbols).        
+00048d10: 6d65 7468 6f64 203d 204e 6f6e 650a 2020  method = None.  
+00048d20: 2020 2020 2020 6465 6661 756c 7454 7970        defaultTyp
+00048d30: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+00048d40: 7269 6e67 5f32 2873 656c 662e 6f70 7469  ring_2(self.opti
+00048d50: 6f6e 732c 2027 6665 7463 6846 756e 6469  ons, 'fetchFundi
+00048d60: 6e67 5261 7465 7327 2c20 2764 6566 6175  ngRates', 'defau
+00048d70: 6c74 5479 7065 272c 2027 6675 7475 7265  ltType', 'future
+00048d80: 2729 0a20 2020 2020 2020 2074 7970 6520  ').        type 
+00048d90: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00048da0: 6e67 2870 6172 616d 732c 2027 7479 7065  ng(params, 'type
+00048db0: 272c 2064 6566 6175 6c74 5479 7065 290a  ', defaultType).
+00048dc0: 2020 2020 2020 2020 7375 6254 7970 6520          subType 
+00048dd0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
+00048de0: 7562 5479 7065 2c20 7061 7261 6d73 203d  ubType, params =
+00048df0: 2073 656c 662e 6861 6e64 6c65 5f73 7562   self.handle_sub
+00048e00: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
+00048e10: 2827 6665 7463 6846 756e 6469 6e67 5261  ('fetchFundingRa
+00048e20: 7465 7327 2c20 4e6f 6e65 2c20 7061 7261  tes', None, para
+00048e30: 6d73 2c20 276c 696e 6561 7227 290a 2020  ms, 'linear').  
+00048e40: 2020 2020 2020 7175 6572 7920 3d20 7365        query = se
+00048e50: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+00048e60: 2774 7970 6527 290a 2020 2020 2020 2020  'type').        
+00048e70: 6966 2073 656c 662e 6973 5f6c 696e 6561  if self.is_linea
+00048e80: 7228 7479 7065 2c20 7375 6254 7970 6529  r(type, subType)
+00048e90: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+00048ea0: 7468 6f64 203d 2027 6661 7069 5075 626c  thod = 'fapiPubl
+00048eb0: 6963 4765 7450 7265 6d69 756d 496e 6465  icGetPremiumInde
+00048ec0: 7827 0a20 2020 2020 2020 2065 6c69 6620  x'.        elif 
+00048ed0: 7365 6c66 2e69 735f 696e 7665 7273 6528  self.is_inverse(
+00048ee0: 7479 7065 2c20 7375 6254 7970 6529 3a0a  type, subType):.
+00048ef0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00048f00: 6f64 203d 2027 6461 7069 5075 626c 6963  od = 'dapiPublic
+00048f10: 4765 7450 7265 6d69 756d 496e 6465 7827  GetPremiumIndex'
+00048f20: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00048f30: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00048f40: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
+00048f50: 6c66 2e69 6420 2b20 2720 6665 7463 6846  lf.id + ' fetchF
+00048f60: 756e 6469 6e67 5261 7465 7328 2920 7375  undingRates() su
+00048f70: 7070 6f72 7473 206c 696e 6561 7220 616e  pports linear an
+00048f80: 6420 696e 7665 7273 6520 636f 6e74 7261  d inverse contra
+00048f90: 6374 7320 6f6e 6c79 2729 0a20 2020 2020  cts only').     
+00048fa0: 2020 2072 6573 706f 6e73 6520 3d20 6765     response = ge
+00048fb0: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
+00048fc0: 6f64 2928 7175 6572 7929 0a20 2020 2020  od)(query).     
+00048fd0: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
+00048fe0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00048ff0: 7261 6e67 6528 302c 206c 656e 2872 6573  range(0, len(res
+00049000: 706f 6e73 6529 293a 0a20 2020 2020 2020  ponse)):.       
+00049010: 2020 2020 2065 6e74 7279 203d 2072 6573       entry = res
+00049020: 706f 6e73 655b 695d 0a20 2020 2020 2020  ponse[i].       
+00049030: 2020 2020 2070 6172 7365 6420 3d20 7365       parsed = se
+00049040: 6c66 2e70 6172 7365 5f66 756e 6469 6e67  lf.parse_funding
+00049050: 5f72 6174 6528 656e 7472 7929 0a20 2020  _rate(entry).   
+00049060: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00049070: 6170 7065 6e64 2870 6172 7365 6429 0a20  append(parsed). 
+00049080: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00049090: 6c66 2e66 696c 7465 725f 6279 5f61 7272  lf.filter_by_arr
+000490a0: 6179 2872 6573 756c 742c 2027 7379 6d62  ay(result, 'symb
+000490b0: 6f6c 272c 2073 796d 626f 6c73 290a 0a20  ol', symbols).. 
+000490c0: 2020 2064 6566 2070 6172 7365 5f66 756e     def parse_fun
+000490d0: 6469 6e67 5f72 6174 6528 7365 6c66 2c20  ding_rate(self, 
+000490e0: 636f 6e74 7261 6374 2c20 6d61 726b 6574  contract, market
+000490f0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00049100: 2320 656e 7375 7265 2069 7420 6d61 7463  # ensure it matc
+00049110: 6865 7320 7769 7468 2068 7474 7073 3a2f  hes with https:/
+00049120: 2f77 7777 2e62 696e 616e 6365 2e63 6f6d  /www.binance.com
+00049130: 2f65 6e2f 6675 7475 7265 732f 6675 6e64  /en/futures/fund
+00049140: 696e 672d 6869 7374 6f72 792f 300a 2020  ing-history/0.  
+00049150: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00049160: 2320 2020 7b0a 2020 2020 2020 2020 2320  #   {.        # 
+00049170: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+00049180: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
+00049190: 2023 2020 2020 2022 6d61 726b 5072 6963   #     "markPric
+000491a0: 6522 3a20 2234 3538 3032 2e38 3131 3239  e": "45802.81129
+000491b0: 3839 3222 2c0a 2020 2020 2020 2020 2320  892",.        # 
+000491c0: 2020 2020 2269 6e64 6578 5072 6963 6522      "indexPrice"
+000491d0: 3a20 2234 3537 3435 2e34 3737 3031 3931  : "45745.4770191
+000491e0: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
+000491f0: 2020 2265 7374 696d 6174 6564 5365 7474    "estimatedSett
+00049200: 6c65 5072 6963 6522 3a20 2234 3531 3333  lePrice": "45133
+00049210: 2e39 3137 3533 3637 3122 2c0a 2020 2020  .91753671",.    
+00049220: 2020 2020 2320 2020 2020 226c 6173 7446      #     "lastF
+00049230: 756e 6469 6e67 5261 7465 223a 2022 302e  undingRate": "0.
+00049240: 3030 3036 3335 3231 222c 0a20 2020 2020  00063521",.     
+00049250: 2020 2023 2020 2020 2022 696e 7465 7265     #     "intere
+00049260: 7374 5261 7465 223a 2022 302e 3030 3031  stRate": "0.0001
+00049270: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00049280: 2020 2020 2022 6e65 7874 4675 6e64 696e       "nextFundin
+00049290: 6754 696d 6522 3a20 2231 3632 3132 3637  gTime": "1621267
+000492a0: 3230 3030 3030 222c 0a20 2020 2020 2020  200000",.       
+000492b0: 2023 2020 2020 2022 7469 6d65 223a 2022   #     "time": "
+000492c0: 3136 3231 3235 3233 3434 3030 3122 0a20  1621252344001". 
+000492d0: 2020 2020 2020 2023 2020 7d0a 2020 2020         #  }.    
+000492e0: 2020 2020 230a 2020 2020 2020 2020 7469      #.        ti
+000492f0: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
+00049300: 6166 655f 696e 7465 6765 7228 636f 6e74  afe_integer(cont
+00049310: 7261 6374 2c20 2774 696d 6527 290a 2020  ract, 'time').  
+00049320: 2020 2020 2020 6d61 726b 6574 4964 203d        marketId =
+00049330: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00049340: 6728 636f 6e74 7261 6374 2c20 2773 796d  g(contract, 'sym
+00049350: 626f 6c27 290a 2020 2020 2020 2020 7379  bol').        sy
+00049360: 6d62 6f6c 203d 2073 656c 662e 7361 6665  mbol = self.safe
+00049370: 5f73 796d 626f 6c28 6d61 726b 6574 4964  _symbol(marketId
+00049380: 2c20 6d61 726b 6574 2c20 4e6f 6e65 2c20  , market, None, 
+00049390: 2763 6f6e 7472 6163 7427 290a 2020 2020  'contract').    
+000493a0: 2020 2020 6d61 726b 5072 6963 6520 3d20      markPrice = 
+000493b0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+000493c0: 2863 6f6e 7472 6163 742c 2027 6d61 726b  (contract, 'mark
+000493d0: 5072 6963 6527 290a 2020 2020 2020 2020  Price').        
+000493e0: 696e 6465 7850 7269 6365 203d 2073 656c  indexPrice = sel
+000493f0: 662e 7361 6665 5f6e 756d 6265 7228 636f  f.safe_number(co
+00049400: 6e74 7261 6374 2c20 2769 6e64 6578 5072  ntract, 'indexPr
+00049410: 6963 6527 290a 2020 2020 2020 2020 696e  ice').        in
+00049420: 7465 7265 7374 5261 7465 203d 2073 656c  terestRate = sel
+00049430: 662e 7361 6665 5f6e 756d 6265 7228 636f  f.safe_number(co
+00049440: 6e74 7261 6374 2c20 2769 6e74 6572 6573  ntract, 'interes
+00049450: 7452 6174 6527 290a 2020 2020 2020 2020  tRate').        
+00049460: 6573 7469 6d61 7465 6453 6574 746c 6550  estimatedSettleP
+00049470: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+00049480: 5f6e 756d 6265 7228 636f 6e74 7261 6374  _number(contract
+00049490: 2c20 2765 7374 696d 6174 6564 5365 7474  , 'estimatedSett
+000494a0: 6c65 5072 6963 6527 290a 2020 2020 2020  lePrice').      
+000494b0: 2020 6675 6e64 696e 6752 6174 6520 3d20    fundingRate = 
+000494c0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+000494d0: 2863 6f6e 7472 6163 742c 2027 6c61 7374  (contract, 'last
+000494e0: 4675 6e64 696e 6752 6174 6527 290a 2020  FundingRate').  
+000494f0: 2020 2020 2020 6675 6e64 696e 6754 696d        fundingTim
+00049500: 6520 3d20 7365 6c66 2e73 6166 655f 696e  e = self.safe_in
+00049510: 7465 6765 7228 636f 6e74 7261 6374 2c20  teger(contract, 
+00049520: 276e 6578 7446 756e 6469 6e67 5469 6d65  'nextFundingTime
+00049530: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
+00049540: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
+00049550: 2769 6e66 6f27 3a20 636f 6e74 7261 6374  'info': contract
+00049560: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
+00049570: 796d 626f 6c27 3a20 7379 6d62 6f6c 2c0a  ymbol': symbol,.
+00049580: 2020 2020 2020 2020 2020 2020 276d 6172              'mar
+00049590: 6b50 7269 6365 273a 206d 6172 6b50 7269  kPrice': markPri
+000495a0: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
+000495b0: 2769 6e64 6578 5072 6963 6527 3a20 696e  'indexPrice': in
+000495c0: 6465 7850 7269 6365 2c0a 2020 2020 2020  dexPrice,.      
+000495d0: 2020 2020 2020 2769 6e74 6572 6573 7452        'interestR
+000495e0: 6174 6527 3a20 696e 7465 7265 7374 5261  ate': interestRa
+000495f0: 7465 2c0a 2020 2020 2020 2020 2020 2020  te,.            
+00049600: 2765 7374 696d 6174 6564 5365 7474 6c65  'estimatedSettle
+00049610: 5072 6963 6527 3a20 6573 7469 6d61 7465  Price': estimate
+00049620: 6453 6574 746c 6550 7269 6365 2c0a 2020  dSettlePrice,.  
+00049630: 2020 2020 2020 2020 2020 2774 696d 6573            'times
+00049640: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
+00049650: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
+00049660: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
+00049670: 736f 3836 3031 2874 696d 6573 7461 6d70  so8601(timestamp
+00049680: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+00049690: 6675 6e64 696e 6752 6174 6527 3a20 6675  fundingRate': fu
+000496a0: 6e64 696e 6752 6174 652c 0a20 2020 2020  ndingRate,.     
+000496b0: 2020 2020 2020 2027 6675 6e64 696e 6754         'fundingT
+000496c0: 696d 6573 7461 6d70 273a 2066 756e 6469  imestamp': fundi
+000496d0: 6e67 5469 6d65 2c0a 2020 2020 2020 2020  ngTime,.        
+000496e0: 2020 2020 2766 756e 6469 6e67 4461 7465      'fundingDate
+000496f0: 7469 6d65 273a 2073 656c 662e 6973 6f38  time': self.iso8
+00049700: 3630 3128 6675 6e64 696e 6754 696d 6529  601(fundingTime)
+00049710: 2c0a 2020 2020 2020 2020 2020 2020 276e  ,.            'n
+00049720: 6578 7446 756e 6469 6e67 5261 7465 273a  extFundingRate':
+00049730: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+00049740: 2020 2027 6e65 7874 4675 6e64 696e 6754     'nextFundingT
+00049750: 696d 6573 7461 6d70 273a 204e 6f6e 652c  imestamp': None,
+00049760: 0a20 2020 2020 2020 2020 2020 2027 6e65  .            'ne
+00049770: 7874 4675 6e64 696e 6744 6174 6574 696d  xtFundingDatetim
+00049780: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
+00049790: 2020 2020 2020 2770 7265 7669 6f75 7346        'previousF
+000497a0: 756e 6469 6e67 5261 7465 273a 204e 6f6e  undingRate': Non
+000497b0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+000497c0: 7072 6576 696f 7573 4675 6e64 696e 6754  previousFundingT
+000497d0: 696d 6573 7461 6d70 273a 204e 6f6e 652c  imestamp': None,
+000497e0: 0a20 2020 2020 2020 2020 2020 2027 7072  .            'pr
+000497f0: 6576 696f 7573 4675 6e64 696e 6744 6174  eviousFundingDat
+00049800: 6574 696d 6527 3a20 4e6f 6e65 2c0a 2020  etime': None,.  
+00049810: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
+00049820: 2070 6172 7365 5f61 6363 6f75 6e74 5f70   parse_account_p
+00049830: 6f73 6974 696f 6e73 2873 656c 662c 2061  ositions(self, a
+00049840: 6363 6f75 6e74 293a 0a20 2020 2020 2020  ccount):.       
+00049850: 2070 6f73 6974 696f 6e73 203d 2073 656c   positions = sel
+00049860: 662e 7361 6665 5f76 616c 7565 2861 6363  f.safe_value(acc
+00049870: 6f75 6e74 2c20 2770 6f73 6974 696f 6e73  ount, 'positions
+00049880: 2729 0a20 2020 2020 2020 2061 7373 6574  ').        asset
+00049890: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+000498a0: 6c75 6528 6163 636f 756e 742c 2027 6173  lue(account, 'as
+000498b0: 7365 7473 272c 205b 5d29 0a20 2020 2020  sets', []).     
+000498c0: 2020 2062 616c 616e 6365 7320 3d20 7b7d     balances = {}
+000498d0: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
+000498e0: 6e20 7261 6e67 6528 302c 206c 656e 2861  n range(0, len(a
+000498f0: 7373 6574 7329 293a 0a20 2020 2020 2020  ssets)):.       
+00049900: 2020 2020 2065 6e74 7279 203d 2061 7373       entry = ass
+00049910: 6574 735b 695d 0a20 2020 2020 2020 2020  ets[i].         
+00049920: 2020 2063 7572 7265 6e63 7949 6420 3d20     currencyId = 
+00049930: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00049940: 2865 6e74 7279 2c20 2761 7373 6574 2729  (entry, 'asset')
+00049950: 0a20 2020 2020 2020 2020 2020 2063 6f64  .            cod
+00049960: 6520 3d20 7365 6c66 2e73 6166 655f 6375  e = self.safe_cu
+00049970: 7272 656e 6379 5f63 6f64 6528 6375 7272  rrency_code(curr
+00049980: 656e 6379 4964 290a 2020 2020 2020 2020  encyId).        
+00049990: 2020 2020 6372 6f73 7357 616c 6c65 7442      crossWalletB
+000499a0: 616c 616e 6365 203d 2073 656c 662e 7361  alance = self.sa
+000499b0: 6665 5f73 7472 696e 6728 656e 7472 792c  fe_string(entry,
+000499c0: 2027 6372 6f73 7357 616c 6c65 7442 616c   'crossWalletBal
+000499d0: 616e 6365 2729 0a20 2020 2020 2020 2020  ance').         
+000499e0: 2020 2063 726f 7373 556e 506e 6c20 3d20     crossUnPnl = 
+000499f0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00049a00: 2865 6e74 7279 2c20 2763 726f 7373 556e  (entry, 'crossUn
+00049a10: 506e 6c27 290a 2020 2020 2020 2020 2020  Pnl').          
+00049a20: 2020 6261 6c61 6e63 6573 5b63 6f64 655d    balances[code]
+00049a30: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00049a40: 2020 2020 2027 6372 6f73 734d 6172 6769       'crossMargi
+00049a50: 6e27 3a20 5072 6563 6973 652e 7374 7269  n': Precise.stri
+00049a60: 6e67 5f61 6464 2863 726f 7373 5761 6c6c  ng_add(crossWall
+00049a70: 6574 4261 6c61 6e63 652c 2063 726f 7373  etBalance, cross
+00049a80: 556e 506e 6c29 2c0a 2020 2020 2020 2020  UnPnl),.        
+00049a90: 2020 2020 2020 2020 2763 726f 7373 5761          'crossWa
+00049aa0: 6c6c 6574 4261 6c61 6e63 6527 3a20 6372  lletBalance': cr
+00049ab0: 6f73 7357 616c 6c65 7442 616c 616e 6365  ossWalletBalance
+00049ac0: 2c0a 2020 2020 2020 2020 2020 2020 7d0a  ,.            }.
+00049ad0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00049ae0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
+00049af0: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+00049b00: 6e28 706f 7369 7469 6f6e 7329 293a 0a20  n(positions)):. 
+00049b10: 2020 2020 2020 2020 2020 2070 6f73 6974             posit
+00049b20: 696f 6e20 3d20 706f 7369 7469 6f6e 735b  ion = positions[
+00049b30: 695d 0a20 2020 2020 2020 2020 2020 206d  i].            m
+00049b40: 6172 6b65 7449 6420 3d20 7365 6c66 2e73  arketId = self.s
+00049b50: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
+00049b60: 696f 6e2c 2027 7379 6d62 6f6c 2729 0a20  ion, 'symbol'). 
+00049b70: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+00049b80: 7420 3d20 7365 6c66 2e73 6166 655f 6d61  t = self.safe_ma
+00049b90: 726b 6574 286d 6172 6b65 7449 642c 204e  rket(marketId, N
+00049ba0: 6f6e 652c 204e 6f6e 652c 2027 636f 6e74  one, None, 'cont
+00049bb0: 7261 6374 2729 0a20 2020 2020 2020 2020  ract').         
+00049bc0: 2020 2063 6f64 6520 3d20 6d61 726b 6574     code = market
+00049bd0: 5b27 7175 6f74 6527 5d20 6966 206d 6172  ['quote'] if mar
+00049be0: 6b65 745b 276c 696e 6561 7227 5d20 656c  ket['linear'] el
+00049bf0: 7365 206d 6172 6b65 745b 2762 6173 6527  se market['base'
+00049c00: 5d0a 2020 2020 2020 2020 2020 2020 2320  ].            # 
+00049c10: 736f 6d65 7469 6d65 7320 6e6f 7420 616c  sometimes not al
+00049c20: 6c20 7468 6520 636f 6465 7320 6172 6520  l the codes are 
+00049c30: 636f 7272 6563 746c 7920 7265 7475 726e  correctly return
+00049c40: 6564 2e2e 2e0a 2020 2020 2020 2020 2020  ed....          
+00049c50: 2020 6966 2063 6f64 6520 696e 2062 616c    if code in bal
+00049c60: 616e 6365 733a 0a20 2020 2020 2020 2020  ances:.         
+00049c70: 2020 2020 2020 2070 6172 7365 6420 3d20         parsed = 
+00049c80: 7365 6c66 2e70 6172 7365 5f61 6363 6f75  self.parse_accou
+00049c90: 6e74 5f70 6f73 6974 696f 6e28 7365 6c66  nt_position(self
+00049ca0: 2e65 7874 656e 6428 706f 7369 7469 6f6e  .extend(position
+00049cb0: 2c20 7b0a 2020 2020 2020 2020 2020 2020  , {.            
+00049cc0: 2020 2020 2020 2020 2763 726f 7373 4d61          'crossMa
+00049cd0: 7267 696e 273a 2062 616c 616e 6365 735b  rgin': balances[
+00049ce0: 636f 6465 5d5b 2763 726f 7373 4d61 7267  code]['crossMarg
+00049cf0: 696e 275d 2c0a 2020 2020 2020 2020 2020  in'],.          
+00049d00: 2020 2020 2020 2020 2020 2763 726f 7373            'cross
+00049d10: 5761 6c6c 6574 4261 6c61 6e63 6527 3a20  WalletBalance': 
+00049d20: 6261 6c61 6e63 6573 5b63 6f64 655d 5b27  balances[code]['
+00049d30: 6372 6f73 7357 616c 6c65 7442 616c 616e  crossWalletBalan
+00049d40: 6365 275d 2c0a 2020 2020 2020 2020 2020  ce'],.          
+00049d50: 2020 2020 2020 7d29 2c20 6d61 726b 6574        }), market
+00049d60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00049d70: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
+00049d80: 7061 7273 6564 290a 2020 2020 2020 2020  parsed).        
+00049d90: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
+00049da0: 2020 2064 6566 2070 6172 7365 5f61 6363     def parse_acc
+00049db0: 6f75 6e74 5f70 6f73 6974 696f 6e28 7365  ount_position(se
+00049dc0: 6c66 2c20 706f 7369 7469 6f6e 2c20 6d61  lf, position, ma
+00049dd0: 726b 6574 3d4e 6f6e 6529 3a0a 2020 2020  rket=None):.    
+00049de0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00049df0: 7573 646d 0a20 2020 2020 2020 2023 2020  usdm.        #  
+00049e00: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00049e10: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+00049e20: 5443 4255 5344 222c 0a20 2020 2020 2020  TCBUSD",.       
+00049e30: 2023 2020 2020 2020 2022 696e 6974 6961   #       "initia
+00049e40: 6c4d 6172 6769 6e22 3a20 2230 222c 0a20  lMargin": "0",. 
+00049e50: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00049e60: 6d61 696e 744d 6172 6769 6e22 3a20 2230  maintMargin": "0
+00049e70: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00049e80: 2020 2022 756e 7265 616c 697a 6564 5072     "unrealizedPr
+00049e90: 6f66 6974 223a 2022 302e 3030 3030 3030  ofit": "0.000000
+00049ea0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00049eb0: 2020 2020 2022 706f 7369 7469 6f6e 496e       "positionIn
+00049ec0: 6974 6961 6c4d 6172 6769 6e22 3a20 2230  itialMargin": "0
+00049ed0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00049ee0: 2020 2022 6f70 656e 4f72 6465 7249 6e69     "openOrderIni
+00049ef0: 7469 616c 4d61 7267 696e 223a 2022 3022  tialMargin": "0"
+00049f00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00049f10: 2020 226c 6576 6572 6167 6522 3a20 2232    "leverage": "2
+00049f20: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00049f30: 2020 2020 2269 736f 6c61 7465 6422 3a20      "isolated": 
+00049f40: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+00049f50: 2020 2020 2020 2022 656e 7472 7950 7269         "entryPri
+00049f60: 6365 223a 2022 302e 3030 3030 222c 0a20  ce": "0.0000",. 
+00049f70: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00049f80: 6d61 784e 6f74 696f 6e61 6c22 3a20 2231  maxNotional": "1
+00049f90: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00049fa0: 2320 2020 2020 2020 2270 6f73 6974 696f  #       "positio
+00049fb0: 6e53 6964 6522 3a20 2242 4f54 4822 2c0a  nSide": "BOTH",.
+00049fc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049fd0: 2270 6f73 6974 696f 6e41 6d74 223a 2022  "positionAmt": "
+00049fe0: 302e 3030 3022 2c0a 2020 2020 2020 2020  0.000",.        
+00049ff0: 2320 2020 2020 2020 226e 6f74 696f 6e61  #       "notiona
+0004a000: 6c22 3a20 2230 222c 0a20 2020 2020 2020  l": "0",.       
+0004a010: 2023 2020 2020 2020 2022 6973 6f6c 6174   #       "isolat
+0004a020: 6564 5761 6c6c 6574 223a 2022 3022 2c0a  edWallet": "0",.
+0004a030: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a040: 2275 7064 6174 6554 696d 6522 3a20 2230  "updateTime": "0
+0004a050: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a060: 2020 2022 6372 6f73 734d 6172 6769 6e22     "crossMargin"
+0004a070: 3a20 2231 3030 2e39 3336 3334 3830 3922  : "100.93634809"
+0004a080: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004a090: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+0004a0a0: 2020 2020 2320 636f 696e 6d0a 2020 2020      # coinm.    
+0004a0b0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0004a0c0: 2020 2020 2320 2020 2020 2020 2273 796d      #       "sym
+0004a0d0: 626f 6c22 3a20 2242 5443 5553 445f 3231  bol": "BTCUSD_21
+0004a0e0: 3036 3235 222c 0a20 2020 2020 2020 2023  0625",.        #
+0004a0f0: 2020 2020 2020 2022 696e 6974 6961 6c4d         "initialM
+0004a100: 6172 6769 6e22 3a20 2230 2e30 3030 3234  argin": "0.00024
+0004a110: 3339 3322 2c0a 2020 2020 2020 2020 2320  393",.        # 
+0004a120: 2020 2020 2020 226d 6169 6e74 4d61 7267        "maintMarg
+0004a130: 696e 223a 2022 302e 3030 3030 3234 3339  in": "0.00002439
+0004a140: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a150: 2020 2022 756e 7265 616c 697a 6564 5072     "unrealizedPr
+0004a160: 6f66 6974 223a 2022 2d30 2e30 3030 3030  ofit": "-0.00000
+0004a170: 3136 3322 2c0a 2020 2020 2020 2020 2320  163",.        # 
+0004a180: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
+0004a190: 6e69 7469 616c 4d61 7267 696e 223a 2022  nitialMargin": "
+0004a1a0: 302e 3030 3032 3433 3933 222c 0a20 2020  0.00024393",.   
+0004a1b0: 2020 2020 2023 2020 2020 2020 2022 6f70       #       "op
+0004a1c0: 656e 4f72 6465 7249 6e69 7469 616c 4d61  enOrderInitialMa
+0004a1d0: 7267 696e 223a 2022 3022 2c0a 2020 2020  rgin": "0",.    
+0004a1e0: 2020 2020 2320 2020 2020 2020 226c 6576      #       "lev
+0004a1f0: 6572 6167 6522 3a20 2231 3022 2c0a 2020  erage": "10",.  
+0004a200: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
+0004a210: 736f 6c61 7465 6422 3a20 4661 6c73 652c  solated": False,
+0004a220: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004a230: 2022 706f 7369 7469 6f6e 5369 6465 223a   "positionSide":
+0004a240: 2022 424f 5448 222c 0a20 2020 2020 2020   "BOTH",.       
+0004a250: 2023 2020 2020 2020 2022 656e 7472 7950   #       "entryP
+0004a260: 7269 6365 223a 2022 3431 3032 312e 3230  rice": "41021.20
+0004a270: 3030 3030 3639 222c 0a20 2020 2020 2020  000069",.       
+0004a280: 2023 2020 2020 2020 2022 6d61 7851 7479   #       "maxQty
+0004a290: 223a 2022 3130 3022 2c0a 2020 2020 2020  ": "100",.      
+0004a2a0: 2020 2320 2020 2020 2020 226e 6f74 696f    #       "notio
+0004a2b0: 6e61 6c56 616c 7565 223a 2022 302e 3030  nalValue": "0.00
+0004a2c0: 3234 3339 3339 222c 0a20 2020 2020 2020  243939",.       
+0004a2d0: 2023 2020 2020 2020 2022 6973 6f6c 6174   #       "isolat
+0004a2e0: 6564 5761 6c6c 6574 223a 2022 3022 2c0a  edWallet": "0",.
+0004a2f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a300: 2263 726f 7373 4d61 7267 696e 223a 2022  "crossMargin": "
+0004a310: 302e 3331 3422 0a20 2020 2020 2020 2023  0.314".        #
+0004a320: 2020 2020 2020 2022 6372 6f73 7357 616c         "crossWal
+0004a330: 6c65 7442 616c 616e 6365 223a 2022 3334  letBalance": "34
+0004a340: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a350: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0004a360: 2020 2020 206d 6172 6b65 7449 6420 3d20       marketId = 
+0004a370: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0004a380: 2870 6f73 6974 696f 6e2c 2027 7379 6d62  (position, 'symb
+0004a390: 6f6c 2729 0a20 2020 2020 2020 206d 6172  ol').        mar
+0004a3a0: 6b65 7420 3d20 7365 6c66 2e73 6166 655f  ket = self.safe_
+0004a3b0: 6d61 726b 6574 286d 6172 6b65 7449 642c  market(marketId,
+0004a3c0: 206d 6172 6b65 742c 204e 6f6e 652c 2027   market, None, '
+0004a3d0: 636f 6e74 7261 6374 2729 0a20 2020 2020  contract').     
+0004a3e0: 2020 2073 796d 626f 6c20 3d20 7365 6c66     symbol = self
+0004a3f0: 2e73 6166 655f 7374 7269 6e67 286d 6172  .safe_string(mar
+0004a400: 6b65 742c 2027 7379 6d62 6f6c 2729 0a20  ket, 'symbol'). 
+0004a410: 2020 2020 2020 206c 6576 6572 6167 6553         leverageS
+0004a420: 7472 696e 6720 3d20 7365 6c66 2e73 6166  tring = self.saf
+0004a430: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
+0004a440: 6e2c 2027 6c65 7665 7261 6765 2729 0a20  n, 'leverage'). 
+0004a450: 2020 2020 2020 206c 6576 6572 6167 6520         leverage 
+0004a460: 3d20 696e 7428 6c65 7665 7261 6765 5374  = int(leverageSt
+0004a470: 7269 6e67 290a 2020 2020 2020 2020 696e  ring).        in
+0004a480: 6974 6961 6c4d 6172 6769 6e53 7472 696e  itialMarginStrin
+0004a490: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
+0004a4a0: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
+0004a4b0: 696e 6974 6961 6c4d 6172 6769 6e27 290a  initialMargin').
+0004a4c0: 2020 2020 2020 2020 696e 6974 6961 6c4d          initialM
+0004a4d0: 6172 6769 6e20 3d20 7365 6c66 2e70 6172  argin = self.par
+0004a4e0: 7365 5f6e 756d 6265 7228 696e 6974 6961  se_number(initia
+0004a4f0: 6c4d 6172 6769 6e53 7472 696e 6729 0a20  lMarginString). 
+0004a500: 2020 2020 2020 2069 6e69 7469 616c 4d61         initialMa
+0004a510: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
+0004a520: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
+0004a530: 7472 696e 675f 6469 7628 2731 272c 206c  tring_div('1', l
+0004a540: 6576 6572 6167 6553 7472 696e 672c 2038  everageString, 8
+0004a550: 290a 2020 2020 2020 2020 7261 7469 6f6e  ).        ration
+0004a560: 616c 203d 2028 3130 3030 2025 206c 6576  al = (1000 % lev
+0004a570: 6572 6167 6529 203d 3d20 300a 2020 2020  erage) == 0.    
+0004a580: 2020 2020 6966 206e 6f74 2072 6174 696f      if not ratio
+0004a590: 6e61 6c3a 0a20 2020 2020 2020 2020 2020  nal:.           
+0004a5a0: 2069 6e69 7469 616c 4d61 7267 696e 5065   initialMarginPe
+0004a5b0: 7263 656e 7461 6765 5374 7269 6e67 203d  rcentageString =
+0004a5c0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004a5d0: 6469 7628 5072 6563 6973 652e 7374 7269  div(Precise.stri
+0004a5e0: 6e67 5f61 6464 2869 6e69 7469 616c 4d61  ng_add(initialMa
+0004a5f0: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
+0004a600: 7269 6e67 2c20 2731 652d 3827 292c 2027  ring, '1e-8'), '
+0004a610: 3127 2c20 3829 0a20 2020 2020 2020 2023  1', 8).        #
+0004a620: 2074 6f20 6e6f 7469 6f6e 616c 5661 6c75   to notionalValu
+0004a630: 650a 2020 2020 2020 2020 7573 646d 203d  e.        usdm =
+0004a640: 2028 276e 6f74 696f 6e61 6c27 2069 6e20   ('notional' in 
+0004a650: 706f 7369 7469 6f6e 290a 2020 2020 2020  position).      
+0004a660: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
+0004a670: 6769 6e53 7472 696e 6720 3d20 7365 6c66  ginString = self
+0004a680: 2e73 6166 655f 7374 7269 6e67 2870 6f73  .safe_string(pos
+0004a690: 6974 696f 6e2c 2027 6d61 696e 744d 6172  ition, 'maintMar
+0004a6a0: 6769 6e27 290a 2020 2020 2020 2020 6d61  gin').        ma
+0004a6b0: 696e 7465 6e61 6e63 654d 6172 6769 6e20  intenanceMargin 
+0004a6c0: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0004a6d0: 6265 7228 6d61 696e 7465 6e61 6e63 654d  ber(maintenanceM
+0004a6e0: 6172 6769 6e53 7472 696e 6729 0a20 2020  arginString).   
+0004a6f0: 2020 2020 2065 6e74 7279 5072 6963 6553       entryPriceS
+0004a700: 7472 696e 6720 3d20 7365 6c66 2e73 6166  tring = self.saf
+0004a710: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
+0004a720: 6e2c 2027 656e 7472 7950 7269 6365 2729  n, 'entryPrice')
+0004a730: 0a20 2020 2020 2020 2065 6e74 7279 5072  .        entryPr
+0004a740: 6963 6520 3d20 7365 6c66 2e70 6172 7365  ice = self.parse
+0004a750: 5f6e 756d 6265 7228 656e 7472 7950 7269  _number(entryPri
+0004a760: 6365 5374 7269 6e67 290a 2020 2020 2020  ceString).      
+0004a770: 2020 6e6f 7469 6f6e 616c 5374 7269 6e67    notionalString
+0004a780: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0004a790: 696e 675f 3228 706f 7369 7469 6f6e 2c20  ing_2(position, 
+0004a7a0: 276e 6f74 696f 6e61 6c27 2c20 276e 6f74  'notional', 'not
+0004a7b0: 696f 6e61 6c56 616c 7565 2729 0a20 2020  ionalValue').   
+0004a7c0: 2020 2020 206e 6f74 696f 6e61 6c53 7472       notionalStr
+0004a7d0: 696e 6741 6273 203d 2050 7265 6369 7365  ingAbs = Precise
+0004a7e0: 2e73 7472 696e 675f 6162 7328 6e6f 7469  .string_abs(noti
+0004a7f0: 6f6e 616c 5374 7269 6e67 290a 2020 2020  onalString).    
+0004a800: 2020 2020 6e6f 7469 6f6e 616c 203d 2073      notional = s
+0004a810: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
+0004a820: 286e 6f74 696f 6e61 6c53 7472 696e 6741  (notionalStringA
+0004a830: 6273 290a 2020 2020 2020 2020 636f 6e74  bs).        cont
+0004a840: 7261 6374 7353 7472 696e 6720 3d20 7365  ractsString = se
+0004a850: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+0004a860: 6f73 6974 696f 6e2c 2027 706f 7369 7469  osition, 'positi
+0004a870: 6f6e 416d 7427 290a 2020 2020 2020 2020  onAmt').        
+0004a880: 636f 6e74 7261 6374 7353 7472 696e 6741  contractsStringA
+0004a890: 6273 203d 2050 7265 6369 7365 2e73 7472  bs = Precise.str
+0004a8a0: 696e 675f 6162 7328 636f 6e74 7261 6374  ing_abs(contract
+0004a8b0: 7353 7472 696e 6729 0a20 2020 2020 2020  sString).       
+0004a8c0: 2069 6620 636f 6e74 7261 6374 7353 7472   if contractsStr
+0004a8d0: 696e 6720 6973 204e 6f6e 653a 0a20 2020  ing is None:.   
+0004a8e0: 2020 2020 2020 2020 2065 6e74 7279 4e6f           entryNo
+0004a8f0: 7469 6f6e 616c 203d 2050 7265 6369 7365  tional = Precise
+0004a900: 2e73 7472 696e 675f 6d75 6c28 5072 6563  .string_mul(Prec
+0004a910: 6973 652e 7374 7269 6e67 5f6d 756c 286c  ise.string_mul(l
+0004a920: 6576 6572 6167 6553 7472 696e 672c 2069  everageString, i
+0004a930: 6e69 7469 616c 4d61 7267 696e 5374 7269  nitialMarginStri
+0004a940: 6e67 292c 2065 6e74 7279 5072 6963 6553  ng), entryPriceS
+0004a950: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0004a960: 2020 2063 6f6e 7472 6163 7453 697a 654e     contractSizeN
+0004a970: 6577 203d 2073 656c 662e 7361 6665 5f73  ew = self.safe_s
+0004a980: 7472 696e 6728 6d61 726b 6574 2c20 2763  tring(market, 'c
+0004a990: 6f6e 7472 6163 7453 697a 6527 290a 2020  ontractSize').  
+0004a9a0: 2020 2020 2020 2020 2020 636f 6e74 7261            contra
+0004a9b0: 6374 7353 7472 696e 6720 3d20 5072 6563  ctsString = Prec
+0004a9c0: 6973 652e 7374 7269 6e67 5f64 6976 2865  ise.string_div(e
+0004a9d0: 6e74 7279 4e6f 7469 6f6e 616c 2c20 636f  ntryNotional, co
+0004a9e0: 6e74 7261 6374 5369 7a65 4e65 7729 0a20  ntractSizeNew). 
+0004a9f0: 2020 2020 2020 2020 2020 2063 6f6e 7472             contr
+0004aa00: 6163 7473 5374 7269 6e67 4162 7320 3d20  actsStringAbs = 
+0004aa10: 5072 6563 6973 652e 7374 7269 6e67 5f64  Precise.string_d
+0004aa20: 6976 2850 7265 6369 7365 2e73 7472 696e  iv(Precise.strin
+0004aa30: 675f 6164 6428 636f 6e74 7261 6374 7353  g_add(contractsS
+0004aa40: 7472 696e 672c 2027 302e 3527 292c 2027  tring, '0.5'), '
+0004aa50: 3127 2c20 3029 0a20 2020 2020 2020 2063  1', 0).        c
+0004aa60: 6f6e 7472 6163 7473 203d 2073 656c 662e  ontracts = self.
+0004aa70: 7061 7273 655f 6e75 6d62 6572 2863 6f6e  parse_number(con
+0004aa80: 7472 6163 7473 5374 7269 6e67 4162 7329  tractsStringAbs)
+0004aa90: 0a20 2020 2020 2020 206c 6576 6572 6167  .        leverag
+0004aaa0: 6542 7261 636b 6574 7320 3d20 7365 6c66  eBrackets = self
+0004aab0: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
+0004aac0: 2e6f 7074 696f 6e73 2c20 276c 6576 6572  .options, 'lever
+0004aad0: 6167 6542 7261 636b 6574 7327 2c20 7b7d  ageBrackets', {}
+0004aae0: 290a 2020 2020 2020 2020 6c65 7665 7261  ).        levera
+0004aaf0: 6765 4272 6163 6b65 7420 3d20 7365 6c66  geBracket = self
+0004ab00: 2e73 6166 655f 7661 6c75 6528 6c65 7665  .safe_value(leve
+0004ab10: 7261 6765 4272 6163 6b65 7473 2c20 7379  rageBrackets, sy
+0004ab20: 6d62 6f6c 2c20 5b5d 290a 2020 2020 2020  mbol, []).      
+0004ab30: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
+0004ab40: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004ab50: 696e 6720 3d20 4e6f 6e65 0a20 2020 2020  ing = None.     
+0004ab60: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+0004ab70: 6528 302c 206c 656e 286c 6576 6572 6167  e(0, len(leverag
+0004ab80: 6542 7261 636b 6574 2929 3a0a 2020 2020  eBracket)):.    
+0004ab90: 2020 2020 2020 2020 6272 6163 6b65 7420          bracket 
+0004aba0: 3d20 6c65 7665 7261 6765 4272 6163 6b65  = leverageBracke
+0004abb0: 745b 695d 0a20 2020 2020 2020 2020 2020  t[i].           
+0004abc0: 2069 6620 5072 6563 6973 652e 7374 7269   if Precise.stri
+0004abd0: 6e67 5f6c 7428 6e6f 7469 6f6e 616c 5374  ng_lt(notionalSt
+0004abe0: 7269 6e67 4162 732c 2062 7261 636b 6574  ringAbs, bracket
+0004abf0: 5b30 5d29 3a0a 2020 2020 2020 2020 2020  [0]):.          
+0004ac00: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
+0004ac10: 2020 2020 2020 2020 6d61 696e 7465 6e61          maintena
+0004ac20: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
+0004ac30: 6167 6553 7472 696e 6720 3d20 6272 6163  ageString = brac
+0004ac40: 6b65 745b 315d 0a20 2020 2020 2020 206d  ket[1].        m
+0004ac50: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+0004ac60: 5065 7263 656e 7461 6765 203d 2073 656c  Percentage = sel
+0004ac70: 662e 7061 7273 655f 6e75 6d62 6572 286d  f.parse_number(m
+0004ac80: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+0004ac90: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
+0004aca0: 290a 2020 2020 2020 2020 756e 7265 616c  ).        unreal
+0004acb0: 697a 6564 506e 6c53 7472 696e 6720 3d20  izedPnlString = 
+0004acc0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0004acd0: 2870 6f73 6974 696f 6e2c 2027 756e 7265  (position, 'unre
+0004ace0: 616c 697a 6564 5072 6f66 6974 2729 0a20  alizedProfit'). 
+0004acf0: 2020 2020 2020 2075 6e72 6561 6c69 7a65         unrealize
+0004ad00: 6450 6e6c 203d 2073 656c 662e 7061 7273  dPnl = self.pars
+0004ad10: 655f 6e75 6d62 6572 2875 6e72 6561 6c69  e_number(unreali
+0004ad20: 7a65 6450 6e6c 5374 7269 6e67 290a 2020  zedPnlString).  
+0004ad30: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
+0004ad40: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+0004ad50: 6765 7228 706f 7369 7469 6f6e 2c20 2775  ger(position, 'u
+0004ad60: 7064 6174 6554 696d 6527 290a 2020 2020  pdateTime').    
+0004ad70: 2020 2020 6966 2074 696d 6573 7461 6d70      if timestamp
+0004ad80: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+0004ad90: 2020 2074 696d 6573 7461 6d70 203d 204e     timestamp = N
+0004ada0: 6f6e 650a 2020 2020 2020 2020 6973 6f6c  one.        isol
+0004adb0: 6174 6564 203d 2073 656c 662e 7361 6665  ated = self.safe
+0004adc0: 5f76 616c 7565 2870 6f73 6974 696f 6e2c  _value(position,
+0004add0: 2027 6973 6f6c 6174 6564 2729 0a20 2020   'isolated').   
+0004ade0: 2020 2020 206d 6172 6769 6e4d 6f64 6520       marginMode 
+0004adf0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2063  = None.        c
+0004ae00: 6f6c 6c61 7465 7261 6c53 7472 696e 6720  ollateralString 
+0004ae10: 3d20 4e6f 6e65 0a20 2020 2020 2020 2077  = None.        w
+0004ae20: 616c 6c65 7442 616c 616e 6365 203d 204e  alletBalance = N
+0004ae30: 6f6e 650a 2020 2020 2020 2020 6966 2069  one.        if i
+0004ae40: 736f 6c61 7465 643a 0a20 2020 2020 2020  solated:.       
+0004ae50: 2020 2020 206d 6172 6769 6e4d 6f64 6520       marginMode 
+0004ae60: 3d20 2769 736f 6c61 7465 6427 0a20 2020  = 'isolated'.   
+0004ae70: 2020 2020 2020 2020 2077 616c 6c65 7442           walletB
+0004ae80: 616c 616e 6365 203d 2073 656c 662e 7361  alance = self.sa
+0004ae90: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
+0004aea0: 6f6e 2c20 2769 736f 6c61 7465 6457 616c  on, 'isolatedWal
+0004aeb0: 6c65 7427 290a 2020 2020 2020 2020 2020  let').          
+0004aec0: 2020 636f 6c6c 6174 6572 616c 5374 7269    collateralStri
+0004aed0: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
+0004aee0: 696e 675f 6164 6428 7761 6c6c 6574 4261  ing_add(walletBa
+0004aef0: 6c61 6e63 652c 2075 6e72 6561 6c69 7a65  lance, unrealize
+0004af00: 6450 6e6c 5374 7269 6e67 290a 2020 2020  dPnlString).    
+0004af10: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0004af20: 2020 2020 2020 6d61 7267 696e 4d6f 6465        marginMode
+0004af30: 203d 2027 6372 6f73 7327 0a20 2020 2020   = 'cross'.     
+0004af40: 2020 2020 2020 2077 616c 6c65 7442 616c         walletBal
+0004af50: 616e 6365 203d 2073 656c 662e 7361 6665  ance = self.safe
+0004af60: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
+0004af70: 2c20 2763 726f 7373 5761 6c6c 6574 4261  , 'crossWalletBa
+0004af80: 6c61 6e63 6527 290a 2020 2020 2020 2020  lance').        
+0004af90: 2020 2020 636f 6c6c 6174 6572 616c 5374      collateralSt
+0004afa0: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
+0004afb0: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
+0004afc0: 2c20 2763 726f 7373 4d61 7267 696e 2729  , 'crossMargin')
+0004afd0: 0a20 2020 2020 2020 2063 6f6c 6c61 7465  .        collate
+0004afe0: 7261 6c20 3d20 7365 6c66 2e70 6172 7365  ral = self.parse
+0004aff0: 5f6e 756d 6265 7228 636f 6c6c 6174 6572  _number(collater
+0004b000: 616c 5374 7269 6e67 290a 2020 2020 2020  alString).      
+0004b010: 2020 6d61 7267 696e 5261 7469 6f20 3d20    marginRatio = 
+0004b020: 4e6f 6e65 0a20 2020 2020 2020 2073 6964  None.        sid
+0004b030: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
+0004b040: 2070 6572 6365 6e74 6167 6520 3d20 4e6f   percentage = No
+0004b050: 6e65 0a20 2020 2020 2020 206c 6971 7569  ne.        liqui
+0004b060: 6461 7469 6f6e 5072 6963 6553 7472 696e  dationPriceStrin
+0004b070: 6752 6177 203d 204e 6f6e 650a 2020 2020  gRaw = None.    
+0004b080: 2020 2020 6c69 7175 6964 6174 696f 6e50      liquidationP
+0004b090: 7269 6365 203d 204e 6f6e 650a 2020 2020  rice = None.    
+0004b0a0: 2020 2020 636f 6e74 7261 6374 5369 7a65      contractSize
+0004b0b0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0004b0c0: 7565 286d 6172 6b65 742c 2027 636f 6e74  ue(market, 'cont
+0004b0d0: 7261 6374 5369 7a65 2729 0a20 2020 2020  ractSize').     
+0004b0e0: 2020 2063 6f6e 7472 6163 7453 697a 6553     contractSizeS
+0004b0f0: 7472 696e 6720 3d20 7365 6c66 2e6e 756d  tring = self.num
+0004b100: 6265 725f 746f 5f73 7472 696e 6728 636f  ber_to_string(co
+0004b110: 6e74 7261 6374 5369 7a65 290a 2020 2020  ntractSize).    
+0004b120: 2020 2020 6966 2050 7265 6369 7365 2e73      if Precise.s
+0004b130: 7472 696e 675f 6571 7561 6c73 286e 6f74  tring_equals(not
+0004b140: 696f 6e61 6c53 7472 696e 672c 2027 3027  ionalString, '0'
+0004b150: 293a 0a20 2020 2020 2020 2020 2020 2065  ):.            e
+0004b160: 6e74 7279 5072 6963 6520 3d20 4e6f 6e65  ntryPrice = None
+0004b170: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0004b180: 2020 2020 2020 2020 2020 2073 6964 6520             side 
+0004b190: 3d20 2773 686f 7274 2720 6966 2050 7265  = 'short' if Pre
+0004b1a0: 6369 7365 2e73 7472 696e 675f 6c74 286e  cise.string_lt(n
+0004b1b0: 6f74 696f 6e61 6c53 7472 696e 672c 2027  otionalString, '
+0004b1c0: 3027 2920 656c 7365 2027 6c6f 6e67 270a  0') else 'long'.
+0004b1d0: 2020 2020 2020 2020 2020 2020 6d61 7267              marg
+0004b1e0: 696e 5261 7469 6f20 3d20 7365 6c66 2e70  inRatio = self.p
+0004b1f0: 6172 7365 5f6e 756d 6265 7228 5072 6563  arse_number(Prec
+0004b200: 6973 652e 7374 7269 6e67 5f64 6976 2850  ise.string_div(P
+0004b210: 7265 6369 7365 2e73 7472 696e 675f 6164  recise.string_ad
+0004b220: 6428 5072 6563 6973 652e 7374 7269 6e67  d(Precise.string
+0004b230: 5f64 6976 286d 6169 6e74 656e 616e 6365  _div(maintenance
+0004b240: 4d61 7267 696e 5374 7269 6e67 2c20 636f  MarginString, co
+0004b250: 6c6c 6174 6572 616c 5374 7269 6e67 292c  llateralString),
+0004b260: 2027 3565 2d35 2729 2c20 2731 272c 2034   '5e-5'), '1', 4
+0004b270: 2929 0a20 2020 2020 2020 2020 2020 2070  )).            p
+0004b280: 6572 6365 6e74 6167 6520 3d20 7365 6c66  ercentage = self
+0004b290: 2e70 6172 7365 5f6e 756d 6265 7228 5072  .parse_number(Pr
+0004b2a0: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
+0004b2b0: 2850 7265 6369 7365 2e73 7472 696e 675f  (Precise.string_
+0004b2c0: 6469 7628 756e 7265 616c 697a 6564 506e  div(unrealizedPn
+0004b2d0: 6c53 7472 696e 672c 2069 6e69 7469 616c  lString, initial
+0004b2e0: 4d61 7267 696e 5374 7269 6e67 2c20 3429  MarginString, 4)
+0004b2f0: 2c20 2731 3030 2729 290a 2020 2020 2020  , '100')).      
+0004b300: 2020 2020 2020 6966 2075 7364 6d3a 0a20        if usdm:. 
+0004b310: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0004b320: 2063 616c 6375 6c61 7465 206c 6971 7569   calculate liqui
+0004b330: 6461 7469 6f6e 2070 7269 6365 0a20 2020  dation price.   
+0004b340: 2020 2020 2020 2020 2020 2020 2023 0a20               #. 
+0004b350: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0004b360: 206c 6971 7569 6461 7469 6f6e 5072 6963   liquidationPric
+0004b370: 6520 3d20 2877 616c 6c65 7442 616c 616e  e = (walletBalan
+0004b380: 6365 202f 2028 636f 6e74 7261 6374 7320  ce / (contracts 
+0004b390: 2a20 28c2 b131 202b 206d 6d70 2929 2920  * (..1 + mmp))) 
+0004b3a0: 2b20 28c2 b165 6e74 7279 5072 6963 6520  + (..entryPrice 
+0004b3b0: 2f20 28c2 b131 202b 206d 6d70 2929 0a20  / (..1 + mmp)). 
+0004b3c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0004b3d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004b3e0: 2023 206d 6d70 203d 206d 6169 6e74 656e   # mmp = mainten
+0004b3f0: 616e 6365 4d61 7267 696e 5065 7263 656e  anceMarginPercen
+0004b400: 7461 6765 0a20 2020 2020 2020 2020 2020  tage.           
+0004b410: 2020 2020 2023 2077 6865 7265 20c2 b120       # where .. 
+0004b420: 6973 206e 6567 6174 6976 6520 666f 7220  is negative for 
+0004b430: 6c6f 6e67 2061 6e64 2070 6f73 6974 6976  long and positiv
+0004b440: 6520 666f 7220 7368 6f72 740a 2020 2020  e for short.    
+0004b450: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
+0004b460: 444f 3a20 6361 6c63 756c 6174 6520 6c69  DO: calculate li
+0004b470: 7175 6964 6174 696f 6e20 7072 6963 6520  quidation price 
+0004b480: 666f 7220 636f 696e 6d20 636f 6e74 7261  for coinm contra
+0004b490: 6374 730a 2020 2020 2020 2020 2020 2020  cts.            
+0004b4a0: 2020 2020 6f6e 6550 6c75 734d 6169 6e74      onePlusMaint
+0004b4b0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004b4c0: 656e 7461 6765 5374 7269 6e67 203d 204e  entageString = N
+0004b4d0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0004b4e0: 2020 2020 656e 7472 7950 7269 6365 5369      entryPriceSi
+0004b4f0: 676e 5374 7269 6e67 203d 2065 6e74 7279  gnString = entry
+0004b500: 5072 6963 6553 7472 696e 670a 2020 2020  PriceString.    
+0004b510: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0004b520: 6964 6520 3d3d 2027 7368 6f72 7427 3a0a  ide == 'short':.
+0004b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004b540: 2020 2020 6f6e 6550 6c75 734d 6169 6e74      onePlusMaint
+0004b550: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004b560: 656e 7461 6765 5374 7269 6e67 203d 2050  entageString = P
+0004b570: 7265 6369 7365 2e73 7472 696e 675f 6164  recise.string_ad
+0004b580: 6428 2731 272c 206d 6169 6e74 656e 616e  d('1', maintenan
+0004b590: 6365 4d61 7267 696e 5065 7263 656e 7461  ceMarginPercenta
+0004b5a0: 6765 5374 7269 6e67 290a 2020 2020 2020  geString).      
+0004b5b0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0004b5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004b5d0: 2020 2020 6f6e 6550 6c75 734d 6169 6e74      onePlusMaint
+0004b5e0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004b5f0: 656e 7461 6765 5374 7269 6e67 203d 2050  entageString = P
+0004b600: 7265 6369 7365 2e73 7472 696e 675f 6164  recise.string_ad
+0004b610: 6428 272d 3127 2c20 6d61 696e 7465 6e61  d('-1', maintena
+0004b620: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
+0004b630: 6167 6553 7472 696e 6729 0a20 2020 2020  ageString).     
+0004b640: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0004b650: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004b660: 696e 6720 3d20 5072 6563 6973 652e 7374  ing = Precise.st
+0004b670: 7269 6e67 5f6d 756c 2827 2d31 272c 2065  ring_mul('-1', e
+0004b680: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004b690: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004b6a0: 2020 2020 206c 6566 7453 6964 6520 3d20       leftSide = 
+0004b6b0: 5072 6563 6973 652e 7374 7269 6e67 5f64  Precise.string_d
+0004b6c0: 6976 2877 616c 6c65 7442 616c 616e 6365  iv(walletBalance
+0004b6d0: 2c20 5072 6563 6973 652e 7374 7269 6e67  , Precise.string
+0004b6e0: 5f6d 756c 2863 6f6e 7472 6163 7473 5374  _mul(contractsSt
+0004b6f0: 7269 6e67 4162 732c 206f 6e65 506c 7573  ringAbs, onePlus
+0004b700: 4d61 696e 7465 6e61 6e63 654d 6172 6769  MaintenanceMargi
+0004b710: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
+0004b720: 6729 290a 2020 2020 2020 2020 2020 2020  g)).            
+0004b730: 2020 2020 7269 6768 7453 6964 6520 3d20      rightSide = 
+0004b740: 5072 6563 6973 652e 7374 7269 6e67 5f64  Precise.string_d
+0004b750: 6976 2865 6e74 7279 5072 6963 6553 6967  iv(entryPriceSig
+0004b760: 6e53 7472 696e 672c 206f 6e65 506c 7573  nString, onePlus
+0004b770: 4d61 696e 7465 6e61 6e63 654d 6172 6769  MaintenanceMargi
+0004b780: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
+0004b790: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+0004b7a0: 2020 206c 6971 7569 6461 7469 6f6e 5072     liquidationPr
+0004b7b0: 6963 6553 7472 696e 6752 6177 203d 2050  iceStringRaw = P
+0004b7c0: 7265 6369 7365 2e73 7472 696e 675f 6164  recise.string_ad
+0004b7d0: 6428 6c65 6674 5369 6465 2c20 7269 6768  d(leftSide, righ
+0004b7e0: 7453 6964 6529 0a20 2020 2020 2020 2020  tSide).         
+0004b7f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0004b800: 2020 2020 2020 2020 2023 2063 616c 6375           # calcu
+0004b810: 6c61 7465 206c 6971 7569 6461 7469 6f6e  late liquidation
+0004b820: 2070 7269 6365 0a20 2020 2020 2020 2020   price.         
+0004b830: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0004b840: 2020 2020 2020 2020 2023 206c 6971 7569           # liqui
+0004b850: 6461 7469 6f6e 5072 6963 6520 3d20 2863  dationPrice = (c
+0004b860: 6f6e 7472 6163 7473 202a 2063 6f6e 7472  ontracts * contr
+0004b870: 6163 7453 697a 6528 c2b1 3120 2d20 6d6d  actSize(..1 - mm
+0004b880: 7029 2920 2f20 28c2 b131 2f65 6e74 7279  p)) / (..1/entry
+0004b890: 5072 6963 6520 2a20 636f 6e74 7261 6374  Price * contract
+0004b8a0: 7320 2a20 636f 6e74 7261 6374 5369 7a65  s * contractSize
+0004b8b0: 202d 2077 616c 6c65 7442 616c 616e 6365   - walletBalance
+0004b8c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0004b8d0: 2020 230a 2020 2020 2020 2020 2020 2020    #.            
+0004b8e0: 2020 2020 6f6e 6550 6c75 734d 6169 6e74      onePlusMaint
+0004b8f0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004b900: 656e 7461 6765 5374 7269 6e67 203d 204e  entageString = N
+0004b910: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0004b920: 2020 2020 656e 7472 7950 7269 6365 5369      entryPriceSi
+0004b930: 676e 5374 7269 6e67 203d 2065 6e74 7279  gnString = entry
+0004b940: 5072 6963 6553 7472 696e 670a 2020 2020  PriceString.    
+0004b950: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0004b960: 6964 6520 3d3d 2027 7368 6f72 7427 3a0a  ide == 'short':.
+0004b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004b980: 2020 2020 6f6e 6550 6c75 734d 6169 6e74      onePlusMaint
+0004b990: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004b9a0: 656e 7461 6765 5374 7269 6e67 203d 2050  entageString = P
+0004b9b0: 7265 6369 7365 2e73 7472 696e 675f 7375  recise.string_su
+0004b9c0: 6228 2731 272c 206d 6169 6e74 656e 616e  b('1', maintenan
+0004b9d0: 6365 4d61 7267 696e 5065 7263 656e 7461  ceMarginPercenta
+0004b9e0: 6765 5374 7269 6e67 290a 2020 2020 2020  geString).      
+0004b9f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0004ba00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ba10: 2020 2020 6f6e 6550 6c75 734d 6169 6e74      onePlusMaint
+0004ba20: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004ba30: 656e 7461 6765 5374 7269 6e67 203d 2050  entageString = P
+0004ba40: 7265 6369 7365 2e73 7472 696e 675f 7375  recise.string_su
+0004ba50: 6228 272d 3127 2c20 6d61 696e 7465 6e61  b('-1', maintena
+0004ba60: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
+0004ba70: 6167 6553 7472 696e 6729 0a20 2020 2020  ageString).     
+0004ba80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0004ba90: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004baa0: 696e 6720 3d20 5072 6563 6973 652e 7374  ing = Precise.st
+0004bab0: 7269 6e67 5f6d 756c 2827 2d31 272c 2065  ring_mul('-1', e
+0004bac0: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004bad0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004bae0: 2020 2020 2073 697a 6520 3d20 5072 6563       size = Prec
+0004baf0: 6973 652e 7374 7269 6e67 5f6d 756c 2863  ise.string_mul(c
+0004bb00: 6f6e 7472 6163 7473 5374 7269 6e67 4162  ontractsStringAb
+0004bb10: 732c 2063 6f6e 7472 6163 7453 697a 6553  s, contractSizeS
+0004bb20: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0004bb30: 2020 2020 2020 206c 6566 7453 6964 6520         leftSide 
+0004bb40: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0004bb50: 5f6d 756c 2873 697a 652c 206f 6e65 506c  _mul(size, onePl
+0004bb60: 7573 4d61 696e 7465 6e61 6e63 654d 6172  usMaintenanceMar
+0004bb70: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004bb80: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004bb90: 2020 2020 2072 6967 6874 5369 6465 203d       rightSide =
+0004bba0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004bbb0: 7375 6228 5072 6563 6973 652e 7374 7269  sub(Precise.stri
+0004bbc0: 6e67 5f6d 756c 2850 7265 6369 7365 2e73  ng_mul(Precise.s
+0004bbd0: 7472 696e 675f 6469 7628 2731 272c 2065  tring_div('1', e
+0004bbe0: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004bbf0: 696e 6729 2c20 7369 7a65 292c 2077 616c  ing), size), wal
+0004bc00: 6c65 7442 616c 616e 6365 290a 2020 2020  letBalance).    
+0004bc10: 2020 2020 2020 2020 2020 2020 6c69 7175              liqu
+0004bc20: 6964 6174 696f 6e50 7269 6365 5374 7269  idationPriceStri
+0004bc30: 6e67 5261 7720 3d20 5072 6563 6973 652e  ngRaw = Precise.
+0004bc40: 7374 7269 6e67 5f64 6976 286c 6566 7453  string_div(leftS
+0004bc50: 6964 652c 2072 6967 6874 5369 6465 290a  ide, rightSide).
+0004bc60: 2020 2020 2020 2020 2020 2020 7072 6963              pric
+0004bc70: 6550 7265 6369 7369 6f6e 203d 206d 6172  ePrecision = mar
+0004bc80: 6b65 745b 2770 7265 6369 7369 6f6e 275d  ket['precision']
+0004bc90: 5b27 7072 6963 6527 5d0a 2020 2020 2020  ['price'].      
+0004bca0: 2020 2020 2020 7072 6963 6550 7265 6369        pricePreci
+0004bcb0: 7369 6f6e 506c 7573 4f6e 6520 3d20 7072  sionPlusOne = pr
+0004bcc0: 6963 6550 7265 6369 7369 6f6e 202b 2031  icePrecision + 1
+0004bcd0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+0004bce0: 6365 5072 6563 6973 696f 6e50 6c75 734f  cePrecisionPlusO
+0004bcf0: 6e65 5374 7269 6e67 203d 2073 7472 2870  neString = str(p
+0004bd00: 7269 6365 5072 6563 6973 696f 6e50 6c75  ricePrecisionPlu
+0004bd10: 734f 6e65 290a 2020 2020 2020 2020 2020  sOne).          
+0004bd20: 2020 2320 726f 756e 6420 6861 6c66 2075    # round half u
+0004bd30: 700a 2020 2020 2020 2020 2020 2020 726f  p.            ro
+0004bd40: 756e 6465 7220 3d20 5072 6563 6973 6528  under = Precise(
+0004bd50: 2735 652d 2720 2b20 7072 6963 6550 7265  '5e-' + pricePre
+0004bd60: 6369 7369 6f6e 506c 7573 4f6e 6553 7472  cisionPlusOneStr
+0004bd70: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004bd80: 2072 6f75 6e64 6572 5374 7269 6e67 203d   rounderString =
+0004bd90: 2073 7472 2872 6f75 6e64 6572 290a 2020   str(rounder).  
+0004bda0: 2020 2020 2020 2020 2020 6c69 7175 6964            liquid
+0004bdb0: 6174 696f 6e50 7269 6365 526f 756e 6465  ationPriceRounde
+0004bdc0: 6453 7472 696e 6720 3d20 5072 6563 6973  dString = Precis
+0004bdd0: 652e 7374 7269 6e67 5f61 6464 2872 6f75  e.string_add(rou
+0004bde0: 6e64 6572 5374 7269 6e67 2c20 6c69 7175  nderString, liqu
+0004bdf0: 6964 6174 696f 6e50 7269 6365 5374 7269  idationPriceStri
+0004be00: 6e67 5261 7729 0a20 2020 2020 2020 2020  ngRaw).         
+0004be10: 2020 2074 7275 6e63 6174 6564 4c69 7175     truncatedLiqu
+0004be20: 6964 6174 696f 6e50 7269 6365 203d 2050  idationPrice = P
+0004be30: 7265 6369 7365 2e73 7472 696e 675f 6469  recise.string_di
+0004be40: 7628 6c69 7175 6964 6174 696f 6e50 7269  v(liquidationPri
+0004be50: 6365 526f 756e 6465 6453 7472 696e 672c  ceRoundedString,
+0004be60: 2027 3127 2c20 7072 6963 6550 7265 6369   '1', pricePreci
+0004be70: 7369 6f6e 290a 2020 2020 2020 2020 2020  sion).          
+0004be80: 2020 6966 2074 7275 6e63 6174 6564 4c69    if truncatedLi
+0004be90: 7175 6964 6174 696f 6e50 7269 6365 5b30  quidationPrice[0
+0004bea0: 5d20 3d3d 2027 2d27 3a0a 2020 2020 2020  ] == '-':.      
+0004beb0: 2020 2020 2020 2020 2020 2320 7573 6572            # user
+0004bec0: 2063 616e 6e6f 7420 6265 206c 6971 7569   cannot be liqui
+0004bed0: 6461 7465 640a 2020 2020 2020 2020 2020  dated.          
+0004bee0: 2020 2020 2020 2320 7369 6e63 6520 6865        # since he
+0004bef0: 2068 6173 206d 6f72 6520 636f 6c6c 6174   has more collat
+0004bf00: 6572 616c 2074 6861 6e20 7468 6520 7369  eral than the si
+0004bf10: 7a65 206f 6620 7468 6520 706f 7369 7469  ze of the positi
+0004bf20: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0004bf30: 2020 2074 7275 6e63 6174 6564 4c69 7175     truncatedLiqu
+0004bf40: 6964 6174 696f 6e50 7269 6365 203d 204e  idationPrice = N
+0004bf50: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0004bf60: 6c69 7175 6964 6174 696f 6e50 7269 6365  liquidationPrice
+0004bf70: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
+0004bf80: 6d62 6572 2874 7275 6e63 6174 6564 4c69  mber(truncatedLi
+0004bf90: 7175 6964 6174 696f 6e50 7269 6365 290a  quidationPrice).
+0004bfa0: 2020 2020 2020 2020 706f 7369 7469 6f6e          position
+0004bfb0: 5369 6465 203d 2073 656c 662e 7361 6665  Side = self.safe
+0004bfc0: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
+0004bfd0: 2c20 2770 6f73 6974 696f 6e53 6964 6527  , 'positionSide'
+0004bfe0: 290a 2020 2020 2020 2020 6865 6467 6564  ).        hedged
+0004bff0: 203d 2070 6f73 6974 696f 6e53 6964 6520   = positionSide 
+0004c000: 213d 2027 424f 5448 270a 2020 2020 2020  != 'BOTH'.      
+0004c010: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0004c020: 2020 2020 2020 2027 696e 666f 273a 2070         'info': p
+0004c030: 6f73 6974 696f 6e2c 0a20 2020 2020 2020  osition,.       
+0004c040: 2020 2020 2027 6964 273a 204e 6f6e 652c       'id': None,
+0004c050: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
+0004c060: 6d62 6f6c 273a 2073 796d 626f 6c2c 0a20  mbol': symbol,. 
+0004c070: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0004c080: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+0004c090: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+0004c0a0: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+0004c0b0: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+0004c0c0: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
+0004c0d0: 2769 6e69 7469 616c 4d61 7267 696e 273a  'initialMargin':
+0004c0e0: 2069 6e69 7469 616c 4d61 7267 696e 2c0a   initialMargin,.
+0004c0f0: 2020 2020 2020 2020 2020 2020 2769 6e69              'ini
+0004c100: 7469 616c 4d61 7267 696e 5065 7263 656e  tialMarginPercen
+0004c110: 7461 6765 273a 2073 656c 662e 7061 7273  tage': self.pars
+0004c120: 655f 6e75 6d62 6572 2869 6e69 7469 616c  e_number(initial
+0004c130: 4d61 7267 696e 5065 7263 656e 7461 6765  MarginPercentage
+0004c140: 5374 7269 6e67 292c 0a20 2020 2020 2020  String),.       
+0004c150: 2020 2020 2027 6d61 696e 7465 6e61 6e63       'maintenanc
+0004c160: 654d 6172 6769 6e27 3a20 6d61 696e 7465  eMargin': mainte
+0004c170: 6e61 6e63 654d 6172 6769 6e2c 0a20 2020  nanceMargin,.   
+0004c180: 2020 2020 2020 2020 2027 6d61 696e 7465           'mainte
+0004c190: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004c1a0: 6e74 6167 6527 3a20 6d61 696e 7465 6e61  ntage': maintena
+0004c1b0: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
+0004c1c0: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
+0004c1d0: 2027 656e 7472 7950 7269 6365 273a 2065   'entryPrice': e
+0004c1e0: 6e74 7279 5072 6963 652c 0a20 2020 2020  ntryPrice,.     
+0004c1f0: 2020 2020 2020 2027 6e6f 7469 6f6e 616c         'notional
+0004c200: 273a 206e 6f74 696f 6e61 6c2c 0a20 2020  ': notional,.   
+0004c210: 2020 2020 2020 2020 2027 6c65 7665 7261           'levera
+0004c220: 6765 273a 2073 656c 662e 7061 7273 655f  ge': self.parse_
+0004c230: 6e75 6d62 6572 286c 6576 6572 6167 6553  number(leverageS
+0004c240: 7472 696e 6729 2c0a 2020 2020 2020 2020  tring),.        
+0004c250: 2020 2020 2775 6e72 6561 6c69 7a65 6450      'unrealizedP
+0004c260: 6e6c 273a 2075 6e72 6561 6c69 7a65 6450  nl': unrealizedP
+0004c270: 6e6c 2c0a 2020 2020 2020 2020 2020 2020  nl,.            
+0004c280: 2763 6f6e 7472 6163 7473 273a 2063 6f6e  'contracts': con
+0004c290: 7472 6163 7473 2c0a 2020 2020 2020 2020  tracts,.        
+0004c2a0: 2020 2020 2763 6f6e 7472 6163 7453 697a      'contractSiz
+0004c2b0: 6527 3a20 636f 6e74 7261 6374 5369 7a65  e': contractSize
+0004c2c0: 2c0a 2020 2020 2020 2020 2020 2020 276d  ,.            'm
+0004c2d0: 6172 6769 6e52 6174 696f 273a 206d 6172  arginRatio': mar
+0004c2e0: 6769 6e52 6174 696f 2c0a 2020 2020 2020  ginRatio,.      
+0004c2f0: 2020 2020 2020 276c 6971 7569 6461 7469        'liquidati
+0004c300: 6f6e 5072 6963 6527 3a20 6c69 7175 6964  onPrice': liquid
+0004c310: 6174 696f 6e50 7269 6365 2c0a 2020 2020  ationPrice,.    
+0004c320: 2020 2020 2020 2020 276d 6172 6b50 7269          'markPri
+0004c330: 6365 273a 204e 6f6e 652c 0a20 2020 2020  ce': None,.     
+0004c340: 2020 2020 2020 2027 636f 6c6c 6174 6572         'collater
+0004c350: 616c 273a 2063 6f6c 6c61 7465 7261 6c2c  al': collateral,
+0004c360: 0a20 2020 2020 2020 2020 2020 2027 6d61  .            'ma
+0004c370: 7267 696e 4d6f 6465 273a 206d 6172 6769  rginMode': margi
+0004c380: 6e4d 6f64 652c 0a20 2020 2020 2020 2020  nMode,.         
+0004c390: 2020 2027 7369 6465 273a 2073 6964 652c     'side': side,
+0004c3a0: 0a20 2020 2020 2020 2020 2020 2027 6865  .            'he
+0004c3b0: 6467 6564 273a 2068 6564 6765 642c 0a20  dged': hedged,. 
+0004c3c0: 2020 2020 2020 2020 2020 2027 7065 7263             'perc
+0004c3d0: 656e 7461 6765 273a 2070 6572 6365 6e74  entage': percent
+0004c3e0: 6167 652c 0a20 2020 2020 2020 207d 0a0a  age,.        }..
+0004c3f0: 2020 2020 6465 6620 7061 7273 655f 706f      def parse_po
+0004c400: 7369 7469 6f6e 5f72 6973 6b28 7365 6c66  sition_risk(self
+0004c410: 2c20 706f 7369 7469 6f6e 2c20 6d61 726b  , position, mark
+0004c420: 6574 3d4e 6f6e 6529 3a0a 2020 2020 2020  et=None):.      
+0004c430: 2020 230a 2020 2020 2020 2020 2320 7573    #.        # us
+0004c440: 646d 0a20 2020 2020 2020 2023 2020 2020  dm.        #    
+0004c450: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0004c460: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
+0004c470: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
+0004c480: 2320 2020 2020 2020 2270 6f73 6974 696f  #       "positio
+0004c490: 6e41 6d74 223a 2022 302e 3030 3122 2c0a  nAmt": "0.001",.
+0004c4a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004c4b0: 2265 6e74 7279 5072 6963 6522 3a20 2234  "entryPrice": "4
+0004c4c0: 3335 3738 2e30 3730 3030 222c 0a20 2020  3578.07000",.   
+0004c4d0: 2020 2020 2023 2020 2020 2020 2022 6d61       #       "ma
+0004c4e0: 726b 5072 6963 6522 3a20 2234 3335 3332  rkPrice": "43532
+0004c4f0: 2e33 3030 3030 3030 3022 2c0a 2020 2020  .30000000",.    
+0004c500: 2020 2020 2320 2020 2020 2020 2275 6e52      #       "unR
+0004c510: 6561 6c69 7a65 6450 726f 6669 7422 3a20  ealizedProfit": 
+0004c520: 222d 302e 3034 3537 3730 3030 222c 0a20  "-0.04577000",. 
+0004c530: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0004c540: 6c69 7175 6964 6174 696f 6e50 7269 6365  liquidationPrice
+0004c550: 223a 2022 3231 3834 312e 3234 3939 3339  ": "21841.249939
+0004c560: 3736 222c 0a20 2020 2020 2020 2023 2020  76",.        #  
+0004c570: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
+0004c580: 2022 3222 2c0a 2020 2020 2020 2020 2320   "2",.        # 
+0004c590: 2020 2020 2020 226d 6178 4e6f 7469 6f6e        "maxNotion
+0004c5a0: 616c 5661 6c75 6522 3a20 2233 3030 3030  alValue": "30000
+0004c5b0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+0004c5c0: 2020 2020 2020 2022 6d61 7267 696e 5479         "marginTy
+0004c5d0: 7065 223a 2022 6973 6f6c 6174 6564 222c  pe": "isolated",
+0004c5e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004c5f0: 2022 6973 6f6c 6174 6564 4d61 7267 696e   "isolatedMargin
+0004c600: 223a 2022 3231 2e37 3738 3431 3530 3622  ": "21.77841506"
+0004c610: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004c620: 2020 2269 7341 7574 6f41 6464 4d61 7267    "isAutoAddMarg
+0004c630: 696e 223a 2022 6661 6c73 6522 2c0a 2020  in": "false",.  
+0004c640: 2020 2020 2020 2320 2020 2020 2020 2270        #       "p
+0004c650: 6f73 6974 696f 6e53 6964 6522 3a20 2242  ositionSide": "B
+0004c660: 4f54 4822 2c0a 2020 2020 2020 2020 2320  OTH",.        # 
+0004c670: 2020 2020 2020 226e 6f74 696f 6e61 6c22        "notional"
+0004c680: 3a20 2234 332e 3533 3233 3030 3030 222c  : "43.53230000",
+0004c690: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004c6a0: 2022 6973 6f6c 6174 6564 5761 6c6c 6574   "isolatedWallet
+0004c6b0: 223a 2022 3231 2e38 3234 3138 3530 3622  ": "21.82418506"
+0004c6c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004c6d0: 2020 2275 7064 6174 6554 696d 6522 3a20    "updateTime": 
+0004c6e0: 2231 3632 3133 3538 3032 3338 3836 220a  "1621358023886".
+0004c6f0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0004c700: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004c710: 2020 2320 636f 696e 6d0a 2020 2020 2020    # coinm.      
+0004c720: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0004c730: 2020 2320 2020 2020 2020 2273 796d 626f    #       "symbo
+0004c740: 6c22 3a20 2242 5443 5553 445f 5045 5250  l": "BTCUSD_PERP
+0004c750: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004c760: 2020 2022 706f 7369 7469 6f6e 416d 7422     "positionAmt"
+0004c770: 3a20 2232 222c 0a20 2020 2020 2020 2023  : "2",.        #
+0004c780: 2020 2020 2020 2022 656e 7472 7950 7269         "entryPri
+0004c790: 6365 223a 2022 3337 3634 332e 3130 3030  ce": "37643.1000
+0004c7a0: 3030 3231 222c 0a20 2020 2020 2020 2023  0021",.        #
+0004c7b0: 2020 2020 2020 2022 6d61 726b 5072 6963         "markPric
+0004c7c0: 6522 3a20 2233 3831 3033 2e30 3535 3130  e": "38103.05510
+0004c7d0: 3435 3522 2c0a 2020 2020 2020 2020 2320  455",.        # 
+0004c7e0: 2020 2020 2020 2275 6e52 6561 6c69 7a65        "unRealize
+0004c7f0: 6450 726f 6669 7422 3a20 2230 2e30 3030  dProfit": "0.000
+0004c800: 3036 3431 3322 2c0a 2020 2020 2020 2020  06413",.        
+0004c810: 2320 2020 2020 2020 226c 6971 7569 6461  #       "liquida
+0004c820: 7469 6f6e 5072 6963 6522 3a20 2232 3531  tionPrice": "251
+0004c830: 3139 2e39 3734 3435 3736 3022 2c0a 2020  19.97445760",.  
+0004c840: 2020 2020 2020 2320 2020 2020 2020 226c        #       "l
+0004c850: 6576 6572 6167 6522 3a20 2232 222c 0a20  everage": "2",. 
+0004c860: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0004c870: 6d61 7851 7479 223a 2022 3135 3030 222c  maxQty": "1500",
+0004c880: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004c890: 2022 6d61 7267 696e 5479 7065 223a 2022   "marginType": "
+0004c8a0: 6973 6f6c 6174 6564 222c 0a20 2020 2020  isolated",.     
+0004c8b0: 2020 2023 2020 2020 2020 2022 6973 6f6c     #       "isol
+0004c8c0: 6174 6564 4d61 7267 696e 223a 2022 302e  atedMargin": "0.
+0004c8d0: 3030 3237 3434 3731 222c 0a20 2020 2020  00274471",.     
+0004c8e0: 2020 2023 2020 2020 2020 2022 6973 4175     #       "isAu
+0004c8f0: 746f 4164 644d 6172 6769 6e22 3a20 2266  toAddMargin": "f
+0004c900: 616c 7365 222c 0a20 2020 2020 2020 2023  alse",.        #
+0004c910: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
+0004c920: 5369 6465 223a 2022 424f 5448 222c 0a20  Side": "BOTH",. 
+0004c930: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+0004c940: 6e6f 7469 6f6e 616c 5661 6c75 6522 3a20  notionalValue": 
+0004c950: 2230 2e30 3035 3234 3839 3222 2c0a 2020  "0.00524892",.  
+0004c960: 2020 2020 2020 2320 2020 2020 2020 2269        #       "i
+0004c970: 736f 6c61 7465 6457 616c 6c65 7422 3a20  solatedWallet": 
+0004c980: 2230 2e30 3032 3638 3035 3822 0a20 2020  "0.00268058".   
+0004c990: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0004c9a0: 2020 2020 2023 0a20 2020 2020 2020 206d       #.        m
+0004c9b0: 6172 6b65 7449 6420 3d20 7365 6c66 2e73  arketId = self.s
+0004c9c0: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
+0004c9d0: 696f 6e2c 2027 7379 6d62 6f6c 2729 0a20  ion, 'symbol'). 
+0004c9e0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+0004c9f0: 7365 6c66 2e73 6166 655f 6d61 726b 6574  self.safe_market
+0004ca00: 286d 6172 6b65 7449 642c 206d 6172 6b65  (marketId, marke
+0004ca10: 742c 204e 6f6e 652c 2027 636f 6e74 7261  t, None, 'contra
+0004ca20: 6374 2729 0a20 2020 2020 2020 2073 796d  ct').        sym
+0004ca30: 626f 6c20 3d20 7365 6c66 2e73 6166 655f  bol = self.safe_
+0004ca40: 7374 7269 6e67 286d 6172 6b65 742c 2027  string(market, '
+0004ca50: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+0004ca60: 206c 6576 6572 6167 6542 7261 636b 6574   leverageBracket
+0004ca70: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+0004ca80: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
+0004ca90: 2c20 276c 6576 6572 6167 6542 7261 636b  , 'leverageBrack
+0004caa0: 6574 7327 2c20 7b7d 290a 2020 2020 2020  ets', {}).      
+0004cab0: 2020 6c65 7665 7261 6765 4272 6163 6b65    leverageBracke
+0004cac0: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
+0004cad0: 6c75 6528 6c65 7665 7261 6765 4272 6163  lue(leverageBrac
+0004cae0: 6b65 7473 2c20 7379 6d62 6f6c 2c20 5b5d  kets, symbol, []
+0004caf0: 290a 2020 2020 2020 2020 6e6f 7469 6f6e  ).        notion
+0004cb00: 616c 5374 7269 6e67 203d 2073 656c 662e  alString = self.
+0004cb10: 7361 6665 5f73 7472 696e 675f 3228 706f  safe_string_2(po
+0004cb20: 7369 7469 6f6e 2c20 276e 6f74 696f 6e61  sition, 'notiona
+0004cb30: 6c27 2c20 276e 6f74 696f 6e61 6c56 616c  l', 'notionalVal
+0004cb40: 7565 2729 0a20 2020 2020 2020 206e 6f74  ue').        not
+0004cb50: 696f 6e61 6c53 7472 696e 6741 6273 203d  ionalStringAbs =
+0004cb60: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004cb70: 6162 7328 6e6f 7469 6f6e 616c 5374 7269  abs(notionalStri
+0004cb80: 6e67 290a 2020 2020 2020 2020 6d61 696e  ng).        main
+0004cb90: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004cba0: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
+0004cbb0: 4e6f 6e65 0a20 2020 2020 2020 2066 6f72  None.        for
+0004cbc0: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
+0004cbd0: 656e 286c 6576 6572 6167 6542 7261 636b  en(leverageBrack
+0004cbe0: 6574 2929 3a0a 2020 2020 2020 2020 2020  et)):.          
+0004cbf0: 2020 6272 6163 6b65 7420 3d20 6c65 7665    bracket = leve
+0004cc00: 7261 6765 4272 6163 6b65 745b 695d 0a20  rageBracket[i]. 
+0004cc10: 2020 2020 2020 2020 2020 2069 6620 5072             if Pr
+0004cc20: 6563 6973 652e 7374 7269 6e67 5f6c 7428  ecise.string_lt(
+0004cc30: 6e6f 7469 6f6e 616c 5374 7269 6e67 4162  notionalStringAb
+0004cc40: 732c 2062 7261 636b 6574 5b30 5d29 3a0a  s, bracket[0]):.
+0004cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cc60: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+0004cc70: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
+0004cc80: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004cc90: 696e 6720 3d20 6272 6163 6b65 745b 315d  ing = bracket[1]
+0004cca0: 0a20 2020 2020 2020 206e 6f74 696f 6e61  .        notiona
+0004ccb0: 6c20 3d20 7365 6c66 2e70 6172 7365 5f6e  l = self.parse_n
+0004ccc0: 756d 6265 7228 6e6f 7469 6f6e 616c 5374  umber(notionalSt
+0004ccd0: 7269 6e67 4162 7329 0a20 2020 2020 2020  ringAbs).       
+0004cce0: 2063 6f6e 7472 6163 7473 4162 7320 3d20   contractsAbs = 
+0004ccf0: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
+0004cd00: 6273 2873 656c 662e 7361 6665 5f73 7472  bs(self.safe_str
+0004cd10: 696e 6728 706f 7369 7469 6f6e 2c20 2770  ing(position, 'p
+0004cd20: 6f73 6974 696f 6e41 6d74 2729 290a 2020  ositionAmt')).  
+0004cd30: 2020 2020 2020 636f 6e74 7261 6374 7320        contracts 
+0004cd40: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0004cd50: 6265 7228 636f 6e74 7261 6374 7341 6273  ber(contractsAbs
+0004cd60: 290a 2020 2020 2020 2020 756e 7265 616c  ).        unreal
+0004cd70: 697a 6564 506e 6c53 7472 696e 6720 3d20  izedPnlString = 
+0004cd80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0004cd90: 2870 6f73 6974 696f 6e2c 2027 756e 5265  (position, 'unRe
+0004cda0: 616c 697a 6564 5072 6f66 6974 2729 0a20  alizedProfit'). 
+0004cdb0: 2020 2020 2020 2075 6e72 6561 6c69 7a65         unrealize
+0004cdc0: 6450 6e6c 203d 2073 656c 662e 7061 7273  dPnl = self.pars
+0004cdd0: 655f 6e75 6d62 6572 2875 6e72 6561 6c69  e_number(unreali
+0004cde0: 7a65 6450 6e6c 5374 7269 6e67 290a 2020  zedPnlString).  
+0004cdf0: 2020 2020 2020 6c65 7665 7261 6765 5374        leverageSt
+0004ce00: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
+0004ce10: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
+0004ce20: 2c20 276c 6576 6572 6167 6527 290a 2020  , 'leverage').  
+0004ce30: 2020 2020 2020 6c65 7665 7261 6765 203d        leverage =
+0004ce40: 2069 6e74 286c 6576 6572 6167 6553 7472   int(leverageStr
+0004ce50: 696e 6729 0a20 2020 2020 2020 206c 6971  ing).        liq
+0004ce60: 7569 6461 7469 6f6e 5072 6963 6553 7472  uidationPriceStr
+0004ce70: 696e 6720 3d20 7365 6c66 2e6f 6d69 745f  ing = self.omit_
+0004ce80: 7a65 726f 2873 656c 662e 7361 6665 5f73  zero(self.safe_s
+0004ce90: 7472 696e 6728 706f 7369 7469 6f6e 2c20  tring(position, 
+0004cea0: 276c 6971 7569 6461 7469 6f6e 5072 6963  'liquidationPric
+0004ceb0: 6527 2929 0a20 2020 2020 2020 206c 6971  e')).        liq
+0004cec0: 7569 6461 7469 6f6e 5072 6963 6520 3d20  uidationPrice = 
+0004ced0: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
+0004cee0: 7228 6c69 7175 6964 6174 696f 6e50 7269  r(liquidationPri
+0004cef0: 6365 5374 7269 6e67 290a 2020 2020 2020  ceString).      
+0004cf00: 2020 636f 6c6c 6174 6572 616c 5374 7269    collateralStri
+0004cf10: 6e67 203d 204e 6f6e 650a 2020 2020 2020  ng = None.      
+0004cf20: 2020 6d61 7267 696e 4d6f 6465 203d 2073    marginMode = s
+0004cf30: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0004cf40: 706f 7369 7469 6f6e 2c20 276d 6172 6769  position, 'margi
+0004cf50: 6e54 7970 6527 290a 2020 2020 2020 2020  nType').        
+0004cf60: 7369 6465 203d 204e 6f6e 650a 2020 2020  side = None.    
+0004cf70: 2020 2020 6966 2050 7265 6369 7365 2e73      if Precise.s
+0004cf80: 7472 696e 675f 6774 286e 6f74 696f 6e61  tring_gt(notiona
+0004cf90: 6c53 7472 696e 672c 2027 3027 293a 0a20  lString, '0'):. 
+0004cfa0: 2020 2020 2020 2020 2020 2073 6964 6520             side 
+0004cfb0: 3d20 276c 6f6e 6727 0a20 2020 2020 2020  = 'long'.       
+0004cfc0: 2065 6c69 6620 5072 6563 6973 652e 7374   elif Precise.st
+0004cfd0: 7269 6e67 5f6c 7428 6e6f 7469 6f6e 616c  ring_lt(notional
+0004cfe0: 5374 7269 6e67 2c20 2730 2729 3a0a 2020  String, '0'):.  
+0004cff0: 2020 2020 2020 2020 2020 7369 6465 203d            side =
+0004d000: 2027 7368 6f72 7427 0a20 2020 2020 2020   'short'.       
+0004d010: 2065 6e74 7279 5072 6963 6553 7472 696e   entryPriceStrin
+0004d020: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
+0004d030: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
+0004d040: 656e 7472 7950 7269 6365 2729 0a20 2020  entryPrice').   
+0004d050: 2020 2020 2065 6e74 7279 5072 6963 6520       entryPrice 
+0004d060: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0004d070: 6265 7228 656e 7472 7950 7269 6365 5374  ber(entryPriceSt
+0004d080: 7269 6e67 290a 2020 2020 2020 2020 636f  ring).        co
+0004d090: 6e74 7261 6374 5369 7a65 203d 2073 656c  ntractSize = sel
+0004d0a0: 662e 7361 6665 5f76 616c 7565 286d 6172  f.safe_value(mar
+0004d0b0: 6b65 742c 2027 636f 6e74 7261 6374 5369  ket, 'contractSi
+0004d0c0: 7a65 2729 0a20 2020 2020 2020 2063 6f6e  ze').        con
+0004d0d0: 7472 6163 7453 697a 6553 7472 696e 6720  tractSizeString 
+0004d0e0: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
+0004d0f0: 5f73 7472 696e 6728 636f 6e74 7261 6374  _string(contract
+0004d100: 5369 7a65 290a 2020 2020 2020 2020 2320  Size).        # 
+0004d110: 746f 206e 6f74 696f 6e61 6c56 616c 7565  to notionalValue
+0004d120: 0a20 2020 2020 2020 206c 696e 6561 7220  .        linear 
+0004d130: 3d20 2827 6e6f 7469 6f6e 616c 2720 696e  = ('notional' in
+0004d140: 2070 6f73 6974 696f 6e29 0a20 2020 2020   position).     
+0004d150: 2020 2069 6620 6d61 7267 696e 4d6f 6465     if marginMode
+0004d160: 203d 3d20 2763 726f 7373 273a 0a20 2020   == 'cross':.   
+0004d170: 2020 2020 2020 2020 2023 2063 616c 6375           # calcu
+0004d180: 6c61 7465 2063 6f6c 6c61 7465 7261 6c0a  late collateral.
+0004d190: 2020 2020 2020 2020 2020 2020 7072 6563              prec
+0004d1a0: 6973 696f 6e20 3d20 7365 6c66 2e73 6166  ision = self.saf
+0004d1b0: 655f 7661 6c75 6528 6d61 726b 6574 2c20  e_value(market, 
+0004d1c0: 2770 7265 6369 7369 6f6e 272c 207b 7d29  'precision', {})
+0004d1d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0004d1e0: 6c69 6e65 6172 3a0a 2020 2020 2020 2020  linear:.        
+0004d1f0: 2020 2020 2020 2020 2320 7761 6c6c 6574          # wallet
+0004d200: 4261 6c61 6e63 6520 3d20 286c 6971 7569  Balance = (liqui
+0004d210: 6461 7469 6f6e 5072 6963 6520 2a20 28c2  dationPrice * (.
+0004d220: b131 202b 206d 6d70 2920 c2b1 2065 6e74  .1 + mmp) .. ent
+0004d230: 7279 5072 6963 6529 202a 2063 6f6e 7472  ryPrice) * contr
+0004d240: 6163 7473 0a20 2020 2020 2020 2020 2020  acts.           
+0004d250: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
+0004d260: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004d270: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
+0004d280: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0004d290: 2020 2020 2065 6e74 7279 5072 6963 6553       entryPriceS
+0004d2a0: 6967 6e53 7472 696e 6720 3d20 656e 7472  ignString = entr
+0004d2b0: 7950 7269 6365 5374 7269 6e67 0a20 2020  yPriceString.   
+0004d2c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0004d2d0: 7369 6465 203d 3d20 2773 686f 7274 273a  side == 'short':
+0004d2e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004d2f0: 2020 2020 206f 6e65 506c 7573 4d61 696e       onePlusMain
+0004d300: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004d310: 6365 6e74 6167 6553 7472 696e 6720 3d20  centageString = 
+0004d320: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
+0004d330: 6464 2827 3127 2c20 6d61 696e 7465 6e61  dd('1', maintena
+0004d340: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
+0004d350: 6167 6553 7472 696e 6729 0a20 2020 2020  ageString).     
+0004d360: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0004d370: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004d380: 696e 6720 3d20 5072 6563 6973 652e 7374  ing = Precise.st
+0004d390: 7269 6e67 5f6d 756c 2827 2d31 272c 2065  ring_mul('-1', e
+0004d3a0: 6e74 7279 5072 6963 6553 6967 6e53 7472  ntryPriceSignStr
+0004d3b0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0004d3c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0004d3d0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0004d3e0: 6e65 506c 7573 4d61 696e 7465 6e61 6e63  nePlusMaintenanc
+0004d3f0: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+0004d400: 6553 7472 696e 6720 3d20 5072 6563 6973  eString = Precis
+0004d410: 652e 7374 7269 6e67 5f61 6464 2827 2d31  e.string_add('-1
+0004d420: 272c 206d 6169 6e74 656e 616e 6365 4d61  ', maintenanceMa
+0004d430: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
+0004d440: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0004d450: 2020 2020 2020 696e 6e65 7220 3d20 5072        inner = Pr
+0004d460: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
+0004d470: 286c 6971 7569 6461 7469 6f6e 5072 6963  (liquidationPric
+0004d480: 6553 7472 696e 672c 206f 6e65 506c 7573  eString, onePlus
+0004d490: 4d61 696e 7465 6e61 6e63 654d 6172 6769  MaintenanceMargi
+0004d4a0: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
+0004d4b0: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+0004d4c0: 2020 206c 6566 7453 6964 6520 3d20 5072     leftSide = Pr
+0004d4d0: 6563 6973 652e 7374 7269 6e67 5f61 6464  ecise.string_add
+0004d4e0: 2869 6e6e 6572 2c20 656e 7472 7950 7269  (inner, entryPri
+0004d4f0: 6365 5369 676e 5374 7269 6e67 290a 2020  ceSignString).  
+0004d500: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0004d510: 6963 6550 7265 6369 7369 6f6e 203d 2073  icePrecision = s
+0004d520: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+0004d530: 2870 7265 6369 7369 6f6e 2c20 2770 7269  (precision, 'pri
+0004d540: 6365 2729 0a20 2020 2020 2020 2020 2020  ce').           
+0004d550: 2020 2020 2071 756f 7465 5072 6563 6973       quotePrecis
+0004d560: 696f 6e20 3d20 7365 6c66 2e73 6166 655f  ion = self.safe_
+0004d570: 696e 7465 6765 7228 7072 6563 6973 696f  integer(precisio
+0004d580: 6e2c 2027 7175 6f74 6527 2c20 7072 6963  n, 'quote', pric
+0004d590: 6550 7265 6369 7369 6f6e 290a 2020 2020  ePrecision).    
+0004d5a0: 2020 2020 2020 2020 2020 2020 6966 2071              if q
+0004d5b0: 756f 7465 5072 6563 6973 696f 6e20 6973  uotePrecision is
+0004d5c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0004d5d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0004d5e0: 6f6c 6c61 7465 7261 6c53 7472 696e 6720  ollateralString 
+0004d5f0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0004d600: 5f64 6976 2850 7265 6369 7365 2e73 7472  _div(Precise.str
+0004d610: 696e 675f 6d75 6c28 6c65 6674 5369 6465  ing_mul(leftSide
+0004d620: 2c20 636f 6e74 7261 6374 7341 6273 292c  , contractsAbs),
+0004d630: 2027 3127 2c20 7175 6f74 6550 7265 6369   '1', quotePreci
+0004d640: 7369 6f6e 290a 2020 2020 2020 2020 2020  sion).          
+0004d650: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0004d660: 2020 2020 2020 2020 2320 7761 6c6c 6574          # wallet
+0004d670: 4261 6c61 6e63 6520 3d20 2863 6f6e 7472  Balance = (contr
+0004d680: 6163 7473 202a 2063 6f6e 7472 6163 7453  acts * contractS
+0004d690: 697a 6529 202a 2028 c2b1 312f 656e 7472  ize) * (..1/entr
+0004d6a0: 7950 7269 6365 202d 2028 c2b1 3120 2d20  yPrice - (..1 - 
+0004d6b0: 6d6d 7029 202f 206c 6971 7569 6461 7469  mmp) / liquidati
+0004d6c0: 6f6e 5072 6963 6529 0a20 2020 2020 2020  onPrice).       
+0004d6d0: 2020 2020 2020 2020 206f 6e65 506c 7573           onePlus
+0004d6e0: 4d61 696e 7465 6e61 6e63 654d 6172 6769  MaintenanceMargi
+0004d6f0: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
+0004d700: 6720 3d20 4e6f 6e65 0a20 2020 2020 2020  g = None.       
+0004d710: 2020 2020 2020 2020 2065 6e74 7279 5072           entryPr
+0004d720: 6963 6553 6967 6e53 7472 696e 6720 3d20  iceSignString = 
+0004d730: 656e 7472 7950 7269 6365 5374 7269 6e67  entryPriceString
+0004d740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004d750: 2069 6620 7369 6465 203d 3d20 2773 686f   if side == 'sho
+0004d760: 7274 273a 0a20 2020 2020 2020 2020 2020  rt':.           
+0004d770: 2020 2020 2020 2020 206f 6e65 506c 7573           onePlus
+0004d780: 4d61 696e 7465 6e61 6e63 654d 6172 6769  MaintenanceMargi
+0004d790: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
+0004d7a0: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+0004d7b0: 6e67 5f73 7562 2827 3127 2c20 6d61 696e  ng_sub('1', main
+0004d7c0: 7465 6e61 6e63 654d 6172 6769 6e50 6572  tenanceMarginPer
+0004d7d0: 6365 6e74 6167 6553 7472 696e 6729 0a20  centageString). 
+0004d7e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0004d7f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0004d800: 2020 2020 2020 2020 206f 6e65 506c 7573           onePlus
+0004d810: 4d61 696e 7465 6e61 6e63 654d 6172 6769  MaintenanceMargi
+0004d820: 6e50 6572 6365 6e74 6167 6553 7472 696e  nPercentageStrin
+0004d830: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+0004d840: 6e67 5f73 7562 2827 2d31 272c 206d 6169  ng_sub('-1', mai
+0004d850: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
+0004d860: 7263 656e 7461 6765 5374 7269 6e67 290a  rcentageString).
+0004d870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d880: 2020 2020 656e 7472 7950 7269 6365 5369      entryPriceSi
+0004d890: 676e 5374 7269 6e67 203d 2050 7265 6369  gnString = Preci
+0004d8a0: 7365 2e73 7472 696e 675f 6d75 6c28 272d  se.string_mul('-
+0004d8b0: 3127 2c20 656e 7472 7950 7269 6365 5369  1', entryPriceSi
+0004d8c0: 676e 5374 7269 6e67 290a 2020 2020 2020  gnString).      
+0004d8d0: 2020 2020 2020 2020 2020 6c65 6674 5369            leftSi
+0004d8e0: 6465 203d 2050 7265 6369 7365 2e73 7472  de = Precise.str
+0004d8f0: 696e 675f 6d75 6c28 636f 6e74 7261 6374  ing_mul(contract
+0004d900: 7341 6273 2c20 636f 6e74 7261 6374 5369  sAbs, contractSi
+0004d910: 7a65 5374 7269 6e67 290a 2020 2020 2020  zeString).      
+0004d920: 2020 2020 2020 2020 2020 7269 6768 7453            rightS
+0004d930: 6964 6520 3d20 5072 6563 6973 652e 7374  ide = Precise.st
+0004d940: 7269 6e67 5f73 7562 2850 7265 6369 7365  ring_sub(Precise
+0004d950: 2e73 7472 696e 675f 6469 7628 2731 272c  .string_div('1',
+0004d960: 2065 6e74 7279 5072 6963 6553 6967 6e53   entryPriceSignS
+0004d970: 7472 696e 6729 2c20 5072 6563 6973 652e  tring), Precise.
+0004d980: 7374 7269 6e67 5f64 6976 286f 6e65 506c  string_div(onePl
+0004d990: 7573 4d61 696e 7465 6e61 6e63 654d 6172  usMaintenanceMar
+0004d9a0: 6769 6e50 6572 6365 6e74 6167 6553 7472  ginPercentageStr
+0004d9b0: 696e 672c 206c 6971 7569 6461 7469 6f6e  ing, liquidation
+0004d9c0: 5072 6963 6553 7472 696e 6729 290a 2020  PriceString)).  
+0004d9d0: 2020 2020 2020 2020 2020 2020 2020 6261                ba
+0004d9e0: 7365 5072 6563 6973 696f 6e20 3d20 7365  sePrecision = se
+0004d9f0: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
+0004da00: 7072 6563 6973 696f 6e2c 2027 6261 7365  precision, 'base
+0004da10: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0004da20: 2020 2069 6620 6261 7365 5072 6563 6973     if basePrecis
+0004da30: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
+0004da40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004da50: 2020 2020 2063 6f6c 6c61 7465 7261 6c53       collateralS
+0004da60: 7472 696e 6720 3d20 5072 6563 6973 652e  tring = Precise.
+0004da70: 7374 7269 6e67 5f64 6976 2850 7265 6369  string_div(Preci
+0004da80: 7365 2e73 7472 696e 675f 6d75 6c28 6c65  se.string_mul(le
+0004da90: 6674 5369 6465 2c20 7269 6768 7453 6964  ftSide, rightSid
+0004daa0: 6529 2c20 2731 272c 2062 6173 6550 7265  e), '1', basePre
+0004dab0: 6369 7369 6f6e 290a 2020 2020 2020 2020  cision).        
+0004dac0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0004dad0: 2020 636f 6c6c 6174 6572 616c 5374 7269    collateralStri
+0004dae0: 6e67 203d 2073 656c 662e 7361 6665 5f73  ng = self.safe_s
+0004daf0: 7472 696e 6728 706f 7369 7469 6f6e 2c20  tring(position, 
+0004db00: 2769 736f 6c61 7465 644d 6172 6769 6e27  'isolatedMargin'
+0004db10: 290a 2020 2020 2020 2020 636f 6c6c 6174  ).        collat
+0004db20: 6572 616c 5374 7269 6e67 203d 2027 3027  eralString = '0'
+0004db30: 2069 6620 2863 6f6c 6c61 7465 7261 6c53   if (collateralS
+0004db40: 7472 696e 6720 6973 204e 6f6e 6529 2065  tring is None) e
+0004db50: 6c73 6520 636f 6c6c 6174 6572 616c 5374  lse collateralSt
+0004db60: 7269 6e67 0a20 2020 2020 2020 2063 6f6c  ring.        col
+0004db70: 6c61 7465 7261 6c20 3d20 7365 6c66 2e70  lateral = self.p
+0004db80: 6172 7365 5f6e 756d 6265 7228 636f 6c6c  arse_number(coll
+0004db90: 6174 6572 616c 5374 7269 6e67 290a 2020  ateralString).  
+0004dba0: 2020 2020 2020 6d61 726b 5072 6963 6520        markPrice 
+0004dbb0: 3d20 7365 6c66 2e70 6172 7365 5f6e 756d  = self.parse_num
+0004dbc0: 6265 7228 7365 6c66 2e6f 6d69 745f 7a65  ber(self.omit_ze
+0004dbd0: 726f 2873 656c 662e 7361 6665 5f73 7472  ro(self.safe_str
+0004dbe0: 696e 6728 706f 7369 7469 6f6e 2c20 276d  ing(position, 'm
+0004dbf0: 6172 6b50 7269 6365 2729 2929 0a20 2020  arkPrice'))).   
+0004dc00: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+0004dc10: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+0004dc20: 6572 2870 6f73 6974 696f 6e2c 2027 7570  er(position, 'up
+0004dc30: 6461 7465 5469 6d65 2729 0a20 2020 2020  dateTime').     
+0004dc40: 2020 2069 6620 7469 6d65 7374 616d 7020     if timestamp 
+0004dc50: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
+0004dc60: 2020 7469 6d65 7374 616d 7020 3d20 4e6f    timestamp = No
+0004dc70: 6e65 0a20 2020 2020 2020 206d 6169 6e74  ne.        maint
+0004dc80: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004dc90: 656e 7461 6765 203d 2073 656c 662e 7061  entage = self.pa
+0004dca0: 7273 655f 6e75 6d62 6572 286d 6169 6e74  rse_number(maint
+0004dcb0: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
+0004dcc0: 656e 7461 6765 5374 7269 6e67 290a 2020  entageString).  
+0004dcd0: 2020 2020 2020 6d61 696e 7465 6e61 6e63        maintenanc
+0004dce0: 654d 6172 6769 6e53 7472 696e 6720 3d20  eMarginString = 
+0004dcf0: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
+0004dd00: 756c 286d 6169 6e74 656e 616e 6365 4d61  ul(maintenanceMa
+0004dd10: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
+0004dd20: 7269 6e67 2c20 6e6f 7469 6f6e 616c 5374  ring, notionalSt
+0004dd30: 7269 6e67 4162 7329 0a20 2020 2020 2020  ringAbs).       
+0004dd40: 206d 6169 6e74 656e 616e 6365 4d61 7267   maintenanceMarg
+0004dd50: 696e 203d 2073 656c 662e 7061 7273 655f  in = self.parse_
+0004dd60: 6e75 6d62 6572 286d 6169 6e74 656e 616e  number(maintenan
+0004dd70: 6365 4d61 7267 696e 5374 7269 6e67 290a  ceMarginString).
+0004dd80: 2020 2020 2020 2020 696e 6974 6961 6c4d          initialM
+0004dd90: 6172 6769 6e50 6572 6365 6e74 6167 6553  arginPercentageS
+0004dda0: 7472 696e 6720 3d20 5072 6563 6973 652e  tring = Precise.
+0004ddb0: 7374 7269 6e67 5f64 6976 2827 3127 2c20  string_div('1', 
+0004ddc0: 6c65 7665 7261 6765 5374 7269 6e67 2c20  leverageString, 
+0004ddd0: 3829 0a20 2020 2020 2020 2072 6174 696f  8).        ratio
+0004dde0: 6e61 6c20 3d20 2831 3030 3020 2520 6c65  nal = (1000 % le
+0004ddf0: 7665 7261 6765 2920 3d3d 2030 0a20 2020  verage) == 0.   
+0004de00: 2020 2020 2069 6620 6e6f 7420 7261 7469       if not rati
+0004de10: 6f6e 616c 3a0a 2020 2020 2020 2020 2020  onal:.          
+0004de20: 2020 696e 6974 6961 6c4d 6172 6769 6e50    initialMarginP
+0004de30: 6572 6365 6e74 6167 6553 7472 696e 6720  ercentageString 
+0004de40: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0004de50: 5f61 6464 2869 6e69 7469 616c 4d61 7267  _add(initialMarg
+0004de60: 696e 5065 7263 656e 7461 6765 5374 7269  inPercentageStri
+0004de70: 6e67 2c20 2731 652d 3827 290a 2020 2020  ng, '1e-8').    
+0004de80: 2020 2020 696e 6974 6961 6c4d 6172 6769      initialMargi
+0004de90: 6e53 7472 696e 6720 3d20 5072 6563 6973  nString = Precis
+0004dea0: 652e 7374 7269 6e67 5f64 6976 2850 7265  e.string_div(Pre
+0004deb0: 6369 7365 2e73 7472 696e 675f 6d75 6c28  cise.string_mul(
+0004dec0: 6e6f 7469 6f6e 616c 5374 7269 6e67 4162  notionalStringAb
+0004ded0: 732c 2069 6e69 7469 616c 4d61 7267 696e  s, initialMargin
+0004dee0: 5065 7263 656e 7461 6765 5374 7269 6e67  PercentageString
+0004def0: 292c 2027 3127 2c20 3829 0a20 2020 2020  ), '1', 8).     
+0004df00: 2020 2069 6e69 7469 616c 4d61 7267 696e     initialMargin
+0004df10: 203d 2073 656c 662e 7061 7273 655f 6e75   = self.parse_nu
+0004df20: 6d62 6572 2869 6e69 7469 616c 4d61 7267  mber(initialMarg
+0004df30: 696e 5374 7269 6e67 290a 2020 2020 2020  inString).      
+0004df40: 2020 6d61 7267 696e 5261 7469 6f20 3d20    marginRatio = 
+0004df50: 4e6f 6e65 0a20 2020 2020 2020 2070 6572  None.        per
+0004df60: 6365 6e74 6167 6520 3d20 4e6f 6e65 0a20  centage = None. 
+0004df70: 2020 2020 2020 2069 6620 6e6f 7420 5072         if not Pr
+0004df80: 6563 6973 652e 7374 7269 6e67 5f65 7175  ecise.string_equ
+0004df90: 616c 7328 636f 6c6c 6174 6572 616c 5374  als(collateralSt
+0004dfa0: 7269 6e67 2c20 2730 2729 3a0a 2020 2020  ring, '0'):.    
+0004dfb0: 2020 2020 2020 2020 6d61 7267 696e 5261          marginRa
+0004dfc0: 7469 6f20 3d20 7365 6c66 2e70 6172 7365  tio = self.parse
+0004dfd0: 5f6e 756d 6265 7228 5072 6563 6973 652e  _number(Precise.
+0004dfe0: 7374 7269 6e67 5f64 6976 2850 7265 6369  string_div(Preci
+0004dff0: 7365 2e73 7472 696e 675f 6164 6428 5072  se.string_add(Pr
+0004e000: 6563 6973 652e 7374 7269 6e67 5f64 6976  ecise.string_div
+0004e010: 286d 6169 6e74 656e 616e 6365 4d61 7267  (maintenanceMarg
+0004e020: 696e 5374 7269 6e67 2c20 636f 6c6c 6174  inString, collat
+0004e030: 6572 616c 5374 7269 6e67 292c 2027 3565  eralString), '5e
+0004e040: 2d35 2729 2c20 2731 272c 2034 2929 0a20  -5'), '1', 4)). 
+0004e050: 2020 2020 2020 2020 2020 2070 6572 6365             perce
+0004e060: 6e74 6167 6520 3d20 7365 6c66 2e70 6172  ntage = self.par
+0004e070: 7365 5f6e 756d 6265 7228 5072 6563 6973  se_number(Precis
+0004e080: 652e 7374 7269 6e67 5f6d 756c 2850 7265  e.string_mul(Pre
+0004e090: 6369 7365 2e73 7472 696e 675f 6469 7628  cise.string_div(
+0004e0a0: 756e 7265 616c 697a 6564 506e 6c53 7472  unrealizedPnlStr
+0004e0b0: 696e 672c 2069 6e69 7469 616c 4d61 7267  ing, initialMarg
+0004e0c0: 696e 5374 7269 6e67 2c20 3429 2c20 2731  inString, 4), '1
+0004e0d0: 3030 2729 290a 2020 2020 2020 2020 706f  00')).        po
+0004e0e0: 7369 7469 6f6e 5369 6465 203d 2073 656c  sitionSide = sel
+0004e0f0: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
+0004e100: 7369 7469 6f6e 2c20 2770 6f73 6974 696f  sition, 'positio
+0004e110: 6e53 6964 6527 290a 2020 2020 2020 2020  nSide').        
+0004e120: 6865 6467 6564 203d 2070 6f73 6974 696f  hedged = positio
+0004e130: 6e53 6964 6520 213d 2027 424f 5448 270a  nSide != 'BOTH'.
+0004e140: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0004e150: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
+0004e160: 666f 273a 2070 6f73 6974 696f 6e2c 0a20  fo': position,. 
+0004e170: 2020 2020 2020 2020 2020 2027 6964 273a             'id':
+0004e180: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0004e190: 2020 2027 7379 6d62 6f6c 273a 2073 796d     'symbol': sym
+0004e1a0: 626f 6c2c 0a20 2020 2020 2020 2020 2020  bol,.           
+0004e1b0: 2027 636f 6e74 7261 6374 7327 3a20 636f   'contracts': co
+0004e1c0: 6e74 7261 6374 732c 0a20 2020 2020 2020  ntracts,.       
+0004e1d0: 2020 2020 2027 636f 6e74 7261 6374 5369       'contractSi
+0004e1e0: 7a65 273a 2063 6f6e 7472 6163 7453 697a  ze': contractSiz
+0004e1f0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0004e200: 756e 7265 616c 697a 6564 506e 6c27 3a20  unrealizedPnl': 
+0004e210: 756e 7265 616c 697a 6564 506e 6c2c 0a20  unrealizedPnl,. 
+0004e220: 2020 2020 2020 2020 2020 2027 6c65 7665             'leve
+0004e230: 7261 6765 273a 2073 656c 662e 7061 7273  rage': self.pars
+0004e240: 655f 6e75 6d62 6572 286c 6576 6572 6167  e_number(leverag
+0004e250: 6553 7472 696e 6729 2c0a 2020 2020 2020  eString),.      
+0004e260: 2020 2020 2020 276c 6971 7569 6461 7469        'liquidati
+0004e270: 6f6e 5072 6963 6527 3a20 6c69 7175 6964  onPrice': liquid
+0004e280: 6174 696f 6e50 7269 6365 2c0a 2020 2020  ationPrice,.    
+0004e290: 2020 2020 2020 2020 2763 6f6c 6c61 7465          'collate
+0004e2a0: 7261 6c27 3a20 636f 6c6c 6174 6572 616c  ral': collateral
+0004e2b0: 2c0a 2020 2020 2020 2020 2020 2020 276e  ,.            'n
+0004e2c0: 6f74 696f 6e61 6c27 3a20 6e6f 7469 6f6e  otional': notion
+0004e2d0: 616c 2c0a 2020 2020 2020 2020 2020 2020  al,.            
+0004e2e0: 276d 6172 6b50 7269 6365 273a 206d 6172  'markPrice': mar
+0004e2f0: 6b50 7269 6365 2c0a 2020 2020 2020 2020  kPrice,.        
+0004e300: 2020 2020 2765 6e74 7279 5072 6963 6527      'entryPrice'
+0004e310: 3a20 656e 7472 7950 7269 6365 2c0a 2020  : entryPrice,.  
+0004e320: 2020 2020 2020 2020 2020 2774 696d 6573            'times
+0004e330: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
+0004e340: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+0004e350: 6e69 7469 616c 4d61 7267 696e 273a 2069  nitialMargin': i
+0004e360: 6e69 7469 616c 4d61 7267 696e 2c0a 2020  nitialMargin,.  
+0004e370: 2020 2020 2020 2020 2020 2769 6e69 7469            'initi
+0004e380: 616c 4d61 7267 696e 5065 7263 656e 7461  alMarginPercenta
+0004e390: 6765 273a 2073 656c 662e 7061 7273 655f  ge': self.parse_
+0004e3a0: 6e75 6d62 6572 2869 6e69 7469 616c 4d61  number(initialMa
+0004e3b0: 7267 696e 5065 7263 656e 7461 6765 5374  rginPercentageSt
+0004e3c0: 7269 6e67 292c 0a20 2020 2020 2020 2020  ring),.         
+0004e3d0: 2020 2027 6d61 696e 7465 6e61 6e63 654d     'maintenanceM
+0004e3e0: 6172 6769 6e27 3a20 6d61 696e 7465 6e61  argin': maintena
+0004e3f0: 6e63 654d 6172 6769 6e2c 0a20 2020 2020  nceMargin,.     
+0004e400: 2020 2020 2020 2027 6d61 696e 7465 6e61         'maintena
+0004e410: 6e63 654d 6172 6769 6e50 6572 6365 6e74  nceMarginPercent
+0004e420: 6167 6527 3a20 6d61 696e 7465 6e61 6e63  age': maintenanc
+0004e430: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+0004e440: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0004e450: 6d61 7267 696e 5261 7469 6f27 3a20 6d61  marginRatio': ma
+0004e460: 7267 696e 5261 7469 6f2c 0a20 2020 2020  rginRatio,.     
+0004e470: 2020 2020 2020 2027 6461 7465 7469 6d65         'datetime
+0004e480: 273a 2073 656c 662e 6973 6f38 3630 3128  ': self.iso8601(
+0004e490: 7469 6d65 7374 616d 7029 2c0a 2020 2020  timestamp),.    
+0004e4a0: 2020 2020 2020 2020 276d 6172 6769 6e4d          'marginM
+0004e4b0: 6f64 6527 3a20 6d61 7267 696e 4d6f 6465  ode': marginMode
+0004e4c0: 2c0a 2020 2020 2020 2020 2020 2020 276d  ,.            'm
+0004e4d0: 6172 6769 6e54 7970 6527 3a20 6d61 7267  arginType': marg
+0004e4e0: 696e 4d6f 6465 2c20 2023 2064 6570 7265  inMode,  # depre
+0004e4f0: 6361 7465 640a 2020 2020 2020 2020 2020  cated.          
+0004e500: 2020 2773 6964 6527 3a20 7369 6465 2c0a    'side': side,.
+0004e510: 2020 2020 2020 2020 2020 2020 2768 6564              'hed
+0004e520: 6765 6427 3a20 6865 6467 6564 2c0a 2020  ged': hedged,.  
+0004e530: 2020 2020 2020 2020 2020 2770 6572 6365            'perce
+0004e540: 6e74 6167 6527 3a20 7065 7263 656e 7461  ntage': percenta
+0004e550: 6765 2c0a 2020 2020 2020 2020 7d0a 0a20  ge,.        }.. 
+0004e560: 2020 2064 6566 206c 6f61 645f 6c65 7665     def load_leve
+0004e570: 7261 6765 5f62 7261 636b 6574 7328 7365  rage_brackets(se
+0004e580: 6c66 2c20 7265 6c6f 6164 3d46 616c 7365  lf, reload=False
+0004e590: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+0004e5a0: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+0004e5b0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+0004e5c0: 2020 2320 6279 2064 6566 6175 6c74 2063    # by default c
+0004e5d0: 6163 6865 2074 6865 206c 6576 6572 6167  ache the leverag
+0004e5e0: 6520 6272 6163 6b65 740a 2020 2020 2020  e bracket.      
+0004e5f0: 2020 2320 6974 2063 6f6e 7461 696e 7320    # it contains 
+0004e600: 7573 6566 756c 2073 7475 6666 206c 696b  useful stuff lik
+0004e610: 6520 7468 6520 6d61 696e 7465 6e61 6e63  e the maintenanc
+0004e620: 6520 6d61 7267 696e 2061 6e64 2069 6e69  e margin and ini
+0004e630: 7469 616c 206d 6172 6769 6e20 666f 7220  tial margin for 
+0004e640: 706f 7369 7469 6f6e 730a 2020 2020 2020  positions.      
+0004e650: 2020 6c65 7665 7261 6765 4272 6163 6b65    leverageBracke
+0004e660: 7473 203d 2073 656c 662e 7361 6665 5f76  ts = self.safe_v
+0004e670: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
+0004e680: 732c 2027 6c65 7665 7261 6765 4272 6163  s, 'leverageBrac
+0004e690: 6b65 7473 2729 0a20 2020 2020 2020 2069  kets').        i
+0004e6a0: 6620 286c 6576 6572 6167 6542 7261 636b  f (leverageBrack
+0004e6b0: 6574 7320 6973 204e 6f6e 6529 206f 7220  ets is None) or 
+0004e6c0: 2872 656c 6f61 6429 3a0a 2020 2020 2020  (reload):.      
+0004e6d0: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
+0004e6e0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0004e6f0: 6465 6661 756c 7454 7970 6520 3d20 7365  defaultType = se
+0004e700: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
+0004e710: 656c 662e 6f70 7469 6f6e 732c 2027 6465  elf.options, 'de
+0004e720: 6661 756c 7454 7970 6527 2c20 2766 7574  faultType', 'fut
+0004e730: 7572 6527 290a 2020 2020 2020 2020 2020  ure').          
+0004e740: 2020 7479 7065 203d 2073 656c 662e 7361    type = self.sa
+0004e750: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
+0004e760: 2c20 2774 7970 6527 2c20 6465 6661 756c  , 'type', defaul
+0004e770: 7454 7970 6529 0a20 2020 2020 2020 2020  tType).         
+0004e780: 2020 2071 7565 7279 203d 2073 656c 662e     query = self.
+0004e790: 6f6d 6974 2870 6172 616d 732c 2027 7479  omit(params, 'ty
+0004e7a0: 7065 2729 0a20 2020 2020 2020 2020 2020  pe').           
+0004e7b0: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
+0004e7c0: 2020 2020 2020 2020 2020 2020 7375 6254              subT
+0004e7d0: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
+0004e7e0: 6c66 2e68 616e 646c 655f 7375 625f 7479  lf.handle_sub_ty
+0004e7f0: 7065 5f61 6e64 5f70 6172 616d 7328 276c  pe_and_params('l
+0004e800: 6f61 644c 6576 6572 6167 6542 7261 636b  oadLeverageBrack
+0004e810: 6574 7327 2c20 4e6f 6e65 2c20 7061 7261  ets', None, para
+0004e820: 6d73 2c20 276c 696e 6561 7227 290a 2020  ms, 'linear').  
+0004e830: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0004e840: 662e 6973 5f6c 696e 6561 7228 7479 7065  f.is_linear(type
+0004e850: 2c20 7375 6254 7970 6529 3a0a 2020 2020  , subType):.    
+0004e860: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+0004e870: 6f64 203d 2027 6661 7069 5072 6976 6174  od = 'fapiPrivat
+0004e880: 6547 6574 4c65 7665 7261 6765 4272 6163  eGetLeverageBrac
+0004e890: 6b65 7427 0a20 2020 2020 2020 2020 2020  ket'.           
+0004e8a0: 2065 6c69 6620 7365 6c66 2e69 735f 696e   elif self.is_in
+0004e8b0: 7665 7273 6528 7479 7065 2c20 7375 6254  verse(type, subT
+0004e8c0: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
+0004e8d0: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+0004e8e0: 6461 7069 5072 6976 6174 6556 3247 6574  dapiPrivateV2Get
+0004e8f0: 4c65 7665 7261 6765 4272 6163 6b65 7427  LeverageBracket'
+0004e900: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0004e910: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0004e920: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
+0004e930: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
+0004e940: 2720 6c6f 6164 4c65 7665 7261 6765 4272  ' loadLeverageBr
+0004e950: 6163 6b65 7473 2829 2073 7570 706f 7274  ackets() support
+0004e960: 7320 6c69 6e65 6172 2061 6e64 2069 6e76  s linear and inv
+0004e970: 6572 7365 2063 6f6e 7472 6163 7473 206f  erse contracts o
+0004e980: 6e6c 7927 290a 2020 2020 2020 2020 2020  nly').          
+0004e990: 2020 7265 7370 6f6e 7365 203d 2067 6574    response = get
+0004e9a0: 6174 7472 2873 656c 662c 206d 6574 686f  attr(self, metho
+0004e9b0: 6429 2871 7565 7279 290a 2020 2020 2020  d)(query).      
+0004e9c0: 2020 2020 2020 7365 6c66 2e6f 7074 696f        self.optio
+0004e9d0: 6e73 5b27 6c65 7665 7261 6765 4272 6163  ns['leverageBrac
+0004e9e0: 6b65 7473 275d 203d 207b 7d0a 2020 2020  kets'] = {}.    
+0004e9f0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0004ea00: 2072 616e 6765 2830 2c20 6c65 6e28 7265   range(0, len(re
+0004ea10: 7370 6f6e 7365 2929 3a0a 2020 2020 2020  sponse)):.      
+0004ea20: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
+0004ea30: 3d20 7265 7370 6f6e 7365 5b69 5d0a 2020  = response[i].  
+0004ea40: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0004ea50: 726b 6574 4964 203d 2073 656c 662e 7361  rketId = self.sa
+0004ea60: 6665 5f73 7472 696e 6728 656e 7472 792c  fe_string(entry,
+0004ea70: 2027 7379 6d62 6f6c 2729 0a20 2020 2020   'symbol').     
+0004ea80: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
+0004ea90: 6c20 3d20 7365 6c66 2e73 6166 655f 7379  l = self.safe_sy
+0004eaa0: 6d62 6f6c 286d 6172 6b65 7449 642c 204e  mbol(marketId, N
+0004eab0: 6f6e 652c 204e 6f6e 652c 2027 636f 6e74  one, None, 'cont
+0004eac0: 7261 6374 2729 0a20 2020 2020 2020 2020  ract').         
+0004ead0: 2020 2020 2020 2062 7261 636b 6574 7320         brackets 
+0004eae0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0004eaf0: 6528 656e 7472 792c 2027 6272 6163 6b65  e(entry, 'bracke
+0004eb00: 7473 272c 205b 5d29 0a20 2020 2020 2020  ts', []).       
+0004eb10: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+0004eb20: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
+0004eb30: 2020 2020 2066 6f72 206a 2069 6e20 7261       for j in ra
+0004eb40: 6e67 6528 302c 206c 656e 2862 7261 636b  nge(0, len(brack
+0004eb50: 6574 7329 293a 0a20 2020 2020 2020 2020  ets)):.         
+0004eb60: 2020 2020 2020 2020 2020 2062 7261 636b             brack
+0004eb70: 6574 203d 2062 7261 636b 6574 735b 6a5d  et = brackets[j]
+0004eb80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004eb90: 2020 2020 2066 6c6f 6f72 5661 6c75 6520       floorValue 
+0004eba0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0004ebb0: 6e67 5f32 2862 7261 636b 6574 2c20 276e  ng_2(bracket, 'n
+0004ebc0: 6f74 696f 6e61 6c46 6c6f 6f72 272c 2027  otionalFloor', '
+0004ebd0: 7174 7946 6c6f 6f72 2729 0a20 2020 2020  qtyFloor').     
+0004ebe0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0004ebf0: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+0004ec00: 5065 7263 656e 7461 6765 203d 2073 656c  Percentage = sel
+0004ec10: 662e 7361 6665 5f73 7472 696e 6728 6272  f.safe_string(br
+0004ec20: 6163 6b65 742c 2027 6d61 696e 744d 6172  acket, 'maintMar
+0004ec30: 6769 6e52 6174 696f 2729 0a20 2020 2020  ginRatio').     
+0004ec40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0004ec50: 6573 756c 742e 6170 7065 6e64 285b 666c  esult.append([fl
+0004ec60: 6f6f 7256 616c 7565 2c20 6d61 696e 7465  oorValue, mainte
+0004ec70: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
+0004ec80: 6e74 6167 655d 290a 2020 2020 2020 2020  ntage]).        
+0004ec90: 2020 2020 2020 2020 7365 6c66 2e6f 7074          self.opt
+0004eca0: 696f 6e73 5b27 6c65 7665 7261 6765 4272  ions['leverageBr
+0004ecb0: 6163 6b65 7473 275d 5b73 796d 626f 6c5d  ackets'][symbol]
+0004ecc0: 203d 2072 6573 756c 740a 2020 2020 2020   = result.      
+0004ecd0: 2020 7265 7475 726e 2073 656c 662e 6f70    return self.op
+0004ece0: 7469 6f6e 735b 276c 6576 6572 6167 6542  tions['leverageB
+0004ecf0: 7261 636b 6574 7327 5d0a 0a20 2020 2064  rackets']..    d
+0004ed00: 6566 2066 6574 6368 5f6c 6576 6572 6167  ef fetch_leverag
+0004ed10: 655f 7469 6572 7328 7365 6c66 2c20 7379  e_tiers(self, sy
+0004ed20: 6d62 6f6c 733a 204f 7074 696f 6e61 6c5b  mbols: Optional[
+0004ed30: 4c69 7374 5b73 7472 5d5d 203d 204e 6f6e  List[str]] = Non
+0004ed40: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+0004ed50: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0004ed60: 2020 2072 6574 7269 6576 6520 696e 666f     retrieve info
+0004ed70: 726d 6174 696f 6e20 6f6e 2074 6865 206d  rmation on the m
+0004ed80: 6178 696d 756d 206c 6576 6572 6167 652c  aximum leverage,
+0004ed90: 2061 6e64 206d 6169 6e74 656e 616e 6365   and maintenance
+0004eda0: 206d 6172 6769 6e20 666f 7220 7472 6164   margin for trad
+0004edb0: 6573 206f 6620 7661 7279 696e 6720 7472  es of varying tr
+0004edc0: 6164 6520 7369 7a65 730a 2020 2020 2020  ade sizes.      
+0004edd0: 2020 3a70 6172 616d 205b 7374 725d 7c4e    :param [str]|N
+0004ede0: 6f6e 6520 7379 6d62 6f6c 733a 206c 6973  one symbols: lis
+0004edf0: 7420 6f66 2075 6e69 6669 6564 206d 6172  t of unified mar
+0004ee00: 6b65 7420 7379 6d62 6f6c 730a 2020 2020  ket symbols.    
+0004ee10: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0004ee20: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0004ee30: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0004ee40: 6320 746f 2074 6865 2062 696e 616e 6365  c to the binance
+0004ee50: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+0004ee60: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
+0004ee70: 6963 743a 2061 2064 6963 7469 6f6e 6172  ict: a dictionar
+0004ee80: 7920 6f66 2060 6c65 7665 7261 6765 2074  y of `leverage t
+0004ee90: 6965 7273 2073 7472 7563 7475 7265 7320  iers structures 
+0004eea0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+0004eeb0: 7874 2e63 6f6d 2f23 2f3f 6964 3d6c 6576  xt.com/#/?id=lev
+0004eec0: 6572 6167 652d 7469 6572 732d 7374 7275  erage-tiers-stru
+0004eed0: 6374 7572 653e 602c 2069 6e64 6578 6564  cture>`, indexed
+0004eee0: 2062 7920 6d61 726b 6574 2073 796d 626f   by market symbo
+0004eef0: 6c73 0a20 2020 2020 2020 2022 2222 0a20  ls.        """. 
+0004ef00: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+0004ef10: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0004ef20: 2020 2074 7970 652c 2071 7565 7279 203d     type, query =
+0004ef30: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
+0004ef40: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
+0004ef50: 616d 7328 2766 6574 6368 4c65 7665 7261  ams('fetchLevera
+0004ef60: 6765 5469 6572 7327 2c20 4e6f 6e65 2c20  geTiers', None, 
+0004ef70: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0004ef80: 7375 6254 7970 6520 3d20 4e6f 6e65 0a20  subType = None. 
+0004ef90: 2020 2020 2020 2073 7562 5479 7065 2c20         subType, 
+0004efa0: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+0004efb0: 6e64 6c65 5f73 7562 5f74 7970 655f 616e  ndle_sub_type_an
+0004efc0: 645f 7061 7261 6d73 2827 6665 7463 684c  d_params('fetchL
+0004efd0: 6576 6572 6167 6554 6965 7273 272c 204e  everageTiers', N
+0004efe0: 6f6e 652c 2071 7565 7279 2c20 276c 696e  one, query, 'lin
+0004eff0: 6561 7227 290a 2020 2020 2020 2020 6d65  ear').        me
+0004f000: 7468 6f64 203d 204e 6f6e 650a 2020 2020  thod = None.    
+0004f010: 2020 2020 6966 2073 656c 662e 6973 5f6c      if self.is_l
+0004f020: 696e 6561 7228 7479 7065 2c20 7375 6254  inear(type, subT
+0004f030: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
+0004f040: 2020 6d65 7468 6f64 203d 2027 6661 7069    method = 'fapi
+0004f050: 5072 6976 6174 6547 6574 4c65 7665 7261  PrivateGetLevera
+0004f060: 6765 4272 6163 6b65 7427 0a20 2020 2020  geBracket'.     
+0004f070: 2020 2065 6c69 6620 7365 6c66 2e69 735f     elif self.is_
+0004f080: 696e 7665 7273 6528 7479 7065 2c20 7375  inverse(type, su
+0004f090: 6254 7970 6529 3a0a 2020 2020 2020 2020  bType):.        
+0004f0a0: 2020 2020 6d65 7468 6f64 203d 2027 6461      method = 'da
+0004f0b0: 7069 5072 6976 6174 6556 3247 6574 4c65  piPrivateV2GetLe
+0004f0c0: 7665 7261 6765 4272 6163 6b65 7427 0a20  verageBracket'. 
+0004f0d0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0004f0e0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+0004f0f0: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+0004f100: 2e69 6420 2b20 2720 6665 7463 684c 6576  .id + ' fetchLev
+0004f110: 6572 6167 6554 6965 7273 2829 2073 7570  erageTiers() sup
+0004f120: 706f 7274 7320 6c69 6e65 6172 2061 6e64  ports linear and
+0004f130: 2069 6e76 6572 7365 2063 6f6e 7472 6163   inverse contrac
+0004f140: 7473 206f 6e6c 7927 290a 2020 2020 2020  ts only').      
+0004f150: 2020 7265 7370 6f6e 7365 203d 2067 6574    response = get
+0004f160: 6174 7472 2873 656c 662c 206d 6574 686f  attr(self, metho
+0004f170: 6429 2871 7565 7279 290a 2020 2020 2020  d)(query).      
+0004f180: 2020 230a 2020 2020 2020 2020 2320 7573    #.        # us
+0004f190: 646d 0a20 2020 2020 2020 2023 0a20 2020  dm.        #.   
+0004f1a0: 2020 2020 2023 2020 2020 5b0a 2020 2020       #    [.    
+0004f1b0: 2020 2020 2320 2020 2020 2020 207b 0a20      #        {. 
+0004f1c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f1d0: 2020 2020 2273 796d 626f 6c22 3a20 2253      "symbol": "S
+0004f1e0: 5553 4849 5553 4454 222c 0a20 2020 2020  USHIUSDT",.     
+0004f1f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f200: 2262 7261 636b 6574 7322 3a20 5b0a 2020  "brackets": [.  
+0004f210: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004f220: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0004f230: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f240: 2020 2020 2020 2262 7261 636b 6574 223a        "bracket":
+0004f250: 2031 2c0a 2020 2020 2020 2020 2320 2020   1,.        #   
+0004f260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f270: 2022 696e 6974 6961 6c4c 6576 6572 6167   "initialLeverag
+0004f280: 6522 3a20 3530 2c0a 2020 2020 2020 2020  e": 50,.        
+0004f290: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004f2a0: 2020 2020 2022 6e6f 7469 6f6e 616c 4361       "notionalCa
+0004f2b0: 7022 3a20 3530 3030 302c 0a20 2020 2020  p": 50000,.     
+0004f2c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f2d0: 2020 2020 2020 2020 226e 6f74 696f 6e61          "notiona
+0004f2e0: 6c46 6c6f 6f72 223a 2030 2c0a 2020 2020  lFloor": 0,.    
+0004f2f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f300: 2020 2020 2020 2020 2022 6d61 696e 744d           "maintM
+0004f310: 6172 6769 6e52 6174 696f 223a 2030 2e30  arginRatio": 0.0
+0004f320: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+0004f330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f340: 2263 756d 223a 2030 2e30 0a20 2020 2020  "cum": 0.0.     
+0004f350: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f360: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+0004f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f380: 2e2e 2e0a 2020 2020 2020 2020 2320 2020  ....        #   
+0004f390: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
+0004f3a0: 2020 2023 2020 2020 2020 2020 7d0a 2020     #        }.  
+0004f3b0: 2020 2020 2020 2320 2020 205d 0a20 2020        #    ].   
+0004f3c0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0004f3d0: 2063 6f69 6e6d 0a20 2020 2020 2020 2023   coinm.        #
+0004f3e0: 0a20 2020 2020 2020 2023 2020 2020 205b  .        #     [
+0004f3f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f400: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0004f410: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+0004f420: 6f6c 223a 2258 5250 5553 445f 3231 3033  ol":"XRPUSD_2103
+0004f430: 3236 222c 0a20 2020 2020 2020 2023 2020  26",.        #  
+0004f440: 2020 2020 2020 2020 2020 2022 6272 6163             "brac
+0004f450: 6b65 7473 223a 5b0a 2020 2020 2020 2020  kets":[.        
+0004f460: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004f470: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0004f480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f490: 2020 2262 7261 636b 6574 223a 312c 0a20    "bracket":1,. 
+0004f4a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f4b0: 2020 2020 2020 2020 2020 2020 2022 696e               "in
+0004f4c0: 6974 6961 6c4c 6576 6572 6167 6522 3a32  itialLeverage":2
+0004f4d0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+0004f4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f4f0: 2022 7174 7943 6170 223a 3530 3030 3030   "qtyCap":500000
+0004f500: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004f510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f520: 2271 7479 466c 6f6f 7222 3a30 2c0a 2020  "qtyFloor":0,.  
+0004f530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004f540: 2020 2020 2020 2020 2020 2020 226d 6169              "mai
+0004f550: 6e74 4d61 7267 696e 5261 7469 6f22 3a30  ntMarginRatio":0
+0004f560: 2e30 3138 352c 0a20 2020 2020 2020 2023  .0185,.        #
+0004f570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f580: 2020 2020 2022 6375 6d22 3a30 2e30 0a20       "cum":0.0. 
+0004f590: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f5a0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0004f5b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f5c0: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+0004f5d0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0004f5e0: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+0004f5f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0004f600: 7365 6c66 2e70 6172 7365 5f6c 6576 6572  self.parse_lever
+0004f610: 6167 655f 7469 6572 7328 7265 7370 6f6e  age_tiers(respon
+0004f620: 7365 2c20 7379 6d62 6f6c 732c 2027 7379  se, symbols, 'sy
+0004f630: 6d62 6f6c 2729 0a0a 2020 2020 6465 6620  mbol')..    def 
+0004f640: 7061 7273 655f 6d61 726b 6574 5f6c 6576  parse_market_lev
+0004f650: 6572 6167 655f 7469 6572 7328 7365 6c66  erage_tiers(self
+0004f660: 2c20 696e 666f 2c20 6d61 726b 6574 3d4e  , info, market=N
+0004f670: 6f6e 6529 3a0a 2020 2020 2020 2020 2222  one):.        ""
+0004f680: 220a 2020 2020 2020 2020 202a 2040 6967  ".         * @ig
+0004f690: 6e6f 7265 0a20 2020 2020 2020 203a 7061  nore.        :pa
+0004f6a0: 7261 6d20 6469 6374 2069 6e66 6f3a 2045  ram dict info: E
+0004f6b0: 7863 6861 6e67 6520 7265 7370 6f6e 7365  xchange response
+0004f6c0: 2066 6f72 2031 206d 6172 6b65 740a 2020   for 1 market.  
+0004f6d0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+0004f6e0: 7420 6d61 726b 6574 3a20 4343 5854 206d  t market: CCXT m
+0004f6f0: 6172 6b65 740a 2020 2020 2020 2020 2222  arket.        ""
+0004f700: 220a 2020 2020 2020 2020 230a 2020 2020  ".        #.    
+0004f710: 2020 2020 2320 2020 207b 0a20 2020 2020      #    {.     
+0004f720: 2020 2023 2020 2020 2020 2020 2273 796d     #        "sym
+0004f730: 626f 6c22 3a20 2253 5553 4849 5553 4454  bol": "SUSHIUSDT
+0004f740: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004f750: 2020 2020 2262 7261 636b 6574 7322 3a20      "brackets": 
+0004f760: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
+0004f770: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0004f780: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f790: 2020 2262 7261 636b 6574 223a 2031 2c0a    "bracket": 1,.
+0004f7a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004f7b0: 2020 2020 2020 2020 2022 696e 6974 6961           "initia
+0004f7c0: 6c4c 6576 6572 6167 6522 3a20 3530 2c0a  lLeverage": 50,.
+0004f7d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004f7e0: 2020 2020 2020 2020 2022 6e6f 7469 6f6e           "notion
+0004f7f0: 616c 4361 7022 3a20 3530 3030 302c 0a20  alCap": 50000,. 
+0004f800: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f810: 2020 2020 2020 2020 226e 6f74 696f 6e61          "notiona
+0004f820: 6c46 6c6f 6f72 223a 2030 2c0a 2020 2020  lFloor": 0,.    
+0004f830: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f840: 2020 2020 2022 6d61 696e 744d 6172 6769       "maintMargi
+0004f850: 6e52 6174 696f 223a 2030 2e30 312c 0a20  nRatio": 0.01,. 
+0004f860: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f870: 2020 2020 2020 2020 2263 756d 223a 2030          "cum": 0
+0004f880: 2e30 0a20 2020 2020 2020 2023 2020 2020  .0.        #    
+0004f890: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+0004f8a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f8b0: 2e2e 2e0a 2020 2020 2020 2020 2320 2020  ....        #   
+0004f8c0: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+0004f8d0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0004f8e0: 2020 2020 2020 2020 6d61 726b 6574 4964          marketId
+0004f8f0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0004f900: 696e 6728 696e 666f 2c20 2773 796d 626f  ing(info, 'symbo
+0004f910: 6c27 290a 2020 2020 2020 2020 6d61 726b  l').        mark
+0004f920: 6574 203d 2073 656c 662e 7361 6665 5f6d  et = self.safe_m
+0004f930: 6172 6b65 7428 6d61 726b 6574 4964 2c20  arket(marketId, 
+0004f940: 6d61 726b 6574 2c20 4e6f 6e65 2c20 2763  market, None, 'c
+0004f950: 6f6e 7472 6163 7427 290a 2020 2020 2020  ontract').      
+0004f960: 2020 6272 6163 6b65 7473 203d 2073 656c    brackets = sel
+0004f970: 662e 7361 6665 5f76 616c 7565 2869 6e66  f.safe_value(inf
+0004f980: 6f2c 2027 6272 6163 6b65 7473 272c 205b  o, 'brackets', [
+0004f990: 5d29 0a20 2020 2020 2020 2074 6965 7273  ]).        tiers
+0004f9a0: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
+0004f9b0: 7220 6a20 696e 2072 616e 6765 2830 2c20  r j in range(0, 
+0004f9c0: 6c65 6e28 6272 6163 6b65 7473 2929 3a0a  len(brackets)):.
+0004f9d0: 2020 2020 2020 2020 2020 2020 6272 6163              brac
+0004f9e0: 6b65 7420 3d20 6272 6163 6b65 7473 5b6a  ket = brackets[j
+0004f9f0: 5d0a 2020 2020 2020 2020 2020 2020 7469  ].            ti
+0004fa00: 6572 732e 6170 7065 6e64 287b 0a20 2020  ers.append({.   
+0004fa10: 2020 2020 2020 2020 2020 2020 2027 7469               'ti
+0004fa20: 6572 273a 2073 656c 662e 7361 6665 5f6e  er': self.safe_n
+0004fa30: 756d 6265 7228 6272 6163 6b65 742c 2027  umber(bracket, '
+0004fa40: 6272 6163 6b65 7427 292c 0a20 2020 2020  bracket'),.     
+0004fa50: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
+0004fa60: 656e 6379 273a 206d 6172 6b65 745b 2771  ency': market['q
+0004fa70: 756f 7465 275d 2c0a 2020 2020 2020 2020  uote'],.        
+0004fa80: 2020 2020 2020 2020 276d 696e 4e6f 7469          'minNoti
+0004fa90: 6f6e 616c 273a 2073 656c 662e 7361 6665  onal': self.safe
+0004faa0: 5f6e 756d 6265 725f 3228 6272 6163 6b65  _number_2(bracke
+0004fab0: 742c 2027 6e6f 7469 6f6e 616c 466c 6f6f  t, 'notionalFloo
+0004fac0: 7227 2c20 2771 7479 466c 6f6f 7227 292c  r', 'qtyFloor'),
+0004fad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004fae0: 2027 6d61 784e 6f74 696f 6e61 6c27 3a20   'maxNotional': 
+0004faf0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0004fb00: 5f32 2862 7261 636b 6574 2c20 276e 6f74  _2(bracket, 'not
+0004fb10: 696f 6e61 6c43 6170 272c 2027 7174 7943  ionalCap', 'qtyC
+0004fb20: 6170 2729 2c0a 2020 2020 2020 2020 2020  ap'),.          
+0004fb30: 2020 2020 2020 276d 6169 6e74 656e 616e        'maintenan
+0004fb40: 6365 4d61 7267 696e 5261 7465 273a 2073  ceMarginRate': s
+0004fb50: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0004fb60: 6272 6163 6b65 742c 2027 6d61 696e 744d  bracket, 'maintM
+0004fb70: 6172 6769 6e52 6174 696f 2729 2c0a 2020  arginRatio'),.  
+0004fb80: 2020 2020 2020 2020 2020 2020 2020 276d                'm
+0004fb90: 6178 4c65 7665 7261 6765 273a 2073 656c  axLeverage': sel
+0004fba0: 662e 7361 6665 5f6e 756d 6265 7228 6272  f.safe_number(br
+0004fbb0: 6163 6b65 742c 2027 696e 6974 6961 6c4c  acket, 'initialL
+0004fbc0: 6576 6572 6167 6527 292c 0a20 2020 2020  everage'),.     
+0004fbd0: 2020 2020 2020 2020 2020 2027 696e 666f             'info
+0004fbe0: 273a 2062 7261 636b 6574 2c0a 2020 2020  ': bracket,.    
+0004fbf0: 2020 2020 2020 2020 7d29 0a20 2020 2020          }).     
+0004fc00: 2020 2072 6574 7572 6e20 7469 6572 730a     return tiers.
+0004fc10: 0a20 2020 2064 6566 2066 6574 6368 5f70  .    def fetch_p
+0004fc20: 6f73 6974 696f 6e28 7365 6c66 2c20 7379  osition(self, sy
+0004fc30: 6d62 6f6c 3a20 7374 722c 2070 6172 616d  mbol: str, param
+0004fc40: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+0004fc50: 2222 0a20 2020 2020 2020 2073 6565 2068  "".        see h
+0004fc60: 7474 7073 3a2f 2f62 696e 616e 6365 2d64  ttps://binance-d
+0004fc70: 6f63 732e 6769 7468 7562 2e69 6f2f 6170  ocs.github.io/ap
+0004fc80: 6964 6f63 732f 766f 7074 696f 6e73 2f65  idocs/voptions/e
+0004fc90: 6e2f 236f 7074 696f 6e2d 706f 7369 7469  n/#option-positi
+0004fca0: 6f6e 2d69 6e66 6f72 6d61 7469 6f6e 2d75  on-information-u
+0004fcb0: 7365 725f 6461 7461 0a20 2020 2020 2020  ser_data.       
+0004fcc0: 2066 6574 6368 2064 6174 6120 6f6e 2061   fetch data on a
+0004fcd0: 6e20 6f70 656e 2070 6f73 6974 696f 6e0a  n open position.
+0004fce0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0004fcf0: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
+0004fd00: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
+0004fd10: 206f 6620 7468 6520 6d61 726b 6574 2074   of the market t
+0004fd20: 6865 2070 6f73 6974 696f 6e20 6973 2068  he position is h
+0004fd30: 656c 6420 696e 0a20 2020 2020 2020 203a  eld in.        :
+0004fd40: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+0004fd50: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+0004fd60: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+0004fd70: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
+0004fd80: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+0004fd90: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
+0004fda0: 6120 6070 6f73 6974 696f 6e20 7374 7275  a `position stru
+0004fdb0: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+0004fdc0: 6f63 732e 6363 7874 2e63 6f6d 2f65 6e2f  ocs.ccxt.com/en/
+0004fdd0: 6c61 7465 7374 2f6d 616e 7561 6c2e 6874  latest/manual.ht
+0004fde0: 6d6c 2370 6f73 6974 696f 6e2d 7374 7275  ml#position-stru
+0004fdf0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
+0004fe00: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0004fe10: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0004fe20: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+0004fe30: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+0004fe40: 626f 6c29 0a20 2020 2020 2020 2069 6620  bol).        if 
+0004fe50: 6e6f 7420 6d61 726b 6574 5b27 6f70 7469  not market['opti
+0004fe60: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+0004fe70: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+0004fe80: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+0004fe90: 2066 6574 6368 506f 7369 7469 6f6e 2829   fetchPosition()
+0004fea0: 2073 7570 706f 7274 7320 6f70 7469 6f6e   supports option
+0004feb0: 206d 6172 6b65 7473 206f 6e6c 7927 290a   markets only').
+0004fec0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0004fed0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0004fee0: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+0004fef0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+0004ff00: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
+0004ff10: 7365 203d 2073 656c 662e 6561 7069 5072  se = self.eapiPr
+0004ff20: 6976 6174 6547 6574 506f 7369 7469 6f6e  ivateGetPosition
+0004ff30: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+0004ff40: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+0004ff50: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0004ff60: 2023 2020 2020 205b 0a20 2020 2020 2020   #     [.       
+0004ff70: 2023 2020 2020 2020 2020 207b 0a20 2020   #         {.   
+0004ff80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004ff90: 2020 2022 656e 7472 7950 7269 6365 223a     "entryPrice":
+0004ffa0: 2022 3237 2e37 3030 3030 3030 3022 2c0a   "27.70000000",.
+0004ffb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004ffc0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+0004ffd0: 2245 5448 2d32 3330 3432 362d 3138 3530  "ETH-230426-1850
+0004ffe0: 2d43 222c 0a20 2020 2020 2020 2023 2020  -C",.        #  
+0004fff0: 2020 2020 2020 2020 2020 2022 7369 6465             "side
+00050000: 223a 2022 4c4f 4e47 222c 0a20 2020 2020  ": "LONG",.     
+00050010: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050020: 2022 7175 616e 7469 7479 223a 2022 302e   "quantity": "0.
+00050030: 3530 3030 3030 3030 222c 0a20 2020 2020  50000000",.     
+00050040: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050050: 2022 7265 6475 6369 626c 6551 7479 223a   "reducibleQty":
+00050060: 2022 302e 3530 3030 3030 3030 222c 0a20   "0.50000000",. 
+00050070: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050080: 2020 2020 2022 6d61 726b 5661 6c75 6522       "markValue"
+00050090: 3a20 2231 302e 3235 3030 3030 3030 3022  : "10.250000000"
+000500a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000500b0: 2020 2020 2020 2020 2272 6f72 223a 2022          "ror": "
+000500c0: 2d30 2e32 3539 3922 2c0a 2020 2020 2020  -0.2599",.      
+000500d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000500e0: 2275 6e72 6561 6c69 7a65 6450 4e4c 223a  "unrealizedPNL":
+000500f0: 2022 2d33 2e36 3030 3030 3030 3030 222c   "-3.600000000",
+00050100: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050110: 2020 2020 2020 2022 6d61 726b 5072 6963         "markPric
+00050120: 6522 3a20 2232 302e 3522 2c0a 2020 2020  e": "20.5",.    
+00050130: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050140: 2020 2273 7472 696b 6550 7269 6365 223a    "strikePrice":
+00050150: 2022 3138 3530 2e30 3030 3030 3030 3022   "1850.00000000"
+00050160: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050170: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
+00050180: 6e43 6f73 7422 3a20 2231 332e 3835 3030  nCost": "13.8500
+00050190: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000501a0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+000501b0: 7069 7279 4461 7465 223a 2031 3638 3234  piryDate": 16824
+000501c0: 3936 3030 3030 3030 2c0a 2020 2020 2020  96000000,.      
+000501d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000501e0: 2270 7269 6365 5363 616c 6522 3a20 312c  "priceScale": 1,
+000501f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050200: 2020 2020 2020 2022 7175 616e 7469 7479         "quantity
+00050210: 5363 616c 6522 3a20 322c 0a20 2020 2020  Scale": 2,.     
+00050220: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050230: 2022 6f70 7469 6f6e 5369 6465 223a 2022   "optionSide": "
+00050240: 4341 4c4c 222c 0a20 2020 2020 2020 2023  CALL",.        #
+00050250: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
+00050260: 6f74 6541 7373 6574 223a 2022 5553 4454  oteAsset": "USDT
+00050270: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00050280: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+00050290: 2031 3638 3234 3932 3432 3731 3036 0a20   1682492427106. 
+000502a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000502b0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+000502c0: 205d 0a20 2020 2020 2020 2023 0a20 2020   ].        #.   
+000502d0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000502e0: 2e70 6172 7365 5f70 6f73 6974 696f 6e28  .parse_position(
+000502f0: 7265 7370 6f6e 7365 5b30 5d2c 206d 6172  response[0], mar
+00050300: 6b65 7429 0a0a 2020 2020 6465 6620 6665  ket)..    def fe
+00050310: 7463 685f 6f70 7469 6f6e 5f70 6f73 6974  tch_option_posit
+00050320: 696f 6e73 2873 656c 662c 2073 796d 626f  ions(self, symbo
+00050330: 6c73 3a20 4f70 7469 6f6e 616c 5b4c 6973  ls: Optional[Lis
+00050340: 745b 7374 725d 5d20 3d20 4e6f 6e65 2c20  t[str]] = None, 
+00050350: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00050360: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00050370: 7365 6520 6874 7470 733a 2f2f 6269 6e61  see https://bina
+00050380: 6e63 652d 646f 6373 2e67 6974 6875 622e  nce-docs.github.
+00050390: 696f 2f61 7069 646f 6373 2f76 6f70 7469  io/apidocs/vopti
+000503a0: 6f6e 732f 656e 2f23 6f70 7469 6f6e 2d70  ons/en/#option-p
+000503b0: 6f73 6974 696f 6e2d 696e 666f 726d 6174  osition-informat
+000503c0: 696f 6e2d 7573 6572 5f64 6174 610a 2020  ion-user_data.  
+000503d0: 2020 2020 2020 6665 7463 6820 6461 7461        fetch data
+000503e0: 206f 6e20 6f70 656e 206f 7074 696f 6e73   on open options
+000503f0: 2070 6f73 6974 696f 6e73 0a20 2020 2020   positions.     
+00050400: 2020 203a 7061 7261 6d20 5b73 7472 5d7c     :param [str]|
+00050410: 4e6f 6e65 2073 796d 626f 6c73 3a20 6c69  None symbols: li
+00050420: 7374 206f 6620 756e 6966 6965 6420 6d61  st of unified ma
+00050430: 726b 6574 2073 796d 626f 6c73 0a20 2020  rket symbols.   
+00050440: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+00050450: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+00050460: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+00050470: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+00050480: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+00050490: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+000504a0: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
+000504b0: 6620 6070 6f73 6974 696f 6e20 7374 7275  f `position stru
+000504c0: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
+000504d0: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+000504e0: 3f69 643d 706f 7369 7469 6f6e 2d73 7472  ?id=position-str
+000504f0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+00050500: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+00050510: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+00050520: 0a20 2020 2020 2020 2073 796d 626f 6c73  .        symbols
+00050530: 203d 2073 656c 662e 6d61 726b 6574 5f73   = self.market_s
+00050540: 796d 626f 6c73 2873 796d 626f 6c73 290a  ymbols(symbols).
+00050550: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00050560: 3d20 7b7d 0a20 2020 2020 2020 206d 6172  = {}.        mar
+00050570: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+00050580: 2020 2069 6620 7379 6d62 6f6c 7320 6973     if symbols is
+00050590: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000505a0: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
+000505b0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+000505c0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+000505d0: 796d 626f 6c73 2c20 6c69 7374 293a 0a20  ymbols, list):. 
+000505e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000505f0: 796d 626f 6c73 4c65 6e67 7468 203d 206c  ymbolsLength = l
+00050600: 656e 2873 796d 626f 6c73 290a 2020 2020  en(symbols).    
+00050610: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00050620: 796d 626f 6c73 4c65 6e67 7468 203e 2031  ymbolsLength > 1
+00050630: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00050640: 2020 2020 2020 7261 6973 6520 4261 6452        raise BadR
+00050650: 6571 7565 7374 2873 656c 662e 6964 202b  equest(self.id +
+00050660: 2027 2066 6574 6368 506f 7369 7469 6f6e   ' fetchPosition
+00050670: 7328 2920 7379 6d62 6f6c 7320 6172 6775  s() symbols argu
+00050680: 6d65 6e74 2063 616e 6e6f 7420 636f 6e74  ment cannot cont
+00050690: 6169 6e20 6d6f 7265 2074 6861 6e20 3120  ain more than 1 
+000506a0: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+000506b0: 2020 2020 2020 2020 2073 796d 626f 6c20           symbol 
+000506c0: 3d20 7379 6d62 6f6c 735b 305d 0a20 2020  = symbols[0].   
+000506d0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000506e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000506f0: 796d 626f 6c20 3d20 7379 6d62 6f6c 730a  ymbol = symbols.
+00050700: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+00050710: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+00050720: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+00050730: 2020 2020 2072 6571 7565 7374 5b27 7379       request['sy
+00050740: 6d62 6f6c 275d 203d 206d 6172 6b65 745b  mbol'] = market[
+00050750: 2769 6427 5d0a 2020 2020 2020 2020 7265  'id'].        re
+00050760: 7370 6f6e 7365 203d 2073 656c 662e 6561  sponse = self.ea
+00050770: 7069 5072 6976 6174 6547 6574 506f 7369  piPrivateGetPosi
+00050780: 7469 6f6e 2873 656c 662e 6578 7465 6e64  tion(self.extend
+00050790: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+000507a0: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
+000507b0: 2020 2020 2023 2020 2020 205b 0a20 2020       #     [.   
+000507c0: 2020 2020 2023 2020 2020 2020 2020 207b       #         {
+000507d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000507e0: 2020 2020 2020 2022 656e 7472 7950 7269         "entryPri
+000507f0: 6365 223a 2022 3237 2e37 3030 3030 3030  ce": "27.7000000
+00050800: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00050810: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00050820: 6c22 3a20 2245 5448 2d32 3330 3432 362d  l": "ETH-230426-
+00050830: 3138 3530 2d43 222c 0a20 2020 2020 2020  1850-C",.       
+00050840: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00050850: 7369 6465 223a 2022 4c4f 4e47 222c 0a20  side": "LONG",. 
+00050860: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050870: 2020 2020 2022 7175 616e 7469 7479 223a       "quantity":
+00050880: 2022 302e 3530 3030 3030 3030 222c 0a20   "0.50000000",. 
+00050890: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000508a0: 2020 2020 2022 7265 6475 6369 626c 6551       "reducibleQ
+000508b0: 7479 223a 2022 302e 3530 3030 3030 3030  ty": "0.50000000
+000508c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000508d0: 2020 2020 2020 2020 2022 6d61 726b 5661           "markVa
+000508e0: 6c75 6522 3a20 2231 302e 3235 3030 3030  lue": "10.250000
+000508f0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00050900: 2020 2020 2020 2020 2020 2020 2272 6f72              "ror
+00050910: 223a 2022 2d30 2e32 3539 3922 2c0a 2020  ": "-0.2599",.  
+00050920: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00050930: 2020 2020 2275 6e72 6561 6c69 7a65 6450      "unrealizedP
+00050940: 4e4c 223a 2022 2d33 2e36 3030 3030 3030  NL": "-3.6000000
+00050950: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00050960: 2020 2020 2020 2020 2020 2022 6d61 726b             "mark
+00050970: 5072 6963 6522 3a20 2232 302e 3522 2c0a  Price": "20.5",.
+00050980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050990: 2020 2020 2020 2273 7472 696b 6550 7269        "strikePri
+000509a0: 6365 223a 2022 3138 3530 2e30 3030 3030  ce": "1850.00000
+000509b0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+000509c0: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+000509d0: 6974 696f 6e43 6f73 7422 3a20 2231 332e  itionCost": "13.
+000509e0: 3835 3030 3030 3030 222c 0a20 2020 2020  85000000",.     
+000509f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050a00: 2022 6578 7069 7279 4461 7465 223a 2031   "expiryDate": 1
+00050a10: 3638 3234 3936 3030 3030 3030 2c0a 2020  682496000000,.  
+00050a20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00050a30: 2020 2020 2270 7269 6365 5363 616c 6522      "priceScale"
+00050a40: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
+00050a50: 2020 2020 2020 2020 2020 2022 7175 616e             "quan
+00050a60: 7469 7479 5363 616c 6522 3a20 322c 0a20  tityScale": 2,. 
+00050a70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050a80: 2020 2020 2022 6f70 7469 6f6e 5369 6465       "optionSide
+00050a90: 223a 2022 4341 4c4c 222c 0a20 2020 2020  ": "CALL",.     
+00050aa0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050ab0: 2022 7175 6f74 6541 7373 6574 223a 2022   "quoteAsset": "
+00050ac0: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+00050ad0: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
+00050ae0: 6d65 223a 2031 3638 3234 3932 3432 3731  me": 16824924271
+00050af0: 3036 0a20 2020 2020 2020 2023 2020 2020  06.        #    
+00050b00: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00050b10: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+00050b20: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00050b30: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
+00050b40: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
+00050b50: 656e 2872 6573 706f 6e73 6529 293a 0a20  en(response)):. 
+00050b60: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00050b70: 742e 6170 7065 6e64 2873 656c 662e 7061  t.append(self.pa
+00050b80: 7273 655f 706f 7369 7469 6f6e 2872 6573  rse_position(res
+00050b90: 706f 6e73 655b 695d 2c20 6d61 726b 6574  ponse[i], market
+00050ba0: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+00050bb0: 6e20 7365 6c66 2e66 696c 7465 725f 6279  n self.filter_by
+00050bc0: 5f61 7272 6179 2872 6573 756c 742c 2027  _array(result, '
+00050bd0: 7379 6d62 6f6c 272c 2073 796d 626f 6c73  symbol', symbols
+00050be0: 2c20 4661 6c73 6529 0a0a 2020 2020 6465  , False)..    de
+00050bf0: 6620 7061 7273 655f 706f 7369 7469 6f6e  f parse_position
+00050c00: 2873 656c 662c 2070 6f73 6974 696f 6e2c  (self, position,
+00050c10: 206d 6172 6b65 743d 4e6f 6e65 293a 0a20   market=None):. 
+00050c20: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00050c30: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+00050c40: 2023 2020 2020 2020 2020 2022 656e 7472   #         "entr
+00050c50: 7950 7269 6365 223a 2022 3237 2e37 3030  yPrice": "27.700
+00050c60: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00050c70: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
+00050c80: 6c22 3a20 2245 5448 2d32 3330 3432 362d  l": "ETH-230426-
+00050c90: 3138 3530 2d43 222c 0a20 2020 2020 2020  1850-C",.       
+00050ca0: 2023 2020 2020 2020 2020 2022 7369 6465   #         "side
+00050cb0: 223a 2022 4c4f 4e47 222c 0a20 2020 2020  ": "LONG",.     
+00050cc0: 2020 2023 2020 2020 2020 2020 2022 7175     #         "qu
+00050cd0: 616e 7469 7479 223a 2022 302e 3530 3030  antity": "0.5000
+00050ce0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00050cf0: 2020 2020 2020 2020 2022 7265 6475 6369           "reduci
+00050d00: 626c 6551 7479 223a 2022 302e 3530 3030  bleQty": "0.5000
+00050d10: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00050d20: 2020 2020 2020 2020 2022 6d61 726b 5661           "markVa
+00050d30: 6c75 6522 3a20 2231 302e 3235 3030 3030  lue": "10.250000
+00050d40: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00050d50: 2020 2020 2020 2020 2272 6f72 223a 2022          "ror": "
+00050d60: 2d30 2e32 3539 3922 2c0a 2020 2020 2020  -0.2599",.      
+00050d70: 2020 2320 2020 2020 2020 2020 2275 6e72    #         "unr
+00050d80: 6561 6c69 7a65 6450 4e4c 223a 2022 2d33  ealizedPNL": "-3
+00050d90: 2e36 3030 3030 3030 3030 222c 0a20 2020  .600000000",.   
+00050da0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00050db0: 6d61 726b 5072 6963 6522 3a20 2232 302e  markPrice": "20.
+00050dc0: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
+00050dd0: 2020 2020 2020 2273 7472 696b 6550 7269        "strikePri
+00050de0: 6365 223a 2022 3138 3530 2e30 3030 3030  ce": "1850.00000
+00050df0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00050e00: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
+00050e10: 6e43 6f73 7422 3a20 2231 332e 3835 3030  nCost": "13.8500
+00050e20: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00050e30: 2020 2020 2020 2020 2022 6578 7069 7279           "expiry
+00050e40: 4461 7465 223a 2031 3638 3234 3936 3030  Date": 168249600
+00050e50: 3030 3030 2c0a 2020 2020 2020 2020 2320  0000,.        # 
+00050e60: 2020 2020 2020 2020 2270 7269 6365 5363          "priceSc
+00050e70: 616c 6522 3a20 312c 0a20 2020 2020 2020  ale": 1,.       
+00050e80: 2023 2020 2020 2020 2020 2022 7175 616e   #         "quan
+00050e90: 7469 7479 5363 616c 6522 3a20 322c 0a20  tityScale": 2,. 
+00050ea0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050eb0: 2022 6f70 7469 6f6e 5369 6465 223a 2022   "optionSide": "
+00050ec0: 4341 4c4c 222c 0a20 2020 2020 2020 2023  CALL",.        #
+00050ed0: 2020 2020 2020 2020 2022 7175 6f74 6541           "quoteA
+00050ee0: 7373 6574 223a 2022 5553 4454 222c 0a20  sset": "USDT",. 
+00050ef0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050f00: 2022 7469 6d65 223a 2031 3638 3234 3932   "time": 1682492
+00050f10: 3432 3731 3036 0a20 2020 2020 2020 2023  427106.        #
+00050f20: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00050f30: 0a20 2020 2020 2020 206d 6172 6b65 7449  .        marketI
+00050f40: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+00050f50: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
+00050f60: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+00050f70: 206d 6172 6b65 7420 3d20 7365 6c66 2e73   market = self.s
+00050f80: 6166 655f 6d61 726b 6574 286d 6172 6b65  afe_market(marke
+00050f90: 7449 642c 206d 6172 6b65 7429 0a20 2020  tId, market).   
+00050fa0: 2020 2020 2073 796d 626f 6c20 3d20 6d61       symbol = ma
+00050fb0: 726b 6574 5b27 7379 6d62 6f6c 275d 0a20  rket['symbol']. 
+00050fc0: 2020 2020 2020 2073 6964 6520 3d20 7365         side = se
+00050fd0: 6c66 2e73 6166 655f 7374 7269 6e67 5f6c  lf.safe_string_l
+00050fe0: 6f77 6572 2870 6f73 6974 696f 6e2c 2027  ower(position, '
+00050ff0: 7369 6465 2729 0a20 2020 2020 2020 2071  side').        q
+00051000: 7561 6e74 6974 7920 3d20 7365 6c66 2e73  uantity = self.s
+00051010: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
+00051020: 696f 6e2c 2027 7175 616e 7469 7479 2729  ion, 'quantity')
+00051030: 0a20 2020 2020 2020 2069 6620 7369 6465  .        if side
+00051040: 2021 3d20 276c 6f6e 6727 3a0a 2020 2020   != 'long':.    
+00051050: 2020 2020 2020 2020 7175 616e 7469 7479          quantity
+00051060: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
+00051070: 675f 6d75 6c28 272d 3127 2c20 7175 616e  g_mul('-1', quan
+00051080: 7469 7479 290a 2020 2020 2020 2020 7469  tity).        ti
+00051090: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
+000510a0: 6166 655f 696e 7465 6765 7228 706f 7369  afe_integer(posi
+000510b0: 7469 6f6e 2c20 2774 696d 6527 290a 2020  tion, 'time').  
+000510c0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000510d0: 662e 7361 6665 5f70 6f73 6974 696f 6e28  f.safe_position(
+000510e0: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
+000510f0: 6e66 6f27 3a20 706f 7369 7469 6f6e 2c0a  nfo': position,.
+00051100: 2020 2020 2020 2020 2020 2020 2769 6427              'id'
+00051110: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00051120: 2020 2020 2773 796d 626f 6c27 3a20 7379      'symbol': sy
+00051130: 6d62 6f6c 2c0a 2020 2020 2020 2020 2020  mbol,.          
+00051140: 2020 2765 6e74 7279 5072 6963 6527 3a20    'entryPrice': 
+00051150: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00051160: 2870 6f73 6974 696f 6e2c 2027 656e 7472  (position, 'entr
+00051170: 7950 7269 6365 2729 2c0a 2020 2020 2020  yPrice'),.      
+00051180: 2020 2020 2020 276d 6172 6b50 7269 6365        'markPrice
+00051190: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
+000511a0: 6265 7228 706f 7369 7469 6f6e 2c20 276d  ber(position, 'm
+000511b0: 6172 6b50 7269 6365 2729 2c0a 2020 2020  arkPrice'),.    
+000511c0: 2020 2020 2020 2020 276e 6f74 696f 6e61          'notiona
+000511d0: 6c27 3a20 7365 6c66 2e73 6166 655f 6e75  l': self.safe_nu
+000511e0: 6d62 6572 2870 6f73 6974 696f 6e2c 2027  mber(position, '
+000511f0: 6d61 726b 5661 6c75 6527 292c 0a20 2020  markValue'),.   
+00051200: 2020 2020 2020 2020 2027 636f 6c6c 6174           'collat
+00051210: 6572 616c 273a 2073 656c 662e 7361 6665  eral': self.safe
+00051220: 5f6e 756d 6265 7228 706f 7369 7469 6f6e  _number(position
+00051230: 2c20 2770 6f73 6974 696f 6e43 6f73 7427  , 'positionCost'
+00051240: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+00051250: 756e 7265 616c 697a 6564 506e 6c27 3a20  unrealizedPnl': 
+00051260: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00051270: 2870 6f73 6974 696f 6e2c 2027 756e 7265  (position, 'unre
+00051280: 616c 697a 6564 504e 4c27 292c 0a20 2020  alizedPNL'),.   
+00051290: 2020 2020 2020 2020 2027 7369 6465 273a           'side':
+000512a0: 2073 6964 652c 0a20 2020 2020 2020 2020   side,.         
+000512b0: 2020 2027 636f 6e74 7261 6374 7327 3a20     'contracts': 
+000512c0: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
+000512d0: 7228 7175 616e 7469 7479 292c 0a20 2020  r(quantity),.   
+000512e0: 2020 2020 2020 2020 2027 636f 6e74 7261           'contra
+000512f0: 6374 5369 7a65 273a 204e 6f6e 652c 0a20  ctSize': None,. 
+00051300: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+00051310: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+00051320: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+00051330: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+00051340: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+00051350: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
+00051360: 2768 6564 6765 6427 3a20 4e6f 6e65 2c0a  'hedged': None,.
+00051370: 2020 2020 2020 2020 2020 2020 276d 6169              'mai
+00051380: 6e74 656e 616e 6365 4d61 7267 696e 273a  ntenanceMargin':
+00051390: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+000513a0: 2020 2027 6d61 696e 7465 6e61 6e63 654d     'maintenanceM
+000513b0: 6172 6769 6e50 6572 6365 6e74 6167 6527  arginPercentage'
+000513c0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+000513d0: 2020 2020 2769 6e69 7469 616c 4d61 7267      'initialMarg
+000513e0: 696e 273a 204e 6f6e 652c 0a20 2020 2020  in': None,.     
+000513f0: 2020 2020 2020 2027 696e 6974 6961 6c4d         'initialM
+00051400: 6172 6769 6e50 6572 6365 6e74 6167 6527  arginPercentage'
+00051410: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00051420: 2020 2020 276c 6576 6572 6167 6527 3a20      'leverage': 
+00051430: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00051440: 2020 276c 6971 7569 6461 7469 6f6e 5072    'liquidationPr
+00051450: 6963 6527 3a20 4e6f 6e65 2c0a 2020 2020  ice': None,.    
+00051460: 2020 2020 2020 2020 276d 6172 6769 6e52          'marginR
+00051470: 6174 696f 273a 204e 6f6e 652c 0a20 2020  atio': None,.   
+00051480: 2020 2020 2020 2020 2027 6d61 7267 696e           'margin
+00051490: 4d6f 6465 273a 204e 6f6e 652c 0a20 2020  Mode': None,.   
+000514a0: 2020 2020 2020 2020 2027 7065 7263 656e           'percen
+000514b0: 7461 6765 273a 204e 6f6e 652c 0a20 2020  tage': None,.   
+000514c0: 2020 2020 207d 290a 0a20 2020 2064 6566       })..    def
+000514d0: 2066 6574 6368 5f70 6f73 6974 696f 6e73   fetch_positions
+000514e0: 2873 656c 662c 2073 796d 626f 6c73 3a20  (self, symbols: 
+000514f0: 4f70 7469 6f6e 616c 5b4c 6973 745b 7374  Optional[List[st
+00051500: 725d 5d20 3d20 4e6f 6e65 2c20 7061 7261  r]] = None, para
+00051510: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00051520: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+00051530: 6820 616c 6c20 6f70 656e 2070 6f73 6974  h all open posit
+00051540: 696f 6e73 0a20 2020 2020 2020 203a 7061  ions.        :pa
+00051550: 7261 6d20 5b73 7472 5d7c 4e6f 6e65 2073  ram [str]|None s
+00051560: 796d 626f 6c73 3a20 6c69 7374 206f 6620  ymbols: list of 
+00051570: 756e 6966 6965 6420 6d61 726b 6574 2073  unified market s
+00051580: 796d 626f 6c73 0a20 2020 2020 2020 203a  ymbols.        :
+00051590: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+000515a0: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+000515b0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+000515c0: 7468 6520 6269 6e61 6e63 6520 6170 6920  the binance api 
+000515d0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+000515e0: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
+000515f0: 3a20 6120 6c69 7374 206f 6620 6070 6f73  : a list of `pos
+00051600: 6974 696f 6e20 7374 7275 6374 7572 6520  ition structure 
+00051610: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+00051620: 7874 2e63 6f6d 2f23 2f3f 6964 3d70 6f73  xt.com/#/?id=pos
+00051630: 6974 696f 6e2d 7374 7275 6374 7572 653e  ition-structure>
+00051640: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+00051650: 2020 2020 2020 6465 6661 756c 744d 6574        defaultMet
+00051660: 686f 6420 3d20 7365 6c66 2e73 6166 655f  hod = self.safe_
+00051670: 7374 7269 6e67 2873 656c 662e 6f70 7469  string(self.opti
+00051680: 6f6e 732c 2027 6665 7463 6850 6f73 6974  ons, 'fetchPosit
+00051690: 696f 6e73 272c 2027 706f 7369 7469 6f6e  ions', 'position
+000516a0: 5269 736b 2729 0a20 2020 2020 2020 2069  Risk').        i
+000516b0: 6620 6465 6661 756c 744d 6574 686f 6420  f defaultMethod 
+000516c0: 3d3d 2027 706f 7369 7469 6f6e 5269 736b  == 'positionRisk
+000516d0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+000516e0: 6574 7572 6e20 7365 6c66 2e66 6574 6368  eturn self.fetch
+000516f0: 5f70 6f73 6974 696f 6e73 5f72 6973 6b28  _positions_risk(
+00051700: 7379 6d62 6f6c 732c 2070 6172 616d 7329  symbols, params)
+00051710: 0a20 2020 2020 2020 2065 6c69 6620 6465  .        elif de
+00051720: 6661 756c 744d 6574 686f 6420 3d3d 2027  faultMethod == '
+00051730: 6163 636f 756e 7427 3a0a 2020 2020 2020  account':.      
+00051740: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00051750: 662e 6665 7463 685f 6163 636f 756e 745f  f.fetch_account_
+00051760: 706f 7369 7469 6f6e 7328 7379 6d62 6f6c  positions(symbol
+00051770: 732c 2070 6172 616d 7329 0a20 2020 2020  s, params).     
+00051780: 2020 2065 6c69 6620 6465 6661 756c 744d     elif defaultM
+00051790: 6574 686f 6420 3d3d 2027 6f70 7469 6f6e  ethod == 'option
+000517a0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+000517b0: 6574 7572 6e20 7365 6c66 2e66 6574 6368  eturn self.fetch
+000517c0: 5f6f 7074 696f 6e5f 706f 7369 7469 6f6e  _option_position
+000517d0: 7328 7379 6d62 6f6c 732c 2070 6172 616d  s(symbols, param
+000517e0: 7329 0a20 2020 2020 2020 2065 6c73 653a  s).        else:
+000517f0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00051800: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
+00051810: 7365 6c66 2e69 6420 2b20 272e 6f70 7469  self.id + '.opti
+00051820: 6f6e 735b 2266 6574 6368 506f 7369 7469  ons["fetchPositi
+00051830: 6f6e 7322 5d20 3d20 2227 202b 2064 6566  ons"] = "' + def
+00051840: 6175 6c74 4d65 7468 6f64 202b 2027 2220  aultMethod + '" 
+00051850: 6973 2069 6e76 616c 6964 2c20 706c 6561  is invalid, plea
+00051860: 7365 2063 686f 6f73 6520 6265 7477 6565  se choose betwee
+00051870: 6e20 2261 6363 6f75 6e74 222c 2022 706f  n "account", "po
+00051880: 7369 7469 6f6e 5269 736b 2220 616e 6420  sitionRisk" and 
+00051890: 226f 7074 696f 6e22 2729 0a0a 2020 2020  "option"')..    
+000518a0: 6465 6620 6665 7463 685f 6163 636f 756e  def fetch_accoun
+000518b0: 745f 706f 7369 7469 6f6e 7328 7365 6c66  t_positions(self
+000518c0: 2c20 7379 6d62 6f6c 733a 204f 7074 696f  , symbols: Optio
+000518d0: 6e61 6c5b 4c69 7374 5b73 7472 5d5d 203d  nal[List[str]] =
+000518e0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+000518f0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00051900: 2020 2020 2020 2066 6574 6368 2061 6363         fetch acc
+00051910: 6f75 6e74 2070 6f73 6974 696f 6e73 0a20  ount positions. 
+00051920: 2020 2020 2020 203a 7061 7261 6d20 5b73         :param [s
+00051930: 7472 5d7c 4e6f 6e65 2073 796d 626f 6c73  tr]|None symbols
+00051940: 3a20 6c69 7374 206f 6620 756e 6966 6965  : list of unifie
+00051950: 6420 6d61 726b 6574 2073 796d 626f 6c73  d market symbols
+00051960: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00051970: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+00051980: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00051990: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
+000519a0: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
+000519b0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+000519c0: 726e 7320 6469 6374 3a20 6461 7461 206f  rns dict: data o
+000519d0: 6e20 6163 636f 756e 7420 706f 7369 7469  n account positi
+000519e0: 6f6e 730a 2020 2020 2020 2020 2222 220a  ons.        """.
+000519f0: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+00051a00: 6c73 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ls is not None:.
+00051a10: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00051a20: 6f74 2069 7369 6e73 7461 6e63 6528 7379  ot isinstance(sy
+00051a30: 6d62 6f6c 732c 206c 6973 7429 3a0a 2020  mbols, list):.  
+00051a40: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00051a50: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
+00051a60: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
+00051a70: 2720 6665 7463 6850 6f73 6974 696f 6e73  ' fetchPositions
+00051a80: 2829 2072 6571 7569 7265 7320 616e 2061  () requires an a
+00051a90: 7272 6179 2061 7267 756d 656e 7420 666f  rray argument fo
+00051aa0: 7220 7379 6d62 6f6c 7327 290a 2020 2020  r symbols').    
+00051ab0: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00051ac0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00051ad0: 7365 6c66 2e6c 6f61 645f 6c65 7665 7261  self.load_levera
+00051ae0: 6765 5f62 7261 636b 6574 7328 4661 6c73  ge_brackets(Fals
+00051af0: 652c 2070 6172 616d 7329 0a20 2020 2020  e, params).     
+00051b00: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
+00051b10: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
+00051b20: 5479 7065 203d 2073 656c 662e 7361 6665  Type = self.safe
+00051b30: 5f73 7472 696e 6728 7365 6c66 2e6f 7074  _string(self.opt
+00051b40: 696f 6e73 2c20 2764 6566 6175 6c74 5479  ions, 'defaultTy
+00051b50: 7065 272c 2027 6675 7475 7265 2729 0a20  pe', 'future'). 
+00051b60: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
+00051b70: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00051b80: 6172 616d 732c 2027 7479 7065 272c 2064  arams, 'type', d
+00051b90: 6566 6175 6c74 5479 7065 290a 2020 2020  efaultType).    
+00051ba0: 2020 2020 7175 6572 7920 3d20 7365 6c66      query = self
+00051bb0: 2e6f 6d69 7428 7061 7261 6d73 2c20 2774  .omit(params, 't
+00051bc0: 7970 6527 290a 2020 2020 2020 2020 7375  ype').        su
+00051bd0: 6254 7970 6520 3d20 4e6f 6e65 0a20 2020  bType = None.   
+00051be0: 2020 2020 2073 7562 5479 7065 2c20 7175       subType, qu
+00051bf0: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
+00051c00: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
+00051c10: 6172 616d 7328 2766 6574 6368 4163 636f  arams('fetchAcco
+00051c20: 756e 7450 6f73 6974 696f 6e73 272c 204e  untPositions', N
+00051c30: 6f6e 652c 2070 6172 616d 732c 2027 6c69  one, params, 'li
+00051c40: 6e65 6172 2729 0a20 2020 2020 2020 2069  near').        i
+00051c50: 6620 7365 6c66 2e69 735f 6c69 6e65 6172  f self.is_linear
+00051c60: 2874 7970 652c 2073 7562 5479 7065 293a  (type, subType):
+00051c70: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00051c80: 686f 6420 3d20 2766 6170 6950 7269 7661  hod = 'fapiPriva
+00051c90: 7465 4765 7441 6363 6f75 6e74 270a 2020  teGetAccount'.  
+00051ca0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+00051cb0: 6973 5f69 6e76 6572 7365 2874 7970 652c  is_inverse(type,
+00051cc0: 2073 7562 5479 7065 293a 0a20 2020 2020   subType):.     
+00051cd0: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00051ce0: 2764 6170 6950 7269 7661 7465 4765 7441  'dapiPrivateGetA
+00051cf0: 6363 6f75 6e74 270a 2020 2020 2020 2020  ccount'.        
+00051d00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00051d10: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+00051d20: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+00051d30: 2066 6574 6368 506f 7369 7469 6f6e 7328   fetchPositions(
+00051d40: 2920 7375 7070 6f72 7473 206c 696e 6561  ) supports linea
+00051d50: 7220 616e 6420 696e 7665 7273 6520 636f  r and inverse co
+00051d60: 6e74 7261 6374 7320 6f6e 6c79 2729 0a20  ntracts only'). 
+00051d70: 2020 2020 2020 2061 6363 6f75 6e74 203d         account =
+00051d80: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00051d90: 6574 686f 6429 2871 7565 7279 290a 2020  ethod)(query).  
+00051da0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00051db0: 656c 662e 7061 7273 655f 6163 636f 756e  elf.parse_accoun
+00051dc0: 745f 706f 7369 7469 6f6e 7328 6163 636f  t_positions(acco
+00051dd0: 756e 7429 0a20 2020 2020 2020 2073 796d  unt).        sym
+00051de0: 626f 6c73 203d 2073 656c 662e 6d61 726b  bols = self.mark
+00051df0: 6574 5f73 796d 626f 6c73 2873 796d 626f  et_symbols(symbo
+00051e00: 6c73 290a 2020 2020 2020 2020 7265 7475  ls).        retu
+00051e10: 726e 2073 656c 662e 6669 6c74 6572 5f62  rn self.filter_b
+00051e20: 795f 6172 7261 7928 7265 7375 6c74 2c20  y_array(result, 
+00051e30: 2773 796d 626f 6c27 2c20 7379 6d62 6f6c  'symbol', symbol
+00051e40: 732c 2046 616c 7365 290a 0a20 2020 2064  s, False)..    d
+00051e50: 6566 2066 6574 6368 5f70 6f73 6974 696f  ef fetch_positio
+00051e60: 6e73 5f72 6973 6b28 7365 6c66 2c20 7379  ns_risk(self, sy
+00051e70: 6d62 6f6c 733a 204f 7074 696f 6e61 6c5b  mbols: Optional[
+00051e80: 4c69 7374 5b73 7472 5d5d 203d 204e 6f6e  List[str]] = Non
+00051e90: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+00051ea0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00051eb0: 2020 2066 6574 6368 2070 6f73 6974 696f     fetch positio
+00051ec0: 6e73 2072 6973 6b0a 2020 2020 2020 2020  ns risk.        
+00051ed0: 3a70 6172 616d 205b 7374 725d 7c4e 6f6e  :param [str]|Non
+00051ee0: 6520 7379 6d62 6f6c 733a 206c 6973 7420  e symbols: list 
+00051ef0: 6f66 2075 6e69 6669 6564 206d 6172 6b65  of unified marke
+00051f00: 7420 7379 6d62 6f6c 730a 2020 2020 2020  t symbols.      
+00051f10: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+00051f20: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+00051f30: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+00051f40: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
+00051f50: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+00051f60: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+00051f70: 743a 2064 6174 6120 6f6e 2074 6865 2070  t: data on the p
+00051f80: 6f73 6974 696f 6e73 2072 6973 6b0a 2020  ositions risk.  
+00051f90: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00051fa0: 2020 6966 2073 796d 626f 6c73 2069 7320    if symbols is 
+00051fb0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00051fc0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+00051fd0: 6e73 7461 6e63 6528 7379 6d62 6f6c 732c  nstance(symbols,
+00051fe0: 206c 6973 7429 3a0a 2020 2020 2020 2020   list):.        
+00051ff0: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
+00052000: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
+00052010: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+00052020: 6850 6f73 6974 696f 6e73 5269 736b 2829  hPositionsRisk()
+00052030: 2072 6571 7569 7265 7320 616e 2061 7272   requires an arr
+00052040: 6179 2061 7267 756d 656e 7420 666f 7220  ay argument for 
+00052050: 7379 6d62 6f6c 7327 290a 2020 2020 2020  symbols').      
+00052060: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+00052070: 6574 7328 290a 2020 2020 2020 2020 7365  ets().        se
+00052080: 6c66 2e6c 6f61 645f 6c65 7665 7261 6765  lf.load_leverage
+00052090: 5f62 7261 636b 6574 7328 4661 6c73 652c  _brackets(False,
+000520a0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+000520b0: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
+000520c0: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
+000520d0: 6f6e 650a 2020 2020 2020 2020 6465 6661  one.        defa
+000520e0: 756c 7454 7970 6520 3d20 2766 7574 7572  ultType = 'futur
+000520f0: 6527 0a20 2020 2020 2020 2064 6566 6175  e'.        defau
+00052100: 6c74 5479 7065 203d 2073 656c 662e 7361  ltType = self.sa
+00052110: 6665 5f73 7472 696e 6728 7365 6c66 2e6f  fe_string(self.o
+00052120: 7074 696f 6e73 2c20 2764 6566 6175 6c74  ptions, 'default
+00052130: 5479 7065 272c 2064 6566 6175 6c74 5479  Type', defaultTy
+00052140: 7065 290a 2020 2020 2020 2020 7479 7065  pe).        type
+00052150: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00052160: 696e 6728 7061 7261 6d73 2c20 2774 7970  ing(params, 'typ
+00052170: 6527 2c20 6465 6661 756c 7454 7970 6529  e', defaultType)
+00052180: 0a20 2020 2020 2020 2073 7562 5479 7065  .        subType
+00052190: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+000521a0: 7375 6254 7970 652c 2070 6172 616d 7320  subType, params 
+000521b0: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
+000521c0: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
+000521d0: 7328 2766 6574 6368 506f 7369 7469 6f6e  s('fetchPosition
+000521e0: 7352 6973 6b27 2c20 4e6f 6e65 2c20 7061  sRisk', None, pa
+000521f0: 7261 6d73 2c20 276c 696e 6561 7227 290a  rams, 'linear').
+00052200: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+00052210: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+00052220: 732c 2027 7479 7065 2729 0a20 2020 2020  s, 'type').     
+00052230: 2020 2069 6620 7365 6c66 2e69 735f 6c69     if self.is_li
+00052240: 6e65 6172 2874 7970 652c 2073 7562 5479  near(type, subTy
+00052250: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
+00052260: 206d 6574 686f 6420 3d20 2766 6170 6950   method = 'fapiP
+00052270: 7269 7661 7465 4765 7450 6f73 6974 696f  rivateGetPositio
+00052280: 6e52 6973 6b27 0a20 2020 2020 2020 2020  nRisk'.         
+00052290: 2020 2023 2020 2323 2320 5265 7370 6f6e     #  ### Respon
+000522a0: 7365 2065 7861 6d70 6c65 7320 2023 2323  se examples  ###
+000522b0: 0a20 2020 2020 2020 2020 2020 2023 0a20  .            #. 
+000522c0: 2020 2020 2020 2020 2020 2023 2046 6f72             # For
+000522d0: 204f 6e65 2d77 6179 2070 6f73 6974 696f   One-way positio
+000522e0: 6e20 6d6f 6465 3a0a 2020 2020 2020 2020  n mode:.        
+000522f0: 2020 2020 2320 2020 2020 5b0a 2020 2020      #     [.    
+00052300: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052310: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00052320: 2320 2020 2020 2020 2020 2020 2020 2265  #             "e
+00052330: 6e74 7279 5072 6963 6522 3a20 2230 2e30  ntryPrice": "0.0
+00052340: 3030 3030 222c 0a20 2020 2020 2020 2020  0000",.         
+00052350: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052360: 2022 6d61 7267 696e 5479 7065 223a 2022   "marginType": "
+00052370: 6973 6f6c 6174 6564 222c 0a20 2020 2020  isolated",.     
+00052380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052390: 2020 2020 2022 6973 4175 746f 4164 644d       "isAutoAddM
+000523a0: 6172 6769 6e22 3a20 2266 616c 7365 222c  argin": "false",
+000523b0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000523c0: 2020 2020 2020 2020 2020 2022 6973 6f6c             "isol
+000523d0: 6174 6564 4d61 7267 696e 223a 2022 302e  atedMargin": "0.
+000523e0: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
+000523f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052400: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
+00052410: 2022 3130 222c 0a20 2020 2020 2020 2020   "10",.         
+00052420: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052430: 2022 6c69 7175 6964 6174 696f 6e50 7269   "liquidationPri
+00052440: 6365 223a 2022 3022 2c0a 2020 2020 2020  ce": "0",.      
+00052450: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052460: 2020 2020 226d 6172 6b50 7269 6365 223a      "markPrice":
+00052470: 2022 3636 3739 2e35 3036 3731 3137 3822   "6679.50671178"
+00052480: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00052490: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+000524a0: 4e6f 7469 6f6e 616c 5661 6c75 6522 3a20  NotionalValue": 
+000524b0: 2232 3030 3030 3030 3022 2c0a 2020 2020  "20000000",.    
+000524c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000524d0: 2020 2020 2020 2270 6f73 6974 696f 6e41        "positionA
+000524e0: 6d74 223a 2022 302e 3030 3022 2c0a 2020  mt": "0.000",.  
+000524f0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00052500: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+00052510: 3a20 2242 5443 5553 4454 222c 0a20 2020  : "BTCUSDT",.   
+00052520: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00052530: 2020 2020 2020 2022 756e 5265 616c 697a         "unRealiz
+00052540: 6564 5072 6f66 6974 223a 2022 302e 3030  edProfit": "0.00
+00052550: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00052560: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052570: 2020 2022 706f 7369 7469 6f6e 5369 6465     "positionSide
+00052580: 223a 2022 424f 5448 222c 0a20 2020 2020  ": "BOTH",.     
+00052590: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000525a0: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
+000525b0: 223a 2030 0a20 2020 2020 2020 2020 2020  ": 0.           
+000525c0: 2023 2020 2020 2020 2020 7d0a 2020 2020   #        }.    
+000525d0: 2020 2020 2020 2020 2320 2020 2020 5d0a          #     ].
+000525e0: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
+000525f0: 2020 2020 2020 2020 2020 2320 466f 7220            # For 
+00052600: 4865 6467 6520 706f 7369 7469 6f6e 206d  Hedge position m
+00052610: 6f64 653a 0a20 2020 2020 2020 2020 2020  ode:.           
+00052620: 2023 2020 2020 205b 0a20 2020 2020 2020   #     [.       
+00052630: 2020 2020 2023 2020 2020 2020 2020 207b       #         {
+00052640: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00052650: 2020 2020 2020 2020 2020 2022 656e 7472             "entr
+00052660: 7950 7269 6365 223a 2022 3635 3633 2e36  yPrice": "6563.6
+00052670: 3635 3030 222c 0a20 2020 2020 2020 2020  6500",.         
+00052680: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052690: 2022 6d61 7267 696e 5479 7065 223a 2022   "marginType": "
+000526a0: 6973 6f6c 6174 6564 222c 0a20 2020 2020  isolated",.     
+000526b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000526c0: 2020 2020 2022 6973 4175 746f 4164 644d       "isAutoAddM
+000526d0: 6172 6769 6e22 3a20 2266 616c 7365 222c  argin": "false",
+000526e0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000526f0: 2020 2020 2020 2020 2020 2022 6973 6f6c             "isol
+00052700: 6174 6564 4d61 7267 696e 223a 2022 3135  atedMargin": "15
+00052710: 3531 372e 3534 3135 3034 3638 222c 0a20  517.54150468",. 
+00052720: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00052730: 2020 2020 2020 2020 2022 6c65 7665 7261           "levera
+00052740: 6765 223a 2022 3130 222c 0a20 2020 2020  ge": "10",.     
+00052750: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052760: 2020 2020 2022 6c69 7175 6964 6174 696f       "liquidatio
+00052770: 6e50 7269 6365 223a 2022 3539 3330 2e37  nPrice": "5930.7
+00052780: 3822 2c0a 2020 2020 2020 2020 2020 2020  8",.            
+00052790: 2320 2020 2020 2020 2020 2020 2020 226d  #             "m
+000527a0: 6172 6b50 7269 6365 223a 2022 3636 3739  arkPrice": "6679
+000527b0: 2e35 3036 3731 3137 3822 2c0a 2020 2020  .50671178",.    
+000527c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000527d0: 2020 2020 2020 226d 6178 4e6f 7469 6f6e        "maxNotion
+000527e0: 616c 5661 6c75 6522 3a20 2232 3030 3030  alValue": "20000
+000527f0: 3030 3022 2c0a 2020 2020 2020 2020 2020  000",.          
+00052800: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052810: 2270 6f73 6974 696f 6e41 6d74 223a 2022  "positionAmt": "
+00052820: 3230 2e30 3030 222c 0a20 2020 2020 2020  20.000",.       
+00052830: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052840: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
+00052850: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
+00052860: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00052870: 2020 2275 6e52 6561 6c69 7a65 6450 726f    "unRealizedPro
+00052880: 6669 7422 3a20 2232 3331 362e 3833 3432  fit": "2316.8342
+00052890: 3335 3630 220a 2020 2020 2020 2020 2020  3560".          
+000528a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000528b0: 2270 6f73 6974 696f 6e53 6964 6522 3a20  "positionSide": 
+000528c0: 224c 4f4e 4722 2c0a 2020 2020 2020 2020  "LONG",.        
+000528d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000528e0: 2020 2275 7064 6174 6554 696d 6522 3a20    "updateTime": 
+000528f0: 3136 3235 3437 3433 3034 3736 350a 2020  1625474304765.  
+00052900: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00052910: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+00052920: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
+00052930: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00052940: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
+00052950: 7269 6365 223a 2022 302e 3030 3030 3022  rice": "0.00000"
+00052960: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00052970: 2020 2020 2020 2020 2020 2020 226d 6172              "mar
+00052980: 6769 6e54 7970 6522 3a20 2269 736f 6c61  ginType": "isola
+00052990: 7465 6422 2c0a 2020 2020 2020 2020 2020  ted",.          
+000529a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000529b0: 2269 7341 7574 6f41 6464 4d61 7267 696e  "isAutoAddMargin
+000529c0: 223a 2022 6661 6c73 6522 2c0a 2020 2020  ": "false",.    
+000529d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000529e0: 2020 2020 2020 2269 736f 6c61 7465 644d        "isolatedM
+000529f0: 6172 6769 6e22 3a20 2235 3431 332e 3935  argin": "5413.95
+00052a00: 3739 3939 3931 222c 0a20 2020 2020 2020  799991",.       
+00052a10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052a20: 2020 2022 6c65 7665 7261 6765 223a 2022     "leverage": "
+00052a30: 3130 222c 0a20 2020 2020 2020 2020 2020  10",.           
+00052a40: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00052a50: 6c69 7175 6964 6174 696f 6e50 7269 6365  liquidationPrice
+00052a60: 223a 2022 3731 3839 2e39 3522 2c0a 2020  ": "7189.95",.  
+00052a70: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00052a80: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
+00052a90: 6365 223a 2022 3636 3739 2e35 3036 3731  ce": "6679.50671
+00052aa0: 3137 3822 2c0a 2020 2020 2020 2020 2020  178",.          
+00052ab0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052ac0: 226d 6178 4e6f 7469 6f6e 616c 5661 6c75  "maxNotionalValu
+00052ad0: 6522 3a20 2232 3030 3030 3030 3022 2c0a  e": "20000000",.
+00052ae0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00052af0: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
+00052b00: 696f 6e41 6d74 223a 2022 2d31 302e 3030  ionAmt": "-10.00
+00052b10: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
+00052b20: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
+00052b30: 796d 626f 6c22 3a20 2242 5443 5553 4454  ymbol": "BTCUSDT
+00052b40: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+00052b50: 2020 2020 2020 2020 2020 2020 2022 756e               "un
+00052b60: 5265 616c 697a 6564 5072 6f66 6974 223a  RealizedProfit":
+00052b70: 2022 2d31 3135 362e 3436 3731 3137 3830   "-1156.46711780
+00052b80: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+00052b90: 2020 2020 2020 2020 2020 2020 2022 706f               "po
+00052ba0: 7369 7469 6f6e 5369 6465 223a 2022 5348  sitionSide": "SH
+00052bb0: 4f52 5422 2c0a 2020 2020 2020 2020 2020  ORT",.          
+00052bc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052bd0: 2275 7064 6174 6554 696d 6522 3a20 300a  "updateTime": 0.
+00052be0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00052bf0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00052c00: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
+00052c10: 2020 2020 656c 6966 2073 656c 662e 6973      elif self.is
+00052c20: 5f69 6e76 6572 7365 2874 7970 652c 2073  _inverse(type, s
+00052c30: 7562 5479 7065 293a 0a20 2020 2020 2020  ubType):.       
+00052c40: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
+00052c50: 6170 6950 7269 7661 7465 4765 7450 6f73  apiPrivateGetPos
+00052c60: 6974 696f 6e52 6973 6b27 0a20 2020 2020  itionRisk'.     
+00052c70: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00052c80: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
+00052c90: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
+00052ca0: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
+00052cb0: 6e73 5269 736b 2829 2073 7570 706f 7274  nsRisk() support
+00052cc0: 7320 6c69 6e65 6172 2061 6e64 2069 6e76  s linear and inv
+00052cd0: 6572 7365 2063 6f6e 7472 6163 7473 206f  erse contracts o
+00052ce0: 6e6c 7927 290a 2020 2020 2020 2020 7265  nly').        re
+00052cf0: 7370 6f6e 7365 203d 2067 6574 6174 7472  sponse = getattr
+00052d00: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
+00052d10: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+00052d20: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00052d30: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
+00052d40: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
+00052d50: 6e20 7261 6e67 6528 302c 206c 656e 2872  n range(0, len(r
+00052d60: 6573 706f 6e73 6529 293a 0a20 2020 2020  esponse)):.     
+00052d70: 2020 2020 2020 2070 6172 7365 6420 3d20         parsed = 
+00052d80: 7365 6c66 2e70 6172 7365 5f70 6f73 6974  self.parse_posit
+00052d90: 696f 6e5f 7269 736b 2872 6573 706f 6e73  ion_risk(respons
+00052da0: 655b 695d 290a 2020 2020 2020 2020 2020  e[i]).          
+00052db0: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
+00052dc0: 7061 7273 6564 290a 2020 2020 2020 2020  parsed).        
+00052dd0: 7379 6d62 6f6c 7320 3d20 7365 6c66 2e6d  symbols = self.m
+00052de0: 6172 6b65 745f 7379 6d62 6f6c 7328 7379  arket_symbols(sy
+00052df0: 6d62 6f6c 7329 0a20 2020 2020 2020 2072  mbols).        r
+00052e00: 6574 7572 6e20 7365 6c66 2e66 696c 7465  eturn self.filte
+00052e10: 725f 6279 5f61 7272 6179 2872 6573 756c  r_by_array(resul
+00052e20: 742c 2027 7379 6d62 6f6c 272c 2073 796d  t, 'symbol', sym
+00052e30: 626f 6c73 2c20 4661 6c73 6529 0a0a 2020  bols, False)..  
+00052e40: 2020 6465 6620 6665 7463 685f 6675 6e64    def fetch_fund
+00052e50: 696e 675f 6869 7374 6f72 7928 7365 6c66  ing_history(self
+00052e60: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
+00052e70: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
+00052e80: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
+00052e90: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
+00052ea0: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
+00052eb0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
+00052ec0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00052ed0: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00052ee0: 7468 6520 6869 7374 6f72 7920 6f66 2066  the history of f
+00052ef0: 756e 6469 6e67 2070 6179 6d65 6e74 7320  unding payments 
+00052f00: 7061 6964 2061 6e64 2072 6563 6569 7665  paid and receive
+00052f10: 6420 6f6e 2073 656c 6620 6163 636f 756e  d on self accoun
+00052f20: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
+00052f30: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
+00052f40: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+00052f50: 2073 796d 626f 6c0a 2020 2020 2020 2020   symbol.        
+00052f60: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+00052f70: 7369 6e63 653a 2074 6865 2065 6172 6c69  since: the earli
+00052f80: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
+00052f90: 6f20 6665 7463 6820 6675 6e64 696e 6720  o fetch funding 
+00052fa0: 6869 7374 6f72 7920 666f 720a 2020 2020  history for.    
+00052fb0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00052fc0: 6f6e 6520 6c69 6d69 743a 2074 6865 206d  one limit: the m
+00052fd0: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
+00052fe0: 2066 756e 6469 6e67 2068 6973 746f 7279   funding history
+00052ff0: 2073 7472 7563 7475 7265 7320 746f 2072   structures to r
+00053000: 6574 7269 6576 650a 2020 2020 2020 2020  etrieve.        
+00053010: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+00053020: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+00053030: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+00053040: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+00053050: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+00053060: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+00053070: 2061 2060 6675 6e64 696e 6720 6869 7374   a `funding hist
+00053080: 6f72 7920 7374 7275 6374 7572 6520 3c68  ory structure <h
+00053090: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+000530a0: 2e63 6f6d 2f23 2f3f 6964 3d66 756e 6469  .com/#/?id=fundi
+000530b0: 6e67 2d68 6973 746f 7279 2d73 7472 7563  ng-history-struc
+000530c0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+000530d0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+000530e0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+000530f0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00053100: 4e6f 6e65 0a20 2020 2020 2020 206d 6574  None.        met
+00053110: 686f 6420 3d20 4e6f 6e65 0a20 2020 2020  hod = None.     
+00053120: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00053130: 2020 2020 2020 2020 2020 2027 696e 636f             'inco
+00053140: 6d65 5479 7065 273a 2027 4655 4e44 494e  meType': 'FUNDIN
+00053150: 475f 4645 4527 2c20 2023 2022 5452 414e  G_FEE',  # "TRAN
+00053160: 5346 4552 22ef bc8c 2257 454c 434f 4d45  SFER"..."WELCOME
+00053170: 5f42 4f4e 5553 222c 2022 5245 414c 495a  _BONUS", "REALIZ
+00053180: 4544 5f50 4e4c 22ef bc8c 2246 554e 4449  ED_PNL"..."FUNDI
+00053190: 4e47 5f46 4545 222c 2022 434f 4d4d 4953  NG_FEE", "COMMIS
+000531a0: 5349 4f4e 2220 616e 6420 2249 4e53 5552  SION" and "INSUR
+000531b0: 414e 4345 5f43 4c45 4152 220a 2020 2020  ANCE_CLEAR".    
+000531c0: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
+000531d0: 2073 796d 626f 6c20 6973 206e 6f74 204e   symbol is not N
+000531e0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000531f0: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
+00053200: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
+00053210: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00053220: 745b 2773 796d 626f 6c27 5d20 3d20 6d61  t['symbol'] = ma
+00053230: 726b 6574 5b27 6964 275d 0a20 2020 2020  rket['id'].     
+00053240: 2020 2020 2020 2069 6620 6e6f 7420 6d61         if not ma
+00053250: 726b 6574 5b27 7377 6170 275d 3a0a 2020  rket['swap']:.  
+00053260: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00053270: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
+00053280: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
+00053290: 6368 4675 6e64 696e 6748 6973 746f 7279  chFundingHistory
+000532a0: 2829 2073 7570 706f 7274 7320 7377 6170  () supports swap
+000532b0: 2063 6f6e 7472 6163 7473 206f 6e6c 7927   contracts only'
+000532c0: 290a 2020 2020 2020 2020 7375 6254 7970  ).        subTyp
+000532d0: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
+000532e0: 2073 7562 5479 7065 2c20 7061 7261 6d73   subType, params
+000532f0: 203d 2073 656c 662e 6861 6e64 6c65 5f73   = self.handle_s
+00053300: 7562 5f74 7970 655f 616e 645f 7061 7261  ub_type_and_para
+00053310: 6d73 2827 6665 7463 6846 756e 6469 6e67  ms('fetchFunding
+00053320: 4869 7374 6f72 7927 2c20 6d61 726b 6574  History', market
+00053330: 2c20 7061 7261 6d73 2c20 276c 696e 6561  , params, 'linea
+00053340: 7227 290a 2020 2020 2020 2020 6966 2073  r').        if s
+00053350: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
+00053360: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00053370: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
+00053380: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
+00053390: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+000533a0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000533b0: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+000533c0: 6d69 7427 5d20 3d20 6c69 6d69 740a 2020  mit'] = limit.  
+000533d0: 2020 2020 2020 6465 6661 756c 7454 7970        defaultTyp
+000533e0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+000533f0: 7269 6e67 5f32 2873 656c 662e 6f70 7469  ring_2(self.opti
+00053400: 6f6e 732c 2027 6665 7463 6846 756e 6469  ons, 'fetchFundi
+00053410: 6e67 4869 7374 6f72 7927 2c20 2764 6566  ngHistory', 'def
+00053420: 6175 6c74 5479 7065 272c 2027 6675 7475  aultType', 'futu
+00053430: 7265 2729 0a20 2020 2020 2020 2074 7970  re').        typ
+00053440: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+00053450: 7269 6e67 2870 6172 616d 732c 2027 7479  ring(params, 'ty
+00053460: 7065 272c 2064 6566 6175 6c74 5479 7065  pe', defaultType
+00053470: 290a 2020 2020 2020 2020 7061 7261 6d73  ).        params
+00053480: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
+00053490: 616d 732c 2027 7479 7065 2729 0a20 2020  ams, 'type').   
+000534a0: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
+000534b0: 6c69 6e65 6172 2874 7970 652c 2073 7562  linear(type, sub
+000534c0: 5479 7065 293a 0a20 2020 2020 2020 2020  Type):.         
+000534d0: 2020 206d 6574 686f 6420 3d20 2766 6170     method = 'fap
+000534e0: 6950 7269 7661 7465 4765 7449 6e63 6f6d  iPrivateGetIncom
+000534f0: 6527 0a20 2020 2020 2020 2065 6c69 6620  e'.        elif 
+00053500: 7365 6c66 2e69 735f 696e 7665 7273 6528  self.is_inverse(
+00053510: 7479 7065 2c20 7375 6254 7970 6529 3a0a  type, subType):.
+00053520: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00053530: 6f64 203d 2027 6461 7069 5072 6976 6174  od = 'dapiPrivat
+00053540: 6547 6574 496e 636f 6d65 270a 2020 2020  eGetIncome'.    
+00053550: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00053560: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
+00053570: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
+00053580: 202b 2027 2066 6574 6368 4675 6e64 696e   + ' fetchFundin
+00053590: 6748 6973 746f 7279 2829 2073 7570 706f  gHistory() suppo
+000535a0: 7274 7320 6c69 6e65 6172 2061 6e64 2069  rts linear and i
+000535b0: 6e76 6572 7365 2063 6f6e 7472 6163 7473  nverse contracts
+000535c0: 206f 6e6c 7927 290a 2020 2020 2020 2020   only').        
+000535d0: 7265 7370 6f6e 7365 203d 2067 6574 6174  response = getat
+000535e0: 7472 2873 656c 662c 206d 6574 686f 6429  tr(self, method)
+000535f0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+00053600: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+00053610: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00053620: 6c66 2e70 6172 7365 5f69 6e63 6f6d 6573  lf.parse_incomes
+00053630: 2872 6573 706f 6e73 652c 206d 6172 6b65  (response, marke
+00053640: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
+00053650: 0a0a 2020 2020 6465 6620 7365 745f 6c65  ..    def set_le
+00053660: 7665 7261 6765 2873 656c 662c 206c 6576  verage(self, lev
+00053670: 6572 6167 652c 2073 796d 626f 6c3a 204f  erage, symbol: O
+00053680: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00053690: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+000536a0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000536b0: 2020 2020 2073 6574 2074 6865 206c 6576       set the lev
+000536c0: 656c 206f 6620 6c65 7665 7261 6765 2066  el of leverage f
+000536d0: 6f72 2061 206d 6172 6b65 740a 2020 2020  or a market.    
+000536e0: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
+000536f0: 206c 6576 6572 6167 653a 2074 6865 2072   leverage: the r
+00053700: 6174 6520 6f66 206c 6576 6572 6167 650a  ate of leverage.
+00053710: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00053720: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
+00053730: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
+00053740: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00053750: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+00053760: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00053770: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
+00053780: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
+00053790: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+000537a0: 726e 7320 6469 6374 3a20 7265 7370 6f6e  rns dict: respon
+000537b0: 7365 2066 726f 6d20 7468 6520 6578 6368  se from the exch
+000537c0: 616e 6765 0a20 2020 2020 2020 2022 2222  ange.        """
+000537d0: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
+000537e0: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
+000537f0: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
+00053800: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
+00053810: 7365 6c66 2e69 6420 2b20 2720 7365 744c  self.id + ' setL
+00053820: 6576 6572 6167 6528 2920 7265 7175 6972  everage() requir
+00053830: 6573 2061 2073 796d 626f 6c20 6172 6775  es a symbol argu
+00053840: 6d65 6e74 2729 0a20 2020 2020 2020 2023  ment').        #
+00053850: 2057 4152 4e49 4e47 3a20 5448 4953 2057   WARNING: THIS W
+00053860: 494c 4c20 494e 4352 4541 5345 204c 4951  ILL INCREASE LIQ
+00053870: 5549 4441 5449 4f4e 2050 5249 4345 2046  UIDATION PRICE F
+00053880: 4f52 204f 5045 4e20 4953 4f4c 4154 4544  OR OPEN ISOLATED
+00053890: 204c 4f4e 4720 504f 5349 5449 4f4e 530a   LONG POSITIONS.
+000538a0: 2020 2020 2020 2020 2320 414e 4420 4445          # AND DE
+000538b0: 4352 4541 5345 204c 4951 5549 4441 5449  CREASE LIQUIDATI
+000538c0: 4f4e 2050 5249 4345 2046 4f52 204f 5045  ON PRICE FOR OPE
+000538d0: 4e20 4953 4f4c 4154 4544 2053 484f 5254  N ISOLATED SHORT
+000538e0: 2050 4f53 4954 494f 4e53 0a20 2020 2020   POSITIONS.     
+000538f0: 2020 2069 6620 286c 6576 6572 6167 6520     if (leverage 
+00053900: 3c20 3129 206f 7220 286c 6576 6572 6167  < 1) or (leverag
+00053910: 6520 3e20 3132 3529 3a0a 2020 2020 2020  e > 125):.      
+00053920: 2020 2020 2020 7261 6973 6520 4261 6452        raise BadR
+00053930: 6571 7565 7374 2873 656c 662e 6964 202b  equest(self.id +
+00053940: 2027 206c 6576 6572 6167 6520 7368 6f75   ' leverage shou
+00053950: 6c64 2062 6520 6265 7477 6565 6e20 3120  ld be between 1 
+00053960: 616e 6420 3132 3527 290a 2020 2020 2020  and 125').      
+00053970: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+00053980: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
+00053990: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+000539a0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+000539b0: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
+000539c0: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
+000539d0: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
+000539e0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+000539f0: 203d 2027 6661 7069 5072 6976 6174 6550   = 'fapiPrivateP
+00053a00: 6f73 744c 6576 6572 6167 6527 0a20 2020  ostLeverage'.   
+00053a10: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
+00053a20: 5b27 696e 7665 7273 6527 5d3a 0a20 2020  ['inverse']:.   
+00053a30: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+00053a40: 3d20 2764 6170 6950 7269 7661 7465 506f  = 'dapiPrivatePo
+00053a50: 7374 4c65 7665 7261 6765 270a 2020 2020  stLeverage'.    
+00053a60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00053a70: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
+00053a80: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
+00053a90: 202b 2027 2073 6574 4c65 7665 7261 6765   + ' setLeverage
+00053aa0: 2829 2073 7570 706f 7274 7320 6c69 6e65  () supports line
+00053ab0: 6172 2061 6e64 2069 6e76 6572 7365 2063  ar and inverse c
+00053ac0: 6f6e 7472 6163 7473 206f 6e6c 7927 290a  ontracts only').
+00053ad0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00053ae0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00053af0: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+00053b00: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+00053b10: 2020 2020 276c 6576 6572 6167 6527 3a20      'leverage': 
+00053b20: 6c65 7665 7261 6765 2c0a 2020 2020 2020  leverage,.      
+00053b30: 2020 7d0a 2020 2020 2020 2020 7265 7475    }.        retu
+00053b40: 726e 2067 6574 6174 7472 2873 656c 662c  rn getattr(self,
+00053b50: 206d 6574 686f 6429 2873 656c 662e 6578   method)(self.ex
+00053b60: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+00053b70: 7261 6d73 2929 0a0a 2020 2020 6465 6620  rams))..    def 
+00053b80: 7365 745f 6d61 7267 696e 5f6d 6f64 6528  set_margin_mode(
+00053b90: 7365 6c66 2c20 6d61 7267 696e 4d6f 6465  self, marginMode
+00053ba0: 3a20 7374 722c 2073 796d 626f 6c3a 204f  : str, symbol: O
+00053bb0: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00053bc0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+00053bd0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00053be0: 2020 2020 2073 6574 206d 6172 6769 6e20       set margin 
+00053bf0: 6d6f 6465 2074 6f20 2763 726f 7373 2720  mode to 'cross' 
+00053c00: 6f72 2027 6973 6f6c 6174 6564 270a 2020  or 'isolated'.  
+00053c10: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00053c20: 206d 6172 6769 6e4d 6f64 653a 2027 6372   marginMode: 'cr
+00053c30: 6f73 7327 206f 7220 2769 736f 6c61 7465  oss' or 'isolate
+00053c40: 6427 0a20 2020 2020 2020 203a 7061 7261  d'.        :para
+00053c50: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
+00053c60: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
+00053c70: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
+00053c80: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+00053c90: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00053ca0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00053cb0: 2062 696e 616e 6365 2061 7069 2065 6e64   binance api end
+00053cc0: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+00053cd0: 6574 7572 6e73 2064 6963 743a 2072 6573  eturns dict: res
+00053ce0: 706f 6e73 6520 6672 6f6d 2074 6865 2065  ponse from the e
+00053cf0: 7863 6861 6e67 650a 2020 2020 2020 2020  xchange.        
+00053d00: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
+00053d10: 796d 626f 6c20 6973 204e 6f6e 653a 0a20  ymbol is None:. 
+00053d20: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00053d30: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
+00053d40: 6564 2873 656c 662e 6964 202b 2027 2073  ed(self.id + ' s
+00053d50: 6574 4d61 7267 696e 4d6f 6465 2829 2072  etMarginMode() r
+00053d60: 6571 7569 7265 7320 6120 7379 6d62 6f6c  equires a symbol
+00053d70: 2061 7267 756d 656e 7427 290a 2020 2020   argument').    
+00053d80: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00053d90: 7b22 636f 6465 223a 202d 3430 3438 202c  {"code": -4048 ,
+00053da0: 2022 6d73 6722 3a20 224d 6172 6769 6e20   "msg": "Margin 
+00053db0: 7479 7065 2063 616e 6e6f 7420 6265 2063  type cannot be c
+00053dc0: 6861 6e67 6564 2069 6620 7468 6572 6520  hanged if there 
+00053dd0: 6578 6973 7473 2070 6f73 6974 696f 6e2e  exists position.
+00053de0: 227d 0a20 2020 2020 2020 2023 0a20 2020  "}.        #.   
+00053df0: 2020 2020 2023 206f 720a 2020 2020 2020       # or.      
+00053e00: 2020 230a 2020 2020 2020 2020 2320 7b22    #.        # {"
+00053e10: 636f 6465 223a 2032 3030 2c20 226d 7367  code": 200, "msg
+00053e20: 223a 2022 7375 6363 6573 7322 7d0a 2020  ": "success"}.  
+00053e30: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00053e40: 6d61 7267 696e 4d6f 6465 203d 206d 6172  marginMode = mar
+00053e50: 6769 6e4d 6f64 652e 7570 7065 7228 290a  ginMode.upper().
+00053e60: 2020 2020 2020 2020 6966 206d 6172 6769          if margi
+00053e70: 6e4d 6f64 6520 3d3d 2027 4352 4f53 5327  nMode == 'CROSS'
+00053e80: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+00053e90: 7267 696e 4d6f 6465 203d 2027 4352 4f53  rginMode = 'CROS
+00053ea0: 5345 4427 0a20 2020 2020 2020 2069 6620  SED'.        if 
+00053eb0: 286d 6172 6769 6e4d 6f64 6520 213d 2027  (marginMode != '
+00053ec0: 4953 4f4c 4154 4544 2729 2061 6e64 2028  ISOLATED') and (
+00053ed0: 6d61 7267 696e 4d6f 6465 2021 3d20 2743  marginMode != 'C
+00053ee0: 524f 5353 4544 2729 3a0a 2020 2020 2020  ROSSED'):.      
+00053ef0: 2020 2020 2020 7261 6973 6520 4261 6452        raise BadR
+00053f00: 6571 7565 7374 2873 656c 662e 6964 202b  equest(self.id +
+00053f10: 2027 206d 6172 6769 6e4d 6f64 6520 6d75   ' marginMode mu
+00053f20: 7374 2062 6520 6569 7468 6572 2069 736f  st be either iso
+00053f30: 6c61 7465 6420 6f72 2063 726f 7373 2729  lated or cross')
+00053f40: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+00053f50: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00053f60: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00053f70: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+00053f80: 290a 2020 2020 2020 2020 6d65 7468 6f64  ).        method
+00053f90: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00053fa0: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
+00053fb0: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
+00053fc0: 206d 6574 686f 6420 3d20 2766 6170 6950   method = 'fapiP
+00053fd0: 7269 7661 7465 506f 7374 4d61 7267 696e  rivatePostMargin
+00053fe0: 5479 7065 270a 2020 2020 2020 2020 656c  Type'.        el
+00053ff0: 6966 206d 6172 6b65 745b 2769 6e76 6572  if market['inver
+00054000: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+00054010: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
+00054020: 5072 6976 6174 6550 6f73 744d 6172 6769  PrivatePostMargi
+00054030: 6e54 7970 6527 0a20 2020 2020 2020 2065  nType'.        e
+00054040: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00054050: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+00054060: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+00054070: 7365 744d 6172 6769 6e4d 6f64 6528 2920  setMarginMode() 
+00054080: 7375 7070 6f72 7473 206c 696e 6561 7220  supports linear 
+00054090: 616e 6420 696e 7665 7273 6520 636f 6e74  and inverse cont
+000540a0: 7261 6374 7320 6f6e 6c79 2729 0a20 2020  racts only').   
+000540b0: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+000540c0: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
+000540d0: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
+000540e0: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+000540f0: 2027 6d61 7267 696e 5479 7065 273a 206d   'marginType': m
+00054100: 6172 6769 6e4d 6f64 652c 0a20 2020 2020  arginMode,.     
+00054110: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
+00054120: 706f 6e73 6520 3d20 4e6f 6e65 0a20 2020  ponse = None.   
+00054130: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00054140: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00054150: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00054160: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
+00054170: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00054180: 6d73 2929 0a20 2020 2020 2020 2065 7863  ms)).        exc
+00054190: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+000541a0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+000541b0: 2320 6e6f 7420 616e 2065 7272 6f72 0a20  # not an error. 
+000541c0: 2020 2020 2020 2020 2020 2023 2068 7474             # htt
+000541d0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+000541e0: 6363 7874 2f63 6378 742f 6973 7375 6573  ccxt/ccxt/issues
+000541f0: 2f31 3132 3638 0a20 2020 2020 2020 2020  /11268.         
+00054200: 2020 2023 2068 7474 7073 3a2f 2f67 6974     # https://git
+00054210: 6875 622e 636f 6d2f 6363 7874 2f63 6378  hub.com/ccxt/ccx
+00054220: 742f 7075 6c6c 2f31 3136 3234 0a20 2020  t/pull/11624.   
+00054230: 2020 2020 2020 2020 2023 2050 4f53 5420           # POST 
+00054240: 6874 7470 733a 2f2f 6661 7069 2e62 696e  https://fapi.bin
+00054250: 616e 6365 2e63 6f6d 2f66 6170 692f 7631  ance.com/fapi/v1
+00054260: 2f6d 6172 6769 6e54 7970 6520 3430 3020  /marginType 400 
+00054270: 4261 6420 5265 7175 6573 740a 2020 2020  Bad Request.    
+00054280: 2020 2020 2020 2020 2320 6269 6e61 6e63          # binanc
+00054290: 6575 7364 6d0a 2020 2020 2020 2020 2020  eusdm.          
+000542a0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+000542b0: 652c 204d 6172 6769 6e4d 6f64 6541 6c72  e, MarginModeAlr
+000542c0: 6561 6479 5365 7429 3a0a 2020 2020 2020  eadySet):.      
+000542d0: 2020 2020 2020 2020 2020 7468 726f 774d            throwM
+000542e0: 6172 6769 6e4d 6f64 6541 6c72 6561 6479  arginModeAlready
+000542f0: 5365 7420 3d20 7365 6c66 2e73 6166 655f  Set = self.safe_
+00054300: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
+00054310: 6e73 2c20 2774 6872 6f77 4d61 7267 696e  ns, 'throwMargin
+00054320: 4d6f 6465 416c 7265 6164 7953 6574 272c  ModeAlreadySet',
+00054330: 2046 616c 7365 290a 2020 2020 2020 2020   False).        
+00054340: 2020 2020 2020 2020 6966 2074 6872 6f77          if throw
+00054350: 4d61 7267 696e 4d6f 6465 416c 7265 6164  MarginModeAlread
+00054360: 7953 6574 3a0a 2020 2020 2020 2020 2020  ySet:.          
+00054370: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00054380: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00054390: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000543a0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
+000543b0: 6f6e 7365 203d 207b 2763 6f64 6527 3a20  onse = {'code': 
+000543c0: 2d34 3034 362c 2027 6d73 6727 3a20 274e  -4046, 'msg': 'N
+000543d0: 6f20 6e65 6564 2074 6f20 6368 616e 6765  o need to change
+000543e0: 206d 6172 6769 6e20 7479 7065 2e27 7d0a   margin type.'}.
+000543f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00054400: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00054410: 2020 7261 6973 6520 650a 2020 2020 2020    raise e.      
+00054420: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+00054430: 650a 0a20 2020 2064 6566 2073 6574 5f70  e..    def set_p
+00054440: 6f73 6974 696f 6e5f 6d6f 6465 2873 656c  osition_mode(sel
+00054450: 662c 2068 6564 6765 642c 2073 796d 626f  f, hedged, symbo
+00054460: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
+00054470: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+00054480: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00054490: 0a20 2020 2020 2020 2073 6574 2068 6564  .        set hed
+000544a0: 6765 6420 746f 2054 7275 6520 6f72 2046  ged to True or F
+000544b0: 616c 7365 2066 6f72 2061 206d 6172 6b65  alse for a marke
+000544c0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
+000544d0: 2062 6f6f 6c20 6865 6467 6564 3a20 7365   bool hedged: se
+000544e0: 7420 746f 2054 7275 6520 746f 2075 7365  t to True to use
+000544f0: 2064 7561 6c53 6964 6550 6f73 6974 696f   dualSidePositio
+00054500: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
+00054510: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
+00054520: 3a20 6e6f 7420 7573 6564 2062 7920 6269  : not used by bi
+00054530: 6e61 6e63 6520 7365 7450 6f73 6974 696f  nance setPositio
+00054540: 6e4d 6f64 6528 290a 2020 2020 2020 2020  nMode().        
+00054550: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+00054560: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+00054570: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+00054580: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+00054590: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+000545a0: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+000545b0: 2072 6573 706f 6e73 6520 6672 6f6d 2074   response from t
+000545c0: 6865 2065 7863 6861 6e67 650a 2020 2020  he exchange.    
+000545d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000545e0: 6465 6661 756c 7454 7970 6520 3d20 7365  defaultType = se
+000545f0: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
+00054600: 656c 662e 6f70 7469 6f6e 732c 2027 6465  elf.options, 'de
+00054610: 6661 756c 7454 7970 6527 2c20 2766 7574  faultType', 'fut
+00054620: 7572 6527 290a 2020 2020 2020 2020 7479  ure').        ty
+00054630: 7065 203d 2073 656c 662e 7361 6665 5f73  pe = self.safe_s
+00054640: 7472 696e 6728 7061 7261 6d73 2c20 2774  tring(params, 't
+00054650: 7970 6527 2c20 6465 6661 756c 7454 7970  ype', defaultTyp
+00054660: 6529 0a20 2020 2020 2020 2070 6172 616d  e).        param
+00054670: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+00054680: 7261 6d73 2c20 5b27 7479 7065 275d 290a  rams, ['type']).
+00054690: 2020 2020 2020 2020 6475 616c 5369 6465          dualSide
+000546a0: 506f 7369 7469 6f6e 203d 204e 6f6e 650a  Position = None.
+000546b0: 2020 2020 2020 2020 6966 2068 6564 6765          if hedge
+000546c0: 643a 0a20 2020 2020 2020 2020 2020 2064  d:.            d
+000546d0: 7561 6c53 6964 6550 6f73 6974 696f 6e20  ualSidePosition 
+000546e0: 3d20 2774 7275 6527 0a20 2020 2020 2020  = 'true'.       
+000546f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00054700: 2020 2064 7561 6c53 6964 6550 6f73 6974     dualSidePosit
+00054710: 696f 6e20 3d20 2766 616c 7365 270a 2020  ion = 'false'.  
+00054720: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00054730: 7b0a 2020 2020 2020 2020 2020 2020 2764  {.            'd
+00054740: 7561 6c53 6964 6550 6f73 6974 696f 6e27  ualSidePosition'
+00054750: 3a20 6475 616c 5369 6465 506f 7369 7469  : dualSidePositi
+00054760: 6f6e 2c0a 2020 2020 2020 2020 7d0a 2020  on,.        }.  
+00054770: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
+00054780: 6f6e 650a 2020 2020 2020 2020 6966 2073  one.        if s
+00054790: 656c 662e 6973 5f69 6e76 6572 7365 2874  elf.is_inverse(t
+000547a0: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
+000547b0: 2020 6d65 7468 6f64 203d 2027 6461 7069    method = 'dapi
+000547c0: 5072 6976 6174 6550 6f73 7450 6f73 6974  PrivatePostPosit
+000547d0: 696f 6e53 6964 6544 7561 6c27 0a20 2020  ionSideDual'.   
+000547e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000547f0: 2020 2020 2020 2023 2064 6566 6175 6c74         # default
+00054800: 2074 6f20 6675 7475 7265 0a20 2020 2020   to future.     
+00054810: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00054820: 2766 6170 6950 7269 7661 7465 506f 7374  'fapiPrivatePost
+00054830: 506f 7369 7469 6f6e 5369 6465 4475 616c  PositionSideDual
+00054840: 270a 2020 2020 2020 2020 230a 2020 2020  '.        #.    
+00054850: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00054860: 2020 2020 2320 2020 2020 2020 2263 6f64      #       "cod
+00054870: 6522 3a20 3230 302c 0a20 2020 2020 2020  e": 200,.       
+00054880: 2023 2020 2020 2020 2022 6d73 6722 3a20   #       "msg": 
+00054890: 2273 7563 6365 7373 220a 2020 2020 2020  "success".      
+000548a0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+000548b0: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
+000548c0: 726e 2067 6574 6174 7472 2873 656c 662c  rn getattr(self,
+000548d0: 206d 6574 686f 6429 2873 656c 662e 6578   method)(self.ex
+000548e0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+000548f0: 7261 6d73 2929 0a0a 2020 2020 6465 6620  rams))..    def 
+00054900: 6665 7463 685f 7365 7474 6c65 6d65 6e74  fetch_settlement
+00054910: 5f68 6973 746f 7279 2873 656c 662c 2073  _history(self, s
+00054920: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00054930: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
+00054940: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
+00054950: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
+00054960: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00054970: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00054980: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00054990: 2020 2020 2020 2066 6574 6368 6573 2068         fetches h
+000549a0: 6973 746f 7269 6361 6c20 7365 7474 6c65  istorical settle
+000549b0: 6d65 6e74 2072 6563 6f72 6473 0a20 2020  ment records.   
+000549c0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
+000549d0: 2f62 696e 616e 6365 2d64 6f63 732e 6769  /binance-docs.gi
+000549e0: 7468 7562 2e69 6f2f 6170 6964 6f63 732f  thub.io/apidocs/
+000549f0: 766f 7074 696f 6e73 2f65 6e2f 2368 6973  voptions/en/#his
+00054a00: 746f 7269 6361 6c2d 6578 6572 6369 7365  torical-exercise
+00054a10: 2d72 6563 6f72 6473 0a20 2020 2020 2020  -records.       
+00054a20: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
+00054a30: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
+00054a40: 6574 2073 796d 626f 6c20 6f66 2074 6865  et symbol of the
+00054a50: 2073 6574 746c 656d 656e 7420 6869 7374   settlement hist
+00054a60: 6f72 790a 2020 2020 2020 2020 3a70 6172  ory.        :par
+00054a70: 616d 2069 6e74 2073 696e 6365 3a20 7469  am int since: ti
+00054a80: 6d65 7374 616d 7020 696e 206d 730a 2020  mestamp in ms.  
+00054a90: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+00054aa0: 206c 696d 6974 3a20 6e75 6d62 6572 206f   limit: number o
+00054ab0: 6620 7265 636f 7264 732c 2064 6566 6175  f records, defau
+00054ac0: 6c74 2031 3030 2c20 6d61 7820 3130 300a  lt 100, max 100.
+00054ad0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+00054ae0: 6963 7420 7061 7261 6d73 3a20 6578 6368  ict params: exch
+00054af0: 616e 6765 2073 7065 6369 6669 6320 7061  ange specific pa
+00054b00: 7261 6d73 0a20 2020 2020 2020 203a 7265  rams.        :re
+00054b10: 7475 726e 7320 5b64 6963 745d 3a20 6120  turns [dict]: a 
+00054b20: 6c69 7374 206f 6620 5b73 6574 746c 656d  list of [settlem
+00054b30: 656e 7420 6869 7374 6f72 7920 6f62 6a65  ent history obje
+00054b40: 6374 735d 0a20 2020 2020 2020 2022 2222  cts].        """
+00054b50: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+00054b60: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00054b70: 2020 2020 206d 6172 6b65 7420 3d20 4e6f       market = No
+00054b80: 6e65 2069 6620 2873 796d 626f 6c20 6973  ne if (symbol is
+00054b90: 204e 6f6e 6529 2065 6c73 6520 7365 6c66   None) else self
+00054ba0: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00054bb0: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
+00054bc0: 6f6e 650a 2020 2020 2020 2020 7479 7065  one.        type
+00054bd0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+00054be0: 6861 6e64 6c65 5f6d 6172 6b65 745f 7479  handle_market_ty
+00054bf0: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
+00054c00: 6574 6368 5365 7474 6c65 6d65 6e74 4869  etchSettlementHi
+00054c10: 7374 6f72 7927 2c20 6d61 726b 6574 2c20  story', market, 
+00054c20: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+00054c30: 6966 2074 7970 6520 213d 2027 6f70 7469  if type != 'opti
+00054c40: 6f6e 273a 0a20 2020 2020 2020 2020 2020  on':.           
+00054c50: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+00054c60: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+00054c70: 6665 7463 6853 6574 746c 656d 656e 7448  fetchSettlementH
+00054c80: 6973 746f 7279 2829 2073 7570 706f 7274  istory() support
+00054c90: 7320 6f70 7469 6f6e 206d 6172 6b65 7473  s option markets
+00054ca0: 206f 6e6c 7927 290a 2020 2020 2020 2020   only').        
+00054cb0: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
+00054cc0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+00054cd0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00054ce0: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
+00054cf0: 206d 6172 6b65 745b 2773 796d 626f 6c27   market['symbol'
+00054d00: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
+00054d10: 7175 6573 745b 2775 6e64 6572 6c79 696e  quest['underlyin
+00054d20: 6727 5d20 3d20 6d61 726b 6574 5b27 6261  g'] = market['ba
+00054d30: 7365 4964 275d 202b 206d 6172 6b65 745b  seId'] + market[
+00054d40: 2771 756f 7465 4964 275d 0a20 2020 2020  'quoteId'].     
+00054d50: 2020 2069 6620 7369 6e63 6520 6973 206e     if since is n
+00054d60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00054d70: 2020 2020 2072 6571 7565 7374 5b27 7374       request['st
+00054d80: 6172 7454 696d 6527 5d20 3d20 7369 6e63  artTime'] = sinc
+00054d90: 650a 2020 2020 2020 2020 6966 206c 696d  e.        if lim
+00054da0: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
+00054db0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00054dc0: 6573 745b 276c 696d 6974 275d 203d 206c  est['limit'] = l
+00054dd0: 696d 6974 0a20 2020 2020 2020 2072 6573  imit.        res
+00054de0: 706f 6e73 6520 3d20 7365 6c66 2e65 6170  ponse = self.eap
+00054df0: 6950 7562 6c69 6347 6574 4578 6572 6369  iPublicGetExerci
+00054e00: 7365 4869 7374 6f72 7928 7365 6c66 2e65  seHistory(self.e
+00054e10: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00054e20: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00054e30: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00054e40: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
+00054e50: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00054e60: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
+00054e70: 626f 6c22 3a20 2245 5448 2d32 3330 3232  bol": "ETH-23022
+00054e80: 332d 3139 3030 2d50 222c 0a20 2020 2020  3-1900-P",.     
+00054e90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00054ea0: 2022 7374 7269 6b65 5072 6963 6522 3a20   "strikePrice": 
+00054eb0: 2231 3930 3022 2c0a 2020 2020 2020 2020  "1900",.        
+00054ec0: 2320 2020 2020 2020 2020 2020 2020 2272  #             "r
+00054ed0: 6561 6c53 7472 696b 6550 7269 6365 223a  ealStrikePrice":
+00054ee0: 2022 3136 3635 2e35 3839 3733 3334 222c   "1665.5897334",
+00054ef0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00054f00: 2020 2020 2020 2022 6578 7069 7279 4461         "expiryDa
+00054f10: 7465 223a 2031 3637 3731 3339 3230 3030  te": 16771392000
+00054f20: 3030 2c0a 2020 2020 2020 2020 2320 2020  00,.        #   
+00054f30: 2020 2020 2020 2020 2020 2273 7472 696b            "strik
+00054f40: 6552 6573 756c 7422 3a20 2252 4541 4c49  eResult": "REALI
+00054f50: 5354 4943 5f56 414c 5545 5f53 5452 4943  STIC_VALUE_STRIC
+00054f60: 4b45 4e22 0a20 2020 2020 2020 2023 2020  KEN".        #  
+00054f70: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00054f80: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
+00054f90: 2023 0a20 2020 2020 2020 2073 6574 746c   #.        settl
+00054fa0: 656d 656e 7473 203d 2073 656c 662e 7061  ements = self.pa
+00054fb0: 7273 655f 7365 7474 6c65 6d65 6e74 7328  rse_settlements(
+00054fc0: 7265 7370 6f6e 7365 2c20 6d61 726b 6574  response, market
+00054fd0: 290a 2020 2020 2020 2020 736f 7274 6564  ).        sorted
+00054fe0: 203d 2073 656c 662e 736f 7274 5f62 7928   = self.sort_by(
+00054ff0: 7365 7474 6c65 6d65 6e74 732c 2027 7469  settlements, 'ti
+00055000: 6d65 7374 616d 7027 290a 2020 2020 2020  mestamp').      
+00055010: 2020 7265 7475 726e 2073 656c 662e 6669    return self.fi
+00055020: 6c74 6572 5f62 795f 7379 6d62 6f6c 5f73  lter_by_symbol_s
+00055030: 696e 6365 5f6c 696d 6974 2873 6f72 7465  ince_limit(sorte
+00055040: 642c 2073 796d 626f 6c2c 2073 696e 6365  d, symbol, since
+00055050: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
+00055060: 6620 7061 7273 655f 7365 7474 6c65 6d65  f parse_settleme
+00055070: 6e74 2873 656c 662c 2073 6574 746c 656d  nt(self, settlem
+00055080: 656e 742c 206d 6172 6b65 7429 3a0a 2020  ent, market):.  
+00055090: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000550a0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+000550b0: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
+000550c0: 6c22 3a20 2245 5448 2d32 3330 3232 332d  l": "ETH-230223-
+000550d0: 3139 3030 2d50 222c 0a20 2020 2020 2020  1900-P",.       
+000550e0: 2023 2020 2020 2020 2020 2022 7374 7269   #         "stri
+000550f0: 6b65 5072 6963 6522 3a20 2231 3930 3022  kePrice": "1900"
+00055100: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00055110: 2020 2020 2272 6561 6c53 7472 696b 6550      "realStrikeP
+00055120: 7269 6365 223a 2022 3136 3635 2e35 3839  rice": "1665.589
+00055130: 3733 3334 222c 0a20 2020 2020 2020 2023  7334",.        #
+00055140: 2020 2020 2020 2020 2022 6578 7069 7279           "expiry
+00055150: 4461 7465 223a 2031 3637 3731 3339 3230  Date": 167713920
+00055160: 3030 3030 2c0a 2020 2020 2020 2020 2320  0000,.        # 
+00055170: 2020 2020 2020 2020 2273 7472 696b 6552          "strikeR
+00055180: 6573 756c 7422 3a20 2252 4541 4c49 5354  esult": "REALIST
+00055190: 4943 5f56 414c 5545 5f53 5452 4943 4b45  IC_VALUE_STRICKE
+000551a0: 4e22 0a20 2020 2020 2020 2023 2020 2020  N".        #    
+000551b0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+000551c0: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+000551d0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+000551e0: 6572 2873 6574 746c 656d 656e 742c 2027  er(settlement, '
+000551f0: 6578 7069 7279 4461 7465 2729 0a20 2020  expiryDate').   
+00055200: 2020 2020 206d 6172 6b65 7449 6420 3d20       marketId = 
+00055210: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00055220: 2873 6574 746c 656d 656e 742c 2027 7379  (settlement, 'sy
+00055230: 6d62 6f6c 2729 0a20 2020 2020 2020 2072  mbol').        r
+00055240: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
+00055250: 2020 2020 2769 6e66 6f27 3a20 7365 7474      'info': sett
+00055260: 6c65 6d65 6e74 2c0a 2020 2020 2020 2020  lement,.        
+00055270: 2020 2020 2773 796d 626f 6c27 3a20 7365      'symbol': se
+00055280: 6c66 2e73 6166 655f 7379 6d62 6f6c 286d  lf.safe_symbol(m
+00055290: 6172 6b65 7449 642c 206d 6172 6b65 7429  arketId, market)
+000552a0: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
+000552b0: 7269 6365 273a 2073 656c 662e 7361 6665  rice': self.safe
+000552c0: 5f6e 756d 6265 7228 7365 7474 6c65 6d65  _number(settleme
+000552d0: 6e74 2c20 2772 6561 6c53 7472 696b 6550  nt, 'realStrikeP
+000552e0: 7269 6365 2729 2c0a 2020 2020 2020 2020  rice'),.        
+000552f0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
+00055300: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
+00055310: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
+00055320: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
+00055330: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
+00055340: 2020 2020 207d 0a0a 2020 2020 6465 6620       }..    def 
+00055350: 7061 7273 655f 7365 7474 6c65 6d65 6e74  parse_settlement
+00055360: 7328 7365 6c66 2c20 7365 7474 6c65 6d65  s(self, settleme
+00055370: 6e74 732c 206d 6172 6b65 7429 3a0a 2020  nts, market):.  
+00055380: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00055390: 2320 2020 2020 5b0a 2020 2020 2020 2020  #     [.        
+000553a0: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
+000553b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000553c0: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
+000553d0: 2d32 3330 3232 332d 3139 3030 2d50 222c  -230223-1900-P",
+000553e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000553f0: 2020 2020 2020 2022 7374 7269 6b65 5072         "strikePr
+00055400: 6963 6522 3a20 2231 3930 3022 2c0a 2020  ice": "1900",.  
+00055410: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00055420: 2020 2020 2272 6561 6c53 7472 696b 6550      "realStrikeP
+00055430: 7269 6365 223a 2022 3136 3635 2e35 3839  rice": "1665.589
+00055440: 3733 3334 222c 0a20 2020 2020 2020 2023  7334",.        #
+00055450: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+00055460: 7069 7279 4461 7465 223a 2031 3637 3731  piryDate": 16771
+00055470: 3339 3230 3030 3030 2c0a 2020 2020 2020  39200000,.      
+00055480: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00055490: 2273 7472 696b 6552 6573 756c 7422 3a20  "strikeResult": 
+000554a0: 2245 5854 5249 4e53 4943 5f56 414c 5545  "EXTRINSIC_VALUE
+000554b0: 5f45 5850 4952 4544 220a 2020 2020 2020  _EXPIRED".      
+000554c0: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
+000554d0: 2020 2020 2020 2320 2020 2020 5d0a 2020        #     ].  
+000554e0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000554f0: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
+00055500: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+00055510: 6765 2830 2c20 6c65 6e28 7365 7474 6c65  ge(0, len(settle
+00055520: 6d65 6e74 7329 293a 0a20 2020 2020 2020  ments)):.       
+00055530: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
+00055540: 6e64 2873 656c 662e 7061 7273 655f 7365  nd(self.parse_se
+00055550: 7474 6c65 6d65 6e74 2873 6574 746c 656d  ttlement(settlem
+00055560: 656e 7473 5b69 5d2c 206d 6172 6b65 7429  ents[i], market)
+00055570: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00055580: 2072 6573 756c 740a 0a20 2020 2064 6566   result..    def
+00055590: 2066 6574 6368 5f6c 6564 6765 7228 7365   fetch_ledger(se
+000555a0: 6c66 2c20 636f 6465 3a20 4f70 7469 6f6e  lf, code: Option
+000555b0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
+000555c0: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
+000555d0: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
+000555e0: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
+000555f0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
+00055600: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00055610: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00055620: 7468 6520 6869 7374 6f72 7920 6f66 2063  the history of c
+00055630: 6861 6e67 6573 2c20 6163 7469 6f6e 7320  hanges, actions 
+00055640: 646f 6e65 2062 7920 7468 6520 7573 6572  done by the user
+00055650: 206f 7220 6f70 6572 6174 696f 6e73 2074   or operations t
+00055660: 6861 7420 616c 7465 7265 6420 7468 6520  hat altered the 
+00055670: 6261 6c61 6e63 6520 6f66 2074 6865 2075  balance of the u
+00055680: 7365 720a 2020 2020 2020 2020 7365 6520  ser.        see 
+00055690: 6874 7470 733a 2f2f 6269 6e61 6e63 652d  https://binance-
+000556a0: 646f 6373 2e67 6974 6875 622e 696f 2f61  docs.github.io/a
+000556b0: 7069 646f 6373 2f76 6f70 7469 6f6e 732f  pidocs/voptions/
+000556c0: 656e 2f23 6163 636f 756e 742d 6675 6e64  en/#account-fund
+000556d0: 696e 672d 666c 6f77 2d75 7365 725f 6461  ing-flow-user_da
+000556e0: 7461 0a20 2020 2020 2020 2073 6565 2068  ta.        see h
+000556f0: 7474 7073 3a2f 2f62 696e 616e 6365 2d64  ttps://binance-d
+00055700: 6f63 732e 6769 7468 7562 2e69 6f2f 6170  ocs.github.io/ap
+00055710: 6964 6f63 732f 6675 7475 7265 732f 656e  idocs/futures/en
+00055720: 2f23 6765 742d 696e 636f 6d65 2d68 6973  /#get-income-his
+00055730: 746f 7279 2d75 7365 725f 6461 7461 0a20  tory-user_data. 
+00055740: 2020 2020 2020 2073 6565 2068 7474 7073         see https
+00055750: 3a2f 2f62 696e 616e 6365 2d64 6f63 732e  ://binance-docs.
+00055760: 6769 7468 7562 2e69 6f2f 6170 6964 6f63  github.io/apidoc
+00055770: 732f 6465 6c69 7665 7279 2f65 6e2f 2367  s/delivery/en/#g
+00055780: 6574 2d69 6e63 6f6d 652d 6869 7374 6f72  et-income-histor
+00055790: 792d 7573 6572 5f64 6174 610a 2020 2020  y-user_data.    
+000557a0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
+000557b0: 6f6e 6520 636f 6465 3a20 756e 6966 6965  one code: unifie
+000557c0: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
+000557d0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+000557e0: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
+000557f0: 696d 6573 7461 6d70 2069 6e20 6d73 206f  imestamp in ms o
+00055800: 6620 7468 6520 6561 726c 6965 7374 206c  f the earliest l
+00055810: 6564 6765 7220 656e 7472 790a 2020 2020  edger entry.    
+00055820: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+00055830: 6f6e 6520 6c69 6d69 743a 206d 6178 206e  one limit: max n
+00055840: 756d 6265 7220 6f66 206c 6564 6765 7220  umber of ledger 
+00055850: 656e 7472 7973 2074 6f20 7265 7475 726e  entrys to return
+00055860: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00055870: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+00055880: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00055890: 6563 6966 6963 2074 6f20 7468 6520 6269  ecific to the bi
+000558a0: 6e61 6e63 6520 6170 6920 656e 6470 6f69  nance api endpoi
+000558b0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+000558c0: 726e 7320 6469 6374 3a20 6120 606c 6564  rns dict: a `led
+000558d0: 6765 7220 7374 7275 6374 7572 6520 3c68  ger structure <h
+000558e0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+000558f0: 2e63 6f6d 2f23 2f3f 6964 3d6c 6564 6765  .com/#/?id=ledge
+00055900: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
+00055910: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00055920: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+00055930: 6574 7328 290a 2020 2020 2020 2020 7479  ets().        ty
+00055940: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
+00055950: 2020 7375 6254 7970 6520 3d20 4e6f 6e65    subType = None
+00055960: 0a20 2020 2020 2020 2063 7572 7265 6e63  .        currenc
+00055970: 7920 3d20 4e6f 6e65 0a20 2020 2020 2020  y = None.       
+00055980: 206d 6574 686f 6420 3d20 4e6f 6e65 0a20   method = None. 
+00055990: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+000559a0: 207b 7d0a 2020 2020 2020 2020 7479 7065   {}.        type
+000559b0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+000559c0: 6861 6e64 6c65 5f6d 6172 6b65 745f 7479  handle_market_ty
+000559d0: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
+000559e0: 6574 6368 4c65 6467 6572 272c 204e 6f6e  etchLedger', Non
+000559f0: 652c 2070 6172 616d 7329 0a20 2020 2020  e, params).     
+00055a00: 2020 2073 7562 5479 7065 2c20 7061 7261     subType, para
+00055a10: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+00055a20: 5f73 7562 5f74 7970 655f 616e 645f 7061  _sub_type_and_pa
+00055a30: 7261 6d73 2827 6665 7463 684c 6564 6765  rams('fetchLedge
+00055a40: 7227 2c20 4e6f 6e65 2c20 7061 7261 6d73  r', None, params
+00055a50: 290a 2020 2020 2020 2020 6966 2074 7970  ).        if typ
+00055a60: 6520 3d3d 2027 6f70 7469 6f6e 273a 0a20  e == 'option':. 
+00055a70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00055a80: 6368 6563 6b5f 7265 7175 6972 6564 5f61  check_required_a
+00055a90: 7267 756d 656e 7428 2766 6574 6368 4c65  rgument('fetchLe
+00055aa0: 6467 6572 272c 2063 6f64 652c 2027 636f  dger', code, 'co
+00055ab0: 6465 2729 0a20 2020 2020 2020 2020 2020  de').           
+00055ac0: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+00055ad0: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+00055ae0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00055af0: 6573 745b 2763 7572 7265 6e63 7927 5d20  est['currency'] 
+00055b00: 3d20 6375 7272 656e 6379 5b27 6964 275d  = currency['id']
+00055b10: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+00055b20: 686f 6420 3d20 2765 6170 6950 7269 7661  hod = 'eapiPriva
+00055b30: 7465 4765 7442 696c 6c27 0a20 2020 2020  teGetBill'.     
+00055b40: 2020 2065 6c69 6620 7365 6c66 2e69 735f     elif self.is_
+00055b50: 6c69 6e65 6172 2874 7970 652c 2073 7562  linear(type, sub
+00055b60: 5479 7065 293a 0a20 2020 2020 2020 2020  Type):.         
+00055b70: 2020 206d 6574 686f 6420 3d20 2766 6170     method = 'fap
+00055b80: 6950 7269 7661 7465 4765 7449 6e63 6f6d  iPrivateGetIncom
+00055b90: 6527 0a20 2020 2020 2020 2065 6c69 6620  e'.        elif 
+00055ba0: 7365 6c66 2e69 735f 696e 7665 7273 6528  self.is_inverse(
+00055bb0: 7479 7065 2c20 7375 6254 7970 6529 3a0a  type, subType):.
+00055bc0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00055bd0: 6f64 203d 2027 6461 7069 5072 6976 6174  od = 'dapiPrivat
+00055be0: 6547 6574 496e 636f 6d65 270a 2020 2020  eGetIncome'.    
+00055bf0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00055c00: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
+00055c10: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
+00055c20: 202b 2027 2066 6574 6368 4c65 6467 6572   + ' fetchLedger
+00055c30: 2829 2073 7570 706f 7274 7320 636f 6e74  () supports cont
+00055c40: 7261 6374 2077 616c 6c65 7473 206f 6e6c  ract wallets onl
+00055c50: 7927 290a 2020 2020 2020 2020 6966 2073  y').        if s
+00055c60: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
+00055c70: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00055c80: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
+00055c90: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
+00055ca0: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+00055cb0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00055cc0: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+00055cd0: 6d69 7427 5d20 3d20 6c69 6d69 740a 2020  mit'] = limit.  
+00055ce0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00055cf0: 2067 6574 6174 7472 2873 656c 662c 206d   getattr(self, m
+00055d00: 6574 686f 6429 2873 656c 662e 6578 7465  ethod)(self.exte
+00055d10: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00055d20: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00055d30: 2020 2020 2020 2023 206f 7074 696f 6e73         # options
+00055d40: 2865 6170 6929 0a20 2020 2020 2020 2023  (eapi).        #
+00055d50: 0a20 2020 2020 2020 2023 2020 2020 205b  .        #     [
+00055d60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00055d70: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00055d80: 2020 2020 2020 2020 2020 2022 6964 223a             "id":
+00055d90: 2022 3131 3235 3839 3939 3036 3834 3537   "11258999068457
+00055da0: 3031 3837 3022 2c0a 2020 2020 2020 2020  01870",.        
+00055db0: 2320 2020 2020 2020 2020 2020 2020 2261  #             "a
+00055dc0: 7373 6574 223a 2022 5553 4454 222c 0a20  sset": "USDT",. 
+00055dd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00055de0: 2020 2020 2022 616d 6f75 6e74 223a 2022       "amount": "
+00055df0: 2d30 2e31 3635 3138 3230 3322 2c0a 2020  -0.16518203",.  
+00055e00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00055e10: 2020 2020 2274 7970 6522 3a20 2246 4545      "type": "FEE
+00055e20: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00055e30: 2020 2020 2020 2020 2022 6372 6561 7465           "create
+00055e40: 4461 7465 223a 2031 3637 3636 3231 3034  Date": 167662104
+00055e50: 3234 3839 0a20 2020 2020 2020 2023 2020  2489.        #  
+00055e60: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00055e70: 2023 2020 2020 205d 0a20 2020 2020 2020   #     ].       
+00055e80: 2023 0a20 2020 2020 2020 2023 2066 7574   #.        # fut
+00055e90: 7572 6573 2866 6170 692c 2064 6170 6929  ures(fapi, dapi)
+00055ea0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00055eb0: 2020 2023 2020 2020 205b 0a20 2020 2020     #     [.     
+00055ec0: 2020 2023 2020 2020 2020 2020 207b 0a20     #         {. 
+00055ed0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00055ee0: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+00055ef0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00055f00: 2020 2020 2020 2020 2022 696e 636f 6d65           "income
+00055f10: 5479 7065 223a 2022 5452 414e 5346 4552  Type": "TRANSFER
+00055f20: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00055f30: 2020 2020 2020 2020 2022 696e 636f 6d65           "income
+00055f40: 223a 2022 3130 2e30 3030 3030 3030 3022  ": "10.00000000"
+00055f50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00055f60: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
+00055f70: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+00055f80: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00055f90: 7469 6d65 223a 2031 3637 3736 3435 3235  time": 167764525
+00055fa0: 3030 3030 2c0a 2020 2020 2020 2020 2320  0000,.        # 
+00055fb0: 2020 2020 2020 2020 2020 2020 2269 6e66              "inf
+00055fc0: 6f22 3a20 2254 5241 4e53 4645 5222 2c0a  o": "TRANSFER",.
+00055fd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00055fe0: 2020 2020 2020 2274 7261 6e49 6422 3a20        "tranId": 
+00055ff0: 3133 3130 3031 3537 3330 3832 2c0a 2020  131001573082,.  
+00056000: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00056010: 2020 2020 2274 7261 6465 4964 223a 2022      "tradeId": "
+00056020: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00056030: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+00056040: 2020 2020 5d0a 2020 2020 2020 2020 230a      ].        #.
+00056050: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00056060: 656c 662e 7061 7273 655f 6c65 6467 6572  elf.parse_ledger
+00056070: 2872 6573 706f 6e73 652c 2063 7572 7265  (response, curre
+00056080: 6e63 792c 2073 696e 6365 2c20 6c69 6d69  ncy, since, limi
+00056090: 7429 0a0a 2020 2020 6465 6620 7061 7273  t)..    def pars
+000560a0: 655f 6c65 6467 6572 5f65 6e74 7279 2873  e_ledger_entry(s
+000560b0: 656c 662c 2069 7465 6d2c 2063 7572 7265  elf, item, curre
+000560c0: 6e63 793d 4e6f 6e65 293a 0a20 2020 2020  ncy=None):.     
+000560d0: 2020 2023 0a20 2020 2020 2020 2023 206f     #.        # o
+000560e0: 7074 696f 6e73 2865 6170 6929 0a20 2020  ptions(eapi).   
+000560f0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00056100: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00056110: 2020 2020 2020 2020 2022 6964 223a 2022           "id": "
+00056120: 3131 3235 3839 3939 3036 3834 3537 3031  1125899906845701
+00056130: 3837 3022 2c0a 2020 2020 2020 2020 2320  870",.        # 
+00056140: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
+00056150: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+00056160: 2023 2020 2020 2020 2020 2022 616d 6f75   #         "amou
+00056170: 6e74 223a 2022 2d30 2e31 3635 3138 3230  nt": "-0.1651820
+00056180: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
+00056190: 2020 2020 2020 2274 7970 6522 3a20 2246        "type": "F
+000561a0: 4545 222c 0a20 2020 2020 2020 2023 2020  EE",.        #  
+000561b0: 2020 2020 2020 2022 6372 6561 7465 4461         "createDa
+000561c0: 7465 223a 2031 3637 3636 3231 3034 3234  te": 16766210424
+000561d0: 3839 0a20 2020 2020 2020 2023 2020 2020  89.        #    
+000561e0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+000561f0: 2020 2020 2023 2066 7574 7572 6573 2866       # futures(f
+00056200: 6170 692c 2064 6170 6929 0a20 2020 2020  api, dapi).     
+00056210: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00056220: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00056230: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+00056240: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+00056250: 2020 2020 2020 2022 696e 636f 6d65 5479         "incomeTy
+00056260: 7065 223a 2022 5452 414e 5346 4552 222c  pe": "TRANSFER",
+00056270: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00056280: 2020 2022 696e 636f 6d65 223a 2022 3130     "income": "10
+00056290: 2e30 3030 3030 3030 3022 2c0a 2020 2020  .00000000",.    
+000562a0: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
+000562b0: 7373 6574 223a 2022 5553 4454 222c 0a20  sset": "USDT",. 
+000562c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000562d0: 2022 7469 6d65 223a 2031 3637 3736 3435   "time": 1677645
+000562e0: 3235 3030 3030 2c0a 2020 2020 2020 2020  250000,.        
+000562f0: 2320 2020 2020 2020 2020 2269 6e66 6f22  #         "info"
+00056300: 3a20 2254 5241 4e53 4645 5222 2c0a 2020  : "TRANSFER",.  
+00056310: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00056320: 2274 7261 6e49 6422 3a20 3133 3130 3031  "tranId": 131001
+00056330: 3537 3330 3832 2c0a 2020 2020 2020 2020  573082,.        
+00056340: 2320 2020 2020 2020 2020 2274 7261 6465  #         "trade
+00056350: 4964 223a 2022 220a 2020 2020 2020 2020  Id": "".        
+00056360: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00056370: 230a 2020 2020 2020 2020 616d 6f75 6e74  #.        amount
+00056380: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00056390: 696e 675f 3228 6974 656d 2c20 2761 6d6f  ing_2(item, 'amo
+000563a0: 756e 7427 2c20 2769 6e63 6f6d 6527 290a  unt', 'income').
+000563b0: 2020 2020 2020 2020 6469 7265 6374 696f          directio
+000563c0: 6e20 3d20 4e6f 6e65 0a20 2020 2020 2020  n = None.       
+000563d0: 2069 6620 5072 6563 6973 652e 7374 7269   if Precise.stri
+000563e0: 6e67 5f6c 6528 616d 6f75 6e74 2c20 2730  ng_le(amount, '0
+000563f0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00056400: 6469 7265 6374 696f 6e20 3d20 276f 7574  direction = 'out
+00056410: 270a 2020 2020 2020 2020 2020 2020 616d  '.            am
+00056420: 6f75 6e74 203d 2050 7265 6369 7365 2e73  ount = Precise.s
+00056430: 7472 696e 675f 6d75 6c28 272d 3127 2c20  tring_mul('-1', 
+00056440: 616d 6f75 6e74 290a 2020 2020 2020 2020  amount).        
+00056450: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00056460: 2020 6469 7265 6374 696f 6e20 3d20 2769    direction = 'i
+00056470: 6e27 0a20 2020 2020 2020 2063 7572 7265  n'.        curre
+00056480: 6e63 7949 6420 3d20 7365 6c66 2e73 6166  ncyId = self.saf
+00056490: 655f 7374 7269 6e67 2869 7465 6d2c 2027  e_string(item, '
+000564a0: 6173 7365 7427 290a 2020 2020 2020 2020  asset').        
+000564b0: 7469 6d65 7374 616d 7020 3d20 7365 6c66  timestamp = self
+000564c0: 2e73 6166 655f 696e 7465 6765 725f 3228  .safe_integer_2(
+000564d0: 6974 656d 2c20 2763 7265 6174 6544 6174  item, 'createDat
+000564e0: 6527 2c20 2774 696d 6527 290a 2020 2020  e', 'time').    
+000564f0: 2020 2020 7479 7065 203d 2073 656c 662e      type = self.
+00056500: 7361 6665 5f73 7472 696e 675f 3228 6974  safe_string_2(it
+00056510: 656d 2c20 2774 7970 6527 2c20 2769 6e63  em, 'type', 'inc
+00056520: 6f6d 6554 7970 6527 290a 2020 2020 2020  omeType').      
+00056530: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+00056540: 2020 2020 2020 2027 6964 273a 2073 656c         'id': sel
+00056550: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
+00056560: 6974 656d 2c20 2769 6427 2c20 2774 7261  item, 'id', 'tra
+00056570: 6e49 6427 292c 0a20 2020 2020 2020 2020  nId'),.         
+00056580: 2020 2027 6469 7265 6374 696f 6e27 3a20     'direction': 
+00056590: 6469 7265 6374 696f 6e2c 0a20 2020 2020  direction,.     
+000565a0: 2020 2020 2020 2027 6163 636f 756e 7427         'account'
+000565b0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+000565c0: 2020 2020 2772 6566 6572 656e 6365 4163      'referenceAc
+000565d0: 636f 756e 7427 3a20 4e6f 6e65 2c0a 2020  count': None,.  
+000565e0: 2020 2020 2020 2020 2020 2772 6566 6572            'refer
+000565f0: 656e 6365 4964 273a 2073 656c 662e 7361  enceId': self.sa
+00056600: 6665 5f73 7472 696e 6728 6974 656d 2c20  fe_string(item, 
+00056610: 2774 7261 6465 4964 2729 2c0a 2020 2020  'tradeId'),.    
+00056620: 2020 2020 2020 2020 2774 7970 6527 3a20          'type': 
+00056630: 7365 6c66 2e70 6172 7365 5f6c 6564 6765  self.parse_ledge
+00056640: 725f 656e 7472 795f 7479 7065 2874 7970  r_entry_type(typ
+00056650: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+00056660: 2763 7572 7265 6e63 7927 3a20 7365 6c66  'currency': self
+00056670: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
+00056680: 6f64 6528 6375 7272 656e 6379 4964 2c20  ode(currencyId, 
+00056690: 6375 7272 656e 6379 292c 0a20 2020 2020  currency),.     
+000566a0: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+000566b0: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
+000566c0: 6572 2861 6d6f 756e 7429 2c0a 2020 2020  er(amount),.    
+000566d0: 2020 2020 2020 2020 2774 696d 6573 7461          'timesta
+000566e0: 6d70 273a 2074 696d 6573 7461 6d70 2c0a  mp': timestamp,.
+000566f0: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
+00056700: 6574 696d 6527 3a20 7365 6c66 2e69 736f  etime': self.iso
+00056710: 3836 3031 2874 696d 6573 7461 6d70 292c  8601(timestamp),
+00056720: 0a20 2020 2020 2020 2020 2020 2027 6265  .            'be
+00056730: 666f 7265 273a 204e 6f6e 652c 0a20 2020  fore': None,.   
+00056740: 2020 2020 2020 2020 2027 6166 7465 7227           'after'
+00056750: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00056760: 2020 2020 2773 7461 7475 7327 3a20 4e6f      'status': No
+00056770: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00056780: 2766 6565 273a 204e 6f6e 652c 0a20 2020  'fee': None,.   
+00056790: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+000567a0: 2069 7465 6d2c 0a20 2020 2020 2020 207d   item,.        }
+000567b0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+000567c0: 6c65 6467 6572 5f65 6e74 7279 5f74 7970  ledger_entry_typ
+000567d0: 6528 7365 6c66 2c20 7479 7065 293a 0a20  e(self, type):. 
+000567e0: 2020 2020 2020 206c 6564 6765 7254 7970         ledgerTyp
+000567f0: 6520 3d20 7b0a 2020 2020 2020 2020 2020  e = {.          
+00056800: 2020 2746 4545 273a 2027 6665 6527 2c0a    'FEE': 'fee',.
+00056810: 2020 2020 2020 2020 2020 2020 2746 554e              'FUN
+00056820: 4449 4e47 5f46 4545 273a 2027 6665 6527  DING_FEE': 'fee'
+00056830: 2c0a 2020 2020 2020 2020 2020 2020 274f  ,.            'O
+00056840: 5054 494f 4e53 5f50 5245 4d49 554d 5f46  PTIONS_PREMIUM_F
+00056850: 4545 273a 2027 6665 6527 2c0a 2020 2020  EE': 'fee',.    
+00056860: 2020 2020 2020 2020 2750 4f53 4954 494f          'POSITIO
+00056870: 4e5f 4c49 4d49 545f 494e 4352 4541 5345  N_LIMIT_INCREASE
+00056880: 5f46 4545 273a 2027 6665 6527 2c0a 2020  _FEE': 'fee',.  
+00056890: 2020 2020 2020 2020 2020 2743 4f4e 5452            'CONTR
+000568a0: 4143 5427 3a20 2774 7261 6465 272c 0a20  ACT': 'trade',. 
+000568b0: 2020 2020 2020 2020 2020 2027 5245 414c             'REAL
+000568c0: 495a 4544 5f50 4e4c 273a 2027 7472 6164  IZED_PNL': 'trad
+000568d0: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
+000568e0: 2754 5241 4e53 4645 5227 3a20 2774 7261  'TRANSFER': 'tra
+000568f0: 6e73 6665 7227 2c0a 2020 2020 2020 2020  nsfer',.        
+00056900: 2020 2020 2743 524f 5353 5f43 4f4c 4c41      'CROSS_COLLA
+00056910: 5445 5241 4c5f 5452 414e 5346 4552 273a  TERAL_TRANSFER':
+00056920: 2027 7472 616e 7366 6572 272c 0a20 2020   'transfer',.   
+00056930: 2020 2020 2020 2020 2027 494e 5445 524e           'INTERN
+00056940: 414c 5f54 5241 4e53 4645 5227 3a20 2774  AL_TRANSFER': 't
+00056950: 7261 6e73 6665 7227 2c0a 2020 2020 2020  ransfer',.      
+00056960: 2020 2020 2020 2743 4f49 4e5f 5357 4150        'COIN_SWAP
+00056970: 5f44 4550 4f53 4954 273a 2027 6465 706f  _DEPOSIT': 'depo
+00056980: 7369 7427 2c0a 2020 2020 2020 2020 2020  sit',.          
+00056990: 2020 2743 4f49 4e5f 5357 4150 5f57 4954    'COIN_SWAP_WIT
+000569a0: 4844 5241 5727 3a20 2777 6974 6864 7261  HDRAW': 'withdra
+000569b0: 7761 6c27 2c0a 2020 2020 2020 2020 2020  wal',.          
+000569c0: 2020 274f 5054 494f 4e53 5f53 4554 544c    'OPTIONS_SETTL
+000569d0: 455f 5052 4f46 4954 273a 2027 7365 7474  E_PROFIT': 'sett
+000569e0: 6c65 6d65 6e74 272c 0a20 2020 2020 2020  lement',.       
+000569f0: 2020 2020 2027 4445 4c49 5645 5245 445f       'DELIVERED_
+00056a00: 5345 5454 454c 4d45 4e54 273a 2027 7365  SETTELMENT': 'se
+00056a10: 7474 6c65 6d65 6e74 272c 0a20 2020 2020  ttlement',.     
+00056a20: 2020 2020 2020 2027 5745 4c43 4f4d 455f         'WELCOME_
+00056a30: 424f 4e55 5327 3a20 2763 6173 6862 6163  BONUS': 'cashbac
+00056a40: 6b27 2c0a 2020 2020 2020 2020 2020 2020  k',.            
+00056a50: 2743 4f4e 5445 5354 5f52 4557 4152 4427  'CONTEST_REWARD'
+00056a60: 3a20 2763 6173 6862 6163 6b27 2c0a 2020  : 'cashback',.  
+00056a70: 2020 2020 2020 2020 2020 2743 4f4d 4d49            'COMMI
+00056a80: 5353 494f 4e5f 5245 4241 5445 273a 2027  SSION_REBATE': '
+00056a90: 7265 6261 7465 272c 0a20 2020 2020 2020  rebate',.       
+00056aa0: 2020 2020 2027 4150 495f 5245 4241 5445       'API_REBATE
+00056ab0: 273a 2027 7265 6261 7465 272c 0a20 2020  ': 'rebate',.   
+00056ac0: 2020 2020 2020 2020 2027 5245 4645 5252           'REFERR
+00056ad0: 414c 5f4b 4943 4b42 4143 4b27 3a20 2772  AL_KICKBACK': 'r
+00056ae0: 6566 6572 7261 6c27 2c0a 2020 2020 2020  eferral',.      
+00056af0: 2020 2020 2020 2743 4f4d 4d49 5353 494f        'COMMISSIO
+00056b00: 4e27 3a20 2763 6f6d 6d69 7373 696f 6e27  N': 'commission'
+00056b10: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00056b20: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00056b30: 7361 6665 5f73 7472 696e 6728 6c65 6467  safe_string(ledg
+00056b40: 6572 5479 7065 2c20 7479 7065 2c20 7479  erType, type, ty
+00056b50: 7065 290a 0a20 2020 2064 6566 2073 6967  pe)..    def sig
+00056b60: 6e28 7365 6c66 2c20 7061 7468 2c20 6170  n(self, path, ap
+00056b70: 693d 2770 7562 6c69 6327 2c20 6d65 7468  i='public', meth
+00056b80: 6f64 3d27 4745 5427 2c20 7061 7261 6d73  od='GET', params
+00056b90: 3d7b 7d2c 2068 6561 6465 7273 3d4e 6f6e  ={}, headers=Non
+00056ba0: 652c 2062 6f64 793d 4e6f 6e65 293a 0a20  e, body=None):. 
+00056bb0: 2020 2020 2020 2075 726c 7320 3d20 7365         urls = se
+00056bc0: 6c66 2e75 726c 730a 2020 2020 2020 2020  lf.urls.        
+00056bd0: 6966 206e 6f74 2028 6170 6920 696e 2075  if not (api in u
+00056be0: 726c 735b 2761 7069 275d 293a 0a20 2020  rls['api']):.   
+00056bf0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+00056c00: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+00056c10: 2e69 6420 2b20 2720 646f 6573 206e 6f74  .id + ' does not
+00056c20: 2068 6176 6520 6120 7465 7374 6e65 742f   have a testnet/
+00056c30: 7361 6e64 626f 7820 5552 4c20 666f 7220  sandbox URL for 
+00056c40: 2720 2b20 6170 6920 2b20 2720 656e 6470  ' + api + ' endp
+00056c50: 6f69 6e74 7327 290a 2020 2020 2020 2020  oints').        
+00056c60: 7572 6c20 3d20 7365 6c66 2e75 726c 735b  url = self.urls[
+00056c70: 2761 7069 275d 5b61 7069 5d0a 2020 2020  'api'][api].    
+00056c80: 2020 2020 7572 6c20 2b3d 2027 2f27 202b      url += '/' +
+00056c90: 2070 6174 680a 2020 2020 2020 2020 6966   path.        if
+00056ca0: 2061 7069 203d 3d20 2777 6170 6927 3a0a   api == 'wapi':.
+00056cb0: 2020 2020 2020 2020 2020 2020 7572 6c20              url 
+00056cc0: 2b3d 2027 2e68 746d 6c27 0a20 2020 2020  += '.html'.     
+00056cd0: 2020 2069 6620 7061 7468 203d 3d20 2768     if path == 'h
+00056ce0: 6973 746f 7269 6361 6c54 7261 6465 7327  istoricalTrades'
+00056cf0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00056d00: 2073 656c 662e 6170 694b 6579 3a0a 2020   self.apiKey:.  
+00056d10: 2020 2020 2020 2020 2020 2020 2020 6865                he
+00056d20: 6164 6572 7320 3d20 7b0a 2020 2020 2020  aders = {.      
+00056d30: 2020 2020 2020 2020 2020 2020 2020 2758                'X
+00056d40: 2d4d 4258 2d41 5049 4b45 5927 3a20 7365  -MBX-APIKEY': se
+00056d50: 6c66 2e61 7069 4b65 792c 0a20 2020 2020  lf.apiKey,.     
+00056d60: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00056d70: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00056d80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00056d90: 6169 7365 2041 7574 6865 6e74 6963 6174  aise Authenticat
+00056da0: 696f 6e45 7272 6f72 2873 656c 662e 6964  ionError(self.id
+00056db0: 202b 2027 2068 6973 746f 7269 6361 6c54   + ' historicalT
+00056dc0: 7261 6465 7320 656e 6470 6f69 6e74 2072  rades endpoint r
+00056dd0: 6571 7569 7265 7320 6061 7069 4b65 7960  equires `apiKey`
+00056de0: 2063 7265 6465 6e74 6961 6c27 290a 2020   credential').  
+00056df0: 2020 2020 2020 7573 6572 4461 7461 5374        userDataSt
+00056e00: 7265 616d 203d 2028 7061 7468 203d 3d20  ream = (path == 
+00056e10: 2775 7365 7244 6174 6153 7472 6561 6d27  'userDataStream'
+00056e20: 2920 6f72 2028 7061 7468 203d 3d20 276c  ) or (path == 'l
+00056e30: 6973 7465 6e4b 6579 2729 0a20 2020 2020  istenKey').     
+00056e40: 2020 2069 6620 7573 6572 4461 7461 5374     if userDataSt
+00056e50: 7265 616d 3a0a 2020 2020 2020 2020 2020  ream:.          
+00056e60: 2020 6966 2073 656c 662e 6170 694b 6579    if self.apiKey
+00056e70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00056e80: 2020 2320 7631 2073 7065 6369 616c 2063    # v1 special c
+00056e90: 6173 6520 666f 7220 7573 6572 4461 7461  ase for userData
+00056ea0: 5374 7265 616d 0a20 2020 2020 2020 2020  Stream.         
+00056eb0: 2020 2020 2020 2068 6561 6465 7273 203d         headers =
+00056ec0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00056ed0: 2020 2020 2020 2027 582d 4d42 582d 4150         'X-MBX-AP
+00056ee0: 494b 4559 273a 2073 656c 662e 6170 694b  IKEY': self.apiK
+00056ef0: 6579 2c0a 2020 2020 2020 2020 2020 2020  ey,.            
+00056f00: 2020 2020 2020 2020 2743 6f6e 7465 6e74          'Content
+00056f10: 2d54 7970 6527 3a20 2761 7070 6c69 6361  -Type': 'applica
+00056f20: 7469 6f6e 2f78 2d77 7777 2d66 6f72 6d2d  tion/x-www-form-
+00056f30: 7572 6c65 6e63 6f64 6564 272c 0a20 2020  urlencoded',.   
+00056f40: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00056f50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00056f60: 6620 6d65 7468 6f64 2021 3d20 2747 4554  f method != 'GET
+00056f70: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00056f80: 2020 2020 2020 2062 6f64 7920 3d20 7365         body = se
+00056f90: 6c66 2e75 726c 656e 636f 6465 2870 6172  lf.urlencode(par
+00056fa0: 616d 7329 0a20 2020 2020 2020 2020 2020  ams).           
+00056fb0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00056fc0: 2020 2020 2020 2072 6169 7365 2041 7574         raise Aut
+00056fd0: 6865 6e74 6963 6174 696f 6e45 7272 6f72  henticationError
+00056fe0: 2873 656c 662e 6964 202b 2027 2075 7365  (self.id + ' use
+00056ff0: 7244 6174 6153 7472 6561 6d20 656e 6470  rDataStream endp
+00057000: 6f69 6e74 2072 6571 7569 7265 7320 6061  oint requires `a
+00057010: 7069 4b65 7960 2063 7265 6465 6e74 6961  piKey` credentia
+00057020: 6c27 290a 2020 2020 2020 2020 656c 6966  l').        elif
+00057030: 2028 6170 6920 3d3d 2027 7072 6976 6174   (api == 'privat
+00057040: 6527 2920 6f72 2028 6170 6920 3d3d 2027  e') or (api == '
+00057050: 6561 7069 5072 6976 6174 6527 2920 6f72  eapiPrivate') or
+00057060: 2028 6170 6920 3d3d 2027 7361 7069 2720   (api == 'sapi' 
+00057070: 616e 6420 7061 7468 2021 3d20 2773 7973  and path != 'sys
+00057080: 7465 6d2f 7374 6174 7573 2729 206f 7220  tem/status') or 
+00057090: 2861 7069 203d 3d20 2773 6170 6956 3227  (api == 'sapiV2'
+000570a0: 2920 6f72 2028 6170 6920 3d3d 2027 7361  ) or (api == 'sa
+000570b0: 7069 5633 2729 206f 7220 2861 7069 203d  piV3') or (api =
+000570c0: 3d20 2773 6170 6956 3427 2920 6f72 2028  = 'sapiV4') or (
+000570d0: 6170 6920 3d3d 2027 7761 7069 2720 616e  api == 'wapi' an
+000570e0: 6420 7061 7468 2021 3d20 2773 7973 7465  d path != 'syste
+000570f0: 6d53 7461 7475 7327 2920 6f72 2028 6170  mStatus') or (ap
+00057100: 6920 3d3d 2027 6461 7069 5072 6976 6174  i == 'dapiPrivat
+00057110: 6527 2920 6f72 2028 6170 6920 3d3d 2027  e') or (api == '
+00057120: 6461 7069 5072 6976 6174 6556 3227 2920  dapiPrivateV2') 
+00057130: 6f72 2028 6170 6920 3d3d 2027 6661 7069  or (api == 'fapi
+00057140: 5072 6976 6174 6527 2920 6f72 2028 6170  Private') or (ap
+00057150: 6920 3d3d 2027 6661 7069 5072 6976 6174  i == 'fapiPrivat
+00057160: 6556 3227 293a 0a20 2020 2020 2020 2020  eV2'):.         
+00057170: 2020 2073 656c 662e 6368 6563 6b5f 7265     self.check_re
+00057180: 7175 6972 6564 5f63 7265 6465 6e74 6961  quired_credentia
+00057190: 6c73 2829 0a20 2020 2020 2020 2020 2020  ls().           
+000571a0: 2071 7565 7279 203d 204e 6f6e 650a 2020   query = None.  
+000571b0: 2020 2020 2020 2020 2020 6465 6661 756c            defaul
+000571c0: 7452 6563 7657 696e 646f 7720 3d20 7365  tRecvWindow = se
+000571d0: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
+000571e0: 7365 6c66 2e6f 7074 696f 6e73 2c20 2772  self.options, 'r
+000571f0: 6563 7657 696e 646f 7727 290a 2020 2020  ecvWindow').    
+00057200: 2020 2020 2020 2020 6578 7465 6e64 6564          extended
+00057210: 5061 7261 6d73 203d 2073 656c 662e 6578  Params = self.ex
+00057220: 7465 6e64 287b 0a20 2020 2020 2020 2020  tend({.         
+00057230: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
+00057240: 7027 3a20 7365 6c66 2e6e 6f6e 6365 2829  p': self.nonce()
+00057250: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+00057260: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+00057270: 2020 2020 2069 6620 6465 6661 756c 7452       if defaultR
+00057280: 6563 7657 696e 646f 7720 6973 206e 6f74  ecvWindow is not
+00057290: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000572a0: 2020 2020 2020 2065 7874 656e 6465 6450         extendedP
+000572b0: 6172 616d 735b 2772 6563 7657 696e 646f  arams['recvWindo
+000572c0: 7727 5d20 3d20 6465 6661 756c 7452 6563  w'] = defaultRec
+000572d0: 7657 696e 646f 770a 2020 2020 2020 2020  vWindow.        
+000572e0: 2020 2020 7265 6376 5769 6e64 6f77 203d      recvWindow =
+000572f0: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+00057300: 6572 2870 6172 616d 732c 2027 7265 6376  er(params, 'recv
+00057310: 5769 6e64 6f77 2729 0a20 2020 2020 2020  Window').       
+00057320: 2020 2020 2069 6620 7265 6376 5769 6e64       if recvWind
+00057330: 6f77 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ow is not None:.
+00057340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057350: 6578 7465 6e64 6564 5061 7261 6d73 5b27  extendedParams['
+00057360: 7265 6376 5769 6e64 6f77 275d 203d 2072  recvWindow'] = r
+00057370: 6563 7657 696e 646f 770a 2020 2020 2020  ecvWindow.      
+00057380: 2020 2020 2020 6966 2028 6170 6920 3d3d        if (api ==
+00057390: 2027 7361 7069 2729 2061 6e64 2028 7061   'sapi') and (pa
+000573a0: 7468 203d 3d20 2761 7373 6574 2f64 7573  th == 'asset/dus
+000573b0: 7427 293a 0a20 2020 2020 2020 2020 2020  t'):.           
+000573c0: 2020 2020 2071 7565 7279 203d 2073 656c       query = sel
+000573d0: 662e 7572 6c65 6e63 6f64 655f 7769 7468  f.urlencode_with
+000573e0: 5f61 7272 6179 5f72 6570 6561 7428 6578  _array_repeat(ex
+000573f0: 7465 6e64 6564 5061 7261 6d73 290a 2020  tendedParams).  
+00057400: 2020 2020 2020 2020 2020 656c 6966 2028            elif (
+00057410: 7061 7468 203d 3d20 2762 6174 6368 4f72  path == 'batchOr
+00057420: 6465 7273 2729 206f 7220 2870 6174 682e  ders') or (path.
+00057430: 6669 6e64 2827 7375 622d 6163 636f 756e  find('sub-accoun
+00057440: 7427 2920 3e3d 2030 2920 6f72 2028 7061  t') >= 0) or (pa
+00057450: 7468 203d 3d20 2763 6170 6974 616c 2f77  th == 'capital/w
+00057460: 6974 6864 7261 772f 6170 706c 7927 2920  ithdraw/apply') 
+00057470: 6f72 2028 7061 7468 2e66 696e 6428 2773  or (path.find('s
+00057480: 7461 6b69 6e67 2729 203e 3d20 3029 3a0a  taking') >= 0):.
+00057490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000574a0: 7175 6572 7920 3d20 7365 6c66 2e72 6177  query = self.raw
+000574b0: 656e 636f 6465 2865 7874 656e 6465 6450  encode(extendedP
+000574c0: 6172 616d 7329 0a20 2020 2020 2020 2020  arams).         
+000574d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000574e0: 2020 2020 2020 2020 2071 7565 7279 203d           query =
+000574f0: 2073 656c 662e 7572 6c65 6e63 6f64 6528   self.urlencode(
+00057500: 6578 7465 6e64 6564 5061 7261 6d73 290a  extendedParams).
+00057510: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00057520: 6174 7572 6520 3d20 4e6f 6e65 0a20 2020  ature = None.   
+00057530: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00057540: 2e73 6563 7265 742e 6669 6e64 2827 5052  .secret.find('PR
+00057550: 4956 4154 4520 4b45 5927 2920 3e20 2d31  IVATE KEY') > -1
+00057560: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00057570: 2020 7369 676e 6174 7572 6520 3d20 7365    signature = se
+00057580: 6c66 2e65 6e63 6f64 655f 7572 695f 636f  lf.encode_uri_co
+00057590: 6d70 6f6e 656e 7428 7365 6c66 2e72 7361  mponent(self.rsa
+000575a0: 2871 7565 7279 2c20 7365 6c66 2e73 6563  (query, self.sec
+000575b0: 7265 742c 2027 7368 6132 3536 2729 290a  ret, 'sha256')).
+000575c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000575d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000575e0: 2020 7369 676e 6174 7572 6520 3d20 7365    signature = se
+000575f0: 6c66 2e68 6d61 6328 7365 6c66 2e65 6e63  lf.hmac(self.enc
+00057600: 6f64 6528 7175 6572 7929 2c20 7365 6c66  ode(query), self
+00057610: 2e65 6e63 6f64 6528 7365 6c66 2e73 6563  .encode(self.sec
+00057620: 7265 7429 2c20 6861 7368 6c69 622e 7368  ret), hashlib.sh
+00057630: 6132 3536 290a 2020 2020 2020 2020 2020  a256).          
+00057640: 2020 7175 6572 7920 2b3d 2027 2627 202b    query += '&' +
+00057650: 2027 7369 676e 6174 7572 653d 2720 2b20   'signature=' + 
+00057660: 7369 676e 6174 7572 650a 2020 2020 2020  signature.      
+00057670: 2020 2020 2020 6865 6164 6572 7320 3d20        headers = 
+00057680: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00057690: 2020 2758 2d4d 4258 2d41 5049 4b45 5927    'X-MBX-APIKEY'
+000576a0: 3a20 7365 6c66 2e61 7069 4b65 792c 0a20  : self.apiKey,. 
+000576b0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+000576c0: 2020 2020 2020 2020 2069 6620 286d 6574           if (met
+000576d0: 686f 6420 3d3d 2027 4745 5427 2920 6f72  hod == 'GET') or
+000576e0: 2028 6d65 7468 6f64 203d 3d20 2744 454c   (method == 'DEL
+000576f0: 4554 4527 2920 6f72 2028 6170 6920 3d3d  ETE') or (api ==
+00057700: 2027 7761 7069 2729 3a0a 2020 2020 2020   'wapi'):.      
+00057710: 2020 2020 2020 2020 2020 7572 6c20 2b3d            url +=
+00057720: 2027 3f27 202b 2071 7565 7279 0a20 2020   '?' + query.   
+00057730: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00057740: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00057750: 6f64 7920 3d20 7175 6572 790a 2020 2020  ody = query.    
+00057760: 2020 2020 2020 2020 2020 2020 6865 6164              head
+00057770: 6572 735b 2743 6f6e 7465 6e74 2d54 7970  ers['Content-Typ
+00057780: 6527 5d20 3d20 2761 7070 6c69 6361 7469  e'] = 'applicati
+00057790: 6f6e 2f78 2d77 7777 2d66 6f72 6d2d 7572  on/x-www-form-ur
+000577a0: 6c65 6e63 6f64 6564 270a 2020 2020 2020  lencoded'.      
+000577b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000577c0: 2020 2020 6966 2070 6172 616d 733a 0a20      if params:. 
+000577d0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+000577e0: 726c 202b 3d20 273f 2720 2b20 7365 6c66  rl += '?' + self
+000577f0: 2e75 726c 656e 636f 6465 2870 6172 616d  .urlencode(param
+00057800: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
+00057810: 6e20 7b27 7572 6c27 3a20 7572 6c2c 2027  n {'url': url, '
+00057820: 6d65 7468 6f64 273a 206d 6574 686f 642c  method': method,
+00057830: 2027 626f 6479 273a 2062 6f64 792c 2027   'body': body, '
+00057840: 6865 6164 6572 7327 3a20 6865 6164 6572  headers': header
+00057850: 737d 0a0a 2020 2020 6465 6620 6861 6e64  s}..    def hand
+00057860: 6c65 5f65 7272 6f72 7328 7365 6c66 2c20  le_errors(self, 
+00057870: 636f 6465 2c20 7265 6173 6f6e 2c20 7572  code, reason, ur
+00057880: 6c2c 206d 6574 686f 642c 2068 6561 6465  l, method, heade
+00057890: 7273 2c20 626f 6479 2c20 7265 7370 6f6e  rs, body, respon
+000578a0: 7365 2c20 7265 7175 6573 7448 6561 6465  se, requestHeade
+000578b0: 7273 2c20 7265 7175 6573 7442 6f64 7929  rs, requestBody)
+000578c0: 3a0a 2020 2020 2020 2020 6966 2028 636f  :.        if (co
+000578d0: 6465 203d 3d20 3431 3829 206f 7220 2863  de == 418) or (c
+000578e0: 6f64 6520 3d3d 2034 3239 293a 0a20 2020  ode == 429):.   
+000578f0: 2020 2020 2020 2020 2072 6169 7365 2044           raise D
+00057900: 446f 5350 726f 7465 6374 696f 6e28 7365  DoSProtection(se
+00057910: 6c66 2e69 6420 2b20 2720 2720 2b20 7374  lf.id + ' ' + st
+00057920: 7228 636f 6465 2920 2b20 2720 2720 2b20  r(code) + ' ' + 
+00057930: 7265 6173 6f6e 202b 2027 2027 202b 2062  reason + ' ' + b
+00057940: 6f64 7929 0a20 2020 2020 2020 2023 2065  ody).        # e
+00057950: 7272 6f72 2072 6573 706f 6e73 6520 696e  rror response in
+00057960: 2061 2066 6f72 6d3a 207b 2263 6f64 6522   a form: {"code"
+00057970: 3a20 2d31 3031 332c 2022 6d73 6722 3a20  : -1013, "msg": 
+00057980: 2249 6e76 616c 6964 2071 7561 6e74 6974  "Invalid quantit
+00057990: 792e 227d 0a20 2020 2020 2020 2023 2066  y."}.        # f
+000579a0: 6f6c 6c6f 7769 6e67 2062 6c6f 636b 2063  ollowing block c
+000579b0: 6f69 6e74 6169 6e73 206c 6567 6163 7920  ointains legacy 
+000579c0: 6368 6563 6b73 2061 6761 696e 7374 206d  checks against m
+000579d0: 6573 7361 6765 2070 6174 7465 726e 7320  essage patterns 
+000579e0: 696e 2022 6d73 6722 2070 726f 7065 7274  in "msg" propert
+000579f0: 790a 2020 2020 2020 2020 2320 7769 6c6c  y.        # will
+00057a00: 2073 7769 7463 6820 2263 6f64 6522 2063   switch "code" c
+00057a10: 6865 636b 7320 6576 656e 7475 616c 6c79  hecks eventually
+00057a20: 2c20 7768 656e 2077 6520 6b6e 6f77 2061  , when we know a
+00057a30: 6c6c 206f 6620 7468 656d 0a20 2020 2020  ll of them.     
+00057a40: 2020 2069 6620 636f 6465 203e 3d20 3430     if code >= 40
+00057a50: 303a 0a20 2020 2020 2020 2020 2020 2069  0:.            i
+00057a60: 6620 626f 6479 2e66 696e 6428 2750 7269  f body.find('Pri
+00057a70: 6365 202a 2051 5459 2069 7320 7a65 726f  ce * QTY is zero
+00057a80: 206f 7220 6c65 7373 2729 203e 3d20 303a   or less') >= 0:
+00057a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00057aa0: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
+00057ab0: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
+00057ac0: 6f72 6465 7220 636f 7374 203d 2061 6d6f  order cost = amo
+00057ad0: 756e 7420 2a20 7072 6963 6520 6973 207a  unt * price is z
+00057ae0: 6572 6f20 6f72 206c 6573 7320 2720 2b20  ero or less ' + 
+00057af0: 626f 6479 290a 2020 2020 2020 2020 2020  body).          
+00057b00: 2020 6966 2062 6f64 792e 6669 6e64 2827    if body.find('
+00057b10: 4c4f 545f 5349 5a45 2729 203e 3d20 303a  LOT_SIZE') >= 0:
+00057b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00057b30: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
+00057b40: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
+00057b50: 6f72 6465 7220 616d 6f75 6e74 2073 686f  order amount sho
+00057b60: 756c 6420 6265 2065 7665 6e6c 7920 6469  uld be evenly di
+00057b70: 7669 7369 626c 6520 6279 206c 6f74 2073  visible by lot s
+00057b80: 697a 6520 2720 2b20 626f 6479 290a 2020  ize ' + body).  
+00057b90: 2020 2020 2020 2020 2020 6966 2062 6f64            if bod
+00057ba0: 792e 6669 6e64 2827 5052 4943 455f 4649  y.find('PRICE_FI
+00057bb0: 4c54 4552 2729 203e 3d20 303a 0a20 2020  LTER') >= 0:.   
+00057bc0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00057bd0: 7365 2049 6e76 616c 6964 4f72 6465 7228  se InvalidOrder(
+00057be0: 7365 6c66 2e69 6420 2b20 2720 6f72 6465  self.id + ' orde
+00057bf0: 7220 7072 6963 6520 6973 2069 6e76 616c  r price is inval
+00057c00: 6964 2c20 692e 652e 2065 7863 6565 6473  id, i.e. exceeds
+00057c10: 2061 6c6c 6f77 6564 2070 7269 6365 2070   allowed price p
+00057c20: 7265 6369 7369 6f6e 2c20 6578 6365 6564  recision, exceed
+00057c30: 7320 6d69 6e20 7072 6963 6520 6f72 206d  s min price or m
+00057c40: 6178 2070 7269 6365 206c 696d 6974 7320  ax price limits 
+00057c50: 6f72 2069 7320 696e 7661 6c69 6420 7661  or is invalid va
+00057c60: 6c75 6520 696e 2067 656e 6572 616c 2c20  lue in general, 
+00057c70: 7573 6520 7365 6c66 2e70 7269 6365 5f74  use self.price_t
+00057c80: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+00057c90: 6f6c 2c20 616d 6f75 6e74 2920 2720 2b20  ol, amount) ' + 
+00057ca0: 626f 6479 290a 2020 2020 2020 2020 6966  body).        if
+00057cb0: 2072 6573 706f 6e73 6520 6973 204e 6f6e   response is Non
+00057cc0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00057cd0: 6574 7572 6e20 4e6f 6e65 2020 2320 6661  eturn None  # fa
+00057ce0: 6c6c 6261 636b 2074 6f20 6465 6661 756c  llback to defaul
+00057cf0: 7420 6572 726f 7220 6861 6e64 6c65 720a  t error handler.
+00057d00: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+00057d10: 7375 6363 6573 7320 7661 6c75 6520 666f  success value fo
+00057d20: 7220 7761 7069 2065 6e64 706f 696e 7473  r wapi endpoints
+00057d30: 0a20 2020 2020 2020 2023 2072 6573 706f  .        # respo
+00057d40: 6e73 6520 696e 2066 6f72 6d61 7420 7b27  nse in format {'
+00057d50: 6d73 6727 3a20 2754 6865 2063 6f69 6e20  msg': 'The coin 
+00057d60: 646f 6573 206e 6f74 2065 7869 7374 2e27  does not exist.'
+00057d70: 2c20 2773 7563 6365 7373 273a 2054 7275  , 'success': Tru
+00057d80: 652f 6661 6c73 657d 0a20 2020 2020 2020  e/false}.       
+00057d90: 2073 7563 6365 7373 203d 2073 656c 662e   success = self.
+00057da0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
+00057db0: 6e73 652c 2027 7375 6363 6573 7327 2c20  nse, 'success', 
+00057dc0: 5472 7565 290a 2020 2020 2020 2020 6966  True).        if
+00057dd0: 206e 6f74 2073 7563 6365 7373 3a0a 2020   not success:.  
+00057de0: 2020 2020 2020 2020 2020 6d65 7373 6167            messag
+00057df0: 654e 6577 203d 2073 656c 662e 7361 6665  eNew = self.safe
+00057e00: 5f73 7472 696e 6728 7265 7370 6f6e 7365  _string(response
+00057e10: 2c20 276d 7367 2729 0a20 2020 2020 2020  , 'msg').       
+00057e20: 2020 2020 2070 6172 7365 644d 6573 7361       parsedMessa
+00057e30: 6765 203d 204e 6f6e 650a 2020 2020 2020  ge = None.      
+00057e40: 2020 2020 2020 6966 206d 6573 7361 6765        if message
+00057e50: 4e65 7720 6973 206e 6f74 204e 6f6e 653a  New is not None:
+00057e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00057e70: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00057e80: 2020 2020 2020 2020 2020 7061 7273 6564            parsed
+00057e90: 4d65 7373 6167 6520 3d20 6a73 6f6e 2e6c  Message = json.l
+00057ea0: 6f61 6473 286d 6573 7361 6765 4e65 7729  oads(messageNew)
+00057eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00057ec0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00057ed0: 6e20 6173 2065 3a0a 2020 2020 2020 2020  n as e:.        
+00057ee0: 2020 2020 2020 2020 2020 2020 2320 646f              # do
+00057ef0: 206e 6f74 6869 6e67 0a20 2020 2020 2020   nothing.       
+00057f00: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00057f10: 7365 644d 6573 7361 6765 203d 204e 6f6e  sedMessage = Non
+00057f20: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00057f30: 2020 6966 2070 6172 7365 644d 6573 7361    if parsedMessa
+00057f40: 6765 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ge is not None:.
+00057f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057f60: 2020 2020 7265 7370 6f6e 7365 203d 2070      response = p
+00057f70: 6172 7365 644d 6573 7361 6765 0a20 2020  arsedMessage.   
+00057f80: 2020 2020 206d 6573 7361 6765 203d 2073       message = s
+00057f90: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00057fa0: 7265 7370 6f6e 7365 2c20 276d 7367 2729  response, 'msg')
+00057fb0: 0a20 2020 2020 2020 2069 6620 6d65 7373  .        if mess
+00057fc0: 6167 6520 6973 206e 6f74 204e 6f6e 653a  age is not None:
+00057fd0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00057fe0: 662e 7468 726f 775f 6578 6163 746c 795f  f.throw_exactly_
+00057ff0: 6d61 7463 6865 645f 6578 6365 7074 696f  matched_exceptio
+00058000: 6e28 7365 6c66 2e65 7863 6570 7469 6f6e  n(self.exception
+00058010: 735b 2765 7861 6374 275d 2c20 6d65 7373  s['exact'], mess
+00058020: 6167 652c 2073 656c 662e 6964 202b 2027  age, self.id + '
+00058030: 2027 202b 206d 6573 7361 6765 290a 2020   ' + message).  
+00058040: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+00058050: 6872 6f77 5f62 726f 6164 6c79 5f6d 6174  hrow_broadly_mat
+00058060: 6368 6564 5f65 7863 6570 7469 6f6e 2873  ched_exception(s
+00058070: 656c 662e 6578 6365 7074 696f 6e73 5b27  elf.exceptions['
+00058080: 6272 6f61 6427 5d2c 206d 6573 7361 6765  broad'], message
+00058090: 2c20 7365 6c66 2e69 6420 2b20 2720 2720  , self.id + ' ' 
+000580a0: 2b20 6d65 7373 6167 6529 0a20 2020 2020  + message).     
+000580b0: 2020 2023 2063 6865 636b 7320 6167 6169     # checks agai
+000580c0: 6e73 7420 6572 726f 7220 636f 6465 730a  nst error codes.
+000580d0: 2020 2020 2020 2020 6572 726f 7220 3d20          error = 
+000580e0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000580f0: 2872 6573 706f 6e73 652c 2027 636f 6465  (response, 'code
+00058100: 2729 0a20 2020 2020 2020 2069 6620 6572  ').        if er
+00058110: 726f 7220 6973 206e 6f74 204e 6f6e 653a  ror is not None:
+00058120: 0a20 2020 2020 2020 2020 2020 2023 2068  .            # h
+00058130: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00058140: 6d2f 6363 7874 2f63 6378 742f 6973 7375  m/ccxt/ccxt/issu
+00058150: 6573 2f36 3530 310a 2020 2020 2020 2020  es/6501.        
+00058160: 2020 2020 2320 6874 7470 733a 2f2f 6769      # https://gi
+00058170: 7468 7562 2e63 6f6d 2f63 6378 742f 6363  thub.com/ccxt/cc
+00058180: 7874 2f69 7373 7565 732f 3737 3432 0a20  xt/issues/7742. 
+00058190: 2020 2020 2020 2020 2020 2069 6620 2865             if (e
+000581a0: 7272 6f72 203d 3d20 2732 3030 2729 206f  rror == '200') o
+000581b0: 7220 5072 6563 6973 652e 7374 7269 6e67  r Precise.string
+000581c0: 5f65 7175 616c 7328 6572 726f 722c 2027  _equals(error, '
+000581d0: 3027 293a 0a20 2020 2020 2020 2020 2020  0'):.           
+000581e0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+000581f0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
+00058200: 2077 6f72 6b61 726f 756e 6420 666f 7220   workaround for 
+00058210: 7b22 636f 6465 223a 2d32 3031 352c 226d  {"code":-2015,"m
+00058220: 7367 223a 2249 6e76 616c 6964 2041 5049  sg":"Invalid API
+00058230: 2d6b 6579 2c20 4950 2c20 6f72 2070 6572  -key, IP, or per
+00058240: 6d69 7373 696f 6e73 2066 6f72 2061 6374  missions for act
+00058250: 696f 6e2e 227d 0a20 2020 2020 2020 2020  ion."}.         
+00058260: 2020 2023 2064 6573 7069 7465 2074 6861     # despite tha
+00058270: 7420 7468 6569 7220 6d65 7373 6167 6520  t their message 
+00058280: 6973 2076 6572 7920 636f 6e66 7573 696e  is very confusin
+00058290: 672c 2069 7420 6973 2072 6169 7365 6420  g, it is raised 
+000582a0: 6279 2042 696e 616e 6365 0a20 2020 2020  by Binance.     
+000582b0: 2020 2020 2020 2023 206f 6e20 6120 7465         # on a te
+000582c0: 6d70 6f72 6172 7920 6261 6e2c 2074 6865  mporary ban, the
+000582d0: 2041 5049 206b 6579 2069 7320 7661 6c69   API key is vali
+000582e0: 642c 2062 7574 2064 6973 6162 6c65 6420  d, but disabled 
+000582f0: 666f 7220 6120 7768 696c 650a 2020 2020  for a while.    
+00058300: 2020 2020 2020 2020 6966 2028 6572 726f          if (erro
+00058310: 7220 3d3d 2027 2d32 3031 3527 2920 616e  r == '-2015') an
+00058320: 6420 7365 6c66 2e6f 7074 696f 6e73 5b27  d self.options['
+00058330: 6861 7341 6c72 6561 6479 4175 7468 656e  hasAlreadyAuthen
+00058340: 7469 6361 7465 6453 7563 6365 7373 6675  ticatedSuccessfu
+00058350: 6c6c 7927 5d3a 0a20 2020 2020 2020 2020  lly']:.         
+00058360: 2020 2020 2020 2072 6169 7365 2044 446f         raise DDo
+00058370: 5350 726f 7465 6374 696f 6e28 7365 6c66  SProtection(self
+00058380: 2e69 6420 2b20 2720 2720 2b20 626f 6479  .id + ' ' + body
+00058390: 290a 2020 2020 2020 2020 2020 2020 6665  ).            fe
+000583a0: 6564 6261 636b 203d 2073 656c 662e 6964  edback = self.id
+000583b0: 202b 2027 2027 202b 2062 6f64 790a 2020   + ' ' + body.  
+000583c0: 2020 2020 2020 2020 2020 6966 206d 6573            if mes
+000583d0: 7361 6765 203d 3d20 274e 6f20 6e65 6564  sage == 'No need
+000583e0: 2074 6f20 6368 616e 6765 206d 6172 6769   to change margi
+000583f0: 6e20 7479 7065 2e27 3a0a 2020 2020 2020  n type.':.      
+00058400: 2020 2020 2020 2020 2020 2320 6e6f 7420            # not 
+00058410: 616e 2065 7272 6f72 0a20 2020 2020 2020  an error.       
+00058420: 2020 2020 2020 2020 2023 2068 7474 7073           # https
+00058430: 3a2f 2f67 6974 6875 622e 636f 6d2f 6363  ://github.com/cc
+00058440: 7874 2f63 6378 742f 6973 7375 6573 2f31  xt/ccxt/issues/1
+00058450: 3132 3638 0a20 2020 2020 2020 2020 2020  1268.           
+00058460: 2020 2020 2023 2068 7474 7073 3a2f 2f67       # https://g
+00058470: 6974 6875 622e 636f 6d2f 6363 7874 2f63  ithub.com/ccxt/c
+00058480: 6378 742f 7075 6c6c 2f31 3136 3234 0a20  cxt/pull/11624. 
+00058490: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000584a0: 2050 4f53 5420 6874 7470 733a 2f2f 6661   POST https://fa
+000584b0: 7069 2e62 696e 616e 6365 2e63 6f6d 2f66  pi.binance.com/f
+000584c0: 6170 692f 7631 2f6d 6172 6769 6e54 7970  api/v1/marginTyp
+000584d0: 6520 3430 3020 4261 6420 5265 7175 6573  e 400 Bad Reques
+000584e0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+000584f0: 2020 2320 6269 6e61 6e63 6575 7364 6d20    # binanceusdm 
+00058500: 7b22 636f 6465 223a 2d34 3034 362c 226d  {"code":-4046,"m
+00058510: 7367 223a 224e 6f20 6e65 6564 2074 6f20  sg":"No need to 
+00058520: 6368 616e 6765 206d 6172 6769 6e20 7479  change margin ty
+00058530: 7065 2e22 7d0a 2020 2020 2020 2020 2020  pe."}.          
+00058540: 2020 2020 2020 7261 6973 6520 4d61 7267        raise Marg
+00058550: 696e 4d6f 6465 416c 7265 6164 7953 6574  inModeAlreadySet
+00058560: 2866 6565 6462 6163 6b29 0a20 2020 2020  (feedback).     
+00058570: 2020 2020 2020 2073 656c 662e 7468 726f         self.thro
+00058580: 775f 6578 6163 746c 795f 6d61 7463 6865  w_exactly_matche
+00058590: 645f 6578 6365 7074 696f 6e28 7365 6c66  d_exception(self
+000585a0: 2e65 7863 6570 7469 6f6e 735b 2765 7861  .exceptions['exa
+000585b0: 6374 275d 2c20 6572 726f 722c 2066 6565  ct'], error, fee
+000585c0: 6462 6163 6b29 0a20 2020 2020 2020 2020  dback).         
+000585d0: 2020 2072 6169 7365 2045 7863 6861 6e67     raise Exchang
+000585e0: 6545 7272 6f72 2866 6565 6462 6163 6b29  eError(feedback)
+000585f0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00058600: 7375 6363 6573 733a 0a20 2020 2020 2020  success:.       
+00058610: 2020 2020 2072 6169 7365 2045 7863 6861       raise Excha
+00058620: 6e67 6545 7272 6f72 2873 656c 662e 6964  ngeError(self.id
+00058630: 202b 2027 2027 202b 2062 6f64 7929 0a20   + ' ' + body). 
+00058640: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+00058650: 6e65 0a0a 2020 2020 6465 6620 6361 6c63  ne..    def calc
+00058660: 756c 6174 655f 7261 7465 5f6c 696d 6974  ulate_rate_limit
+00058670: 6572 5f63 6f73 7428 7365 6c66 2c20 6170  er_cost(self, ap
+00058680: 692c 206d 6574 686f 642c 2070 6174 682c  i, method, path,
+00058690: 2070 6172 616d 732c 2063 6f6e 6669 673d   params, config=
+000586a0: 7b7d 293a 0a20 2020 2020 2020 2069 6620  {}):.        if 
+000586b0: 2827 6e6f 436f 696e 2720 696e 2063 6f6e  ('noCoin' in con
+000586c0: 6669 6729 2061 6e64 206e 6f74 2028 2763  fig) and not ('c
+000586d0: 6f69 6e27 2069 6e20 7061 7261 6d73 293a  oin' in params):
+000586e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000586f0: 7572 6e20 636f 6e66 6967 5b27 6e6f 436f  urn config['noCo
+00058700: 696e 275d 0a20 2020 2020 2020 2065 6c69  in'].        eli
+00058710: 6620 2827 6e6f 5379 6d62 6f6c 2720 696e  f ('noSymbol' in
+00058720: 2063 6f6e 6669 6729 2061 6e64 206e 6f74   config) and not
+00058730: 2028 2773 796d 626f 6c27 2069 6e20 7061   ('symbol' in pa
+00058740: 7261 6d73 293a 0a20 2020 2020 2020 2020  rams):.         
+00058750: 2020 2072 6574 7572 6e20 636f 6e66 6967     return config
+00058760: 5b27 6e6f 5379 6d62 6f6c 275d 0a20 2020  ['noSymbol'].   
+00058770: 2020 2020 2065 6c69 6620 2827 6e6f 506f       elif ('noPo
+00058780: 6f6c 4964 2720 696e 2063 6f6e 6669 6729  olId' in config)
+00058790: 2061 6e64 206e 6f74 2028 2770 6f6f 6c49   and not ('poolI
+000587a0: 6427 2069 6e20 7061 7261 6d73 293a 0a20  d' in params):. 
+000587b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000587c0: 6e20 636f 6e66 6967 5b27 6e6f 506f 6f6c  n config['noPool
+000587d0: 4964 275d 0a20 2020 2020 2020 2065 6c69  Id'].        eli
+000587e0: 6620 2827 6279 4c69 6d69 7427 2069 6e20  f ('byLimit' in 
+000587f0: 636f 6e66 6967 2920 616e 6420 2827 6c69  config) and ('li
+00058800: 6d69 7427 2069 6e20 7061 7261 6d73 293a  mit' in params):
+00058810: 0a20 2020 2020 2020 2020 2020 206c 696d  .            lim
+00058820: 6974 203d 2070 6172 616d 735b 276c 696d  it = params['lim
+00058830: 6974 275d 0a20 2020 2020 2020 2020 2020  it'].           
+00058840: 2062 794c 696d 6974 203d 2063 6f6e 6669   byLimit = confi
+00058850: 675b 2762 794c 696d 6974 275d 0a20 2020  g['byLimit'].   
+00058860: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00058870: 6e20 7261 6e67 6528 302c 206c 656e 2862  n range(0, len(b
+00058880: 794c 696d 6974 2929 3a0a 2020 2020 2020  yLimit)):.      
+00058890: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
+000588a0: 3d20 6279 4c69 6d69 745b 695d 0a20 2020  = byLimit[i].   
+000588b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000588c0: 6c69 6d69 7420 3c3d 2065 6e74 7279 5b30  limit <= entry[0
+000588d0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000588e0: 2020 2020 2020 2072 6574 7572 6e20 656e         return en
+000588f0: 7472 795b 315d 0a20 2020 2020 2020 2072  try[1].        r
+00058900: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
+00058910: 7661 6c75 6528 636f 6e66 6967 2c20 2763  value(config, 'c
+00058920: 6f73 7427 2c20 3129 0a0a 2020 2020 6465  ost', 1)..    de
+00058930: 6620 7265 7175 6573 7428 7365 6c66 2c20  f request(self, 
+00058940: 7061 7468 2c20 6170 693d 2770 7562 6c69  path, api='publi
+00058950: 6327 2c20 6d65 7468 6f64 3d27 4745 5427  c', method='GET'
+00058960: 2c20 7061 7261 6d73 3d7b 7d2c 2068 6561  , params={}, hea
+00058970: 6465 7273 3d4e 6f6e 652c 2062 6f64 793d  ders=None, body=
+00058980: 4e6f 6e65 2c20 636f 6e66 6967 3d7b 7d2c  None, config={},
+00058990: 2063 6f6e 7465 7874 3d7b 7d29 3a0a 2020   context={}):.  
+000589a0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+000589b0: 2073 656c 662e 6665 7463 6832 2870 6174   self.fetch2(pat
+000589c0: 682c 2061 7069 2c20 6d65 7468 6f64 2c20  h, api, method, 
+000589d0: 7061 7261 6d73 2c20 6865 6164 6572 732c  params, headers,
+000589e0: 2062 6f64 792c 2063 6f6e 6669 6729 0a20   body, config). 
+000589f0: 2020 2020 2020 2023 2061 2077 6f72 6b61         # a worka
+00058a00: 726f 756e 6420 666f 7220 7b22 636f 6465  round for {"code
+00058a10: 223a 2d32 3031 352c 226d 7367 223a 2249  ":-2015,"msg":"I
+00058a20: 6e76 616c 6964 2041 5049 2d6b 6579 2c20  nvalid API-key, 
+00058a30: 4950 2c20 6f72 2070 6572 6d69 7373 696f  IP, or permissio
+00058a40: 6e73 2066 6f72 2061 6374 696f 6e2e 227d  ns for action."}
+00058a50: 0a20 2020 2020 2020 2069 6620 2861 7069  .        if (api
+00058a60: 203d 3d20 2770 7269 7661 7465 2729 206f   == 'private') o
+00058a70: 7220 2861 7069 203d 3d20 2777 6170 6927  r (api == 'wapi'
+00058a80: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+00058a90: 656c 662e 6f70 7469 6f6e 735b 2768 6173  elf.options['has
+00058aa0: 416c 7265 6164 7941 7574 6865 6e74 6963  AlreadyAuthentic
+00058ab0: 6174 6564 5375 6363 6573 7366 756c 6c79  atedSuccessfully
+00058ac0: 275d 203d 2054 7275 650a 2020 2020 2020  '] = True.      
+00058ad0: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+00058ae0: 650a 0a20 2020 2064 6566 206d 6f64 6966  e..    def modif
+00058af0: 795f 6d61 7267 696e 5f68 656c 7065 7228  y_margin_helper(
+00058b00: 7365 6c66 2c20 7379 6d62 6f6c 3a20 7374  self, symbol: st
+00058b10: 722c 2061 6d6f 756e 742c 2061 6464 4f72  r, amount, addOr
+00058b20: 5265 6475 6365 2c20 7061 7261 6d73 3d7b  Reduce, params={
+00058b30: 7d29 3a0a 2020 2020 2020 2020 2320 7573  }):.        # us
+00058b40: 6564 2074 6f20 6d6f 6469 6679 2069 736f  ed to modify iso
+00058b50: 6c61 7465 6420 706f 7369 7469 6f6e 730a  lated positions.
+00058b60: 2020 2020 2020 2020 6465 6661 756c 7454          defaultT
+00058b70: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
+00058b80: 7374 7269 6e67 2873 656c 662e 6f70 7469  string(self.opti
+00058b90: 6f6e 732c 2027 6465 6661 756c 7454 7970  ons, 'defaultTyp
+00058ba0: 6527 2c20 2766 7574 7572 6527 290a 2020  e', 'future').  
+00058bb0: 2020 2020 2020 6966 2064 6566 6175 6c74        if default
+00058bc0: 5479 7065 203d 3d20 2773 706f 7427 3a0a  Type == 'spot':.
+00058bd0: 2020 2020 2020 2020 2020 2020 6465 6661              defa
+00058be0: 756c 7454 7970 6520 3d20 2766 7574 7572  ultType = 'futur
+00058bf0: 6527 0a20 2020 2020 2020 2074 7970 6520  e'.        type 
+00058c00: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00058c10: 6e67 2870 6172 616d 732c 2027 7479 7065  ng(params, 'type
+00058c20: 272c 2064 6566 6175 6c74 5479 7065 290a  ', defaultType).
+00058c30: 2020 2020 2020 2020 6966 2028 7479 7065          if (type
+00058c40: 203d 3d20 276d 6172 6769 6e27 2920 6f72   == 'margin') or
+00058c50: 2028 7479 7065 203d 3d20 2773 706f 7427   (type == 'spot'
+00058c60: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00058c70: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
+00058c80: 6428 7365 6c66 2e69 6420 2b20 2720 6164  d(self.id + ' ad
+00058c90: 6420 2f20 7265 6475 6365 206d 6172 6769  d / reduce margi
+00058ca0: 6e20 6f6e 6c79 2073 7570 706f 7274 6564  n only supported
+00058cb0: 2077 6974 6820 7479 7065 2066 7574 7572   with type futur
+00058cc0: 6520 6f72 2064 656c 6976 6572 7927 290a  e or delivery').
+00058cd0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+00058ce0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00058cf0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00058d00: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00058d10: 0a20 2020 2020 2020 2061 6d6f 756e 7420  .        amount 
+00058d20: 3d20 7365 6c66 2e61 6d6f 756e 745f 746f  = self.amount_to
+00058d30: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+00058d40: 6c2c 2061 6d6f 756e 7429 0a20 2020 2020  l, amount).     
+00058d50: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00058d60: 2020 2020 2020 2020 2020 2027 7479 7065             'type
+00058d70: 273a 2061 6464 4f72 5265 6475 6365 2c0a  ': addOrReduce,.
+00058d80: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
+00058d90: 626f 6c27 3a20 6d61 726b 6574 5b27 6964  bol': market['id
+00058da0: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+00058db0: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
+00058dc0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00058dd0: 2020 2020 6d65 7468 6f64 203d 204e 6f6e      method = Non
+00058de0: 650a 2020 2020 2020 2020 636f 6465 203d  e.        code =
+00058df0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+00058e00: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
+00058e10: 5d3a 0a20 2020 2020 2020 2020 2020 206d  ]:.            m
+00058e20: 6574 686f 6420 3d20 2766 6170 6950 7269  ethod = 'fapiPri
+00058e30: 7661 7465 506f 7374 506f 7369 7469 6f6e  vatePostPosition
+00058e40: 4d61 7267 696e 270a 2020 2020 2020 2020  Margin'.        
+00058e50: 2020 2020 636f 6465 203d 206d 6172 6b65      code = marke
+00058e60: 745b 2771 756f 7465 275d 0a20 2020 2020  t['quote'].     
+00058e70: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00058e80: 2020 2020 206d 6574 686f 6420 3d20 2764       method = 'd
+00058e90: 6170 6950 7269 7661 7465 506f 7374 506f  apiPrivatePostPo
+00058ea0: 7369 7469 6f6e 4d61 7267 696e 270a 2020  sitionMargin'.  
+00058eb0: 2020 2020 2020 2020 2020 636f 6465 203d            code =
+00058ec0: 206d 6172 6b65 745b 2762 6173 6527 5d0a   market['base'].
+00058ed0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00058ee0: 203d 2067 6574 6174 7472 2873 656c 662c   = getattr(self,
+00058ef0: 206d 6574 686f 6429 2873 656c 662e 6578   method)(self.ex
+00058f00: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+00058f10: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
+00058f20: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+00058f30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00058f40: 2020 2022 636f 6465 223a 2032 3030 2c0a     "code": 200,.
+00058f50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00058f60: 2020 226d 7367 223a 2022 5375 6363 6573    "msg": "Succes
+00058f70: 7366 756c 6c79 206d 6f64 6966 7920 706f  sfully modify po
+00058f80: 7369 7469 6f6e 206d 6172 6769 6e2e 222c  sition margin.",
+00058f90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00058fa0: 2020 2022 616d 6f75 6e74 223a 2030 2e30     "amount": 0.0
+00058fb0: 3031 2c0a 2020 2020 2020 2020 2320 2020  01,.        #   
+00058fc0: 2020 2020 2020 2274 7970 6522 3a20 310a        "type": 1.
+00058fd0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+00058fe0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00058ff0: 2020 7265 7475 726e 2073 656c 662e 6578    return self.ex
+00059000: 7465 6e64 2873 656c 662e 7061 7273 655f  tend(self.parse_
+00059010: 6d61 7267 696e 5f6d 6f64 6966 6963 6174  margin_modificat
+00059020: 696f 6e28 7265 7370 6f6e 7365 2c20 6d61  ion(response, ma
+00059030: 726b 6574 292c 207b 0a20 2020 2020 2020  rket), {.       
+00059040: 2020 2020 2027 636f 6465 273a 2063 6f64       'code': cod
+00059050: 652c 0a20 2020 2020 2020 207d 290a 0a20  e,.        }).. 
+00059060: 2020 2064 6566 2070 6172 7365 5f6d 6172     def parse_mar
+00059070: 6769 6e5f 6d6f 6469 6669 6361 7469 6f6e  gin_modification
+00059080: 2873 656c 662c 2064 6174 612c 206d 6172  (self, data, mar
+00059090: 6b65 743d 4e6f 6e65 293a 0a20 2020 2020  ket=None):.     
+000590a0: 2020 2072 6177 5479 7065 203d 2073 656c     rawType = sel
+000590b0: 662e 7361 6665 5f69 6e74 6567 6572 2864  f.safe_integer(d
+000590c0: 6174 612c 2027 7479 7065 2729 0a20 2020  ata, 'type').   
+000590d0: 2020 2020 2072 6573 756c 7454 7970 6520       resultType 
+000590e0: 3d20 2761 6464 2720 6966 2028 7261 7754  = 'add' if (rawT
+000590f0: 7970 6520 3d3d 2031 2920 656c 7365 2027  ype == 1) else '
+00059100: 7265 6475 6365 270a 2020 2020 2020 2020  reduce'.        
+00059110: 7265 7375 6c74 416d 6f75 6e74 203d 2073  resultAmount = s
+00059120: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+00059130: 6461 7461 2c20 2761 6d6f 756e 7427 290a  data, 'amount').
+00059140: 2020 2020 2020 2020 6572 726f 7243 6f64          errorCod
+00059150: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+00059160: 7269 6e67 2864 6174 612c 2027 636f 6465  ring(data, 'code
+00059170: 2729 0a20 2020 2020 2020 2073 7461 7475  ').        statu
+00059180: 7320 3d20 276f 6b27 2069 6620 2865 7272  s = 'ok' if (err
+00059190: 6f72 436f 6465 203d 3d20 2732 3030 2729  orCode == '200')
+000591a0: 2065 6c73 6520 2766 6169 6c65 6427 0a20   else 'failed'. 
+000591b0: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
+000591c0: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
+000591d0: 6f27 3a20 6461 7461 2c0a 2020 2020 2020  o': data,.      
+000591e0: 2020 2020 2020 2774 7970 6527 3a20 7265        'type': re
+000591f0: 7375 6c74 5479 7065 2c0a 2020 2020 2020  sultType,.      
+00059200: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
+00059210: 7265 7375 6c74 416d 6f75 6e74 2c0a 2020  resultAmount,.  
+00059220: 2020 2020 2020 2020 2020 2763 6f64 6527            'code'
+00059230: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00059240: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
+00059250: 726b 6574 5b27 7379 6d62 6f6c 275d 2c0a  rket['symbol'],.
+00059260: 2020 2020 2020 2020 2020 2020 2773 7461              'sta
+00059270: 7475 7327 3a20 7374 6174 7573 2c0a 2020  tus': status,.  
+00059280: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
+00059290: 2072 6564 7563 655f 6d61 7267 696e 2873   reduce_margin(s
+000592a0: 656c 662c 2073 796d 626f 6c3a 2073 7472  elf, symbol: str
+000592b0: 2c20 616d 6f75 6e74 2c20 7061 7261 6d73  , amount, params
+000592c0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+000592d0: 220a 2020 2020 2020 2020 7265 6d6f 7665  ".        remove
+000592e0: 206d 6172 6769 6e20 6672 6f6d 2061 2070   margin from a p
+000592f0: 6f73 6974 696f 6e0a 2020 2020 2020 2020  osition.        
+00059300: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
+00059310: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
+00059320: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
+00059330: 203a 7061 7261 6d20 666c 6f61 7420 616d   :param float am
+00059340: 6f75 6e74 3a20 7468 6520 616d 6f75 6e74  ount: the amount
+00059350: 206f 6620 6d61 7267 696e 2074 6f20 7265   of margin to re
+00059360: 6d6f 7665 0a20 2020 2020 2020 203a 7061  move.        :pa
+00059370: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+00059380: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00059390: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+000593a0: 6520 6269 6e61 6e63 6520 6170 6920 656e  e binance api en
+000593b0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+000593c0: 7265 7475 726e 7320 6469 6374 3a20 6120  returns dict: a 
+000593d0: 606d 6172 6769 6e20 7374 7275 6374 7572  `margin structur
+000593e0: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+000593f0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d72  ccxt.com/#/?id=r
+00059400: 6564 7563 652d 6d61 7267 696e 2d73 7472  educe-margin-str
+00059410: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+00059420: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+00059430: 7572 6e20 7365 6c66 2e6d 6f64 6966 795f  urn self.modify_
+00059440: 6d61 7267 696e 5f68 656c 7065 7228 7379  margin_helper(sy
+00059450: 6d62 6f6c 2c20 616d 6f75 6e74 2c20 322c  mbol, amount, 2,
+00059460: 2070 6172 616d 7329 0a0a 2020 2020 6465   params)..    de
+00059470: 6620 6164 645f 6d61 7267 696e 2873 656c  f add_margin(sel
+00059480: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
+00059490: 616d 6f75 6e74 2c20 7061 7261 6d73 3d7b  amount, params={
+000594a0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+000594b0: 2020 2020 2020 2020 6164 6420 6d61 7267          add marg
+000594c0: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
+000594d0: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
+000594e0: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
+000594f0: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
+00059500: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+00059510: 2061 6d6f 756e 7420 6f66 206d 6172 6769   amount of margi
+00059520: 6e20 746f 2061 6464 0a20 2020 2020 2020  n to add.       
+00059530: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
+00059540: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
+00059550: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+00059560: 6f20 7468 6520 6269 6e61 6e63 6520 6170  o the binance ap
+00059570: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
+00059580: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+00059590: 3a20 6120 606d 6172 6769 6e20 7374 7275  : a `margin stru
+000595a0: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+000595b0: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+000595c0: 6964 3d61 6464 2d6d 6172 6769 6e2d 7374  id=add-margin-st
+000595d0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+000595e0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+000595f0: 7475 726e 2073 656c 662e 6d6f 6469 6679  turn self.modify
+00059600: 5f6d 6172 6769 6e5f 6865 6c70 6572 2873  _margin_helper(s
+00059610: 796d 626f 6c2c 2061 6d6f 756e 742c 2031  ymbol, amount, 1
+00059620: 2c20 7061 7261 6d73 290a 0a20 2020 2064  , params)..    d
+00059630: 6566 2066 6574 6368 5f62 6f72 726f 775f  ef fetch_borrow_
+00059640: 7261 7465 2873 656c 662c 2063 6f64 653a  rate(self, code:
+00059650: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
+00059660: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00059670: 2020 2020 2020 6665 7463 6820 7468 6520        fetch the 
+00059680: 7261 7465 206f 6620 696e 7465 7265 7374  rate of interest
+00059690: 2074 6f20 626f 7272 6f77 2061 2063 7572   to borrow a cur
+000596a0: 7265 6e63 7920 666f 7220 6d61 7267 696e  rency for margin
+000596b0: 2074 7261 6469 6e67 0a20 2020 2020 2020   trading.       
+000596c0: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
+000596d0: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
+000596e0: 6379 2063 6f64 650a 2020 2020 2020 2020  cy code.        
+000596f0: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+00059700: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+00059710: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+00059720: 2074 6865 2062 696e 616e 6365 2061 7069   the binance api
+00059730: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+00059740: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+00059750: 2061 2060 626f 7272 6f77 2072 6174 6520   a `borrow rate 
+00059760: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+00059770: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+00059780: 2f23 2f3f 6964 3d62 6f72 726f 772d 7261  /#/?id=borrow-ra
+00059790: 7465 2d73 7472 7563 7475 7265 3e60 0a20  te-structure>`. 
+000597a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000597b0: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+000597c0: 6b65 7473 2829 0a20 2020 2020 2020 2063  kets().        c
+000597d0: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
+000597e0: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
+000597f0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00059800: 7b0a 2020 2020 2020 2020 2020 2020 2761  {.            'a
+00059810: 7373 6574 273a 2063 7572 7265 6e63 795b  sset': currency[
+00059820: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
+00059830: 2020 2023 2027 7669 704c 6576 656c 273a     # 'vipLevel':
+00059840: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+00059850: 6572 2870 6172 616d 732c 2027 7669 704c  er(params, 'vipL
+00059860: 6576 656c 2729 2c0a 2020 2020 2020 2020  evel'),.        
+00059870: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
+00059880: 7365 203d 2073 656c 662e 7361 7069 4765  se = self.sapiGe
+00059890: 744d 6172 6769 6e49 6e74 6572 6573 7452  tMarginInterestR
+000598a0: 6174 6548 6973 746f 7279 2873 656c 662e  ateHistory(self.
+000598b0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+000598c0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+000598d0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+000598e0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+000598f0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00059900: 2020 2020 2020 2020 2020 2020 2022 6173               "as
+00059910: 7365 7422 3a20 2255 5344 5422 2c0a 2020  set": "USDT",.  
+00059920: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00059930: 2020 2020 2274 696d 6573 7461 6d70 223a      "timestamp":
+00059940: 2031 3633 3832 3330 3430 3030 3030 2c0a   1638230400000,.
+00059950: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059960: 2020 2020 2020 2264 6169 6c79 496e 7465        "dailyInte
+00059970: 7265 7374 5261 7465 223a 2022 302e 3030  restRate": "0.00
+00059980: 3036 222c 0a20 2020 2020 2020 2023 2020  06",.        #  
+00059990: 2020 2020 2020 2020 2020 2022 7669 704c             "vipL
+000599a0: 6576 656c 223a 2030 0a20 2020 2020 2020  evel": 0.       
+000599b0: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
+000599c0: 2020 2020 2020 2320 2020 2020 5d0a 2020        #     ].  
+000599d0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000599e0: 7261 7465 203d 2073 656c 662e 7361 6665  rate = self.safe
+000599f0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+00059a00: 2030 290a 2020 2020 2020 2020 7265 7475   0).        retu
+00059a10: 726e 2073 656c 662e 7061 7273 655f 626f  rn self.parse_bo
+00059a20: 7272 6f77 5f72 6174 6528 7261 7465 290a  rrow_rate(rate).
+00059a30: 0a20 2020 2064 6566 2066 6574 6368 5f62  .    def fetch_b
+00059a40: 6f72 726f 775f 7261 7465 5f68 6973 746f  orrow_rate_histo
+00059a50: 7279 2873 656c 662c 2063 6f64 653a 2073  ry(self, code: s
+00059a60: 7472 2c20 7369 6e63 653a 204f 7074 696f  tr, since: Optio
+00059a70: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+00059a80: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
+00059a90: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
+00059aa0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00059ab0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00059ac0: 7472 6965 7665 7320 6120 6869 7374 6f72  trieves a histor
+00059ad0: 7920 6f66 2061 2063 7572 7265 6e63 6965  y of a currencie
+00059ae0: 7320 626f 7272 6f77 2069 6e74 6572 6573  s borrow interes
+00059af0: 7420 7261 7465 2061 7420 7370 6563 6966  t rate at specif
+00059b00: 6963 2074 696d 6520 736c 6f74 730a 2020  ic time slots.  
+00059b10: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00059b20: 2063 6f64 653a 2075 6e69 6669 6564 2063   code: unified c
+00059b30: 7572 7265 6e63 7920 636f 6465 0a20 2020  urrency code.   
+00059b40: 2020 2020 203a 7061 7261 6d20 696e 747c       :param int|
+00059b50: 4e6f 6e65 2073 696e 6365 3a20 7469 6d65  None since: time
+00059b60: 7374 616d 7020 666f 7220 7468 6520 6561  stamp for the ea
+00059b70: 726c 6965 7374 2062 6f72 726f 7720 7261  rliest borrow ra
+00059b80: 7465 0a20 2020 2020 2020 203a 7061 7261  te.        :para
+00059b90: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
+00059ba0: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
+00059bb0: 6d62 6572 206f 6620 6062 6f72 726f 7720  mber of `borrow 
+00059bc0: 7261 7465 2073 7472 7563 7475 7265 7320  rate structures 
+00059bd0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+00059be0: 7874 2e63 6f6d 2f23 2f3f 6964 3d62 6f72  xt.com/#/?id=bor
+00059bf0: 726f 772d 7261 7465 2d73 7472 7563 7475  row-rate-structu
+00059c00: 7265 3e60 2074 6f20 7265 7472 6965 7665  re>` to retrieve
+00059c10: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00059c20: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+00059c30: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00059c40: 6563 6966 6963 2074 6f20 7468 6520 6578  ecific to the ex
+00059c50: 6368 616e 6765 2061 7069 2065 6e64 706f  change api endpo
+00059c60: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+00059c70: 7572 6e73 205b 6469 6374 5d3a 2061 6e20  urns [dict]: an 
+00059c80: 6172 7261 7920 6f66 2060 626f 7272 6f77  array of `borrow
+00059c90: 2072 6174 6520 7374 7275 6374 7572 6573   rate structures
+00059ca0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+00059cb0: 6378 742e 636f 6d2f 232f 3f69 643d 626f  cxt.com/#/?id=bo
+00059cc0: 7272 6f77 2d72 6174 652d 7374 7275 6374  rrow-rate-struct
+00059cd0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
+00059ce0: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
+00059cf0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00059d00: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
+00059d10: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00059d20: 2020 2020 6c69 6d69 7420 3d20 3933 0a20      limit = 93. 
+00059d30: 2020 2020 2020 2065 6c69 6620 6c69 6d69         elif limi
+00059d40: 7420 3e20 3933 3a0a 2020 2020 2020 2020  t > 93:.        
+00059d50: 2020 2020 2320 4269 6e61 6e63 6520 4150      # Binance AP
+00059d60: 4920 7361 7973 2074 6865 206c 696d 6974  I says the limit
+00059d70: 2069 7320 3130 302c 2062 7574 2022 496c   is 100, but "Il
+00059d80: 6c65 6761 6c20 6368 6172 6163 7465 7273  legal characters
+00059d90: 2066 6f75 6e64 2069 6e20 6120 7061 7261   found in a para
+00059da0: 6d65 7465 722e 2220 6973 2072 6574 7572  meter." is retur
+00059db0: 6e65 6420 7768 656e 206c 696d 6974 2069  ned when limit i
+00059dc0: 7320 3e20 3933 0a20 2020 2020 2020 2020  s > 93.         
+00059dd0: 2020 2072 6169 7365 2042 6164 5265 7175     raise BadRequ
+00059de0: 6573 7428 7365 6c66 2e69 6420 2b20 2720  est(self.id + ' 
+00059df0: 6665 7463 6842 6f72 726f 7752 6174 6548  fetchBorrowRateH
+00059e00: 6973 746f 7279 2829 206c 696d 6974 2070  istory() limit p
+00059e10: 6172 616d 6574 6572 2063 616e 6e6f 7420  arameter cannot 
+00059e20: 6578 6365 6564 2039 3227 290a 2020 2020  exceed 92').    
+00059e30: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
+00059e40: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
+00059e50: 6529 0a20 2020 2020 2020 2072 6571 7565  e).        reque
+00059e60: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
+00059e70: 2020 2027 6173 7365 7427 3a20 6375 7272     'asset': curr
+00059e80: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
+00059e90: 2020 2020 2020 2020 276c 696d 6974 273a          'limit':
+00059ea0: 206c 696d 6974 2c0a 2020 2020 2020 2020   limit,.        
+00059eb0: 7d0a 2020 2020 2020 2020 6966 2073 696e  }.        if sin
+00059ec0: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+00059ed0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00059ee0: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
+00059ef0: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
+00059f00: 2020 2020 2065 6e64 5469 6d65 203d 2073       endTime = s
+00059f10: 656c 662e 7375 6d28 7369 6e63 652c 206c  elf.sum(since, l
+00059f20: 696d 6974 202a 2038 3634 3030 3030 3029  imit * 86400000)
+00059f30: 202d 2031 2020 2320 7265 7175 6972 6564   - 1  # required
+00059f40: 2077 6865 6e20 7374 6172 7454 696d 6520   when startTime 
+00059f50: 6973 2066 7572 7468 6572 2074 6861 6e20  is further than 
+00059f60: 3933 2064 6179 7320 696e 2074 6865 2070  93 days in the p
+00059f70: 6173 740a 2020 2020 2020 2020 2020 2020  ast.            
+00059f80: 6e6f 7720 3d20 7365 6c66 2e6d 696c 6c69  now = self.milli
+00059f90: 7365 636f 6e64 7328 290a 2020 2020 2020  seconds().      
+00059fa0: 2020 2020 2020 7265 7175 6573 745b 2765        request['e
+00059fb0: 6e64 5469 6d65 275d 203d 206d 696e 2865  ndTime'] = min(e
+00059fc0: 6e64 5469 6d65 2c20 6e6f 7729 2020 2320  ndTime, now)  # 
+00059fd0: 6361 6e6e 6f74 2068 6176 6520 616e 2065  cannot have an e
+00059fe0: 6e64 5469 6d65 206c 6174 6572 2074 6861  ndTime later tha
+00059ff0: 6e20 6375 7272 656e 7420 7469 6d65 0a20  n current time. 
+0005a000: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0005a010: 3d20 7365 6c66 2e73 6170 6947 6574 4d61  = self.sapiGetMa
+0005a020: 7267 696e 496e 7465 7265 7374 5261 7465  rginInterestRate
+0005a030: 4869 7374 6f72 7928 7365 6c66 2e65 7874  History(self.ext
+0005a040: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+0005a050: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+0005a060: 2020 2020 2020 2020 2320 2020 2020 5b0a          #     [.
+0005a070: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a080: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0005a090: 2020 2020 2020 2020 2020 2261 7373 6574            "asset
+0005a0a0: 223a 2022 5553 4454 222c 0a20 2020 2020  ": "USDT",.     
+0005a0b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0005a0c0: 2022 7469 6d65 7374 616d 7022 3a20 3136   "timestamp": 16
+0005a0d0: 3338 3233 3034 3030 3030 302c 0a20 2020  38230400000,.   
+0005a0e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005a0f0: 2020 2022 6461 696c 7949 6e74 6572 6573     "dailyInteres
+0005a100: 7452 6174 6522 3a20 2230 2e30 3030 3622  tRate": "0.0006"
+0005a110: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005a120: 2020 2020 2020 2020 2276 6970 4c65 7665          "vipLeve
+0005a130: 6c22 3a20 300a 2020 2020 2020 2020 2320  l": 0.        # 
+0005a140: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+0005a150: 2020 2023 2020 2020 205d 0a20 2020 2020     #     ].     
+0005a160: 2020 2023 0a20 2020 2020 2020 2072 6574     #.        ret
+0005a170: 7572 6e20 7365 6c66 2e70 6172 7365 5f62  urn self.parse_b
+0005a180: 6f72 726f 775f 7261 7465 5f68 6973 746f  orrow_rate_histo
+0005a190: 7279 2872 6573 706f 6e73 652c 2063 6f64  ry(response, cod
+0005a1a0: 652c 2073 696e 6365 2c20 6c69 6d69 7429  e, since, limit)
+0005a1b0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+0005a1c0: 626f 7272 6f77 5f72 6174 655f 6869 7374  borrow_rate_hist
+0005a1d0: 6f72 7928 7365 6c66 2c20 7265 7370 6f6e  ory(self, respon
+0005a1e0: 7365 2c20 636f 6465 2c20 7369 6e63 652c  se, code, since,
+0005a1f0: 206c 696d 6974 293a 0a20 2020 2020 2020   limit):.       
+0005a200: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
+0005a210: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
+0005a220: 6e67 6528 302c 206c 656e 2872 6573 706f  nge(0, len(respo
+0005a230: 6e73 6529 293a 0a20 2020 2020 2020 2020  nse)):.         
+0005a240: 2020 2069 7465 6d20 3d20 7265 7370 6f6e     item = respon
+0005a250: 7365 5b69 5d0a 2020 2020 2020 2020 2020  se[i].          
+0005a260: 2020 626f 7272 6f77 5261 7465 203d 2073    borrowRate = s
+0005a270: 656c 662e 7061 7273 655f 626f 7272 6f77  elf.parse_borrow
+0005a280: 5f72 6174 6528 6974 656d 290a 2020 2020  _rate(item).    
+0005a290: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+0005a2a0: 7070 656e 6428 626f 7272 6f77 5261 7465  ppend(borrowRate
+0005a2b0: 290a 2020 2020 2020 2020 736f 7274 6564  ).        sorted
+0005a2c0: 203d 2073 656c 662e 736f 7274 5f62 7928   = self.sort_by(
+0005a2d0: 7265 7375 6c74 2c20 2774 696d 6573 7461  result, 'timesta
+0005a2e0: 6d70 2729 0a20 2020 2020 2020 2072 6574  mp').        ret
+0005a2f0: 7572 6e20 7365 6c66 2e66 696c 7465 725f  urn self.filter_
+0005a300: 6279 5f63 7572 7265 6e63 795f 7369 6e63  by_currency_sinc
+0005a310: 655f 6c69 6d69 7428 736f 7274 6564 2c20  e_limit(sorted, 
+0005a320: 636f 6465 2c20 7369 6e63 652c 206c 696d  code, since, lim
+0005a330: 6974 290a 0a20 2020 2064 6566 2070 6172  it)..    def par
+0005a340: 7365 5f62 6f72 726f 775f 7261 7465 2873  se_borrow_rate(s
+0005a350: 656c 662c 2069 6e66 6f2c 2063 7572 7265  elf, info, curre
+0005a360: 6e63 793d 4e6f 6e65 293a 0a20 2020 2020  ncy=None):.     
+0005a370: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0005a380: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0005a390: 2020 2020 2022 6173 7365 7422 3a20 2255       "asset": "U
+0005a3a0: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+0005a3b0: 2020 2020 2020 2022 7469 6d65 7374 616d         "timestam
+0005a3c0: 7022 3a20 3136 3338 3233 3034 3030 3030  p": 163823040000
+0005a3d0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+0005a3e0: 2020 2020 2264 6169 6c79 496e 7465 7265      "dailyIntere
+0005a3f0: 7374 5261 7465 223a 2022 302e 3030 3036  stRate": "0.0006
+0005a400: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005a410: 2020 2020 2276 6970 4c65 7665 6c22 3a20      "vipLevel": 
+0005a420: 300a 2020 2020 2020 2020 2320 2020 207d  0.        #    }
+0005a430: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0005a440: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
+0005a450: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0005a460: 696e 666f 2c20 2774 696d 6573 7461 6d70  info, 'timestamp
+0005a470: 2729 0a20 2020 2020 2020 2063 7572 7265  ').        curre
+0005a480: 6e63 7920 3d20 7365 6c66 2e73 6166 655f  ncy = self.safe_
+0005a490: 7374 7269 6e67 2869 6e66 6f2c 2027 6173  string(info, 'as
+0005a4a0: 7365 7427 290a 2020 2020 2020 2020 7265  set').        re
+0005a4b0: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
+0005a4c0: 2020 2027 6375 7272 656e 6379 273a 2073     'currency': s
+0005a4d0: 656c 662e 7361 6665 5f63 7572 7265 6e63  elf.safe_currenc
+0005a4e0: 795f 636f 6465 2863 7572 7265 6e63 7929  y_code(currency)
+0005a4f0: 2c0a 2020 2020 2020 2020 2020 2020 2772  ,.            'r
+0005a500: 6174 6527 3a20 7365 6c66 2e73 6166 655f  ate': self.safe_
+0005a510: 6e75 6d62 6572 2869 6e66 6f2c 2027 6461  number(info, 'da
+0005a520: 696c 7949 6e74 6572 6573 7452 6174 6527  ilyInterestRate'
+0005a530: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0005a540: 7065 7269 6f64 273a 2038 3634 3030 3030  period': 8640000
+0005a550: 302c 0a20 2020 2020 2020 2020 2020 2027  0,.            '
+0005a560: 7469 6d65 7374 616d 7027 3a20 7469 6d65  timestamp': time
+0005a570: 7374 616d 702c 0a20 2020 2020 2020 2020  stamp,.         
+0005a580: 2020 2027 6461 7465 7469 6d65 273a 2073     'datetime': s
+0005a590: 656c 662e 6973 6f38 3630 3128 7469 6d65  elf.iso8601(time
+0005a5a0: 7374 616d 7029 2c0a 2020 2020 2020 2020  stamp),.        
+0005a5b0: 2020 2020 2769 6e66 6f27 3a20 696e 666f      'info': info
+0005a5c0: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
+0005a5d0: 2064 6566 2063 7265 6174 655f 6769 6674   def create_gift
+0005a5e0: 5f63 6f64 6528 7365 6c66 2c20 636f 6465  _code(self, code
+0005a5f0: 3a20 7374 722c 2061 6d6f 756e 742c 2070  : str, amount, p
+0005a600: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0005a610: 2020 2022 2222 0a20 2020 2020 2020 2063     """.        c
+0005a620: 7265 6174 6520 6769 6674 2063 6f64 650a  reate gift code.
+0005a630: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0005a640: 7472 2063 6f64 653a 2067 6966 7420 636f  tr code: gift co
+0005a650: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+0005a660: 6d20 666c 6f61 7420 616d 6f75 6e74 3a20  m float amount: 
+0005a670: 616d 6f75 6e74 206f 6620 6375 7272 656e  amount of curren
+0005a680: 6379 2066 6f72 2074 6865 2067 6966 740a  cy for the gift.
+0005a690: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0005a6a0: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+0005a6b0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0005a6c0: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
+0005a6d0: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
+0005a6e0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+0005a6f0: 6e73 2064 6963 743a 2054 6865 2067 6966  ns dict: The gif
+0005a700: 7420 636f 6465 2069 642c 2063 6f64 652c  t code id, code,
+0005a710: 2063 7572 7265 6e63 7920 616e 6420 616d   currency and am
+0005a720: 6f75 6e74 0a20 2020 2020 2020 2022 2222  ount.        """
+0005a730: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+0005a740: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+0005a750: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
+0005a760: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
+0005a770: 6465 290a 2020 2020 2020 2020 2320 656e  de).        # en
+0005a780: 7375 7265 2079 6f75 2068 6176 6520 656e  sure you have en
+0005a790: 6f75 6768 2074 6f6b 656e 2069 6e20 796f  ough token in yo
+0005a7a0: 7572 2066 756e 6469 6e67 2061 6363 6f75  ur funding accou
+0005a7b0: 6e74 2062 6566 6f72 6520 6361 6c6c 696e  nt before callin
+0005a7c0: 6720 7365 6c66 2063 6f64 650a 2020 2020  g self code.    
+0005a7d0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+0005a7e0: 2020 2020 2020 2020 2020 2020 2774 6f6b              'tok
+0005a7f0: 656e 273a 2063 7572 7265 6e63 795b 2769  en': currency['i
+0005a800: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+0005a810: 2027 616d 6f75 6e74 273a 2061 6d6f 756e   'amount': amoun
+0005a820: 742c 0a20 2020 2020 2020 207d 0a20 2020  t,.        }.   
+0005a830: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0005a840: 7365 6c66 2e73 6170 6950 6f73 7447 6966  self.sapiPostGif
+0005a850: 7463 6172 6443 7265 6174 6543 6f64 6528  tcardCreateCode(
+0005a860: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+0005a870: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+0005a880: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005a890: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0005a8a0: 2320 2020 2020 2020 2020 636f 6465 3a20  #         code: 
+0005a8b0: 2730 3030 3030 3027 2c0a 2020 2020 2020  '000000',.      
+0005a8c0: 2020 2320 2020 2020 2020 2020 6d65 7373    #         mess
+0005a8d0: 6167 653a 2027 7375 6363 6573 7327 2c0a  age: 'success',.
+0005a8e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a8f0: 2020 6461 7461 3a20 7b72 6566 6572 656e    data: {referen
+0005a900: 6365 4e6f 3a20 2730 3033 3330 3032 3430  ceNo: '003300240
+0005a910: 3432 3139 3832 3327 2c20 636f 6465 3a20  4219823', code: 
+0005a920: 2741 5036 4558 544c 4b4e 484d 3643 4558  'AP6EXTLKNHM6CEX
+0005a930: 3727 7d2c 0a20 2020 2020 2020 2023 2020  7'},.        #  
+0005a940: 2020 2020 2020 2073 7563 6365 7373 3a20         success: 
+0005a950: 5472 7565 0a20 2020 2020 2020 2023 2020  True.        #  
+0005a960: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0005a970: 2020 2020 2020 2064 6174 6120 3d20 7365         data = se
+0005a980: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+0005a990: 7370 6f6e 7365 2c20 2764 6174 6127 290a  sponse, 'data').
+0005a9a0: 2020 2020 2020 2020 6769 6674 6361 7264          giftcard
+0005a9b0: 436f 6465 203d 2073 656c 662e 7361 6665  Code = self.safe
+0005a9c0: 5f73 7472 696e 6728 6461 7461 2c20 2763  _string(data, 'c
+0005a9d0: 6f64 6527 290a 2020 2020 2020 2020 6964  ode').        id
+0005a9e0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0005a9f0: 696e 6728 6461 7461 2c20 2772 6566 6572  ing(data, 'refer
+0005aa00: 656e 6365 4e6f 2729 0a20 2020 2020 2020  enceNo').       
+0005aa10: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
+0005aa20: 2020 2020 2020 2769 6e66 6f27 3a20 7265        'info': re
+0005aa30: 7370 6f6e 7365 2c0a 2020 2020 2020 2020  sponse,.        
+0005aa40: 2020 2020 2769 6427 3a20 6964 2c0a 2020      'id': id,.  
+0005aa50: 2020 2020 2020 2020 2020 2763 6f64 6527            'code'
+0005aa60: 3a20 6769 6674 6361 7264 436f 6465 2c0a  : giftcardCode,.
+0005aa70: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
+0005aa80: 7265 6e63 7927 3a20 636f 6465 2c0a 2020  rency': code,.  
+0005aa90: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
+0005aaa0: 7427 3a20 616d 6f75 6e74 2c0a 2020 2020  t': amount,.    
+0005aab0: 2020 2020 7d0a 0a20 2020 2064 6566 2072      }..    def r
+0005aac0: 6564 6565 6d5f 6769 6674 5f63 6f64 6528  edeem_gift_code(
+0005aad0: 7365 6c66 2c20 6769 6674 6361 7264 436f  self, giftcardCo
+0005aae0: 6465 2c20 7061 7261 6d73 3d7b 7d29 3a0a  de, params={}):.
+0005aaf0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0005ab00: 2020 2020 7265 6465 656d 2067 6966 7420      redeem gift 
+0005ab10: 636f 6465 0a20 2020 2020 2020 203a 7061  code.        :pa
+0005ab20: 7261 6d20 7374 7220 6769 6674 6361 7264  ram str giftcard
+0005ab30: 436f 6465 3a0a 2020 2020 2020 2020 3a70  Code:.        :p
+0005ab40: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+0005ab50: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+0005ab60: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+0005ab70: 6865 2062 696e 616e 6365 2061 7069 2065  he binance api e
+0005ab80: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+0005ab90: 3a72 6574 7572 6e73 2064 6963 743a 2072  :returns dict: r
+0005aba0: 6573 706f 6e73 6520 6672 6f6d 2074 6865  esponse from the
+0005abb0: 2065 7863 6861 6e67 650a 2020 2020 2020   exchange.      
+0005abc0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+0005abd0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+0005abe0: 2020 2020 2020 2763 6f64 6527 3a20 6769        'code': gi
+0005abf0: 6674 6361 7264 436f 6465 2c0a 2020 2020  ftcardCode,.    
+0005ac00: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+0005ac10: 7370 6f6e 7365 203d 2073 656c 662e 7361  sponse = self.sa
+0005ac20: 7069 506f 7374 4769 6674 6361 7264 5265  piPostGiftcardRe
+0005ac30: 6465 656d 436f 6465 2873 656c 662e 6578  deemCode(self.ex
+0005ac40: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+0005ac50: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
+0005ac60: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0005ac70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005ac80: 2020 2063 6f64 653a 2027 3030 3030 3030     code: '000000
+0005ac90: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+0005aca0: 2020 2020 206d 6573 7361 6765 3a20 2773       message: 's
+0005acb0: 7563 6365 7373 272c 0a20 2020 2020 2020  uccess',.       
+0005acc0: 2023 2020 2020 2020 2020 2064 6174 613a   #         data:
+0005acd0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0005ace0: 2020 2020 2020 2020 2072 6566 6572 656e           referen
+0005acf0: 6365 4e6f 3a20 2730 3033 3330 3032 3430  ceNo: '003300240
+0005ad00: 3432 3139 3832 3327 2c0a 2020 2020 2020  4219823',.      
+0005ad10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0005ad20: 6964 656e 7469 7479 4e6f 3a20 2731 3033  identityNo: '103
+0005ad30: 3136 3433 3137 3332 3830 3134 3734 3536  1643173280147456
+0005ad40: 3027 0a20 2020 2020 2020 2023 2020 2020  0'.        #    
+0005ad50: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+0005ad60: 2320 2020 2020 2020 2020 7375 6363 6573  #         succes
+0005ad70: 733a 2054 7275 650a 2020 2020 2020 2020  s: True.        
+0005ad80: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0005ad90: 230a 2020 2020 2020 2020 7265 7475 726e  #.        return
+0005ada0: 2072 6573 706f 6e73 650a 0a20 2020 2064   response..    d
+0005adb0: 6566 2076 6572 6966 795f 6769 6674 5f63  ef verify_gift_c
+0005adc0: 6f64 6528 7365 6c66 2c20 6964 3a20 7374  ode(self, id: st
+0005add0: 722c 2070 6172 616d 733d 7b7d 293a 0a20  r, params={}):. 
+0005ade0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0005adf0: 2020 2076 6572 6966 7920 6769 6674 2063     verify gift c
+0005ae00: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+0005ae10: 616d 2073 7472 2069 643a 2072 6566 6572  am str id: refer
+0005ae20: 656e 6365 206e 756d 6265 7220 6964 0a20  ence number id. 
+0005ae30: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+0005ae40: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+0005ae50: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+0005ae60: 6966 6963 2074 6f20 7468 6520 6269 6e61  ific to the bina
+0005ae70: 6e63 6520 6170 6920 656e 6470 6f69 6e74  nce api endpoint
+0005ae80: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0005ae90: 7320 6469 6374 3a20 7265 7370 6f6e 7365  s dict: response
+0005aea0: 2066 726f 6d20 7468 6520 6578 6368 616e   from the exchan
+0005aeb0: 6765 0a20 2020 2020 2020 2022 2222 0a20  ge.        """. 
+0005aec0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0005aed0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0005aee0: 7265 6665 7265 6e63 654e 6f27 3a20 6964  referenceNo': id
+0005aef0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0005af00: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+0005af10: 656c 662e 7361 7069 4765 7447 6966 7463  elf.sapiGetGiftc
+0005af20: 6172 6456 6572 6966 7928 7365 6c66 2e65  ardVerify(self.e
+0005af30: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+0005af40: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+0005af50: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0005af60: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0005af70: 2020 2020 636f 6465 3a20 2730 3030 3030      code: '00000
+0005af80: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
+0005af90: 2020 2020 2020 6d65 7373 6167 653a 2027        message: '
+0005afa0: 7375 6363 6573 7327 2c0a 2020 2020 2020  success',.      
+0005afb0: 2020 2320 2020 2020 2020 2020 6461 7461    #         data
+0005afc0: 3a20 7b76 616c 6964 3a20 5472 7565 7d2c  : {valid: True},
+0005afd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005afe0: 2020 2073 7563 6365 7373 3a20 5472 7565     success: True
+0005aff0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+0005b000: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0005b010: 2020 2072 6574 7572 6e20 7265 7370 6f6e     return respon
+0005b020: 7365 0a0a 2020 2020 6465 6620 6665 7463  se..    def fetc
+0005b030: 685f 626f 7272 6f77 5f69 6e74 6572 6573  h_borrow_interes
+0005b040: 7428 7365 6c66 2c20 636f 6465 3a20 4f70  t(self, code: Op
+0005b050: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+0005b060: 6e65 2c20 7379 6d62 6f6c 3a20 4f70 7469  ne, symbol: Opti
+0005b070: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+0005b080: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
+0005b090: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
+0005b0a0: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
+0005b0b0: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
+0005b0c0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0005b0d0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+0005b0e0: 6820 7468 6520 696e 7465 7265 7374 206f  h the interest o
+0005b0f0: 7765 6420 6279 2074 6865 2075 7365 7220  wed by the user 
+0005b100: 666f 7220 626f 7272 6f77 696e 6720 6375  for borrowing cu
+0005b110: 7272 656e 6379 2066 6f72 206d 6172 6769  rrency for margi
+0005b120: 6e20 7472 6164 696e 670a 2020 2020 2020  n trading.      
+0005b130: 2020 3a70 6172 616d 2073 7472 7c4e 6f6e    :param str|Non
+0005b140: 6520 636f 6465 3a20 756e 6966 6965 6420  e code: unified 
+0005b150: 6375 7272 656e 6379 2063 6f64 650a 2020  currency code.  
+0005b160: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0005b170: 7c4e 6f6e 6520 7379 6d62 6f6c 3a20 756e  |None symbol: un
+0005b180: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
+0005b190: 626f 6c20 7768 656e 2066 6574 6368 2069  bol when fetch i
+0005b1a0: 6e74 6572 6573 7420 696e 2069 736f 6c61  nterest in isola
+0005b1b0: 7465 6420 6d61 726b 6574 730a 2020 2020  ted markets.    
+0005b1c0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+0005b1d0: 6f6e 6520 7369 6e63 653a 2074 6865 2065  one since: the e
+0005b1e0: 6172 6c69 6573 7420 7469 6d65 2069 6e20  arliest time in 
+0005b1f0: 6d73 2074 6f20 6665 7463 6820 626f 7272  ms to fetch borr
+0005b200: 726f 7720 696e 7465 7265 7374 2066 6f72  row interest for
+0005b210: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0005b220: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
+0005b230: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
+0005b240: 6572 206f 6620 7374 7275 6374 7572 6573  er of structures
+0005b250: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
+0005b260: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0005b270: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0005b280: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0005b290: 6963 2074 6f20 7468 6520 6269 6e61 6e63  ic to the binanc
+0005b2a0: 6520 6170 6920 656e 6470 6f69 6e74 0a20  e api endpoint. 
+0005b2b0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0005b2c0: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
+0005b2d0: 6620 6062 6f72 726f 7720 696e 7465 7265  f `borrow intere
+0005b2e0: 7374 2073 7472 7563 7475 7265 7320 3c68  st structures <h
+0005b2f0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+0005b300: 2e63 6f6d 2f23 2f3f 6964 3d62 6f72 726f  .com/#/?id=borro
+0005b310: 772d 696e 7465 7265 7374 2d73 7472 7563  w-interest-struc
+0005b320: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+0005b330: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+0005b340: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0005b350: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0005b360: 207b 7d0a 2020 2020 2020 2020 6d61 726b   {}.        mark
+0005b370: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
+0005b380: 2020 6966 2063 6f64 6520 6973 206e 6f74    if code is not
+0005b390: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0005b3a0: 2020 2063 7572 7265 6e63 7920 3d20 7365     currency = se
+0005b3b0: 6c66 2e63 7572 7265 6e63 7928 636f 6465  lf.currency(code
+0005b3c0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+0005b3d0: 7175 6573 745b 2761 7373 6574 275d 203d  quest['asset'] =
+0005b3e0: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
+0005b3f0: 2020 2020 2020 2020 6966 2073 696e 6365          if since
+0005b400: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0005b410: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0005b420: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
+0005b430: 2073 696e 6365 0a20 2020 2020 2020 2069   since.        i
+0005b440: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+0005b450: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0005b460: 2072 6571 7565 7374 5b27 7369 7a65 275d   request['size']
+0005b470: 203d 206c 696d 6974 0a20 2020 2020 2020   = limit.       
+0005b480: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
+0005b490: 7420 4e6f 6e65 3a20 2023 2049 736f 6c61  t None:  # Isola
+0005b4a0: 7465 640a 2020 2020 2020 2020 2020 2020  ted.            
+0005b4b0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+0005b4c0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+0005b4d0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0005b4e0: 5b27 6973 6f6c 6174 6564 5379 6d62 6f6c  ['isolatedSymbol
+0005b4f0: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
+0005b500: 5d0a 2020 2020 2020 2020 7265 7370 6f6e  ].        respon
+0005b510: 7365 203d 2073 656c 662e 7361 7069 4765  se = self.sapiGe
+0005b520: 744d 6172 6769 6e49 6e74 6572 6573 7448  tMarginInterestH
+0005b530: 6973 746f 7279 2873 656c 662e 6578 7465  istory(self.exte
+0005b540: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+0005b550: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+0005b560: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+0005b570: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005b580: 2022 726f 7773 223a 5b0a 2020 2020 2020   "rows":[.      
+0005b590: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0005b5a0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0005b5b0: 2020 2020 2020 2020 2020 2020 2269 736f              "iso
+0005b5c0: 6c61 7465 6453 796d 626f 6c22 3a20 2242  latedSymbol": "B
+0005b5d0: 4e42 5553 4454 222c 2020 2320 6973 6f6c  NBUSDT",  # isol
+0005b5e0: 6174 6564 2073 796d 626f 6c2c 2077 696c  ated symbol, wil
+0005b5f0: 6c20 6e6f 7420 6265 2072 6574 7572 6e65  l not be returne
+0005b600: 6420 666f 7220 6372 6f73 7365 6420 6d61  d for crossed ma
+0005b610: 7267 696e 0a20 2020 2020 2020 2023 2020  rgin.        #  
+0005b620: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0005b630: 6173 7365 7422 3a20 2242 4e42 222c 0a20  asset": "BNB",. 
+0005b640: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005b650: 2020 2020 2020 2020 2022 696e 7465 7265           "intere
+0005b660: 7374 223a 2022 302e 3032 3431 3436 3637  st": "0.02414667
+0005b670: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005b680: 2020 2020 2020 2020 2020 2020 2022 696e               "in
+0005b690: 7465 7265 7374 4163 6375 7265 6454 696d  terestAccuredTim
+0005b6a0: 6522 3a20 3135 3636 3831 3336 3030 3030  e": 156681360000
+0005b6b0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+0005b6c0: 2020 2020 2020 2020 2020 2020 2022 696e               "in
+0005b6d0: 7465 7265 7374 5261 7465 223a 2022 302e  terestRate": "0.
+0005b6e0: 3031 3630 3030 3030 222c 0a20 2020 2020  01600000",.     
+0005b6f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0005b700: 2020 2020 2022 7072 696e 6369 7061 6c22       "principal"
+0005b710: 3a20 2233 362e 3232 3030 3030 3030 222c  : "36.22000000",
+0005b720: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005b730: 2020 2020 2020 2020 2020 2022 7479 7065             "type
+0005b740: 223a 2022 4f4e 5f42 4f52 524f 5722 0a20  ": "ON_BORROW". 
+0005b750: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005b760: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0005b770: 2020 2020 2020 2020 205d 2c0a 2020 2020           ],.    
+0005b780: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0005b790: 6f74 616c 223a 2031 0a20 2020 2020 2020  otal": 1.       
+0005b7a0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+0005b7b0: 2023 0a20 2020 2020 2020 2072 6f77 7320   #.        rows 
+0005b7c0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0005b7d0: 6528 7265 7370 6f6e 7365 2c20 2772 6f77  e(response, 'row
+0005b7e0: 7327 290a 2020 2020 2020 2020 696e 7465  s').        inte
+0005b7f0: 7265 7374 203d 2073 656c 662e 7061 7273  rest = self.pars
+0005b800: 655f 626f 7272 6f77 5f69 6e74 6572 6573  e_borrow_interes
+0005b810: 7473 2872 6f77 732c 206d 6172 6b65 7429  ts(rows, market)
+0005b820: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0005b830: 7365 6c66 2e66 696c 7465 725f 6279 5f63  self.filter_by_c
+0005b840: 7572 7265 6e63 795f 7369 6e63 655f 6c69  urrency_since_li
+0005b850: 6d69 7428 696e 7465 7265 7374 2c20 636f  mit(interest, co
+0005b860: 6465 2c20 7369 6e63 652c 206c 696d 6974  de, since, limit
+0005b870: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
+0005b880: 5f62 6f72 726f 775f 696e 7465 7265 7374  _borrow_interest
+0005b890: 2873 656c 662c 2069 6e66 6f2c 206d 6172  (self, info, mar
+0005b8a0: 6b65 743d 4e6f 6e65 293a 0a20 2020 2020  ket=None):.     
+0005b8b0: 2020 2073 796d 626f 6c20 3d20 7365 6c66     symbol = self
+0005b8c0: 2e73 6166 655f 7374 7269 6e67 2869 6e66  .safe_string(inf
+0005b8d0: 6f2c 2027 6973 6f6c 6174 6564 5379 6d62  o, 'isolatedSymb
+0005b8e0: 6f6c 2729 0a20 2020 2020 2020 2074 696d  ol').        tim
+0005b8f0: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
+0005b900: 6665 5f6e 756d 6265 7228 696e 666f 2c20  fe_number(info, 
+0005b910: 2769 6e74 6572 6573 7441 6363 7572 6564  'interestAccured
+0005b920: 5469 6d65 2729 0a20 2020 2020 2020 206d  Time').        m
+0005b930: 6172 6769 6e4d 6f64 6520 3d20 2763 726f  arginMode = 'cro
+0005b940: 7373 2720 6966 2028 7379 6d62 6f6c 2069  ss' if (symbol i
+0005b950: 7320 4e6f 6e65 2920 656c 7365 2027 6973  s None) else 'is
+0005b960: 6f6c 6174 6564 270a 2020 2020 2020 2020  olated'.        
+0005b970: 7265 7475 726e 207b 0a20 2020 2020 2020  return {.       
+0005b980: 2020 2020 2027 6163 636f 756e 7427 3a20       'account': 
+0005b990: 2763 726f 7373 2720 6966 2028 7379 6d62  'cross' if (symb
+0005b9a0: 6f6c 2069 7320 4e6f 6e65 2920 656c 7365  ol is None) else
+0005b9b0: 2073 796d 626f 6c2c 0a20 2020 2020 2020   symbol,.       
+0005b9c0: 2020 2020 2027 7379 6d62 6f6c 273a 2073       'symbol': s
+0005b9d0: 796d 626f 6c2c 0a20 2020 2020 2020 2020  ymbol,.         
+0005b9e0: 2020 2027 6d61 7267 696e 4d6f 6465 273a     'marginMode':
+0005b9f0: 206d 6172 6769 6e4d 6f64 652c 0a20 2020   marginMode,.   
+0005ba00: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
+0005ba10: 6379 273a 2073 656c 662e 7361 6665 5f63  cy': self.safe_c
+0005ba20: 7572 7265 6e63 795f 636f 6465 2873 656c  urrency_code(sel
+0005ba30: 662e 7361 6665 5f73 7472 696e 6728 696e  f.safe_string(in
+0005ba40: 666f 2c20 2761 7373 6574 2729 292c 0a20  fo, 'asset')),. 
+0005ba50: 2020 2020 2020 2020 2020 2027 696e 7465             'inte
+0005ba60: 7265 7374 273a 2073 656c 662e 7361 6665  rest': self.safe
+0005ba70: 5f6e 756d 6265 7228 696e 666f 2c20 2769  _number(info, 'i
+0005ba80: 6e74 6572 6573 7427 292c 0a20 2020 2020  nterest'),.     
+0005ba90: 2020 2020 2020 2027 696e 7465 7265 7374         'interest
+0005baa0: 5261 7465 273a 2073 656c 662e 7361 6665  Rate': self.safe
+0005bab0: 5f6e 756d 6265 7228 696e 666f 2c20 2769  _number(info, 'i
+0005bac0: 6e74 6572 6573 7452 6174 6527 292c 0a20  nterestRate'),. 
+0005bad0: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
+0005bae0: 6e74 426f 7272 6f77 6564 273a 2073 656c  ntBorrowed': sel
+0005baf0: 662e 7361 6665 5f6e 756d 6265 7228 696e  f.safe_number(in
+0005bb00: 666f 2c20 2770 7269 6e63 6970 616c 2729  fo, 'principal')
+0005bb10: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0005bb20: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
+0005bb30: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
+0005bb40: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
+0005bb50: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
+0005bb60: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
+0005bb70: 2020 2027 696e 666f 273a 2069 6e66 6f2c     'info': info,
+0005bb80: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
+0005bb90: 6465 6620 7265 7061 795f 6d61 7267 696e  def repay_margin
+0005bba0: 2873 656c 662c 2063 6f64 653a 2073 7472  (self, code: str
+0005bbb0: 2c20 616d 6f75 6e74 2c20 7379 6d62 6f6c  , amount, symbol
+0005bbc0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+0005bbd0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+0005bbe0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+0005bbf0: 2020 2020 2020 2020 7265 7061 7920 626f          repay bo
+0005bc00: 7272 6f77 6564 206d 6172 6769 6e20 616e  rrowed margin an
+0005bc10: 6420 696e 7465 7265 7374 0a20 2020 2020  d interest.     
+0005bc20: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
+0005bc30: 696e 616e 6365 2d64 6f63 732e 6769 7468  inance-docs.gith
+0005bc40: 7562 2e69 6f2f 6170 6964 6f63 732f 7370  ub.io/apidocs/sp
+0005bc50: 6f74 2f65 6e2f 236d 6172 6769 6e2d 6163  ot/en/#margin-ac
+0005bc60: 636f 756e 742d 7265 7061 792d 6d61 7267  count-repay-marg
+0005bc70: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
+0005bc80: 6d20 7374 7220 636f 6465 3a20 756e 6966  m str code: unif
+0005bc90: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
+0005bca0: 6520 6f66 2074 6865 2063 7572 7265 6e63  e of the currenc
+0005bcb0: 7920 746f 2072 6570 6179 0a20 2020 2020  y to repay.     
+0005bcc0: 2020 203a 7061 7261 6d20 666c 6f61 7420     :param float 
+0005bcd0: 616d 6f75 6e74 3a20 7468 6520 616d 6f75  amount: the amou
+0005bce0: 6e74 2074 6f20 7265 7061 790a 2020 2020  nt to repay.    
+0005bcf0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
+0005bd00: 6f6e 6520 7379 6d62 6f6c 3a20 756e 6966  one symbol: unif
+0005bd10: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
+0005bd20: 6c2c 2072 6571 7569 7265 6420 666f 7220  l, required for 
+0005bd30: 6973 6f6c 6174 6564 206d 6172 6769 6e0a  isolated margin.
+0005bd40: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0005bd50: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+0005bd60: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0005bd70: 6369 6669 6320 746f 2074 6865 2062 696e  cific to the bin
+0005bd80: 616e 6365 2061 7069 2065 6e64 706f 696e  ance api endpoin
+0005bd90: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+0005bda0: 6e73 2064 6963 743a 2061 2060 6d61 7267  ns dict: a `marg
+0005bdb0: 696e 206c 6f61 6e20 7374 7275 6374 7572  in loan structur
+0005bdc0: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+0005bdd0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6d  ccxt.com/#/?id=m
+0005bde0: 6172 6769 6e2d 6c6f 616e 2d73 7472 7563  argin-loan-struc
+0005bdf0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+0005be00: 2222 0a20 2020 2020 2020 206d 6172 6769  "".        margi
+0005be10: 6e4d 6f64 652c 2071 7565 7279 203d 2073  nMode, query = s
+0005be20: 656c 662e 6861 6e64 6c65 5f6d 6172 6769  elf.handle_margi
+0005be30: 6e5f 6d6f 6465 5f61 6e64 5f70 6172 616d  n_mode_and_param
+0005be40: 7328 2772 6570 6179 4d61 7267 696e 272c  s('repayMargin',
+0005be50: 2070 6172 616d 7329 2020 2320 6372 6f73   params)  # cros
+0005be60: 7320 6f72 2069 736f 6c61 7465 640a 2020  s or isolated.  
+0005be70: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+0005be80: 5f72 6571 7569 7265 645f 6d61 7267 696e  _required_margin
+0005be90: 5f61 7267 756d 656e 7428 2772 6570 6179  _argument('repay
+0005bea0: 4d61 7267 696e 272c 2073 796d 626f 6c2c  Margin', symbol,
+0005beb0: 206d 6172 6769 6e4d 6f64 6529 0a20 2020   marginMode).   
+0005bec0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
+0005bed0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+0005bee0: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+0005bef0: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+0005bf00: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0005bf10: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0005bf20: 2761 7373 6574 273a 2063 7572 7265 6e63  'asset': currenc
+0005bf30: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
+0005bf40: 2020 2020 2027 616d 6f75 6e74 273a 2073       'amount': s
+0005bf50: 656c 662e 6375 7272 656e 6379 5f74 6f5f  elf.currency_to_
+0005bf60: 7072 6563 6973 696f 6e28 636f 6465 2c20  precision(code, 
+0005bf70: 616d 6f75 6e74 292c 0a20 2020 2020 2020  amount),.       
+0005bf80: 207d 0a20 2020 2020 2020 2069 6620 7379   }.        if sy
+0005bf90: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+0005bfa0: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+0005bfb0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+0005bfc0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+0005bfd0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0005bfe0: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+0005bff0: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+0005c000: 2020 2020 7265 7175 6573 745b 2769 7349      request['isI
+0005c010: 736f 6c61 7465 6427 5d20 3d20 2754 5255  solated'] = 'TRU
+0005c020: 4527 0a20 2020 2020 2020 2072 6573 706f  E'.        respo
+0005c030: 6e73 6520 3d20 7365 6c66 2e73 6170 6950  nse = self.sapiP
+0005c040: 6f73 744d 6172 6769 6e52 6570 6179 2873  ostMarginRepay(s
+0005c050: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0005c060: 7374 2c20 7175 6572 7929 290a 2020 2020  st, query)).    
+0005c070: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005c080: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0005c090: 2020 2020 2020 2020 2274 7261 6e49 6422          "tranId"
+0005c0a0: 3a20 3130 3839 3838 3235 3032 3635 2c0a  : 108988250265,.
+0005c0b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005c0c0: 2020 2263 6c69 656e 7454 6167 223a 2222    "clientTag":""
+0005c0d0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+0005c0e0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0005c0f0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+0005c100: 6172 7365 5f6d 6172 6769 6e5f 6c6f 616e  arse_margin_loan
+0005c110: 2872 6573 706f 6e73 652c 2063 7572 7265  (response, curre
+0005c120: 6e63 7929 0a0a 2020 2020 6465 6620 626f  ncy)..    def bo
+0005c130: 7272 6f77 5f6d 6172 6769 6e28 7365 6c66  rrow_margin(self
+0005c140: 2c20 636f 6465 3a20 7374 722c 2061 6d6f  , code: str, amo
+0005c150: 756e 742c 2073 796d 626f 6c3a 204f 7074  unt, symbol: Opt
+0005c160: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+0005c170: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+0005c180: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0005c190: 2020 2063 7265 6174 6520 6120 6c6f 616e     create a loan
+0005c1a0: 2074 6f20 626f 7272 6f77 206d 6172 6769   to borrow margi
+0005c1b0: 6e0a 2020 2020 2020 2020 7365 6520 6874  n.        see ht
+0005c1c0: 7470 733a 2f2f 6269 6e61 6e63 652d 646f  tps://binance-do
+0005c1d0: 6373 2e67 6974 6875 622e 696f 2f61 7069  cs.github.io/api
+0005c1e0: 646f 6373 2f73 706f 742f 656e 2f23 6d61  docs/spot/en/#ma
+0005c1f0: 7267 696e 2d61 6363 6f75 6e74 2d62 6f72  rgin-account-bor
+0005c200: 726f 772d 6d61 7267 696e 0a20 2020 2020  row-margin.     
+0005c210: 2020 203a 7061 7261 6d20 7374 7220 636f     :param str co
+0005c220: 6465 3a20 756e 6966 6965 6420 6375 7272  de: unified curr
+0005c230: 656e 6379 2063 6f64 6520 6f66 2074 6865  ency code of the
+0005c240: 2063 7572 7265 6e63 7920 746f 2062 6f72   currency to bor
+0005c250: 726f 770a 2020 2020 2020 2020 3a70 6172  row.        :par
+0005c260: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+0005c270: 2074 6865 2061 6d6f 756e 7420 746f 2062   the amount to b
+0005c280: 6f72 726f 770a 2020 2020 2020 2020 3a70  orrow.        :p
+0005c290: 6172 616d 2073 7472 7c4e 6f6e 6520 7379  aram str|None sy
+0005c2a0: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
+0005c2b0: 726b 6574 2073 796d 626f 6c2c 2072 6571  rket symbol, req
+0005c2c0: 7569 7265 6420 666f 7220 6973 6f6c 6174  uired for isolat
+0005c2d0: 6564 206d 6172 6769 6e0a 2020 2020 2020  ed margin.      
+0005c2e0: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+0005c2f0: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+0005c300: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+0005c310: 746f 2074 6865 2062 696e 616e 6365 2061  to the binance a
+0005c320: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+0005c330: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+0005c340: 743a 2061 2060 6d61 7267 696e 206c 6f61  t: a `margin loa
+0005c350: 6e20 7374 7275 6374 7572 6520 3c68 7474  n structure <htt
+0005c360: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+0005c370: 6f6d 2f23 2f3f 6964 3d6d 6172 6769 6e2d  om/#/?id=margin-
+0005c380: 6c6f 616e 2d73 7472 7563 7475 7265 3e60  loan-structure>`
+0005c390: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0005c3a0: 2020 2020 206d 6172 6769 6e4d 6f64 652c       marginMode,
+0005c3b0: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
+0005c3c0: 6e64 6c65 5f6d 6172 6769 6e5f 6d6f 6465  ndle_margin_mode
+0005c3d0: 5f61 6e64 5f70 6172 616d 7328 2762 6f72  _and_params('bor
+0005c3e0: 726f 774d 6172 6769 6e27 2c20 7061 7261  rowMargin', para
+0005c3f0: 6d73 2920 2023 2063 726f 7373 206f 7220  ms)  # cross or 
+0005c400: 6973 6f6c 6174 6564 0a20 2020 2020 2020  isolated.       
+0005c410: 2073 656c 662e 6368 6563 6b5f 7265 7175   self.check_requ
+0005c420: 6972 6564 5f6d 6172 6769 6e5f 6172 6775  ired_margin_argu
+0005c430: 6d65 6e74 2827 626f 7272 6f77 4d61 7267  ment('borrowMarg
+0005c440: 696e 272c 2073 796d 626f 6c2c 206d 6172  in', symbol, mar
+0005c450: 6769 6e4d 6f64 6529 0a20 2020 2020 2020  ginMode).       
+0005c460: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+0005c470: 7473 2829 0a20 2020 2020 2020 2063 7572  ts().        cur
+0005c480: 7265 6e63 7920 3d20 7365 6c66 2e63 7572  rency = self.cur
+0005c490: 7265 6e63 7928 636f 6465 290a 2020 2020  rency(code).    
+0005c4a0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+0005c4b0: 2020 2020 2020 2020 2020 2020 2761 7373              'ass
+0005c4c0: 6574 273a 2063 7572 7265 6e63 795b 2769  et': currency['i
+0005c4d0: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+0005c4e0: 2027 616d 6f75 6e74 273a 2073 656c 662e   'amount': self.
+0005c4f0: 6375 7272 656e 6379 5f74 6f5f 7072 6563  currency_to_prec
+0005c500: 6973 696f 6e28 636f 6465 2c20 616d 6f75  ision(code, amou
+0005c510: 6e74 292c 0a20 2020 2020 2020 207d 0a20  nt),.        }. 
+0005c520: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+0005c530: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0005c540: 2020 2020 2020 2020 2020 6d61 726b 6574            market
+0005c550: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+0005c560: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
+0005c570: 2020 2072 6571 7565 7374 5b27 7379 6d62     request['symb
+0005c580: 6f6c 275d 203d 206d 6172 6b65 745b 2769  ol'] = market['i
+0005c590: 6427 5d0a 2020 2020 2020 2020 2020 2020  d'].            
+0005c5a0: 7265 7175 6573 745b 2769 7349 736f 6c61  request['isIsola
+0005c5b0: 7465 6427 5d20 3d20 2754 5255 4527 0a20  ted'] = 'TRUE'. 
+0005c5c0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0005c5d0: 3d20 7365 6c66 2e73 6170 6950 6f73 744d  = self.sapiPostM
+0005c5e0: 6172 6769 6e4c 6f61 6e28 7365 6c66 2e65  arginLoan(self.e
+0005c5f0: 7874 656e 6428 7265 7175 6573 742c 2071  xtend(request, q
+0005c600: 7565 7279 2929 0a20 2020 2020 2020 2023  uery)).        #
+0005c610: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0005c620: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005c630: 2020 2022 7472 616e 4964 223a 2031 3038     "tranId": 108
+0005c640: 3938 3832 3530 3236 352c 0a20 2020 2020  988250265,.     
+0005c650: 2020 2023 2020 2020 2020 2020 2022 636c     #         "cl
+0005c660: 6965 6e74 5461 6722 3a22 220a 2020 2020  ientTag":"".    
+0005c670: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0005c680: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+0005c690: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+0005c6a0: 6d61 7267 696e 5f6c 6f61 6e28 7265 7370  margin_loan(resp
+0005c6b0: 6f6e 7365 2c20 6375 7272 656e 6379 290a  onse, currency).
+0005c6c0: 0a20 2020 2064 6566 2070 6172 7365 5f6d  .    def parse_m
+0005c6d0: 6172 6769 6e5f 6c6f 616e 2873 656c 662c  argin_loan(self,
+0005c6e0: 2069 6e66 6f2c 2063 7572 7265 6e63 793d   info, currency=
+0005c6f0: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
+0005c700: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0005c710: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005c720: 2020 2022 7472 616e 4964 223a 2031 3038     "tranId": 108
+0005c730: 3938 3832 3530 3236 352c 0a20 2020 2020  988250265,.     
+0005c740: 2020 2023 2020 2020 2020 2020 2022 636c     #         "cl
+0005c750: 6965 6e74 5461 6722 3a22 220a 2020 2020  ientTag":"".    
+0005c760: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0005c770: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+0005c780: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
+0005c790: 2020 2027 6964 273a 2073 656c 662e 7361     'id': self.sa
+0005c7a0: 6665 5f69 6e74 6567 6572 2869 6e66 6f2c  fe_integer(info,
+0005c7b0: 2027 7472 616e 4964 2729 2c0a 2020 2020   'tranId'),.    
+0005c7c0: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
+0005c7d0: 7927 3a20 7365 6c66 2e73 6166 655f 6375  y': self.safe_cu
+0005c7e0: 7272 656e 6379 5f63 6f64 6528 4e6f 6e65  rrency_code(None
+0005c7f0: 2c20 6375 7272 656e 6379 292c 0a20 2020  , currency),.   
+0005c800: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
+0005c810: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+0005c820: 2020 2020 2027 7379 6d62 6f6c 273a 204e       'symbol': N
+0005c830: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0005c840: 2027 7469 6d65 7374 616d 7027 3a20 4e6f   'timestamp': No
+0005c850: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+0005c860: 2764 6174 6574 696d 6527 3a20 4e6f 6e65  'datetime': None
+0005c870: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+0005c880: 6e66 6f27 3a20 696e 666f 2c0a 2020 2020  nfo': info,.    
+0005c890: 2020 2020 7d0a 0a20 2020 2064 6566 2066      }..    def f
+0005c8a0: 6574 6368 5f6f 7065 6e5f 696e 7465 7265  etch_open_intere
+0005c8b0: 7374 5f68 6973 746f 7279 2873 656c 662c  st_history(self,
+0005c8c0: 2073 796d 626f 6c3a 2073 7472 2c20 7469   symbol: str, ti
+0005c8d0: 6d65 6672 616d 653d 2735 6d27 2c20 7369  meframe='5m', si
+0005c8e0: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
+0005c8f0: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
+0005c900: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+0005c910: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+0005c920: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+0005c930: 2020 2020 2020 2020 5265 7472 6965 7665          Retrieve
+0005c940: 7320 7468 6520 6f70 656e 2069 6e74 6572  s the open inter
+0005c950: 6573 7420 6869 7374 6f72 7920 6f66 2061  est history of a
+0005c960: 2063 7572 7265 6e63 790a 2020 2020 2020   currency.      
+0005c970: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
+0005c980: 626f 6c3a 2055 6e69 6669 6564 2043 4358  bol: Unified CCX
+0005c990: 5420 6d61 726b 6574 2073 796d 626f 6c0a  T market symbol.
+0005c9a0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0005c9b0: 7472 2074 696d 6566 7261 6d65 3a20 2235  tr timeframe: "5
+0005c9c0: 6d22 2c22 3135 6d22 2c22 3330 6d22 2c22  m","15m","30m","
+0005c9d0: 3168 222c 2232 6822 2c22 3468 222c 2236  1h","2h","4h","6
+0005c9e0: 6822 2c22 3132 6822 2c20 6f72 2022 3164  h","12h", or "1d
+0005c9f0: 220a 2020 2020 2020 2020 3a70 6172 616d  ".        :param
+0005ca00: 2069 6e74 7c4e 6f6e 6520 7369 6e63 653a   int|None since:
+0005ca10: 2074 6865 2074 696d 6528 6d73 2920 6f66   the time(ms) of
+0005ca20: 2074 6865 2065 6172 6c69 6573 7420 7265   the earliest re
+0005ca30: 636f 7264 2074 6f20 7265 7472 6965 7665  cord to retrieve
+0005ca40: 2075 6e69 7820 7469 6d65 7374 616d 700a   unix timestamp.
+0005ca50: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0005ca60: 6e74 7c4e 6f6e 6520 6c69 6d69 743a 2064  nt|None limit: d
+0005ca70: 6566 6175 6c74 2033 302c 206d 6178 2035  efault 30, max 5
+0005ca80: 3030 0a20 2020 2020 2020 203a 7061 7261  00.        :para
+0005ca90: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+0005caa0: 7863 6861 6e67 6520 7370 6563 6966 6963  xchange specific
+0005cab0: 2070 6172 616d 6574 6572 730a 2020 2020   parameters.    
+0005cac0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+0005cad0: 6f6e 6520 7061 7261 6d73 5b27 756e 7469  one params['unti
+0005cae0: 6c27 5d3a 2074 6865 2074 696d 6528 6d73  l']: the time(ms
+0005caf0: 2920 6f66 2074 6865 206c 6174 6573 7420  ) of the latest 
+0005cb00: 7265 636f 7264 2074 6f20 7265 7472 6965  record to retrie
+0005cb10: 7665 2075 6e69 7820 7469 6d65 7374 616d  ve unix timestam
+0005cb20: 700a 2020 2020 2020 2020 3a72 6574 7572  p.        :retur
+0005cb30: 6e73 2064 6963 743a 2061 6e20 6172 7261  ns dict: an arra
+0005cb40: 7920 6f66 2060 6f70 656e 2069 6e74 6572  y of `open inter
+0005cb50: 6573 7420 6869 7374 6f72 7920 7374 7275  est history stru
+0005cb60: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+0005cb70: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+0005cb80: 6964 3d69 6e74 6572 6573 742d 6869 7374  id=interest-hist
+0005cb90: 6f72 792d 7374 7275 6374 7572 653e 600a  ory-structure>`.
+0005cba0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0005cbb0: 2020 2020 6966 2074 696d 6566 7261 6d65      if timeframe
+0005cbc0: 203d 3d20 2731 6d27 3a0a 2020 2020 2020   == '1m':.      
+0005cbd0: 2020 2020 2020 7261 6973 6520 4261 6452        raise BadR
+0005cbe0: 6571 7565 7374 2873 656c 662e 6964 202b  equest(self.id +
+0005cbf0: 2027 6665 7463 684f 7065 6e49 6e74 6572   'fetchOpenInter
+0005cc00: 6573 7448 6973 746f 7279 2063 616e 6e6f  estHistory canno
+0005cc10: 7420 7573 6520 7468 6520 316d 2074 696d  t use the 1m tim
+0005cc20: 6566 7261 6d65 2729 0a20 2020 2020 2020  eframe').       
+0005cc30: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+0005cc40: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+0005cc50: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+0005cc60: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+0005cc70: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+0005cc80: 2020 2020 2020 2020 2020 2770 6572 696f            'perio
+0005cc90: 6427 3a20 7365 6c66 2e73 6166 655f 7374  d': self.safe_st
+0005cca0: 7269 6e67 2873 656c 662e 7469 6d65 6672  ring(self.timefr
+0005ccb0: 616d 6573 2c20 7469 6d65 6672 616d 652c  ames, timeframe,
+0005ccc0: 2074 696d 6566 7261 6d65 292c 0a20 2020   timeframe),.   
+0005ccd0: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
+0005cce0: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+0005ccf0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0005cd00: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
+0005cd10: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
+0005cd20: 2020 7379 6d62 6f6c 4b65 7920 3d20 2773    symbolKey = 's
+0005cd30: 796d 626f 6c27 2069 6620 6d61 726b 6574  ymbol' if market
+0005cd40: 5b27 6c69 6e65 6172 275d 2065 6c73 6520  ['linear'] else 
+0005cd50: 2770 6169 7227 0a20 2020 2020 2020 2072  'pair'.        r
+0005cd60: 6571 7565 7374 5b73 796d 626f 6c4b 6579  equest[symbolKey
+0005cd70: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+0005cd80: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
+0005cd90: 6574 5b27 696e 7665 7273 6527 5d3a 0a20  et['inverse']:. 
+0005cda0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0005cdb0: 7374 5b27 636f 6e74 7261 6374 5479 7065  st['contractType
+0005cdc0: 275d 203d 2073 656c 662e 7361 6665 5f73  '] = self.safe_s
+0005cdd0: 7472 696e 6728 7061 7261 6d73 2c20 2763  tring(params, 'c
+0005cde0: 6f6e 7472 6163 7454 7970 6527 2c20 2743  ontractType', 'C
+0005cdf0: 5552 5245 4e54 5f51 5541 5254 4552 2729  URRENT_QUARTER')
+0005ce00: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
+0005ce10: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+0005ce20: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0005ce30: 7374 5b27 7374 6172 7454 696d 6527 5d20  st['startTime'] 
+0005ce40: 3d20 7369 6e63 650a 2020 2020 2020 2020  = since.        
+0005ce50: 756e 7469 6c20 3d20 7365 6c66 2e73 6166  until = self.saf
+0005ce60: 655f 696e 7465 6765 725f 3228 7061 7261  e_integer_2(para
+0005ce70: 6d73 2c20 2775 6e74 696c 272c 2027 7469  ms, 'until', 'ti
+0005ce80: 6c6c 2729 2020 2320 756e 6966 6965 6420  ll')  # unified 
+0005ce90: 696e 206d 696c 6c69 7365 636f 6e64 730a  in milliseconds.
+0005cea0: 2020 2020 2020 2020 656e 6454 696d 6520          endTime 
+0005ceb0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+0005cec0: 6765 7228 7061 7261 6d73 2c20 2765 6e64  ger(params, 'end
+0005ced0: 5469 6d65 272c 2075 6e74 696c 2920 2023  Time', until)  #
+0005cee0: 2065 7863 6861 6e67 652d 7370 6563 6966   exchange-specif
+0005cef0: 6963 2069 6e20 6d69 6c6c 6973 6563 6f6e  ic in millisecon
+0005cf00: 6473 0a20 2020 2020 2020 2070 6172 616d  ds.        param
+0005cf10: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+0005cf20: 7261 6d73 2c20 5b27 656e 6454 696d 6527  rams, ['endTime'
+0005cf30: 2c20 2775 6e74 696c 272c 2027 7469 6c6c  , 'until', 'till
+0005cf40: 275d 290a 2020 2020 2020 2020 6966 2065  ']).        if e
+0005cf50: 6e64 5469 6d65 3a0a 2020 2020 2020 2020  ndTime:.        
+0005cf60: 2020 2020 7265 7175 6573 745b 2765 6e64      request['end
+0005cf70: 5469 6d65 275d 203d 2065 6e64 5469 6d65  Time'] = endTime
+0005cf80: 0a20 2020 2020 2020 2065 6c69 6620 7369  .        elif si
+0005cf90: 6e63 653a 0a20 2020 2020 2020 2020 2020  nce:.           
+0005cfa0: 2069 6620 6c69 6d69 7420 6973 204e 6f6e   if limit is Non
+0005cfb0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0005cfc0: 2020 206c 696d 6974 203d 2033 3020 2023     limit = 30  #
+0005cfd0: 2045 7863 6861 6e67 6520 6465 6661 756c   Exchange defaul
+0005cfe0: 740a 2020 2020 2020 2020 2020 2020 6475  t.            du
+0005cff0: 7261 7469 6f6e 203d 2073 656c 662e 7061  ration = self.pa
+0005d000: 7273 655f 7469 6d65 6672 616d 6528 7469  rse_timeframe(ti
+0005d010: 6d65 6672 616d 6529 0a20 2020 2020 2020  meframe).       
+0005d020: 2020 2020 2072 6571 7565 7374 5b27 656e       request['en
+0005d030: 6454 696d 6527 5d20 3d20 7365 6c66 2e73  dTime'] = self.s
+0005d040: 756d 2873 696e 6365 2c20 6475 7261 7469  um(since, durati
+0005d050: 6f6e 202a 206c 696d 6974 202a 2031 3030  on * limit * 100
+0005d060: 3029 0a20 2020 2020 2020 206d 6574 686f  0).        metho
+0005d070: 6420 3d20 2766 6170 6944 6174 6147 6574  d = 'fapiDataGet
+0005d080: 4f70 656e 496e 7465 7265 7374 4869 7374  OpenInterestHist
+0005d090: 270a 2020 2020 2020 2020 6966 206d 6172  '.        if mar
+0005d0a0: 6b65 745b 2769 6e76 6572 7365 275d 3a0a  ket['inverse']:.
+0005d0b0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+0005d0c0: 6f64 203d 2027 6461 7069 4461 7461 4765  od = 'dapiDataGe
+0005d0d0: 744f 7065 6e49 6e74 6572 6573 7448 6973  tOpenInterestHis
+0005d0e0: 7427 0a20 2020 2020 2020 2072 6573 706f  t'.        respo
+0005d0f0: 6e73 6520 3d20 6765 7461 7474 7228 7365  nse = getattr(se
+0005d100: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
+0005d110: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+0005d120: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+0005d130: 2020 230a 2020 2020 2020 2020 2320 205b    #.        #  [
+0005d140: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005d150: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0005d160: 2020 2020 2022 7379 6d62 6f6c 223a 2242       "symbol":"B
+0005d170: 5443 5553 4454 222c 0a20 2020 2020 2020  TCUSDT",.       
+0005d180: 2023 2020 2020 2020 2020 2020 2273 756d   #          "sum
+0005d190: 4f70 656e 496e 7465 7265 7374 223a 2237  OpenInterest":"7
+0005d1a0: 3533 3735 2e36 3137 3030 3030 3022 2c0a  5375.61700000",.
+0005d1b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005d1c0: 2020 2022 7375 6d4f 7065 6e49 6e74 6572     "sumOpenInter
+0005d1d0: 6573 7456 616c 7565 223a 2233 3234 3838  estValue":"32488
+0005d1e0: 3238 3838 332e 3731 3235 3134 3430 222c  28883.71251440",
+0005d1f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005d200: 2020 2020 2274 696d 6573 7461 6d70 223a      "timestamp":
+0005d210: 3136 3432 3137 3939 3030 3030 300a 2020  1642179900000.  
+0005d220: 2020 2020 2020 2320 2020 2020 207d 2c0a        #      },.
+0005d230: 2020 2020 2020 2020 2320 2020 2020 202e          #      .
+0005d240: 2e2e 0a20 2020 2020 2020 2023 2020 5d0a  ...        #  ].
+0005d250: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0005d260: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0005d270: 7273 655f 6f70 656e 5f69 6e74 6572 6573  rse_open_interes
+0005d280: 7473 2872 6573 706f 6e73 652c 206d 6172  ts(response, mar
+0005d290: 6b65 742c 2073 696e 6365 2c20 6c69 6d69  ket, since, limi
+0005d2a0: 7429 0a0a 2020 2020 6465 6620 6665 7463  t)..    def fetc
+0005d2b0: 685f 6f70 656e 5f69 6e74 6572 6573 7428  h_open_interest(
+0005d2c0: 7365 6c66 2c20 7379 6d62 6f6c 3a20 7374  self, symbol: st
+0005d2d0: 722c 2070 6172 616d 733d 7b7d 293a 0a20  r, params={}):. 
+0005d2e0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0005d2f0: 2020 2072 6574 7269 6576 6573 2074 6865     retrieves the
+0005d300: 206f 7065 6e20 696e 7465 7265 7374 206f   open interest o
+0005d310: 6620 6120 636f 6e74 7261 6374 2074 7261  f a contract tra
+0005d320: 6469 6e67 2070 6169 720a 2020 2020 2020  ding pair.      
+0005d330: 2020 7365 6520 6874 7470 733a 2f2f 6269    see https://bi
+0005d340: 6e61 6e63 652d 646f 6373 2e67 6974 6875  nance-docs.githu
+0005d350: 622e 696f 2f61 7069 646f 6373 2f66 7574  b.io/apidocs/fut
+0005d360: 7572 6573 2f65 6e2f 236f 7065 6e2d 696e  ures/en/#open-in
+0005d370: 7465 7265 7374 0a20 2020 2020 2020 2073  terest.        s
+0005d380: 6565 2068 7474 7073 3a2f 2f62 696e 616e  ee https://binan
+0005d390: 6365 2d64 6f63 732e 6769 7468 7562 2e69  ce-docs.github.i
+0005d3a0: 6f2f 6170 6964 6f63 732f 6465 6c69 7665  o/apidocs/delive
+0005d3b0: 7279 2f65 6e2f 236f 7065 6e2d 696e 7465  ry/en/#open-inte
+0005d3c0: 7265 7374 0a20 2020 2020 2020 2073 6565  rest.        see
+0005d3d0: 2068 7474 7073 3a2f 2f62 696e 616e 6365   https://binance
+0005d3e0: 2d64 6f63 732e 6769 7468 7562 2e69 6f2f  -docs.github.io/
+0005d3f0: 6170 6964 6f63 732f 766f 7074 696f 6e73  apidocs/voptions
+0005d400: 2f65 6e2f 236f 7065 6e2d 696e 7465 7265  /en/#open-intere
+0005d410: 7374 0a20 2020 2020 2020 203a 7061 7261  st.        :para
+0005d420: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
+0005d430: 6966 6965 6420 4343 5854 206d 6172 6b65  ified CCXT marke
+0005d440: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
+0005d450: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
+0005d460: 616d 733a 2065 7863 6861 6e67 6520 7370  ams: exchange sp
+0005d470: 6563 6966 6963 2070 6172 616d 6574 6572  ecific parameter
+0005d480: 730a 2020 2020 2020 2020 3a72 6574 7572  s.        :retur
+0005d490: 6e73 2064 6963 747d 2061 6e20 6f70 656e  ns dict} an open
+0005d4a0: 2069 6e74 6572 6573 7420 7374 7275 6374   interest struct
+0005d4b0: 7572 657b 406c 696e 6b20 6874 7470 733a  ure{@link https:
+0005d4c0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+0005d4d0: 232f 3f69 643d 696e 7465 7265 7374 2d68  #/?id=interest-h
+0005d4e0: 6973 746f 7279 2d73 7472 7563 7475 7265  istory-structure
+0005d4f0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0005d500: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+0005d510: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+0005d520: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+0005d530: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+0005d540: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0005d550: 207b 7d0a 2020 2020 2020 2020 6966 206d   {}.        if m
+0005d560: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+0005d570: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0005d580: 7565 7374 5b27 756e 6465 726c 7969 6e67  uest['underlying
+0005d590: 4173 7365 7427 5d20 3d20 6d61 726b 6574  Asset'] = market
+0005d5a0: 5b27 6261 7365 4964 275d 0a20 2020 2020  ['baseId'].     
+0005d5b0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0005d5c0: 6578 7069 7261 7469 6f6e 275d 203d 2073  expiration'] = s
+0005d5d0: 656c 662e 7979 6d6d 6464 286d 6172 6b65  elf.yymmdd(marke
+0005d5e0: 745b 2765 7870 6972 7927 5d29 0a20 2020  t['expiry']).   
+0005d5f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0005d600: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0005d610: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+0005d620: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+0005d630: 6d65 7468 6f64 203d 2027 6661 7069 5075  method = 'fapiPu
+0005d640: 626c 6963 4765 744f 7065 6e49 6e74 6572  blicGetOpenInter
+0005d650: 6573 7427 0a20 2020 2020 2020 2069 6620  est'.        if 
+0005d660: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
+0005d670: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+0005d680: 7468 6f64 203d 2027 6561 7069 5075 626c  thod = 'eapiPubl
+0005d690: 6963 4765 744f 7065 6e49 6e74 6572 6573  icGetOpenInteres
+0005d6a0: 7427 0a20 2020 2020 2020 2065 6c69 6620  t'.        elif 
+0005d6b0: 6d61 726b 6574 5b27 696e 7665 7273 6527  market['inverse'
+0005d6c0: 5d3a 0a20 2020 2020 2020 2020 2020 206d  ]:.            m
+0005d6d0: 6574 686f 6420 3d20 2764 6170 6950 7562  ethod = 'dapiPub
+0005d6e0: 6c69 6347 6574 4f70 656e 496e 7465 7265  licGetOpenIntere
+0005d6f0: 7374 270a 2020 2020 2020 2020 7265 7370  st'.        resp
+0005d700: 6f6e 7365 203d 2067 6574 6174 7472 2873  onse = getattr(s
+0005d710: 656c 662c 206d 6574 686f 6429 2873 656c  elf, method)(sel
+0005d720: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0005d730: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0005d740: 2020 2023 0a20 2020 2020 2020 2023 2066     #.        # f
+0005d750: 7574 7572 6573 2866 6170 6929 0a20 2020  utures(fapi).   
+0005d760: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0005d770: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0005d780: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+0005d790: 223a 2022 4554 4855 5344 545f 3233 3033  ": "ETHUSDT_2303
+0005d7a0: 3331 222c 0a20 2020 2020 2020 2023 2020  31",.        #  
+0005d7b0: 2020 2020 2020 2022 6f70 656e 496e 7465         "openInte
+0005d7c0: 7265 7374 223a 2022 3233 3538 312e 3637  rest": "23581.67
+0005d7d0: 3722 2c0a 2020 2020 2020 2020 2320 2020  7",.        #   
+0005d7e0: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
+0005d7f0: 3737 3335 3638 3732 3236 350a 2020 2020  77356872265.    
+0005d800: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0005d810: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005d820: 6675 7475 7265 7328 6461 7069 290a 2020  futures(dapi).  
+0005d830: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005d840: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0005d850: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
+0005d860: 6c22 3a20 2245 5448 5553 445f 5045 5250  l": "ETHUSD_PERP
+0005d870: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005d880: 2020 2020 2022 7061 6972 223a 2022 4554       "pair": "ET
+0005d890: 4855 5344 222c 0a20 2020 2020 2020 2023  HUSD",.        #
+0005d8a0: 2020 2020 2020 2020 2022 6f70 656e 496e           "openIn
+0005d8b0: 7465 7265 7374 223a 2022 3236 3534 3234  terest": "265424
+0005d8c0: 3336 222c 0a20 2020 2020 2020 2023 2020  36",.        #  
+0005d8d0: 2020 2020 2020 2022 636f 6e74 7261 6374         "contract
+0005d8e0: 5479 7065 223a 2022 5045 5250 4554 5541  Type": "PERPETUA
+0005d8f0: 4c22 2c0a 2020 2020 2020 2020 2320 2020  L",.        #   
+0005d900: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
+0005d910: 3737 3336 3032 3732 3232 340a 2020 2020  77360272224.    
+0005d920: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0005d930: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005d940: 6f70 7469 6f6e 7328 6561 7069 290a 2020  options(eapi).  
+0005d950: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005d960: 2320 2020 2020 5b0a 2020 2020 2020 2020  #     [.        
+0005d970: 2320 2020 2020 2020 2020 7b0a 2020 2020  #         {.    
+0005d980: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0005d990: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
+0005d9a0: 2d32 3330 3232 352d 3136 3235 2d43 222c  -230225-1625-C",
+0005d9b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005d9c0: 2020 2020 2020 2022 7375 6d4f 7065 6e49         "sumOpenI
+0005d9d0: 6e74 6572 6573 7422 3a20 2234 3630 2e35  nterest": "460.5
+0005d9e0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0005d9f0: 2020 2020 2020 2020 2020 2273 756d 4f70            "sumOp
+0005da00: 656e 496e 7465 7265 7374 5573 6422 3a20  enInterestUsd": 
+0005da10: 2237 3334 3935 372e 3433 3538 3039 3231  "734957.43580921
+0005da20: 3530 222c 0a20 2020 2020 2020 2023 2020  50",.        #  
+0005da30: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
+0005da40: 7374 616d 7022 3a20 2231 3637 3733 3034  stamp": "1677304
+0005da50: 3836 3030 3030 220a 2020 2020 2020 2020  860000".        
+0005da60: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+0005da70: 2020 2020 2320 2020 2020 5d0a 2020 2020      #     ].    
+0005da80: 2020 2020 230a 2020 2020 2020 2020 6966      #.        if
+0005da90: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
+0005daa0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
+0005dab0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+0005dac0: 5f6f 7065 6e5f 696e 7465 7265 7374 7328  _open_interests(
+0005dad0: 7265 7370 6f6e 7365 2c20 6d61 726b 6574  response, market
+0005dae0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0005daf0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0005db00: 726e 2073 656c 662e 7061 7273 655f 6f70  rn self.parse_op
+0005db10: 656e 5f69 6e74 6572 6573 7428 7265 7370  en_interest(resp
+0005db20: 6f6e 7365 2c20 6d61 726b 6574 290a 0a20  onse, market).. 
+0005db30: 2020 2064 6566 2070 6172 7365 5f6f 7065     def parse_ope
+0005db40: 6e5f 696e 7465 7265 7374 2873 656c 662c  n_interest(self,
+0005db50: 2069 6e74 6572 6573 742c 206d 6172 6b65   interest, marke
+0005db60: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
+0005db70: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
+0005db80: 662e 7361 6665 5f69 6e74 6567 6572 5f32  f.safe_integer_2
+0005db90: 2869 6e74 6572 6573 742c 2027 7469 6d65  (interest, 'time
+0005dba0: 7374 616d 7027 2c20 2774 696d 6527 290a  stamp', 'time').
+0005dbb0: 2020 2020 2020 2020 6964 203d 2073 656c          id = sel
+0005dbc0: 662e 7361 6665 5f73 7472 696e 6728 696e  f.safe_string(in
+0005dbd0: 7465 7265 7374 2c20 2773 796d 626f 6c27  terest, 'symbol'
+0005dbe0: 290a 2020 2020 2020 2020 616d 6f75 6e74  ).        amount
+0005dbf0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+0005dc00: 6265 725f 3228 696e 7465 7265 7374 2c20  ber_2(interest, 
+0005dc10: 2773 756d 4f70 656e 496e 7465 7265 7374  'sumOpenInterest
+0005dc20: 272c 2027 6f70 656e 496e 7465 7265 7374  ', 'openInterest
+0005dc30: 2729 0a20 2020 2020 2020 2076 616c 7565  ').        value
+0005dc40: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+0005dc50: 6265 725f 3228 696e 7465 7265 7374 2c20  ber_2(interest, 
+0005dc60: 2773 756d 4f70 656e 496e 7465 7265 7374  'sumOpenInterest
+0005dc70: 5661 6c75 6527 2c20 2773 756d 4f70 656e  Value', 'sumOpen
+0005dc80: 496e 7465 7265 7374 5573 6427 290a 2020  InterestUsd').  
+0005dc90: 2020 2020 2020 2320 496e 7665 7273 6520        # Inverse 
+0005dca0: 7265 7475 726e 7320 7468 6520 6e75 6d62  returns the numb
+0005dcb0: 6572 206f 6620 636f 6e74 7261 6374 7320  er of contracts 
+0005dcc0: 6469 6666 6572 656e 7420 6672 6f6d 2074  different from t
+0005dcd0: 6865 2062 6173 6520 6f72 2071 756f 7465  he base or quote
+0005dce0: 2076 6f6c 756d 6520 696e 2073 656c 6620   volume in self 
+0005dcf0: 6361 7365 0a20 2020 2020 2020 2023 2063  case.        # c
+0005dd00: 6f6d 7061 7265 6420 7769 7468 2068 7474  ompared with htt
+0005dd10: 7073 3a2f 2f77 7777 2e62 696e 616e 6365  ps://www.binance
+0005dd20: 2e63 6f6d 2f65 6e2f 6675 7475 7265 732f  .com/en/futures/
+0005dd30: 6675 6e64 696e 672d 6869 7374 6f72 792f  funding-history/
+0005dd40: 7175 6172 7465 726c 792f 340a 2020 2020  quarterly/4.    
+0005dd50: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
+0005dd60: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
+0005dd70: 273a 2073 656c 662e 7361 6665 5f73 796d  ': self.safe_sym
+0005dd80: 626f 6c28 6964 2c20 6d61 726b 6574 2c20  bol(id, market, 
+0005dd90: 4e6f 6e65 2c20 2763 6f6e 7472 6163 7427  None, 'contract'
+0005dda0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0005ddb0: 6261 7365 566f 6c75 6d65 273a 204e 6f6e  baseVolume': Non
+0005ddc0: 6520 6966 206d 6172 6b65 745b 2769 6e76  e if market['inv
+0005ddd0: 6572 7365 275d 2065 6c73 6520 616d 6f75  erse'] else amou
+0005dde0: 6e74 2c20 2023 2064 6570 7265 6361 7465  nt,  # deprecate
+0005ddf0: 640a 2020 2020 2020 2020 2020 2020 2771  d.            'q
+0005de00: 756f 7465 566f 6c75 6d65 273a 2076 616c  uoteVolume': val
+0005de10: 7565 2c20 2023 2064 6570 7265 6361 7465  ue,  # deprecate
+0005de20: 640a 2020 2020 2020 2020 2020 2020 276f  d.            'o
+0005de30: 7065 6e49 6e74 6572 6573 7441 6d6f 756e  penInterestAmoun
+0005de40: 7427 3a20 616d 6f75 6e74 2c0a 2020 2020  t': amount,.    
+0005de50: 2020 2020 2020 2020 276f 7065 6e49 6e74          'openInt
+0005de60: 6572 6573 7456 616c 7565 273a 2076 616c  erestValue': val
+0005de70: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+0005de80: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
+0005de90: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
+0005dea0: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
+0005deb0: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
+0005dec0: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
+0005ded0: 2020 2020 2027 696e 666f 273a 2069 6e74       'info': int
+0005dee0: 6572 6573 742c 0a20 2020 2020 2020 207d  erest,.        }
+0005def0: 0a                                       .
```

### Comparing `ccxt-3.1.1/ccxt/binancecoinm.py` & `ccxt-3.1.2/ccxt/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/binanceus.py` & `ccxt-3.1.2/ccxt/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/binanceusdm.py` & `ccxt-3.1.2/ccxt/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bit2c.py` & `ccxt-3.1.2/ccxt/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitbank.py` & `ccxt-3.1.2/ccxt/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitbns.py` & `ccxt-3.1.2/ccxt/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitfinex.py` & `ccxt-3.1.2/ccxt/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitfinex2.py` & `ccxt-3.1.2/ccxt/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitflyer.py` & `ccxt-3.1.2/ccxt/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitforex.py` & `ccxt-3.1.2/ccxt/bitforex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitget.py` & `ccxt-3.1.2/ccxt/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bithumb.py` & `ccxt-3.1.2/ccxt/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitmart.py` & `ccxt-3.1.2/ccxt/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitmex.py` & `ccxt-3.1.2/ccxt/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitopro.py` & `ccxt-3.1.2/ccxt/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitpanda.py` & `ccxt-3.1.2/ccxt/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitrue.py` & `ccxt-3.1.2/ccxt/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitso.py` & `ccxt-3.1.2/ccxt/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitstamp.py` & `ccxt-3.1.2/ccxt/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitstamp1.py` & `ccxt-3.1.2/ccxt/bitstamp1.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bittrex.py` & `ccxt-3.1.2/ccxt/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bitvavo.py` & `ccxt-3.1.2/ccxt/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bkex.py` & `ccxt-3.1.2/ccxt/bkex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bl3p.py` & `ccxt-3.1.2/ccxt/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/blockchaincom.py` & `ccxt-3.1.2/ccxt/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/btcalpha.py` & `ccxt-3.1.2/ccxt/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/btcbox.py` & `ccxt-3.1.2/ccxt/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/btcex.py` & `ccxt-3.1.2/ccxt/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/btcmarkets.py` & `ccxt-3.1.2/ccxt/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/btctradeua.py` & `ccxt-3.1.2/ccxt/btctradeua.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/btcturk.py` & `ccxt-3.1.2/ccxt/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/buda.py` & `ccxt-3.1.2/ccxt/buda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/bybit.py` & `ccxt-3.1.2/ccxt/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/cex.py` & `ccxt-3.1.2/ccxt/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinbase.py` & `ccxt-3.1.2/ccxt/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinbaseprime.py` & `ccxt-3.1.2/ccxt/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinbasepro.py` & `ccxt-3.1.2/ccxt/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coincheck.py` & `ccxt-3.1.2/ccxt/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinex.py` & `ccxt-3.1.2/ccxt/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinfalcon.py` & `ccxt-3.1.2/ccxt/coinfalcon.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinmate.py` & `ccxt-3.1.2/ccxt/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinone.py` & `ccxt-3.1.2/ccxt/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinsph.py` & `ccxt-3.1.2/ccxt/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/coinspot.py` & `ccxt-3.1.2/ccxt/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/cryptocom.py` & `ccxt-3.1.2/ccxt/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/currencycom.py` & `ccxt-3.1.2/ccxt/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/delta.py` & `ccxt-3.1.2/ccxt/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/deribit.py` & `ccxt-3.1.2/ccxt/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/digifinex.py` & `ccxt-3.1.2/ccxt/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/exmo.py` & `ccxt-3.1.2/ccxt/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/flowbtc.py` & `ccxt-3.1.2/ccxt/flowbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/fmfwio.py` & `ccxt-3.1.2/ccxt/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/gate.py` & `ccxt-3.1.2/ccxt/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/gemini.py` & `ccxt-3.1.2/ccxt/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/hitbtc.py` & `ccxt-3.1.2/ccxt/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/hitbtc3.py` & `ccxt-3.1.2/ccxt/hitbtc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/hollaex.py` & `ccxt-3.1.2/ccxt/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/huobi.py` & `ccxt-3.1.2/ccxt/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/huobijp.py` & `ccxt-3.1.2/ccxt/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/huobipro.py` & `ccxt-3.1.2/ccxt/huobipro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/idex.py` & `ccxt-3.1.2/ccxt/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/independentreserve.py` & `ccxt-3.1.2/ccxt/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/indodax.py` & `ccxt-3.1.2/ccxt/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/itbit.py` & `ccxt-3.1.2/ccxt/itbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/kraken.py` & `ccxt-3.1.2/ccxt/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/krakenfutures.py` & `ccxt-3.1.2/ccxt/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/kucoin.py` & `ccxt-3.1.2/ccxt/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/kucoinfutures.py` & `ccxt-3.1.2/ccxt/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/kuna.py` & `ccxt-3.1.2/ccxt/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/latoken.py` & `ccxt-3.1.2/ccxt/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/lbank.py` & `ccxt-3.1.2/ccxt/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/lbank2.py` & `ccxt-3.1.2/ccxt/lbank2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/luno.py` & `ccxt-3.1.2/ccxt/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/lykke.py` & `ccxt-3.1.2/ccxt/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/mercado.py` & `ccxt-3.1.2/ccxt/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/mexc.py` & `ccxt-3.1.2/ccxt/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/ndax.py` & `ccxt-3.1.2/ccxt/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/novadax.py` & `ccxt-3.1.2/ccxt/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/oceanex.py` & `ccxt-3.1.2/ccxt/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/okcoin.py` & `ccxt-3.1.2/ccxt/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/okx.py` & `ccxt-3.1.2/ccxt/okx.py`

 * *Files 0% similar despite different names*

```diff
@@ -1535,14 +1535,31 @@
         #         "side": "sell",
         #         "sz": "0.119501",
         #         "px": "0.07065",
         #         "tradeId": "15826757",
         #         "ts": "1621446178316"
         #     }
         #
+        # option: fetchTrades
+        #
+        #     {
+        #         "fillVol": "0.46387625976562497",
+        #         "fwdPx": "26299.754935451125",
+        #         "indexPx": "26309.7",
+        #         "instFamily": "BTC-USD",
+        #         "instId": "BTC-USD-230526-26000-C",
+        #         "markPx": "0.042386283557554236",
+        #         "optType": "C",
+        #         "px": "0.0415",
+        #         "side": "sell",
+        #         "sz": "90",
+        #         "tradeId": "112",
+        #         "ts": "1683907480154"
+        #     }
+        #
         # private fetchMyTrades
         #
         #     {
         #         "side": "buy",
         #         "fillSz": "0.007533",
         #         "fillPx": "2654.98",
         #         "fee": "-0.000007533",
@@ -1598,39 +1615,68 @@
             'cost': None,
             'fee': fee,
         }, market)
 
     def fetch_trades(self, symbol: str, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
         get the list of most recent trades for a particular symbol
+        see https://www.okx.com/docs-v5/en/#rest-api-market-data-get-trades
+        see https://www.okx.com/docs-v5/en/#rest-api-public-data-get-option-trades
         :param str symbol: unified symbol of the market to fetch trades for
         :param int|None since: timestamp in ms of the earliest trade to fetch
         :param int|None limit: the maximum amount of trades to fetch
         :param dict params: extra parameters specific to the okx api endpoint
         :returns [dict]: a list of `trade structures <https://docs.ccxt.com/en/latest/manual.html?#public-trades>`
         """
         self.load_markets()
         market = self.market(symbol)
         request = {
             'instId': market['id'],
         }
-        if limit is not None:
-            request['limit'] = limit  # default 100
-        response = self.publicGetMarketTrades(self.extend(request, params))
+        response = None
+        if market['option']:
+            response = self.publicGetPublicOptionTrades(self.extend(request, params))
+        else:
+            if limit is not None:
+                request['limit'] = limit  # default 100
+            response = self.publicGetMarketTrades(self.extend(request, params))
         #
         #     {
         #         "code": "0",
         #         "msg": "",
         #         "data": [
         #             {"instId":"ETH-BTC","side":"sell","sz":"0.119501","px":"0.07065","tradeId":"15826757","ts":"1621446178316"},
         #             {"instId":"ETH-BTC","side":"sell","sz":"0.03","px":"0.07068","tradeId":"15826756","ts":"1621446178066"},
         #             {"instId":"ETH-BTC","side":"buy","sz":"0.507","px":"0.07069","tradeId":"15826755","ts":"1621446175085"},
         #         ]
         #     }
         #
+        # option
+        #
+        #     {
+        #         "code": "0",
+        #         "data": [
+        #             {
+        #                 "fillVol": "0.46387625976562497",
+        #                 "fwdPx": "26299.754935451125",
+        #                 "indexPx": "26309.7",
+        #                 "instFamily": "BTC-USD",
+        #                 "instId": "BTC-USD-230526-26000-C",
+        #                 "markPx": "0.042386283557554236",
+        #                 "optType": "C",
+        #                 "px": "0.0415",
+        #                 "side": "sell",
+        #                 "sz": "90",
+        #                 "tradeId": "112",
+        #                 "ts": "1683907480154"
+        #             },
+        #         ],
+        #         "msg": ""
+        #     }
+        #
         data = self.safe_value(response, 'data', [])
         return self.parse_trades(data, market, since, limit)
 
     def parse_ohlcv(self, ohlcv, market=None):
         #
         #     [
         #         "1678928760000",  # timestamp
```

### Comparing `ccxt-3.1.1/ccxt/paymium.py` & `ccxt-3.1.2/ccxt/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/phemex.py` & `ccxt-3.1.2/ccxt/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/poloniex.py` & `ccxt-3.1.2/ccxt/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/poloniexfutures.py` & `ccxt-3.1.2/ccxt/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/__init__.py` & `ccxt-3.1.2/ccxt/pro/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """CCXT: CryptoCurrency eXchange Trading Library (Async)"""
 
 # ----------------------------------------------------------------------------
 
-__version__ = '3.1.1'
+__version__ = '3.1.2'
 
 # ----------------------------------------------------------------------------
 
 from ccxt.base.exchange import Exchange  # noqa: F401
 
 # CCXT Pro exchanges (now this is mainly used for importing exchanges in WS tests)
```

### Comparing `ccxt-3.1.1/ccxt/pro/alpaca.py` & `ccxt-3.1.2/ccxt/pro/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/ascendex.py` & `ccxt-3.1.2/ccxt/pro/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bequant.py` & `ccxt-3.1.2/ccxt/pro/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/binance.py` & `ccxt-3.1.2/ccxt/pro/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/binancecoinm.py` & `ccxt-3.1.2/ccxt/pro/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/binanceus.py` & `ccxt-3.1.2/ccxt/pro/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/binanceusdm.py` & `ccxt-3.1.2/ccxt/pro/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitcoincom.py` & `ccxt-3.1.2/ccxt/pro/bitcoincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitfinex.py` & `ccxt-3.1.2/ccxt/pro/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitfinex2.py` & `ccxt-3.1.2/ccxt/pro/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitget.py` & `ccxt-3.1.2/ccxt/pro/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitmart.py` & `ccxt-3.1.2/ccxt/pro/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitmex.py` & `ccxt-3.1.2/ccxt/pro/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitopro.py` & `ccxt-3.1.2/ccxt/pro/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitpanda.py` & `ccxt-3.1.2/ccxt/pro/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitrue.py` & `ccxt-3.1.2/ccxt/pro/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitstamp.py` & `ccxt-3.1.2/ccxt/pro/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bittrex.py` & `ccxt-3.1.2/ccxt/pro/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bitvavo.py` & `ccxt-3.1.2/ccxt/pro/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/blockchaincom.py` & `ccxt-3.1.2/ccxt/pro/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/btcex.py` & `ccxt-3.1.2/ccxt/pro/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/bybit.py` & `ccxt-3.1.2/ccxt/pro/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/cex.py` & `ccxt-3.1.2/ccxt/pro/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/coinbaseprime.py` & `ccxt-3.1.2/ccxt/pro/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/coinbasepro.py` & `ccxt-3.1.2/ccxt/pro/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/coinex.py` & `ccxt-3.1.2/ccxt/pro/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/cryptocom.py` & `ccxt-3.1.2/ccxt/pro/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/currencycom.py` & `ccxt-3.1.2/ccxt/pro/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/deribit.py` & `ccxt-3.1.2/ccxt/pro/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/exmo.py` & `ccxt-3.1.2/ccxt/pro/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/gate.py` & `ccxt-3.1.2/ccxt/pro/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/gemini.py` & `ccxt-3.1.2/ccxt/pro/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/hitbtc.py` & `ccxt-3.1.2/ccxt/pro/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/hollaex.py` & `ccxt-3.1.2/ccxt/pro/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/huobi.py` & `ccxt-3.1.2/ccxt/pro/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/huobijp.py` & `ccxt-3.1.2/ccxt/pro/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/idex.py` & `ccxt-3.1.2/ccxt/pro/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/independentreserve.py` & `ccxt-3.1.2/ccxt/pro/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/kraken.py` & `ccxt-3.1.2/ccxt/pro/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/krakenfutures.py` & `ccxt-3.1.2/ccxt/pro/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/kucoin.py` & `ccxt-3.1.2/ccxt/pro/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/kucoinfutures.py` & `ccxt-3.1.2/ccxt/pro/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/luno.py` & `ccxt-3.1.2/ccxt/pro/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/mexc.py` & `ccxt-3.1.2/ccxt/pro/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/ndax.py` & `ccxt-3.1.2/ccxt/pro/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/okcoin.py` & `ccxt-3.1.2/ccxt/pro/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/okx.py` & `ccxt-3.1.2/ccxt/pro/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/phemex.py` & `ccxt-3.1.2/ccxt/pro/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/probit.py` & `ccxt-3.1.2/ccxt/pro/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/ripio.py` & `ccxt-3.1.2/ccxt/pro/ripio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/upbit.py` & `ccxt-3.1.2/ccxt/pro/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/wazirx.py` & `ccxt-3.1.2/ccxt/pro/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/whitebit.py` & `ccxt-3.1.2/ccxt/pro/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/woo.py` & `ccxt-3.1.2/ccxt/pro/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/pro/zb.py` & `ccxt-3.1.2/ccxt/pro/zb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/probit.py` & `ccxt-3.1.2/ccxt/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/ripio.py` & `ccxt-3.1.2/ccxt/ripio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/__init__.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/_version.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/_version.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/curves.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/curves.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/der.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/der.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/ecdsa.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/ecdsa.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/ellipticcurve.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/ellipticcurve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/keys.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/keys.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/numbertheory.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/numbertheory.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/rfc6979.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/rfc6979.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/ecdsa/util.py` & `ccxt-3.1.2/ccxt/static_dependencies/ecdsa/util.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/static_dependencies/keccak/keccak.py` & `ccxt-3.1.2/ccxt/static_dependencies/keccak/keccak.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/stex.py` & `ccxt-3.1.2/ccxt/stex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/__init__.py` & `ccxt-3.1.2/ccxt/test/base/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_account.py` & `ccxt-3.1.2/ccxt/test/base/test_account.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_balance.py` & `ccxt-3.1.2/ccxt/test/base/test_balance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_borrow_interest.py` & `ccxt-3.1.2/ccxt/test/base/test_borrow_interest.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_borrow_rate.py` & `ccxt-3.1.2/ccxt/test/base/test_borrow_rate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_calculate_fee.py` & `ccxt-3.1.2/ccxt/test/base/test_calculate_fee.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_crypto.py` & `ccxt-3.1.2/ccxt/test/base/test_crypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_currency.py` & `ccxt-3.1.2/ccxt/test/base/test_currency.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_datetime.py` & `ccxt-3.1.2/ccxt/test/base/test_datetime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_decimal_to_precision.py` & `ccxt-3.1.2/ccxt/test/base/test_decimal_to_precision.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_deep_extend.py` & `ccxt-3.1.2/ccxt/test/base/test_deep_extend.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_deposit_withdrawal.py` & `ccxt-3.1.2/ccxt/test/base/test_deposit_withdrawal.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_exchange_datetime_functions.py` & `ccxt-3.1.2/ccxt/test/base/test_exchange_datetime_functions.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_funding_rate_history.py` & `ccxt-3.1.2/ccxt/test/base/test_funding_rate_history.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_ledger_entry.py` & `ccxt-3.1.2/ccxt/test/base/test_ledger_entry.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_ledger_item.py` & `ccxt-3.1.2/ccxt/test/base/test_ledger_item.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_leverage_tier.py` & `ccxt-3.1.2/ccxt/test/base/test_leverage_tier.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_margin_modification.py` & `ccxt-3.1.2/ccxt/test/base/test_margin_modification.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_market.py` & `ccxt-3.1.2/ccxt/test/base/test_market.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_number.py` & `ccxt-3.1.2/ccxt/test/base/test_number.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_ohlcv.py` & `ccxt-3.1.2/ccxt/test/base/test_ohlcv.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_open_interest.py` & `ccxt-3.1.2/ccxt/test/base/test_open_interest.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_order.py` & `ccxt-3.1.2/ccxt/test/base/test_order.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_order_book.py` & `ccxt-3.1.2/ccxt/test/base/test_order_book.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_position.py` & `ccxt-3.1.2/ccxt/test/base/test_position.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_shared_methods.py` & `ccxt-3.1.2/ccxt/test/base/test_shared_methods.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_status.py` & `ccxt-3.1.2/ccxt/test/base/test_status.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_throttle.py` & `ccxt-3.1.2/ccxt/test/base/test_throttle.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_ticker.py` & `ccxt-3.1.2/ccxt/test/base/test_ticker.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_trade.py` & `ccxt-3.1.2/ccxt/test/base/test_trade.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_trading_fee.py` & `ccxt-3.1.2/ccxt/test/base/test_trading_fee.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/base/test_transaction.py` & `ccxt-3.1.2/ccxt/test/base/test_transaction.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/test_async.py` & `ccxt-3.1.2/ccxt/test/test_async.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/test/test_sync.py` & `ccxt-3.1.2/ccxt/test/test_sync.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/tidex.py` & `ccxt-3.1.2/ccxt/tidex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/timex.py` & `ccxt-3.1.2/ccxt/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/tokocrypto.py` & `ccxt-3.1.2/ccxt/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/upbit.py` & `ccxt-3.1.2/ccxt/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/wavesexchange.py` & `ccxt-3.1.2/ccxt/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/wazirx.py` & `ccxt-3.1.2/ccxt/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/whitebit.py` & `ccxt-3.1.2/ccxt/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/woo.py` & `ccxt-3.1.2/ccxt/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/xt.py` & `ccxt-3.1.2/ccxt/xt.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/yobit.py` & `ccxt-3.1.2/ccxt/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/zaif.py` & `ccxt-3.1.2/ccxt/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/zb.py` & `ccxt-3.1.2/ccxt/zb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt/zonda.py` & `ccxt-3.1.2/ccxt/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/ccxt.egg-info/PKG-INFO` & `ccxt-3.1.2/ccxt.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ccxt
-Version: 3.1.1
+Version: 3.1.2
 Summary: A JavaScript / Python / PHP cryptocurrency trading library with support for 130+ exchanges
 Home-page: https://ccxt.com
 Author: Igor Kroitor
 Author-email: igor.kroitor@gmail.com
 License: MIT
 Project-URL: Homepage, https://ccxt.com
 Project-URL: Documentation, https://docs.ccxt.com
@@ -227,21 +227,21 @@
         console.log(version, Object.keys(exchanges));
         ```
         
         ### JavaScript (for use with the `<script>` tag):
         
         All-in-one browser bundle (dependencies included), served from a CDN of your choice:
         
-        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.1.1/dist/ccxt.browser.js
-        * unpkg: https://unpkg.com/ccxt@3.1.1/dist/ccxt.browser.js
+        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.1.2/dist/ccxt.browser.js
+        * unpkg: https://unpkg.com/ccxt@3.1.2/dist/ccxt.browser.js
         
         CDNs are not updated in real-time and may have delays. Defaulting to the most recent version without specifying the version number is not recommended. Please, keep in mind that we are not responsible for the correct operation of those CDN servers.
         
         ```HTML
-        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.1.1/dist/ccxt.browser.js"></script>
+        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.1.2/dist/ccxt.browser.js"></script>
         ```
         
         Creates a global `ccxt` object:
         
         ```JavaScript
         console.log (ccxt.exchanges) // print all available exchanges
         ```
```

### Comparing `ccxt-3.1.1/ccxt.egg-info/SOURCES.txt` & `ccxt-3.1.2/ccxt.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `ccxt-3.1.1/package.json` & `ccxt-3.1.2/package.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9761904761904762%*

 * *Differences: {"'version'": "'3.1.2'"}*

```diff
@@ -217,9 +217,9 @@
         "update-badges": "node build/update-badges",
         "update-links": "node build/update-links",
         "vss": "node build/vss"
     },
     "type": "module",
     "types": "./js/ccxt.d.ts",
     "unpkg": "dist/ccxt.browser.js",
-    "version": "3.1.1"
+    "version": "3.1.2"
 }
```

### Comparing `ccxt-3.1.1/setup.py` & `ccxt-3.1.2/setup.py`

 * *Files identical despite different names*

